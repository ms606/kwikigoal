/*! For license information please see main.a5677b26.js.LICENSE.txt */
!function(){var e={9797:function(e,t,n){"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{Z:function(){return r}})},3840:function(e,t){!function(e){"use strict";var t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],n=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],r="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0898-\u089f\u08ca-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3c\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0cf3\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ece\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u180f-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf-\u1ace\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",i="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u0870-\u0887\u0889-\u088e\u08a0-\u08c9\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c5d\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cdd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u1711\u171f-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4c\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ca\ua7d0\ua7d1\ua7d3\ua7d5-\ua7d9\ua7f2-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",a={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},o="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:o,"5module":o+" export import",6:o+" const class extends export import super"},u=/^in(stanceof)?$/,c=new RegExp("["+i+"]"),l=new RegExp("["+i+r+"]");function h(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}return!1}function f(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==t&&h(e,n)))}function d(e,r){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&l.test(String.fromCharCode(e)):!1!==r&&(h(e,n)||h(e,t)))))}var p=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function g(e,t){return new p(e,{beforeExpr:!0,binop:t})}var v={beforeExpr:!0},m={startsExpr:!0},y={};function _(e,t){return void 0===t&&(t={}),t.keyword=e,y[e]=new p(e,t)}var b={num:new p("num",m),regexp:new p("regexp",m),string:new p("string",m),name:new p("name",m),privateId:new p("privateId",m),eof:new p("eof"),bracketL:new p("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new p("]"),braceL:new p("{",{beforeExpr:!0,startsExpr:!0}),braceR:new p("}"),parenL:new p("(",{beforeExpr:!0,startsExpr:!0}),parenR:new p(")"),comma:new p(",",v),semi:new p(";",v),colon:new p(":",v),dot:new p("."),question:new p("?",v),questionDot:new p("?."),arrow:new p("=>",v),template:new p("template"),invalidTemplate:new p("invalidTemplate"),ellipsis:new p("...",v),backQuote:new p("`",m),dollarBraceL:new p("${",{beforeExpr:!0,startsExpr:!0}),eq:new p("=",{beforeExpr:!0,isAssign:!0}),assign:new p("_=",{beforeExpr:!0,isAssign:!0}),incDec:new p("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new p("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new p("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new p("**",{beforeExpr:!0}),coalesce:g("??",1),_break:_("break"),_case:_("case",v),_catch:_("catch"),_continue:_("continue"),_debugger:_("debugger"),_default:_("default",v),_do:_("do",{isLoop:!0,beforeExpr:!0}),_else:_("else",v),_finally:_("finally"),_for:_("for",{isLoop:!0}),_function:_("function",m),_if:_("if"),_return:_("return",v),_switch:_("switch"),_throw:_("throw",v),_try:_("try"),_var:_("var"),_const:_("const"),_while:_("while",{isLoop:!0}),_with:_("with"),_new:_("new",{beforeExpr:!0,startsExpr:!0}),_this:_("this",m),_super:_("super",m),_class:_("class",m),_extends:_("extends",v),_export:_("export"),_import:_("import",m),_null:_("null",m),_true:_("true",m),_false:_("false",m),_in:_("in",{beforeExpr:!0,binop:7}),_instanceof:_("instanceof",{beforeExpr:!0,binop:7}),_typeof:_("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},x=/\r\n?|\n|\u2028|\u2029/,w=new RegExp(x.source,"g");function k(e){return 10===e||13===e||8232===e||8233===e}function S(e,t,n){void 0===n&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(k(i))return r<n-1&&13===i&&10===e.charCodeAt(r+1)?r+2:r+1}return-1}var C=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,M=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,A=Object.prototype,E=A.hasOwnProperty,T=A.toString,I=Object.hasOwn||function(e,t){return E.call(e,t)},L=Array.isArray||function(e){return"[object Array]"===T.call(e)};function O(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function P(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}var D=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,B=function(e,t){this.line=e,this.column=t};B.prototype.offset=function(e){return new B(this.line,this.column+e)};var N=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function R(e,t){for(var n=1,r=0;;){var i=S(e,r,t);if(i<0)return new B(n,t-r);++n,r=i}}var j={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},z=!1;function F(e){var t={};for(var n in j)t[n]=e&&I(e,n)?e[n]:j[n];if("latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!z&&"object"===typeof console&&console.warn&&(z=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),e&&null!=e.allowHashBang||(t.allowHashBang=t.ecmaVersion>=14),L(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return L(t.onComment)&&(t.onComment=U(t,t.onComment)),t}function U(e,t){return function(n,r,i,a,o,s){var u={type:n?"Block":"Line",value:r,start:i,end:a};e.locations&&(u.loc=new N(this,o,s)),e.ranges&&(u.range=[i,a]),t.push(u)}}var V=1,H=2,G=4,Y=8,W=16,q=32,Z=64,K=128,X=256,Q=V|H|X;function J(e,t){return H|(e?G:0)|(t?Y:0)}var $=0,ee=1,te=2,ne=3,re=4,ie=5,ae=function(e,t,n){this.options=e=F(e),this.sourceFile=e.sourceFile,this.keywords=O(s[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";!0!==e.allowReserved&&(r=a[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(r+=" await")),this.reservedWords=O(r);var i=(r?r+" ":"")+a.strict;this.reservedWordsStrict=O(i),this.reservedWordsStrictBind=O(i+" "+a.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(x).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(V),this.regexpState=null,this.privateNameStack=[]},oe={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ae.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},oe.inFunction.get=function(){return(this.currentVarScope().flags&H)>0},oe.inGenerator.get=function(){return(this.currentVarScope().flags&Y)>0&&!this.currentVarScope().inClassFieldInit},oe.inAsync.get=function(){return(this.currentVarScope().flags&G)>0&&!this.currentVarScope().inClassFieldInit},oe.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&X)return!1;if(t.flags&H)return(t.flags&G)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},oe.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Z)>0||n||this.options.allowSuperOutsideMethod},oe.allowDirectSuper.get=function(){return(this.currentThisScope().flags&K)>0},oe.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},oe.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(H|X))>0||n},oe.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&X)>0},ae.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},ae.parse=function(e,t){return new this(t,e).parse()},ae.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},ae.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(ae.prototype,oe);var se=ae.prototype,ue=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;se.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){M.lastIndex=e,e+=M.exec(this.input)[0].length;var t=ue.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){M.lastIndex=e+t[0].length;var n=M.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||x.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}e+=t[0].length,M.lastIndex=e,e+=M.exec(this.input)[0].length,";"===this.input[e]&&e++}},se.eat=function(e){return this.type===e&&(this.next(),!0)},se.isContextual=function(e){return this.type===b.name&&this.value===e&&!this.containsEsc},se.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},se.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},se.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||x.test(this.input.slice(this.lastTokEnd,this.start))},se.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},se.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},se.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},se.expect=function(e){this.eat(e)||this.unexpected()},se.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};var ce=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};se.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}},se.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},se.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},se.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var le=ae.prototype;le.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var he={kind:"loop"},fe={kind:"switch"};le.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;M.lastIndex=this.pos;var t=M.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r||92===r)return!0;if(e)return!1;if(123===r||r>55295&&r<56320)return!0;if(f(r,!0)){for(var i=n+1;d(r=this.input.charCodeAt(i),!0);)++i;if(92===r||r>55295&&r<56320)return!0;var a=this.input.slice(n,i);if(!u.test(a))return!0}return!1},le.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;M.lastIndex=this.pos;var e,t=M.exec(this.input),n=this.pos+t[0].length;return!x.test(this.input.slice(this.pos,n))&&"function"===this.input.slice(n,n+8)&&(n+8===this.input.length||!(d(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},le.parseStatement=function(e,t,n){var r,i=this.type,a=this.startNode();switch(this.isLet(e)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(a,i.keyword);case b._debugger:return this.parseDebuggerStatement(a);case b._do:return this.parseDoStatement(a);case b._for:return this.parseForStatement(a);case b._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!e);case b._class:return e&&this.unexpected(),this.parseClass(a,!0);case b._if:return this.parseIfStatement(a);case b._return:return this.parseReturnStatement(a);case b._switch:return this.parseSwitchStatement(a);case b._throw:return this.parseThrowStatement(a);case b._try:return this.parseTryStatement(a);case b._const:case b._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case b._while:return this.parseWhileStatement(a);case b._with:return this.parseWithStatement(a);case b.braceL:return this.parseBlock(!0,a);case b.semi:return this.parseEmptyStatement(a);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){M.lastIndex=this.pos;var o=M.exec(this.input),s=this.pos+o[0].length,u=this.input.charCodeAt(s);if(40===u||46===u)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!e);var c=this.value,l=this.parseExpression();return i===b.name&&"Identifier"===l.type&&this.eat(b.colon)?this.parseLabeledStatement(a,c,l,e):this.parseExpressionStatement(a,l)}},le.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(b.semi)||this.insertSemicolon()?e.label=null:this.type!==b.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},le.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},le.parseDoStatement=function(e){return this.next(),this.labels.push(he),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},le.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(he),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var a=this.isContextual("let"),o=!1,s=new ce,u=this.parseExpression(!(t>-1)||"await",s);return this.type===b._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),a&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,s),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))},le.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,pe|(n?0:ge),!1,t)},le.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},le.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},le.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(b.braceL),this.labels.push(fe),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(b.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},le.parseThrowStatement=function(e){return this.next(),x.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var de=[];le.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===b._catch){var t=this.startNode();if(this.next(),this.eat(b.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?q:0),this.checkLValPattern(t.param,n?re:te),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(b._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},le.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},le.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(he),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},le.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},le.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},le.parseLabeledStatement=function(e,t,n,r){for(var i=0,a=this.labels;i<a.length;i+=1)a[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===b._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=this.labels[s];if(u.statementStart!==e.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},le.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},le.parseBlock=function(e,t,n){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(b.braceL),e&&this.enterScope(0);this.type!==b.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},le.parseFor=function(e,t){return e.init=t,this.expect(b.semi),e.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),e.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},le.parseForIn=function(e,t){var n=this.type===b._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},le.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(b.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return e},le.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?ee:te,!1)};var pe=1,ge=2,ve=4;function me(e,t){var n=t.key.name,r=e[n],i="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(i=(t.static?"s":"i")+t.kind),"iget"===r&&"iset"===i||"iset"===r&&"iget"===i||"sget"===r&&"sset"===i||"sset"===r&&"sget"===i?(e[n]="true",!1):!!r||(e[n]=i,!1)}function ye(e,t){var n=e.computed,r=e.key;return!n&&("Identifier"===r.type&&r.name===t||"Literal"===r.type&&r.value===t)}le.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&t&ge&&this.unexpected(),e.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&pe&&(e.id=t&ve&&this.type!==b.name?null:this.parseIdent(),!e.id||t&ge||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?ee:te:ne));var a=this.yieldPos,o=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(J(e.async,e.generator)),t&pe||(e.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=a,this.awaitPos=o,this.awaitIdentPos=s,this.finishNode(e,t&pe?"FunctionDeclaration":"FunctionExpression")},le.parseFunctionParams=function(e){this.expect(b.parenL),e.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},le.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),a=!1;for(i.body=[],this.expect(b.braceL);this.type!==b.braceR;){var o=this.parseClassElement(null!==e.superClass);o&&(i.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind?(a&&this.raise(o.start,"Duplicate constructor in the same class"),a=!0):o.key&&"PrivateIdentifier"===o.key.type&&me(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},le.parseClassElement=function(e){if(this.eat(b.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,a=!1,o="method",s=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(b.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===b.star?s=!0:r="static"}if(n.static=s,!r&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==b.star||this.canInsertSemicolon()?r="async":a=!0),!r&&(t>=9||!a)&&this.eat(b.star)&&(i=!0),!r&&!a&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===b.parenL||"method"!==o||i||a){var c=!n.static&&ye(n,"constructor"),l=c&&e;c&&"method"!==o&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":o,this.parseClassMethod(n,i,a,l)}else this.parseClassField(n);return n},le.isClassElementNameStart=function(){return this.type===b.name||this.type===b.privateId||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword},le.parseClassElementName=function(e){this.type===b.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},le.parseClassMethod=function(e,t,n,r){var i=e.key;"constructor"===e.kind?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&ye(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var a=e.value=this.parseMethod(t,n,r);return"get"===e.kind&&0!==a.params.length&&this.raiseRecoverable(a.start,"getter should have no params"),"set"===e.kind&&1!==a.params.length&&this.raiseRecoverable(a.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===a.params[0].type&&this.raiseRecoverable(a.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},le.parseClassField=function(e){if(ye(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&ye(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(b.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")},le.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(X|Z);this.type!==b.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},le.parseClassId=function(e,t){this.type===b.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,te,!1)):(!0===t&&this.unexpected(),e.id=null)},le.parseClassSuper=function(e){e.superClass=this.eat(b._extends)?this.parseExprSubscripts(null,!1):null},le.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},le.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,n=e.used,r=this.privateNameStack.length,i=0===r?null:this.privateNameStack[r-1],a=0;a<n.length;++a){var o=n[a];I(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}},le.parseExport=function(e,t){if(this.next(),this.eat(b.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,pe|ve,!1,n)}else if(this.type===b._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var a=0,o=e.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local),"Literal"===s.local.type&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},le.checkExport=function(e,t,n){e&&("string"!==typeof t&&(t="Identifier"===t.type?t.name:t.value),I(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},le.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(e,a)}else if("ArrayPattern"===n)for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(e,u)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},le.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},le.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},le.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseModuleExportName(),r.exported=this.eatContextual("as")?this.parseModuleExportName():r.local,this.checkExport(e,r.exported,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},le.parseImport=function(e){return this.next(),this.type===b.string?(e.specifiers=de,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},le.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,te),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return e}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLValSimple(r.local,te),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(b.braceL);!this.eat(b.braceR);){if(t)t=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,te),e.push(this.finishNode(i,"ImportSpecifier"))}return e},le.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===b.string){var e=this.parseLiteral(this.value);return D.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},le.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},le.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var _e=ae.prototype;_e.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,t),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},_e.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var a=e[n-1];6===this.options.ecmaVersion&&t&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return e},_e.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},_e.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},_e.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},_e.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(b.comma),t&&this.type===b.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},_e.parseBindingListItem=function(e){return e},_e.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},_e.checkLValSimple=function(e,t,n){void 0===t&&(t=$);var r=t!==$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===te&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(I(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==ie&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}},_e.checkLValPattern=function(e,t,n){switch(void 0===t&&(t=$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,t,n)}break;case"ArrayPattern":for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}},_e.checkLValInnerPattern=function(e,t,n){switch(void 0===t&&(t=$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var be=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},xe={b_stat:new be("{",!1),b_expr:new be("{",!0),b_tmpl:new be("${",!1),p_stat:new be("(",!1),p_expr:new be("(",!0),q_tmpl:new be("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new be("function",!1),f_expr:new be("function",!0),f_expr_gen:new be("function",!0,!1,null,!0),f_gen:new be("function",!1,!1,null,!0)},we=ae.prototype;we.initialContext=function(){return[xe.b_stat]},we.curContext=function(){return this.context[this.context.length-1]},we.braceIsBlock=function(e){var t=this.curContext();return t===xe.f_expr||t===xe.f_stat||(e!==b.colon||t!==xe.b_stat&&t!==xe.b_expr?e===b._return||e===b.name&&this.exprAllowed?x.test(this.input.slice(this.lastTokEnd,this.start)):e===b._else||e===b.semi||e===b.eof||e===b.parenR||e===b.arrow||(e===b.braceL?t===xe.b_stat:e!==b._var&&e!==b._const&&e!==b.name&&!this.exprAllowed):!t.isExpr)},we.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},we.updateContext=function(e){var t,n=this.type;n.keyword&&e===b.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},we.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===xe.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?xe.b_stat:xe.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(xe.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(e){var t=e===b._if||e===b._for||e===b._with||e===b._while;this.context.push(t?xe.p_stat:xe.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(e){!e.beforeExpr||e===b._else||e===b.semi&&this.curContext()!==xe.p_stat||e===b._return&&x.test(this.input.slice(this.lastTokEnd,this.start))||(e===b.colon||e===b.braceL)&&this.curContext()===xe.b_stat?this.context.push(xe.f_stat):this.context.push(xe.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===xe.q_tmpl?this.context.pop():this.context.push(xe.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(e){if(e===b._function){var t=this.context.length-1;this.context[t]===xe.f_expr?this.context[t]=xe.f_expr_gen:this.context[t]=xe.f_gen}this.exprAllowed=!0},b.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ke=ae.prototype;function Se(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&Se(e.expression)}ke.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var o=t[r="$"+r];o?("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):o=t[r]={init:!1,get:!1,set:!1},o[a]=!0}}},ke.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===b.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(b.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return i},ke.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,a=-1,o=-1;t?(i=t.parenthesizedAssign,a=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new ce,r=!0);var s=this.start,u=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,s,u)),this.type.isAssign){var l=this.startNodeAt(s,u);return l.operator=this.value,this.type===b.eq&&(c=this.toAssignable(c,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.start&&(t.shorthandAssign=-1),this.type===b.eq?this.checkLValPattern(c):this.checkLValSimple(c),l.left=c,this.next(),l.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(l,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),a>-1&&(t.trailingComma=a),c},ke.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(b.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(b.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return i},ke.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},ke.parseExprOp=function(e,t,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==b._in)&&a>r){var o=this.type===b.logicalOR||this.type===b.logicalAND,s=this.type===b.coalesce;s&&(a=b.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),c,l,a,i),f=this.buildBinary(t,n,e,h,u,o||s);return(o&&this.type===b.coalesce||s&&(this.type===b.logicalOR||this.type===b.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,r,i)}return e},ke.buildBinary=function(e,t,n,r,i,a){"PrivateIdentifier"===r.type&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},ke.parseMaybeUnary=function(e,t,n,r){var i,a=this.start,o=this.startLoc;if(this.isContextual("await")&&this.canAwait)i=this.parseAwait(r),t=!0;else if(this.type.prefix){var s=this.startNode(),u=this.type===b.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):"delete"===s.operator&&Se(s.argument)?this.raiseRecoverable(s.start,"Private fields can not be deleted"):t=!0,i=this.finishNode(s,u?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==b.privateId){if(i=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(a,o);c.operator=this.value,c.prefix=!1,c.argument=i,this.checkLValSimple(i),this.next(),i=this.finishNode(c,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.unexpected(),i=this.parsePrivateIdent(),this.type!==b._in&&this.unexpected();return n||!this.eat(b.starstar)?i:t?void this.unexpected(this.lastTokStart):this.buildBinary(a,o,i,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},ke.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var a=this.parseSubscripts(i,n,r,!1,t);return e&&"MemberExpression"===a.type&&(e.parenthesizedAssign>=a.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=a.start&&(e.parenthesizedBind=-1),e.trailingComma>=a.start&&(e.trailingComma=-1)),a},ke.parseSubscripts=function(e,t,n,r,i){for(var a=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var s=this.parseSubscript(e,t,n,r,a,o,i);if(s.optional&&(o=!0),s===e||"ArrowFunctionExpression"===s.type){if(o){var u=this.startNodeAt(t,n);u.expression=s,s=this.finishNode(u,"ChainExpression")}return s}e=s}},ke.parseSubscript=function(e,t,n,r,i,a,o){var s=this.options.ecmaVersion>=11,u=s&&this.eat(b.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(b.bracketL);if(c||u&&this.type!==b.parenL&&this.type!==b.backQuote||this.eat(b.dot)){var l=this.startNodeAt(t,n);l.object=e,c?(l.property=this.parseExpression(),this.expect(b.bracketR)):this.type===b.privateId&&"Super"!==e.type?l.property=this.parsePrivateIdent():l.property=this.parseIdent("never"!==this.options.allowReserved),l.computed=!!c,s&&(l.optional=u),e=this.finishNode(l,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var h=new ce,f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,h);if(i&&!u&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(t,n),g,!0,o);this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var v=this.startNodeAt(t,n);v.callee=e,v.arguments=g,s&&(v.optional=u),e=this.finishNode(v,"CallExpression")}else if(this.type===b.backQuote){(u||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(t,n);m.tag=e,m.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(m,"TaggedTemplateExpression")}return e},ke.parseExprAtom=function(e,t){this.type===b.slash&&this.readRegexp();var n,r=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(n,"Super");case b._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case b.name:var i=this.start,a=this.startLoc,o=this.containsEsc,s=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.overrideContext(xe.f_expr),this.parseFunction(this.startNodeAt(i,a),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(i,a),[s],!1,t);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===b.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return s=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,a),[s],!0,t)}return s;case b.regexp:var u=this.value;return(n=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},n;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(n=this.startNode()).value=this.type===b._null?null:this.type===b._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case b.parenL:var c=this.start,l=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),l;case b.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(b.bracketR,!0,!0,e),this.finishNode(n,"ArrayExpression");case b.braceL:return this.overrideContext(xe.b_expr),this.parseObj(!1,e);case b._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},ke.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case b.parenL:return this.parseDynamicImport(e);case b.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}},ke.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var t=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},ke.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},ke.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},ke.parseParenExpression=function(){this.expect(b.parenL);var e=this.parseExpression();return this.expect(b.parenR),e},ke.parseParenAndDistinguishExpression=function(e,t){var n,r=this.start,i=this.startLoc,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,s=this.start,u=this.startLoc,c=[],l=!0,h=!1,f=new ce,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(l?l=!1:this.expect(b.comma),a&&this.afterTrailingComma(b.parenR,!0)){h=!0;break}if(this.type===b.ellipsis){o=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,f,this.parseParenItem))}var g=this.lastTokEnd,v=this.lastTokEndLoc;if(this.expect(b.parenR),e&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(r,i,c,t);c.length&&!h||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,c.length>1?((n=this.startNodeAt(s,u)).expressions=c,this.finishNodeAt(n,"SequenceExpression",g,v)):n=c[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,i);return m.expression=n,this.finishNode(m,"ParenthesizedExpression")}return n},ke.parseParenItem=function(e){return e},ke.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Ce=[];ke.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===b._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0,!1),a&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(b.parenL)?e.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Ce,this.finishNode(e,"NewExpression")},ke.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},ke.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},ke.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!x.test(this.input.slice(this.lastTokEnd,this.start))},ke.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var a=this.parseProperty(e,t);e||this.checkPropClash(a,i,t),n.properties.push(a)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},ke.parseProperty=function(e,t){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(o.argument=this.parseMaybeAssign(!1,t),this.type===b.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||t)&&(i=this.start,a=this.startLoc),e||(n=this.eat(b.star)));var s=this.containsEsc;return this.parsePropertyName(o),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(o)):r=!1,this.parsePropertyValue(o,e,n,r,i,a,t,s),this.finishNode(o,"Property")},ke.parsePropertyValue=function(e,t,n,r,i,a,o,s){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===b.comma||this.type===b.braceR||this.type===b.eq)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key)):this.type===b.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},ke.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(b.bracketR),e.key;e.computed=!1}return e.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},ke.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},ke.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(J(t,r.generator)|Z|(n?K:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},ke.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(J(n,!1)|W),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},ke.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==b.braceL,a=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);a&&!s||(o=this.strictDirective(this.end))&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!a&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,ie),e.body=this.parseBlock(!1,void 0,o&&!a),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()},ke.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},ke.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,ee,t?null:n)}},ke.parseExprList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);){if(a)a=!1;else if(this.expect(b.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===b.comma?o=null:this.type===b.ellipsis?(o=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},ke.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===r&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==r&&"await"!==r||this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},ke.parseIdent=function(e){var t=this.startNode();return this.type===b.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,"class"!==t.name&&"function"!==t.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name||this.awaitIdentPos||(this.awaitIdentPos=t.start)),t},ke.parsePrivateIdent=function(){var e=this.startNode();return this.type===b.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e},ke.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(b.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},ke.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Me=ae.prototype;Me.raise=function(e,t){var n=R(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Me.raiseRecoverable=Me.raise,Me.curPosition=function(){if(this.options.locations)return new B(this.curLine,this.pos-this.lineStart)};var Ae=ae.prototype,Ee=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Ae.enterScope=function(e){this.scopeStack.push(new Ee(e))},Ae.exitScope=function(){this.scopeStack.pop()},Ae.treatFunctionsAsVarInScope=function(e){return e.flags&H||!this.inModule&&e.flags&V},Ae.declareName=function(e,t,n){var r=!1;if(t===te){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&V&&delete this.undefinedExports[e]}else if(t===re)this.currentScope().lexical.push(e);else if(t===ne){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(e)>-1:a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(e)>-1&&!(s.flags&q&&s.lexical[0]===e)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(e)>-1){r=!0;break}if(s.var.push(e),this.inModule&&s.flags&V&&delete this.undefinedExports[e],s.flags&Q)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},Ae.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},Ae.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Ae.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Q)return t}},Ae.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Q&&!(t.flags&W))return t}};var Te=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new N(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},Ie=ae.prototype;function Le(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Ie.startNode=function(){return new Te(this,this.start,this.startLoc)},Ie.startNodeAt=function(e,t){return new Te(this,e,t)},Ie.finishNode=function(e,t){return Le.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},Ie.finishNodeAt=function(e,t,n,r){return Le.call(this,e,t,n,r)},Ie.copyNode=function(e){var t=new Te(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Oe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Pe=Oe+" Extended_Pictographic",De=Pe+" EBase EComp EMod EPres ExtPict",Be={9:Oe,10:Pe,11:Pe,12:De,13:De,14:De},Ne="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Re="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",je=Re+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ze=je+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Fe=ze+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ue=Fe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ve={9:Re,10:je,11:ze,12:Fe,13:Ue,14:Ue+" Kawi Nag_Mundari Nagm"},He={};function Ge(e){var t=He[e]={binary:O(Be[e]+" "+Ne),nonBinary:{General_Category:O(Ne),Script:O(Ve[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Ye=0,We=[9,10,11,12,13,14];Ye<We.length;Ye+=1)Ge(We[Ye]);var qe=ae.prototype,Ze=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":""),this.unicodeProperties=He[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Ke(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function Xe(e){return f(e,!0)||36===e||95===e}function Qe(e){return d(e,!0)||36===e||95===e||8204===e||8205===e}function Je(e){return e>=65&&e<=90||e>=97&&e<=122}function $e(e){return e>=0&&e<=1114111}function et(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function tt(e){return Je(e)||95===e}function nt(e){return tt(e)||rt(e)}function rt(e){return e>=48&&e<=57}function it(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function at(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function ot(e){return e>=48&&e<=55}Ze.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Ze.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Ze.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var i=n.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=r)return i;var a=n.charCodeAt(e+1);return a>=56320&&a<=57343?(i<<10)+a-56613888:i},Ze.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var i,a=n.charCodeAt(e);return!t&&!this.switchU||a<=55295||a>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2},Ze.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},Ze.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},Ze.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},Ze.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},qe.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},qe.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},qe.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},qe.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},qe.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},qe.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},qe.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},qe.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},qe.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},qe.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},qe.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},qe.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},qe.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},qe.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},qe.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},qe.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},qe.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!Ke(t)&&(e.lastIntValue=t,e.advance(),!0)},qe.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!Ke(n);)e.advance();return e.pos!==t},qe.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},qe.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},qe.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},qe.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=P(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=P(e.lastIntValue);return!0}return!1},qe.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Xe(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},qe.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Qe(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},qe.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},qe.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},qe.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},qe.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},qe.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},qe.regexp_eatZero=function(e){return 48===e.current()&&!rt(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},qe.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},qe.regexp_eatControlLetter=function(e){var t=e.current();return!!Je(t)&&(e.lastIntValue=t%32,e.advance(),!0)},qe.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var a=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(i-55296)+(o-56320)+65536,!0}e.pos=a,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&$e(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1},qe.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},qe.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},qe.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(et(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},qe.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},qe.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){I(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},qe.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},qe.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";tt(t=e.current());)e.lastStringValue+=P(t),e.advance();return""!==e.lastStringValue},qe.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";nt(t=e.current());)e.lastStringValue+=P(t),e.advance();return""!==e.lastStringValue},qe.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},qe.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},qe.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},qe.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||ot(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},qe.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},qe.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!rt(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},qe.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},qe.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;rt(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},qe.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;it(n=e.current());)e.lastIntValue=16*e.lastIntValue+at(n),e.advance();return e.pos!==t},qe.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},qe.regexp_eatOctalDigit=function(e){var t=e.current();return ot(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},qe.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!it(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+at(i),e.advance()}return!0};var st=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new N(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},ut=ae.prototype;function ct(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function lt(e){return"function"!==typeof BigInt?null:BigInt(e.replace(/_/g,""))}ut.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new st(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ut.getToken=function(){return this.next(),new st(this)},"undefined"!==typeof Symbol&&(ut[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===b.eof,value:t}}}}),ut.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},ut.readToken=function(e){return f(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},ut.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},ut.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=S(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},ut.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!k(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},ut.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&C.test(String.fromCharCode(e))))break e;++this.pos}}},ut.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},ut.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},ut.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},ut.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=b.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(b.assign,n+1):this.finishOp(r,n)},ut.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(124===e?b.logicalOR:b.logicalAND,2):61===t?this.finishOp(b.assign,2):this.finishOp(124===e?b.bitwiseOR:b.bitwiseAND,1)},ut.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},ut.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!x.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},ut.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ut.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===e?b.eq:b.prefix,1)},ut.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(b.questionDot,2)}if(63===t)return e>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(b.coalesce,2)}return this.finishOp(b.question,1)},ut.readToken_numberSign=function(){var e=35;if(this.options.ecmaVersion>=13&&(++this.pos,f(e=this.fullCharCodeAtPos(),!0)||92===e))return this.finishToken(b.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+P(e)+"'")},ut.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(b.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+P(e)+"'")},ut.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},ut.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(x.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new Ze(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,o)}catch(c){}return this.finishToken(b.regexp,{pattern:i,flags:o,value:u})},ut.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,i=n&&48===this.input.charCodeAt(this.pos),a=this.pos,o=0,s=0,u=0,c=null==t?1/0:t;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),h=void 0;if(r&&95===l)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===s&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=l;else{if((h=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=e)break;s=l,o=o*e+h}}return r&&95===s&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===a||null!=t&&this.pos-a!==t?null:o},ut.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=lt(this.input.slice(t,this.pos)),++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},ut.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=lt(this.input.slice(t,this.pos));return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a=ct(this.input.slice(t,this.pos),n);return this.finishToken(b.num,a)},ut.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},ut.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):8232===r||8233===r?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(k(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(b.string,t)};var ht={};ut.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==ht)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ut.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ht;this.raise(e,t)},ut.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(b.template,e)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(k(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},ut.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ut.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return P(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return k(t)?"":String.fromCharCode(t)}},ut.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},ut.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(d(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?f:d)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),e+=P(o),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},ut.readWord=function(){var e=this.readWord1(),t=b.name;return this.keywords.test(e)&&(t=y[e]),this.finishToken(t,e)};var ft="8.8.2";function dt(e,t){return ae.parse(e,t)}function pt(e,t,n){return ae.parseExpressionAt(e,t,n)}function gt(e,t){return ae.tokenizer(e,t)}ae.acorn={Parser:ae,version:ft,defaultOptions:j,Position:B,SourceLocation:N,getLineInfo:R,Node:Te,TokenType:p,tokTypes:b,keywordTypes:y,TokContext:be,tokContexts:xe,isIdentifierChar:d,isIdentifierStart:f,Token:st,isNewLine:k,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:C},e.Node=Te,e.Parser=ae,e.Position=B,e.SourceLocation=N,e.TokContext=be,e.Token=st,e.TokenType=p,e.defaultOptions=j,e.getLineInfo=R,e.isIdentifierChar=d,e.isIdentifierStart=f,e.isNewLine=k,e.keywordTypes=y,e.lineBreak=x,e.lineBreakG=w,e.nonASCIIwhitespace=C,e.parse=dt,e.parseExpressionAt=pt,e.tokContexts=xe,e.tokTypes=b,e.tokenizer=gt,e.version=ft}(t)},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),g=u(n),v=0;v<o.length;++v){var m=o[v];if(!a[m]&&(!r||!r[m])&&(!g||!g[m])&&(!s||!s[m])){var y=f(n,m);try{c(t,m,y)}catch(_){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case v:case g:case u:return e;default:return t}}case i:return t}}}function w(e){return x(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=v,t.Memo=g,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||x(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===f},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===v},t.isMemo=function(e){return x(e)===g},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b||e.$$typeof===m)},t.typeOf=x},8309:function(e,t,n){"use strict";e.exports=n(746)},763:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,c=32,l=64,h=128,f=256,d=1/0,p=9007199254740991,g=NaN,v=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",f]],y="[object Arguments]",_="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",k="[object Function]",S="[object GeneratorFunction]",C="[object Map]",M="[object Number]",A="[object Object]",E="[object Promise]",T="[object RegExp]",I="[object Set]",L="[object String]",O="[object Symbol]",P="[object WeakMap]",D="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",j="[object Int8Array]",z="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",H="[object Uint16Array]",G="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(Z.source),Q=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Me="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Le="['\u2019]",Oe="["+Se+"]",Pe="["+Ie+"]",De="["+Ce+"]",Be="\\d+",Ne="["+Me+"]",Re="["+Ae+"]",je="[^"+Se+Ie+Be+Me+Ae+Ee+"]",ze="\\ud83c[\\udffb-\\udfff]",Fe="[^"+Se+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Ee+"]",Ge="\\u200d",Ye="(?:"+Re+"|"+je+")",We="(?:"+He+"|"+je+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+De+"|"+ze+")"+"?",Xe="["+Te+"]?",Qe=Xe+Ke+("(?:"+Ge+"(?:"+[Fe,Ue,Ve].join("|")+")"+Xe+Ke+")*"),Je="(?:"+[Ne,Ue,Ve].join("|")+")"+Qe,$e="(?:"+[Fe+De+"?",De,Ue,Ve,Oe].join("|")+")",et=RegExp(Le,"g"),tt=RegExp(De,"g"),nt=RegExp(ze+"(?="+ze+")|"+$e+Qe,"g"),rt=RegExp([He+"?"+Re+"+"+qe+"(?="+[Pe,He,"$"].join("|")+")",We+"+"+Ze+"(?="+[Pe,He+Ye,"$"].join("|")+")",He+"?"+Ye+"+"+qe,He+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,Je].join("|"),"g"),it=RegExp("["+Ge+Se+Ce+Te+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,ut={};ut[N]=ut[R]=ut[j]=ut[z]=ut[F]=ut[U]=ut[V]=ut[H]=ut[G]=!0,ut[y]=ut[_]=ut[D]=ut[b]=ut[B]=ut[x]=ut[w]=ut[k]=ut[C]=ut[M]=ut[A]=ut[T]=ut[I]=ut[L]=ut[P]=!1;var ct={};ct[y]=ct[_]=ct[D]=ct[B]=ct[b]=ct[x]=ct[N]=ct[R]=ct[j]=ct[z]=ct[F]=ct[C]=ct[M]=ct[A]=ct[T]=ct[I]=ct[L]=ct[O]=ct[U]=ct[V]=ct[H]=ct[G]=!0,ct[w]=ct[k]=ct[P]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,ft=parseInt,dt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=dt||pt||Function("return this")(),vt=t&&!t.nodeType&&t,mt=vt&&e&&!e.nodeType&&e,yt=mt&&mt.exports===vt,_t=yt&&dt.process,bt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||_t&&_t.binding&&_t.binding("util")}catch(t){}}(),xt=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,kt=bt&&bt.isMap,St=bt&&bt.isRegExp,Ct=bt&&bt.isSet,Mt=bt&&bt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Pt(e,t){return!!(null==e?0:e.length)&&Ht(e,t,0)>-1}function Dt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=qt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Ht(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,Yt,n)}function Gt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Yt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:g}function qt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Xt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function $t(e){return function(t){return e(t)}}function en(e,t){return Bt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var an=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+lt[e]}function un(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return un(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Ft(e)}function gn(e){return un(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?gt:yn.defaults(gt.Object(),t,yn.pick(gt,ot))).Array,r=t.Date,se=t.Error,Se=t.Function,Ce=t.Math,Me=t.Object,Ae=t.RegExp,Ee=t.String,Te=t.TypeError,Ie=n.prototype,Le=Se.prototype,Oe=Me.prototype,Pe=t["__core-js_shared__"],De=Le.toString,Be=Oe.hasOwnProperty,Ne=0,Re=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),je=Oe.toString,ze=De.call(Me),Fe=gt._,Ue=Ae("^"+De.call(Be).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=yt?t.Buffer:i,He=t.Symbol,Ge=t.Uint8Array,Ye=Ve?Ve.allocUnsafe:i,We=ln(Me.getPrototypeOf,Me),qe=Me.create,Ze=Oe.propertyIsEnumerable,Ke=Ie.splice,Xe=He?He.isConcatSpreadable:i,Qe=He?He.iterator:i,Je=He?He.toStringTag:i,$e=function(){try{var e=ha(Me,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,it=r&&r.now!==gt.Date.now&&r.now,lt=t.setTimeout!==gt.setTimeout&&t.setTimeout,dt=Ce.ceil,pt=Ce.floor,vt=Me.getOwnPropertySymbols,mt=Ve?Ve.isBuffer:i,_t=t.isFinite,bt=Ie.join,Ft=ln(Me.keys,Me),Zt=Ce.max,_n=Ce.min,bn=r.now,xn=t.parseInt,wn=Ce.random,kn=Ie.reverse,Sn=ha(t,"DataView"),Cn=ha(t,"Map"),Mn=ha(t,"Promise"),An=ha(t,"Set"),En=ha(t,"WeakMap"),Tn=ha(Me,"create"),In=En&&new En,Ln={},On=Ra(Sn),Pn=Ra(Cn),Dn=Ra(Mn),Bn=Ra(An),Nn=Ra(En),Rn=He?He.prototype:i,jn=Rn?Rn.valueOf:i,zn=Rn?Rn.toString:i;function Fn(e){if(ts(e)&&!Go(e)&&!(e instanceof Gn)){if(e instanceof Hn)return e;if(Be.call(e,"__wrapped__"))return ja(e)}return new Hn(e)}var Un=function(){function e(){}return function(t){if(!es(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Xn(e,t){var n=Go(e),r=!n&&Ho(e),i=!n&&!r&&Zo(e),a=!n&&!r&&!i&&cs(e),o=n||r||i||a,s=o?Qt(e.length,Ee):[],u=s.length;for(var c in e)!t&&!Be.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ya(c,u))||s.push(c);return s}function Qn(e){var t=e.length;return t?e[Zr(0,t-1)]:i}function Jn(e,t){return Da(Ti(e),sr(t,0,e.length))}function $n(e){return Da(Ti(e))}function er(e,t,n){(n!==i&&!Fo(e[t],n)||n===i&&!(t in e))&&ar(e,t,n)}function tr(e,t,n){var r=e[t];Be.call(e,t)&&Fo(r,n)&&(n!==i||t in e)||ar(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Fo(e[n][0],t))return n;return-1}function rr(e,t,n,r){return fr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ir(e,t){return e&&Ii(t,Ls(t),e)}function ar(e,t,n){"__proto__"==t&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Ms(e,t[r]);return o}function sr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,a,o){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!es(e))return e;var h=Go(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ti(e,s)}else{var f=pa(e),d=f==k||f==S;if(Zo(e))return ki(e,u);if(f==A||f==y||d&&!a){if(s=c||d?{}:va(e),!u)return c?function(e,t){return Ii(e,da(e),t)}(e,function(e,t){return e&&Ii(t,Os(t),e)}(s,e)):function(e,t){return Ii(e,fa(e),t)}(e,ir(s,e))}else{if(!ct[f])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case D:return Si(e);case b:case x:return new r(+e);case B:return function(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case j:case z:case F:case U:case V:case H:case G:return Ci(e,n);case C:return new r;case M:case L:return new r(e);case T:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new r;case O:return i=e,jn?Me(jn.call(i)):{}}var i}(e,f,u)}}o||(o=new Kn);var p=o.get(e);if(p)return p;o.set(e,s),os(e)?e.forEach((function(r){s.add(ur(r,t,n,r,e,o))})):ns(e)&&e.forEach((function(r,i){s.set(i,ur(r,t,n,i,e,o))}));var g=h?i:(l?c?ia:ra:c?Os:Ls)(e);return Tt(g||e,(function(r,i){g&&(r=e[i=r]),tr(s,i,ur(r,t,n,i,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Me(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function lr(e,t,n){if("function"!=typeof e)throw new Te(a);return Ia((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=Pt,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Bt(t,$t(n))),r?(a=Dt,o=!1):t.length>=200&&(a=tn,o=!1,t=new Zn(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h===h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else a(t,h,r)||u.push(l)}return u}Fn.templateSettings={escape:J,evaluate:$,interpolate:ee,variable:"",imports:{_:Fn}},Fn.prototype=Vn.prototype,Fn.prototype.constructor=Fn,Hn.prototype=Un(Vn.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Un(Vn.prototype),Gn.prototype.constructor=Gn,Yn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return n===o?i:n}return Be.call(t,e)?t[e]:i},Yn.prototype.has=function(e){var t=this.__data__;return Tn?t[e]!==i:Be.call(t,e)},Yn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&t===i?o:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return nr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Cn||Wn),string:new Yn}},qn.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ca(this,e).get(e)},qn.prototype.has=function(e){return ca(this,e).has(e)},qn.prototype.set=function(e,t){var n=ca(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,o),this},Zn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Cn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var fr=Pi(br),dr=Pi(xr,!0);function pr(e,t){var n=!0;return fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(u===i?s===s&&!us(s):n(s,u)))var u=s,c=o}return c}function vr(e,t){var n=[];return fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function mr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ma),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?mr(s,t-1,n,r,i):Nt(i,s):r||(i[i.length]=s)}return i}var yr=Di(),_r=Di(!0);function br(e,t){return e&&yr(e,t,Ls)}function xr(e,t){return e&&_r(e,t,Ls)}function wr(e,t){return Ot(t,(function(t){return Qo(e[t])}))}function kr(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[Na(t[n++])];return n&&n==r?e:i}function Sr(e,t,n){var r=t(e);return Go(e)?r:Nt(r,n(e))}function Cr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in Me(e)?function(e){var t=Be.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(o){}var a=je.call(e);r&&(t?e[Je]=n:delete e[Je]);return a}(e):function(e){return je.call(e)}(e)}function Mr(e,t){return e>t}function Ar(e,t){return null!=e&&Be.call(e,t)}function Er(e,t){return null!=e&&t in Me(e)}function Tr(e,t,r){for(var a=r?Dt:Pt,o=e[0].length,s=e.length,u=s,c=n(s),l=1/0,h=[];u--;){var f=e[u];u&&t&&(f=Bt(f,$t(t))),l=_n(f.length,l),c[u]=!r&&(t||o>=120&&f.length>=120)?new Zn(u&&f):i}f=e[0];var d=-1,p=c[0];e:for(;++d<o&&h.length<l;){var g=f[d],v=t?t(g):g;if(g=r||0!==g?g:0,!(p?tn(p,v):a(h,v,r))){for(u=s;--u;){var m=c[u];if(!(m?tn(m,v):a(e[u],v,r)))continue e}p&&p.push(v),h.push(g)}}return h}function Ir(e,t,n){var r=null==(e=Aa(e,t=_i(t,e)))?e:e[Na(Ka(t))];return null==r?i:At(r,e,n)}function Lr(e){return ts(e)&&Cr(e)==y}function Or(e,t,n,r,a){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=Go(e),u=Go(t),c=s?_:pa(e),l=u?_:pa(t),h=(c=c==y?A:c)==A,f=(l=l==y?A:l)==A,d=c==l;if(d&&Zo(e)){if(!Zo(t))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Kn),s||cs(e)?ta(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!a(new Ge(e),new Ge(t)));case b:case x:case M:return Fo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case T:case L:return e==t+"";case C:var s=cn;case I:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=ta(s(e),s(t),r,i,a,o);return o.delete(e),l;case O:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var p=h&&Be.call(e,"__wrapped__"),g=f&&Be.call(t,"__wrapped__");if(p||g){var v=p?e.value():e,m=g?t.value():t;return o||(o=new Kn),a(v,m,n,r,o)}}if(!d)return!1;return o||(o=new Kn),function(e,t,n,r,a,o){var s=1&n,u=ra(e),c=u.length,l=ra(t),h=l.length;if(c!=h&&!s)return!1;var f=c;for(;f--;){var d=u[f];if(!(s?d in t:Be.call(t,d)))return!1}var p=o.get(e),g=o.get(t);if(p&&g)return p==t&&g==e;var v=!0;o.set(e,t),o.set(t,e);var m=s;for(;++f<c;){var y=e[d=u[f]],_=t[d];if(r)var b=s?r(_,y,d,t,e,o):r(y,_,d,e,t,o);if(!(b===i?y===_||a(y,_,n,r,o):b)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o)}(e,t,n,r,Or,a))}function Pr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Me(e);a--;){var u=n[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var c=(u=n[a])[0],l=e[c],h=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var f=new Kn;if(r)var d=r(l,h,c,e,t,f);if(!(d===i?Or(h,l,3,r,f):d))return!1}}return!0}function Dr(e){return!(!es(e)||(t=e,Re&&Re in t))&&(Qo(e)?Ue:ye).test(Ra(e));var t}function Br(e){return"function"==typeof e?e:null==e?ru:"object"==typeof e?Go(e)?Ur(e[0],e[1]):Fr(e):fu(e)}function Nr(e){if(!ka(e))return Ft(e);var t=[];for(var n in Me(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Rr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in Me(e))t.push(n);return t}(e);var t=ka(e),n=[];for(var r in e)("constructor"!=r||!t&&Be.call(e,r))&&n.push(r);return n}function jr(e,t){return e<t}function zr(e,t){var r=-1,i=Wo(e)?n(e.length):[];return fr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Fr(e){var t=la(e);return 1==t.length&&t[0][2]?Ca(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Ur(e,t){return ba(e)&&Sa(t)?Ca(Na(e),t):function(n){var r=Ms(n,e);return r===i&&r===t?As(n,e):Or(t,r,3)}}function Vr(e,t,n,r,a){e!==t&&yr(t,(function(o,s){if(a||(a=new Kn),es(o))!function(e,t,n,r,a,o,s){var u=Ea(e,n),c=Ea(t,n),l=s.get(c);if(l)return void er(e,n,l);var h=o?o(u,c,n+"",e,t,s):i,f=h===i;if(f){var d=Go(c),p=!d&&Zo(c),g=!d&&!p&&cs(c);h=c,d||p||g?Go(u)?h=u:qo(u)?h=Ti(u):p?(f=!1,h=ki(c,!0)):g?(f=!1,h=Ci(c,!0)):h=[]:is(c)||Ho(c)?(h=u,Ho(u)?h=ms(u):es(u)&&!Qo(u)||(h=va(c))):f=!1}f&&(s.set(c,h),a(h,c,r,o,s),s.delete(c));er(e,n,h)}(e,t,s,n,Vr,r,a);else{var u=r?r(Ea(e,s),o,s+"",e,t,a):i;u===i&&(u=o),er(e,s,u)}}),Os)}function Hr(e,t){var n=e.length;if(n)return ya(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?Bt(t,(function(e){return Go(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[ru];var r=-1;t=Bt(t,$t(ua()));var i=zr(e,(function(e,n,i){var a=Bt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var u=Mi(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Yr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=kr(e,o);n(s,o)&&$r(a,_i(o,e),s)}return a}function Wr(e,t,n,r){var i=r?Gt:Ht,a=-1,o=t.length,s=e;for(e===t&&(t=Ti(t)),n&&(s=Bt(e,$t(n)));++a<o;)for(var u=0,c=t[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ke.call(s,u,1),Ke.call(e,u,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ya(i)?Ke.call(e,i,1):hi(e,i)}}return e}function Zr(e,t){return e+pt(wn()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return La(Ma(e,t,ru),e+"")}function Qr(e){return Qn(Fs(e))}function Jr(e,t){var n=Fs(e);return Da(n,sr(t,0,n.length))}function $r(e,t,n,r){if(!es(e))return e;for(var a=-1,o=(t=_i(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var c=Na(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=es(h)?h:ya(t[a+1])?[]:{})}tr(u,c,l),u=u[c]}return e}var ei=In?function(e,t){return In.set(e,t),e}:ru,ti=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:eu(t),writable:!0})}:ru;function ni(e){return Da(Fs(e))}function ri(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ii(e,t){var n;return fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!us(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return oi(e,t,ru,n)}function oi(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,c=us(t),l=t===i;a<o;){var h=pt((a+o)/2),f=n(e[h]),d=f!==i,p=null===f,g=f===f,v=us(f);if(s)var m=r||g;else m=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!v):!p&&!v&&(r?f<=t:f<t);m?a=h+1:o=h}return _n(o,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Fo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ui(e){return"number"==typeof e?e:us(e)?g:+e}function ci(e){if("string"==typeof e)return e;if(Go(e))return Bt(e,ci)+"";if(us(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Pt,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Dt;else if(a>=200){var c=t?null:Ki(e);if(c)return fn(c);o=!1,i=tn,u=new Zn}else u=t?[]:s;e:for(;++r<a;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function hi(e,t){return null==(e=Aa(e,t=_i(t,e)))||delete e[Na(Ka(t))]}function fi(e,t,n,r){return $r(e,t,n(kr(e,t)),r)}function di(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ri(e,r?0:a,r?a+1:i):ri(e,r?a+1:0,r?i:a)}function pi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),n)}function gi(e,t,r){var i=e.length;if(i<2)return i?li(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=hr(o[a]||s,e[u],t,r));return li(mr(o,1),t,r)}function vi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var u=r<o?t[r]:i;n(s,e[r],u)}return s}function mi(e){return qo(e)?e:[]}function yi(e){return"function"==typeof e?e:ru}function _i(e,t){return Go(e)?e:ba(e,t)?[e]:Ba(ys(e))}var bi=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var wi=nt||function(e){return gt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=Ye?Ye(n):new e.constructor(n);return e.copy(r),r}function Si(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Ci(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Mi(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=us(e),s=t!==i,u=null===t,c=t===t,l=us(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!l&&e<t||l&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}function Ai(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,c=t.length,l=Zt(o-s,0),h=n(c+l),f=!i;++u<c;)h[u]=t[u];for(;++a<s;)(f||a<o)&&(h[r[a]]=e[a]);for(;l--;)h[u++]=e[a++];return h}function Ei(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,c=-1,l=t.length,h=Zt(o-u,0),f=n(h+l),d=!i;++a<h;)f[a]=e[a];for(var p=a;++c<l;)f[p+c]=t[c];for(;++s<u;)(d||a<o)&&(f[p+r[s]]=e[a++]);return f}function Ti(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ii(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),a?ar(n,u,c):tr(n,u,c)}return n}function Li(e,t){return function(n,r){var i=Go(n)?Et:rr,a=t?t():{};return i(n,e,ua(r,2),a)}}function Oi(e){return Xr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&_a(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Me(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!Wo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Me(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Di(e){return function(t,n,r){for(var i=-1,a=Me(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function Bi(e){return function(t){var n=un(t=ys(t))?gn(t):i,r=n?n[0]:t.charAt(0),a=n?xi(n,1).join(""):t.slice(1);return r[e]()+a}}function Ni(e){return function(t){return Rt(Qs(Hs(t).replace(et,"")),e,"")}}function Ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function ji(e){return function(t,n,r){var a=Me(t);if(!Wo(t)){var o=ua(n,3);t=Ls(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function zi(e){return na((function(t){var n=t.length,r=n,o=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Te(a);if(o&&!u&&"wrapper"==oa(s))var u=new Hn([],!0)}for(r=u?r:n;++r<n;){var c=oa(s=t[r]),l="wrapper"==c?aa(s):i;u=l&&xa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[oa(l[0])].apply(u,l[3]):1==s.length&&xa(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Go(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Fi(e,t,r,a,o,s,u,c,l,f){var d=t&h,p=1&t,g=2&t,v=24&t,m=512&t,y=g?i:Ri(e);return function h(){for(var _=arguments.length,b=n(_),x=_;x--;)b[x]=arguments[x];if(v)var w=sa(h),k=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(a&&(b=Ai(b,a,o,v)),s&&(b=Ei(b,s,u,v)),_-=k,v&&_<f){var S=hn(b,w);return qi(e,t,Fi,h.placeholder,r,b,S,c,l,f-_)}var C=p?r:this,M=g?C[e]:e;return _=b.length,c?b=function(e,t){var n=e.length,r=_n(t.length,n),a=Ti(e);for(;r--;){var o=t[r];e[r]=ya(o,n)?a[o]:i}return e}(b,c):m&&_>1&&b.reverse(),d&&l<_&&(b.length=l),this&&this!==gt&&this instanceof h&&(M=y||Ri(M)),M.apply(C,b)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=ui(n),r=ui(r)),a=e(n,r)}return a}}function Hi(e){return na((function(t){return t=Bt(t,$t(ua())),Xr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Gi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,dt(e/pn(t)));return un(t)?xi(gn(r),0,e).join(""):r.slice(0,e)}function Yi(e){return function(t,r,a){return a&&"number"!=typeof a&&_a(t,r,a)&&(r=a=i),t=ds(t),r===i?(r=t,t=0):r=ds(r),function(e,t,r,i){for(var a=-1,o=Zt(dt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:ds(a),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function qi(e,t,n,r,a,o,s,u,h,f){var d=8&t;t|=d?c:l,4&(t&=~(d?l:c))||(t&=-4);var p=[e,t,a,d?o:i,d?s:i,d?i:o,d?i:s,u,h,f],g=n.apply(i,p);return xa(e)&&Ta(g,p),g.placeholder=r,Oa(g,e,t)}function Zi(e){var t=Ce[e];return function(e,n){if(e=vs(e),(n=null==n?0:_n(ps(n),292))&&_t(e)){var r=(ys(e)+"e").split("e");return+((r=(ys(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=An&&1/fn(new An([,-0]))[1]==d?function(e){return new An(e)}:uu;function Xi(e){return function(t){var n=pa(t);return n==C?cn(t):n==I?dn(t):function(e,t){return Bt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qi(e,t,r,o,d,p,g,v){var m=2&t;if(!m&&"function"!=typeof e)throw new Te(a);var y=o?o.length:0;if(y||(t&=-97,o=d=i),g=g===i?g:Zt(ps(g),0),v=v===i?v:ps(v),y-=d?d.length:0,t&l){var _=o,b=d;o=d=i}var x=m?i:aa(e),w=[e,t,r,o,d,_,b,p,g,v];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==h&&8==n||r==h&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ai(c,u,t[4]):u,e[4]=c?hn(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ei(c,u,t[6]):u,e[6]=c?hn(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&h&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],o=w[3],d=w[4],!(v=w[9]=w[9]===i?m?0:e.length:Zt(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==u?function(e,t,r){var a=Ri(e);return function o(){for(var s=arguments.length,u=n(s),c=s,l=sa(o);c--;)u[c]=arguments[c];var h=s<3&&u[0]!==l&&u[s-1]!==l?[]:hn(u,l);return(s-=h.length)<r?qi(e,t,Fi,o.placeholder,i,u,h,i,i,r-s):At(this&&this!==gt&&this instanceof o?a:e,this,u)}}(e,t,v):t!=c&&33!=t||d.length?Fi.apply(i,w):function(e,t,r,i){var a=1&t,o=Ri(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,h=n(l+u),f=this&&this!==gt&&this instanceof t?o:e;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++s];return At(f,a?r:this,h)}}(e,t,r,o);else var k=function(e,t,n){var r=1&t,i=Ri(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Oa((x?ei:Ta)(k,w),e,t)}function Ji(e,t,n,r){return e===i||Fo(e,Oe[n])&&!Be.call(r,n)?t:e}function $i(e,t,n,r,a,o){return es(e)&&es(t)&&(o.set(t,e),Vr(e,t,i,$i,o),o.delete(t)),e}function ea(e){return is(e)?i:e}function ta(e,t,n,r,a,o){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),h=o.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=2&n?new Zn:i;for(o.set(e,t),o.set(t,e);++f<u;){var g=e[f],v=t[f];if(r)var m=s?r(v,g,f,t,e,o):r(g,v,f,e,t,o);if(m!==i){if(m)continue;d=!1;break}if(p){if(!zt(t,(function(e,t){if(!tn(p,t)&&(g===e||a(g,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(g!==v&&!a(g,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function na(e){return La(Ma(e,i,Ga),e+"")}function ra(e){return Sr(e,Ls,fa)}function ia(e){return Sr(e,Os,da)}var aa=In?function(e){return In.get(e)}:uu;function oa(e){for(var t=e.name+"",n=Ln[t],r=Be.call(Ln,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function sa(e){return(Be.call(Fn,"placeholder")?Fn:e).placeholder}function ua(){var e=Fn.iteratee||iu;return e=e===iu?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function la(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Sa(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Dr(n)?n:i}var fa=vt?function(e){return null==e?[]:(e=Me(e),Ot(vt(e),(function(t){return Ze.call(e,t)})))}:gu,da=vt?function(e){for(var t=[];e;)Nt(t,fa(e)),e=We(e);return t}:gu,pa=Cr;function ga(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,a=!1;++r<i;){var o=Na(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&$o(i)&&ya(o,i)&&(Go(e)||Ho(e))}function va(e){return"function"!=typeof e.constructor||ka(e)?{}:Un(We(e))}function ma(e){return Go(e)||Ho(e)||!!(Xe&&e&&e[Xe])}function ya(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function _a(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?Wo(n)&&ya(t,n.length):"string"==r&&t in n)&&Fo(n[t],e)}function ba(e,t){if(Go(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!us(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Me(t))}function xa(e){var t=oa(e),n=Fn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=aa(n);return!!r&&e===r[0]}(Sn&&pa(new Sn(new ArrayBuffer(1)))!=B||Cn&&pa(new Cn)!=C||Mn&&pa(Mn.resolve())!=E||An&&pa(new An)!=I||En&&pa(new En)!=P)&&(pa=function(e){var t=Cr(e),n=t==A?e.constructor:i,r=n?Ra(n):"";if(r)switch(r){case On:return B;case Pn:return C;case Dn:return E;case Bn:return I;case Nn:return P}return t});var wa=Pe?Qo:vu;function ka(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Sa(e){return e===e&&!es(e)}function Ca(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Me(n)))}}function Ma(e,t,r){return t=Zt(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=Zt(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),At(e,this,u)}}function Aa(e,t){return t.length<2?e:kr(e,ri(t,0,-1))}function Ea(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ta=Pa(ei),Ia=lt||function(e,t){return gt.setTimeout(e,t)},La=Pa(ti);function Oa(e,t,n){var r=t+"";return La(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(m,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(r),n)))}function Pa(e){var t=0,n=0;return function(){var r=bn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Da(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Zr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ba=function(e){var t=Do(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Na(e){if("string"==typeof e||us(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ra(e){if(null!=e){try{return De.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ja(e){if(e instanceof Gn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Ti(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var za=Xr((function(e,t){return qo(e)?hr(e,mr(t,1,qo,!0)):[]})),Fa=Xr((function(e,t){var n=Ka(t);return qo(n)&&(n=i),qo(e)?hr(e,mr(t,1,qo,!0),ua(n,2)):[]})),Ua=Xr((function(e,t){var n=Ka(t);return qo(n)&&(n=i),qo(e)?hr(e,mr(t,1,qo,!0),i,n):[]}));function Va(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Zt(r+i,0)),Vt(e,ua(t,3),i)}function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ps(n),a=n<0?Zt(r+a,0):_n(a,r-1)),Vt(e,ua(t,3),a,!0)}function Ga(e){return(null==e?0:e.length)?mr(e,1):[]}function Ya(e){return e&&e.length?e[0]:i}var Wa=Xr((function(e){var t=Bt(e,mi);return t.length&&t[0]===e[0]?Tr(t):[]})),qa=Xr((function(e){var t=Ka(e),n=Bt(e,mi);return t===Ka(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Tr(n,ua(t,2)):[]})),Za=Xr((function(e){var t=Ka(e),n=Bt(e,mi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Tr(n,i,t):[]}));function Ka(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xa=Xr(Qa);function Qa(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var Ja=na((function(e,t){var n=null==e?0:e.length,r=or(e,t);return qr(e,Bt(t,(function(e){return ya(e,n)?+e:e})).sort(Mi)),r}));function $a(e){return null==e?e:kn.call(e)}var eo=Xr((function(e){return li(mr(e,1,qo,!0))})),to=Xr((function(e){var t=Ka(e);return qo(t)&&(t=i),li(mr(e,1,qo,!0),ua(t,2))})),no=Xr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,li(mr(e,1,qo,!0),i,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(qo(e))return t=Zt(e.length,t),!0})),Qt(t,(function(t){return Bt(e,qt(t))}))}function io(e,t){if(!e||!e.length)return[];var n=ro(e);return null==t?n:Bt(n,(function(e){return At(t,i,e)}))}var ao=Xr((function(e,t){return qo(e)?hr(e,t):[]})),oo=Xr((function(e){return gi(Ot(e,qo))})),so=Xr((function(e){var t=Ka(e);return qo(t)&&(t=i),gi(Ot(e,qo),ua(t,2))})),uo=Xr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,gi(Ot(e,qo),i,t)})),co=Xr(ro);var lo=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,io(e,n)}));function ho(e){var t=Fn(e);return t.__chain__=!0,t}function fo(e,t){return t(e)}var po=na((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&ya(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fo,args:[a],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var go=Li((function(e,t,n){Be.call(e,n)?++e[n]:ar(e,n,1)}));var vo=ji(Va),mo=ji(Ha);function yo(e,t){return(Go(e)?Tt:fr)(e,ua(t,3))}function _o(e,t){return(Go(e)?It:dr)(e,ua(t,3))}var bo=Li((function(e,t,n){Be.call(e,n)?e[n].push(t):ar(e,n,[t])}));var xo=Xr((function(e,t,r){var i=-1,a="function"==typeof t,o=Wo(e)?n(e.length):[];return fr(e,(function(e){o[++i]=a?At(t,e,r):Ir(e,t,r)})),o})),wo=Li((function(e,t,n){ar(e,n,t)}));function ko(e,t){return(Go(e)?Bt:zr)(e,ua(t,3))}var So=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Co=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_a(e,t[0],t[1])?t=[]:n>2&&_a(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,mr(t,1),[])})),Mo=it||function(){return gt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Qi(e,h,i,i,i,i,t)}function Eo(e,t){var n;if("function"!=typeof t)throw new Te(a);return e=ps(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var To=Xr((function(e,t,n){var r=1;if(n.length){var i=hn(n,sa(To));r|=c}return Qi(e,r,t,n,i)})),Io=Xr((function(e,t,n){var r=3;if(n.length){var i=hn(n,sa(Io));r|=c}return Qi(t,r,e,n,i)}));function Lo(e,t,n){var r,o,s,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Te(a);function g(t){var n=r,a=o;return r=o=i,h=t,u=e.apply(a,n)}function v(e){var n=e-l;return l===i||n>=t||n<0||d&&e-h>=s}function m(){var e=Mo();if(v(e))return y(e);c=Ia(m,function(e){var n=t-(e-l);return d?_n(n,s-(e-h)):n}(e))}function y(e){return c=i,p&&r?g(e):(r=o=i,u)}function _(){var e=Mo(),n=v(e);if(r=arguments,o=this,l=e,n){if(c===i)return function(e){return h=e,c=Ia(m,t),f?g(e):u}(l);if(d)return wi(c),c=Ia(m,t),g(l)}return c===i&&(c=Ia(m,t)),u}return t=vs(t)||0,es(n)&&(f=!!n.leading,s=(d="maxWait"in n)?Zt(vs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&wi(c),h=0,r=l=o=c=i},_.flush=function(){return c===i?u:y(Mo())},_}var Oo=Xr((function(e,t){return lr(e,1,t)})),Po=Xr((function(e,t,n){return lr(e,vs(t)||0,n)}));function Do(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Do.Cache||qn),n}function Bo(e){if("function"!=typeof e)throw new Te(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Do.Cache=qn;var No=bi((function(e,t){var n=(t=1==t.length&&Go(t[0])?Bt(t[0],$t(ua())):Bt(mr(t,1),$t(ua()))).length;return Xr((function(r){for(var i=-1,a=_n(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return At(e,this,r)}))})),Ro=Xr((function(e,t){var n=hn(t,sa(Ro));return Qi(e,c,i,t,n)})),jo=Xr((function(e,t){var n=hn(t,sa(jo));return Qi(e,l,i,t,n)})),zo=na((function(e,t){return Qi(e,f,i,i,i,t)}));function Fo(e,t){return e===t||e!==e&&t!==t}var Uo=Wi(Mr),Vo=Wi((function(e,t){return e>=t})),Ho=Lr(function(){return arguments}())?Lr:function(e){return ts(e)&&Be.call(e,"callee")&&!Ze.call(e,"callee")},Go=n.isArray,Yo=xt?$t(xt):function(e){return ts(e)&&Cr(e)==D};function Wo(e){return null!=e&&$o(e.length)&&!Qo(e)}function qo(e){return ts(e)&&Wo(e)}var Zo=mt||vu,Ko=wt?$t(wt):function(e){return ts(e)&&Cr(e)==x};function Xo(e){if(!ts(e))return!1;var t=Cr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Qo(e){if(!es(e))return!1;var t=Cr(e);return t==k||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jo(e){return"number"==typeof e&&e==ps(e)}function $o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=kt?$t(kt):function(e){return ts(e)&&pa(e)==C};function rs(e){return"number"==typeof e||ts(e)&&Cr(e)==M}function is(e){if(!ts(e)||Cr(e)!=A)return!1;var t=We(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&De.call(n)==ze}var as=St?$t(St):function(e){return ts(e)&&Cr(e)==T};var os=Ct?$t(Ct):function(e){return ts(e)&&pa(e)==I};function ss(e){return"string"==typeof e||!Go(e)&&ts(e)&&Cr(e)==L}function us(e){return"symbol"==typeof e||ts(e)&&Cr(e)==O}var cs=Mt?$t(Mt):function(e){return ts(e)&&$o(e.length)&&!!ut[Cr(e)]};var ls=Wi(jr),hs=Wi((function(e,t){return e<=t}));function fs(e){if(!e)return[];if(Wo(e))return ss(e)?gn(e):Ti(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=pa(e);return(t==C?cn:t==I?fn:Fs)(e)}function ds(e){return e?(e=vs(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ps(e){var t=ds(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?sr(ps(e),0,v):0}function vs(e){if("number"==typeof e)return e;if(us(e))return g;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=me.test(e);return n||_e.test(e)?ft(e.slice(2),n?2:8):ve.test(e)?g:+e}function ms(e){return Ii(e,Os(e))}function ys(e){return null==e?"":ci(e)}var _s=Oi((function(e,t){if(ka(t)||Wo(t))Ii(t,Ls(t),e);else for(var n in t)Be.call(t,n)&&tr(e,n,t[n])})),bs=Oi((function(e,t){Ii(t,Os(t),e)})),xs=Oi((function(e,t,n,r){Ii(t,Os(t),e,r)})),ws=Oi((function(e,t,n,r){Ii(t,Ls(t),e,r)})),ks=na(or);var Ss=Xr((function(e,t){e=Me(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&_a(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Os(o),u=-1,c=s.length;++u<c;){var l=s[u],h=e[l];(h===i||Fo(h,Oe[l])&&!Be.call(e,l))&&(e[l]=o[l])}return e})),Cs=Xr((function(e){return e.push(i,$i),At(Ds,i,e)}));function Ms(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function As(e,t){return null!=e&&ga(e,t,Er)}var Es=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=n}),eu(ru)),Ts=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]}),ua),Is=Xr(Ir);function Ls(e){return Wo(e)?Xn(e):Nr(e)}function Os(e){return Wo(e)?Xn(e,!0):Rr(e)}var Ps=Oi((function(e,t,n){Vr(e,t,n)})),Ds=Oi((function(e,t,n,r){Vr(e,t,n,r)})),Bs=na((function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Ii(e,ia(e),n),r&&(n=ur(n,7,ea));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Ns=na((function(e,t){return null==e?{}:function(e,t){return Yr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function Rs(e,t){if(null==e)return{};var n=Bt(ia(e),(function(e){return[e]}));return t=ua(t),Yr(e,n,(function(e,n){return t(e,n[0])}))}var js=Xi(Ls),zs=Xi(Os);function Fs(e){return null==e?[]:en(e,Ls(e))}var Us=Ni((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return Xs(ys(e).toLowerCase())}function Hs(e){return(e=ys(e))&&e.replace(xe,an).replace(tt,"")}var Gs=Ni((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ys=Ni((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ws=Bi("toLowerCase");var qs=Ni((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Zs=Ni((function(e,t,n){return e+(n?" ":"")+Xs(t)}));var Ks=Ni((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xs=Bi("toUpperCase");function Qs(e,t,n){return e=ys(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Js=Xr((function(e,t){try{return At(e,i,t)}catch(n){return Xo(n)?n:new se(n)}})),$s=na((function(e,t){return Tt(t,(function(t){t=Na(t),ar(e,t,To(e[t],e))})),e}));function eu(e){return function(){return e}}var tu=zi(),nu=zi(!0);function ru(e){return e}function iu(e){return Br("function"==typeof e?e:ur(e,1))}var au=Xr((function(e,t){return function(n){return Ir(n,e,t)}})),ou=Xr((function(e,t){return function(n){return Ir(e,n,t)}}));function su(e,t,n){var r=Ls(t),i=wr(t,r);null!=n||es(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Ls(t)));var a=!(es(n)&&"chain"in n)||!!n.chain,o=Qo(e);return Tt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Ti(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})})),e}function uu(){}var cu=Hi(Bt),lu=Hi(Lt),hu=Hi(zt);function fu(e){return ba(e)?qt(Na(e)):function(e){return function(t){return kr(t,e)}}(e)}var du=Yi(),pu=Yi(!0);function gu(){return[]}function vu(){return!1}var mu=Vi((function(e,t){return e+t}),0),yu=Zi("ceil"),_u=Vi((function(e,t){return e/t}),1),bu=Zi("floor");var xu=Vi((function(e,t){return e*t}),1),wu=Zi("round"),ku=Vi((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Te(a);return e=ps(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Ao,Fn.assign=_s,Fn.assignIn=bs,Fn.assignInWith=xs,Fn.assignWith=ws,Fn.at=ks,Fn.before=Eo,Fn.bind=To,Fn.bindAll=$s,Fn.bindKey=Io,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Go(e)?e:[e]},Fn.chain=ho,Fn.chunk=function(e,t,r){t=(r?_a(e,t,r):t===i)?1:Zt(ps(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(dt(a/t));o<a;)u[s++]=ri(e,o,o+=t);return u},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Nt(Go(r)?Ti(r):[r],mr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=ua();return e=t?Bt(e,(function(e){if("function"!=typeof e[1])throw new Te(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Ls(e);return function(n){return cr(n,e,t)}}(ur(e,1))},Fn.constant=eu,Fn.countBy=go,Fn.create=function(e,t){var n=Un(e);return null==t?n:ir(n,t)},Fn.curry=function e(t,n,r){var a=Qi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Fn.curryRight=function e(t,n,r){var a=Qi(t,u,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Fn.debounce=Lo,Fn.defaults=Ss,Fn.defaultsDeep=Cs,Fn.defer=Oo,Fn.delay=Po,Fn.difference=za,Fn.differenceBy=Fa,Fn.differenceWith=Ua,Fn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:ps(t))<0?0:t,r):[]},Fn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:ps(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!0):[]},Fn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_a(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ps(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ps(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Fn.filter=function(e,t){return(Go(e)?Ot:vr)(e,ua(t,3))},Fn.flatMap=function(e,t){return mr(ko(e,t),1)},Fn.flatMapDeep=function(e,t){return mr(ko(e,t),d)},Fn.flatMapDepth=function(e,t,n){return n=n===i?1:ps(n),mr(ko(e,t),n)},Fn.flatten=Ga,Fn.flattenDeep=function(e){return(null==e?0:e.length)?mr(e,d):[]},Fn.flattenDepth=function(e,t){return(null==e?0:e.length)?mr(e,t=t===i?1:ps(t)):[]},Fn.flip=function(e){return Qi(e,512)},Fn.flow=tu,Fn.flowRight=nu,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Fn.functions=function(e){return null==e?[]:wr(e,Ls(e))},Fn.functionsIn=function(e){return null==e?[]:wr(e,Os(e))},Fn.groupBy=bo,Fn.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},Fn.intersection=Wa,Fn.intersectionBy=qa,Fn.intersectionWith=Za,Fn.invert=Es,Fn.invertBy=Ts,Fn.invokeMap=xo,Fn.iteratee=iu,Fn.keyBy=wo,Fn.keys=Ls,Fn.keysIn=Os,Fn.map=ko,Fn.mapKeys=function(e,t){var n={};return t=ua(t,3),br(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Fn.mapValues=function(e,t){var n={};return t=ua(t,3),br(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Fn.matches=function(e){return Fr(ur(e,1))},Fn.matchesProperty=function(e,t){return Ur(e,ur(t,1))},Fn.memoize=Do,Fn.merge=Ps,Fn.mergeWith=Ds,Fn.method=au,Fn.methodOf=ou,Fn.mixin=su,Fn.negate=Bo,Fn.nthArg=function(e){return e=ps(e),Xr((function(t){return Hr(t,e)}))},Fn.omit=Bs,Fn.omitBy=function(e,t){return Rs(e,Bo(ua(t)))},Fn.once=function(e){return Eo(2,e)},Fn.orderBy=function(e,t,n,r){return null==e?[]:(Go(t)||(t=null==t?[]:[t]),Go(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},Fn.over=cu,Fn.overArgs=No,Fn.overEvery=lu,Fn.overSome=hu,Fn.partial=Ro,Fn.partialRight=jo,Fn.partition=So,Fn.pick=Ns,Fn.pickBy=Rs,Fn.property=fu,Fn.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},Fn.pull=Xa,Fn.pullAll=Qa,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,ua(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},Fn.pullAt=Ja,Fn.range=du,Fn.rangeRight=pu,Fn.rearg=zo,Fn.reject=function(e,t){return(Go(e)?Ot:vr)(e,Bo(ua(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ua(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return qr(e,i),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Te(a);return Xr(e,t=t===i?t:ps(t))},Fn.reverse=$a,Fn.sampleSize=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ps(t),(Go(e)?Jn:Jr)(e,t)},Fn.set=function(e,t,n){return null==e?e:$r(e,t,n)},Fn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:$r(e,t,n,r)},Fn.shuffle=function(e){return(Go(e)?$n:ni)(e)},Fn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_a(e,t,n)?(t=0,n=r):(t=null==t?0:ps(t),n=n===i?r:ps(n)),ri(e,t,n)):[]},Fn.sortBy=Co,Fn.sortedUniq=function(e){return e&&e.length?si(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?si(e,ua(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&_a(e,t,n)&&(t=n=i),(n=n===i?v:n>>>0)?(e=ys(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=ci(t))&&un(e)?xi(gn(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Te(a);return t=null==t?0:Zt(ps(t),0),Xr((function(n){var r=n[t],i=xi(n,0,t);return r&&Nt(i,r),At(e,this,i)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:ps(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:ps(t)))<0?0:t,r):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?di(e,ua(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Te(a);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lo(e,t,{leading:r,maxWait:t,trailing:i})},Fn.thru=fo,Fn.toArray=fs,Fn.toPairs=js,Fn.toPairsIn=zs,Fn.toPath=function(e){return Go(e)?Bt(e,Na):us(e)?[e]:Ti(Ba(ys(e)))},Fn.toPlainObject=ms,Fn.transform=function(e,t,n){var r=Go(e),i=r||Zo(e)||cs(e);if(t=ua(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:es(e)&&Qo(a)?Un(We(e)):{}}return(i?Tt:br)(e,(function(e,r,i){return t(n,e,r,i)})),n},Fn.unary=function(e){return Ao(e,1)},Fn.union=eo,Fn.unionBy=to,Fn.unionWith=no,Fn.uniq=function(e){return e&&e.length?li(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?li(e,ua(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?li(e,i,t):[]},Fn.unset=function(e,t){return null==e||hi(e,t)},Fn.unzip=ro,Fn.unzipWith=io,Fn.update=function(e,t,n){return null==e?e:fi(e,t,yi(n))},Fn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:fi(e,t,yi(n),r)},Fn.values=Fs,Fn.valuesIn=function(e){return null==e?[]:en(e,Os(e))},Fn.without=ao,Fn.words=Qs,Fn.wrap=function(e,t){return Ro(yi(t),e)},Fn.xor=oo,Fn.xorBy=so,Fn.xorWith=uo,Fn.zip=co,Fn.zipObject=function(e,t){return vi(e||[],t||[],tr)},Fn.zipObjectDeep=function(e,t){return vi(e||[],t||[],$r)},Fn.zipWith=lo,Fn.entries=js,Fn.entriesIn=zs,Fn.extend=bs,Fn.extendWith=xs,su(Fn,Fn),Fn.add=mu,Fn.attempt=Js,Fn.camelCase=Us,Fn.capitalize=Vs,Fn.ceil=yu,Fn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=vs(n))===n?n:0),t!==i&&(t=(t=vs(t))===t?t:0),sr(vs(e),t,n)},Fn.clone=function(e){return ur(e,4)},Fn.cloneDeep=function(e){return ur(e,5)},Fn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},Fn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},Fn.conformsTo=function(e,t){return null==t||cr(e,t,Ls(t))},Fn.deburr=Hs,Fn.defaultTo=function(e,t){return null==e||e!==e?t:e},Fn.divide=_u,Fn.endsWith=function(e,t,n){e=ys(e),t=ci(t);var r=e.length,a=n=n===i?r:sr(ps(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Fn.eq=Fo,Fn.escape=function(e){return(e=ys(e))&&Q.test(e)?e.replace(K,on):e},Fn.escapeRegExp=function(e){return(e=ys(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Fn.every=function(e,t,n){var r=Go(e)?Lt:pr;return n&&_a(e,t,n)&&(t=i),r(e,ua(t,3))},Fn.find=vo,Fn.findIndex=Va,Fn.findKey=function(e,t){return Ut(e,ua(t,3),br)},Fn.findLast=mo,Fn.findLastIndex=Ha,Fn.findLastKey=function(e,t){return Ut(e,ua(t,3),xr)},Fn.floor=bu,Fn.forEach=yo,Fn.forEachRight=_o,Fn.forIn=function(e,t){return null==e?e:yr(e,ua(t,3),Os)},Fn.forInRight=function(e,t){return null==e?e:_r(e,ua(t,3),Os)},Fn.forOwn=function(e,t){return e&&br(e,ua(t,3))},Fn.forOwnRight=function(e,t){return e&&xr(e,ua(t,3))},Fn.get=Ms,Fn.gt=Uo,Fn.gte=Vo,Fn.has=function(e,t){return null!=e&&ga(e,t,Ar)},Fn.hasIn=As,Fn.head=Ya,Fn.identity=ru,Fn.includes=function(e,t,n,r){e=Wo(e)?e:Fs(e),n=n&&!r?ps(n):0;var i=e.length;return n<0&&(n=Zt(i+n,0)),ss(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Zt(r+i,0)),Ht(e,t,i)},Fn.inRange=function(e,t,n){return t=ds(t),n===i?(n=t,t=0):n=ds(n),function(e,t,n){return e>=_n(t,n)&&e<Zt(t,n)}(e=vs(e),t,n)},Fn.invoke=Is,Fn.isArguments=Ho,Fn.isArray=Go,Fn.isArrayBuffer=Yo,Fn.isArrayLike=Wo,Fn.isArrayLikeObject=qo,Fn.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Cr(e)==b},Fn.isBuffer=Zo,Fn.isDate=Ko,Fn.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Wo(e)&&(Go(e)||"string"==typeof e||"function"==typeof e.splice||Zo(e)||cs(e)||Ho(e)))return!e.length;var t=pa(e);if(t==C||t==I)return!e.size;if(ka(e))return!Nr(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Or(e,t)},Fn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},Fn.isError=Xo,Fn.isFinite=function(e){return"number"==typeof e&&_t(e)},Fn.isFunction=Qo,Fn.isInteger=Jo,Fn.isLength=$o,Fn.isMap=ns,Fn.isMatch=function(e,t){return e===t||Pr(e,t,la(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,la(t),n)},Fn.isNaN=function(e){return rs(e)&&e!=+e},Fn.isNative=function(e){if(wa(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=rs,Fn.isObject=es,Fn.isObjectLike=ts,Fn.isPlainObject=is,Fn.isRegExp=as,Fn.isSafeInteger=function(e){return Jo(e)&&e>=-9007199254740991&&e<=p},Fn.isSet=os,Fn.isString=ss,Fn.isSymbol=us,Fn.isTypedArray=cs,Fn.isUndefined=function(e){return e===i},Fn.isWeakMap=function(e){return ts(e)&&pa(e)==P},Fn.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Cr(e)},Fn.join=function(e,t){return null==e?"":bt.call(e,t)},Fn.kebabCase=Gs,Fn.last=Ka,Fn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ps(n))<0?Zt(r+a,0):_n(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Vt(e,Yt,a,!0)},Fn.lowerCase=Ys,Fn.lowerFirst=Ws,Fn.lt=ls,Fn.lte=hs,Fn.max=function(e){return e&&e.length?gr(e,ru,Mr):i},Fn.maxBy=function(e,t){return e&&e.length?gr(e,ua(t,2),Mr):i},Fn.mean=function(e){return Wt(e,ru)},Fn.meanBy=function(e,t){return Wt(e,ua(t,2))},Fn.min=function(e){return e&&e.length?gr(e,ru,jr):i},Fn.minBy=function(e,t){return e&&e.length?gr(e,ua(t,2),jr):i},Fn.stubArray=gu,Fn.stubFalse=vu,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=xu,Fn.nth=function(e,t){return e&&e.length?Hr(e,ps(t)):i},Fn.noConflict=function(){return gt._===this&&(gt._=Fe),this},Fn.noop=uu,Fn.now=Mo,Fn.pad=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(pt(i),n)+e+Gi(dt(i),n)},Fn.padEnd=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?e+Gi(t-r,n):e},Fn.padStart=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?Gi(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ys(e).replace(oe,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_a(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ds(e),t===i?(t=e,e=0):t=ds(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=wn();return _n(e+a*(t-e+ht("1e-"+((a+"").length-1))),t)}return Zr(e,t)},Fn.reduce=function(e,t,n){var r=Go(e)?Rt:Kt,i=arguments.length<3;return r(e,ua(t,4),n,i,fr)},Fn.reduceRight=function(e,t,n){var r=Go(e)?jt:Kt,i=arguments.length<3;return r(e,ua(t,4),n,i,dr)},Fn.repeat=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ps(t),Kr(ys(e),t)},Fn.replace=function(){var e=arguments,t=ys(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var r=-1,a=(t=_i(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Na(t[r])];o===i&&(r=a,o=n),e=Qo(o)?o.call(e):o}return e},Fn.round=wu,Fn.runInContext=e,Fn.sample=function(e){return(Go(e)?Qn:Qr)(e)},Fn.size=function(e){if(null==e)return 0;if(Wo(e))return ss(e)?pn(e):e.length;var t=pa(e);return t==C||t==I?e.size:Nr(e).length},Fn.snakeCase=qs,Fn.some=function(e,t,n){var r=Go(e)?zt:ii;return n&&_a(e,t,n)&&(t=i),r(e,ua(t,3))},Fn.sortedIndex=function(e,t){return ai(e,t)},Fn.sortedIndexBy=function(e,t,n){return oi(e,t,ua(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Fo(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return oi(e,t,ua(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(Fo(e[n],t))return n}return-1},Fn.startCase=Zs,Fn.startsWith=function(e,t,n){return e=ys(e),n=null==n?0:sr(ps(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Fn.subtract=ku,Fn.sum=function(e){return e&&e.length?Xt(e,ru):0},Fn.sumBy=function(e,t){return e&&e.length?Xt(e,ua(t,2)):0},Fn.template=function(e,t,n){var r=Fn.templateSettings;n&&_a(e,t,n)&&(t=i),e=ys(e),t=xs({},t,r,Ji);var a,o,s=xs({},t.imports,r.imports,Ji),u=Ls(s),c=en(s,u),l=0,h=t.interpolate||we,f="__p += '",d=Ae((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),f+=e.slice(l,u).replace(ke,sn),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),f+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(fe.test(g))throw new se("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(Y,""):f).replace(W,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Js((function(){return Se(u,p+"return "+f).apply(i,c)}));if(v.source=f,Xo(v))throw v;return v},Fn.times=function(e,t){if((e=ps(e))<1||e>p)return[];var n=v,r=_n(e,v);t=ua(t),e-=v;for(var i=Qt(r,t);++n<e;)t(n);return i},Fn.toFinite=ds,Fn.toInteger=ps,Fn.toLength=gs,Fn.toLower=function(e){return ys(e).toLowerCase()},Fn.toNumber=vs,Fn.toSafeInteger=function(e){return e?sr(ps(e),-9007199254740991,p):0===e?e:0},Fn.toString=ys,Fn.toUpper=function(e){return ys(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=ys(e))&&(n||t===i))return Jt(e);if(!e||!(t=ci(t)))return e;var r=gn(e),a=gn(t);return xi(r,nn(r,a),rn(r,a)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=ci(t)))return e;var r=gn(e);return xi(r,0,rn(r,gn(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=gn(e);return xi(r,nn(r,gn(t))).join("")},Fn.truncate=function(e,t){var n=30,r="...";if(es(t)){var a="separator"in t?t.separator:a;n="length"in t?ps(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=ys(e)).length;if(un(e)){var s=gn(e);o=s.length}if(n>=o)return e;var u=n-pn(r);if(u<1)return r;var c=s?xi(s,0,u).join(""):e.slice(0,u);if(a===i)return c+r;if(s&&(u+=c.length-u),as(a)){if(e.slice(u).search(a)){var l,h=c;for(a.global||(a=Ae(a.source,ys(ge.exec(a))+"g")),a.lastIndex=0;l=a.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(e.indexOf(ci(a),u)!=u){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+r},Fn.unescape=function(e){return(e=ys(e))&&X.test(e)?e.replace(Z,mn):e},Fn.uniqueId=function(e){var t=++Ne;return ys(e)+t},Fn.upperCase=Ks,Fn.upperFirst=Xs,Fn.each=yo,Fn.eachRight=_o,Fn.first=Ya,su(Fn,function(){var e={};return br(Fn,(function(t,n){Be.call(Fn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Fn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),Tt(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===i?1:Zt(ps(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,v),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ua(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(ru)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Ir(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(Bo(ua(e)))},Gn.prototype.slice=function(e,t){e=ps(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ps(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(v)},br(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Fn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Gn,c=s[0],l=u||Go(t),h=function(e){var t=a.apply(Fn,Nt([e],s));return r&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,g=u&&!d;if(!o&&l){t=g?t:new Gn(this);var v=e.apply(t,s);return v.__actions__.push({func:fo,args:[h],thisArg:i}),new Hn(v,f)}return p&&g?e.apply(this,s):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Go(i)?i:[],e)}return this[n]((function(n){return t.apply(Go(n)?n:[],e)}))}})),br(Gn.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";Be.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Fi(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Ti(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ti(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ti(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Go(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=_n(t,e+o);break;case"takeRight":e=Zt(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,h=l.length,f=0,d=_n(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return pi(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var g=-1,v=e[c+=t];++g<h;){var m=l[g],y=m.iteratee,_=m.type,b=y(v);if(2==_)v=b;else if(!b){if(1==_)continue e;break e}}p[f++]=v}return p},Fn.prototype.at=po,Fn.prototype.chain=function(){return ho(this)},Fn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=ja(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:fo,args:[$a],thisArg:i}),new Hn(t,this.__chain__)}return this.thru($a)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Qe&&(Fn.prototype[Qe]=function(){return this}),Fn}();gt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var N,R=Object.assign;function j(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,we=null,ke=null;function Se(e){if(e=gi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=mi(t),xe(e.stateNode,e.type,t))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function Me(){if(we){var e=we,t=ke;if(ke=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Ee(){}var Te=!1;function Ie(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ae(e,t,n)}finally{Te=!1,(null!==we||null!==ke)&&(Ee(),Me())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=mi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(tl){Oe=!1}function De(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Be=!1,Ne=null,Re=!1,je=null,ze={onError:function(e){Be=!0,Ne=e}};function Fe(e,t,n,r,i,a,o,s,u){Be=!1,Ne=null,De.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Xe=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,$e=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/st|0)|0},ot=Math.log,st=Math.LN2;var ut=64,ct=4194304;function lt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=lt(s):0!==(a&=o)&&(r=lt(a))}else 0!==(o=n&~i)?r=lt(o):0!==a&&(r=lt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,wt,kt,St,Ct=!1,Mt=[],At=null,Et=null,Tt=null,It=new Map,Lt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Bt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=gi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nt(e){var t=pi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void St(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=gi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function jt(e,t,n){Rt(e)&&n.delete(t)}function zt(){Ct=!1,null!==At&&Rt(At)&&(At=null),null!==Et&&Rt(Et)&&(Et=null),null!==Tt&&Rt(Tt)&&(Tt=null),It.forEach(jt),Lt.forEach(jt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Ft(t,e)}if(0<Mt.length){Ft(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Ft(At,e),null!==Et&&Ft(Et,e),null!==Tt&&Ft(Tt,e),It.forEach(t),Lt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Nt(n),null===n.blockedOn&&Ot.shift()}var Vt=b.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Wt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Yt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Wt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Wt(e,t,n,r){if(Ht){var i=Zt(e,t,n,r);if(null===i)Fr(e,t,r,qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Bt(At,e,t,n,r,i),!0;case"dragenter":return Et=Bt(Et,e,t,n,r,i),!0;case"mouseover":return Tt=Bt(Tt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return It.set(a,Bt(It.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Lt.set(a,Bt(Lt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=gi(i);if(null!==a&&bt(a),null===(a=Zt(e,t,n,r))&&Fr(e,t,r,qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Fr(e,t,r,null,n)}}var qt=null;function Zt(e,t,n,r){if(qt=null,null!==(e=pi(e=be(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case $e:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Xt=null,Qt=null,Jt=null;function $t(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var an,on,sn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(un),ln=R({},un,{view:0,detail:0}),hn=rn(ln),fn=R({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,on=e.screenY-sn.screenY):on=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),dn=rn(fn),pn=rn(R({},fn,{dataTransfer:0})),gn=rn(R({},ln,{relatedTarget:0})),vn=rn(R({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=rn(R({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yn=rn(R({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function kn(){return wn}var Sn=rn(R({},ln,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Cn=rn(R({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=rn(R({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=rn(R({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=rn(R({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Tn=[9,13,27,32],In=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var On=l&&"TextEvent"in window&&!Ln,Pn=l&&(!In||Ln&&8<Ln&&11>=Ln),Dn=String.fromCharCode(32),Bn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Un(e,t,n,r){Ce(r),0<(t=Vr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Hn=null;function Gn(e){Dr(e,0)}function Yn(e){if(q(vi(e)))return e}function Wn(e,t){if("change"===e)return t}var qn=!1;if(l){var Zn;if(l){var Kn="oninput"in document;if(!Kn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Kn="function"===typeof Xn.oninput}Zn=Kn}else Zn=!1;qn=Zn&&(!document.documentMode||9<document.documentMode)}function Qn(){Vn&&(Vn.detachEvent("onpropertychange",Jn),Hn=Vn=null)}function Jn(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Un(t,Hn,e,be(e)),Ie(Gn,t)}}function $n(e,t,n){"focusin"===e?(Qn(),Hn=n,(Vn=t).attachEvent("onpropertychange",Jn)):"focusout"===e&&Qn()}function er(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function tr(e,t){if("click"===e)return Yn(t)}function nr(e,t){if("input"===e||"change"===e)return Yn(t)}var rr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ir(e,t){if(rr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!rr(e[i],t[i]))return!1}return!0}function ar(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function or(e,t){var n,r=ar(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ar(r)}}function sr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function lr(e){var t=ur(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sr(n.ownerDocument.documentElement,n)){if(null!==r&&cr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=or(n,a);var o=or(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=l&&"documentMode"in document&&11>=document.documentMode,fr=null,dr=null,pr=null,gr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;gr||null==fr||fr!==Z(r)||("selectionStart"in(r=fr)&&cr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pr&&ir(pr,r)||(pr=r,0<(r=Vr(dr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}function mr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yr={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionend:mr("Transition","TransitionEnd")},_r={},br={};function xr(e){if(_r[e])return _r[e];if(!yr[e])return e;var t,n=yr[e];for(t in n)if(n.hasOwnProperty(t)&&t in br)return _r[e]=n[t];return e}l&&(br=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);var wr=xr("animationend"),kr=xr("animationiteration"),Sr=xr("animationstart"),Cr=xr("transitionend"),Mr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Mr.set(e,t),u(t,[e])}for(var Tr=0;Tr<Ar.length;Tr++){var Ir=Ar[Tr];Er(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Er(wr,"onAnimationEnd"),Er(kr,"onAnimationIteration"),Er(Sr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Pr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Fe.apply(this,arguments),Be){if(!Be)throw Error(a(198));var l=Ne;Be=!1,Ne=null,Re||(Re=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Pr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Pr(i,s,c),a=u}}}if(Re)throw e=je,Re=!1,je=null,e}function Br(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Nr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Rr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Rr]){e[Rr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Nr(t,!1,e),Nr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Rr]||(t[Rr]=!0,Nr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Kt(t)){case 1:var i=Gt;break;case 4:i=Yt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Fr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=pi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=a,i=be(n),o=[];e:{var s=Mr.get(e);if(void 0!==s){var u=cn,c=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":c="focus",u=gn;break;case"focusout":c="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mn;break;case wr:case kr:case Sr:u=vn;break;case Cr:u=An;break;case"scroll":u=hn;break;case"wheel":u=En;break;case"copy":case"cut":case"paste":u=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var g=(d=p).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==f&&(null!=(g=Le(p,f))&&l.push(Ur(p,g,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!pi(c)&&!c[li])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?pi(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=dn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:vi(u),d=null==c?s:vi(c),(s=new l(g,p+"leave",u,n,i)).target=h,s.relatedTarget=d,g=null,pi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,g=l),h=g,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Hr(d))p++;for(d=0,g=f;g;g=Hr(g))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)f=Hr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==u&&Gr(o,s,u,l,!1),null!==c&&null!==h&&Gr(o,h,c,l,!0)}if("select"===(u=(s=r?vi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Wn;else if(Fn(s))if(qn)v=nr;else{v=er;var m=$n}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=tr);switch(v&&(v=v(e,r))?Un(o,v,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?vi(r):window,e){case"focusin":(Fn(m)||"true"===m.contentEditable)&&(fr=m,dr=r,pr=null);break;case"focusout":pr=dr=fr=null;break;case"mousedown":gr=!0;break;case"contextmenu":case"mouseup":case"dragend":gr=!1,vr(o,n,i);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":vr(o,n,i)}var y;if(In)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else jn?Nn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Pn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==_?"onCompositionEnd"===_&&jn&&(y=$t()):(Qt="value"in(Xt=i)?Xt.value:Xt.textContent,jn=!0)),0<(m=Vr(r,_)).length&&(_=new yn(_,e,null,n,i),o.push({event:_,listeners:m}),y?_.data=y:null!==(y=Rn(n))&&(_.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!In&&Nn(e,t)?(e=$t(),Jt=Qt=Xt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new yn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Dr(o,t)}))}function Ur(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Le(e,n))&&r.unshift(Ur(e,a,i)),null!=(a=Le(e,t))&&r.push(Ur(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Le(n,a))&&o.unshift(Ur(n,u,s)):i||null!=(u=Le(n,a))&&o.push(Ur(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Wr=/\u0000|\uFFFD/g;function qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Wr,"")}function Zr(e,t,n){if(t=qr(t),qr(e)!==t&&n)throw Error(a(425))}function Kr(){}var Xr=null,Qr=null;function Jr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"===typeof setTimeout?setTimeout:void 0,ei="function"===typeof clearTimeout?clearTimeout:void 0,ti="function"===typeof Promise?Promise:void 0,ni="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ti?function(e){return ti.resolve(null).then(e).catch(ri)}:$r;function ri(e){setTimeout((function(){throw e}))}function ii(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ai(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function oi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ui="__reactFiber$"+si,ci="__reactProps$"+si,li="__reactContainer$"+si,hi="__reactEvents$"+si,fi="__reactListeners$"+si,di="__reactHandles$"+si;function pi(e){var t=e[ui];if(t)return t;for(var n=e.parentNode;n;){if(t=n[li]||n[ui]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=oi(e);null!==e;){if(n=e[ui])return n;e=oi(e)}return t}n=(e=n).parentNode}return null}function gi(e){return!(e=e[ui]||e[li])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function mi(e){return e[ci]||null}var yi=[],_i=-1;function bi(e){return{current:e}}function xi(e){0>_i||(e.current=yi[_i],yi[_i]=null,_i--)}function wi(e,t){_i++,yi[_i]=e.current,e.current=t}var ki={},Si=bi(ki),Ci=bi(!1),Mi=ki;function Ai(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ei(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ti(){xi(Ci),xi(Si)}function Ii(e,t,n){if(Si.current!==ki)throw Error(a(168));wi(Si,t),wi(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return R({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Mi=Si.current,wi(Si,e),wi(Ci,Ci.current),!0}function Pi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,xi(Ci),xi(Si),wi(Si,e)):xi(Ci),wi(Ci,n)}var Di=null,Bi=!1,Ni=!1;function Ri(e){null===Di?Di=[e]:Di.push(e)}function ji(){if(!Ni&&null!==Di){Ni=!0;var e=0,t=yt;try{var n=Di;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Di=null,Bi=!1}catch(i){throw null!==Di&&(Di=Di.slice(e+1)),We(Je,ji),i}finally{yt=t,Ni=!1}}return null}var zi=[],Fi=0,Ui=null,Vi=0,Hi=[],Gi=0,Yi=null,Wi=1,qi="";function Zi(e,t){zi[Fi++]=Vi,zi[Fi++]=Ui,Ui=e,Vi=t}function Ki(e,t,n){Hi[Gi++]=Wi,Hi[Gi++]=qi,Hi[Gi++]=Yi,Yi=e;var r=Wi;e=qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var a=32-at(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wi=1<<32-at(t)+i|n<<i|r,qi=a+e}else Wi=1<<a|n<<i|r,qi=e}function Xi(e){null!==e.return&&(Zi(e,1),Ki(e,1,0))}function Qi(e){for(;e===Ui;)Ui=zi[--Fi],zi[Fi]=null,Vi=zi[--Fi],zi[Fi]=null;for(;e===Yi;)Yi=Hi[--Gi],Hi[Gi]=null,qi=Hi[--Gi],Hi[Gi]=null,Wi=Hi[--Gi],Hi[Gi]=null}var Ji=null,$i=null,ea=!1,ta=null;function na(e,t){var n=Ec(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ji=e,$i=ai(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ji=e,$i=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Wi,overflow:qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ec(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ji=e,$i=null,!0);default:return!1}}function ia(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function aa(e){if(ea){var t=$i;if(t){var n=t;if(!ra(e,t)){if(ia(e))throw Error(a(418));t=ai(n.nextSibling);var r=Ji;t&&ra(e,t)?na(r,n):(e.flags=-4097&e.flags|2,ea=!1,Ji=e)}}else{if(ia(e))throw Error(a(418));e.flags=-4097&e.flags|2,ea=!1,Ji=e}}}function oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ji=e}function sa(e){if(e!==Ji)return!1;if(!ea)return oa(e),ea=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Jr(e.type,e.memoizedProps)),t&&(t=$i)){if(ia(e))throw ua(),Error(a(418));for(;t;)na(e,t),t=ai(t.nextSibling)}if(oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){$i=ai(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}$i=null}}else $i=Ji?ai(e.stateNode.nextSibling):null;return!0}function ua(){for(var e=$i;e;)e=ai(e.nextSibling)}function ca(){$i=Ji=null,ea=!1}function la(e){null===ta?ta=[e]:ta.push(e)}var ha=b.ReactCurrentBatchConfig;function fa(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var da=bi(null),pa=null,ga=null,va=null;function ma(){va=ga=pa=null}function ya(e){var t=da.current;xi(da),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ba(e,t){pa=e,va=ga=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vs=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(va!==e)if(e={context:e,memoizedValue:t,next:null},null===ga){if(null===pa)throw Error(a(308));ga=e,pa.dependencies={lanes:0,firstContext:e}}else ga=ga.next=e;return t}var wa=null;function ka(e){null===wa?wa=[e]:wa.push(e)}function Sa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ka(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,ka(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function Oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pa(e,t,n,r){var i=e.updateQueue;Ma=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(f=t,d=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(d,h,f):p)||void 0===f)break e;h=R({},h,f);break e;case 2:Ma=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Pu|=o,e.lanes=o,e.memoizedState=h}}function Da(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ba=(new r.Component).refs;function Na(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ra={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qu(),i=Ju(e),a=Ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&($u(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qu(),i=Ju(e),a=Ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&($u(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qu(),r=Ju(e),i=Ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ia(e,i,r))&&($u(t,e,r,n),La(t,e,r))}};function ja(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ir(n,r)||!ir(i,a))}function za(e,t,n){var r=!1,i=ki,a=t.contextType;return"object"===typeof a&&null!==a?a=xa(a):(i=Ei(t)?Mi:Si.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):ki),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ra,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Fa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ra.enqueueReplaceState(t,t.state,null)}function Ua(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ba,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=xa(a):(a=Ei(t)?Mi:Si.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Na(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ra.enqueueReplaceState(i,i.state,null),Pa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Va(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ba&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Va(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Va(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Va(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case O:return f(e,(0,t._init)(t._payload),n)}if(te(t)||B(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||B(n))return null!==i?null:h(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function g(i,a,s,u){for(var c=null,l=null,h=a,g=a=0,v=null;null!==h&&g<s.length;g++){h.index>g?(v=h,h=null):v=h.sibling;var m=d(i,h,s[g],u);if(null===m){null===h&&(h=v);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,g),null===l?c=m:l.sibling=m,l=m,h=v}if(g===s.length)return n(i,h),ea&&Zi(i,g),c;if(null===h){for(;g<s.length;g++)null!==(h=f(i,s[g],u))&&(a=o(h,a,g),null===l?c=h:l.sibling=h,l=h);return ea&&Zi(i,g),c}for(h=r(i,h);g<s.length;g++)null!==(v=p(h,i,g,s[g],u))&&(e&&null!==v.alternate&&h.delete(null===v.key?g:v.key),a=o(v,a,g),null===l?c=v:l.sibling=v,l=v);return e&&h.forEach((function(e){return t(i,e)})),ea&&Zi(i,g),c}function v(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,g=s,v=s=0,m=null,y=u.next();null!==g&&!y.done;v++,y=u.next()){g.index>v?(m=g,g=null):m=g.sibling;var _=d(i,g,y.value,c);if(null===_){null===g&&(g=m);break}e&&g&&null===_.alternate&&t(i,g),s=o(_,s,v),null===h?l=_:h.sibling=_,h=_,g=m}if(y.done)return n(i,g),ea&&Zi(i,v),l;if(null===g){for(;!y.done;v++,y=u.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,v),null===h?l=y:h.sibling=y,h=y);return ea&&Zi(i,v),l}for(g=r(i,g);!y.done;v++,y=u.next())null!==(y=p(g,i,v,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?l=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),ea&&Zi(i,v),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===k){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ga(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Va(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===k?((a=Oc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Va(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bc(o,r.mode,u)).return=r,r=a}return s(r);case O:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return g(r,a,o,u);if(B(o))return v(r,a,o,u);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Dc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Wa=Ya(!0),qa=Ya(!1),Za={},Ka=bi(Za),Xa=bi(Za),Qa=bi(Za);function Ja(e){if(e===Za)throw Error(a(174));return e}function $a(e,t){switch(wi(Qa,t),wi(Xa,e),wi(Ka,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Ka),wi(Ka,t)}function eo(){xi(Ka),xi(Xa),xi(Qa)}function to(e){Ja(Qa.current);var t=Ja(Ka.current),n=ue(t,e.type);t!==n&&(wi(Xa,e),wi(Ka,n))}function no(e){Xa.current===e&&(xi(Ka),xi(Xa))}var ro=bi(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=b.ReactCurrentDispatcher,uo=b.ReactCurrentBatchConfig,co=0,lo=null,ho=null,fo=null,po=!1,go=!1,vo=0,mo=0;function yo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rr(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:is,e=n(r,i),go){o=0;do{if(go=!1,vo=0,25<=o)throw Error(a(301));o+=1,fo=ho=null,t.updateQueue=null,so.current=as,e=n(r,i)}while(go)}if(so.current=ns,t=null!==ho&&null!==ho.next,co=0,fo=ho=lo=null,po=!1,t)throw Error(a(300));return e}function xo(){var e=0!==vo;return vo=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?lo.memoizedState=fo=e:fo=fo.next=e,fo}function ko(){if(null===ho){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?lo.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?lo.memoizedState=fo=e:fo=fo.next=e}return fo}function So(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((co&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,lo.lanes|=h,Pu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,rr(r,t.memoizedState)||(vs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Pu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mo(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);rr(o,t.memoizedState)||(vs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Eo(e,t){var n=lo,r=ko(),i=t(),o=!rr(r.memoizedState,i);if(o&&(r.memoizedState=i,vs=!0),r=r.queue,Fo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Bo(9,Io.bind(null,n,r,i,t),void 0,null),null===Mu)throw Error(a(349));0!==(30&co)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,Oo(t)&&Po(e)}function Lo(e,t,n){return n((function(){Oo(t)&&Po(e)}))}function Oo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rr(e,n)}catch(r){return!0}}function Po(e){var t=Ca(e,1);null!==t&&$u(t,e,1,-1)}function Do(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,lo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function No(){return ko().memoizedState}function Ro(e,t,n,r){var i=wo();lo.flags|=e,i.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=ko();r=void 0===r?null:r;var a=void 0;if(null!==ho){var o=ho.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Bo(t,n,a,r))}lo.flags|=e,i.memoizedState=Bo(1|t,n,a,r)}function zo(e,t){return Ro(8390656,8,e,t)}function Fo(e,t){return jo(2048,8,e,t)}function Uo(e,t){return jo(4,2,e,t)}function Vo(e,t){return jo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Wo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,vs=!0),e.memoizedState=n):(rr(n,t)||(n=pt(),lo.lanes|=n,Pu|=n,e.baseState=!0),t)}function Ko(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{yt=n,uo.transition=r}}function Xo(){return ko().memoizedState}function Qo(e,t,n){var r=Ju(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))es(t,n);else if(null!==(n=Sa(e,t,n,r))){$u(n,e,r,Qu()),ts(n,t,r)}}function Jo(e,t,n){var r=Ju(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))es(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,rr(s,o)){var u=t.interleaved;return null===u?(i.next=i,ka(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Sa(e,t,i,r))&&($u(n,e,r,i=Qu()),ts(n,t,r))}}function $o(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function es(e,t){go=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var ns={readContext:xa,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:xa,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Do,useDebugValue:Yo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Ko.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=wo();if(ea){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Mu)throw Error(a(349));0!==(30&co)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Mu.identifierPrefix;if(ea){var n=qi;t=":"+t+"R"+(n=(Wi&~(1<<32-at(Wi)-1)).toString(32)+n),0<(n=vo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:xa,useCallback:Wo,useContext:xa,useEffect:Fo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:Vo,useMemo:qo,useReducer:Co,useRef:No,useState:function(){return Co(So)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(ko(),ho.memoizedState,e)},useTransition:function(){return[Co(So)[0],ko().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Eo,useId:Xo,unstable_isNewReconciler:!1},as={readContext:xa,useCallback:Wo,useContext:xa,useEffect:Fo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:Vo,useMemo:qo,useReducer:Mo,useRef:No,useState:function(){return Mo(So)},useDebugValue:Yo,useDeferredValue:function(e){var t=ko();return null===ho?t.memoizedState=e:Zo(t,ho.memoizedState,e)},useTransition:function(){return[Mo(So)[0],ko().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Eo,useId:Xo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ss(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var cs="function"===typeof WeakMap?WeakMap:Map;function ls(e,t,n){(n=Ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Uu||(Uu=!0,Vu=r),us(0,t)},n}function hs(e,t,n){(n=Ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){us(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){us(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new cs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wc.bind(null,e,t,n),t.then(e,e))}function ds(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ps(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ta(-1,1)).tag=2,Ia(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var gs=b.ReactCurrentOwner,vs=!1;function ms(e,t,n,r){t.child=null===e?qa(t,null,n,r):Wa(t,e.child,n,r)}function ys(e,t,n,r,i){n=n.render;var a=t.ref;return ba(t,i),r=bo(e,t,n,r,a,i),n=xo(),null===e||vs?(ea&&n&&Xi(t),t.flags|=1,ms(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Us(e,t,i))}function _s(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Tc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,bs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ir)(o,r)&&e.ref===t.ref)return Us(e,t,i)}return t.flags|=1,(e=Ic(a,r)).ref=t.ref,e.return=t,t.child=e}function bs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ir(a,r)&&e.ref===t.ref){if(vs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Us(e,t,i);0!==(131072&e.flags)&&(vs=!0)}}return ks(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wi(Iu,Tu),Tu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wi(Iu,Tu),Tu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,wi(Iu,Tu),Tu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,wi(Iu,Tu),Tu|=r;return ms(e,t,i,n),t.child}function ws(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,n,r,i){var a=Ei(n)?Mi:Si.current;return a=Ai(t,a),ba(t,i),n=bo(e,t,n,r,a,i),r=xo(),null===e||vs?(ea&&r&&Xi(t),t.flags|=1,ms(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Us(e,t,i))}function Ss(e,t,n,r,i){if(Ei(n)){var a=!0;Oi(t)}else a=!1;if(ba(t,i),null===t.stateNode)Fs(e,t),za(t,n,r),Ua(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=xa(c):c=Ai(t,c=Ei(n)?Mi:Si.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Fa(t,o,r,c),Ma=!1;var f=t.memoizedState;o.state=f,Pa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ci.current||Ma?("function"===typeof l&&(Na(t,n,l,r),u=t.memoizedState),(s=Ma||ja(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ea(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:fa(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=xa(u):u=Ai(t,u=Ei(n)?Mi:Si.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Fa(t,o,r,u),Ma=!1,f=t.memoizedState,o.state=f,Pa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ci.current||Ma?("function"===typeof d&&(Na(t,n,d,r),p=t.memoizedState),(c=Ma||ja(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){ws(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Pi(t,n,!1),Us(e,t,a);r=t.stateNode,gs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Wa(t,e.child,null,a),t.child=Wa(t,null,s,a)):ms(e,t,s,a),t.memoizedState=r.state,i&&Pi(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),$a(e,t.containerInfo)}function As(e,t,n,r,i){return ca(),la(i),t.flags|=256,ms(e,t,n,r),t.child}var Es,Ts,Is,Ls,Os={dehydrated:null,treeContext:null,retryLane:0};function Ps(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,i=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),wi(ro,1&o),null===e)return aa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Pc(u,i,0,null),e=Oc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ps(n),t.memoizedState=Os,e):Bs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,r=ss(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Pc({mode:"visible",children:r.children},i,0,null),(o=Oc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Wa(t,e.child,null,s),t.child.memoizedState=Ps(s),t.memoizedState=Os,o);if(0===(1&t.mode))return Ns(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Ns(e,t,s,r=ss(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),vs||u){if(null!==(r=Mu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),$u(r,e,i,-1))}return fc(),Ns(e,t,s,r=ss(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,$i=ai(i.nextSibling),Ji=t,ea=!0,ta=null,null!==e&&(Hi[Gi++]=Wi,Hi[Gi++]=qi,Hi[Gi++]=Yi,Wi=e.id,qi=e.overflow,Yi=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Ic(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ic(r,s):(s=Oc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ps(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Os,i}return e=(s=e.child).sibling,i=Ic(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,n,r){return null!==r&&la(r),Wa(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Rs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function js(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ms(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Rs(e,n,t);else if(19===e.tag)Rs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(wi(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,a);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Us(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ea)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(Qi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ei(t.type)&&Ti(),Hs(t),null;case 3:return r=t.stateNode,eo(),xi(Ci),xi(Si),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(sa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ta&&(rc(ta),ta=null))),Ts(e,t),Hs(t),null;case 5:no(t);var i=Ja(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=Ja(Ka.current),sa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ui]=t,r[ci]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var u in me(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":W(r),$(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Kr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ui]=t,e[ci]=r,Es(e,t,!1,!1),t.stateNode=e;e:{switch(u=ye(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":X(e,r),i=K(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in me(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ge(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&le(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Br("scroll",e):null!=l&&_(e,o,l,u))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Kr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(Qa.current),Ja(Ka.current),sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[ui]=t,(o=r.nodeValue!==n)&&null!==(e=Ji))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ui]=t,t.stateNode=r}return Hs(t),null;case 13:if(xi(ro),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ea&&null!==$i&&0!==(1&t.mode)&&0===(128&t.flags))ua(),ca(),t.flags|=98560,o=!1;else if(o=sa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[ui]=t}else ca(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==ta&&(rc(ta),ta=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Lu&&(Lu=3):fc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return eo(),Ts(e,t),null===e&&jr(t.stateNode.containerInfo),Hs(t),null;case 10:return ya(t.type._context),Hs(t),null;case 19:if(xi(ro),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Vs(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=io(e))){for(t.flags|=128,Vs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wi(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zu&&(t.flags|=128,r=!0,Vs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ea)return Hs(t),null}else 2*Xe()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Vs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ro.current,wi(ro,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tu)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(Qi(t),t.tag){case 1:return Ei(t.type)&&Ti(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),xi(Ci),xi(Si),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(xi(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ca()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(ro),null;case 4:return eo(),null;case 10:return ya(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Es=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ts=function(){},Is=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Ka.current);var a,o=null;switch(n){case"input":i=K(e,i),r=K(e,r),o=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Kr)}for(l in me(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Br("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ws=!1,qs=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Xs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function Qs(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Js=!1;function $s(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Qs(t,n,a)}i=i.next}while(i!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ui],delete t[ci],delete t[hi],delete t[fi],delete t[di])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function iu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function au(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Kr));else if(4!==r&&null!==(e=e.child))for(au(e,t,n),e=e.sibling;null!==e;)au(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function cu(e,t,n){for(n=n.child;null!==n;)lu(e,t,n),n=n.sibling}function lu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:qs||Xs(n,t);case 6:var r=su,i=uu;su=null,cu(e,t,n),uu=i,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ii(e.parentNode,n):1===e.nodeType&&ii(e,n),Ut(e)):ii(su,n.stateNode));break;case 4:r=su,i=uu,su=n.stateNode.containerInfo,uu=!0,cu(e,t,n),su=r,uu=i;break;case 0:case 11:case 14:case 15:if(!qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Qs(n,t,o),i=i.next}while(i!==r)}cu(e,t,n);break;case 1:if(!qs&&(Xs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}cu(e,t,n);break;case 21:cu(e,t,n);break;case 22:1&n.mode?(qs=(r=qs)||null!==n.memoizedState,cu(e,t,n),qs=r):cu(e,t,n);break;default:cu(e,t,n)}}function hu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(a(160));lu(o,s,i),su=null,uu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)du(t,e),t=t.sibling}function du(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fu(t,e),pu(e),4&r){try{$s(3,e,e.return),eu(3,e)}catch(v){xc(e,e.return,v)}try{$s(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:fu(t,e),pu(e),512&r&&null!==n&&Xs(n,n.return);break;case 5:if(fu(t,e),pu(e),512&r&&null!==n&&Xs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&Q(i,o),ye(u,s);var l=ye(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ge(i,f):"dangerouslySetInnerHTML"===h?le(i,f):"children"===h?he(i,f):_(i,h,f,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[ci]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(fu(t,e),pu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){xc(e,e.return,v)}}break;case 3:if(fu(t,e),pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:fu(t,e),pu(e);break;case 13:fu(t,e),pu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Xe())),4&r&&hu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(qs=(l=qs)||h,fu(t,e),qs=l):fu(t,e),pu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Ks=e,h=e.child;null!==h;){for(f=Ks=h;null!==Ks;){switch(p=(d=Ks).child,d.tag){case 0:case 11:case 14:case 15:$s(4,d,d.return);break;case 1:Xs(d,d.return);var g=d.stateNode;if("function"===typeof g.componentWillUnmount){r=d,n=d.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){xc(r,n,v)}}break;case 5:Xs(d,d.return);break;case 22:if(null!==d.memoizedState){yu(f);continue}}null!==p?(p.return=d,Ks=p):yu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=pe("display",s))}catch(v){xc(e,e.return,v)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fu(t,e),pu(e),4&r&&hu(e);case 21:}}function pu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ou(e,iu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;au(e,iu(e),o);break;default:throw Error(a(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Ks=e,vu(e,t,n)}function vu(e,t,n){for(var r=0!==(1&e.mode);null!==Ks;){var i=Ks,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ws;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||qs;s=Ws;var c=qs;if(Ws=o,(qs=u)&&!c)for(Ks=i;null!==Ks;)u=(o=Ks).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Ks=u):_u(i);for(;null!==a;)Ks=a,vu(a,t,n),a=a.sibling;Ks=i,Ws=s,qs=c}mu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ks=a):mu(e)}}function mu(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qs||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:fa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Da(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Da(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Ut(f)}}}break;default:throw Error(a(163))}qs||512&t.flags&&tu(t)}catch(d){xc(t,t.return,d)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function yu(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function _u(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){xc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){xc(t,i,u)}}var a=t.return;try{tu(t)}catch(u){xc(t,a,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){xc(t,o,u)}}}catch(u){xc(t,t.return,u)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var bu,xu=Math.ceil,wu=b.ReactCurrentDispatcher,ku=b.ReactCurrentOwner,Su=b.ReactCurrentBatchConfig,Cu=0,Mu=null,Au=null,Eu=0,Tu=0,Iu=bi(0),Lu=0,Ou=null,Pu=0,Du=0,Bu=0,Nu=null,Ru=null,ju=0,zu=1/0,Fu=null,Uu=!1,Vu=null,Hu=null,Gu=!1,Yu=null,Wu=0,qu=0,Zu=null,Ku=-1,Xu=0;function Qu(){return 0!==(6&Cu)?Xe():-1!==Ku?Ku:Ku=Xe()}function Ju(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Eu?Eu&-Eu:null!==ha.transition?(0===Xu&&(Xu=pt()),Xu):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function $u(e,t,n,r){if(50<qu)throw qu=0,Zu=null,Error(a(185));vt(e,n,r),0!==(2&Cu)&&e===Mu||(e===Mu&&(0===(2&Cu)&&(Du|=n),4===Lu&&ic(e,Eu)),ec(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(zu=Xe()+500,Bi&&ji()))}function ec(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-at(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Mu?Eu:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Bi=!0,Ri(e)}(ac.bind(null,e)):Ri(ac.bind(null,e)),ni((function(){0===(6&Cu)&&ji()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=$e;break;case 16:default:n=et;break;case 536870912:n=nt}n=Mc(n,tc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tc(e,t){if(Ku=-1,Xu=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Mu?Eu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=dc(e,r);else{t=r;var i=Cu;Cu|=2;var o=hc();for(Mu===e&&Eu===t||(Fu=null,zu=Xe()+500,cc(e,t));;)try{gc();break}catch(u){lc(e,u)}ma(),wu.current=o,Cu=i,null!==Au?t=0:(Mu=null,Eu=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=dt(e))&&(r=i,t=nc(e,i))),1===t)throw n=Ou,cc(e,0),ic(e,r),ec(e,Xe()),n;if(6===t)ic(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!rr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=dc(e,r))&&(0!==(o=dt(e))&&(r=o,t=nc(e,o))),1===t))throw n=Ou,cc(e,0),ic(e,r),ec(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:yc(e,Ru,Fu);break;case 3:if(ic(e,r),(130023424&r)===r&&10<(t=ju+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Qu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$r(yc.bind(null,e,Ru,Fu),t);break}yc(e,Ru,Fu);break;case 4:if(ic(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xu(r/1960))-r)){e.timeoutHandle=$r(yc.bind(null,e,Ru,Fu),r);break}yc(e,Ru,Fu);break;default:throw Error(a(329))}}}return ec(e,Xe()),e.callbackNode===n?tc.bind(null,e):null}function nc(e,t){var n=Nu;return e.current.memoizedState.isDehydrated&&(cc(e,t).flags|=256),2!==(e=dc(e,t))&&(t=Ru,Ru=n,null!==t&&rc(t)),e}function rc(e){null===Ru?Ru=e:Ru.push.apply(Ru,e)}function ic(e,t){for(t&=~Bu,t&=~Du,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ac(e){if(0!==(6&Cu))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ec(e,Xe()),null;var n=dc(e,t);if(0!==e.tag&&2===n){var r=dt(e);0!==r&&(t=r,n=nc(e,r))}if(1===n)throw n=Ou,cc(e,0),ic(e,t),ec(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yc(e,Ru,Fu),ec(e,Xe()),null}function oc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(zu=Xe()+500,Bi&&ji())}}function sc(e){null!==Yu&&0===Yu.tag&&0===(6&Cu)&&_c();var t=Cu;Cu|=1;var n=Su.transition,r=yt;try{if(Su.transition=null,yt=1,e)return e()}finally{yt=r,Su.transition=n,0===(6&(Cu=t))&&ji()}}function uc(){Tu=Iu.current,xi(Iu)}function cc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ei(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(Qi(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ti();break;case 3:eo(),xi(Ci),xi(Si),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:xi(ro);break;case 10:ya(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Mu=e,Au=e=Ic(e.current,null),Eu=Tu=t,Lu=0,Ou=null,Bu=Du=Pu=0,Ru=Nu=null,null!==wa){for(t=0;t<wa.length;t++)if(null!==(r=(n=wa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}wa=null}return e}function lc(e,t){for(;;){var n=Au;try{if(ma(),so.current=ns,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,fo=ho=lo=null,go=!1,vo=0,ku.current=null,null===n||null===n.return){Lu=1,Ou=t,Au=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Eu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ds(s);if(null!==p){p.flags&=-257,ps(p,s,u,0,t),1&p.mode&&fs(o,l,t),c=l;var g=(t=p).updateQueue;if(null===g){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}if(0===(1&t)){fs(o,l,t),fc();break e}c=Error(a(426))}else if(ea&&1&u.mode){var m=ds(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ps(m,s,u,0,t),la(os(c,u));break e}}o=c=os(c,u),4!==Lu&&(Lu=2),null===Nu?Nu=[o]:Nu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,ls(0,c,t));break e;case 1:u=c;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hu||!Hu.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,hs(o,u,t));break e}}o=o.return}while(null!==o)}mc(n)}catch(b){t=b,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function hc(){var e=wu.current;return wu.current=ns,null===e?ns:e}function fc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Mu||0===(268435455&Pu)&&0===(268435455&Du)||ic(Mu,Eu)}function dc(e,t){var n=Cu;Cu|=2;var r=hc();for(Mu===e&&Eu===t||(Fu=null,cc(e,t));;)try{pc();break}catch(i){lc(e,i)}if(ma(),Cu=n,wu.current=r,null!==Au)throw Error(a(261));return Mu=null,Eu=0,Lu}function pc(){for(;null!==Au;)vc(Au)}function gc(){for(;null!==Au&&!Ze();)vc(Au)}function vc(e){var t=bu(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?mc(e):Au=t,ku.current=null}function mc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Tu)))return void(Au=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Lu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Lu&&(Lu=5)}function yc(e,t,n){var r=yt,i=Su.transition;try{Su.transition=null,yt=1,function(e,t,n,r){do{_c()}while(null!==Yu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Mu&&(Au=Mu=null,Eu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Mc(et,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Su.transition,Su.transition=null;var s=yt;yt=1;var u=Cu;Cu|=4,ku.current=null,function(e,t){if(Xr=Ht,cr(e=ur())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qr={focusedElem:e,selectionRange:n},Ht=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var v=g.memoizedProps,m=g.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:fa(t.type,v),m);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(x){xc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}g=Js,Js=!1}(e,n),du(n,e),lr(Qr),Ht=!!Xr,Qr=Xr=null,e.current=n,gu(n,e,i),Ke(),Cu=u,yt=s,Su.transition=o}else e.current=n;if(Gu&&(Gu=!1,Yu=e,Wu=i),o=e.pendingLanes,0===o&&(Hu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ec(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Uu)throw Uu=!1,e=Vu,Vu=null,e;0!==(1&Wu)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Zu?qu++:(qu=0,Zu=e):qu=0,ji()}(e,t,n,r)}finally{Su.transition=i,yt=r}return null}function _c(){if(null!==Yu){var e=_t(Wu),t=Su.transition,n=yt;try{if(Su.transition=null,yt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Wu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!==(16&Ks.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Ks=l;null!==Ks;){var h=Ks;switch(h.tag){case 0:case 11:case 15:$s(8,h,o)}var f=h.child;if(null!==f)f.return=h,Ks=f;else for(;null!==Ks;){var d=(h=Ks).sibling,p=h.return;if(nu(h),h===l){Ks=null;break}if(null!==d){d.return=p,Ks=d;break}Ks=p}}}var g=o.alternate;if(null!==g){var v=g.child;if(null!==v){g.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(null!==v)}}Ks=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ks=y;break e}Ks=o.return}}var _=e.current;for(Ks=_;null!==Ks;){var b=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Ks=b;else e:for(s=_;null!==Ks;){if(0!==(2048&(u=Ks).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(w){xc(u,u.return,w)}if(u===s){Ks=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Ks=x;break e}Ks=u.return}}if(Cu=i,ji(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(w){}r=!0}return r}finally{yt=n,Su.transition=t}}return!1}function bc(e,t,n){e=Ia(e,t=ls(0,t=os(n,t),1),1),t=Qu(),null!==e&&(vt(e,1,t),ec(e,t))}function xc(e,t,n){if(3===e.tag)bc(e,e,n);else for(;null!==t;){if(3===t.tag){bc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Ia(t,e=hs(t,e=os(n,e),1),1),e=Qu(),null!==t&&(vt(t,1,e),ec(t,e));break}}t=t.return}}function wc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Qu(),e.pingedLanes|=e.suspendedLanes&n,Mu===e&&(Eu&n)===n&&(4===Lu||3===Lu&&(130023424&Eu)===Eu&&500>Xe()-ju?cc(e,0):Bu|=n),ec(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Qu();null!==(e=Ca(e,t))&&(vt(e,t,n),ec(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),kc(e,n)}function Mc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,n,r){return new Ac(e,t,n,r)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Tc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Oc(n.children,i,o,t);case S:s=8,i|=8;break;case C:return(e=Ec(12,n,t,2|i)).elementType=C,e.lanes=o,e;case T:return(e=Ec(13,n,t,i)).elementType=T,e.lanes=o,e;case I:return(e=Ec(19,n,t,i)).elementType=I,e.lanes=o,e;case P:return Pc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case M:s=10;break e;case A:s=9;break e;case E:s=11;break e;case L:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ec(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ec(7,e,r,t)).lanes=n,e}function Pc(e,t,n,r){return(e=Ec(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Ec(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rc(e,t,n,r,i,a,o,s,u){return e=new Nc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ec(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function jc(e){if(!e)return ki;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ei(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ei(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,s,u){return(e=Rc(n,r,!0,e,0,a,0,s,u)).context=jc(null),n=e.current,(a=Ta(r=Qu(),i=Ju(n))).callback=void 0!==t&&null!==t?t:null,Ia(n,a,i),e.current.lanes=i,vt(e,i,r),ec(e,r),e}function Fc(e,t,n,r){var i=t.current,a=Qu(),o=Ju(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ia(i,t,o))&&($u(e,i,o,a),La(e,i,o)),o}function Uc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}bu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)vs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vs=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),ca();break;case 5:to(t);break;case 1:Ei(t.type)&&Oi(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;wi(da,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(wi(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(wi(ro,1&ro.current),null!==(e=Us(e,t,n))?e.sibling:null);wi(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),wi(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Us(e,t,n)}(e,t,n);vs=0!==(131072&e.flags)}else vs=!1,ea&&0!==(1048576&t.flags)&&Ki(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Fs(e,t),e=t.pendingProps;var i=Ai(t,Si.current);ba(t,n),i=bo(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ei(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Ra,t.stateNode=i,i._reactInternals=t,Ua(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ea&&o&&Xi(t),ms(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Fs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===L)return 14}return 2}(r),e=fa(r,e),i){case 0:t=ks(null,t,r,e,n);break e;case 1:t=Ss(null,t,r,e,n);break e;case 11:t=ys(null,t,r,e,n);break e;case 14:t=_s(null,t,r,fa(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 3:e:{if(Ms(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ea(e,t),Pa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,i=os(Error(a(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=os(Error(a(424)),t));break e}for($i=ai(t.stateNode.containerInfo.firstChild),Ji=t,ea=!0,ta=null,n=qa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ca(),r===i){t=Us(e,t,n);break e}ms(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&aa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Jr(r,i)?s=null:null!==o&&Jr(r,o)&&(t.flags|=32),ws(e,t),ms(e,t,s,n),t.child;case 6:return null===e&&aa(t),null;case 13:return Ds(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wa(t,null,r,n):ms(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ys(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 7:return ms(e,t,t.pendingProps,n),t.child;case 8:case 12:return ms(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,wi(da,r._currentValue),r._currentValue=s,null!==o)if(rr(o.value,s)){if(o.children===i.children&&!Ci.current){t=Us(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_a(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ms(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ba(t,n),r=r(i=xa(i)),t.flags|=1,ms(e,t,r,n),t.child;case 14:return i=fa(r=t.type,t.pendingProps),_s(e,t,r,i=fa(r.type,i),n);case 15:return bs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),Fs(e,t),t.tag=1,Ei(r)?(e=!0,Oi(t)):e=!1,ba(t,n),za(t,r,i),Ua(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return xs(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Wc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(){}function Xc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Uc(o);s.call(e)}}Fc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Uc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Kc);return e._reactRootContainer=o,e[li]=o.current,jr(8===e.nodeType?e.parentNode:e),sc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Uc(u);s.call(e)}}var u=Rc(e,0,!1,null,0,!1,0,"",Kc);return e._reactRootContainer=u,e[li]=u.current,jr(8===e.nodeType?e.parentNode:e),sc((function(){Fc(t,u,n,r)})),u}(n,t,e,i,r);return Uc(o)}Wc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Fc(e,t,null,null)},Wc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sc((function(){Fc(null,e,null,null)})),t[li]=null}},Wc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Nt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=lt(t.pendingLanes);0!==n&&(mt(t,1|n),ec(t,Xe()),0===(6&Cu)&&(zu=Xe()+500,ji()))}break;case 13:sc((function(){var t=Ca(e,1);if(null!==t){var n=Qu();$u(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)$u(t,e,134217728,Qu());Hc(e,134217728)}},wt=function(e){if(13===e.tag){var t=Ju(e),n=Ca(e,t);if(null!==n)$u(n,e,t,Qu());Hc(e,t)}},kt=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=mi(r);if(!i)throw Error(a(90));q(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=oc,Ee=sc;var Qc={usingClientEntryPoint:!1,Events:[gi,vi,mi,Ce,Me,oc]},Jc={findFiberByHostInstance:pi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$c={bundleType:Jc.bundleType,version:Jc.version,rendererPackageName:Jc.rendererPackageName,rendererConfig:Jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:Jc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{rt=el.inject($c),it=el}catch(tl){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!qc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Rc(e,1,!1,null,0,n,0,r,i),e[li]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return sc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,s),e[li]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Wc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(sc((function(){Xc(null,null,e,!1,(function(){e._reactRootContainer=null,e[li]=null}))})),!0)},t.unstable_batchedUpdates=oc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case f:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case h:case g:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===s||e===o||e===f||e===d||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===p||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=m},7441:function(e,t,n){"use strict";e.exports=n(1372)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=_.prototype=new y;b.constructor=_,g(b,m.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+E(u,0):a,x(o)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(M(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var l=a+E(s=e[c],c);u+=T(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=T(s=s.value,t,i,l=a+E(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,g=!1,v=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function x(e){if(v=!1,b(e),!g)if(null!==r(c))g=!0,P(w);else{var t=r(l);null!==t&&D(x,t.startTime-e)}}function w(e,n){g=!1,v&&(v=!1,y(M),M=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!T());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(x,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,C=null,M=-1,A=5,E=-1;function T(){return!(t.unstable_now()-E<A)}function I(){if(null!==C){var e=t.unstable_now();E=e;var n=!0;try{n=C(!0,e)}finally{n?k():(S=!1,C=null)}}else S=!1}if("function"===typeof _)k=function(){_(I)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,O=L.port2;L.port1.onmessage=I,k=function(){O.postMessage(null)}}else k=function(){m(I,0)};function P(e){C=e,S||(S=!0,k())}function D(e,n){M=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(v?(y(M),M=-1):v=!0,D(x,a-o))):(e.sortIndex=s,n(c,e),g||p||(g=!0,P(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var c=a[u];if(!s(c))return!1;var l=e[c],h=t[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0}},4313:function(e,t,n){"use strict";n.r(t),n.d(t,{ServerStyleSheet:function(){return Ue},StyleSheetConsumer:function(){return ae},StyleSheetContext:function(){return ie},StyleSheetManager:function(){return he},ThemeConsumer:function(){return Pe},ThemeContext:function(){return Oe},ThemeProvider:function(){return De},__PRIVATE__:function(){return Ge},createGlobalStyle:function(){return ze},css:function(){return xe},default:function(){return Ye},isStyledComponent:function(){return x},keyframes:function(){return Fe},useTheme:function(){return He},version:function(){return k},withTheme:function(){return Ve}});var r=n(7441),i=n(2791),a=n(9613),o=n.n(a);var s=function(e){function t(e,r,u,c,f){for(var d,p,g,v,b,w=0,k=0,S=0,C=0,M=0,O=0,D=g=d=0,N=0,R=0,j=0,z=0,F=u.length,U=F-1,V="",H="",G="",Y="";N<F;){if(p=u.charCodeAt(N),N===U&&0!==k+C+S+w&&(0!==k&&(p=47===k?10:47),C=S=w=0,F++,U++),0===k+C+S+w){if(N===U&&(0<R&&(V=V.replace(h,"")),0<V.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:V+=u.charAt(N)}p=59}switch(p){case 123:for(d=(V=V.trim()).charCodeAt(0),g=1,z=++N;N<F;){switch(p=u.charCodeAt(N)){case 123:g++;break;case 125:g--;break;case 47:switch(p=u.charCodeAt(N+1)){case 42:case 47:e:{for(D=N+1;D<U;++D)switch(u.charCodeAt(D)){case 47:if(42===p&&42===u.charCodeAt(D-1)&&N+2!==D){N=D+1;break e}break;case 10:if(47===p){N=D+1;break e}}N=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;N++<U&&u.charCodeAt(N)!==p;);}if(0===g)break;N++}if(g=u.substring(z,N),0===d&&(d=(V=V.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<R&&(V=V.replace(h,"")),p=V.charCodeAt(1)){case 100:case 109:case 115:case 45:R=r;break;default:R=L}if(z=(g=t(r,R,g,p,f+1)).length,0<P&&(b=s(3,g,R=n(L,V,j),r,E,A,z,p,f,c),V=R.join(""),void 0!==b&&0===(z=(g=b.trim()).length)&&(p=0,g="")),0<z)switch(p){case 115:V=V.replace(x,o);case 100:case 109:case 45:g=V+"{"+g+"}";break;case 107:g=(V=V.replace(m,"$1 $2"))+"{"+g+"}",g=1===I||2===I&&a("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=V+g,112===c&&(H+=g,g="")}else g=""}else g=t(r,n(r,V,j),g,c,f+1);G+=g,g=j=R=D=d=0,V="",p=u.charCodeAt(++N);break;case 125:case 59:if(1<(z=(V=(0<R?V.replace(h,""):V).trim()).length))switch(0===D&&(d=V.charCodeAt(0),45===d||96<d&&123>d)&&(z=(V=V.replace(" ",":")).length),0<P&&void 0!==(b=s(1,V,r,e,E,A,H.length,c,f,c))&&0===(z=(V=b.trim()).length)&&(V="\0\0"),d=V.charCodeAt(0),p=V.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){Y+=V+u.charAt(N);break}default:58!==V.charCodeAt(z-1)&&(H+=i(V,d,p,V.charCodeAt(2)))}j=R=D=d=0,V="",p=u.charCodeAt(++N)}}switch(p){case 13:case 10:47===k?k=0:0===1+d&&107!==c&&0<V.length&&(R=1,V+="\0"),0<P*B&&s(0,V,r,e,E,A,H.length,c,f,c),A=1,E++;break;case 59:case 125:if(0===k+C+S+w){A++;break}default:switch(A++,v=u.charAt(N),p){case 9:case 32:if(0===C+w+k)switch(M){case 44:case 58:case 9:case 32:v="";break;default:32!==p&&(v=" ")}break;case 0:v="\\0";break;case 12:v="\\f";break;case 11:v="\\v";break;case 38:0===C+k+w&&(R=j=1,v="\f"+v);break;case 108:if(0===C+k+w+T&&0<D)switch(N-D){case 2:112===M&&58===u.charCodeAt(N-3)&&(T=M);case 8:111===O&&(T=O)}break;case 58:0===C+k+w&&(D=N);break;case 44:0===k+S+C+w&&(R=1,v+="\r");break;case 34:case 39:0===k&&(C=C===p?0:0===C?p:C);break;case 91:0===C+k+S&&w++;break;case 93:0===C+k+S&&w--;break;case 41:0===C+k+w&&S--;break;case 40:if(0===C+k+w){if(0===d)if(2*M+3*O===533);else d=1;S++}break;case 64:0===k+S+C+w+D+g&&(g=1);break;case 42:case 47:if(!(0<C+w+S))switch(k){case 0:switch(2*p+3*u.charCodeAt(N+1)){case 235:k=47;break;case 220:z=N,k=42}break;case 42:47===p&&42===M&&z+2!==N&&(33===u.charCodeAt(z+2)&&(H+=u.substring(z,N+1)),v="",k=0)}}0===k&&(V+=v)}O=M,M=p,N++}if(0<(z=H.length)){if(R=r,0<P&&(void 0!==(b=s(2,H,R,e,E,A,z,c,f,c))&&0===(H=b).length))return Y+H+G;if(H=R.join(",")+"{"+H+"}",0!==I*T){switch(2!==I||a(H,2)||(T=0),T){case 111:H=H.replace(_,":-moz-$1")+H;break;case 112:H=H.replace(y,"::-webkit-input-$1")+H.replace(y,"::-moz-$1")+H.replace(y,":-ms-input-$1")+H}T=0}}return Y+H+G}function n(e,t,n){var i=t.trim().split(g);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<a;++s)for(var c=0;c<o;++c)t[u++]=r(e[c]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(v,"$1"+e.trim());case 58:return e.trim()+t.replace(v,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(v,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===I||2===I&&a(u,1)?"-webkit-"+u+u:u}if(0===I||2===I&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(M,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return d.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(b,"tb");break;case 232:u=o.replace(b,"tb-rl");break;case 220:u=o.replace(b,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(k,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(k,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===C.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(S,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,a,o,s,u,l){for(var h,f=0,d=t;f<P;++f)switch(h=O[f].call(c,e,d,n,r,i,a,o,s,u,l)){case void 0:case!1:case!0:case null:break;default:d=h}if(d!==t)return d}function u(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!==typeof e?I=1:(I=2,D=e):I=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<P){var i=s(-1,n,r,r,E,A,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(L,r,n,0,0);return 0<P&&(void 0!==(i=s(-2,a,r,r,E,A,a.length,0,0,0))&&(a=i)),"",T=0,A=E=1,a}var l=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,g=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,_=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,k=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,C=/stretch|:\s*\w+\-(?:conte|avail)/,M=/([^-])(image-set\()/,A=1,E=1,T=0,I=1,L=[],O=[],P=0,D=null,B=0;return c.use=function e(t){switch(t){case void 0:case null:P=O.length=0;break;default:if("function"===typeof t)O[P++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else B=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},u={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},c=n(9797),l=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=(0,c.Z)((function(e){return l.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),f=n(2110),d=n.n(f);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},v=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,r.typeOf)(e)},m=Object.freeze([]),y=Object.freeze({});function _(e){return"function"==typeof e}function b(e){return e.displayName||e.name||"Component"}function x(e){return e&&"string"==typeof e.styledComponentId}var w="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",k="5.3.11",S="undefined"!=typeof window&&"HTMLElement"in window,C=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),M={};function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var E=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&A(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),T=new Map,I=new Map,L=1,O=function(e){if(T.has(e))return T.get(e);for(;I.has(L);)L++;var t=L++;return T.set(e,t),I.set(t,e),t},P=function(e){return I.get(e)},D=function(e,t){t>=L&&(L=t+1),T.set(e,t),I.set(t,e)},B="style["+w+'][data-styled-version="5.3.11"]',N=new RegExp("^"+w+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),R=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},j=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(N);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(D(c,u),R(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},z=function(){return n.nc},F=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(w))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(w,"active"),r.setAttribute("data-styled-version","5.3.11");var o=z();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},U=function(){function e(e){var t=this.element=F(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}A(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),V=function(){function e(e){var t=this.element=F(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),H=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),G=S,Y={isServer:!S,useCSSOMInjection:!C},W=function(){function e(e,t,n){void 0===e&&(e=y),void 0===t&&(t={}),this.options=p({},Y,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&S&&G&&(G=!1,function(e){for(var t=document.querySelectorAll(B),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(w)&&(j(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return O(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(p({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new H(i):r?new U(i):new V(i),new E(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(O(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(O(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(O(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=P(i);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(i);if(o&&s&&o.size){var u=w+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),q=/(a)(d)/gi,Z=function(e){return String.fromCharCode(e+(e>25?39:97))};function K(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Z(t%52)+n;return(Z(t%52)+n).replace(q,"$1-$2")}var X=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Q=function(e){return X(5381,e)};function J(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(_(n)&&!x(n))return!1}return!0}var $=Q("5.3.11"),ee=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&J(e),this.componentId=t,this.baseHash=X($,t),this.baseStyle=n,W.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=_e(this.rules,e,t,n).join(""),o=K(X(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,c=X(this.baseHash,n.hash),l="",h=0;h<u;h++){var f=this.rules[h];if("string"==typeof f)l+=f;else if(f){var d=_e(f,e,t,n),p=Array.isArray(d)?d.join(""):d;c=X(c,p+h),l+=p}}if(l){var g=K(c>>>0);if(!t.hasNameForId(r,g)){var v=n(l,"."+g,void 0,r);t.insertRules(r,g,v)}i.push(g)}}return i.join(" ")},e}(),te=/^\s*\/\/.*$/gm,ne=[":","[",".","#"];function re(e){var t,n,r,i,a=void 0===e?y:e,o=a.options,u=void 0===o?y:o,c=a.plugins,l=void 0===c?m:c,h=new s(u),f=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,u,c,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),p=function(e,r,a){return 0===r&&-1!==ne.indexOf(a[n.length])||a.match(i)?e:"."+t};function g(e,a,o,s){void 0===s&&(s="&");var u=e.replace(te,""),c=a&&o?o+" "+a+" { "+u+" }":u;return t=s,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),h(o||!a?"":a,c)}return h.use([].concat(l,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,p))},d,function(e){if(-2===e){var t=f;return f=[],t}}])),g.hash=l.length?l.reduce((function(e,t){return t.name||A(15),X(e,t.name)}),5381).toString():"",g}var ie=i.createContext(),ae=ie.Consumer,oe=i.createContext(),se=(oe.Consumer,new W),ue=re();function ce(){return(0,i.useContext)(ie)||se}function le(){return(0,i.useContext)(oe)||ue}function he(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],a=ce(),s=(0,i.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),u=(0,i.useMemo)((function(){return re({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){o()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(ie.Provider,{value:s},i.createElement(oe.Provider,{value:u},e.children))}var fe=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ue);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return A(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ue),this.name+e.hash},e}(),de=/([A-Z])/,pe=/([A-Z])/g,ge=/^ms-/,ve=function(e){return"-"+e.toLowerCase()};function me(e){return de.test(e)?e.replace(pe,ve).replace(ge,"-ms-"):e}var ye=function(e){return null==e||!1===e||""===e};function _e(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=_e(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return ye(e)?"":x(e)?"."+e.styledComponentId:_(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t?e:_e(e(t),t,n,r):e instanceof fe?n?(e.inject(n,r),e.getName(r)):e:v(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!ye(t[o])&&(Array.isArray(t[o])&&t[o].isCss||_(t[o])?a.push(me(o)+":",t[o],";"):v(t[o])?a.push.apply(a,e(t[o],o)):a.push(me(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in u||r.startsWith("--")?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var c}var be=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function xe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _(e)||v(e)?be(_e(g(m,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:be(_e(g(e,n)))}new Set;var we=function(e,t,n){return void 0===n&&(n=y),e.theme!==n.theme&&e.theme||t||n.theme},ke=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Se=/(^-|-$)/g;function Ce(e){return e.replace(ke,"-").replace(Se,"")}var Me=function(e){return K(Q(e)>>>0)};function Ae(e){return"string"==typeof e&&!0}var Ee=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Te=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ie(e,t,n){var r=e[n];Ee(t)&&Ee(r)?Le(r,t):e[n]=t}function Le(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(Ee(o))for(var s in o)Te(s)&&Ie(e,o[s],s)}return e}var Oe=i.createContext(),Pe=Oe.Consumer;function De(e){var t=(0,i.useContext)(Oe),n=(0,i.useMemo)((function(){return function(e,t){return e?_(e)?e(t):Array.isArray(e)||"object"!=typeof e?A(8):t?p({},t,{},e):e:A(14)}(e.theme,t)}),[e.theme,t]);return e.children?i.createElement(Oe.Provider,{value:n},e.children):null}var Be={};function Ne(e,t,n){var r=x(e),a=!Ae(e),o=t.attrs,s=void 0===o?m:o,u=t.componentId,c=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Ce(e);Be[n]=(Be[n]||0)+1;var r=n+"-"+Me("5.3.11"+n+Be[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):u,l=t.displayName,f=void 0===l?function(e){return Ae(e)?"styled."+e:"Styled("+b(e)+")"}(e):l,g=t.displayName&&t.componentId?Ce(t.displayName)+"-"+t.componentId:t.componentId||c,v=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,w=t.shouldForwardProp;r&&e.shouldForwardProp&&(w=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var k,S=new ee(n,g,r?e.componentStyle:void 0),C=S.isStatic&&0===s.length,M=function(e,t){return function(e,t,n,r){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,f=e.target,d=function(e,t,n){void 0===e&&(e=y);var r=p({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in _(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(we(t,(0,i.useContext)(Oe),s)||y,t,a),g=d[0],v=d[1],m=function(e,t,n,r){var i=ce(),a=le();return t?e.generateAndInjectStyles(y,i,a):e.generateAndInjectStyles(n,i,a)}(o,r,g),b=n,x=v.$as||t.$as||v.as||t.as||f,w=Ae(x),k=v!==t?p({},t,{},v):t,S={};for(var C in k)"$"!==C[0]&&"as"!==C&&("forwardedAs"===C?S.as=k[C]:(c?c(C,h,x):!w||h(C))&&(S[C]=k[C]));return t.style&&v.style!==t.style&&(S.style=p({},t.style,{},v.style)),S.className=Array.prototype.concat(u,l,m!==l?m:null,t.className,v.className).filter(Boolean).join(" "),S.ref=b,(0,i.createElement)(x,S)}(k,e,t,C)};return M.displayName=f,(k=i.forwardRef(M)).attrs=v,k.componentStyle=S,k.displayName=f,k.shouldForwardProp=w,k.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):m,k.styledComponentId=g,k.target=r?e.target:e,k.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(Ae(e)?e:Ce(b(e)));return Ne(e,p({},i,{attrs:v,componentId:a}),n)},Object.defineProperty(k,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Le({},e.defaultProps,t):t}}),Object.defineProperty(k,"toString",{value:function(){return"."+k.styledComponentId}}),a&&d()(k,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),k}var Re=function(e){return function e(t,n,i){if(void 0===i&&(i=y),!(0,r.isValidElementType)(n))return A(1,String(n));var a=function(){return t(n,i,xe.apply(void 0,arguments))};return a.withConfig=function(r){return e(t,n,p({},i,{},r))},a.attrs=function(r){return e(t,n,p({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},a}(Ne,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Re[e]=Re(e)}));var je=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=J(e),W.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(_e(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&W.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=xe.apply(void 0,[e].concat(n)),o="sc-global-"+Me(JSON.stringify(a)),s=new je(a,o);function u(e){var t=ce(),n=le(),r=(0,i.useContext)(Oe),a=(0,i.useRef)(t.allocateGSInstance(o)).current;return t.server&&c(a,e,t,r,n),(0,i.useLayoutEffect)((function(){if(!t.server)return c(a,e,t,r,n),function(){return s.removeStyles(a,t)}}),[a,e,t,r,n]),null}function c(e,t,n,r,i){if(s.isStatic)s.renderStyles(e,M,n,i);else{var a=p({},t,{theme:we(t,r,u.defaultProps)});s.renderStyles(e,a,n,i)}}return i.memo(u)}function Fe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=xe.apply(void 0,[e].concat(n)).join(""),a=Me(i);return new fe(a,i)}var Ue=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=z();return"<style "+[n&&'nonce="'+n+'"',w+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?A(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return A(2);var n=((t={})[w]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=z();return r&&(n.nonce=r),[i.createElement("style",p({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new W({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?A(2):i.createElement(he,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return A(3)},e}(),Ve=function(e){var t=i.forwardRef((function(t,n){var r=(0,i.useContext)(Oe),a=e.defaultProps,o=we(t,r,a);return i.createElement(e,p({},t,{theme:o,ref:n}))}));return d()(t,e),t.displayName="WithTheme("+b(e)+")",t},He=function(){return(0,i.useContext)(Oe)},Ge={StyleSheet:W,masterSheet:se},Ye=Re},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=c((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,h[0],h[1]);return u((function(){f.hasValue=!0,f.value=d}),[d]),l(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},8299:function(e,t,n){var r,i=n(2122).default,a=n(8416).default,o=n(7061).default,s=n(7156).default,u=n(6115).default,c=n(1588).default,l=n(3808).default,h=n(1655).default,f=n(6389).default,d=n(861).default,p=n(7424).default,g=n(4704).default,v=n(6690).default,m=n(9728).default;self,r=function(e,t){return function(){var r={"./node_modules/call-bind/callBound.js":function(e,t,n){"use strict";var r=n("./node_modules/get-intrinsic/index.js"),i=n("./node_modules/call-bind/index.js"),a=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&a(e,".prototype.")>-1?i(n):n}},"./node_modules/call-bind/index.js":function(e,t,n){"use strict";var r=n("./node_modules/function-bind/index.js"),i=n("./node_modules/get-intrinsic/index.js"),a=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(o,a),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(f){c=null}e.exports=function(e){var t=s(r,o,arguments);return u&&c&&u(t,"length").configurable&&c(t,"length",{value:1+l(0,e.length-(arguments.length-1))}),t};var h=function(){return s(r,a,arguments)};c?c(e.exports,"apply",{value:h}):e.exports.apply=h},"./node_modules/function-bind/implementation.js":function(e){"use strict";var t=Array.prototype.slice,n=Object.prototype.toString;e.exports=function(e){var r=this;if("function"!==typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,a=t.call(arguments,1),o=Math.max(0,r.length-a.length),s=[],u=0;u<o;u++)s.push("$"+u);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,a.concat(t.call(arguments)));return Object(n)===n?n:this}return r.apply(e,a.concat(t.call(arguments)))})),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}},"./node_modules/function-bind/index.js":function(e,t,n){"use strict";var r=n("./node_modules/function-bind/implementation.js");e.exports=Function.prototype.bind||r},"./node_modules/get-intrinsic/index.js":function(e,t,n){"use strict";var r,i=SyntaxError,a=Function,o=TypeError,s=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(T){u=null}var c=function(){throw new o},l=u?function(){try{return c}catch(e){try{return u(arguments,"callee").get}catch(t){return c}}}():c,h=n("./node_modules/has-symbols/index.js")(),f=Object.getPrototypeOf||function(e){return e.__proto__},d={},p="undefined"===typeof Uint8Array?r:f(Uint8Array),g={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":p,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};try{null.error}catch(T){var v=f(f(T));g["%Error.prototype%"]=v}var m=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=f(i.prototype))}return g[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=n("./node_modules/function-bind/index.js"),b=n("./node_modules/has/src/index.js"),x=_.call(Function.call,Array.prototype.concat),w=_.call(Function.apply,Array.prototype.splice),k=_.call(Function.call,String.prototype.replace),S=_.call(Function.call,String.prototype.slice),C=_.call(Function.call,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,E=function(e,t){var n,r=e;if(b(y,r)&&(r="%"+(n=y[r])[0]+"%"),b(g,r)){var a=g[r];if(a===d&&(a=m(r)),"undefined"===typeof a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=S(e,0,1),n=S(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return k(e,M,(function(e,t,n,i){r[r.length]=n?k(i,A,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",a=E("%"+r+"%",t),s=a.name,c=a.value,l=!1,h=a.alias;h&&(r=h[0],w(n,x([0,1],h)));for(var f=1,d=!0;f<n.length;f+=1){var p=n[f],v=S(p,0,1),m=S(p,-1);if(('"'===v||"'"===v||"`"===v||'"'===m||"'"===m||"`"===m)&&v!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&d||(l=!0),b(g,s="%"+(r+="."+p)+"%"))c=g[s];else if(null!=c){if(!(p in c)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var y=u(c,p);c=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[p]}else d=b(c,p),c=c[p];d&&!l&&(g[s]=c)}}return c}},"./node_modules/has-symbols/index.js":function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n("./node_modules/has-symbols/shams.js");e.exports=function(){return"function"===typeof r&&"function"===typeof Symbol&&"symbol"===typeof r("foo")&&"symbol"===typeof Symbol("bar")&&i()}},"./node_modules/has-symbols/shams.js":function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},"./node_modules/has/src/index.js":function(e,t,n){"use strict";var r=n("./node_modules/function-bind/index.js");e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},"./node_modules/lodash/lodash.js":function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,c=32,l=64,h=128,f=256,d=1/0,p=9007199254740991,g=NaN,v=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",f]],y="[object Arguments]",_="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",k="[object Function]",S="[object GeneratorFunction]",C="[object Map]",M="[object Number]",A="[object Object]",E="[object Promise]",T="[object RegExp]",I="[object Set]",L="[object String]",O="[object Symbol]",P="[object WeakMap]",D="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",j="[object Int8Array]",z="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",H="[object Uint16Array]",G="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(Z.source),Q=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Me="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Le="['\u2019]",Oe="["+Se+"]",Pe="["+Ie+"]",De="["+Ce+"]",Be="\\d+",Ne="["+Me+"]",Re="["+Ae+"]",je="[^"+Se+Ie+Be+Me+Ae+Ee+"]",ze="\\ud83c[\\udffb-\\udfff]",Fe="[^"+Se+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Ee+"]",Ge="\\u200d",Ye="(?:"+Re+"|"+je+")",We="(?:"+He+"|"+je+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+De+"|"+ze+")?",Xe="["+Te+"]?",Qe=Xe+Ke+"(?:"+Ge+"(?:"+[Fe,Ue,Ve].join("|")+")"+Xe+Ke+")*",Je="(?:"+[Ne,Ue,Ve].join("|")+")"+Qe,$e="(?:"+[Fe+De+"?",De,Ue,Ve,Oe].join("|")+")",et=RegExp(Le,"g"),tt=RegExp(De,"g"),nt=RegExp(ze+"(?="+ze+")|"+$e+Qe,"g"),rt=RegExp([He+"?"+Re+"+"+qe+"(?="+[Pe,He,"$"].join("|")+")",We+"+"+Ze+"(?="+[Pe,He+Ye,"$"].join("|")+")",He+"?"+Ye+"+"+qe,He+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,Je].join("|"),"g"),it=RegExp("["+Ge+Se+Ce+Te+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,ut={};ut[N]=ut[R]=ut[j]=ut[z]=ut[F]=ut[U]=ut[V]=ut[H]=ut[G]=!0,ut[y]=ut[_]=ut[D]=ut[b]=ut[B]=ut[x]=ut[w]=ut[k]=ut[C]=ut[M]=ut[A]=ut[T]=ut[I]=ut[L]=ut[P]=!1;var ct={};ct[y]=ct[_]=ct[D]=ct[B]=ct[b]=ct[x]=ct[N]=ct[R]=ct[j]=ct[z]=ct[F]=ct[C]=ct[M]=ct[A]=ct[T]=ct[I]=ct[L]=ct[O]=ct[U]=ct[V]=ct[H]=ct[G]=!0,ct[w]=ct[k]=ct[P]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,ft=parseInt,dt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=dt||pt||Function("return this")(),vt=t&&!t.nodeType&&t,mt=vt&&e&&!e.nodeType&&e,yt=mt&&mt.exports===vt,_t=yt&&dt.process,bt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||_t&&_t.binding&&_t.binding("util")}catch(t){}}(),xt=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,kt=bt&&bt.isMap,St=bt&&bt.isRegExp,Ct=bt&&bt.isSet,Mt=bt&&bt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Pt(e,t){return!(null==e||!e.length)&&Ht(e,t,0)>-1}function Dt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=qt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Ht(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,Yt,n)}function Gt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Yt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:g}function qt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Xt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function $t(e){return function(t){return e(t)}}function en(e,t){return Bt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var an=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+lt[e]}function un(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return un(e)?function(e){for(var t=nt.lastIndex=0;nt.test(e);)++t;return t}(e):Ft(e)}function gn(e){return un(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yn=function e(t){var n=(t=null==t?gt:yn.defaults(gt.Object(),t,yn.pick(gt,ot))).Array,r=t.Date,se=t.Error,Se=t.Function,Ce=t.Math,Me=t.Object,Ae=t.RegExp,Ee=t.String,Te=t.TypeError,Ie=n.prototype,Le=Se.prototype,Oe=Me.prototype,Pe=t["__core-js_shared__"],De=Le.toString,Be=Oe.hasOwnProperty,Ne=0,Re=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),je=Oe.toString,ze=De.call(Me),Fe=gt._,Ue=Ae("^"+De.call(Be).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=yt?t.Buffer:i,He=t.Symbol,Ge=t.Uint8Array,Ye=Ve?Ve.allocUnsafe:i,We=ln(Me.getPrototypeOf,Me),qe=Me.create,Ze=Oe.propertyIsEnumerable,Ke=Ie.splice,Xe=He?He.isConcatSpreadable:i,Qe=He?He.iterator:i,Je=He?He.toStringTag:i,$e=function(){try{var e=ha(Me,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,it=r&&r.now!==gt.Date.now&&r.now,lt=t.setTimeout!==gt.setTimeout&&t.setTimeout,dt=Ce.ceil,pt=Ce.floor,vt=Me.getOwnPropertySymbols,mt=Ve?Ve.isBuffer:i,_t=t.isFinite,bt=Ie.join,Ft=ln(Me.keys,Me),Zt=Ce.max,_n=Ce.min,bn=r.now,xn=t.parseInt,wn=Ce.random,kn=Ie.reverse,Sn=ha(t,"DataView"),Cn=ha(t,"Map"),Mn=ha(t,"Promise"),An=ha(t,"Set"),En=ha(t,"WeakMap"),Tn=ha(Me,"create"),In=En&&new En,Ln={},On=Ra(Sn),Pn=Ra(Cn),Dn=Ra(Mn),Bn=Ra(An),Nn=Ra(En),Rn=He?He.prototype:i,jn=Rn?Rn.valueOf:i,zn=Rn?Rn.toString:i;function Fn(e){if(ts(e)&&!Go(e)&&!(e instanceof Gn)){if(e instanceof Hn)return e;if(Be.call(e,"__wrapped__"))return ja(e)}return new Hn(e)}var Un=function(){function e(){}return function(t){if(!es(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Xn(e,t){var n=Go(e),r=!n&&Ho(e),i=!n&&!r&&Zo(e),a=!n&&!r&&!i&&cs(e),o=n||r||i||a,s=o?Qt(e.length,Ee):[],u=s.length;for(var c in e)!t&&!Be.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ya(c,u))||s.push(c);return s}function Qn(e){var t=e.length;return t?e[Zr(0,t-1)]:i}function Jn(e,t){return Da(Ti(e),sr(t,0,e.length))}function $n(e){return Da(Ti(e))}function er(e,t,n){(n!==i&&!Fo(e[t],n)||n===i&&!(t in e))&&ar(e,t,n)}function tr(e,t,n){var r=e[t];Be.call(e,t)&&Fo(r,n)&&(n!==i||t in e)||ar(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Fo(e[n][0],t))return n;return-1}function rr(e,t,n,r){return fr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ir(e,t){return e&&Ii(t,Ls(t),e)}function ar(e,t,n){"__proto__"==t&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Ms(e,t[r]);return o}function sr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,a,o){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!es(e))return e;var h=Go(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return Ti(e,s)}else{var f=pa(e),d=f==k||f==S;if(Zo(e))return ki(e,u);if(f==A||f==y||d&&!a){if(s=c||d?{}:va(e),!u)return c?function(e,t){return Ii(e,da(e),t)}(e,function(e,t){return e&&Ii(t,Os(t),e)}(s,e)):function(e,t){return Ii(e,fa(e),t)}(e,ir(s,e))}else{if(!ct[f])return a?e:{};s=function(e,t,n){var r,i=e.constructor;switch(t){case D:return Si(e);case b:case x:return new i(+e);case B:return function(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case j:case z:case F:case U:case V:case H:case G:return Ci(e,n);case C:return new i;case M:case L:return new i(e);case T:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new i;case O:return r=e,jn?Me(jn.call(r)):{}}}(e,f,u)}}o||(o=new Kn);var p=o.get(e);if(p)return p;o.set(e,s),os(e)?e.forEach((function(r){s.add(ur(r,t,n,r,e,o))})):ns(e)&&e.forEach((function(r,i){s.set(i,ur(r,t,n,i,e,o))}));var g=h?i:(l?c?ia:ra:c?Os:Ls)(e);return Tt(g||e,(function(r,i){g&&(r=e[i=r]),tr(s,i,ur(r,t,n,i,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Me(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function lr(e,t,n){if("function"!=typeof e)throw new Te(a);return Ia((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=Pt,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Bt(t,$t(n))),r?(a=Dt,o=!1):t.length>=200&&(a=tn,o=!1,t=new Zn(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h===h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else a(t,h,r)||u.push(l)}return u}Fn.templateSettings={escape:J,evaluate:$,interpolate:ee,variable:"",imports:{_:Fn}},Fn.prototype=Vn.prototype,Fn.prototype.constructor=Fn,Hn.prototype=Un(Vn.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Un(Vn.prototype),Gn.prototype.constructor=Gn,Yn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return n===o?i:n}return Be.call(t,e)?t[e]:i},Yn.prototype.has=function(e){var t=this.__data__;return Tn?t[e]!==i:Be.call(t,e)},Yn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&t===i?o:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return nr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Cn||Wn),string:new Yn}},qn.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ca(this,e).get(e)},qn.prototype.has=function(e){return ca(this,e).has(e)},qn.prototype.set=function(e,t){var n=ca(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,o),this},Zn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Cn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var fr=Pi(br),dr=Pi(xr,!0);function pr(e,t){var n=!0;return fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(u===i?s===s&&!us(s):n(s,u)))var u=s,c=o}return c}function vr(e,t){var n=[];return fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function mr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ma),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?mr(s,t-1,n,r,i):Nt(i,s):r||(i[i.length]=s)}return i}var yr=Di(),_r=Di(!0);function br(e,t){return e&&yr(e,t,Ls)}function xr(e,t){return e&&_r(e,t,Ls)}function wr(e,t){return Ot(t,(function(t){return Qo(e[t])}))}function kr(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[Na(t[n++])];return n&&n==r?e:i}function Sr(e,t,n){var r=t(e);return Go(e)?r:Nt(r,n(e))}function Cr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in Me(e)?function(e){var t=Be.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(o){}var a=je.call(e);return r&&(t?e[Je]=n:delete e[Je]),a}(e):function(e){return je.call(e)}(e)}function Mr(e,t){return e>t}function Ar(e,t){return null!=e&&Be.call(e,t)}function Er(e,t){return null!=e&&t in Me(e)}function Tr(e,t,r){for(var a=r?Dt:Pt,o=e[0].length,s=e.length,u=s,c=n(s),l=1/0,h=[];u--;){var f=e[u];u&&t&&(f=Bt(f,$t(t))),l=_n(f.length,l),c[u]=!r&&(t||o>=120&&f.length>=120)?new Zn(u&&f):i}f=e[0];var d=-1,p=c[0];e:for(;++d<o&&h.length<l;){var g=f[d],v=t?t(g):g;if(g=r||0!==g?g:0,!(p?tn(p,v):a(h,v,r))){for(u=s;--u;){var m=c[u];if(!(m?tn(m,v):a(e[u],v,r)))continue e}p&&p.push(v),h.push(g)}}return h}function Ir(e,t,n){var r=null==(e=Aa(e,t=_i(t,e)))?e:e[Na(Ka(t))];return null==r?i:At(r,e,n)}function Lr(e){return ts(e)&&Cr(e)==y}function Or(e,t,n,r,a){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=Go(e),u=Go(t),c=s?_:pa(e),l=u?_:pa(t),h=(c=c==y?A:c)==A,f=(l=l==y?A:l)==A,d=c==l;if(d&&Zo(e)){if(!Zo(t))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Kn),s||cs(e)?ta(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!a(new Ge(e),new Ge(t)));case b:case x:case M:return Fo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case T:case L:return e==t+"";case C:var s=cn;case I:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=ta(s(e),s(t),r,i,a,o);return o.delete(e),l;case O:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var p=h&&Be.call(e,"__wrapped__"),g=f&&Be.call(t,"__wrapped__");if(p||g){var v=p?e.value():e,m=g?t.value():t;return o||(o=new Kn),a(v,m,n,r,o)}}return!!d&&(o||(o=new Kn),function(e,t,n,r,a,o){var s=1&n,u=ra(e),c=u.length,l=ra(t),h=l.length;if(c!=h&&!s)return!1;for(var f=c;f--;){var d=u[f];if(!(s?d in t:Be.call(t,d)))return!1}var p=o.get(e),g=o.get(t);if(p&&g)return p==t&&g==e;var v=!0;o.set(e,t),o.set(t,e);for(var m=s;++f<c;){var y=e[d=u[f]],_=t[d];if(r)var b=s?r(_,y,d,t,e,o):r(y,_,d,e,t,o);if(!(b===i?y===_||a(y,_,n,r,o):b)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o))}(e,t,n,r,Or,a))}function Pr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Me(e);a--;){var u=n[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var c=(u=n[a])[0],l=e[c],h=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var f=new Kn;if(r)var d=r(l,h,c,e,t,f);if(!(d===i?Or(h,l,3,r,f):d))return!1}}return!0}function Dr(e){return!(!es(e)||(t=e,Re&&Re in t))&&(Qo(e)?Ue:ye).test(Ra(e));var t}function Br(e){return"function"==typeof e?e:null==e?ru:"object"==typeof e?Go(e)?Ur(e[0],e[1]):Fr(e):fu(e)}function Nr(e){if(!ka(e))return Ft(e);var t=[];for(var n in Me(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Rr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in Me(e))t.push(n);return t}(e);var t=ka(e),n=[];for(var r in e)("constructor"!=r||!t&&Be.call(e,r))&&n.push(r);return n}function jr(e,t){return e<t}function zr(e,t){var r=-1,i=Wo(e)?n(e.length):[];return fr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Fr(e){var t=la(e);return 1==t.length&&t[0][2]?Ca(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Ur(e,t){return ba(e)&&Sa(t)?Ca(Na(e),t):function(n){var r=Ms(n,e);return r===i&&r===t?As(n,e):Or(t,r,3)}}function Vr(e,t,n,r,a){e!==t&&yr(t,(function(o,s){if(a||(a=new Kn),es(o))!function(e,t,n,r,a,o,s){var u=Ea(e,n),c=Ea(t,n),l=s.get(c);if(l)er(e,n,l);else{var h=o?o(u,c,n+"",e,t,s):i,f=h===i;if(f){var d=Go(c),p=!d&&Zo(c),g=!d&&!p&&cs(c);h=c,d||p||g?Go(u)?h=u:qo(u)?h=Ti(u):p?(f=!1,h=ki(c,!0)):g?(f=!1,h=Ci(c,!0)):h=[]:is(c)||Ho(c)?(h=u,Ho(u)?h=ms(u):es(u)&&!Qo(u)||(h=va(c))):f=!1}f&&(s.set(c,h),a(h,c,r,o,s),s.delete(c)),er(e,n,h)}}(e,t,s,n,Vr,r,a);else{var u=r?r(Ea(e,s),o,s+"",e,t,a):i;u===i&&(u=o),er(e,s,u)}}),Os)}function Hr(e,t){var n=e.length;if(n)return ya(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?Bt(t,(function(e){return Go(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[ru];var r=-1;t=Bt(t,$t(ua()));var i=zr(e,(function(e,n,i){var a=Bt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var u=Mi(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Yr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=kr(e,o);n(s,o)&&$r(a,_i(o,e),s)}return a}function Wr(e,t,n,r){var i=r?Gt:Ht,a=-1,o=t.length,s=e;for(e===t&&(t=Ti(t)),n&&(s=Bt(e,$t(n)));++a<o;)for(var u=0,c=t[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ke.call(s,u,1),Ke.call(e,u,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ya(i)?Ke.call(e,i,1):hi(e,i)}}return e}function Zr(e,t){return e+pt(wn()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return La(Ma(e,t,ru),e+"")}function Qr(e){return Qn(Fs(e))}function Jr(e,t){var n=Fs(e);return Da(n,sr(t,0,n.length))}function $r(e,t,n,r){if(!es(e))return e;for(var a=-1,o=(t=_i(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var c=Na(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=es(h)?h:ya(t[a+1])?[]:{})}tr(u,c,l),u=u[c]}return e}var ei=In?function(e,t){return In.set(e,t),e}:ru,ti=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:eu(t),writable:!0})}:ru;function ni(e){return Da(Fs(e))}function ri(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ii(e,t){var n;return fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!us(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return oi(e,t,ru,n)}function oi(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,c=us(t),l=t===i;a<o;){var h=pt((a+o)/2),f=n(e[h]),d=f!==i,p=null===f,g=f===f,v=us(f);if(s)var m=r||g;else m=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!v):!p&&!v&&(r?f<=t:f<t);m?a=h+1:o=h}return _n(o,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Fo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ui(e){return"number"==typeof e?e:us(e)?g:+e}function ci(e){if("string"==typeof e)return e;if(Go(e))return Bt(e,ci)+"";if(us(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Pt,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Dt;else if(a>=200){var c=t?null:Ki(e);if(c)return fn(c);o=!1,i=tn,u=new Zn}else u=t?[]:s;e:for(;++r<a;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function hi(e,t){return null==(e=Aa(e,t=_i(t,e)))||delete e[Na(Ka(t))]}function fi(e,t,n,r){return $r(e,t,n(kr(e,t)),r)}function di(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ri(e,r?0:a,r?a+1:i):ri(e,r?a+1:0,r?i:a)}function pi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),n)}function gi(e,t,r){var i=e.length;if(i<2)return i?li(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=hr(o[a]||s,e[u],t,r));return li(mr(o,1),t,r)}function vi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var u=r<o?t[r]:i;n(s,e[r],u)}return s}function mi(e){return qo(e)?e:[]}function yi(e){return"function"==typeof e?e:ru}function _i(e,t){return Go(e)?e:ba(e,t)?[e]:Ba(ys(e))}var bi=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var wi=nt||function(e){return gt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=Ye?Ye(n):new e.constructor(n);return e.copy(r),r}function Si(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Ci(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Mi(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=us(e),s=t!==i,u=null===t,c=t===t,l=us(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!l&&e<t||l&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}function Ai(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,c=t.length,l=Zt(o-s,0),h=n(c+l),f=!i;++u<c;)h[u]=t[u];for(;++a<s;)(f||a<o)&&(h[r[a]]=e[a]);for(;l--;)h[u++]=e[a++];return h}function Ei(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,c=-1,l=t.length,h=Zt(o-u,0),f=n(h+l),d=!i;++a<h;)f[a]=e[a];for(var p=a;++c<l;)f[p+c]=t[c];for(;++s<u;)(d||a<o)&&(f[p+r[s]]=e[a++]);return f}function Ti(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ii(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),a?ar(n,u,c):tr(n,u,c)}return n}function Li(e,t){return function(n,r){var i=Go(n)?Et:rr,a=t?t():{};return i(n,e,ua(r,2),a)}}function Oi(e){return Xr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&_a(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Me(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!Wo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Me(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Di(e){return function(t,n,r){for(var i=-1,a=Me(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function Bi(e){return function(t){var n=un(t=ys(t))?gn(t):i,r=n?n[0]:t.charAt(0),a=n?xi(n,1).join(""):t.slice(1);return r[e]()+a}}function Ni(e){return function(t){return Rt(Qs(Hs(t).replace(et,"")),e,"")}}function Ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function ji(e){return function(t,n,r){var a=Me(t);if(!Wo(t)){var o=ua(n,3);t=Ls(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function zi(e){return na((function(t){var n=t.length,r=n,o=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Te(a);if(o&&!u&&"wrapper"==oa(s))var u=new Hn([],!0)}for(r=u?r:n;++r<n;){var c=oa(s=t[r]),l="wrapper"==c?aa(s):i;u=l&&xa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[oa(l[0])].apply(u,l[3]):1==s.length&&xa(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Go(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Fi(e,t,r,a,o,s,u,c,l,f){var d=t&h,p=1&t,g=2&t,v=24&t,m=512&t,y=g?i:Ri(e);return function h(){for(var _=arguments.length,b=n(_),x=_;x--;)b[x]=arguments[x];if(v)var w=sa(h),k=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(a&&(b=Ai(b,a,o,v)),s&&(b=Ei(b,s,u,v)),_-=k,v&&_<f){var S=hn(b,w);return qi(e,t,Fi,h.placeholder,r,b,S,c,l,f-_)}var C=p?r:this,M=g?C[e]:e;return _=b.length,c?b=function(e,t){for(var n=e.length,r=_n(t.length,n),a=Ti(e);r--;){var o=t[r];e[r]=ya(o,n)?a[o]:i}return e}(b,c):m&&_>1&&b.reverse(),d&&l<_&&(b.length=l),this&&this!==gt&&this instanceof h&&(M=y||Ri(M)),M.apply(C,b)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=ui(n),r=ui(r)),a=e(n,r)}return a}}function Hi(e){return na((function(t){return t=Bt(t,$t(ua())),Xr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Gi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,dt(e/pn(t)));return un(t)?xi(gn(r),0,e).join(""):r.slice(0,e)}function Yi(e){return function(t,r,a){return a&&"number"!=typeof a&&_a(t,r,a)&&(r=a=i),t=ds(t),r===i?(r=t,t=0):r=ds(r),function(e,t,r,i){for(var a=-1,o=Zt(dt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:ds(a),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function qi(e,t,n,r,a,o,s,u,h,f){var d=8&t;t|=d?c:l,4&(t&=~(d?l:c))||(t&=-4);var p=[e,t,a,d?o:i,d?s:i,d?i:o,d?i:s,u,h,f],g=n.apply(i,p);return xa(e)&&Ta(g,p),g.placeholder=r,Oa(g,e,t)}function Zi(e){var t=Ce[e];return function(e,n){if(e=vs(e),(n=null==n?0:_n(ps(n),292))&&_t(e)){var r=(ys(e)+"e").split("e");return+((r=(ys(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=An&&1/fn(new An([,-0]))[1]==d?function(e){return new An(e)}:uu;function Xi(e){return function(t){var n=pa(t);return n==C?cn(t):n==I?dn(t):function(e,t){return Bt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qi(e,t,r,o,d,p,g,v){var m=2&t;if(!m&&"function"!=typeof e)throw new Te(a);var y=o?o.length:0;if(y||(t&=-97,o=d=i),g=g===i?g:Zt(ps(g),0),v=v===i?v:ps(v),y-=d?d.length:0,t&l){var _=o,b=d;o=d=i}var x=m?i:aa(e),w=[e,t,r,o,d,_,b,p,g,v];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==h&&8==n||r==h&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ai(c,u,t[4]):u,e[4]=c?hn(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ei(c,u,t[6]):u,e[6]=c?hn(e[5],s):t[6]),(u=t[7])&&(e[7]=u),r&h&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],o=w[3],d=w[4],!(v=w[9]=w[9]===i?m?0:e.length:Zt(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==u?function(e,t,r){var a=Ri(e);return function o(){for(var s=arguments.length,u=n(s),c=s,l=sa(o);c--;)u[c]=arguments[c];var h=s<3&&u[0]!==l&&u[s-1]!==l?[]:hn(u,l);return(s-=h.length)<r?qi(e,t,Fi,o.placeholder,i,u,h,i,i,r-s):At(this&&this!==gt&&this instanceof o?a:e,this,u)}}(e,t,v):t!=c&&33!=t||d.length?Fi.apply(i,w):function(e,t,r,i){var a=1&t,o=Ri(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,h=n(l+u),f=this&&this!==gt&&this instanceof t?o:e;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++s];return At(f,a?r:this,h)}}(e,t,r,o);else var k=function(e,t,n){var r=1&t,i=Ri(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Oa((x?ei:Ta)(k,w),e,t)}function Ji(e,t,n,r){return e===i||Fo(e,Oe[n])&&!Be.call(r,n)?t:e}function $i(e,t,n,r,a,o){return es(e)&&es(t)&&(o.set(t,e),Vr(e,t,i,$i,o),o.delete(t)),e}function ea(e){return is(e)?i:e}function ta(e,t,n,r,a,o){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),h=o.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=2&n?new Zn:i;for(o.set(e,t),o.set(t,e);++f<u;){var g=e[f],v=t[f];if(r)var m=s?r(v,g,f,t,e,o):r(g,v,f,e,t,o);if(m!==i){if(m)continue;d=!1;break}if(p){if(!zt(t,(function(e,t){if(!tn(p,t)&&(g===e||a(g,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(g!==v&&!a(g,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function na(e){return La(Ma(e,i,Ga),e+"")}function ra(e){return Sr(e,Ls,fa)}function ia(e){return Sr(e,Os,da)}var aa=In?function(e){return In.get(e)}:uu;function oa(e){for(var t=e.name+"",n=Ln[t],r=Be.call(Ln,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function sa(e){return(Be.call(Fn,"placeholder")?Fn:e).placeholder}function ua(){var e=Fn.iteratee||iu;return e=e===iu?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function la(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Sa(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Dr(n)?n:i}var fa=vt?function(e){return null==e?[]:(e=Me(e),Ot(vt(e),(function(t){return Ze.call(e,t)})))}:gu,da=vt?function(e){for(var t=[];e;)Nt(t,fa(e)),e=We(e);return t}:gu,pa=Cr;function ga(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,a=!1;++r<i;){var o=Na(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&$o(i)&&ya(o,i)&&(Go(e)||Ho(e))}function va(e){return"function"!=typeof e.constructor||ka(e)?{}:Un(We(e))}function ma(e){return Go(e)||Ho(e)||!!(Xe&&e&&e[Xe])}function ya(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function _a(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?Wo(n)&&ya(t,n.length):"string"==r&&t in n)&&Fo(n[t],e)}function ba(e,t){if(Go(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!us(e))||ne.test(e)||!te.test(e)||null!=t&&e in Me(t)}function xa(e){var t=oa(e),n=Fn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=aa(n);return!!r&&e===r[0]}(Sn&&pa(new Sn(new ArrayBuffer(1)))!=B||Cn&&pa(new Cn)!=C||Mn&&pa(Mn.resolve())!=E||An&&pa(new An)!=I||En&&pa(new En)!=P)&&(pa=function(e){var t=Cr(e),n=t==A?e.constructor:i,r=n?Ra(n):"";if(r)switch(r){case On:return B;case Pn:return C;case Dn:return E;case Bn:return I;case Nn:return P}return t});var wa=Pe?Qo:vu;function ka(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Sa(e){return e===e&&!es(e)}function Ca(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Me(n))}}function Ma(e,t,r){return t=Zt(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=Zt(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),At(e,this,u)}}function Aa(e,t){return t.length<2?e:kr(e,ri(t,0,-1))}function Ea(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ta=Pa(ei),Ia=lt||function(e,t){return gt.setTimeout(e,t)},La=Pa(ti);function Oa(e,t,n){var r=t+"";return La(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(m,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(r),n)))}function Pa(e){var t=0,n=0;return function(){var r=bn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Da(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Zr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ba=function(e){var t=Do(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Na(e){if("string"==typeof e||us(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ra(e){if(null!=e){try{return De.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ja(e){if(e instanceof Gn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Ti(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var za=Xr((function(e,t){return qo(e)?hr(e,mr(t,1,qo,!0)):[]})),Fa=Xr((function(e,t){var n=Ka(t);return qo(n)&&(n=i),qo(e)?hr(e,mr(t,1,qo,!0),ua(n,2)):[]})),Ua=Xr((function(e,t){var n=Ka(t);return qo(n)&&(n=i),qo(e)?hr(e,mr(t,1,qo,!0),i,n):[]}));function Va(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Zt(r+i,0)),Vt(e,ua(t,3),i)}function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ps(n),a=n<0?Zt(r+a,0):_n(a,r-1)),Vt(e,ua(t,3),a,!0)}function Ga(e){return null!=e&&e.length?mr(e,1):[]}function Ya(e){return e&&e.length?e[0]:i}var Wa=Xr((function(e){var t=Bt(e,mi);return t.length&&t[0]===e[0]?Tr(t):[]})),qa=Xr((function(e){var t=Ka(e),n=Bt(e,mi);return t===Ka(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Tr(n,ua(t,2)):[]})),Za=Xr((function(e){var t=Ka(e),n=Bt(e,mi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Tr(n,i,t):[]}));function Ka(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xa=Xr(Qa);function Qa(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var Ja=na((function(e,t){var n=null==e?0:e.length,r=or(e,t);return qr(e,Bt(t,(function(e){return ya(e,n)?+e:e})).sort(Mi)),r}));function $a(e){return null==e?e:kn.call(e)}var eo=Xr((function(e){return li(mr(e,1,qo,!0))})),to=Xr((function(e){var t=Ka(e);return qo(t)&&(t=i),li(mr(e,1,qo,!0),ua(t,2))})),no=Xr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,li(mr(e,1,qo,!0),i,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(qo(e))return t=Zt(e.length,t),!0})),Qt(t,(function(t){return Bt(e,qt(t))}))}function io(e,t){if(!e||!e.length)return[];var n=ro(e);return null==t?n:Bt(n,(function(e){return At(t,i,e)}))}var ao=Xr((function(e,t){return qo(e)?hr(e,t):[]})),oo=Xr((function(e){return gi(Ot(e,qo))})),so=Xr((function(e){var t=Ka(e);return qo(t)&&(t=i),gi(Ot(e,qo),ua(t,2))})),uo=Xr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,gi(Ot(e,qo),i,t)})),co=Xr(ro),lo=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,io(e,n)}));function ho(e){var t=Fn(e);return t.__chain__=!0,t}function fo(e,t){return t(e)}var po=na((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&ya(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fo,args:[a],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)})),go=Li((function(e,t,n){Be.call(e,n)?++e[n]:ar(e,n,1)})),vo=ji(Va),mo=ji(Ha);function yo(e,t){return(Go(e)?Tt:fr)(e,ua(t,3))}function _o(e,t){return(Go(e)?It:dr)(e,ua(t,3))}var bo=Li((function(e,t,n){Be.call(e,n)?e[n].push(t):ar(e,n,[t])})),xo=Xr((function(e,t,r){var i=-1,a="function"==typeof t,o=Wo(e)?n(e.length):[];return fr(e,(function(e){o[++i]=a?At(t,e,r):Ir(e,t,r)})),o})),wo=Li((function(e,t,n){ar(e,n,t)}));function ko(e,t){return(Go(e)?Bt:zr)(e,ua(t,3))}var So=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Co=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_a(e,t[0],t[1])?t=[]:n>2&&_a(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,mr(t,1),[])})),Mo=it||function(){return gt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Qi(e,h,i,i,i,i,t)}function Eo(e,t){var n;if("function"!=typeof t)throw new Te(a);return e=ps(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var To=Xr((function(e,t,n){var r=1;if(n.length){var i=hn(n,sa(To));r|=c}return Qi(e,r,t,n,i)})),Io=Xr((function(e,t,n){var r=3;if(n.length){var i=hn(n,sa(Io));r|=c}return Qi(t,r,e,n,i)}));function Lo(e,t,n){var r,o,s,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Te(a);function g(t){var n=r,a=o;return r=o=i,h=t,u=e.apply(a,n)}function v(e){var n=e-l;return l===i||n>=t||n<0||d&&e-h>=s}function m(){var e=Mo();if(v(e))return y(e);c=Ia(m,function(e){var n=t-(e-l);return d?_n(n,s-(e-h)):n}(e))}function y(e){return c=i,p&&r?g(e):(r=o=i,u)}function _(){var e=Mo(),n=v(e);if(r=arguments,o=this,l=e,n){if(c===i)return function(e){return h=e,c=Ia(m,t),f?g(e):u}(l);if(d)return wi(c),c=Ia(m,t),g(l)}return c===i&&(c=Ia(m,t)),u}return t=vs(t)||0,es(n)&&(f=!!n.leading,s=(d="maxWait"in n)?Zt(vs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&wi(c),h=0,r=l=o=c=i},_.flush=function(){return c===i?u:y(Mo())},_}var Oo=Xr((function(e,t){return lr(e,1,t)})),Po=Xr((function(e,t,n){return lr(e,vs(t)||0,n)}));function Do(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Do.Cache||qn),n}function Bo(e){if("function"!=typeof e)throw new Te(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Do.Cache=qn;var No=bi((function(e,t){var n=(t=1==t.length&&Go(t[0])?Bt(t[0],$t(ua())):Bt(mr(t,1),$t(ua()))).length;return Xr((function(r){for(var i=-1,a=_n(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return At(e,this,r)}))})),Ro=Xr((function(e,t){var n=hn(t,sa(Ro));return Qi(e,c,i,t,n)})),jo=Xr((function(e,t){var n=hn(t,sa(jo));return Qi(e,l,i,t,n)})),zo=na((function(e,t){return Qi(e,f,i,i,i,t)}));function Fo(e,t){return e===t||e!==e&&t!==t}var Uo=Wi(Mr),Vo=Wi((function(e,t){return e>=t})),Ho=Lr(function(){return arguments}())?Lr:function(e){return ts(e)&&Be.call(e,"callee")&&!Ze.call(e,"callee")},Go=n.isArray,Yo=xt?$t(xt):function(e){return ts(e)&&Cr(e)==D};function Wo(e){return null!=e&&$o(e.length)&&!Qo(e)}function qo(e){return ts(e)&&Wo(e)}var Zo=mt||vu,Ko=wt?$t(wt):function(e){return ts(e)&&Cr(e)==x};function Xo(e){if(!ts(e))return!1;var t=Cr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Qo(e){if(!es(e))return!1;var t=Cr(e);return t==k||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jo(e){return"number"==typeof e&&e==ps(e)}function $o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=kt?$t(kt):function(e){return ts(e)&&pa(e)==C};function rs(e){return"number"==typeof e||ts(e)&&Cr(e)==M}function is(e){if(!ts(e)||Cr(e)!=A)return!1;var t=We(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&De.call(n)==ze}var as=St?$t(St):function(e){return ts(e)&&Cr(e)==T},os=Ct?$t(Ct):function(e){return ts(e)&&pa(e)==I};function ss(e){return"string"==typeof e||!Go(e)&&ts(e)&&Cr(e)==L}function us(e){return"symbol"==typeof e||ts(e)&&Cr(e)==O}var cs=Mt?$t(Mt):function(e){return ts(e)&&$o(e.length)&&!!ut[Cr(e)]},ls=Wi(jr),hs=Wi((function(e,t){return e<=t}));function fs(e){if(!e)return[];if(Wo(e))return ss(e)?gn(e):Ti(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=pa(e);return(t==C?cn:t==I?fn:Fs)(e)}function ds(e){return e?(e=vs(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ps(e){var t=ds(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?sr(ps(e),0,v):0}function vs(e){if("number"==typeof e)return e;if(us(e))return g;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=me.test(e);return n||_e.test(e)?ft(e.slice(2),n?2:8):ve.test(e)?g:+e}function ms(e){return Ii(e,Os(e))}function ys(e){return null==e?"":ci(e)}var _s=Oi((function(e,t){if(ka(t)||Wo(t))Ii(t,Ls(t),e);else for(var n in t)Be.call(t,n)&&tr(e,n,t[n])})),bs=Oi((function(e,t){Ii(t,Os(t),e)})),xs=Oi((function(e,t,n,r){Ii(t,Os(t),e,r)})),ws=Oi((function(e,t,n,r){Ii(t,Ls(t),e,r)})),ks=na(or),Ss=Xr((function(e,t){e=Me(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&_a(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Os(o),u=-1,c=s.length;++u<c;){var l=s[u],h=e[l];(h===i||Fo(h,Oe[l])&&!Be.call(e,l))&&(e[l]=o[l])}return e})),Cs=Xr((function(e){return e.push(i,$i),At(Ds,i,e)}));function Ms(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function As(e,t){return null!=e&&ga(e,t,Er)}var Es=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=n}),eu(ru)),Ts=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]}),ua),Is=Xr(Ir);function Ls(e){return Wo(e)?Xn(e):Nr(e)}function Os(e){return Wo(e)?Xn(e,!0):Rr(e)}var Ps=Oi((function(e,t,n){Vr(e,t,n)})),Ds=Oi((function(e,t,n,r){Vr(e,t,n,r)})),Bs=na((function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Ii(e,ia(e),n),r&&(n=ur(n,7,ea));for(var i=t.length;i--;)hi(n,t[i]);return n})),Ns=na((function(e,t){return null==e?{}:function(e,t){return Yr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function Rs(e,t){if(null==e)return{};var n=Bt(ia(e),(function(e){return[e]}));return t=ua(t),Yr(e,n,(function(e,n){return t(e,n[0])}))}var js=Xi(Ls),zs=Xi(Os);function Fs(e){return null==e?[]:en(e,Ls(e))}var Us=Ni((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return Xs(ys(e).toLowerCase())}function Hs(e){return(e=ys(e))&&e.replace(xe,an).replace(tt,"")}var Gs=Ni((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ys=Ni((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ws=Bi("toLowerCase"),qs=Ni((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Zs=Ni((function(e,t,n){return e+(n?" ":"")+Xs(t)})),Ks=Ni((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xs=Bi("toUpperCase");function Qs(e,t,n){return e=ys(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Js=Xr((function(e,t){try{return At(e,i,t)}catch(n){return Xo(n)?n:new se(n)}})),$s=na((function(e,t){return Tt(t,(function(t){t=Na(t),ar(e,t,To(e[t],e))})),e}));function eu(e){return function(){return e}}var tu=zi(),nu=zi(!0);function ru(e){return e}function iu(e){return Br("function"==typeof e?e:ur(e,1))}var au=Xr((function(e,t){return function(n){return Ir(n,e,t)}})),ou=Xr((function(e,t){return function(n){return Ir(e,n,t)}}));function su(e,t,n){var r=Ls(t),i=wr(t,r);null!=n||es(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Ls(t)));var a=!(es(n)&&"chain"in n)||!!n.chain,o=Qo(e);return Tt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Ti(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})})),e}function uu(){}var cu=Hi(Bt),lu=Hi(Lt),hu=Hi(zt);function fu(e){return ba(e)?qt(Na(e)):function(e){return function(t){return kr(t,e)}}(e)}var du=Yi(),pu=Yi(!0);function gu(){return[]}function vu(){return!1}var mu=Vi((function(e,t){return e+t}),0),yu=Zi("ceil"),_u=Vi((function(e,t){return e/t}),1),bu=Zi("floor"),xu=Vi((function(e,t){return e*t}),1),wu=Zi("round"),ku=Vi((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Te(a);return e=ps(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Ao,Fn.assign=_s,Fn.assignIn=bs,Fn.assignInWith=xs,Fn.assignWith=ws,Fn.at=ks,Fn.before=Eo,Fn.bind=To,Fn.bindAll=$s,Fn.bindKey=Io,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Go(e)?e:[e]},Fn.chain=ho,Fn.chunk=function(e,t,r){t=(r?_a(e,t,r):t===i)?1:Zt(ps(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(dt(a/t));o<a;)u[s++]=ri(e,o,o+=t);return u},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Nt(Go(r)?Ti(r):[r],mr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=ua();return e=t?Bt(e,(function(e){if("function"!=typeof e[1])throw new Te(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Ls(e);return function(n){return cr(n,e,t)}}(ur(e,1))},Fn.constant=eu,Fn.countBy=go,Fn.create=function(e,t){var n=Un(e);return null==t?n:ir(n,t)},Fn.curry=function e(t,n,r){var a=Qi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Fn.curryRight=function e(t,n,r){var a=Qi(t,u,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Fn.debounce=Lo,Fn.defaults=Ss,Fn.defaultsDeep=Cs,Fn.defer=Oo,Fn.delay=Po,Fn.difference=za,Fn.differenceBy=Fa,Fn.differenceWith=Ua,Fn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:ps(t))<0?0:t,r):[]},Fn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:ps(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!0):[]},Fn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_a(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ps(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ps(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Fn.filter=function(e,t){return(Go(e)?Ot:vr)(e,ua(t,3))},Fn.flatMap=function(e,t){return mr(ko(e,t),1)},Fn.flatMapDeep=function(e,t){return mr(ko(e,t),d)},Fn.flatMapDepth=function(e,t,n){return n=n===i?1:ps(n),mr(ko(e,t),n)},Fn.flatten=Ga,Fn.flattenDeep=function(e){return null!=e&&e.length?mr(e,d):[]},Fn.flattenDepth=function(e,t){return null!=e&&e.length?mr(e,t=t===i?1:ps(t)):[]},Fn.flip=function(e){return Qi(e,512)},Fn.flow=tu,Fn.flowRight=nu,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Fn.functions=function(e){return null==e?[]:wr(e,Ls(e))},Fn.functionsIn=function(e){return null==e?[]:wr(e,Os(e))},Fn.groupBy=bo,Fn.initial=function(e){return null!=e&&e.length?ri(e,0,-1):[]},Fn.intersection=Wa,Fn.intersectionBy=qa,Fn.intersectionWith=Za,Fn.invert=Es,Fn.invertBy=Ts,Fn.invokeMap=xo,Fn.iteratee=iu,Fn.keyBy=wo,Fn.keys=Ls,Fn.keysIn=Os,Fn.map=ko,Fn.mapKeys=function(e,t){var n={};return t=ua(t,3),br(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Fn.mapValues=function(e,t){var n={};return t=ua(t,3),br(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Fn.matches=function(e){return Fr(ur(e,1))},Fn.matchesProperty=function(e,t){return Ur(e,ur(t,1))},Fn.memoize=Do,Fn.merge=Ps,Fn.mergeWith=Ds,Fn.method=au,Fn.methodOf=ou,Fn.mixin=su,Fn.negate=Bo,Fn.nthArg=function(e){return e=ps(e),Xr((function(t){return Hr(t,e)}))},Fn.omit=Bs,Fn.omitBy=function(e,t){return Rs(e,Bo(ua(t)))},Fn.once=function(e){return Eo(2,e)},Fn.orderBy=function(e,t,n,r){return null==e?[]:(Go(t)||(t=null==t?[]:[t]),Go(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},Fn.over=cu,Fn.overArgs=No,Fn.overEvery=lu,Fn.overSome=hu,Fn.partial=Ro,Fn.partialRight=jo,Fn.partition=So,Fn.pick=Ns,Fn.pickBy=Rs,Fn.property=fu,Fn.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},Fn.pull=Xa,Fn.pullAll=Qa,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,ua(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},Fn.pullAt=Ja,Fn.range=du,Fn.rangeRight=pu,Fn.rearg=zo,Fn.reject=function(e,t){return(Go(e)?Ot:vr)(e,Bo(ua(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ua(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return qr(e,i),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Te(a);return Xr(e,t=t===i?t:ps(t))},Fn.reverse=$a,Fn.sampleSize=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ps(t),(Go(e)?Jn:Jr)(e,t)},Fn.set=function(e,t,n){return null==e?e:$r(e,t,n)},Fn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:$r(e,t,n,r)},Fn.shuffle=function(e){return(Go(e)?$n:ni)(e)},Fn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_a(e,t,n)?(t=0,n=r):(t=null==t?0:ps(t),n=n===i?r:ps(n)),ri(e,t,n)):[]},Fn.sortBy=Co,Fn.sortedUniq=function(e){return e&&e.length?si(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?si(e,ua(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&_a(e,t,n)&&(t=n=i),(n=n===i?v:n>>>0)?(e=ys(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=ci(t))&&un(e)?xi(gn(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Te(a);return t=null==t?0:Zt(ps(t),0),Xr((function(n){var r=n[t],i=xi(n,0,t);return r&&Nt(i,r),At(e,this,i)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:ps(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:ps(t)))<0?0:t,r):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?di(e,ua(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Te(a);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lo(e,t,{leading:r,maxWait:t,trailing:i})},Fn.thru=fo,Fn.toArray=fs,Fn.toPairs=js,Fn.toPairsIn=zs,Fn.toPath=function(e){return Go(e)?Bt(e,Na):us(e)?[e]:Ti(Ba(ys(e)))},Fn.toPlainObject=ms,Fn.transform=function(e,t,n){var r=Go(e),i=r||Zo(e)||cs(e);if(t=ua(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:es(e)&&Qo(a)?Un(We(e)):{}}return(i?Tt:br)(e,(function(e,r,i){return t(n,e,r,i)})),n},Fn.unary=function(e){return Ao(e,1)},Fn.union=eo,Fn.unionBy=to,Fn.unionWith=no,Fn.uniq=function(e){return e&&e.length?li(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?li(e,ua(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?li(e,i,t):[]},Fn.unset=function(e,t){return null==e||hi(e,t)},Fn.unzip=ro,Fn.unzipWith=io,Fn.update=function(e,t,n){return null==e?e:fi(e,t,yi(n))},Fn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:fi(e,t,yi(n),r)},Fn.values=Fs,Fn.valuesIn=function(e){return null==e?[]:en(e,Os(e))},Fn.without=ao,Fn.words=Qs,Fn.wrap=function(e,t){return Ro(yi(t),e)},Fn.xor=oo,Fn.xorBy=so,Fn.xorWith=uo,Fn.zip=co,Fn.zipObject=function(e,t){return vi(e||[],t||[],tr)},Fn.zipObjectDeep=function(e,t){return vi(e||[],t||[],$r)},Fn.zipWith=lo,Fn.entries=js,Fn.entriesIn=zs,Fn.extend=bs,Fn.extendWith=xs,su(Fn,Fn),Fn.add=mu,Fn.attempt=Js,Fn.camelCase=Us,Fn.capitalize=Vs,Fn.ceil=yu,Fn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=vs(n))===n?n:0),t!==i&&(t=(t=vs(t))===t?t:0),sr(vs(e),t,n)},Fn.clone=function(e){return ur(e,4)},Fn.cloneDeep=function(e){return ur(e,5)},Fn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},Fn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},Fn.conformsTo=function(e,t){return null==t||cr(e,t,Ls(t))},Fn.deburr=Hs,Fn.defaultTo=function(e,t){return null==e||e!==e?t:e},Fn.divide=_u,Fn.endsWith=function(e,t,n){e=ys(e),t=ci(t);var r=e.length,a=n=n===i?r:sr(ps(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Fn.eq=Fo,Fn.escape=function(e){return(e=ys(e))&&Q.test(e)?e.replace(K,on):e},Fn.escapeRegExp=function(e){return(e=ys(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Fn.every=function(e,t,n){var r=Go(e)?Lt:pr;return n&&_a(e,t,n)&&(t=i),r(e,ua(t,3))},Fn.find=vo,Fn.findIndex=Va,Fn.findKey=function(e,t){return Ut(e,ua(t,3),br)},Fn.findLast=mo,Fn.findLastIndex=Ha,Fn.findLastKey=function(e,t){return Ut(e,ua(t,3),xr)},Fn.floor=bu,Fn.forEach=yo,Fn.forEachRight=_o,Fn.forIn=function(e,t){return null==e?e:yr(e,ua(t,3),Os)},Fn.forInRight=function(e,t){return null==e?e:_r(e,ua(t,3),Os)},Fn.forOwn=function(e,t){return e&&br(e,ua(t,3))},Fn.forOwnRight=function(e,t){return e&&xr(e,ua(t,3))},Fn.get=Ms,Fn.gt=Uo,Fn.gte=Vo,Fn.has=function(e,t){return null!=e&&ga(e,t,Ar)},Fn.hasIn=As,Fn.head=Ya,Fn.identity=ru,Fn.includes=function(e,t,n,r){e=Wo(e)?e:Fs(e),n=n&&!r?ps(n):0;var i=e.length;return n<0&&(n=Zt(i+n,0)),ss(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Zt(r+i,0)),Ht(e,t,i)},Fn.inRange=function(e,t,n){return t=ds(t),n===i?(n=t,t=0):n=ds(n),function(e,t,n){return e>=_n(t,n)&&e<Zt(t,n)}(e=vs(e),t,n)},Fn.invoke=Is,Fn.isArguments=Ho,Fn.isArray=Go,Fn.isArrayBuffer=Yo,Fn.isArrayLike=Wo,Fn.isArrayLikeObject=qo,Fn.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Cr(e)==b},Fn.isBuffer=Zo,Fn.isDate=Ko,Fn.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Wo(e)&&(Go(e)||"string"==typeof e||"function"==typeof e.splice||Zo(e)||cs(e)||Ho(e)))return!e.length;var t=pa(e);if(t==C||t==I)return!e.size;if(ka(e))return!Nr(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Or(e,t)},Fn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},Fn.isError=Xo,Fn.isFinite=function(e){return"number"==typeof e&&_t(e)},Fn.isFunction=Qo,Fn.isInteger=Jo,Fn.isLength=$o,Fn.isMap=ns,Fn.isMatch=function(e,t){return e===t||Pr(e,t,la(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,la(t),n)},Fn.isNaN=function(e){return rs(e)&&e!=+e},Fn.isNative=function(e){if(wa(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=rs,Fn.isObject=es,Fn.isObjectLike=ts,Fn.isPlainObject=is,Fn.isRegExp=as,Fn.isSafeInteger=function(e){return Jo(e)&&e>=-9007199254740991&&e<=p},Fn.isSet=os,Fn.isString=ss,Fn.isSymbol=us,Fn.isTypedArray=cs,Fn.isUndefined=function(e){return e===i},Fn.isWeakMap=function(e){return ts(e)&&pa(e)==P},Fn.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Cr(e)},Fn.join=function(e,t){return null==e?"":bt.call(e,t)},Fn.kebabCase=Gs,Fn.last=Ka,Fn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ps(n))<0?Zt(r+a,0):_n(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Vt(e,Yt,a,!0)},Fn.lowerCase=Ys,Fn.lowerFirst=Ws,Fn.lt=ls,Fn.lte=hs,Fn.max=function(e){return e&&e.length?gr(e,ru,Mr):i},Fn.maxBy=function(e,t){return e&&e.length?gr(e,ua(t,2),Mr):i},Fn.mean=function(e){return Wt(e,ru)},Fn.meanBy=function(e,t){return Wt(e,ua(t,2))},Fn.min=function(e){return e&&e.length?gr(e,ru,jr):i},Fn.minBy=function(e,t){return e&&e.length?gr(e,ua(t,2),jr):i},Fn.stubArray=gu,Fn.stubFalse=vu,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=xu,Fn.nth=function(e,t){return e&&e.length?Hr(e,ps(t)):i},Fn.noConflict=function(){return gt._===this&&(gt._=Fe),this},Fn.noop=uu,Fn.now=Mo,Fn.pad=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(pt(i),n)+e+Gi(dt(i),n)},Fn.padEnd=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?e+Gi(t-r,n):e},Fn.padStart=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?Gi(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ys(e).replace(oe,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_a(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ds(e),t===i?(t=e,e=0):t=ds(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=wn();return _n(e+a*(t-e+ht("1e-"+((a+"").length-1))),t)}return Zr(e,t)},Fn.reduce=function(e,t,n){var r=Go(e)?Rt:Kt,i=arguments.length<3;return r(e,ua(t,4),n,i,fr)},Fn.reduceRight=function(e,t,n){var r=Go(e)?jt:Kt,i=arguments.length<3;return r(e,ua(t,4),n,i,dr)},Fn.repeat=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ps(t),Kr(ys(e),t)},Fn.replace=function(){var e=arguments,t=ys(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var r=-1,a=(t=_i(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Na(t[r])];o===i&&(r=a,o=n),e=Qo(o)?o.call(e):o}return e},Fn.round=wu,Fn.runInContext=e,Fn.sample=function(e){return(Go(e)?Qn:Qr)(e)},Fn.size=function(e){if(null==e)return 0;if(Wo(e))return ss(e)?pn(e):e.length;var t=pa(e);return t==C||t==I?e.size:Nr(e).length},Fn.snakeCase=qs,Fn.some=function(e,t,n){var r=Go(e)?zt:ii;return n&&_a(e,t,n)&&(t=i),r(e,ua(t,3))},Fn.sortedIndex=function(e,t){return ai(e,t)},Fn.sortedIndexBy=function(e,t,n){return oi(e,t,ua(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Fo(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return oi(e,t,ua(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ai(e,t,!0)-1;if(Fo(e[n],t))return n}return-1},Fn.startCase=Zs,Fn.startsWith=function(e,t,n){return e=ys(e),n=null==n?0:sr(ps(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Fn.subtract=ku,Fn.sum=function(e){return e&&e.length?Xt(e,ru):0},Fn.sumBy=function(e,t){return e&&e.length?Xt(e,ua(t,2)):0},Fn.template=function(e,t,n){var r=Fn.templateSettings;n&&_a(e,t,n)&&(t=i),e=ys(e),t=xs({},t,r,Ji);var a,o,s=xs({},t.imports,r.imports,Ji),u=Ls(s),c=en(s,u),l=0,h=t.interpolate||we,f="__p += '",d=Ae((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),f+=e.slice(l,u).replace(ke,sn),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),f+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(fe.test(g))throw new se("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(Y,""):f).replace(W,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Js((function(){return Se(u,p+"return "+f).apply(i,c)}));if(v.source=f,Xo(v))throw v;return v},Fn.times=function(e,t){if((e=ps(e))<1||e>p)return[];var n=v,r=_n(e,v);t=ua(t),e-=v;for(var i=Qt(r,t);++n<e;)t(n);return i},Fn.toFinite=ds,Fn.toInteger=ps,Fn.toLength=gs,Fn.toLower=function(e){return ys(e).toLowerCase()},Fn.toNumber=vs,Fn.toSafeInteger=function(e){return e?sr(ps(e),-9007199254740991,p):0===e?e:0},Fn.toString=ys,Fn.toUpper=function(e){return ys(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=ys(e))&&(n||t===i))return Jt(e);if(!e||!(t=ci(t)))return e;var r=gn(e),a=gn(t);return xi(r,nn(r,a),rn(r,a)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=ci(t)))return e;var r=gn(e);return xi(r,0,rn(r,gn(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=gn(e);return xi(r,nn(r,gn(t))).join("")},Fn.truncate=function(e,t){var n=30,r="...";if(es(t)){var a="separator"in t?t.separator:a;n="length"in t?ps(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=ys(e)).length;if(un(e)){var s=gn(e);o=s.length}if(n>=o)return e;var u=n-pn(r);if(u<1)return r;var c=s?xi(s,0,u).join(""):e.slice(0,u);if(a===i)return c+r;if(s&&(u+=c.length-u),as(a)){if(e.slice(u).search(a)){var l,h=c;for(a.global||(a=Ae(a.source,ys(ge.exec(a))+"g")),a.lastIndex=0;l=a.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(e.indexOf(ci(a),u)!=u){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+r},Fn.unescape=function(e){return(e=ys(e))&&X.test(e)?e.replace(Z,mn):e},Fn.uniqueId=function(e){var t=++Ne;return ys(e)+t},Fn.upperCase=Ks,Fn.upperFirst=Xs,Fn.each=yo,Fn.eachRight=_o,Fn.first=Ya,su(Fn,function(){var e={};return br(Fn,(function(t,n){Be.call(Fn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Fn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),Tt(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===i?1:Zt(ps(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,v),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ua(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(ru)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Ir(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(Bo(ua(e)))},Gn.prototype.slice=function(e,t){e=ps(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ps(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(v)},br(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Fn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Gn,c=s[0],l=u||Go(t),h=function(e){var t=a.apply(Fn,Nt([e],s));return r&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,g=u&&!d;if(!o&&l){t=g?t:new Gn(this);var v=e.apply(t,s);return v.__actions__.push({func:fo,args:[h],thisArg:i}),new Hn(v,f)}return p&&g?e.apply(this,s):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Go(i)?i:[],e)}return this[n]((function(n){return t.apply(Go(n)?n:[],e)}))}})),br(Gn.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";Be.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Fi(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Ti(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ti(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ti(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Go(e),r=t<0,i=n?e.length:0,a=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=_n(t,e+o);break;case"takeRight":e=Zt(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,h=l.length,f=0,d=_n(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return pi(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var g=-1,v=e[c+=t];++g<h;){var m=l[g],y=m.iteratee,_=m.type,b=y(v);if(2==_)v=b;else if(!b){if(1==_)continue e;break e}}p[f++]=v}return p},Fn.prototype.at=po,Fn.prototype.chain=function(){return ho(this)},Fn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=ja(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:fo,args:[$a],thisArg:i}),new Hn(t,this.__chain__)}return this.thru($a)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Qe&&(Fn.prototype[Qe]=function(){return this}),Fn}();gt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},"./node_modules/object-inspect/index.js":function(e,t,n){var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a=r&&i&&"function"===typeof i.get?i.get:null,o=r&&Map.prototype.forEach,s="function"===typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"===typeof u.get?u.get:null,l=s&&Set.prototype.forEach,h="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,g=Object.prototype.toString,v=Function.prototype.toString,m=String.prototype.match,y=String.prototype.slice,_=String.prototype.replace,b=String.prototype.toUpperCase,x=String.prototype.toLowerCase,w=RegExp.prototype.test,k=Array.prototype.concat,S=Array.prototype.join,C=Array.prototype.slice,M=Math.floor,A="function"===typeof BigInt?BigInt.prototype.valueOf:null,E=Object.getOwnPropertySymbols,T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"===typeof Symbol&&"object"===typeof Symbol.iterator,L="function"===typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,P=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function D(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var r=e<0?-M(-e):M(e);if(r!==e){var i=String(r),a=y.call(t,i.length+1);return _.call(i,n,"$&_")+"."+_.call(_.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(t,n,"$&_")}var B=n("?4f7e"),N=B.custom,R=V(N)?N:null;function j(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function z(e){return _.call(String(e),/"/g,"&quot;")}function F(e){return"[object Array]"===Y(e)&&(!L||!("object"===typeof e&&L in e))}function U(e){return"[object RegExp]"===Y(e)&&(!L||!("object"===typeof e&&L in e))}function V(e){if(I)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!T)return!1;try{return T.call(e),!0}catch(t){}return!1}e.exports=function e(t,n,r,i){var s=n||{};if(G(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(G(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!G(s,"customInspect")||s.customInspect;if("boolean"!==typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(s,"numericSeparator")&&"boolean"!==typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=s.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return q(t,s);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var b=String(t);return g?D(t,b):b}if("bigint"===typeof t){var w=String(t)+"n";return g?D(t,w):w}var M="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof r&&(r=0),r>=M&&M>0&&"object"===typeof t)return F(t)?"[Array]":"[Object]";var E,N=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=S.call(Array(e.indent+1)," ")}return{base:n,prev:S.call(Array(t+1),n)}}(s,r);if("undefined"===typeof i)i=[];else if(W(i,t)>=0)return"[Circular]";function H(t,n,a){if(n&&(i=C.call(i)).push(n),a){var o={depth:s.depth};return G(s,"quoteStyle")&&(o.quoteStyle=s.quoteStyle),e(t,o,r+1,i)}return e(t,s,r+1,i)}if("function"===typeof t&&!U(t)){var Z=function(e){if(e.name)return e.name;var t=m.call(v.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=$(t,H);return"[Function"+(Z?": "+Z:" (anonymous)")+"]"+(ee.length>0?" { "+S.call(ee,", ")+" }":"")}if(V(t)){var te=I?_.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):T.call(t);return"object"!==typeof t||I?te:K(te)}if((E=t)&&"object"===typeof E&&("undefined"!==typeof HTMLElement&&E instanceof HTMLElement||"string"===typeof E.nodeName&&"function"===typeof E.getAttribute)){for(var ne="<"+x.call(String(t.nodeName)),re=t.attributes||[],ie=0;ie<re.length;ie++)ne+=" "+re[ie].name+"="+j(z(re[ie].value),"double",s);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+x.call(String(t.nodeName))+">"}if(F(t)){if(0===t.length)return"[]";var ae=$(t,H);return N&&!function(e){for(var t=0;t<e.length;t++)if(W(e[t],"\n")>=0)return!1;return!0}(ae)?"["+J(ae,N)+"]":"[ "+S.call(ae,", ")+" ]"}if(function(e){return"[object Error]"===Y(e)&&(!L||!("object"===typeof e&&L in e))}(t)){var oe=$(t,H);return"cause"in Error.prototype||!("cause"in t)||O.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+S.call(oe,", ")+" }":"{ ["+String(t)+"] "+S.call(k.call("[cause]: "+H(t.cause),oe),", ")+" }"}if("object"===typeof t&&u){if(R&&"function"===typeof t[R]&&B)return B(t,{depth:M-r});if("symbol"!==u&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!a||!e||"object"!==typeof e)return!1;try{a.call(e);try{c.call(e)}catch(ne){return!0}return e instanceof Map}catch(t){}return!1}(t)){var se=[];return o&&o.call(t,(function(e,n){se.push(H(n,t,!0)+" => "+H(e,t))})),Q("Map",a.call(t),se,N)}if(function(e){if(!c||!e||"object"!==typeof e)return!1;try{c.call(e);try{a.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var ue=[];return l&&l.call(t,(function(e){ue.push(H(e,t))})),Q("Set",c.call(t),ue,N)}if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{h.call(e,h);try{f.call(e,f)}catch(ne){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return X("WeakMap");if(function(e){if(!f||!e||"object"!==typeof e)return!1;try{f.call(e,f);try{h.call(e,h)}catch(ne){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return X("WeakSet");if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{return d.call(e),!0}catch(t){}return!1}(t))return X("WeakRef");if(function(e){return"[object Number]"===Y(e)&&(!L||!("object"===typeof e&&L in e))}(t))return K(H(Number(t)));if(function(e){if(!e||"object"!==typeof e||!A)return!1;try{return A.call(e),!0}catch(t){}return!1}(t))return K(H(A.call(t)));if(function(e){return"[object Boolean]"===Y(e)&&(!L||!("object"===typeof e&&L in e))}(t))return K(p.call(t));if(function(e){return"[object String]"===Y(e)&&(!L||!("object"===typeof e&&L in e))}(t))return K(H(String(t)));if(!function(e){return"[object Date]"===Y(e)&&(!L||!("object"===typeof e&&L in e))}(t)&&!U(t)){var ce=$(t,H),le=P?P(t)===Object.prototype:t instanceof Object||t.constructor===Object,he=t instanceof Object?"":"null prototype",fe=!le&&L&&Object(t)===t&&L in t?y.call(Y(t),8,-1):he?"Object":"",de=(le||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(fe||he?"["+S.call(k.call([],fe||[],he||[]),": ")+"] ":"");return 0===ce.length?de+"{}":N?de+"{"+J(ce,N)+"}":de+"{ "+S.call(ce,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return H.call(e,t)}function Y(e){return g.call(e)}function W(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function q(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return q(y.call(e,0,t.maxStringLength),t)+r}return j(_.call(_.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Z),"single",t)}function Z(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function K(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function Q(e,t,n,r){return e+" ("+t+") {"+(r?J(n,r):S.call(n,", "))+"}"}function J(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+S.call(e,","+n)+"\n"+t.prev}function $(e,t){var n=F(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=G(e,i)?t(e[i],e):""}var a,o="function"===typeof E?E(e):[];if(I){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var u in e)G(e,u)&&(n&&String(Number(u))===u&&u<e.length||I&&a["$"+u]instanceof Symbol||(w.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if("function"===typeof E)for(var c=0;c<o.length;c++)O.call(e,o[c])&&r.push("["+t(o[c])+"]: "+t(e[o[c]],e));return r}},"./node_modules/qs/lib/formats.js":function(e){"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r,RFC3986:i}},"./node_modules/qs/lib/index.js":function(e,t,n){"use strict";var r=n("./node_modules/qs/lib/stringify.js"),i=n("./node_modules/qs/lib/parse.js"),a=n("./node_modules/qs/lib/formats.js");e.exports={formats:a,parse:i,stringify:r}},"./node_modules/qs/lib/parse.js":function(e,t,n){"use strict";var r=n("./node_modules/qs/lib/utils.js"),i=Object.prototype.hasOwnProperty,a=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,n,r){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(a),c=s?a.slice(0,s.index):a,l=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var h=0;n.depth>0&&null!==(s=o.exec(a))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+a.slice(s.index)+"]"),function(e,t,n,r){for(var i=r?t:u(t,n),a=e.length-1;a>=0;--a){var o,s=e[a];if("[]"===s&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);n.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(o=[])[l]=i:"__proto__"!==c&&(o[c]=i):o={0:i}}i=o}return i}(l,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?o.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:o.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:o.comma,decoder:"function"===typeof e.decoder?e.decoder:o.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var l="string"===typeof e?function(e,t){var n,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,f=l.split(t.delimiter,h),d=-1,p=t.charset;if(t.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?p="utf-8":"utf8=%26%2310003%3B"===f[n]&&(p="iso-8859-1"),d=n,n=f.length);for(n=0;n<f.length;++n)if(n!==d){var g,v,m=f[n],y=m.indexOf("]="),_=-1===y?m.indexOf("="):y+1;-1===_?(g=t.decoder(m,o.decoder,p,"key"),v=t.strictNullHandling?null:""):(g=t.decoder(m.slice(0,_),o.decoder,p,"key"),v=r.maybeMap(u(m.slice(_+1),t),(function(e){return t.decoder(e,o.decoder,p,"value")}))),v&&t.interpretNumericEntities&&"iso-8859-1"===p&&(v=s(v)),m.indexOf("[]=")>-1&&(v=a(v)?[v]:v),i.call(c,g)?c[g]=r.combine(c[g],v):c[g]=v}return c}(e,n):e,h=n.plainObjects?Object.create(null):{},f=Object.keys(l),d=0;d<f.length;++d){var p=f[d],g=c(p,l[p],n,"string"===typeof e);h=r.merge(h,g,n)}return!0===n.allowSparse?h:r.compact(h)}},"./node_modules/qs/lib/stringify.js":function(e,t,n){"use strict";var r=n("./node_modules/side-channel/index.js"),i=n("./node_modules/qs/lib/utils.js"),a=n("./node_modules/qs/lib/formats.js"),o=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,u(t)?t:[t])},h=Date.prototype.toISOString,f=a.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:f,formatter:a.formatters[f],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},p={},g=function e(t,n,a,o,s,c,h,f,g,v,m,y,_,b,x,w){for(var k,S=t,C=w,M=0,A=!1;void 0!==(C=C.get(p))&&!A;){var E=C.get(t);if(M+=1,"undefined"!==typeof E){if(E===M)throw new RangeError("Cyclic object value");A=!0}"undefined"===typeof C.get(p)&&(M=0)}if("function"===typeof f?S=f(n,S):S instanceof Date?S=m(S):"comma"===a&&u(S)&&(S=i.maybeMap(S,(function(e){return e instanceof Date?m(e):e}))),null===S){if(s)return h&&!b?h(n,d.encoder,x,"key",y):n;S=""}if("string"===typeof(k=S)||"number"===typeof k||"boolean"===typeof k||"symbol"===typeof k||"bigint"===typeof k||i.isBuffer(S))return h?[_(b?n:h(n,d.encoder,x,"key",y))+"="+_(h(S,d.encoder,x,"value",y))]:[_(n)+"="+_(String(S))];var T,I=[];if("undefined"===typeof S)return I;if("comma"===a&&u(S))b&&h&&(S=i.maybeMap(S,h)),T=[{value:S.length>0?S.join(",")||null:void 0}];else if(u(f))T=f;else{var L=Object.keys(S);T=g?L.sort(g):L}for(var O=o&&u(S)&&1===S.length?n+"[]":n,P=0;P<T.length;++P){var D=T[P],B="object"===typeof D&&"undefined"!==typeof D.value?D.value:S[D];if(!c||null!==B){var N=u(S)?"function"===typeof a?a(O,D):O:O+(v?"."+D:"["+D+"]");w.set(t,M);var R=r();R.set(p,w),l(I,e(B,N,a,o,s,c,"comma"===a&&b&&u(S)?null:h,f,g,v,m,y,_,b,x,R))}}return I};e.exports=function(e,t){var n,i=e,c=function(e){if(!e)return d;if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=a.default;if("undefined"!==typeof e.format){if(!o.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=a.formatters[n],i=d.filter;return("function"===typeof e.filter||u(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?d.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:d.encode,encoder:"function"===typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"===typeof c.filter?i=(0,c.filter)("",i):u(c.filter)&&(n=c.filter);var h,f=[];if("object"!==typeof i||null===i)return"";h=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=s[h];if(t&&"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v="comma"===p&&t&&t.commaRoundTrip;n||(n=Object.keys(i)),c.sort&&n.sort(c.sort);for(var m=r(),y=0;y<n.length;++y){var _=n[y];c.skipNulls&&null===i[_]||l(f,g(i[_],_,p,v,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,m))}var b=f.join(c.delimiter),x=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),b.length>0?x+b:""}},"./node_modules/qs/lib/utils.js":function(e,t,n){"use strict";var r=n("./node_modules/qs/lib/formats.js"),i=Object.prototype.hasOwnProperty,a=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],s=Object.keys(o),u=0;u<s.length;++u){var c=s[u],l=o[c];"object"===typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:o,prop:c}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(a(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(e,t,n,i,a){if(0===e.length)return e;var s=e;if("symbol"===typeof e?s=Symbol.prototype.toString.call(e):"string"!==typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var u="",c=0;c<s.length;++c){var l=s.charCodeAt(c);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||a===r.RFC1738&&(40===l||41===l)?u+=s.charAt(c):l<128?u+=o[l]:l<2048?u+=o[192|l>>6]+o[128|63&l]:l<55296||l>=57344?u+=o[224|l>>12]+o[128|l>>6&63]+o[128|63&l]:(c+=1,l=65536+((1023&l)<<10|1023&s.charCodeAt(c)),u+=o[240|l>>18]+o[128|l>>12&63]+o[128|l>>6&63]+o[128|63&l])}return u},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(a(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==typeof n){if(a(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);var o=t;return a(t)&&!a(n)&&(o=s(t,r)),a(t)&&a(n)?(n.forEach((function(n,a){if(i.call(t,a)){var o=t[a];o&&"object"===typeof o&&n&&"object"===typeof n?t[a]=e(o,n,r):t.push(n)}else t[a]=n})),t):Object.keys(n).reduce((function(t,a){var o=n[a];return i.call(t,a)?t[a]=e(t[a],o,r):t[a]=o,t}),o)}}},"./node_modules/side-channel/index.js":function(e,t,n){"use strict";var r=n("./node_modules/get-intrinsic/index.js"),i=n("./node_modules/call-bind/callBound.js"),a=n("./node_modules/object-inspect/index.js"),o=r("%TypeError%"),s=r("%WeakMap%",!0),u=r("%Map%",!0),c=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),f=i("Map.prototype.get",!0),d=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),g=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new o("Side channel does not contain "+a(e))},get:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(e)return c(e,r)}else if(u){if(t)return f(t,r)}else if(n)return function(e,t){var n=g(e,t);return n&&n.value}(n,r)},has:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(e)return h(e,r)}else if(u){if(t)return p(t,r)}else if(n)return function(e,t){return!!g(e,t)}(n,r);return!1},set:function(r,i){s&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new s),l(e,r,i)):u?(t||(t=new u),d(t,r,i)):(n||(n={key:{},next:null}),function(e,t,n){var r=g(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,i))}};return r}},"../../../node_modules/@gltf-transform/core/dist/core.modern.js":function(e,t,n){"use strict";var r;n.r(t),n.d(t,{Accessor:function(){return X},Animation:function(){return Q},AnimationChannel:function(){return J},AnimationSampler:function(){return $},AttributeLink:function(){return re},Buffer:function(){return ee},BufferUtils:function(){return D},COPY_IDENTITY:function(){return W},Camera:function(){return te},ColorUtils:function(){return B},Document:function(){return we},Extension:function(){return ke},ExtensionProperty:function(){return ne},FileUtils:function(){return N},Format:function(){return b},GLB_BUFFER:function(){return C},Graph:function(){return E},GraphChild:function(){return T},GraphChildList:function(){return I},ImageUtils:function(){return j},IndexLink:function(){return ie},Link:function(){return A},Logger:function(){return U},Material:function(){return de},MathUtils:function(){return F},Mesh:function(){return pe},Node:function(){return ge},NodeIO:function(){return Ne},PlatformIO:function(){return Be},Primitive:function(){return ve},PrimitiveTarget:function(){return me},Property:function(){return q},PropertyType:function(){return i},ReaderContext:function(){return Ae},Root:function(){return xe},Scene:function(){return ye},Skin:function(){return _e},Texture:function(){return be},TextureChannel:function(){return _},TextureInfo:function(){return se},TextureLink:function(){return ae},VERSION:function(){return S},VertexLayout:function(){return y},WebIO:function(){return je},WriterContext:function(){return Le},bounds:function(){return L},uuid:function(){return Y}});var i,y,_,b,x,w=n("../../../node_modules/gl-matrix/esm/vec3.js"),k=n("../../../node_modules/gl-matrix/esm/mat4.js"),S="v1.2.4",C="@glb.bin";function M(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}(x=i||(i={})).ACCESSOR="Accessor",x.ANIMATION="Animation",x.ANIMATION_CHANNEL="AnimationChannel",x.ANIMATION_SAMPLER="AnimationSampler",x.BUFFER="Buffer",x.CAMERA="Camera",x.MATERIAL="Material",x.MESH="Mesh",x.PRIMITIVE="Primitive",x.PRIMITIVE_TARGET="PrimitiveTarget",x.NODE="Node",x.ROOT="Root",x.SCENE="Scene",x.SKIN="Skin",x.TEXTURE="Texture",x.TEXTURE_INFO="TextureInfo",function(e){e.INTERLEAVED="interleaved",e.SEPARATE="separate"}(y||(y={})),function(e){e[e.R=4096]="R",e[e.G=256]="G",e[e.B=16]="B",e[e.A=1]="A"}(_||(_={})),function(e){e.GLTF="GLTF",e.GLB="GLB"}(b||(b={}));var A=function(){function e(t,n,r){if(v(this,e),this.t=void 0,this.i=void 0,this.h=void 0,this.o=!1,this.u=[],this.t=t,this.i=n,this.h=r,!n.canLink(r))throw new Error("Cannot link disconnected graphs/documents.")}return m(e,[{key:"getName",value:function(){return this.t}},{key:"getParent",value:function(){return this.i}},{key:"getChild",value:function(){return this.h}},{key:"setChild",value:function(e){return this.h=e,this}},{key:"dispose",value:function(){this.o||(this.o=!0,this.u.forEach((function(e){return e()})),this.u.length=0)}},{key:"onDispose",value:function(e){return this.u.push(e),this}},{key:"isDisposed",value:function(){return this.o}}]),e}(),E=function(){function e(){v(this,e),this.l=new Set,this.p=new Set,this.g=new Map,this.v=new Map,this.u={}}return m(e,[{key:"on",value:function(e,t){return this.u[e]=this.u[e]||[],this.u[e].push(t),this}},{key:"emit",value:function(e,t){var n,r=g(this.u[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t)}catch(i){r.e(i)}finally{r.f()}return this}},{key:"getLinks",value:function(){return Array.from(this.p)}},{key:"listParentLinks",value:function(e){return Array.from(this.v.get(e)||this.l)}},{key:"listParents",value:function(e){return this.listParentLinks(e).map((function(e){return e.getParent()}))}},{key:"listChildLinks",value:function(e){return Array.from(this.g.get(e)||this.l)}},{key:"listChildren",value:function(e){return this.listChildLinks(e).map((function(e){return e.getChild()}))}},{key:"disconnectChildren",value:function(e){return(this.g.get(e)||this.l).forEach((function(e){return e.dispose()})),this}},{key:"disconnectParents",value:function(e,t){var n=Array.from(this.v.get(e)||this.l);return t&&(n=n.filter((function(e){return t(e.getParent())}))),n.forEach((function(e){return e.dispose()})),this}},{key:"swapChild",value:function(e,t,n){var r=this,i=this.g.get(e)||this.l;return Array.from(i).filter((function(e){return e.getChild()===t})).forEach((function(e){r.v.get(t).delete(e),e.setChild(n),r.v.has(n)||r.v.set(n,new Set),r.v.get(n).add(e)})),this}},{key:"link",value:function(e,t,n){if(!n)return null;var r=new A(e,t,n);return this.registerLink(r),r}},{key:"registerLink",value:function(e){var t=this;this.p.add(e);var n=e.getParent();this.g.has(n)||this.g.set(n,new Set),this.g.get(n).add(e);var r=e.getChild();return this.v.has(r)||this.v.set(r,new Set),this.v.get(r).add(e),e.onDispose((function(){return t.unlink(e)})),e}},{key:"unlink",value:function(e){return this.p.delete(e),this.g.get(e.getParent()).delete(e),this.v.get(e.getChild()).delete(e),this}}]),e}();function T(e,t){Object.defineProperty(e,t,{get:function(){return this["__"+t]},set:function(e){var n=this,r=this["__"+t];r&&!Array.isArray(r)&&r.dispose(),e&&!Array.isArray(e)&&e.onDispose((function(){n["__"+t]=null})),this["__"+t]=e},enumerable:!0})}function I(e,t){}function L(e){var t,n={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]},r=e.propertyType===i.NODE?[e]:e.listChildren(),a=g(r);try{for(a.s();!(t=a.n()).done;)t.value.traverse((function(e){var t=e.getMesh();if(t){var r=O(t,e.getWorldMatrix());P(r.min,n),P(r.max,n)}}))}catch(o){a.e(o)}finally{a.f()}return n}function O(e,t){var n,r={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]},i=g(e.listPrimitives());try{for(i.s();!(n=i.n()).done;){var a=n.value.getAttribute("POSITION");if(a)for(var o=[0,0,0],s=[0,0,0],u=0;u<a.getCount();u++)o=a.getElement(u,o),P(s=(0,w.transformMat4)(s,o,t),r)}}catch(c){i.e(c)}finally{i.f()}return r}function P(e,t){for(var n=0;n<3;n++)t.min[n]=Math.min(e[n],t.min[n]),t.max[n]=Math.max(e[n],t.max[n])}var D=function(){function e(){v(this,e)}return m(e,null,[{key:"createBufferFromDataURI",value:function(e){if("undefined"==typeof Buffer){for(var t=atob(e.split(",")[1]),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}var i=e.split(",")[1],a=e.indexOf("base64")>=0;return this.trim(Buffer.from(i,a?"base64":"utf8"))}},{key:"encodeText",value:function(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e).buffer:this.trim(Buffer.from(e))}},{key:"decodeText",value:function(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}},{key:"trim",value:function(e){var t=e.byteOffset,n=e.byteLength;return e.buffer.slice(t,t+n)}},{key:"concat",value:function(e){var t,n=0,r=g(e);try{for(r.s();!(t=r.n()).done;)n+=t.value.byteLength}catch(c){r.e(c)}finally{r.f()}var i,a=new Uint8Array(n),o=0,s=g(e);try{for(s.s();!(i=s.n()).done;){var u=i.value;a.set(new Uint8Array(u),o),o+=u.byteLength}}catch(c){s.e(c)}finally{s.f()}return a.buffer}},{key:"pad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.padNumber(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}},{key:"padNumber",value:function(e){return 4*Math.ceil(e/4)}},{key:"equals",value:function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=e.byteLength;i--;)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}}]),e}(),B=function(){function e(){v(this,e)}return m(e,null,[{key:"hexToFactor",value:function(e,t){e=Math.floor(e);var n=t;return n[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}},{key:"factorToHex",value:function(e){var t=d(e),n=this.convertLinearToSRGB(e,t),r=p(n,3);return 255*r[0]<<16^255*r[1]<<8^255*r[2]<<0}},{key:"convertSRGBToLinear",value:function(e,t){for(var n=e,r=t,i=0;i<3;i++)r[i]=n[i]<.04045?.0773993808*n[i]:Math.pow(.9478672986*n[i]+.0521327014,2.4);return t}},{key:"convertLinearToSRGB",value:function(e,t){for(var n=e,r=t,i=0;i<3;i++)r[i]=n[i]<.0031308?12.92*n[i]:1.055*Math.pow(n[i],.41666)-.055;return t}}]),e}(),N=function(){function e(){v(this,e)}return m(e,null,[{key:"basename",value:function(e){var t=e.split(/[\\/]/).pop();return t.substr(0,t.lastIndexOf("."))}},{key:"extension",value:function(e){return 0!==e.indexOf("data:")?e.split(/[\\/]/).pop().split(/[.]/).pop():0===e.indexOf("data:image/png")?"png":0===e.indexOf("data:image/jpeg")?"jpeg":"bin"}}]),e}(),R=function(){function e(){v(this,e)}return m(e,[{key:"match",value:function(e){var t=new Uint8Array(e);return t.length>=8&&137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}},{key:"getSize",value:function(t){var n=new DataView(t);return D.decodeText(t.slice(12,16))===e.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}},{key:"getChannels",value:function(e){return 4}}]),e}();R.PNG_FRIED_CHUNK_NAME="CgBI";var j=function(){function e(){v(this,e)}return m(e,null,[{key:"registerFormat",value:function(e,t){this.impls[e]=t}},{key:"getMimeType",value:function(e){for(var t in this.impls)if(this.impls[t].match(e))return t;return null}},{key:"getSize",value:function(e,t){return this.impls[t]?this.impls[t].getSize(e):null}},{key:"getChannels",value:function(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}},{key:"getMemSize",value:function(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);var n=0,r=this.getSize(e,t);if(!r)return null;for(;r[0]>1||r[1]>1;)n+=r[0]*r[1]*4,r[0]=Math.max(Math.floor(r[0]/2),1),r[1]=Math.max(Math.floor(r[1]/2),1);return n+=4}},{key:"mimeTypeToExtension",value:function(e){return"image/jpeg"===e?"jpg":e.split("/").pop()}},{key:"extensionToMimeType",value:function(e){return"jpg"===e?"image/jpeg":"image/".concat(e)}}]),e}();function z(e,t){if(t>e.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==e.getUint8(t))throw new TypeError("Invalid JPG, marker table corrupted");return e}j.impls={"image/jpeg":new(function(){function e(){v(this,e)}return m(e,[{key:"match",value:function(e){var t=new Uint8Array(e);return t.length>=3&&255===t[0]&&216===t[1]&&255===t[2]}},{key:"getSize",value:function(e){for(var t,n,r=new DataView(e,4);r.byteLength;){if(t=r.getUint16(0,!1),z(r,t),192===(n=r.getUint8(t+1))||193===n||194===n)return[r.getUint16(t+7,!1),r.getUint16(t+5,!1)];r=new DataView(e,r.byteOffset+t+2)}throw new TypeError("Invalid JPG, no size found")}},{key:"getChannels",value:function(e){return 3}}]),e}()),"image/png":new R};var F=function(){function e(){v(this,e)}return m(e,null,[{key:"identity",value:function(e){return e}},{key:"eq",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(Math.abs(e[n]-t[n])>1e-5)return!1;return!0}},{key:"denormalize",value:function(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}},{key:"normalize",value:function(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}},{key:"decompose",value:function(e,t,n,r){var i=(0,w.length)([e[0],e[1],e[2]]),a=(0,w.length)([e[4],e[5],e[6]]),o=(0,w.length)([e[8],e[9],e[10]]);(0,k.determinant)(e)<0&&(i=-i),t[0]=e[12],t[1]=e[13],t[2]=e[14];var s=e.slice(),u=1/i,c=1/a,l=1/o;s[0]*=u,s[1]*=u,s[2]*=u,s[4]*=c,s[5]*=c,s[6]*=c,s[8]*=l,s[9]*=l,s[10]*=l,(0,k.getRotation)(n,s),r[0]=i,r[1]=a,r[2]=o}},{key:"compose",value:function(e,t,n,r){var i=r,a=t[0],o=t[1],s=t[2],u=t[3],c=a+a,l=o+o,h=s+s,f=a*c,d=a*l,p=a*h,g=o*l,v=o*h,m=s*h,y=u*c,_=u*l,b=u*h,x=n[0],w=n[1],k=n[2];return i[0]=(1-(g+m))*x,i[1]=(d+b)*x,i[2]=(p-_)*x,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(f+m))*w,i[6]=(v+y)*w,i[7]=0,i[8]=(p+_)*k,i[9]=(v-y)*k,i[10]=(1-(f+g))*k,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}}]),e}(),U=function(){function e(t){v(this,e),this.verbosity=void 0,this.verbosity=t}return m(e,[{key:"debug",value:function(t){this.verbosity<=e.Verbosity.DEBUG&&console.debug(t)}},{key:"info",value:function(t){this.verbosity<=e.Verbosity.INFO&&console.info(t)}},{key:"warn",value:function(t){this.verbosity<=e.Verbosity.WARN&&console.warn(t)}},{key:"error",value:function(t){this.verbosity<=e.Verbosity.ERROR&&console.error(t)}}]),e}();U.Verbosity={SILENT:4,ERROR:3,WARN:2,INFO:1,DEBUG:0},U.DEFAULT_INSTANCE=new U(U.Verbosity.INFO);var V="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",H=new Set,G=function(){for(var e="",t=0;t<6;t++)e+=V.charAt(Math.floor(42*Math.random()));return e},Y=function(){for(var e=0;e<999;e++){var t=G();if(!H.has(t))return H.add(t),t}return""},W=function(e){return e},q=function(e){h(n,e);var t=f(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return v(this,n),(r=t.call(this,e)).graph=void 0,r.m={},r.t="",r.graph=e,r.t=i,r}return m(n,[{key:"getName",value:function(){return this.t}},{key:"setName",value:function(e){return this.t=e,this}},{key:"getExtras",value:function(){return this.m}},{key:"setExtras",value:function(e){return this.m=e,this}},{key:"clone",value:function(){var e=new(0,this.constructor)(this.graph).copy(this,W);return this.graph.emit("clone",e),e}},{key:"copy",value:function(e){return this.t=e.t,this.m=JSON.parse(JSON.stringify(e.m)),this}},{key:"detach",value:function(){return this.graph.disconnectParents(this,(function(e){return"Root"!==e.propertyType})),this}},{key:"listParents",value:function(){return this.listGraphParents()}}]),n}(function(){function e(t){v(this,e),this.graph=void 0,this.o=!1,this.graph=t,this.graph=t}return m(e,[{key:"canLink",value:function(e){return this.graph===e.graph}},{key:"isDisposed",value:function(){return this.o}},{key:"dispose",value:function(){this.graph.disconnectChildren(this),this.graph.disconnectParents(this),this.o=!0,this.graph.emit("dispose",this)}},{key:"detach",value:function(){return this.graph.disconnectParents(this),this}},{key:"swap",value:function(e,t){return this.graph.swapChild(this,e,t),this}},{key:"addGraphChild",value:function(e,t){return e.push(t),t.onDispose((function(){var n=e.filter((function(e){return e!==t}));e.length=0;var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.push(a)}}catch(o){i.e(o)}finally{i.f()}})),this}},{key:"removeGraphChild",value:function(e,t){return e.filter((function(e){return e.getChild()===t})).forEach((function(e){return e.dispose()})),this}},{key:"clearGraphChildList",value:function(e){for(;e.length>0;)e[0].dispose();return this}},{key:"listGraphParents",value:function(){return this.graph.listParents(this)}}]),e}()),Z="Pass extension name (string) as lookup token, not a constructor.",K=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).extensions=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),this.clearGraphChildList(this.extensions),e.extensions.forEach((function(e){var n=e.getChild();t.setExtension(n.extensionName,r(n))})),this}},{key:"getExtension",value:function(e){if("string"!=typeof e)throw new Error(Z);var t=this.extensions.find((function(t){return t.getChild().extensionName===e}));return t?t.getChild():null}},{key:"setExtension",value:function(e,t){if("string"!=typeof e)throw new Error(Z);var n=this.getExtension(e);return n&&this.removeGraphChild(this.extensions,n),t?(t.T(this),this.addGraphChild(this.extensions,this.graph.link(e,this,t))):this}},{key:"listExtensions",value:function(){return this.extensions.map((function(e){return e.getChild()}))}}]),n}(q);M([I],K.prototype,"extensions",void 0);var X=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.ACCESSOR,e.S=null,e.M=n.Type.SCALAR,e.I=n.ComponentType.FLOAT,e.N=!1,e.C=F.identity,e.O=F.identity,e.buffer=null,e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this.M=e.M,this.I=e.I,this.N=e.N,this.C=e.C,this.O=e.O,e.S&&(this.S=e.S.slice()),this.setBuffer(e.buffer?t(e.buffer.getChild()):null),this}},{key:"getMinNormalized",value:function(e){var t=this.getElementSize();this.getMin(e);for(var n=0;n<t;n++)e[n]=this.O(e[n]);return e}},{key:"getMin",value:function(e){for(var t=this.getCount(),n=this.getElementSize(),r=0;r<n;r++)e[r]=1/0;for(var i=0;i<t*n;i+=n)for(var a=0;a<n;a++){var o=this.S[i+a];Number.isFinite(o)&&(e[a]=Math.min(e[a],o))}return e}},{key:"getMaxNormalized",value:function(e){var t=this.getElementSize();this.getMax(e);for(var n=0;n<t;n++)e[n]=this.O(e[n]);return e}},{key:"getMax",value:function(e){for(var t=this.getCount(),n=this.getElementSize(),r=0;r<n;r++)e[r]=-1/0;for(var i=0;i<t*n;i+=n)for(var a=0;a<n;a++){var o=this.S[i+a];Number.isFinite(o)&&(e[a]=Math.max(e[a],o))}return e}},{key:"getCount",value:function(){return this.S?this.S.length/this.getElementSize():0}},{key:"getType",value:function(){return this.M}},{key:"setType",value:function(e){return this.M=e,this}},{key:"getElementSize",value:function(){return n.getElementSize(this.M)}},{key:"getComponentSize",value:function(){return this.S.BYTES_PER_ELEMENT}},{key:"getComponentType",value:function(){return this.I}},{key:"getNormalized",value:function(){return this.N}},{key:"setNormalized",value:function(e){var t=this;return this.N=e,e?(this.O=function(e){return F.denormalize(e,t.I)},this.C=function(e){return F.normalize(e,t.I)}):(this.O=F.identity,this.C=F.identity),this}},{key:"getScalar",value:function(e){var t=this.getElementSize();return this.O(this.S[e*t])}},{key:"setScalar",value:function(e,t){return this.S[e*this.getElementSize()]=this.C(t),this}},{key:"getElement",value:function(e,t){for(var n=this.getElementSize(),r=0;r<n;r++)t[r]=this.O(this.S[e*n+r]);return t}},{key:"setElement",value:function(e,t){for(var n=this.getElementSize(),r=0;r<n;r++)this.S[e*n+r]=this.C(t[r]);return this}},{key:"getBuffer",value:function(){return this.buffer?this.buffer.getChild():null}},{key:"setBuffer",value:function(e){return this.buffer=this.graph.link("buffer",this,e),this}},{key:"getArray",value:function(){return this.S}},{key:"setArray",value:function(e){return this.I=e?function(e){switch(e.constructor){case Float32Array:return n.ComponentType.FLOAT;case Uint32Array:return n.ComponentType.UNSIGNED_INT;case Uint16Array:return n.ComponentType.UNSIGNED_SHORT;case Uint8Array:return n.ComponentType.UNSIGNED_BYTE;case Int16Array:return n.ComponentType.SHORT;case Int8Array:return n.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):n.ComponentType.FLOAT,this.S=e,this}},{key:"getByteLength",value:function(){return this.S?this.S.byteLength:0}}],[{key:"getElementSize",value:function(e){switch(e){case n.Type.SCALAR:return 1;case n.Type.VEC2:return 2;case n.Type.VEC3:return 3;case n.Type.VEC4:case n.Type.MAT2:return 4;case n.Type.MAT3:return 9;case n.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}},{key:"getComponentSize",value:function(e){switch(e){case n.ComponentType.BYTE:case n.ComponentType.UNSIGNED_BYTE:return 1;case n.ComponentType.SHORT:case n.ComponentType.UNSIGNED_SHORT:return 2;case n.ComponentType.UNSIGNED_INT:case n.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}}]),n}(K);X.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},X.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},M([T],X.prototype,"buffer",void 0);var Q=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.ANIMATION,e.channels=[],e.samplers=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),this.clearGraphChildList(this.channels),this.clearGraphChildList(this.samplers),e.channels.forEach((function(e){return t.addChannel(r(e.getChild()))})),e.samplers.forEach((function(e){return t.addSampler(r(e.getChild()))})),this}},{key:"addChannel",value:function(e){var t=this.graph.link("channel",this,e);return this.addGraphChild(this.channels,t)}},{key:"removeChannel",value:function(e){return this.removeGraphChild(this.channels,e)}},{key:"listChannels",value:function(){return this.channels.map((function(e){return e.getChild()}))}},{key:"addSampler",value:function(e){var t=this.graph.link("sampler",this,e);return this.addGraphChild(this.samplers,t)}},{key:"removeSampler",value:function(e){return this.removeGraphChild(this.samplers,e)}},{key:"listSamplers",value:function(){return this.samplers.map((function(e){return e.getChild()}))}}]),n}(K);M([I],Q.prototype,"channels",void 0),M([I],Q.prototype,"samplers",void 0);var J=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.ANIMATION_CHANNEL,e._=null,e.targetNode=null,e.sampler=null,e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this._=e._,this.setTargetNode(e.targetNode?t(e.targetNode.getChild()):null),this.setSampler(e.sampler?t(e.sampler.getChild()):null),this}},{key:"getTargetPath",value:function(){return this._}},{key:"setTargetPath",value:function(e){return this._=e,this}},{key:"getTargetNode",value:function(){return this.targetNode?this.targetNode.getChild():null}},{key:"setTargetNode",value:function(e){return this.targetNode=this.graph.link("target.node",this,e),this}},{key:"getSampler",value:function(){return this.sampler?this.sampler.getChild():null}},{key:"setSampler",value:function(e){return this.sampler=this.graph.link("sampler",this,e),this}}]),n}(q);J.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"},M([T],J.prototype,"targetNode",void 0),M([T],J.prototype,"sampler",void 0);var $=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.ANIMATION_SAMPLER,e.L=n.Interpolation.LINEAR,e.input=null,e.output=null,e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this.L=e.L,this.setInput(e.input?t(e.input.getChild()):null),this.setOutput(e.output?t(e.output.getChild()):null),this}},{key:"getInterpolation",value:function(){return this.L}},{key:"setInterpolation",value:function(e){return this.L=e,this}},{key:"getInput",value:function(){return this.input?this.input.getChild():null}},{key:"setInput",value:function(e){return this.input=this.graph.link("input",this,e),this}},{key:"getOutput",value:function(){return this.output?this.output.getChild():null}},{key:"setOutput",value:function(e){return this.output=this.graph.link("output",this,e),this}}]),n}(q);$.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"},M([T],$.prototype,"input",void 0),M([T],$.prototype,"output",void 0);var ee=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.BUFFER,e.P="",e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this.P=e.P,this}},{key:"getURI",value:function(){return this.P}},{key:"setURI",value:function(e){return this.P=e,this}}]),n}(K),te=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.CAMERA,e.M=n.Type.PERSPECTIVE,e.U=.1,e.k=100,e.F=null,e.j=2*Math.PI*50/360,e.D=1,e.J=1,e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this.M=e.M,this.U=e.U,this.k=e.k,this.F=e.F,this.j=e.j,this.D=e.D,this.J=e.J,this}},{key:"getType",value:function(){return this.M}},{key:"setType",value:function(e){return this.M=e,this}},{key:"getZNear",value:function(){return this.U}},{key:"setZNear",value:function(e){return this.U=e,this}},{key:"getZFar",value:function(){return this.k}},{key:"setZFar",value:function(e){return this.k=e,this}},{key:"getAspectRatio",value:function(){return this.F}},{key:"setAspectRatio",value:function(e){return this.F=e,this}},{key:"getYFov",value:function(){return this.j}},{key:"setYFov",value:function(e){return this.j=e,this}},{key:"getXMag",value:function(){return this.D}},{key:"setXMag",value:function(e){return this.D=e,this}},{key:"getYMag",value:function(){return this.J}},{key:"setYMag",value:function(e){return this.J=e,this}}]),n}(K);te.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};var ne=function(e){h(n,e);var t=f(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).$=void 0,i.$=r,i.$.addExtensionProperty(u(i)),i}return m(n,[{key:"clone",value:function(){var e=new(0,this.constructor)(this.graph,this.$).copy(this,W);return this.graph.emit("clone",e),e}},{key:"dispose",value:function(){this.$.removeExtensionProperty(this),c(l(n.prototype),"dispose",this).call(this)}},{key:"T",value:function(e){if(!this.parentTypes.includes(e.propertyType))throw new Error('Parent "'.concat(e.propertyType,'" invalid for child "').concat(this.propertyType,'".'))}}]),n}(q);ne.EXTENSION_NAME=void 0;var re=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).semantic="",e}return m(n,[{key:"copy",value:function(e){return this.semantic=e.semantic,this}}]),n}(A),ie=function(e){h(n,e);var t=f(n);function n(){return v(this,n),t.apply(this,arguments)}return m(n,[{key:"copy",value:function(e){return this}}]),n}(A),ae=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).channels=0,e}return m(n,[{key:"copy",value:function(e){return this.channels=e.channels,this}}]),n}(A),oe=function(e){h(n,e);var t=f(n);function n(){return v(this,n),t.apply(this,arguments)}return m(n,[{key:"linkAttribute",value:function(e,t,n){if(!n)return null;var r=new re(e,t,n);return r.semantic=e,this.registerLink(r),r}},{key:"linkIndex",value:function(e,t,n){if(!n)return null;var r=new ie(e,t,n);return this.registerLink(r),r}},{key:"linkTexture",value:function(e,t,n,r){if(!r)return null;var i=new ae(e,n,r);return i.channels=t,this.registerLink(i),i}}]),n}(E),se=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.TEXTURE_INFO,e.V=0,e.W=null,e.q=null,e.Y=n.WrapMode.REPEAT,e.H=n.WrapMode.REPEAT,e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this.V=e.V,this.W=e.W,this.q=e.q,this.Y=e.Y,this.H=e.H,this}},{key:"equals",value:function(e){return this.getTexCoord()===e.getTexCoord()&&this.getMagFilter()===e.getMagFilter()&&this.getMinFilter()===e.getMinFilter()&&this.getWrapS()===e.getWrapS()&&this.getWrapT()===e.getWrapT()}},{key:"getTexCoord",value:function(){return this.V}},{key:"setTexCoord",value:function(e){return this.V=e,this}},{key:"getMagFilter",value:function(){return this.W}},{key:"setMagFilter",value:function(e){return this.W=e,this}},{key:"getMinFilter",value:function(){return this.q}},{key:"setMinFilter",value:function(e){return this.q=e,this}},{key:"getWrapS",value:function(){return this.Y}},{key:"setWrapS",value:function(e){return this.Y=e,this}},{key:"getWrapT",value:function(){return this.H}},{key:"setWrapT",value:function(e){return this.H=e,this}}]),n}(K);se.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},se.MagFilter={NEAREST:9728,LINEAR:9729},se.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};var ue=_,ce=ue.R,le=ue.G,he=ue.B,fe=ue.A,de=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.MATERIAL,e.Z=n.AlphaMode.OPAQUE,e.K=.5,e.X=!1,e.tt=[1,1,1,1],e.st=[0,0,0],e.et=1,e.it=1,e.rt=1,e.nt=1,e.baseColorTexture=null,e.baseColorTextureInfo=e.graph.link("baseColorTextureInfo",u(e),new se(e.graph)),e.emissiveTexture=null,e.emissiveTextureInfo=e.graph.link("emissiveTextureInfo",u(e),new se(e.graph)),e.normalTexture=null,e.normalTextureInfo=e.graph.link("normalTextureInfo",u(e),new se(e.graph)),e.occlusionTexture=null,e.occlusionTextureInfo=e.graph.link("occlusionTextureInfo",u(e),new se(e.graph)),e.metallicRoughnessTexture=null,e.metallicRoughnessTextureInfo=e.graph.link("metallicRoughnessTextureInfo",u(e),new se(e.graph)),e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this.Z=e.Z,this.K=e.K,this.X=e.X,this.tt=d(e.tt),this.st=d(e.st),this.et=e.et,this.it=e.it,this.rt=e.rt,this.nt=e.nt,this.setBaseColorTexture(e.baseColorTexture?t(e.baseColorTexture.getChild()):null),this.baseColorTextureInfo.getChild().copy(t(e.baseColorTextureInfo.getChild()),t),this.setEmissiveTexture(e.emissiveTexture?t(e.emissiveTexture.getChild()):null),this.emissiveTextureInfo.getChild().copy(t(e.emissiveTextureInfo.getChild()),t),this.setNormalTexture(e.normalTexture?t(e.normalTexture.getChild()):null),this.normalTextureInfo.getChild().copy(t(e.normalTextureInfo.getChild()),t),this.setOcclusionTexture(e.occlusionTexture?t(e.occlusionTexture.getChild()):null),this.occlusionTextureInfo.getChild().copy(t(e.occlusionTextureInfo.getChild()),t),this.setMetallicRoughnessTexture(e.metallicRoughnessTexture?t(e.metallicRoughnessTexture.getChild()):null),this.metallicRoughnessTextureInfo.getChild().copy(t(e.metallicRoughnessTextureInfo.getChild()),t),this}},{key:"equals",value:function(e){if(this.getAlphaMode()!==e.getAlphaMode())return!1;if(this.getAlphaCutoff()!==e.getAlphaCutoff())return!1;if(this.getDoubleSided()!==e.getDoubleSided())return!1;if(!F.eq(this.getBaseColorFactor(),e.getBaseColorFactor()))return!1;if(!F.eq(this.getEmissiveFactor(),e.getEmissiveFactor()))return!1;if(this.getNormalScale()!==e.getNormalScale())return!1;if(this.getOcclusionStrength()!==e.getOcclusionStrength())return!1;if(this.getRoughnessFactor()!==e.getRoughnessFactor())return!1;if(this.getMetallicFactor()!==e.getMetallicFactor())return!1;if(this.getBaseColorTexture()||e.getBaseColorTexture()){if(this.getBaseColorTexture()!==e.getBaseColorTexture())return!1;if(this.getBaseColorTexture()&&!this.getBaseColorTextureInfo().equals(e.getBaseColorTextureInfo()))return!1}if(this.getEmissiveTexture()||e.getEmissiveTexture()){if(this.getEmissiveTexture()!==e.getEmissiveTexture())return!1;if(this.getEmissiveTexture()&&!this.getEmissiveTextureInfo().equals(e.getEmissiveTextureInfo()))return!1}if(this.getNormalTexture()||e.getNormalTexture()){if(this.getNormalTexture()!==e.getNormalTexture())return!1;if(this.getNormalTexture()&&!this.getNormalTextureInfo().equals(e.getNormalTextureInfo()))return!1}if(this.getOcclusionTexture()||e.getOcclusionTexture()){if(this.getOcclusionTexture()!==e.getOcclusionTexture())return!1;if(this.getOcclusionTexture()&&!this.getOcclusionTextureInfo().equals(e.getOcclusionTextureInfo()))return!1}if(this.getMetallicRoughnessTexture()||e.getMetallicRoughnessTexture()){if(this.getMetallicRoughnessTexture()!==e.getMetallicRoughnessTexture())return!1;if(this.getMetallicRoughnessTexture()&&!this.getMetallicRoughnessTextureInfo().equals(e.getMetallicRoughnessTextureInfo()))return!1}var t=this.listExtensions(),n=e.listExtensions();if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}},{key:"dispose",value:function(){this.baseColorTextureInfo.getChild().dispose(),this.emissiveTextureInfo.getChild().dispose(),this.normalTextureInfo.getChild().dispose(),this.occlusionTextureInfo.getChild().dispose(),this.metallicRoughnessTextureInfo.getChild().dispose(),c(l(n.prototype),"dispose",this).call(this)}},{key:"getDoubleSided",value:function(){return this.X}},{key:"setDoubleSided",value:function(e){return this.X=e,this}},{key:"getAlpha",value:function(){return this.tt[3]}},{key:"setAlpha",value:function(e){return this.tt[3]=e,this}},{key:"getAlphaMode",value:function(){return this.Z}},{key:"setAlphaMode",value:function(e){return this.Z=e,this}},{key:"getAlphaCutoff",value:function(){return this.K}},{key:"setAlphaCutoff",value:function(e){return this.K=e,this}},{key:"getBaseColorFactor",value:function(){return this.tt}},{key:"setBaseColorFactor",value:function(e){return this.tt=e,this}},{key:"getBaseColorHex",value:function(){return B.factorToHex(this.tt)}},{key:"setBaseColorHex",value:function(e){return B.hexToFactor(e,this.tt),this}},{key:"getBaseColorTexture",value:function(){return this.baseColorTexture?this.baseColorTexture.getChild():null}},{key:"getBaseColorTextureInfo",value:function(){return this.baseColorTexture?this.baseColorTextureInfo.getChild():null}},{key:"setBaseColorTexture",value:function(e){return this.baseColorTexture=this.graph.linkTexture("baseColorTexture",ce|le|he|fe,this,e),this}},{key:"getEmissiveFactor",value:function(){return this.st}},{key:"setEmissiveFactor",value:function(e){return this.st=e,this}},{key:"getEmissiveHex",value:function(){return B.factorToHex(this.st)}},{key:"setEmissiveHex",value:function(e){return B.hexToFactor(e,this.st),this}},{key:"getEmissiveTexture",value:function(){return this.emissiveTexture?this.emissiveTexture.getChild():null}},{key:"getEmissiveTextureInfo",value:function(){return this.emissiveTexture?this.emissiveTextureInfo.getChild():null}},{key:"setEmissiveTexture",value:function(e){return this.emissiveTexture=this.graph.linkTexture("emissiveTexture",ce|le|he,this,e),this}},{key:"getNormalScale",value:function(){return this.et}},{key:"setNormalScale",value:function(e){return this.et=e,this}},{key:"getNormalTexture",value:function(){return this.normalTexture?this.normalTexture.getChild():null}},{key:"getNormalTextureInfo",value:function(){return this.normalTexture?this.normalTextureInfo.getChild():null}},{key:"setNormalTexture",value:function(e){return this.normalTexture=this.graph.linkTexture("normalTexture",ce|le|he,this,e),this}},{key:"getOcclusionStrength",value:function(){return this.it}},{key:"setOcclusionStrength",value:function(e){return this.it=e,this}},{key:"getOcclusionTexture",value:function(){return this.occlusionTexture?this.occlusionTexture.getChild():null}},{key:"getOcclusionTextureInfo",value:function(){return this.occlusionTexture?this.occlusionTextureInfo.getChild():null}},{key:"setOcclusionTexture",value:function(e){return this.occlusionTexture=this.graph.linkTexture("occlusionTexture",ce,this,e),this}},{key:"getRoughnessFactor",value:function(){return this.rt}},{key:"setRoughnessFactor",value:function(e){return this.rt=e,this}},{key:"getMetallicFactor",value:function(){return this.nt}},{key:"setMetallicFactor",value:function(e){return this.nt=e,this}},{key:"getMetallicRoughnessTexture",value:function(){return this.metallicRoughnessTexture?this.metallicRoughnessTexture.getChild():null}},{key:"getMetallicRoughnessTextureInfo",value:function(){return this.metallicRoughnessTexture?this.metallicRoughnessTextureInfo.getChild():null}},{key:"setMetallicRoughnessTexture",value:function(e){return this.metallicRoughnessTexture=this.graph.linkTexture("metallicRoughnessTexture",le|he,this,e),this}}]),n}(K);de.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},M([T],de.prototype,"baseColorTexture",void 0),M([T],de.prototype,"baseColorTextureInfo",void 0),M([T],de.prototype,"emissiveTexture",void 0),M([T],de.prototype,"emissiveTextureInfo",void 0),M([T],de.prototype,"normalTexture",void 0),M([T],de.prototype,"normalTextureInfo",void 0),M([T],de.prototype,"occlusionTexture",void 0),M([T],de.prototype,"occlusionTextureInfo",void 0),M([T],de.prototype,"metallicRoughnessTexture",void 0),M([T],de.prototype,"metallicRoughnessTextureInfo",void 0);var pe=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.MESH,e.ht=[],e.primitives=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),this.ht=d(e.ht),this.clearGraphChildList(this.primitives),e.primitives.forEach((function(e){return t.addPrimitive(r(e.getChild()))})),this}},{key:"addPrimitive",value:function(e){return this.addGraphChild(this.primitives,this.graph.link("primitive",this,e))}},{key:"removePrimitive",value:function(e){return this.removeGraphChild(this.primitives,e)}},{key:"listPrimitives",value:function(){return this.primitives.map((function(e){return e.getChild()}))}},{key:"getWeights",value:function(){return this.ht}},{key:"setWeights",value:function(e){return this.ht=e,this}}]),n}(K);M([I],pe.prototype,"primitives",void 0);var ge=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.NODE,e.ot=[0,0,0],e.ut=[0,0,0,1],e.ct=[1,1,1],e.ht=[],e.i=null,e.camera=null,e.mesh=null,e.skin=null,e.children=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),this.ot=d(e.ot),this.ut=d(e.ut),this.ct=d(e.ct),this.ht=d(e.ht),this.setCamera(e.camera?r(e.camera.getChild()):null),this.setMesh(e.mesh?r(e.mesh.getChild()):null),this.setSkin(e.skin?r(e.skin.getChild()):null),r!==W&&(this.clearGraphChildList(this.children),e.children.forEach((function(e){return t.addChild(r(e.getChild()))}))),this}},{key:"getTranslation",value:function(){return this.ot}},{key:"getRotation",value:function(){return this.ut}},{key:"getScale",value:function(){return this.ct}},{key:"setTranslation",value:function(e){return this.ot=e,this}},{key:"setRotation",value:function(e){return this.ut=e,this}},{key:"setScale",value:function(e){return this.ct=e,this}},{key:"getMatrix",value:function(){return F.compose(this.ot,this.ut,this.ct,[])}},{key:"setMatrix",value:function(e){return F.decompose(e,this.ot,this.ut,this.ct),this}},{key:"getWorldTranslation",value:function(){var e=[0,0,0];return F.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}},{key:"getWorldRotation",value:function(){var e=[0,0,0,1];return F.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}},{key:"getWorldScale",value:function(){var e=[1,1,1];return F.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}},{key:"getWorldMatrix",value:function(){for(var e,t=[],r=this;r instanceof n;r=r.i)t.push(r);for(var i=t.pop().getMatrix();e=t.pop();)(0,k.multiply)(i,i,e.getMatrix());return i}},{key:"addChild",value:function(e){e.i&&e.i.removeChild(e);var t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose((function(){return e.i=null})),this}},{key:"removeChild",value:function(e){return this.removeGraphChild(this.children,e)}},{key:"listChildren",value:function(){return this.children.map((function(e){return e.getChild()}))}},{key:"getParent",value:function(){return this.i}},{key:"getMesh",value:function(){return this.mesh?this.mesh.getChild():null}},{key:"setMesh",value:function(e){return this.mesh=this.graph.link("mesh",this,e),this}},{key:"getCamera",value:function(){return this.camera?this.camera.getChild():null}},{key:"setCamera",value:function(e){return this.camera=this.graph.link("camera",this,e),this}},{key:"getSkin",value:function(){return this.skin?this.skin.getChild():null}},{key:"setSkin",value:function(e){return this.skin=this.graph.link("skin",this,e),this}},{key:"getWeights",value:function(){return this.ht}},{key:"setWeights",value:function(e){return this.ht=e,this}},{key:"traverse",value:function(e){e(this);var t,n=g(this.listChildren());try{for(n.s();!(t=n.n()).done;)t.value.traverse(e)}catch(r){n.e(r)}finally{n.f()}return this}}]),n}(K);M([T],ge.prototype,"camera",void 0),M([T],ge.prototype,"mesh",void 0),M([T],ge.prototype,"skin",void 0),M([I],ge.prototype,"children",void 0);var ve=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.PRIMITIVE,e.at=n.Mode.TRIANGLES,e.material=null,e.indices=null,e.attributes=[],e.targets=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),this.at=e.at,this.setIndices(e.indices?r(e.indices.getChild()):null),this.setMaterial(e.material?r(e.material.getChild()):null),this.clearGraphChildList(this.attributes),e.listSemantics().forEach((function(n){t.setAttribute(n,r(e.getAttribute(n)))})),this.clearGraphChildList(this.targets),e.targets.forEach((function(e){return t.addTarget(r(e.getChild()))})),this}},{key:"getIndices",value:function(){return this.indices?this.indices.getChild():null}},{key:"setIndices",value:function(e){return this.indices=this.graph.linkIndex("indices",this,e),this}},{key:"getAttribute",value:function(e){var t=this.attributes.find((function(t){return t.semantic===e}));return t?t.getChild():null}},{key:"setAttribute",value:function(e,t){var n=this.getAttribute(e);if(n&&this.removeGraphChild(this.attributes,n),!t)return this;var r=this.graph.linkAttribute(e,this,t);return this.addGraphChild(this.attributes,r)}},{key:"listAttributes",value:function(){return this.attributes.map((function(e){return e.getChild()}))}},{key:"listSemantics",value:function(){return this.attributes.map((function(e){return e.semantic}))}},{key:"getMaterial",value:function(){return this.material?this.material.getChild():null}},{key:"setMaterial",value:function(e){return this.material=this.graph.link("material",this,e),this}},{key:"getMode",value:function(){return this.at}},{key:"setMode",value:function(e){return this.at=e,this}},{key:"listTargets",value:function(){return this.targets.map((function(e){return e.getChild()}))}},{key:"addTarget",value:function(e){return this.addGraphChild(this.targets,this.graph.link("target",this,e)),this}},{key:"removeTarget",value:function(e){return this.removeGraphChild(this.targets,e)}}]),n}(K);ve.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},M([T],ve.prototype,"material",void 0),M([T],ve.prototype,"indices",void 0),M([I],ve.prototype,"attributes",void 0),M([I],ve.prototype,"targets",void 0);var me=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.PRIMITIVE_TARGET,e.attributes=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),this.clearGraphChildList(this.attributes),e.listSemantics().forEach((function(n){t.setAttribute(n,r(e.getAttribute(n)))})),this}},{key:"getAttribute",value:function(e){var t=this.attributes.find((function(t){return t.semantic===e}));return t?t.getChild():null}},{key:"setAttribute",value:function(e,t){var n=this.getAttribute(e);if(n&&this.removeGraphChild(this.attributes,n),!t)return this;var r=this.graph.linkAttribute(e,this,t);return r.semantic=e,this.addGraphChild(this.attributes,r)}},{key:"listAttributes",value:function(){return this.attributes.map((function(e){return e.getChild()}))}},{key:"listSemantics",value:function(){return this.attributes.map((function(e){return e.semantic}))}}]),n}(q);M([I],me.prototype,"attributes",void 0);var ye=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.SCENE,e.children=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),r!==W&&(this.clearGraphChildList(this.children),e.children.forEach((function(e){return t.addChild(r(e.getChild()))}))),this}},{key:"addChild",value:function(e){e.i&&e.i.removeChild(e);var t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose((function(){return e.i=null})),this}},{key:"removeChild",value:function(e){return this.removeGraphChild(this.children,e)}},{key:"listChildren",value:function(){return this.children.map((function(e){return e.getChild()}))}},{key:"traverse",value:function(e){var t,n=g(this.listChildren());try{for(n.s();!(t=n.n()).done;)t.value.traverse(e)}catch(r){n.e(r)}finally{n.f()}return this}}]),n}(K);M([I],ye.prototype,"children",void 0);var _e=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.SKIN,e.skeleton=null,e.inverseBindMatrices=null,e.joints=[],e}return m(n,[{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,r),this.setSkeleton(e.skeleton?r(e.skeleton.getChild()):null),this.setInverseBindMatrices(e.inverseBindMatrices?r(e.inverseBindMatrices.getChild()):null),this.clearGraphChildList(this.joints),e.joints.forEach((function(e){return t.addJoint(r(e.getChild()))})),this}},{key:"getSkeleton",value:function(){return this.skeleton?this.skeleton.getChild():null}},{key:"setSkeleton",value:function(e){return this.skeleton=this.graph.link("skeleton",this,e),this}},{key:"getInverseBindMatrices",value:function(){return this.inverseBindMatrices?this.inverseBindMatrices.getChild():null}},{key:"setInverseBindMatrices",value:function(e){return this.inverseBindMatrices=this.graph.link("inverseBindMatrices",this,e),this}},{key:"addJoint",value:function(e){var t=this.graph.link("joint",this,e);return this.addGraphChild(this.joints,t)}},{key:"removeJoint",value:function(e){return this.removeGraphChild(this.joints,e)}},{key:"listJoints",value:function(){return this.joints.map((function(e){return e.getChild()}))}}]),n}(K);M([T],_e.prototype,"skeleton",void 0),M([T],_e.prototype,"inverseBindMatrices",void 0),M([I],_e.prototype,"joints",void 0);var be=function(e){h(n,e);var t=f(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).propertyType=i.TEXTURE,e.lt=null,e.ft="",e.P="",e}return m(n,[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return c(l(n.prototype),"copy",this).call(this,e,t),this.ft=e.ft,this.P=e.P,e.lt&&(this.lt=e.lt.slice(0)),this}},{key:"getMimeType",value:function(){return this.ft||j.extensionToMimeType(N.extension(this.P))}},{key:"setMimeType",value:function(e){return this.ft=e,this}},{key:"getURI",value:function(){return this.P}},{key:"setURI",value:function(e){return this.P=e,this.ft=j.extensionToMimeType(N.extension(e)),this}},{key:"getImage",value:function(){return this.lt}},{key:"setImage",value:function(e){return this.lt=e,this}},{key:"getSize",value:function(){return this.lt?j.getSize(this.lt,this.getMimeType()):null}}]),n}(K),xe=function(e){h(n,e);var t=f(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).propertyType=i.ROOT,r.dt={generator:"glTF-Transform v1.2.4",version:"2.0"},r.gt=new Set,r.defaultScene=null,r.accessors=[],r.animations=[],r.buffers=[],r.cameras=[],r.materials=[],r.meshes=[],r.nodes=[],r.scenes=[],r.skins=[],r.textures=[],e.on("clone",(function(e){return r.wt(e)})),r}return m(n,[{key:"clone",value:function(){throw new Error("Root cannot be cloned.")}},{key:"copy",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;if(c(l(n.prototype),"copy",this).call(this,e,r),r===W)throw new Error("Root cannot be copied.");return Object.assign(this.dt,e.dt),e.accessors.forEach((function(e){return t.vt(r(e.getChild()))})),e.animations.forEach((function(e){return t.Tt(r(e.getChild()))})),e.buffers.forEach((function(e){return t.yt(r(e.getChild()))})),e.cameras.forEach((function(e){return t.At(r(e.getChild()))})),e.materials.forEach((function(e){return t.Et(r(e.getChild()))})),e.meshes.forEach((function(e){return t.xt(r(e.getChild()))})),e.nodes.forEach((function(e){return t.St(r(e.getChild()))})),e.scenes.forEach((function(e){return t.Mt(r(e.getChild()))})),e.skins.forEach((function(e){return t.It(r(e.getChild()))})),e.textures.forEach((function(e){return t.bt(r(e.getChild()))})),this.setDefaultScene(e.defaultScene?r(e.defaultScene.getChild()):null),this}},{key:"wt",value:function(e){return e instanceof ye?this.Mt(e):e instanceof ge?this.St(e):e instanceof te?this.At(e):e instanceof _e?this.It(e):e instanceof pe?this.xt(e):e instanceof de?this.Et(e):e instanceof be?this.bt(e):e instanceof Q?this.Tt(e):e instanceof X?this.vt(e):e instanceof ee&&this.yt(e),this}},{key:"getAsset",value:function(){return this.dt}},{key:"listExtensionsUsed",value:function(){return Array.from(this.gt)}},{key:"listExtensionsRequired",value:function(){return this.listExtensionsUsed().filter((function(e){return e.isRequired()}))}},{key:"Rt",value:function(e){return this.gt.add(e),this}},{key:"Nt",value:function(e){return this.gt.delete(e),this}},{key:"Mt",value:function(e){return this.addGraphChild(this.scenes,this.graph.link("scene",this,e))}},{key:"listScenes",value:function(){return this.scenes.map((function(e){return e.getChild()}))}},{key:"setDefaultScene",value:function(e){return this.defaultScene=this.graph.link("scene",this,e),this}},{key:"getDefaultScene",value:function(){return this.defaultScene?this.defaultScene.getChild():null}},{key:"St",value:function(e){return this.addGraphChild(this.nodes,this.graph.link("node",this,e))}},{key:"listNodes",value:function(){return this.nodes.map((function(e){return e.getChild()}))}},{key:"At",value:function(e){return this.addGraphChild(this.cameras,this.graph.link("camera",this,e))}},{key:"listCameras",value:function(){return this.cameras.map((function(e){return e.getChild()}))}},{key:"It",value:function(e){return this.addGraphChild(this.skins,this.graph.link("skin",this,e))}},{key:"listSkins",value:function(){return this.skins.map((function(e){return e.getChild()}))}},{key:"xt",value:function(e){return this.addGraphChild(this.meshes,this.graph.link("mesh",this,e))}},{key:"listMeshes",value:function(){return this.meshes.map((function(e){return e.getChild()}))}},{key:"Et",value:function(e){return this.addGraphChild(this.materials,this.graph.link("material",this,e))}},{key:"listMaterials",value:function(){return this.materials.map((function(e){return e.getChild()}))}},{key:"bt",value:function(e){return this.addGraphChild(this.textures,this.graph.link("texture",this,e))}},{key:"listTextures",value:function(){return this.textures.map((function(e){return e.getChild()}))}},{key:"Tt",value:function(e){return this.addGraphChild(this.animations,this.graph.link("animation",this,e))}},{key:"listAnimations",value:function(){return this.animations.map((function(e){return e.getChild()}))}},{key:"vt",value:function(e){return this.addGraphChild(this.accessors,this.graph.link("accessor",this,e))}},{key:"listAccessors",value:function(){return this.accessors.map((function(e){return e.getChild()}))}},{key:"yt",value:function(e){return this.addGraphChild(this.buffers,this.graph.link("buffer",this,e))}},{key:"listBuffers",value:function(){return this.buffers.map((function(e){return e.getChild()}))}}]),n}(q);M([T],xe.prototype,"defaultScene",void 0),M([I],xe.prototype,"accessors",void 0),M([I],xe.prototype,"animations",void 0),M([I],xe.prototype,"buffers",void 0),M([I],xe.prototype,"cameras",void 0),M([I],xe.prototype,"materials",void 0),M([I],xe.prototype,"meshes",void 0),M([I],xe.prototype,"nodes",void 0),M([I],xe.prototype,"scenes",void 0),M([I],xe.prototype,"skins",void 0),M([I],xe.prototype,"textures",void 0);var we=function(){function e(){v(this,e),this.Ct=new oe,this.Ot=new xe(this.Ct),this._t=U.DEFAULT_INSTANCE}return m(e,[{key:"getRoot",value:function(){return this.Ot}},{key:"getGraph",value:function(){return this.Ct}},{key:"getLogger",value:function(){return this._t}},{key:"setLogger",value:function(e){return this._t=e,this}},{key:"clone",value:function(){return(new e).merge(this).setLogger(this._t)}},{key:"merge",value:function(e){var t,n={},r=g(e.getRoot().listExtensionsUsed());try{for(r.s();!(t=r.n()).done;){var a=t.value,o=this.createExtension(a.constructor);a.isRequired()&&o.setRequired(!0),n[o.extensionName]=o}}catch(k){r.e(k)}finally{r.f()}var s=new Set,u=new Map;s.add(e.Ot),u.set(e.Ot,this.Ot);var c,l=g(e.Ct.getLinks());try{for(l.s();!(c=l.n()).done;)for(var h=c.value,f=0,d=[h.getParent(),h.getChild()];f<d.length;f++){var p=d[f];if(!s.has(p)){var v=void 0;if(p.propertyType===i.TEXTURE_INFO)v=p;else{var m=p.constructor;v=p instanceof ne?new m(this.Ct,n[p.extensionName]):new m(this.Ct)}u.set(p,v),s.add(p)}}}catch(k){l.e(k)}finally{l.f()}var y,_=function(e){var t=u.get(e);if(!t)throw new Error("Could resolve property.");return t},b=g(s);try{for(b.s();!(y=b.n()).done;){var x=y.value,w=u.get(x);if(!w)throw new Error("Could resolve property.");w.copy(x,_)}}catch(k){b.e(k)}finally{b.f()}return this}},{key:"transform",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,s,u,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c.length,n=new Array(t),r=0;r<t;r++)n[r]=c[r];i=n.map((function(e){return e.name})),a=0,s=n;case 3:if(!(a<s.length)){e.next=10;break}return u=s[a],e.next=7,u(this,{stack:i});case 7:a++,e.next=3;break;case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createExtension",value:function(e){var t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find((function(e){return e.extensionName===t}))||new e(this)}},{key:"createScene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new ye(this.Ct,e);return this.Ot.Mt(t),t}},{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new ge(this.Ct,e);return this.Ot.St(t),t}},{key:"createCamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new te(this.Ct,e);return this.Ot.At(t),t}},{key:"createSkin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new _e(this.Ct,e);return this.Ot.It(t),t}},{key:"createMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new pe(this.Ct,e);return this.Ot.xt(t),t}},{key:"createPrimitive",value:function(){return new ve(this.Ct)}},{key:"createPrimitiveTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new me(this.Ct,e)}},{key:"createMaterial",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new de(this.Ct,e);return this.Ot.Et(t),t}},{key:"createTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new be(this.Ct,e);return this.Ot.bt(t),t}},{key:"createAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Q(this.Ct,e);return this.Ot.Tt(t),t}},{key:"createAnimationChannel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new J(this.Ct,e)}},{key:"createAnimationSampler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new $(this.Ct,e)}},{key:"createAccessor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=this.getRoot().listBuffers()[0]);var n=new X(this.Ct,e).setBuffer(t);return this.Ot.vt(n),n}},{key:"createBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new ee(this.Ct,e);return this.Ot.yt(t),t}}]),e}(),ke=function(){function e(t){v(this,e),this.doc=void 0,this.extensionName="",this.prereadTypes=[],this.prewriteTypes=[],this.readDependencies=[],this.writeDependencies=[],this.required=!1,this.properties=new Set,this.doc=t,t.getRoot().Rt(this)}return m(e,[{key:"dispose",value:function(){this.doc.getRoot().Nt(this);var e,t=g(this.properties);try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(n){t.e(n)}finally{t.f()}}},{key:"isRequired",value:function(){return this.required}},{key:"setRequired",value:function(e){return this.required=e,this}},{key:"addExtensionProperty",value:function(e){return this.properties.add(e),this}},{key:"removeExtensionProperty",value:function(e){return this.properties.delete(e),this}},{key:"install",value:function(e,t){return this}},{key:"preread",value:function(e,t){return this}},{key:"prewrite",value:function(e,t){return this}}],[{key:"register",value:function(){}}]),e}();function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}ke.EXTENSION_NAME=void 0;var Ce,Me,Ae=function(){function e(t){v(this,e),this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=t}return m(e,[{key:"setTextureInfo",value:function(e,t){this.textureInfos.set(e,t),void 0!==t.texCoord&&e.setTexCoord(t.texCoord);var n=this.jsonDoc.json.textures[t.index];if(void 0!==n.sampler){var r=this.jsonDoc.json.samplers[n.sampler];void 0!==r.magFilter&&e.setMagFilter(r.magFilter),void 0!==r.minFilter&&e.setMinFilter(r.minFilter),void 0!==r.wrapS&&e.setWrapS(r.wrapS),void 0!==r.wrapT&&e.setWrapT(r.wrapT)}}}]),e}(),Ee={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Te={logger:U.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function Ie(e,t){var n=t.bufferViews[e.bufferView],r=t.jsonDoc.json.bufferViews[e.bufferView],i=Ee[e.componentType],a=X.getElementSize(e.type),o=i.BYTES_PER_ELEMENT;if(void 0!==r.byteStride&&r.byteStride!==a*o)return function(e,t){for(var n=t.bufferViews[e.bufferView],r=t.jsonDoc.json.bufferViews[e.bufferView],i=Ee[e.componentType],a=X.getElementSize(e.type),o=i.BYTES_PER_ELEMENT,s=e.byteOffset||0,u=new i(e.count*a),c=new DataView(n.buffer,n.byteOffset,n.byteLength),l=r.byteStride,h=0;h<e.count;h++)for(var f=0;f<a;f++){var d=s+h*l+f*o,p=void 0;switch(e.componentType){case X.ComponentType.FLOAT:p=c.getFloat32(d,!0);break;case X.ComponentType.UNSIGNED_INT:p=c.getUint32(d,!0);break;case X.ComponentType.UNSIGNED_SHORT:p=c.getUint16(d,!0);break;case X.ComponentType.UNSIGNED_BYTE:p=c.getUint8(d);break;case X.ComponentType.SHORT:p=c.getInt16(d,!0);break;case X.ComponentType.BYTE:p=c.getInt8(d);break;default:throw new Error('Unexpected componentType "'.concat(e.componentType,'".'))}u[h*a+f]=p}return u}(e,t);var s=n.byteOffset+(e.byteOffset||0);return new i(n.buffer.slice(s,s+e.count*a*o))}!function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(Ce||(Ce={})),function(e){e.ARRAY_BUFFER="ARRAY_BUFFER",e.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",e.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",e.OTHER="OTHER"}(Me||(Me={}));var Le=function(){function e(t,n,r){v(this,e),this.Bt=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.Lt=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.Bt=t,this.jsonDoc=n,this.options=r;var i=t.getRoot(),a=i.listBuffers().length,o=i.listTextures().length;this.bufferURIGenerator=new Pe(a>1,r.basename),this.imageURIGenerator=new Pe(o>1,r.basename),this.logger=t.getLogger()}return m(e,[{key:"createTextureInfoDef",value:function(e,t){var n={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},r=JSON.stringify(n);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(n));var i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},a=JSON.stringify(i);this.textureDefIndexMap.has(a)||(this.textureDefIndexMap.set(a,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));var o={index:this.textureDefIndexMap.get(a)};return 0!==t.getTexCoord()&&(o.texCoord=t.getTexCoord()),this.textureInfoDefMap.set(t,o),o}},{key:"createPropertyDef",value:function(e){var t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}},{key:"createAccessorDef",value:function(e){var t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.Bt.getGraph().listParentLinks(e).some((function(e){return"POSITION"===e.getName()||"input"===e.getName()}))&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}},{key:"createImageData",value:function(e,t,n){if(this.options.format===b.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{var r=j.mimeTypeToExtension(n.getMimeType());e.uri=this.imageURIGenerator.createURI(n,r),this.jsonDoc.resources[e.uri]=t}}},{key:"getAccessorUsage",value:function(t){var n=this.Lt.get(t);if(n)return n;var r,i=g(this.Bt.getGraph().listParentLinks(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;if("inverseBindMatrices"===a.getName())return e.BufferViewUsage.INVERSE_BIND_MATRICES;if(a instanceof re)return e.BufferViewUsage.ARRAY_BUFFER;if(a instanceof ie)return e.BufferViewUsage.ELEMENT_ARRAY_BUFFER}}catch(o){i.e(o)}finally{i.f()}return e.BufferViewUsage.OTHER}},{key:"addAccessorToUsageGroup",value:function(e,t){var n=this.Lt.get(e);if(n&&n!==t)throw new Error('Accessor with usage "'.concat(n,'" cannot be reused as "').concat(t,'".'));return this.Lt.set(e,t),this}},{key:"listAccessorUsageGroups",value:function(){for(var e={},t=0,n=Array.from(this.Lt.entries());t<n.length;t++){var r=p(n[t],2),i=r[0],a=r[1];e[a]=e[a]||[],e[a].push(i)}return e}}]),e}();Le.BufferViewTarget=Ce,Le.BufferViewUsage=Me,Le.USAGE_TO_TARGET=(a(r={},Me.ARRAY_BUFFER,Ce.ARRAY_BUFFER),a(r,Me.ELEMENT_ARRAY_BUFFER,Ce.ELEMENT_ARRAY_BUFFER),r);var Oe,Pe=function(){function e(t,n){v(this,e),this.multiple=void 0,this.basename=void 0,this.counter=1,this.multiple=t,this.basename=n}return m(e,[{key:"createURI",value:function(e,t){return e.getURI()?e.getURI():this.multiple?"".concat(this.basename,"_").concat(this.counter++,".").concat(t):"".concat(this.basename,".").concat(t)}}]),e}(),De=Le.BufferViewUsage;!function(e){e[e.JSON=1313821514]="JSON",e[e.BIN=5130562]="BIN"}(Oe||(Oe={}));var Be=function(){function e(){v(this,e),this._t=U.DEFAULT_INSTANCE,this.gt=new Set,this.Pt={},this.Ut=y.INTERLEAVED}return m(e,[{key:"setLogger",value:function(e){return this._t=e,this}},{key:"registerExtensions",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.gt.add(r),r.register()}}catch(i){n.e(i)}finally{n.f()}return this}},{key:"registerDependencies",value:function(e){return Object.assign(this.Pt,e),this}},{key:"setVertexLayout",value:function(e){return this.Ut=e,this}},{key:"kt",value:function(e){function t(t){if(t.uri&&!(t.uri in e.resources)&&t.uri.match(/data:/)){var n="__".concat(Y(),".").concat(N.extension(t.uri));e.resources[n]=D.createBufferFromDataURI(t.uri),t.uri=n}}(e.json.images||[]).forEach((function(e){if(void 0===e.bufferView&&void 0===e.uri)throw new Error("Missing resource URI or buffer view.");t(e)})),(e.json.buffers||[]).forEach(t)}},{key:"readJSON",value:function(e){return e=this.Ft(e),this.kt(e),function(){function e(){v(this,e)}return m(e,null,[{key:"read",value:function(e){var t=Se({},Te,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te),n=e.json,r=new we;this.validate(e,t);var a=new Ae(e),o=n.asset,s=r.getRoot().getAsset();o.copyright&&(s.copyright=o.copyright),o.extras&&(s.extras=o.extras),void 0!==n.extras&&r.getRoot().setExtras(Se({},n.extras));var u,c=n.extensionsUsed||[],l=n.extensionsRequired||[],h=g(t.extensions);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(c.includes(f.EXTENSION_NAME)){var d,v=r.createExtension(f).setRequired(l.includes(f.EXTENSION_NAME)),m=g(v.readDependencies);try{for(m.s();!(d=m.n()).done;){var y=d.value;v.install(y,t.dependencies[y])}}catch(C){m.e(C)}finally{m.f()}}}}catch(C){h.e(C)}finally{h.f()}var _=n.buffers||[];r.getRoot().listExtensionsUsed().filter((function(e){return e.prereadTypes.includes(i.BUFFER)})).forEach((function(e){return e.preread(a,i.BUFFER)})),a.buffers=_.map((function(e){var t=r.createBuffer(e.name);return e.extras&&t.setExtras(e.extras),e.uri&&0!==e.uri.indexOf("__")&&t.setURI(e.uri),t})),a.bufferViewBuffers=(n.bufferViews||[]).map((function(t,n){if(!a.bufferViews[n]){var r=e.json.buffers[t.buffer],i=new Uint8Array(r.uri?e.resources[r.uri]:e.resources["@glb.bin"],t.byteOffset||0,t.byteLength);a.bufferViews[n]=i}return a.buffers[t.buffer]})),a.accessors=(n.accessors||[]).map((function(e){var t,n=r.createAccessor(e.name,a.bufferViewBuffers[e.bufferView]).setType(e.type);return e.extras&&n.setExtras(e.extras),void 0!==e.normalized&&n.setNormalized(e.normalized),void 0!==e.bufferView||e.sparse?(t=void 0!==e.sparse?function(e,t){var n,r=Ee[e.componentType],i=X.getElementSize(e.type);n=void 0!==e.bufferView?Ie(e,t):new r(e.count*i);for(var a=e.sparse,o=a.count,s=Se({},e,a.indices,{count:o,type:"SCALAR"}),u=Se({},e,a.values,{count:o}),c=Ie(s,t),l=Ie(u,t),h=0;h<s.count;h++)for(var f=0;f<i;f++)n[c[h]*i+f]=l[h*i+f];return n}(e,a):Ie(e,a),n.setArray(t),n):n}));var b=n.images||[],x=n.textures||[];r.getRoot().listExtensionsUsed().filter((function(e){return e.prereadTypes.includes(i.TEXTURE)})).forEach((function(e){return e.preread(a,i.TEXTURE)})),a.textures=b.map((function(t){var i=r.createTexture(t.name);if(t.extras&&i.setExtras(t.extras),void 0!==t.bufferView){var a=n.bufferViews[t.bufferView],o=e.json.buffers[a.buffer],s=a.byteOffset||0,u=(o.uri?e.resources[o.uri]:e.resources["@glb.bin"]).slice(s,s+a.byteLength);i.setImage(u)}else void 0!==t.uri&&(i.setImage(e.resources[t.uri]),0!==t.uri.indexOf("__")&&i.setURI(t.uri));if(void 0!==t.mimeType)i.setMimeType(t.mimeType);else if(t.uri){var c=N.extension(t.uri);i.setMimeType(j.extensionToMimeType(c))}return i})),a.materials=(n.materials||[]).map((function(e){var t=r.createMaterial(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.alphaMode&&t.setAlphaMode(e.alphaMode),void 0!==e.alphaCutoff&&t.setAlphaCutoff(e.alphaCutoff),void 0!==e.doubleSided&&t.setDoubleSided(e.doubleSided);var n=e.pbrMetallicRoughness||{};if(void 0!==n.baseColorFactor&&t.setBaseColorFactor(n.baseColorFactor),void 0!==e.emissiveFactor&&t.setEmissiveFactor(e.emissiveFactor),void 0!==n.metallicFactor&&t.setMetallicFactor(n.metallicFactor),void 0!==n.roughnessFactor&&t.setRoughnessFactor(n.roughnessFactor),void 0!==n.baseColorTexture){var i=n.baseColorTexture;t.setBaseColorTexture(a.textures[x[i.index].source]),a.setTextureInfo(t.getBaseColorTextureInfo(),i)}if(void 0!==e.emissiveTexture){var o=e.emissiveTexture;t.setEmissiveTexture(a.textures[x[o.index].source]),a.setTextureInfo(t.getEmissiveTextureInfo(),o)}if(void 0!==e.normalTexture){var s=e.normalTexture;t.setNormalTexture(a.textures[x[s.index].source]),a.setTextureInfo(t.getNormalTextureInfo(),s),void 0!==e.normalTexture.scale&&t.setNormalScale(e.normalTexture.scale)}if(void 0!==e.occlusionTexture){var u=e.occlusionTexture;t.setOcclusionTexture(a.textures[x[u.index].source]),a.setTextureInfo(t.getOcclusionTextureInfo(),u),void 0!==e.occlusionTexture.strength&&t.setOcclusionStrength(e.occlusionTexture.strength)}if(void 0!==n.metallicRoughnessTexture){var c=n.metallicRoughnessTexture;t.setMetallicRoughnessTexture(a.textures[x[c.index].source]),a.setTextureInfo(t.getMetallicRoughnessTextureInfo(),c)}return t}));var w=n.meshes||[];r.getRoot().listExtensionsUsed().filter((function(e){return e.prereadTypes.includes(i.PRIMITIVE)})).forEach((function(e){return e.preread(a,i.PRIMITIVE)})),a.meshes=w.map((function(e){var t=r.createMesh(e.name);return e.extras&&t.setExtras(e.extras),void 0!==e.weights&&t.setWeights(e.weights),(e.primitives||[]).forEach((function(n){var i=r.createPrimitive();n.extras&&i.setExtras(n.extras),void 0!==n.material&&i.setMaterial(a.materials[n.material]),void 0!==n.mode&&i.setMode(n.mode);for(var o=0,s=Object.entries(n.attributes||{});o<s.length;o++){var u=p(s[o],2),c=u[0],l=u[1];i.setAttribute(c,a.accessors[l])}void 0!==n.indices&&i.setIndices(a.accessors[n.indices]);var h=e.extras&&e.extras.targetNames||[];(n.targets||[]).forEach((function(e,t){for(var n=h[t]||t.toString(),o=r.createPrimitiveTarget(n),s=0,u=Object.entries(e);s<u.length;s++){var c=p(u[s],2),l=c[0],f=c[1];o.setAttribute(l,a.accessors[f])}i.addTarget(o)})),t.addPrimitive(i)})),t})),a.cameras=(n.cameras||[]).map((function(e){var t=r.createCamera(e.name).setType(e.type);if(e.extras&&t.setExtras(e.extras),e.type===te.Type.PERSPECTIVE){var n=e.perspective;t.setYFov(n.yfov),t.setZNear(n.znear),void 0!==n.zfar&&t.setZFar(n.zfar),void 0!==n.aspectRatio&&t.setAspectRatio(n.aspectRatio)}else{var i=e.orthographic;t.setZNear(i.znear).setZFar(i.zfar).setXMag(i.xmag).setYMag(i.ymag)}return t}));var k=n.nodes||[];r.getRoot().listExtensionsUsed().filter((function(e){return e.prereadTypes.includes(i.NODE)})).forEach((function(e){return e.preread(a,i.NODE)})),a.nodes=k.map((function(e){var t=r.createNode(e.name);if(e.extras&&t.setExtras(e.extras),void 0!==e.translation&&t.setTranslation(e.translation),void 0!==e.rotation&&t.setRotation(e.rotation),void 0!==e.scale&&t.setScale(e.scale),void 0!==e.matrix){var n=[0,0,0],i=[0,0,0,1],a=[1,1,1];F.decompose(e.matrix,n,i,a),t.setTranslation(n),t.setRotation(i),t.setScale(a)}return void 0!==e.weights&&t.setWeights(e.weights),t})),a.skins=(n.skins||[]).map((function(e){var t=r.createSkin(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.inverseBindMatrices&&t.setInverseBindMatrices(a.accessors[e.inverseBindMatrices]),void 0!==e.skeleton&&t.setSkeleton(a.nodes[e.skeleton]);var n,i=g(e.joints);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.addJoint(a.nodes[o])}}catch(C){i.e(C)}finally{i.f()}return t})),k.map((function(e,t){var n=a.nodes[t];(e.children||[]).forEach((function(e){return n.addChild(a.nodes[e])})),void 0!==e.mesh&&n.setMesh(a.meshes[e.mesh]),void 0!==e.camera&&n.setCamera(a.cameras[e.camera]),void 0!==e.skin&&n.setSkin(a.skins[e.skin])})),a.animations=(n.animations||[]).map((function(e){var t=r.createAnimation(e.name);e.extras&&t.setExtras(e.extras);var n=(e.samplers||[]).map((function(e){var n=r.createAnimationSampler().setInput(a.accessors[e.input]).setOutput(a.accessors[e.output]).setInterpolation(e.interpolation||$.Interpolation.LINEAR);return e.extras&&n.setExtras(e.extras),t.addSampler(n),n}));return(e.channels||[]).forEach((function(e){var i=r.createAnimationChannel().setSampler(n[e.sampler]).setTargetNode(a.nodes[e.target.node]).setTargetPath(e.target.path);e.extras&&i.setExtras(e.extras),t.addChannel(i)})),t}));var S=n.scenes||[];return r.getRoot().listExtensionsUsed().filter((function(e){return e.prereadTypes.includes(i.SCENE)})).forEach((function(e){return e.preread(a,i.SCENE)})),a.scenes=S.map((function(e){var t=r.createScene(e.name);return e.extras&&t.setExtras(e.extras),(e.nodes||[]).map((function(e){return a.nodes[e]})).forEach((function(e){return t.addChild(e)})),t})),void 0!==n.scene&&r.getRoot().setDefaultScene(a.scenes[n.scene]),r.getRoot().listExtensionsUsed().forEach((function(e){return e.read(a)})),r}},{key:"validate",value:function(e,t){var n=e.json;if("2.0"!==n.asset.version)throw new Error('Unsupported glTF version, "'.concat(n.asset.version,'".'));if(n.extensionsRequired){var r,i=g(n.extensionsRequired);try{var a=function(){var e=r.value;if(!t.extensions.find((function(t){return t.EXTENSION_NAME===e})))throw new Error('Missing required extension, "'.concat(e,'".'))};for(i.s();!(r=i.n()).done;)a()}catch(c){i.e(c)}finally{i.f()}}if(n.extensionsUsed){var o,s=g(n.extensionsUsed);try{var u=function(){var e=o.value;t.extensions.find((function(t){return t.EXTENSION_NAME===e}))||t.logger.warn('Missing optional extension, "'.concat(e,'".'))};for(s.s();!(o=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}}}}]),e}().read(e,{extensions:Array.from(this.gt),dependencies:this.Pt,logger:this._t})}},{key:"writeJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.format===b.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 0\u20131 buffers.");return function(){function e(){v(this,e)}return m(e,null,[{key:"write",value:function(e,t){var n=e.getRoot(),r={asset:Se({generator:"glTF-Transform v1.2.4"},n.getAsset()),extras:Se({},n.getExtras())},a={json:r,resources:{}},o=new Le(e,a,t),s=t.logger||U.DEFAULT_INSTANCE,u=new Set(t.extensions.map((function(e){return e.EXTENSION_NAME}))),c=e.getRoot().listExtensionsUsed().filter((function(e){return u.has(e.extensionName)})),l=e.getRoot().listExtensionsRequired().filter((function(e){return u.has(e.extensionName)}));c.length<e.getRoot().listExtensionsUsed().length&&s.debug("Some extensions were not registered for I/O, and will not be written.");var h,f=g(c);try{for(f.s();!(h=f.n()).done;){var p,v=h.value,m=g(v.writeDependencies);try{for(m.s();!(p=m.n()).done;){var _=p.value;v.install(_,t.dependencies[_])}}catch(I){m.e(I)}finally{m.f()}}}catch(I){f.e(I)}finally{f.f()}function x(e,t,n,i){var a,s=[],u=0,c=g(e);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=o.createAccessorDef(l);h.bufferView=r.bufferViews.length;var f=D.pad(l.getArray().buffer);h.byteOffset=u,u+=f.byteLength,s.push(f),o.accessorIndexMap.set(l,r.accessors.length),r.accessors.push(h)}}catch(I){c.e(I)}finally{c.f()}var d={buffer:t,byteOffset:n,byteLength:D.concat(s).byteLength};return i&&(d.target=i),r.bufferViews.push(d),{buffers:s,byteLength:u}}function w(e,t,n){var i,a=e[0].getCount(),s=0,u=g(e);try{for(u.s();!(i=u.n()).done;){var c=i.value,l=o.createAccessorDef(c);l.bufferView=r.bufferViews.length,l.byteOffset=s;var h=c.getElementSize(),f=c.getComponentSize();s+=D.padNumber(h*f),o.accessorIndexMap.set(c,r.accessors.length),r.accessors.push(l)}}catch(I){u.e(I)}finally{u.f()}for(var d=a*s,p=new ArrayBuffer(d),v=new DataView(p),m=0;m<a;m++){var y,_=0,b=g(e);try{for(b.s();!(y=b.n()).done;){for(var x=y.value,w=x.getElementSize(),k=x.getComponentSize(),S=x.getComponentType(),C=x.getArray(),M=0;M<w;M++){var A=m*s+_+M*k,E=C[m*w+M];switch(S){case X.ComponentType.FLOAT:v.setFloat32(A,E,!0);break;case X.ComponentType.BYTE:v.setInt8(A,E);break;case X.ComponentType.SHORT:v.setInt16(A,E,!0);break;case X.ComponentType.UNSIGNED_BYTE:v.setUint8(A,E);break;case X.ComponentType.UNSIGNED_SHORT:v.setUint16(A,E,!0);break;case X.ComponentType.UNSIGNED_INT:v.setUint32(A,E,!0);break;default:throw new Error("Unexpected component type: "+S)}}_+=D.padNumber(w*k)}}catch(I){b.e(I)}finally{b.f()}}return r.bufferViews.push({buffer:t,byteOffset:n,byteLength:d,byteStride:s,target:Le.BufferViewTarget.ARRAY_BUFFER}),{byteLength:d,buffers:[p]}}var k,S=new Map,C=g(e.getGraph().getLinks());try{for(C.s();!(k=C.n()).done;){var M=k.value;if(M.getParent()!==n){var A=M.getChild();if(A instanceof X){var E=S.get(A)||[];E.push(M),S.set(A,E)}}}}catch(I){C.e(I)}finally{C.f()}if(r.accessors=[],r.bufferViews=[],r.samplers=[],r.textures=[],r.images=n.listTextures().map((function(e,t){var n=o.createPropertyDef(e);e.getMimeType()&&(n.mimeType=e.getMimeType());var r=e.getImage();return r&&o.createImageData(n,r,e),o.imageIndexMap.set(e,t),n})),c.filter((function(e){return e.prewriteTypes.includes(i.ACCESSOR)})).forEach((function(e){return e.prewrite(o,i.ACCESSOR)})),n.listAccessors().forEach((function(e){var t=o.accessorUsageGroupedByParent,n=o.accessorParents;if(!o.accessorIndexMap.has(e)){var r=S.get(e)||[],i=o.getAccessorUsage(e);if(o.addAccessorToUsageGroup(e,i),t.has(i)){var a=r[0].getParent(),s=n.get(a)||new Set;s.add(e),n.set(a,s)}}})),c.filter((function(e){return e.prewriteTypes.includes(i.BUFFER)})).forEach((function(e){return e.prewrite(o,i.BUFFER)})),(n.listAccessors().length>0||n.listTextures().length>0||o.otherBufferViews.size>0)&&0===n.listBuffers().length)throw new Error("Buffer required for Document resources, but none was found.");r.buffers=[],n.listBuffers().forEach((function(e,n){var i,s=o.createPropertyDef(e),u=o.accessorUsageGroupedByParent,c=o.accessorParents,l=e.listParents().filter((function(e){return e instanceof X})),h=new Set(l),f=[],p=r.buffers.length,v=0,m=o.listAccessorUsageGroups(),_=function(e){if(u.has(e))for(var n=0,r=Array.from(c.values());n<r.length;n++){var i=r[n],a=Array.from(i).filter((function(e){return h.has(e)})).filter((function(t){return o.getAccessorUsage(t)===e}));if(a.length)if(e!==De.ARRAY_BUFFER||t.vertexLayout===y.INTERLEAVED){var s=e===De.ARRAY_BUFFER?w(a,p,v):x(a,p,v);v+=s.byteLength,f.push.apply(f,d(s.buffers))}else{var l,_=g(a);try{for(_.s();!(l=_.n()).done;){var b=w([l.value],p,v);v+=b.byteLength,f.push.apply(f,d(b.buffers))}}catch(I){_.e(I)}finally{_.f()}}}else{var k=m[e].filter((function(e){return h.has(e)}));if(!k.length)return"continue";var S=x(k,p,v,e===De.ELEMENT_ARRAY_BUFFER?Le.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);v+=S.byteLength,f.push.apply(f,d(S.buffers))}};for(var k in m)_(k);if(o.imageBufferViews.length&&0===n)for(var S=0;S<o.imageBufferViews.length;S++)if(r.bufferViews[r.images[S].bufferView].byteOffset=v,v+=o.imageBufferViews[S].byteLength,f.push(o.imageBufferViews[S]),v%8){var C=8-v%8;v+=C,f.push(new ArrayBuffer(C))}if(o.otherBufferViews.has(e)){var M,A=g(o.otherBufferViews.get(e));try{for(A.s();!(M=A.n()).done;){var E=M.value;r.bufferViews.push({buffer:p,byteOffset:v,byteLength:E.byteLength}),o.otherBufferViewsIndexMap.set(E,r.bufferViews.length-1),v+=E.byteLength,f.push(E)}}catch(I){A.e(I)}finally{A.f()}}v&&(t.format===b.GLB?i="@glb.bin":(i=o.bufferURIGenerator.createURI(e,"bin"),s.uri=i),s.byteLength=v,a.resources[i]=D.concat(f)),r.buffers.push(s),o.bufferIndexMap.set(e,n)})),n.listAccessors().find((function(e){return!e.getBuffer()}))&&s.warn("Skipped writing one or more Accessors: no Buffer assigned."),r.materials=n.listMaterials().map((function(e,t){var n=o.createPropertyDef(e);if(e.getAlphaMode()!==de.AlphaMode.OPAQUE&&(n.alphaMode=e.getAlphaMode()),e.getAlphaMode()===de.AlphaMode.MASK&&(n.alphaCutoff=e.getAlphaCutoff()),e.getDoubleSided()&&(n.doubleSided=!0),n.pbrMetallicRoughness={},F.eq(e.getBaseColorFactor(),[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=e.getBaseColorFactor()),F.eq(e.getEmissiveFactor(),[0,0,0])||(n.emissiveFactor=e.getEmissiveFactor()),1!==e.getRoughnessFactor()&&(n.pbrMetallicRoughness.roughnessFactor=e.getRoughnessFactor()),1!==e.getMetallicFactor()&&(n.pbrMetallicRoughness.metallicFactor=e.getMetallicFactor()),e.getBaseColorTexture()){var r=e.getBaseColorTexture(),i=e.getBaseColorTextureInfo();n.pbrMetallicRoughness.baseColorTexture=o.createTextureInfoDef(r,i)}if(e.getEmissiveTexture()){var a=e.getEmissiveTexture(),s=e.getEmissiveTextureInfo();n.emissiveTexture=o.createTextureInfoDef(a,s)}if(e.getNormalTexture()){var u=e.getNormalTexture(),c=e.getNormalTextureInfo(),l=o.createTextureInfoDef(u,c);1!==e.getNormalScale()&&(l.scale=e.getNormalScale()),n.normalTexture=l}if(e.getOcclusionTexture()){var h=e.getOcclusionTexture(),f=e.getOcclusionTextureInfo(),d=o.createTextureInfoDef(h,f);1!==e.getOcclusionStrength()&&(d.strength=e.getOcclusionStrength()),n.occlusionTexture=d}if(e.getMetallicRoughnessTexture()){var p=e.getMetallicRoughnessTexture(),g=e.getMetallicRoughnessTextureInfo();n.pbrMetallicRoughness.metallicRoughnessTexture=o.createTextureInfoDef(p,g)}return o.materialIndexMap.set(e,t),n})),r.meshes=n.listMeshes().map((function(e,t){var n=o.createPropertyDef(e),r=null;return n.primitives=e.listPrimitives().map((function(e){var t={attributes:{}};t.mode=e.getMode();var n=e.getMaterial();n&&(t.material=o.materialIndexMap.get(n)),Object.keys(e.getExtras()).length&&(t.extras=e.getExtras());var i=e.getIndices();i&&(t.indices=o.accessorIndexMap.get(i));var a,s=g(e.listSemantics());try{for(s.s();!(a=s.n()).done;){var u=a.value;t.attributes[u]=o.accessorIndexMap.get(e.getAttribute(u))}}catch(I){s.e(I)}finally{s.f()}var c,l=g(e.listTargets());try{for(l.s();!(c=l.n()).done;){var h,f=c.value,d={},p=g(f.listSemantics());try{for(p.s();!(h=p.n()).done;){var v=h.value;d[v]=o.accessorIndexMap.get(f.getAttribute(v))}}catch(I){p.e(I)}finally{p.f()}t.targets=t.targets||[],t.targets.push(d)}}catch(I){l.e(I)}finally{l.f()}return e.listTargets().length&&!r&&(r=e.listTargets().map((function(e){return e.getName()}))),t})),e.getWeights().length&&(n.weights=e.getWeights()),r&&(n.extras=n.extras||{},n.extras.targetNames=r),o.meshIndexMap.set(e,t),n})),r.cameras=n.listCameras().map((function(e,t){var n=o.createPropertyDef(e);if(n.type=e.getType(),n.type===te.Type.PERSPECTIVE){n.perspective={znear:e.getZNear(),zfar:e.getZFar(),yfov:e.getYFov()};var r=e.getAspectRatio();null!==r&&(n.perspective.aspectRatio=r)}else n.orthographic={znear:e.getZNear(),zfar:e.getZFar(),xmag:e.getXMag(),ymag:e.getYMag()};return o.cameraIndexMap.set(e,t),n})),r.nodes=n.listNodes().map((function(e,t){var n=o.createPropertyDef(e);return F.eq(e.getTranslation(),[0,0,0])||(n.translation=e.getTranslation()),F.eq(e.getRotation(),[0,0,0,1])||(n.rotation=e.getRotation()),F.eq(e.getScale(),[1,1,1])||(n.scale=e.getScale()),e.getWeights().length&&(n.weights=e.getWeights()),o.nodeIndexMap.set(e,t),n})),r.skins=n.listSkins().map((function(e,t){var n=o.createPropertyDef(e),r=e.getInverseBindMatrices();r&&(n.inverseBindMatrices=o.accessorIndexMap.get(r));var i=e.getSkeleton();return i&&(n.skeleton=o.nodeIndexMap.get(i)),n.joints=e.listJoints().map((function(e){return o.nodeIndexMap.get(e)})),o.skinIndexMap.set(e,t),n})),n.listNodes().forEach((function(e,t){var n=r.nodes[t],i=e.getMesh();i&&(n.mesh=o.meshIndexMap.get(i));var a=e.getCamera();a&&(n.camera=o.cameraIndexMap.get(a));var s=e.getSkin();s&&(n.skin=o.skinIndexMap.get(s)),e.listChildren().length>0&&(n.children=e.listChildren().map((function(e){return o.nodeIndexMap.get(e)})))})),r.animations=n.listAnimations().map((function(e){var t=o.createPropertyDef(e),n=new Map;return t.samplers=e.listSamplers().map((function(e,t){var r=o.createPropertyDef(e);return r.input=o.accessorIndexMap.get(e.getInput()),r.output=o.accessorIndexMap.get(e.getOutput()),r.interpolation=e.getInterpolation(),n.set(e,t),r})),t.channels=e.listChannels().map((function(e){var t=o.createPropertyDef(e);return t.sampler=n.get(e.getSampler()),t.target={node:o.nodeIndexMap.get(e.getTargetNode()),path:e.getTargetPath()},t})),t})),r.scenes=n.listScenes().map((function(e){var t=o.createPropertyDef(e);return t.nodes=e.listChildren().map((function(e){return o.nodeIndexMap.get(e)})),t}));var T=n.getDefaultScene();return T&&(r.scene=n.listScenes().indexOf(T)),r.extensionsUsed=c.map((function(e){return e.extensionName})),r.extensionsRequired=l.map((function(e){return e.extensionName})),c.forEach((function(e){return e.write(o)})),function(e){var t=[];for(var n in e){var r=e[n];(Array.isArray(r)&&0===r.length||null===r||""===r||r&&"object"==typeof r&&0===Object.keys(r).length)&&t.push(n)}for(var i=0,a=t;i<a.length;i++)delete e[a[i]]}(r),a}}]),e}().write(e,{format:t.format||b.GLTF,basename:t.basename||"",logger:this._t,vertexLayout:this.Ut,dependencies:Se({},this.Pt),extensions:Array.from(this.gt)})}},{key:"Ft",value:function(e){var t=e.json,n=t.images,r=t.buffers;return e={json:Se({},e.json),resources:Se({},e.resources)},n&&(e.json.images=n.map((function(e){return Se({},e)}))),r&&(e.json.buffers=r.map((function(e){return Se({},e)}))),e}},{key:"binaryToJSON",value:function(e){var t=this.Gt(e);this.kt(t);var n=t.json;if(n.buffers&&n.buffers.some((function(e){return function(e,t){return void 0!==t.uri&&!(t.uri in e.resources)}(t,e)})))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(n.images&&n.images.some((function(e){return function(e,t){return void 0!==t.uri&&!(t.uri in e.resources)&&void 0===t.bufferView}(t,e)})))throw new Error("Cannot resolve external images with binaryToJSON().");return t}},{key:"Gt",value:function(e){var t=new Uint32Array(e,0,3);if(1179937895!==t[0])throw new Error("Invalid glTF asset.");if(2!==t[1])throw new Error('Unsupported glTF binary version, "'.concat(t[1],'".'));var n=new Uint32Array(e,12,2);if(n[1]!==Oe.JSON)throw new Error("Missing required GLB JSON chunk.");var r=n[0],i=D.decodeText(e.slice(20,20+r)),a=JSON.parse(i),o=20+r;if(e.byteLength<=o)return{json:a,resources:{}};var s=new Uint32Array(e,o,2);if(s[1]!==Oe.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:a,resources:{"@glb.bin":e.slice(o+8,o+8+s[0])}}}},{key:"readBinary",value:function(e){return this.readJSON(this.binaryToJSON(e))}},{key:"writeBinary",value:function(e){var t=this.writeJSON(e,{format:b.GLB}),n=t.json,r=t.resources,i=new Uint32Array([1179937895,2,12]),a=JSON.stringify(n),o=D.pad(D.encodeText(a),32),s=new Uint32Array([o.byteLength,1313821514]).buffer,u=D.concat([s,o]);i[i.length-1]+=u.byteLength;var c=Object.values(r)[0];if(!c||!c.byteLength)return D.concat([i.buffer,u]);var l=D.pad(c,0),h=new Uint32Array([l.byteLength,5130562]).buffer,f=D.concat([h,l]);return i[i.length-1]+=f.byteLength,D.concat([i.buffer,u,f])}}]),e}(),Ne=function(e){h(r,e);var t=f(r);function r(){var e;return v(this,r),(e=t.call(this)).jt=void 0,e.Dt=void 0,e.lastReadBytes=0,e.lastWriteBytes=0,e.jt=n("?ec06"),e.Dt=n("?f46d"),e}return m(r,[{key:"read",value:function(e){return this.readJSON(this.readAsJSON(e))}},{key:"readAsJSON",value:function(e){return e.match(/\.glb$/)||e.match(/^data:application\/octet-stream;/)?this.Jt(e):this.zt(e)}},{key:"write",value:function(e,t){e.match(/\.glb$/)?this.$t(e,t):this.Vt(e,t)}},{key:"Wt",value:function(e,t){var n=this;[].concat(d(e.json.images||[]),d(e.json.buffers||[])).forEach((function(r){if(r.uri&&!r.uri.match(/data:/)){var i=n.Dt.resolve(t,r.uri);e.resources[r.uri]=D.trim(n.jt.readFileSync(i)),n.lastReadBytes+=e.resources[r.uri].byteLength}}))}},{key:"Jt",value:function(e){var t=this.jt.readFileSync(e),n=D.trim(t);this.lastReadBytes=n.byteLength;var r=this.Gt(n);return this.Wt(r,this.Dt.dirname(e)),this.kt(r),r}},{key:"zt",value:function(e){this.lastReadBytes=0;var t=this.jt.readFileSync(e,"utf8");this.lastReadBytes+=t.length;var n={json:JSON.parse(t),resources:{}};return this.Wt(n,this.Dt.dirname(e)),this.kt(n),n}},{key:"Vt",value:function(e,t){var n=this;this.lastWriteBytes=0;var r=this.writeJSON(t,{format:b.GLTF,basename:N.basename(e)}),i=r.json,a=r.resources,o=this.jt,s=this.Dt,u=s.dirname(e),c=JSON.stringify(i,null,2);this.lastWriteBytes+=c.length,o.writeFileSync(e,c),Object.keys(a).forEach((function(e){var t=Buffer.from(a[e]);o.writeFileSync(s.join(u,e),t),n.lastWriteBytes+=t.byteLength}))}},{key:"$t",value:function(e,t){var n=Buffer.from(this.writeBinary(t));this.jt.writeFileSync(e,n),this.lastWriteBytes=n.byteLength}}]),r}(Be),Re={},je=function(e){h(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;return v(this,n),(e=t.call(this)).qt=void 0,e.qt=r,e}return m(n,[{key:"read",value:function(e){var t=this;return this.readAsJSON(e).then((function(e){return t.readJSON(e)}))}},{key:"readAsJSON",value:function(e){return e.match(/^data:application\/octet-stream;/)||new URL(e,window.location.href).pathname.match(/\.glb$/)?this.Jt(e):this.zt(e)}},{key:"Wt",value:function(e,t){var n=this,r=[].concat(d(e.json.images||[]),d(e.json.buffers||[])).map((function(r){var i=r.uri;return!i||i.match(/data:/)?Promise.resolve():fetch(function(e,t){if(!function(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}(t))return t;var n=e.split("/"),r=t.split("/");n.pop();for(var i=0;i<r.length;i++)"."!==r[i]&&(".."===r[i]?n.pop():n.push(r[i]));return n.join("/")}(t,i),n.qt).then((function(e){return e.arrayBuffer()})).then((function(t){e.resources[i]=t}))}));return Promise.all(r).then((function(){}))}},{key:"zt",value:function(e){var t=this,n={json:{},resources:{}};return fetch(e,this.qt).then((function(e){return e.json()})).then(function(){var r=s(o().mark((function r(i){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.json=i,r.next=3,t.Wt(n,ze(e));case 3:return t.kt(n),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},{key:"Jt",value:function(e){var t=this;return fetch(e,this.qt).then((function(e){return e.arrayBuffer()})).then(function(){var n=s(o().mark((function n(r){var i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.Gt(r),n.next=3,t.Wt(i,ze(e));case 3:return t.kt(i),n.abrupt("return",i);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}]),n}(Be);function ze(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}},"../../../node_modules/acorn/dist/acorn.es.js":function(e,t,n){"use strict";n.r(t),n.d(t,{LooseParser:function(){return ke},Node:function(){return ee},Parser:function(){return F},Position:function(){return P},SourceLocation:function(){return D},TokContext:function(){return re},Token:function(){return ye},TokenType:function(){return v},addLooseExports:function(){return Te},defaultOptions:function(){return N},getLineInfo:function(){return B},isIdentifierChar:function(){return g},isIdentifierStart:function(){return p},isNewLine:function(){return C},keywordTypes:function(){return b},lineBreak:function(){return k},lineBreakG:function(){return S},nonASCIIwhitespace:function(){return M},parse:function(){return Me},parseExpressionAt:function(){return Ae},parse_dammit:function(){return we},plugins:function(){return j},pluginsLoose:function(){return Se},tokContexts:function(){return ie},tokTypes:function(){return w},tokenizer:function(){return Ee},version:function(){return Ce}});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:i,6:i+" const class extends export import super"},o=/^in(stanceof)?$/,s="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",u="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",c=new RegExp("["+s+"]"),l=new RegExp("["+s+u+"]");s=u=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],f=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function d(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function p(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==t&&d(e,h)))}function g(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&l.test(String.fromCharCode(e)):!1!==t&&(d(e,h)||d(e,f)))))}var v=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function m(e,t){return new v(e,{beforeExpr:!0,binop:t})}var y={beforeExpr:!0},_={startsExpr:!0},b={};function x(e,t){return void 0===t&&(t={}),t.keyword=e,b[e]=new v(e,t)}var w={num:new v("num",_),regexp:new v("regexp",_),string:new v("string",_),name:new v("name",_),eof:new v("eof"),bracketL:new v("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new v("]"),braceL:new v("{",{beforeExpr:!0,startsExpr:!0}),braceR:new v("}"),parenL:new v("(",{beforeExpr:!0,startsExpr:!0}),parenR:new v(")"),comma:new v(",",y),semi:new v(";",y),colon:new v(":",y),dot:new v("."),question:new v("?",y),arrow:new v("=>",y),template:new v("template"),invalidTemplate:new v("invalidTemplate"),ellipsis:new v("...",y),backQuote:new v("`",_),dollarBraceL:new v("${",{beforeExpr:!0,startsExpr:!0}),eq:new v("=",{beforeExpr:!0,isAssign:!0}),assign:new v("_=",{beforeExpr:!0,isAssign:!0}),incDec:new v("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new v("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:m("||",1),logicalAND:m("&&",2),bitwiseOR:m("|",3),bitwiseXOR:m("^",4),bitwiseAND:m("&",5),equality:m("==/!=/===/!==",6),relational:m("</>/<=/>=",7),bitShift:m("<</>>/>>>",8),plusMin:new v("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:m("%",10),star:m("*",10),slash:m("/",10),starstar:new v("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",y),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",y),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",y),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",_),_if:x("if"),_return:x("return",y),_switch:x("switch"),_throw:x("throw",y),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",_),_super:x("super",_),_class:x("class",_),_extends:x("extends",y),_export:x("export"),_import:x("import"),_null:x("null",_),_true:x("true",_),_false:x("false",_),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},k=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(k.source,"g");function C(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var M=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,T=E.hasOwnProperty,I=E.toString;function L(e,t){return T.call(e,t)}var O=Array.isArray||function(e){return"[object Array]"===I.call(e)},P=function(e,t){this.line=e,this.column=t};P.prototype.offset=function(e){return new P(this.line,this.column+e)};var D=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function B(e,t){for(var n=1,r=0;;){S.lastIndex=r;var i=S.exec(e);if(!(i&&i.index<t))return new P(n,t-r);++n,r=i.index+i[0].length}}var N={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};function R(e){var t={};for(var n in N)t[n]=e&&L(e,n)?e[n]:N[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),O(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return O(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,a,o,s){var u={type:n?"Block":"Line",value:r,start:i,end:a};e.locations&&(u.loc=new D(this,o,s)),e.ranges&&(u.range=[i,a]),t.push(u)}}(t,t.onComment)),t}var j={};function z(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var F=function(e,t,n){this.options=e=R(e),this.sourceFile=e.sourceFile,this.keywords=z(a[e.ecmaVersion>=6?6:5]);var i="";if(!e.allowReserved){for(var o=e.ecmaVersion;!(i=r[o]);o--);"module"===e.sourceType&&(i+=" await")}this.reservedWords=z(i);var s=(i?i+" ":"")+r.strict;this.reservedWordsStrict=z(s),this.reservedWordsStrictBind=z(s+" "+r.strictBind),this.input=String(t),this.containsEsc=!1,this.loadPlugins(e.plugins),n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(k).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};F.prototype.isKeyword=function(e){return this.keywords.test(e)},F.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},F.prototype.extend=function(e,t){this[e]=t(this[e])},F.prototype.loadPlugins=function(e){for(var t in e){var n=j[t];if(!n)throw new Error("Plugin '"+t+"' not found");n(this,e[t])}},F.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};var U=F.prototype,V=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function H(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}U.strictDirective=function(e){for(;;){A.lastIndex=e,e+=A.exec(this.input)[0].length;var t=V.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},U.eat=function(e){return this.type===e&&(this.next(),!0)},U.isContextual=function(e){return this.type===w.name&&this.value===e&&!this.containsEsc},U.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},U.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},U.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||k.test(this.input.slice(this.lastTokEnd,this.start))},U.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},U.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},U.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},U.expect=function(e){this.eat(e)||this.unexpected()},U.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},U.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},U.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},U.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},U.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var G=F.prototype;G.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==w.eof;){var n=this.parseStatement(!0,!0,t);e.body.push(n)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var Y={kind:"loop"},W={kind:"switch"};G.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(p(n,!0)){for(var r=t+1;g(this.input.charCodeAt(r),!0);)++r;var i=this.input.slice(t,r);if(!o.test(i))return!0}return!1},G.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),t=this.pos+e[0].length;return!k.test(this.input.slice(this.pos,t))&&"function"===this.input.slice(t,t+8)&&(t+8===this.input.length||!g(this.input.charAt(t+8)))},G.parseStatement=function(e,t,n){var r,i=this.type,a=this.startNode();switch(this.isLet()&&(i=w._var,r="let"),i){case w._break:case w._continue:return this.parseBreakContinueStatement(a,i.keyword);case w._debugger:return this.parseDebuggerStatement(a);case w._do:return this.parseDoStatement(a);case w._for:return this.parseForStatement(a);case w._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1);case w._class:return e||this.unexpected(),this.parseClass(a,!0);case w._if:return this.parseIfStatement(a);case w._return:return this.parseReturnStatement(a);case w._switch:return this.parseSwitchStatement(a);case w._throw:return this.parseThrowStatement(a);case w._try:return this.parseTryStatement(a);case w._const:case w._var:return r=r||this.value,e||"var"===r||this.unexpected(),this.parseVarStatement(a,r);case w._while:return this.parseWhileStatement(a);case w._with:return this.parseWithStatement(a);case w.braceL:return this.parseBlock();case w.semi:return this.parseEmptyStatement(a);case w._export:case w._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===w._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e||this.unexpected(),this.next(),this.parseFunctionStatement(a,!0);var o=this.value,s=this.parseExpression();return i===w.name&&"Identifier"===s.type&&this.eat(w.colon)?this.parseLabeledStatement(a,o,s):this.parseExpressionStatement(a,s)}},G.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(w.semi)||this.insertSemicolon()?e.label=null:this.type!==w.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},G.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},G.parseDoStatement=function(e){return this.next(),this.labels.push(Y),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(w._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},G.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Y),this.enterLexicalScope(),this.expect(w.parenL),this.type===w.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===w._var||this.type===w._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===w._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var a=new H,o=this.parseExpression(!0,a);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(e,o)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,o))},G.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},G.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.type===w._function),e.alternate=this.eat(w._else)?this.parseStatement(!this.strict&&this.type===w._function):null,this.finishNode(e,"IfStatement")},G.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},G.parseSwitchStatement=function(e){var t,n=this;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(w.braceL),this.labels.push(W),this.enterLexicalScope();for(var r=!1;this.type!==w.braceR;)if(n.type===w._case||n.type===w._default){var i=n.type===w._case;t&&n.finishNode(t,"SwitchCase"),e.cases.push(t=n.startNode()),t.consequent=[],n.next(),i?t.test=n.parseExpression():(r&&n.raiseRecoverable(n.lastTokStart,"Multiple default clauses"),r=!0,t.test=null),n.expect(w.colon)}else t||n.unexpected(),t.consequent.push(n.parseStatement(!0));return this.exitLexicalScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},G.parseThrowStatement=function(e){return this.next(),k.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var q=[];G.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===w._catch){var t=this.startNode();this.next(),this.eat(w.parenL)?(t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,"let"),this.expect(w.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterLexicalScope()),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(w._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},G.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},G.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Y),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},G.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},G.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},G.parseLabeledStatement=function(e,t,n){for(var r=this,i=0,a=r.labels;i<a.length;i+=1)a[i].name===t&&r.raise(n.start,"Label '"+t+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===w._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=r.labels[s];if(u.statementStart!==e.start)break;u.statementStart=r.start,u.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(!0),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},G.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},G.parseBlock=function(e){void 0===e&&(e=!0);var t=this.startNode();for(t.body=[],this.expect(w.braceL),e&&this.enterLexicalScope();!this.eat(w.braceR);){var n=this.parseStatement(!0);t.body.push(n)}return e&&this.exitLexicalScope(),this.finishNode(t,"BlockStatement")},G.parseFor=function(e,t){return e.init=t,this.expect(w.semi),e.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),e.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},G.parseForIn=function(e,t){var n=this.type===w._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},G.parseVar=function(e,t,n){var r=this;for(e.declarations=[],e.kind=n;;){var i=r.startNode();if(r.parseVarId(i,n),r.eat(w.eq)?i.init=r.parseMaybeAssign(t):"const"!==n||r.type===w._in||r.options.ecmaVersion>=6&&r.isContextual("of")?"Identifier"===i.id.type||t&&(r.type===w._in||r.isContextual("of"))?i.init=null:r.raise(r.lastTokEnd,"Complex binding patterns require an initialization value"):r.unexpected(),e.declarations.push(r.finishNode(i,"VariableDeclarator")),!r.eat(w.comma))break}return e},G.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},G.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(e.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&&(e.id="nullableID"===t&&this.type!==w.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,this.inModule&&!this.inFunction?"let":"var"));var i=this.inGenerator,a=this.inAsync,o=this.yieldPos,s=this.awaitPos,u=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.inGenerator=i,this.inAsync=a,this.yieldPos=o,this.awaitPos=s,this.inFunction=u,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},G.parseFunctionParams=function(e){this.expect(w.parenL),e.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},G.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),r=!1;for(n.body=[],this.expect(w.braceL);!this.eat(w.braceR);){var i=this.parseClassMember(n);i&&"MethodDefinition"===i.type&&"constructor"===i.kind&&(r&&this.raise(i.start,"Duplicate constructor in the same class"),r=!0)}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},G.parseClassMember=function(e){var t=this;if(this.eat(w.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,a=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===w.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,a),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(w.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(w.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor"),this.parseClassMethod(e,n,i,a),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},G.parseClassMethod=function(e,t,n,r){t.value=this.parseMethod(n,r),e.body.push(this.finishNode(t,"MethodDefinition"))},G.parseClassId=function(e,t){e.id=this.type===w.name?this.parseIdent():!0===t?this.unexpected():null},G.parseClassSuper=function(e){e.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},G.parseExport=function(e,t){if(this.next(),this.eat(w.star))return this.expectContextual("from"),this.type!==w.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(w._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===w._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,"nullableID",!1,n)}else if(this.type===w._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var a=0,o=e.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},G.checkExport=function(e,t,n){e&&(L(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},G.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(e,a)}else if("ArrayPattern"===n)for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(e,u)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},G.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},G.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},G.parseExportSpecifiers=function(e){var t=this,n=[],r=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(r)r=!1;else if(t.expect(w.comma),t.afterTrailingComma(w.braceR))break;var i=t.startNode();i.local=t.parseIdent(!0),i.exported=t.eatContextual("as")?t.parseIdent(!0):i.local,t.checkExport(e,i.exported.name,i.exported.start),n.push(t.finishNode(i,"ExportSpecifier"))}return n},G.parseImport=function(e){return this.next(),this.type===w.string?(e.specifiers=q,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},G.parseImportSpecifiers=function(){var e=this,t=[],n=!0;if(this.type===w.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,"let"),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLVal(i.local,"let"),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(n)n=!1;else if(e.expect(w.comma),e.afterTrailingComma(w.braceR))break;var a=e.startNode();a.imported=e.parseIdent(!0),e.eatContextual("as")?a.local=e.parseIdent():(e.checkUnreserved(a.imported),a.local=a.imported),e.checkLVal(a.local,"let"),t.push(e.finishNode(a,"ImportSpecifier"))}return t},G.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},G.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var Z=F.prototype;Z.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,t),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},Z.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var a=e[n-1];6===this.options.ecmaVersion&&t&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return e},Z.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Z.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},Z.parseBindingList=function(e,t,n){for(var r=this,i=[],a=!0;!this.eat(e);)if(a?a=!1:r.expect(w.comma),t&&r.type===w.comma)i.push(null);else{if(n&&r.afterTrailingComma(e))break;if(r.type===w.ellipsis){var o=r.parseRestBinding();r.parseBindingListItem(o),i.push(o),r.type===w.comma&&r.raise(r.start,"Comma is not permitted after the rest element"),r.expect(e);break}var s=r.parseMaybeDefault(r.start,r.startLoc);r.parseBindingListItem(s),i.push(s)}return i},Z.parseBindingListItem=function(e){return e},Z.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Z.checkLVal=function(e,t,n){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(L(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t&&"none"!==t&&(("var"===t&&!this.canDeclareVarName(e.name)||"var"!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,"Identifier '"+e.name+"' has already been declared"),"var"===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLVal(u,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var K=F.prototype;K.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var o=t[r="$"+r];o?("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):o=t[r]={init:!1,get:!1,set:!1},o[a]=!0}}},K.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===w.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(w.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return i},K.parseMaybeAssign=function(e,t,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var r=!1,i=-1,a=-1;t?(i=t.parenthesizedAssign,a=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new H,r=!0);var o=this.start,s=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,s)),this.type.isAssign){var c=this.startNodeAt(o,s);return c.operator=this.value,c.left=this.type===w.eq?this.toAssignable(u,!1,t):u,r||H.call(t),t.shorthandAssign=-1,this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),a>-1&&(t.trailingComma=a),u},K.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(w.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(w.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return i},K.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},K.parseExprOp=function(e,t,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==w._in)&&a>r){var o=this.type===w.logicalOR||this.type===w.logicalAND,s=this.value;this.next();var u=this.start,c=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,a,i),h=this.buildBinary(t,n,e,l,s,o);return this.parseExprOp(h,t,n,r,i)}return e},K.buildBinary=function(e,t,n,r,i,a){var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},K.parseMaybeUnary=function(e,t){var n,r=this,i=this.start,a=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),s=this.type===w.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),s?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(o,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=r.startNodeAt(i,a);u.operator=r.value,u.prefix=!1,u.argument=n,r.checkLVal(n),r.next(),n=r.finishNode(u,"UpdateExpression")}}return!t&&this.eat(w.starstar)?this.buildBinary(i,a,n,this.parseMaybeUnary(null,!1),"**",!1):n},K.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var a=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===a.type&&(e.parenthesizedAssign>=a.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=a.start&&(e.parenthesizedBind=-1)),a},K.parseSubscripts=function(e,t,n,r){for(var i=this,a=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),o=void 0;;)if((o=i.eat(w.bracketL))||i.eat(w.dot)){var s=i.startNodeAt(t,n);s.object=e,s.property=o?i.parseExpression():i.parseIdent(!0),s.computed=!!o,o&&i.expect(w.bracketR),e=i.finishNode(s,"MemberExpression")}else if(!r&&i.eat(w.parenL)){var u=new H,c=i.yieldPos,l=i.awaitPos;i.yieldPos=0,i.awaitPos=0;var h=i.parseExprList(w.parenR,i.options.ecmaVersion>=8,!1,u);if(a&&!i.canInsertSemicolon()&&i.eat(w.arrow))return i.checkPatternErrors(u,!1),i.checkYieldAwaitInDefaultParams(),i.yieldPos=c,i.awaitPos=l,i.parseArrowExpression(i.startNodeAt(t,n),h,!0);i.checkExpressionErrors(u,!0),i.yieldPos=c||i.yieldPos,i.awaitPos=l||i.awaitPos;var f=i.startNodeAt(t,n);f.callee=e,f.arguments=h,e=i.finishNode(f,"CallExpression")}else{if(i.type!==w.backQuote)return e;var d=i.startNodeAt(t,n);d.tag=e,d.quasi=i.parseTemplate({isTagged:!0}),e=i.finishNode(d,"TaggedTemplateExpression")}},K.parseExprAtom=function(e){var t,n=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),t=this.startNode(),this.next(),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(t,"Super");case w._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case w.name:var r=this.start,i=this.startLoc,a=this.containsEsc,o=this.parseIdent(this.type!==w.name);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(r,i),!1,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===w.name&&!a)return o=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[o],!0)}return o;case w.regexp:var s=this.value;return(t=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},t;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(t=this.startNode()).value=this.type===w._null?null:this.type===w._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case w.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case w.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(w.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case w.braceL:return this.parseObj(!1,e);case w._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();default:this.unexpected()}},K.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},K.parseParenExpression=function(){this.expect(w.parenL);var e=this.parseExpression();return this.expect(w.parenR),e},K.parseParenAndDistinguishExpression=function(e){var t,n=this,r=this.start,i=this.startLoc,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,s=this.start,u=this.startLoc,c=[],l=!0,h=!1,f=new H,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(l?l=!1:n.expect(w.comma),a&&n.afterTrailingComma(w.parenR,!0)){h=!0;break}if(n.type===w.ellipsis){o=n.start,c.push(n.parseParenItem(n.parseRestBinding())),n.type===w.comma&&n.raise(n.start,"Comma is not permitted after the rest element");break}c.push(n.parseMaybeAssign(!1,f,n.parseParenItem))}var g=this.start,v=this.startLoc;if(this.expect(w.parenR),e&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(r,i,c);c.length&&!h||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,c.length>1?((t=this.startNodeAt(s,u)).expressions=c,this.finishNodeAt(t,"SequenceExpression",g,v)):t=c[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,i);return m.expression=t,this.finishNode(m,"ParenthesizedExpression")}return t},K.parseParenItem=function(e){return e},K.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var X=[];K.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(w.parenL)?e.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):e.arguments=X,this.finishNode(e,"NewExpression")},K.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===w.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===w.backQuote,this.finishNode(n,"TemplateElement")},K.parseTemplate=function(e){var t=this;void 0===e&&(e={});var n=e.isTagged;void 0===n&&(n=!1);var r=this.startNode();this.next(),r.expressions=[];var i=this.parseTemplateElement({isTagged:n});for(r.quasis=[i];!i.tail;)t.type===w.eof&&t.raise(t.pos,"Unterminated template literal"),t.expect(w.dollarBraceL),r.expressions.push(t.parseExpression()),t.expect(w.braceR),r.quasis.push(i=t.parseTemplateElement({isTagged:n}));return this.next(),this.finishNode(r,"TemplateLiteral")},K.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!k.test(this.input.slice(this.lastTokEnd,this.start))},K.parseObj=function(e,t){var n=this,r=this.startNode(),i=!0,a={};for(r.properties=[],this.next();!this.eat(w.braceR);){if(i)i=!1;else if(n.expect(w.comma),n.afterTrailingComma(w.braceR))break;var o=n.parseProperty(e,t);e||n.checkPropClash(o,a,t),r.properties.push(o)}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},K.parseProperty=function(e,t){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===w.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,t),this.type===w.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||t)&&(i=this.start,a=this.startLoc),e||(n=this.eat(w.star)));var s=this.containsEsc;return this.parsePropertyName(o),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(o,t)):r=!1,this.parsePropertyValue(o,e,n,r,i,a,t,s),this.finishNode(o,"Property")},K.parsePropertyValue=function(e,t,n,r,i,a,o,s){if((n||r)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===w.comma||this.type===w.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,a,e.key):this.type===w.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,a,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},K.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(w.bracketR),e.key;e.computed=!1}return e.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(!0)},K.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},K.parseMethod=function(e,t){var n=this.startNode(),r=this.inGenerator,i=this.inAsync,a=this.yieldPos,o=this.awaitPos,s=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(w.parenL),n.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=r,this.inAsync=i,this.yieldPos=a,this.awaitPos=o,this.inFunction=s,this.finishNode(n,"FunctionExpression")},K.parseArrowExpression=function(e,t,n){var r=this.inGenerator,i=this.inAsync,a=this.yieldPos,o=this.awaitPos,s=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=r,this.inAsync=i,this.yieldPos=a,this.awaitPos=o,this.inFunction=s,this.finishNode(e,"ArrowFunctionExpression")},K.parseFunctionBody=function(e,t){var n=t&&this.type!==w.braceL,r=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);r&&!a||(i=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,"none"),this.strict=r},K.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},K.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,"var",t?null:n)}},K.parseExprList=function(e,t,n,r){for(var i=this,a=[],o=!0;!this.eat(e);){if(o)o=!1;else if(i.expect(w.comma),t&&i.afterTrailingComma(e))break;var s=void 0;n&&i.type===w.comma?s=null:i.type===w.ellipsis?(s=i.parseSpread(r),r&&i.type===w.comma&&r.trailingComma<0&&(r.trailingComma=i.start)):s=i.parseMaybeAssign(!1,r),a.push(s)}return a},K.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.isKeyword(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},K.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===w.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},K.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(w.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},K.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var Q=F.prototype;Q.raise=function(e,t){var n=B(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Q.raiseRecoverable=Q.raise,Q.curPosition=function(){if(this.options.locations)return new P(this.curLine,this.pos-this.lineStart)};var J=F.prototype,$=Object.assign||function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var a=i[r];for(var o in a)L(a,o)&&(e[o]=a[o])}return e};J.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},J.exitFunctionScope=function(){this.scopeStack.pop()},J.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),$(t.parentLexical,e.lexical,e.parentLexical)},J.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];$(t.childVar,e.var,e.childVar)},J.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!L(t.lexical,e)&&!L(t.parentLexical,e)},J.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!L(t.lexical,e)&&!L(t.var,e)&&!L(t.childVar,e)},J.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1].var[e]=!0},J.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0};var ee=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new D(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},te=F.prototype;function ne(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}te.startNode=function(){return new ee(this,this.start,this.startLoc)},te.startNodeAt=function(e,t){return new ee(this,e,t)},te.finishNode=function(e,t){return ne.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},te.finishNodeAt=function(e,t,n,r){return ne.call(this,e,t,n,r)};var re=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},ie={b_stat:new re("{",!1),b_expr:new re("{",!0),b_tmpl:new re("${",!1),p_stat:new re("(",!1),p_expr:new re("(",!0),q_tmpl:new re("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new re("function",!1),f_expr:new re("function",!0),f_expr_gen:new re("function",!0,!1,null,!0),f_gen:new re("function",!1,!1,null,!0)},ae=F.prototype;ae.initialContext=function(){return[ie.b_stat]},ae.braceIsBlock=function(e){var t=this.curContext();return t===ie.f_expr||t===ie.f_stat||(e!==w.colon||t!==ie.b_stat&&t!==ie.b_expr?e===w._return||e===w.name&&this.exprAllowed?k.test(this.input.slice(this.lastTokEnd,this.start)):e===w._else||e===w.semi||e===w.eof||e===w.parenR||e===w.arrow||(e===w.braceL?t===ie.b_stat:e!==w._var&&e!==w.name&&!this.exprAllowed):!t.isExpr)},ae.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},ae.updateContext=function(e){var t,n=this.type;n.keyword&&e===w.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===ie.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ie.b_stat:ie.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(ie.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(e){var t=e===w._if||e===w._for||e===w._with||e===w._while;this.context.push(t?ie.p_stat:ie.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(e){e.beforeExpr&&e!==w.semi&&e!==w._else&&(e!==w.colon&&e!==w.braceL||this.curContext()!==ie.b_stat)?this.context.push(ie.f_expr):this.context.push(ie.f_stat),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===ie.q_tmpl?this.context.pop():this.context.push(ie.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(e){if(e===w._function){var t=this.context.length-1;this.context[t]===ie.f_expr?this.context[t]=ie.f_expr_gen:this.context[t]=ie.f_gen}this.exprAllowed=!0},w.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==w.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var oe={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(oe.$LONE,oe.General_Category),oe.gc=oe.General_Category,oe.sc=oe.Script_Extensions=oe.scx=oe.Script;var se=F.prototype,ue=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ce(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function le(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function he(e){return e>=65&&e<=90||e>=97&&e<=122}function fe(e){return he(e)||95===e}function de(e){return fe(e)||pe(e)}function pe(e){return e>=48&&e<=57}function ge(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function ve(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function me(e){return e>=48&&e<=55}ue.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ue.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},ue.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);if(!this.switchU||r<=55295||r>=57344||e+1>=n)return r;var i=t.charCodeAt(e+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},ue.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r,i=t.charCodeAt(e);return!this.switchU||i<=55295||i>=57344||e+1>=n||(r=t.charCodeAt(e+1))<56320||r>57343?e+1:e+2},ue.prototype.current=function(){return this.at(this.pos)},ue.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ue.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ue.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},se.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},se.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},se.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},se.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},se.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},se.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},se.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},se.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},se.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},se.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},se.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},se.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},se.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},se.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},se.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},se.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},se.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!le(t)&&(e.lastIntValue=t,e.advance(),!0)},se.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!le(n);)e.advance();return e.pos!==t},se.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},se.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},se.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},se.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ce(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ce(e.lastIntValue);return!0}return!1},se.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return p(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},se.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return g(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},se.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},se.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},se.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},se.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},se.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},se.regexp_eatZero=function(e){return 48===e.current()&&!pe(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},se.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},se.regexp_eatControlLetter=function(e){var t=e.current();return!!he(t)&&(e.lastIntValue=t%32,e.advance(),!0)},se.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=1024*(r-55296)+(a-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(t=e.lastIntValue)>=0&&t<=1114111)return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},se.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},se.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},se.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},se.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},se.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){oe.hasOwnProperty(t)&&-1!==oe[t].indexOf(n)||e.raise("Invalid property name")},se.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===oe.$LONE.indexOf(t)&&e.raise("Invalid property name")},se.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";fe(t=e.current());)e.lastStringValue+=ce(t),e.advance();return""!==e.lastStringValue},se.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";de(t=e.current());)e.lastStringValue+=ce(t),e.advance();return""!==e.lastStringValue},se.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},se.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},se.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},se.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||me(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},se.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},se.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!pe(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},se.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},se.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;pe(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},se.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;ge(n=e.current());)e.lastIntValue=16*e.lastIntValue+ve(n),e.advance();return e.pos!==t},se.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},se.regexp_eatOctalDigit=function(e){var t=e.current();return me(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},se.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!ge(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+ve(i),e.advance()}return!0};var ye=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new D(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},_e=F.prototype;function be(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}_e.next=function(){this.options.onToken&&this.options.onToken(new ye(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},_e.getToken=function(){return this.next(),new ye(this)},"undefined"!==typeof Symbol&&(_e[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===w.eof,value:t}}}}),_e.curContext=function(){return this.context[this.context.length-1]},_e.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},_e.readToken=function(e){return p(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},_e.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},_e.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(S.lastIndex=n;(e=S.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},_e.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!C(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},_e.skipSpace=function(){var e=this;e:for(;this.pos<this.input.length;){var t=e.input.charCodeAt(e.pos);switch(t){case 32:case 160:++e.pos;break;case 13:10===e.input.charCodeAt(e.pos+1)&&++e.pos;case 10:case 8232:case 8233:++e.pos,e.options.locations&&(++e.curLine,e.lineStart=e.pos);break;case 47:switch(e.input.charCodeAt(e.pos+1)){case 42:e.skipBlockComment();break;case 47:e.skipLineComment(2);break;default:break e}break;default:if(!(t>8&&t<14||t>=5760&&M.test(String.fromCharCode(t))))break e;++e.pos}}},_e.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},_e.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},_e.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},_e.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=w.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(w.assign,n+1):this.finishOp(r,n)},_e.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?w.logicalOR:w.logicalAND,2):61===t?this.finishOp(w.assign,2):this.finishOp(124===e?w.bitwiseOR:w.bitwiseAND,1)},_e.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},_e.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!k.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},_e.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(w.assign,n+1):this.finishOp(w.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(w.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},_e.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===e?w.eq:w.prefix,1)},_e.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 63:return++this.pos,this.finishToken(w.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+be(e)+"'")},_e.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},_e.readRegexp=function(){for(var e,t,n=this,r=this.pos;;){n.pos>=n.input.length&&n.raise(r,"Unterminated regular expression");var i=n.input.charAt(n.pos);if(k.test(i)&&n.raise(r,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++n.pos}var a=this.input.slice(r,this.pos);++this.pos;var o=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(o);var u=this.regexpState||(this.regexpState=new ue(this));u.reset(r,a,s),this.validateRegExpFlags(u),this.validateRegExpPattern(u);var c=null;try{c=new RegExp(a,s)}catch(l){}return this.finishToken(w.regexp,{pattern:a,flags:s,value:c})},_e.readInt=function(e,t){for(var n=this,r=this.pos,i=0,a=0,o=null==t?1/0:t;a<o;++a){var s=n.input.charCodeAt(n.pos),u=void 0;if((u=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;++n.pos,i=i*e+u}return this.pos===r||null!=t&&this.pos-r!==t?null:i},_e.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,t)},_e.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),a=n?parseInt(i,8):parseFloat(i);return this.finishToken(w.num,a)},_e.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},_e.readString=function(e){for(var t=this,n="",r=++this.pos;;){t.pos>=t.input.length&&t.raise(t.start,"Unterminated string constant");var i=t.input.charCodeAt(t.pos);if(i===e)break;92===i?(n+=t.input.slice(r,t.pos),n+=t.readEscapedChar(!1),r=t.pos):(C(i,t.options.ecmaVersion>=10)&&t.raise(t.start,"Unterminated string constant"),++t.pos)}return n+=this.input.slice(r,this.pos++),this.finishToken(w.string,n)};var xe={};_e.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==xe)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},_e.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw xe;this.raise(e,t)},_e.readTmplToken=function(){for(var e=this,t="",n=this.pos;;){e.pos>=e.input.length&&e.raise(e.start,"Unterminated template");var r=e.input.charCodeAt(e.pos);if(96===r||36===r&&123===e.input.charCodeAt(e.pos+1))return e.pos!==e.start||e.type!==w.template&&e.type!==w.invalidTemplate?(t+=e.input.slice(n,e.pos),e.finishToken(w.template,t)):36===r?(e.pos+=2,e.finishToken(w.dollarBraceL)):(++e.pos,e.finishToken(w.backQuote));if(92===r)t+=e.input.slice(n,e.pos),t+=e.readEscapedChar(!0),n=e.pos;else if(C(r)){switch(t+=e.input.slice(n,e.pos),++e.pos,r){case 13:10===e.input.charCodeAt(e.pos)&&++e.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}e.options.locations&&(++e.curLine,e.lineStart=e.pos),n=e.pos}else++e.pos}},_e.readInvalidTemplateToken=function(){for(var e=this;this.pos<this.input.length;this.pos++)switch(e.input[e.pos]){case"\\":++e.pos;break;case"$":if("{"!==e.input[e.pos+1])break;case"`":return e.finishToken(w.invalidTemplate,e.input.slice(e.start,e.pos))}this.raise(this.start,"Unterminated template")},_e.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return be(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(t)}},_e.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},_e.readWord1=function(){var e=this;this.containsEsc=!1;for(var t="",n=!0,r=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var a=e.fullCharCodeAtPos();if(g(a,i))e.pos+=a<=65535?1:2;else{if(92!==a)break;e.containsEsc=!0,t+=e.input.slice(r,e.pos);var o=e.pos;117!==e.input.charCodeAt(++e.pos)&&e.invalidStringToken(e.pos,"Expecting Unicode escape sequence \\uXXXX"),++e.pos;var s=e.readCodePoint();(n?p:g)(s,i)||e.invalidStringToken(o,"Invalid Unicode escape"),t+=be(s),r=e.pos}n=!1}return t+this.input.slice(r,this.pos)},_e.readWord=function(){var e=this.readWord1(),t=w.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=b[e]),this.finishToken(t,e)};var we,ke,Se,Ce="5.7.3";function Me(e,t){return new F(t,e).parse()}function Ae(e,t,n){var r=new F(n,e,t);return r.nextToken(),r.parseExpression()}function Ee(e,t){return new F(t,e)}function Te(e,t,n){we=e,ke=t,Se=n}},"../../../node_modules/axios/index.js":function(e,t,n){e.exports=n("../../../node_modules/axios/lib/axios.js")},"../../../node_modules/axios/lib/adapters/xhr.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/core/settle.js"),a=n("../../../node_modules/axios/lib/helpers/buildURL.js"),o=n("../../../node_modules/axios/lib/helpers/parseHeaders.js"),s=n("../../../node_modules/axios/lib/helpers/isURLSameOrigin.js"),u=n("../../../node_modules/axios/lib/core/createError.js");e.exports=function(e){return new Promise((function(t,c){var l=e.data,h=e.headers;r.isFormData(l)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",p=e.auth.password||"";h.Authorization="Basic "+btoa(d+":"+p)}if(f.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?o(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,c,r),f=null}},f.onerror=function(){c(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=n("../../../node_modules/axios/lib/helpers/cookies.js"),v=(e.withCredentials||s(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}if("setRequestHeader"in f&&r.forEach(h,(function(e,t){"undefined"===typeof l&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(m){if("json"!==e.responseType)throw m}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),c(e),f=null)})),void 0===l&&(l=null),f.send(l)}))}},"../../../node_modules/axios/lib/axios.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/helpers/bind.js"),a=n("../../../node_modules/axios/lib/core/Axios.js"),o=n("../../../node_modules/axios/lib/defaults.js");function s(e){var t=new a(e),n=i(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var u=s(o);u.Axios=a,u.create=function(e){return s(r.merge(o,e))},u.Cancel=n("../../../node_modules/axios/lib/cancel/Cancel.js"),u.CancelToken=n("../../../node_modules/axios/lib/cancel/CancelToken.js"),u.isCancel=n("../../../node_modules/axios/lib/cancel/isCancel.js"),u.all=function(e){return Promise.all(e)},u.spread=n("../../../node_modules/axios/lib/helpers/spread.js"),e.exports=u,e.exports.default=u},"../../../node_modules/axios/lib/cancel/Cancel.js":function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},"../../../node_modules/axios/lib/cancel/CancelToken.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/cancel/Cancel.js");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},"../../../node_modules/axios/lib/cancel/isCancel.js":function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"../../../node_modules/axios/lib/core/Axios.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/defaults.js"),i=n("../../../node_modules/axios/lib/utils.js"),a=n("../../../node_modules/axios/lib/core/InterceptorManager.js"),o=n("../../../node_modules/axios/lib/core/dispatchRequest.js");function s(e){this.defaults=e,this.interceptors={request:new a,response:new a}}s.prototype.request=function(e){"string"===typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],(function(e){s.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){s.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=s},"../../../node_modules/axios/lib/core/InterceptorManager.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},"../../../node_modules/axios/lib/core/createError.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/core/enhanceError.js");e.exports=function(e,t,n,i,a){var o=new Error(e);return r(o,t,n,i,a)}},"../../../node_modules/axios/lib/core/dispatchRequest.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/core/transformData.js"),a=n("../../../node_modules/axios/lib/cancel/isCancel.js"),o=n("../../../node_modules/axios/lib/defaults.js"),s=n("../../../node_modules/axios/lib/helpers/isAbsoluteURL.js"),u=n("../../../node_modules/axios/lib/helpers/combineURLs.js");function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!s(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(c(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},"../../../node_modules/axios/lib/core/enhanceError.js":function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},"../../../node_modules/axios/lib/core/settle.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/core/createError.js");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},"../../../node_modules/axios/lib/core/transformData.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},"../../../node_modules/axios/lib/defaults.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/helpers/normalizeHeaderName.js"),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process)&&(e=n("../../../node_modules/axios/lib/adapters/xhr.js")),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){s.headers[e]=r.merge(a)})),e.exports=s},"../../../node_modules/axios/lib/helpers/bind.js":function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"../../../node_modules/axios/lib/helpers/buildURL.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js");function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}return a&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},"../../../node_modules/axios/lib/helpers/combineURLs.js":function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"../../../node_modules/axios/lib/helpers/cookies.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},"../../../node_modules/axios/lib/helpers/isAbsoluteURL.js":function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},"../../../node_modules/axios/lib/helpers/isURLSameOrigin.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},"../../../node_modules/axios/lib/helpers/normalizeHeaderName.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},"../../../node_modules/axios/lib/helpers/parseHeaders.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},"../../../node_modules/axios/lib/helpers/spread.js":function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"../../../node_modules/axios/lib/utils.js":function(e,t,n){"use strict";var r=n("../../../node_modules/axios/lib/helpers/bind.js"),i=n("../../../node_modules/is-buffer/index.js"),a=Object.prototype.toString;function o(e){return"[object Array]"===a.call(e)}function s(e){return null!==e&&"object"===typeof e}function u(e){return"[object Function]"===a.call(e)}function c(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isUndefined:function(e){return"undefined"===typeof e},isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:c,merge:function e(){var t={};function n(n,r){"object"===typeof t[r]&&"object"===typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},"../../3D/src/Components/AR/AndroidAR.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{AndroidAR:function(){return a}});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"openSceneViewer",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this._fallbackInvoked){var i=self.location.toString(),a=new URL(i),o=new URL(e),s=new URLSearchParams(o.search);if(a.hash=this._noArViewerSigil,s.set("mode","ar_preferred"),s.has("disable_occlusion")||s.set("disable_occlusion","true"),r||s.set("resizable","false"),s.has("sound")){var u=new URL(s.get("sound"),i);s.set("sound",u.toString())}if(s.has("link")){var c=new URL(s.get("link"),i);s.set("link",c.toString())}var l="intent://arvr.google.com/scene-viewer/1.0?".concat(s.toString()+"&file="+encodeURIComponent(o.toString()),"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(a.toString()),";end;");console.log(l),self.addEventListener("hashchange",(function(){self.location.hash!==n._noArViewerSigil||n._fallbackInvoked||(n._fallbackInvoked=!0,t&&t(),self.history.back())}),{once:!0}),this._anchor.setAttribute("href",l),this._anchor.setAttribute("target","_blank"),document.body.appendChild(this._anchor),this._anchor.click()}}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(a,"_anchor",document.createElement("a")),i(a,"_linkOrTitle",/(link|title)(=|&)|(\?|&)(link|title)$/),i(a,"_noArViewerSigil","#model-viewer-no-ar-fallback"),i(a,"_fallbackInvoked",!1)},"../../3D/src/Components/ActionExecutor/SceneActionExecutor.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{SceneActionsExecutor:function(){return h}});var r=n("../../3D/src/Components/SceneHelper.ts"),i=n("../../3D/src/Components/Selector/ElementSelector.ts");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_zkModel",null),l(this,"_sceneHelper",null),l(this,"_deviceType",MPlaza.DeviceType.All),l(this,"_meshDesignRefreshRequiredListeners",[]),l(this,"_beginAssetsLoadingListeners",[]),l(this,"_endAssetsLoadingListeners",[]),l(this,"_useMaterialOffloading",!1),l(this,"_prefetchMeshes",!0),l(this,"_prefetchMaterials",!0),this._zkScene=t,this._scene=n,this._sceneHelper=new r.SceneHelper(n),this._elementSelector=new i.ElementSelector,a&&(this._zkModel=a)}var t,n,a;return t=e,n=[{key:"deviceType",get:function(){return this._deviceType},set:function(e){this._deviceType!=e&&(this._deviceType=e)}},{key:"useMaterialOffloading",get:function(){return this._useMaterialOffloading},set:function(e){this._useMaterialOffloading!=e&&(this._useMaterialOffloading=e)}},{key:"prefetchMeshes",get:function(){return this._prefetchMeshes},set:function(e){this._prefetchMeshes!==e&&(this._prefetchMeshes=e)}},{key:"prefetchMaterials",get:function(){return this._prefetchMaterials},set:function(e){this._prefetchMaterials!==e&&(this._prefetchMaterials=e)}},{key:"dispose",value:function(){this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null)}},{key:"addMeshDesignRefreshRequiredListeners",value:function(e){this._meshDesignRefreshRequiredListeners.push(e)}},{key:"fireMeshDesignRefreshRequiredEvent",value:function(e,t){for(var n={meshes:e,effect:t},r=0;r<this._meshDesignRefreshRequiredListeners.length;++r)this._meshDesignRefreshRequiredListeners[r](n)}},{key:"addBeginAssetsLoadingListener",value:function(e){this._beginAssetsLoadingListeners.push(e)}},{key:"fireBeginAssetsLoadingEvent",value:function(){for(var e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()}},{key:"addEndAssetsLoadingListener",value:function(e){this._endAssetsLoadingListeners.push(e)}},{key:"fireEndAssetsLoadingEvent",value:function(){for(var e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()}},{key:"isActionForDevice",value:function(e){var t=e.get("deviceTypes");return t===MPlaza.DeviceType.Any||t===MPlaza.DeviceType.All||(t&this._deviceType)===this._deviceType}},{key:"setupMeshData",value:function(e){e.data||(e.data={filters:{},toShow:e.isVisible})}},{key:"setMeshFilterAsync",value:function(){var e=u(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setupMeshData(t),t.data.filters[n]=r,e.next=4,this.chekMeshVisibilityAsync(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setMeshVisibilityAsync",value:function(){var e=u(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setupMeshData(t),t.data.toShow=n,e.next=4,this.chekMeshVisibilityAsync(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"chekMeshVisibilityAsync",value:function(){var e=u(o().mark((function e(t){var n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t&&t.data&&(n=t.data.toShow))for(i in t.data.filters)n=n&&t.data.filters[i];if(null===n||!this._sceneHelper){e.next=11;break}if(!n){e.next=10;break}if(!(a=this._zkScene.get("rootUrl"))){e.next=8;break}return e.next=8,this._sceneHelper.unsetMeshDummyMaterialAsync(t,a,!0);case 8:return e.next=10,r.SceneHelper.whenMeshIsReadyAsync(t);case 10:this._sceneHelper.showHideMesh(t.id,n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMeshByID",value:function(e){return this._scene.getMeshByID(e)}},{key:"getMaterialByID",value:function(e){return this._scene.getMaterialByID(e)}},{key:"setCameraLocation",value:function(e){var t=this._zkScene.getCameraLocation(e);if(t){var n=new BABYLON.Vector3(t.get("px"),t.get("py"),t.get("pz")),r=new BABYLON.Vector3(t.get("tx"),t.get("ty"),t.get("tz"));this._sceneHelper&&this._sceneHelper.animateCamera(r,n,.5)}}},{key:"adjustCamera",value:function(e){this._sceneHelper&&(void 0!==e&&"boolean"===typeof e?this._sceneHelper.adjustCamera(void 0,void 0,void 0,e):this._sceneHelper.adjustCamera())}},{key:"zoomIn",value:function(){this._sceneHelper&&this._sceneHelper.zoomIn()}},{key:"zoomOut",value:function(){this._sceneHelper&&this._sceneHelper.zoomOut()}},{key:"zoom",value:function(e){this._sceneHelper&&this._sceneHelper.zoom(e)}},{key:"setCameraPivot",value:function(e){if(this._sceneHelper){var t=e?this._scene.getMeshByID(e):null;this._sceneHelper.setCameraPivot(t)}}},{key:"setCameraZoomEnabled",value:function(e){this._sceneHelper&&this._sceneHelper.setZoomEnabled(e)}},{key:"setMeshMaterial",value:function(){var e=u(o().mark((function e(t,n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneHelper){e.next=7;break}return e.next=3,r.SceneHelper.whenAllMaterialTexturesAreReady(t);case 3:i=n.material,Logger.info("Setting material to mesh | mesh: ".concat(n.id," - ").concat(n.name," | material: ").concat(t.id," - ").concat(t.name)),this._sceneHelper.applyMaterial(t,n),this._useMaterialOffloading&&i&&this._sceneHelper.offloadMaterial(i.id);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setSubmeshMaterial",value:function(){var e=u(o().mark((function e(t,n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneHelper){e.next=6;break}return e.next=3,r.SceneHelper.whenAllMaterialTexturesAreReady(t);case 3:a=this._sceneHelper.getSubMeshMaterial(n,i),this._sceneHelper.applyMaterialToSubMesh(t,n,i),this._useMaterialOffloading&&a&&this._sceneHelper.offloadMaterial(a.id);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMaterialFromActionValue",value:function(e){if(this._elementSelector){var t=e.get("value");if(void 0!=t&&null!=t){var n=this._scene.getMaterialByID(t);return n||(n=this._scene.getMaterialByName(t)),n}}return null}},{key:"getDelayedMaterialIDFromAction",value:function(e){if(this._zkScene&&this._scene&&this._elementSelector&&e&&e instanceof MPlaza.AttributeSceneAction&&this._scene.metadata&&this._scene.metadata.delayedMaterials){var t=e.get("value");if(void 0!=t&&null!=t){if(this._scene.metadata.delayedMaterials.hasOwnProperty(t))return t;for(var n in this._scene.metadata.delayedMaterials)if(this._scene.metadata.delayedMaterials[n].name===t)return n}}return null}},{key:"checkDelayedMaterial",value:function(){var e=u(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.getMaterialByID(t))||!this._sceneHelper){e.next=7;break}if(void 0==(r=this._zkScene.get("rootUrl"))||null==r){e.next=7;break}return e.next=6,this._sceneHelper.loadDelayedMaterialAsync(r,t);case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOffloadedMaterialIDFromAction",value:function(e){if(this._zkScene&&this._scene&&this._elementSelector&&e&&e instanceof MPlaza.AttributeSceneAction&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){var t=e.get("value");if(void 0!==t&&null!==t){if(this._scene.metadata.offloadedMaterials.hasOwnProperty(t))return t;for(var n in this._scene.metadata.offloadedMaterials)if(this._scene.metadata.offloadedMaterials[n].name===t)return n}}return null}},{key:"checkOffloadedMaterialAsync",value:function(){var e=u(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.getMaterialByID(t))||!this._sceneHelper){e.next=7;break}if(void 0===(r=this._zkScene.get("rootUrl"))||null===r){e.next=7;break}return e.next=6,this._sceneHelper.loadOffloadedMaterialAsync(r,t);case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDeepMaterialFromActionValueAsync",value:function(){var e=u(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.getMaterialFromActionValue(t))||!this._sceneHelper){e.next=20;break}if(void 0===(r=this._zkScene.get("rootUrl"))||null===r){e.next=20;break}if(!(i=this.getOffloadedMaterialIDFromAction(t))){e.next=13;break}return Logger.info("Requesting offloaded material - id: ",i),e.next=9,this._sceneHelper.loadOffloadedMaterialAsync(r,i);case 9:n=e.sent,Logger.info("Obtained offloaded material - id: ",i),e.next=20;break;case 13:if(!(i=this.getDelayedMaterialIDFromAction(t))){e.next=20;break}return Logger.info("Requesting delayed material - id: ",i),e.next=18,this._sceneHelper.loadDelayedMaterialAsync(r,i);case 18:n=e.sent,Logger.info("Obtained delayed material - id: ",i);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scriptRequiresDelayedLoading",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(this.actionsRequireDelayedLoading(n.actions))return!0}return!1}},{key:"actionsRequireDelayedLoading",value:function(e){for(var t=0;t<e.length;t++)if(this.actionRequiresDelayedLoading(e[t]))return!0;return!1}},{key:"actionRequiresDelayedLoading",value:function(e){if(this._sceneHelper&&e.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh&&"show"===e.get("value")){var t=e.get("selector");if(void 0!==t&&null!==t)for(var n=this._elementSelector.getElements(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Mesh),i=0;i<n.length;i++){var a=n[i];if(a instanceof BABYLON.AbstractMesh&&!a.isVisible){var o=this._sceneHelper.getMeshDelayedMaterialIDs(a),s=this._sceneHelper.getMeshOffloadedMaterialIDs(a);if(o.length>0||s.length>0)return!0;if(r.SceneHelper.meshRequiresDelayedLoading(a))return!0}}}if((e.get("actionTypeID")===MPlaza.SceneActionType.SetMeshMaterial||e.get("actionTypeID")===MPlaza.SceneActionType.SetSubMeshMaterial||e.get("actionTypeID")===MPlaza.SceneActionType.SetMaterialColor||e.get("actionTypeID")===MPlaza.SceneActionType.SetMeshDesignMaterial)&&!this.getMaterialFromActionValue(e)){if(this.getDelayedMaterialIDFromAction(e))return!0;if(this.getOffloadedMaterialIDFromAction(e))return!0}if(e.get("actionTypeID")===MPlaza.SceneActionType.SetMaterialColor){var u=e.get("selector");if(void 0!==u&&null!==u){var c=this._elementSelector.getDelayedElementIDs(this._zkScene,this._scene,null,u,MPlaza.SceneElementType.Material),l=this._elementSelector.getOffloadedElementIDs(this._zkScene,this._scene,null,u,MPlaza.SceneElementType.Material);if(c.length>0||l.length>0)return!0}}return!1}},{key:"getAllMaterialElementsAsync",value:function(){var e=u(o().mark((function e(t){var n,r,i,a,s,u,c,l,h,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector)){e.next=23;break}if(r=this._elementSelector.getMaterialElements(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Material),Array.prototype.push.apply(n,r),i=r.map((function(e){return e.id})),a=this._elementSelector.getDelayedElementIDs(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Material),s=this._elementSelector.getOffloadedElementIDs(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Material),void 0===(u=this._zkScene.get("rootUrl"))||null===u){e.next=23;break}if(c=[],a.forEach((function(e){-1===i.indexOf(e)&&c.push(e)})),!(c.length>0)){e.next=16;break}return e.next=14,this._sceneHelper.loadDelayedMaterialsAsync(u,c);case 14:l=e.sent,Array.prototype.push.apply(n,l);case 16:if(h=[],s.forEach((function(e){-1===i.indexOf(e)&&h.push(e)})),!(h.length>0)){e.next=23;break}return e.next=21,this._sceneHelper.loadOffloadedMaterialsByIDsAsync(u,h);case 21:f=e.sent,Array.prototype.push.apply(n,f);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeScriptAsync",value:function(){var e=u(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.scriptRequiresDelayedLoading(t))&&this.fireBeginAssetsLoadingEvent(),r=0;case 3:if(!(r<t.length)){e.next=10;break}return i=t[r],e.next=7,this.executeActionsAsync(i.attributeID,i.selectedValue,i.actions,!1);case 7:r++,e.next=3;break;case 10:n&&this.fireEndAssetsLoadingEvent();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeActionsAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(u.length>3&&void 0!==u[3])||u[3],!(r.length>0)){e.next=14;break}return a=this.actionsRequireDelayedLoading(r),i&&a&&this.fireBeginAssetsLoadingEvent(),e.next=6,this.checkActionsAssetsAreReadyAsync(r);case 6:s=0;case 7:if(!(s<r.length)){e.next=13;break}return e.next=10,this.executeActionAsync(t,n,r[s]);case 10:s++,e.next=7;break;case 13:i&&a&&this.fireEndAssetsLoadingEvent();case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!r){e.next=42;break}e.t0=r.get("actionTypeID"),e.next=e.t0===MPlaza.SceneActionType.Filter?6:e.t0===MPlaza.SceneActionType.ShowHideMesh?9:e.t0===MPlaza.SceneActionType.SetMeshMaterial?12:e.t0===MPlaza.SceneActionType.SetSubMeshMaterial?15:e.t0===MPlaza.SceneActionType.SetMaterialColor?18:e.t0===MPlaza.SceneActionType.SetCameraLocation?21:e.t0===MPlaza.SceneActionType.AdjustCamera?24:e.t0===MPlaza.SceneActionType.SetCameraPivot?27:e.t0===MPlaza.SceneActionType.ResetCameraPivot?30:e.t0===MPlaza.SceneActionType.EnableDiableZoom?33:e.t0===MPlaza.SceneActionType.SetMeshDesignMaterial?36:e.t0===MPlaza.SceneActionType.SetMeshDesignEffect?39:42;break;case 6:return e.next=8,this.executeFilterActionAsync(t,n,r);case 8:case 11:case 14:case 17:case 20:case 23:case 26:case 29:case 32:case 35:case 38:case 41:return e.abrupt("break",42);case 9:return e.next=11,this.executeShowHideActionAsync(t,n,r);case 12:return e.next=14,this.executeSetMeshMaterialActionAsync(t,n,r);case 15:return e.next=17,this.executeSetSubMeshMaterialActionAsync(t,n,r);case 18:return e.next=20,this.executeSetMaterialColorActionAsync(t,n,r);case 21:return e.next=23,this.executeSetCameraLocationActionAsync(t,n,r);case 24:return e.next=26,this.executeAdjustCameraActionAsync(t,n,r);case 27:return e.next=29,this.executeSetCameraPivotActionAsync(t,n,r);case 30:return e.next=32,this.executeResetCameraPivotActionAsync(t,n,r);case 33:return e.next=35,this.executeEnableDisableZoomActionAsync(t,n,r);case 36:return e.next=38,this.executeSetMeshDesignMaterialActionAsync(t,n,r);case 39:return e.next=41,this.executeSetMeshDesignEffectActionAsync(t,n,r);case 42:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeFilterActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(null!==t&&this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=21;break}if(void 0===(i=r.get("selector"))||null===i){e.next=21;break}a=this._elementSelector.getYesNoElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh),s="enable"===r.get("value"),u=0;case 8:if(!(u<a.yes.length)){e.next=14;break}return e.next=11,this.setMeshFilterAsync(a.yes[u],t,s);case 11:u++,e.next=8;break;case 14:c=0;case 15:if(!(c<a.no.length)){e.next=21;break}return e.next=18,this.setMeshFilterAsync(a.yes[c],t,!s);case 18:c++,e.next=15;break;case 21:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeShowHideActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=14;break}if(void 0===(i=r.get("selector"))||null===i){e.next=14;break}a=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh),s="show"===r.get("value"),u=0;case 8:if(!(u<a.length)){e.next=14;break}return e.next=11,this.setMeshVisibilityAsync(a[u],s);case 11:u++,e.next=8;break;case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeSetMeshMaterialActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=17;break}if(void 0===(i=r.get("selector"))||null===i){e.next=17;break}return a=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh),e.next=8,this.getDeepMaterialFromActionValueAsync(r);case 8:if(!(s=e.sent)){e.next=17;break}u=0;case 11:if(!(u<a.length)){e.next=17;break}return e.next=14,this.setMeshMaterial(s,a[u]);case 14:u++,e.next=11;break;case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeSetSubMeshMaterialActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=17;break}if(void 0===(i=r.get("selector"))||null===i){e.next=17;break}return a=this._elementSelector.getSubMeshElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.SubMesh),e.next=8,this.getDeepMaterialFromActionValueAsync(r);case 8:if(!(s=e.sent)){e.next=17;break}u=0;case 11:if(!(u<a.length)){e.next=17;break}return e.next=14,this.setSubmeshMaterial(s,null,a[u]);case 14:u++,e.next=11;break;case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeSetMaterialColorActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=11;break}if(void 0===(i=r.get("selector"))||null===i){e.next=11;break}return e.next=7,this.getAllMaterialElementsAsync(i);case 7:if(a=e.sent,s=r.get("propertyName"),u=r.get("value"),s&&u)for(n&&(u=u.replace(/%value%/g,n)),c=BABYLON.Color3.FromHexString(u),l=0;l<a.length;l++)this._sceneHelper.changeMaterialColor(a[l],s,c);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeSetCameraLocationActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(this._zkScene&&this._scene&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=16;break}if(i=r.get("value"),a=null,!i){e.next=15;break}s=0;case 7:if(!(s<this._zkScene.get("cameraLocations").length)){e.next=15;break}if((u=this._zkScene.get("cameraLocations").at(s)).get("locationID")!==i&&u.get("name")!==i){e.next=12;break}return a=u,e.abrupt("break",15);case 12:s++,e.next=7;break;case 15:null!==a&&this.setCameraLocation(a.get("locationID"));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeAdjustCameraActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction&&this._sceneHelper.adjustCamera();case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeSetCameraPivotActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(this._zkScene&&this._scene&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=16;break}if(i=r.get("value"),a=null,!i){e.next=15;break}s=0;case 7:if(!(s<this._scene.meshes.length)){e.next=15;break}if((u=this._scene.meshes[s]).id!==i&&u.name!==i){e.next=12;break}return a=u,e.abrupt("break",15);case 12:s++,e.next=7;break;case 15:a&&this.setCameraPivot(a.id);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeResetCameraPivotActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:this.setCameraPivot(null);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeEnableDisableZoomActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:this._zkScene&&this._scene&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction&&(i="enable"===r.get("value"),this.setCameraZoomEnabled(i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeSetMeshDesignMaterialActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._zkScene&&this._scene&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=8;break}if(void 0==(i=r.get("selector"))||null==i){e.next=8;break}return a=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh),e.next=6,this.getDeepMaterialFromActionValueAsync(r);case 6:if(s=e.sent){for(u=0;u<a.length;u++)(c=a[u]).metadata=c.metadata||{},c.metadata.designMaterialID=s.id;this.fireMeshDesignRefreshRequiredEvent(a,null)}case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeSetMeshDesignEffectActionAsync",value:function(){var e=u(o().mark((function e(t,n,r){var i,a,s,u,c,l,h,f,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActionForDevice(r)){e.next=2;break}return e.abrupt("return");case 2:if(!(this._zkScene&&this._scene&&this._elementSelector&&r&&r instanceof MPlaza.AttributeSceneAction)){e.next=41;break}if(void 0==(i=r.get("selector"))||null==i){e.next=41;break}if(a=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh),s=r.get("value"),u=null,void 0==s||null==s||!this._zkModel){e.next=29;break}c=0;case 10:if(!(c<this._zkModel.get("scenes").length)){e.next=29;break}if(!(l=this._zkModel.get("scenes").at(c)).get("isDefault")){e.next=24;break}if(!(h=l.get("meshDesignEffects"))){e.next=24;break}f=0;case 16:if(!(f<h.length)){e.next=24;break}if((d=h.at(f)).get("effectID")!==s&&d.get("name")!==s){e.next=21;break}return u=d,e.abrupt("break",24);case 21:f++,e.next=16;break;case 24:if(!u){e.next=26;break}return e.abrupt("break",29);case 26:c++,e.next=10;break;case 29:if(!u){e.next=40;break}if(!(p=u.get("materialID"))){e.next=40;break}return e.next=35,this.checkOffloadedMaterialAsync(p);case 35:if(e.sent){e.next=40;break}return e.next=39,this.checkDelayedMaterial(p);case 39:e.sent;case 40:this.fireMeshDesignRefreshRequiredEvent(a,u);case 41:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"prefetchMeshesForUnselectedOptionsAsync",value:function(){var e=u(o().mark((function e(t){var n,r,i,a,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._zkScene&&this._scene&&this._elementSelector&&this._sceneHelper&&this._prefetchMeshes)){e.next=24;break}n=0;case 2:if(!(n<t.length)){e.next=24;break}if(!((r=t[n])&&r instanceof MPlaza.AttributeSceneAction)){e.next=21;break}if(r.get("actionTypeID")!==MPlaza.SceneActionType.ShowHideMesh||"show"!=r.get("value")){e.next=21;break}if(void 0==(i=r.get("selector"))||null==i){e.next=21;break}a=this._elementSelector.getElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh),s=0;case 10:if(!(s<a.length)){e.next=21;break}if(!((u=a[s])instanceof BABYLON.AbstractMesh)||u.isVisible){e.next=18;break}if(this._sceneHelper.checkDelayState(u),!(c=u.material)){e.next=18;break}return e.next=18,this._sceneHelper.prefetchTexturesForMaterialAsync(c);case 18:s++,e.next=10;break;case 21:n++,e.next=2;break;case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkActionsAssetsAreReadyAsync",value:function(){var e=u(o().mark((function e(t){var n,i,a,s,u,c,l,h,f,d,p,g,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._zkScene&&this._scene&&this._elementSelector&&this._sceneHelper)){e.next=52;break}n=0;case 2:if(!(n<t.length)){e.next=33;break}if(i=t[n],a=[],!(i&&i instanceof MPlaza.AttributeSceneAction)){e.next=28;break}if(i.get("actionTypeID")!==MPlaza.SceneActionType.ShowHideMesh||"show"!==i.get("value")){e.next=28;break}if(void 0===(s=i.get("selector"))||null===s){e.next=28;break}u=this._elementSelector.getElements(this._zkScene,this._scene,null,s,MPlaza.SceneElementType.Mesh),c=0;case 11:if(!(c<u.length)){e.next=28;break}if(!((l=u[c])instanceof BABYLON.AbstractMesh)||l.isVisible){e.next=25;break}if(!(h=this._zkScene.get("rootUrl"))){e.next=24;break}if(f=this._sceneHelper.getMeshDelayedMaterialIDs(l),d=this._sceneHelper.getMeshOffloadedMaterialIDs(l),!(f.length>0)){e.next=21;break}return e.next=21,this._sceneHelper.loadDelayedMaterialsAsync(h,f);case 21:if(!(d.length>0)){e.next=24;break}return e.next=24,this._sceneHelper.loadOffloadedMaterialsByIDsAsync(h,d);case 24:a.push(l);case 25:c++,e.next=11;break;case 28:return e.next=30,r.SceneHelper.whenAllMeshesAreReadyAsync(a);case 30:n++,e.next=2;break;case 33:p=0;case 34:if(!(p<t.length)){e.next=52;break}if(!((g=t[p])&&g instanceof MPlaza.AttributeSceneAction)){e.next=49;break}if(g.get("actionTypeID")!==MPlaza.SceneActionType.SetMeshMaterial&&g.get("actionTypeID")!==MPlaza.SceneActionType.SetSubMeshMaterial){e.next=43;break}if(this.getMaterialFromActionValue(g)){e.next=43;break}return e.next=42,this.getDeepMaterialFromActionValueAsync(g);case 42:e.sent;case 43:if(g.get("actionTypeID")!==MPlaza.SceneActionType.SetMaterialColor){e.next=49;break}if(void 0===(v=g.get("selector"))||null===v){e.next=49;break}return e.next=48,this.getAllMaterialElementsAsync(v);case 48:e.sent;case 49:p++,e.next=34;break;case 52:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prefetchDataForUnselectedOptionsAsync",value:function(){var e=u(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],n&&c(t.prototype,n),a&&c(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/CollapseExplode/MeshLocationsManager.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{MeshLocationsManager:function(){return l}});var r=n("../../3D/src/Components/SceneHelper.ts");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function o(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_zkScene",null),c(this,"_scene",null),c(this,"_sceneHelper",null),c(this,"_meshLocationCache",{}),c(this,"_cameraAnimationCompletedListeners",[]),c(this,"_meshAnimationCompletedListeners",[]),c(this,"_beforeSaveMeshLocationListeners",[]),c(this,"_afterSaveMeshLocationListeners",[])}var t,n,i;return t=e,n=[{key:"dispose",value:function(){for(;this._cameraAnimationCompletedListeners.length>0;)this._cameraAnimationCompletedListeners.pop();for(;this._meshAnimationCompletedListeners.length>0;)this._meshAnimationCompletedListeners.pop();for(;this._beforeSaveMeshLocationListeners.length>0;)this._beforeSaveMeshLocationListeners.pop();for(;this._afterSaveMeshLocationListeners.length>0;)this._afterSaveMeshLocationListeners.pop();this.disposeSceneHelper()}},{key:"setScene",value:function(e){this._scene=e,this.resetSceneHelper(),this.resetCache()}},{key:"setModel",value:function(e){this._zkScene=e,this.resetCache()}},{key:"setModelAndScene",value:function(e,t){this._zkScene=e,this._scene=t,this.resetSceneHelper(),this.resetCache()}},{key:"resetCache",value:function(){this._meshLocationCache={}}},{key:"invalidateCache",value:function(e){this._meshLocationCache&&delete this._meshLocationCache[e]}},{key:"disposeSceneHelper",value:function(){this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null)}},{key:"resetSceneHelper",value:function(){this.disposeSceneHelper(),this._scene&&(this._sceneHelper=new r.SceneHelper(this._scene))}},{key:"clearMeshLocations",value:function(){if(this._zkScene)for(var e=this._zkScene.get("meshLocations");e.length>0;)e.remove(e.at(0))}},{key:"setMeshLocationByID",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._zkScene||!this._scene){e.next=5;break}if(!(n=this._zkScene.getMeshLocation(t))){e.next=5;break}return e.next=5,this.setMeshLocation(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMeshLocation",value:function(){var e=s(a().mark((function e(t){var n,r,i,o,s,u,c,l,h,f,d,p,g,v,m,y,_,b,x,w,k=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._zkScene&&this._scene&&this._sceneHelper)){e.next=9;break}if(r=!0,t)if(i=t.get("locationID"),r=t.get("adjustCamera"),this._meshLocationCache.hasOwnProperty(i))n=this._meshLocationCache[i];else{if(o=t.get("data"),s=null,"string"===typeof o){for(u=window.atob(o),c=u.length,l=new Uint8Array(c),h=0;h<c;h++)l[h]=u.charCodeAt(h);f=l.buffer,s=new Uint8Array(f)}else"[object Array]"===Object.prototype.toString.call(o)&&(s=Uint8Array.from(o));if(null!=s&&(d=LZString.decompressFromUint8Array(s),n=JSON.parse(d))){for(p in n)(g=n[p]).p&&(g.p=new BABYLON.Vector3(g.p.x,g.p.y,g.p.z)),g.rE&&(g.rE=new BABYLON.Vector3(g.rE.x,g.rE.y,g.rE.z)),g.rQ&&(g.rQ=new BABYLON.Quaternion(g.rQ.x,g.rQ.y,g.rQ.z,g.rQ.w)),g.s&&(g.s=new BABYLON.Vector3(g.s.x,g.s.y,g.s.z));this._meshLocationCache[i]=n}}if(!n){e.next=9;break}for(v=[],r&&n.hasOwnProperty("wemin")&&n.hasOwnProperty("wemax")&&(m={min:new BABYLON.Vector3(n.wemin.x,n.wemin.y,n.wemin.z),max:new BABYLON.Vector3(n.wemax.x,n.wemax.y,n.wemax.z)},(y=this._sceneHelper.camera)&&y instanceof BABYLON.ArcRotateCamera&&(y.upperRadiusLimit=null,_=this._sceneHelper.calculateCameraRadius(m),(b=this._sceneHelper.getWorldCenter(m))&&(this._sceneHelper.setCameraRadiusParameters(_),v.push(new Promise((function(e){y&&y instanceof BABYLON.ArcRotateCamera&&k._sceneHelper.animateCameraToFinalParamters(y.alpha,y.beta,_,b,1,(function(){k._sceneHelper&&(k._sceneHelper.setupCameraLimits(m),k.fireCameraAnimationCompletedEvent(),e())}))})))))),x=0;x<this._scene.meshes.length;x++)w=this._scene.meshes[x],p=w.id,n.hasOwnProperty(p)&&(g=n[p],v.push(new Promise((function(e){k._sceneHelper.animateMeshToFinalParameters(w,g.p,g.rE,g.rQ,g.s,1,(function(){k.fireMeshAnimationCompletedEvent(),e()}))}))));return e.next=9,Promise.all(v);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveMeshLocation",value:function(e){if(this._zkScene&&this._scene){var t=new Zakeke.SceneMeshLocation;t.set("name",e),this.updateMeshLocation(t),this._zkScene.get("meshLocations").push(t)}}},{key:"saveExplodedMeshLocation",value:function(){if(this._zkScene&&this._scene){var e=this._zkScene.getOrCreateExplodedMeshLocation();this.updateMeshLocation(e)}}},{key:"saveCollapsedMeshLocation",value:function(){if(this._zkScene&&this._scene){var e=this._zkScene.getOrCreateCollapsedMeshLocation();this.updateMeshLocation(e)}}},{key:"updateMeshLocation",value:function(e){if(this.fireBeforeSaveMeshLocationEvent(),this._scene&&this._sceneHelper){var t=this.getMeshPRSs(),n=this._sceneHelper.getWorldExtends();if(n){var r={x:n.min.x,y:n.min.y,z:n.min.z},i={x:n.max.x,y:n.max.y,z:n.max.z};t.wemin=r,t.wemax=i}var a=JSON.stringify(t),o=LZString.compressToUint8Array(a),s=[].slice.call(o);e.set("data",s),this.invalidateCache(e.get("locationID"))}this.fireAfterSaveMeshLocationEvent()}},{key:"getMeshPRSs",value:function(){var e={wemin:void 0,wemax:void 0};if(this._scene&&this._sceneHelper)for(var t=0;t<this._scene.meshes.length;t++){var n=this._scene.meshes[t];if(this._sceneHelper.isRealMesh(n)){var r=n.id,i={p:void 0,rQ:void 0,rE:void 0,s:void 0},a={x:n.position.x,y:n.position.y,z:n.position.z};if(i.p=a,null==n.rotationQuaternion){i.rQ=null;var o={x:n.rotation.x,y:n.rotation.y,z:n.rotation.z};i.rE=o}else{var s={w:n.rotationQuaternion.w,x:n.rotationQuaternion.x,y:n.rotationQuaternion.y,z:n.rotationQuaternion.z};i.rQ=s,i.rE=null}var u={x:n.scaling.x,y:n.scaling.y,z:n.scaling.z};i.s=u,e[r]=i}}return e}},{key:"explodeMeshes",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._zkScene){e.next=5;break}if(!(t=this._zkScene.getFirstExplodedMeshLocation())){e.next=5;break}return e.next=5,this.setMeshLocation(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"collapseMeshes",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._zkScene){e.next=5;break}if(!(t=this._zkScene.getFirstCollapsedMeshLocation())){e.next=5;break}return e.next=5,this.setMeshLocation(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fireCameraAnimationCompletedEvent",value:function(){for(var e=0;e<this._cameraAnimationCompletedListeners.length;++e)this._cameraAnimationCompletedListeners[e]()}},{key:"addCameraAnimationCompletedListener",value:function(e){this._cameraAnimationCompletedListeners.push(e)}},{key:"fireMeshAnimationCompletedEvent",value:function(){for(var e=0;e<this._meshAnimationCompletedListeners.length;++e)this._meshAnimationCompletedListeners[e]()}},{key:"addMeshAnimationCompletedListener",value:function(e){this._meshAnimationCompletedListeners.push(e)}},{key:"fireBeforeSaveMeshLocationEvent",value:function(){for(var e=0;e<this._beforeSaveMeshLocationListeners.length;++e)this._beforeSaveMeshLocationListeners[e]()}},{key:"addBeforeSaveMeshLocationListener",value:function(e){this._beforeSaveMeshLocationListeners.push(e)}},{key:"fireAfterSaveMeshLocationEvent",value:function(){for(var e=0;e<this._afterSaveMeshLocationListeners.length;++e)this._afterSaveMeshLocationListeners[e]()}},{key:"addAfterSaveMeshLocationListener",value:function(e){this._afterSaveMeshLocationListeners.push(e)}}],n&&u(t.prototype,n),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/DesignManagers/MeshDesignManager.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{MeshDesignManager:function(){return _}});var r=n("../../3D/src/Helpers/debounce.ts"),i=n("../../3D/src/Components/NormalMap/ProceduralNormalMap.ts"),a=n("../../3D/src/Components/ProceduralTextures/ForegroundBackgroundProceduralTexture.ts"),o=n("../../3D/src/Components/ProceduralTextures/MultiplyProceduralTexture.ts"),s=n("../../3D/src/Components/ProceduralTextures/OverlayProceduralTexture.ts"),u=n("../../3D/src/Components/SceneHelper.ts"),c=n("../../3D/src/Components/Shadows/InnerShadow.ts"),l=n("../../3D/src/Components/Shadows/OuterShadow.ts");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var l={};function f(){}function d(){}function g(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=g,s(_,"constructor",g),s(g,"constructor",d),d.displayName=s(g,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),s(_,o,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function g(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){g(a,r,i,o,s,"next",e)}function s(e){g(a,r,i,o,s,"throw",e)}o(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){function e(t,n,r,i,a,o){var s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=arguments.length>7?arguments[7]:void 0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1024;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_subMesh",null),y(this,"_showDesign",!0),y(this,"_designTextureResolution",1024),y(this,"_effect",null),y(this,"_meshSide",null),y(this,"_side",null),y(this,"_baseWidth",e.DEFAULT_SIZE),y(this,"_baseHeight",e.DEFAULT_SIZE),y(this,"_textureWidth",e.DEFAULT_SIZE),y(this,"_textureHeight",e.DEFAULT_SIZE),y(this,"_coordinatesIndex",0),y(this,"_canvasMesh",null),y(this,"_originalCanvasMeshPosition",null),y(this,"_originalCanvasMeshScaling",null),y(this,"_normalmapMaterial",null),y(this,"_originalMaterial",null),y(this,"_blankDataUrl",null),y(this,"_innerCanvasMesh",null),y(this,"_outerCanvasMesh",null),y(this,"_ownDynamicMaterial",!1),y(this,"_dynamicMaterial",null),y(this,"_dynamicTexture",null),y(this,"_normalmapTexture",null),y(this,"_dynamicOpacityTexture",null),y(this,"_ownOldDynamicMaterial",!1),y(this,"_oldDynamicMaterial",null),y(this,"_originalDiffuseTexture",null),y(this,"_combinedDiffuseTexture",null),y(this,"_originalMeshNormalmapTexture",null),y(this,"_originalDesignNormalmapTexture",null),y(this,"_meshCombinedNormalmapTexture",null),y(this,"_designCombinedNormalmapTexture",null),y(this,"_originalMeshLightmapTexture",null),y(this,"_originalDesignLightmapTexture",null),y(this,"_meshCombinedLightmapTexture",null),y(this,"_designCombinedLightmapTexture",null),y(this,"_innerShadowTexture",null),y(this,"_outerShadowTexture",null),y(this,"_context",null),y(this,"_canvas",null),y(this,"_canvasID",Zakeke.generateUUID()),y(this,"_customizer",null),y(this,"_renderingNeededListeners",[]),y(this,"_proceduralNormalMap",null),y(this,"_innerShadowGenerator",null),y(this,"_outerShadowGenerator",null),y(this,"_debouncedUpdateDynamicTexture",null),y(this,"_originalViewMatrixValues",null),y(this,"_grids",[]),y(this,"isFirstRender",!0),this._scene=t,this._sceneHelper=new u.SceneHelper(t),this._zkScene=n,this._mesh=r,this._subMesh=i,this._zkModel=a,this._zkDesign=o,this._showDesign=s,c&&(this._effect=c),this._baseWidth=l,this._baseHeight=l,this._textureWidth=l,this._textureHeight=l}var t,n,h;return t=e,n=[{key:"showDesign",get:function(){return this._showDesign},set:function(e){this._showDesign!=e&&(this._showDesign=e)}},{key:"side",get:function(){return this._side}},{key:"getInternalCustomizer",value:function(){return this._customizer}},{key:"initAsync",value:function(){var e=v(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._zkScene.get("rootUrl"))){e.next=4;break}return e.next=4,this._sceneHelper.unsetMeshDummyMaterialAsync(this._mesh,t,!0);case 4:return this.setupMeshSide(),this.checkDefaultEffect(),this.refreshModelSide(),e.next=9,this.setupClonedObjectsAsync();case 9:return e.next=11,this.setupCanvasAsync();case 11:return e.next=13,this.setupDynamicMaterialAsync();case 13:return e.next=15,this.refreshAsync();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isForMesh",value:function(e,t){return!(!e||!this._mesh)&&e.id===this._mesh.id&&(!this._subMesh&&!t||!(!this._subMesh||!t)&&t.materialIndex===this._subMesh.materialIndex)}},{key:"getMeshID",value:function(){return this._mesh?this._mesh.id:null}},{key:"getSubMeshIdx",value:function(){return this._subMesh?this._subMesh.materialIndex:0}},{key:"getMaterialIDForDesign",value:function(){var e;return this._effect&&this._effect.get("materialID")?e=this._effect.get("materialID"):this._mesh&&this._mesh.metadata&&this._mesh.metadata.designMaterialID?e=this._mesh.metadata.designMaterialID:this._meshSide&&this._meshSide.get("materialID")&&(e=this._meshSide.get("materialID")),e}},{key:"getDesignConfig",value:function(){var e;return this._effect&&this._effect.get("config")?e=this._effect.get("config"):this._meshSide&&this._meshSide.get("config")&&(e=this._meshSide.get("config")),e||(e=new MPlaza.MeshDesignConfig),e}},{key:"dispose",value:function(){this._customizer&&(this._customizer.clearMemoryForIOS(),this._customizer=null),this.disposeOuterInnerCanvasMeshes(),this._canvasMesh&&(this._canvasMesh.dispose(),this._canvasMesh=null,this._originalCanvasMeshPosition=null,this._originalCanvasMeshScaling=null),this.disposeDynamicMaterial(),this._dynamicOpacityTexture&&(this._dynamicOpacityTexture.dispose(),this._dynamicOpacityTexture=null),this._dynamicTexture&&(this._dynamicTexture.dispose(),this._dynamicTexture=null),this._renderingNeededListeners=[],$("#"+this._canvasID).remove(),this.restoreOrignalMaterial(),this.disposeNormalmapMaterial(),this._proceduralNormalMap&&(this._proceduralNormalMap.dispose(),this._proceduralNormalMap=null),this._innerShadowGenerator&&(this._innerShadowGenerator.dispose(),this._innerShadowGenerator=null),this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.dispose(),this._combinedDiffuseTexture=null),this._meshCombinedNormalmapTexture&&(this._meshCombinedNormalmapTexture.dispose(),this._meshCombinedNormalmapTexture=null),this._designCombinedNormalmapTexture&&(this._designCombinedNormalmapTexture.dispose(),this._designCombinedNormalmapTexture=null),this._meshCombinedLightmapTexture&&(this._meshCombinedLightmapTexture.dispose(),this._meshCombinedLightmapTexture=null),this._designCombinedLightmapTexture&&(this._designCombinedLightmapTexture.dispose(),this._designCombinedLightmapTexture=null)}},{key:"disposeOuterInnerCanvasMeshes",value:function(){this._innerCanvasMesh&&(this._innerCanvasMesh.dispose(),this._innerCanvasMesh=null),this._outerCanvasMesh&&(this._outerCanvasMesh.dispose(),this._outerCanvasMesh=null)}},{key:"disposeNormalmapMaterial",value:function(){this._normalmapMaterial&&this._originalMaterial&&this._normalmapMaterial.id!==this._originalMaterial.id&&0==this._sceneHelper.getMeshesUsingMaterial(this._normalmapMaterial.id).length&&(this._normalmapMaterial.dispose(),this._normalmapMaterial=null),this._originalMeshNormalmapTexture=null,this._originalMeshLightmapTexture=null}},{key:"disposeDynamicMaterial",value:function(){this._ownDynamicMaterial&&this._dynamicMaterial&&this._dynamicMaterial.dispose(),this._dynamicMaterial=null,this._originalDesignNormalmapTexture=null,this._originalDesignLightmapTexture=null}},{key:"disposeOldDynamicMaterial",value:function(){this._ownOldDynamicMaterial&&this._oldDynamicMaterial&&this._dynamicMaterial&&this._oldDynamicMaterial!=this._dynamicMaterial&&this._oldDynamicMaterial.dispose(),this._oldDynamicMaterial=null}},{key:"createCanvasMeshClone",value:function(e){if(this._canvasMesh){var t=this._canvasMesh.clone(e,null);if(t)return t.id=Zakeke.generateUUID(),this._canvasMesh.metadata&&void 0!==this._canvasMesh.metadata.AR&&null!==this._canvasMesh.metadata.AR&&(t.metadata||(t.metadata={}),t.metadata.AR=this._canvasMesh.metadata.AR),t}return null}},{key:"expandCanvasMesh",value:function(){if(this._mesh&&this._canvasMesh){this.disposeOuterInnerCanvasMeshes();var e=this._mesh.scaling,t=.01,n=1.01,r=this.getMeshHierarchySize(this._mesh),i=this.getMeshHierarchySize(this._canvasMesh);if(r.equals(i)){var a=this.getMeshHierarchyCenter(this._mesh);if(this._outerCanvasMesh=this.createCanvasMeshClone(this._mesh.name+" outer clone"),this._canvasMesh.isVisible=!1,this._outerCanvasMesh)if(Math.abs(r.x)<=.1||Math.abs(r.y)<=.1||Math.abs(r.z)<=.1){var o=this._mesh.getVerticesData(BABYLON.VertexBuffer.NormalKind),s=BABYLON.Vector3.FromArray(o,0).normalize();this._outerCanvasMesh.position=this._outerCanvasMesh.position.add(s.scale(t))}else{var u=e.multiplyByFloats(n,n,n);this._outerCanvasMesh.scaling=u;var c=this.getMeshHierarchyCenter(this._outerCanvasMesh),l=a.subtract(c);l.equals(BABYLON.Vector3.Zero())||this._outerCanvasMesh.position.addInPlace(l)}}}}},{key:"expandCanvasMesh_old",value:function(){if(this._mesh&&this._canvasMesh){var e=1.01,t=this.getMeshHierarchySize(this._mesh),n=this.getMeshHierarchySize(this._canvasMesh);if(t.equals(n))if(Math.abs(t.x)<=.1||Math.abs(t.y)<=.1||Math.abs(t.z)<=.1){var r=this._mesh.getVerticesData(BABYLON.VertexBuffer.NormalKind),i=BABYLON.Vector3.FromArray(r,0).normalize();this._canvasMesh.position=this._canvasMesh.position.add(i.scale(.01))}else{var a=this._canvasMesh.scaling;a=a.multiplyByFloats(e,e,e),this._canvasMesh.scaling=a;var o=this.getMeshHierarchyCenter(this._mesh),s=this.getMeshHierarchyCenter(this._canvasMesh),u=o.subtract(s);u.equals(BABYLON.Vector3.Zero())||this._canvasMesh.position.addInPlace(u)}}}},{key:"contractCanvasMesh",value:function(){this._canvasMesh&&(this._canvasMesh.isVisible=!0),this.disposeOuterInnerCanvasMeshes()}},{key:"contractCanvasMesh_old",value:function(){if(this._mesh&&this._canvasMesh&&this._originalCanvasMeshScaling&&this._originalCanvasMeshPosition){this._canvasMesh.scaling=this._originalCanvasMeshScaling,this._canvasMesh.position=this._originalCanvasMeshPosition;var e=this.getMeshHierarchyCenter(this._mesh),t=this.getMeshHierarchyCenter(this._canvasMesh),n=e.subtract(t);n.equals(BABYLON.Vector3.Zero())||this._canvasMesh.position.addInPlace(n)}}},{key:"setupMeshSide",value:function(){if(this._meshSide=null,this._coordinatesIndex=0,this._zkModel&&this._mesh&&this._mesh.id)for(var e=0;e<this._zkModel.get("scenes").length;e++){var t=this._zkModel.get("scenes").at(e);if(t.get("isDefault"))for(var n=0;n<t.get("meshSides").length;n++){var r=t.get("meshSides").at(n);if(r.get("meshID")==this._mesh.id)return this._meshSide=r,void(this._meshSide.get("uvChannel")>=0&&(this._coordinatesIndex=this._meshSide.get("uvChannel")))}}}},{key:"checkDefaultEffect",value:function(){if(!this._effect&&this._meshSide){var e=this._meshSide.getParentModel();if(e&&e instanceof MPlaza.ModelScene){var t=this.getMeshID();if(t){var n=e.getDefaultDesignEffect(t,this.getSubMeshIdx());n&&(this._effect=n)}}}}},{key:"getAllSides",value:function(){var e=[];return this._zkModel.get("colors").each((function(t){t.get("sides").each((function(t){e.find((function(e){return e.get("sideID")==t.get("sideID")}))||e.push(t)}))})),e}},{key:"refreshModelSide",value:function(){var e=this;if(this._side=null,this._meshSide&&this._zkDesign){var t=this._meshSide.get("sideID"),n=this._meshSide.tempID,r=null;if(r=this.getAllSides().find((function(e){return e.get("sideID")==t}))||null){var i,a=null,o=f(this._zkDesign.get("designItems").models);try{var s=function(){var o=i.value;if((a=o).isOnSide(r)){var s=a&&a.get("areas").length>0?a.get("areas").at(0).get("colorID"):null;return s&&e._zkModel.get("colors").each((function(e){e.get("colorID")==s&&e.get("sides").each((function(e){(e.tempID?e.tempID==n:e.get("sideID")==t)&&(r=e)}))})),"break"}};for(o.s();!(i=o.n()).done&&"break"!==s(););}catch(u){o.e(u)}finally{o.f()}this._side=r}}}},{key:"setupClonedObjectsAsync",value:function(){var e=v(p().mark((function e(){var t,n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._side){e.next=2;break}return e.abrupt("return");case 2:t=0;case 3:if(!(t<this._scene.meshes.length)){e.next=14;break}if(!((n=this._scene.meshes[t])&&n.metadata&&n.metadata.originalMeshID&&n.metadata.originalMeshID==this._mesh.id)){e.next=11;break}return this._canvasMesh=n,this._normalmapMaterial=this._mesh.material,this._originalMeshNormalmapTexture=this.getMaterialNormalmap(this._normalmapMaterial),this._originalMeshLightmapTexture=this.getMaterialLightmap(this._normalmapMaterial),e.abrupt("break",14);case 11:t++,e.next=3;break;case 14:if(this._canvasMesh||(r=this._mesh.name+" - clone",this._canvasMesh=this._mesh.clone(r,null),this._canvasMesh&&(this._canvasMesh.id=Zakeke.generateUUID(),this._canvasMesh.doNotSerialize=!0,this._canvasMesh.isPickable=!1,this._canvasMesh.metadata={},this._canvasMesh.metadata.originalMeshID=this._mesh.id,this._canvasMesh.metadata.isRealMesh=!1,this._canvasMesh.metadata.iscanvasMesh=!0,this._mesh.metadata&&void 0!==this._mesh.metadata.AR&&null!==this._mesh.metadata.AR&&(this._canvasMesh.metadata.AR=this._mesh.metadata.AR))),this._canvasMesh&&(this._originalCanvasMeshPosition=this._canvasMesh.position,this._originalCanvasMeshScaling=this._canvasMesh.scaling),this._normalmapMaterial){e.next=19;break}return e.next=19,this.setupNormalmapMaterialAsync();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupNormalmapMaterialAsync",value:function(){var e=v(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.disposeNormalmapMaterial(),this._originalMaterial=this._mesh.material,t=Zakeke.generateUUID(),n="normalmapMaterial - "+t,!this._originalMaterial){e.next=11;break}return n=this._originalMaterial.name+" - clone",e.next=8,this.cloneMaterialAsync(this._originalMaterial,n);case 8:this._normalmapMaterial=e.sent,e.next=12;break;case 11:this._normalmapMaterial=new BABYLON.StandardMaterial(n,this._scene);case 12:this._normalmapMaterial&&(this._normalmapMaterial.id=t,this._normalmapMaterial.doNotSerialize=!0,this._normalmapMaterial.metadata={},this._originalMaterial?this._normalmapMaterial.metadata.originalMaterialID=this._originalMaterial.id:this._normalmapMaterial.metadata.originalMaterialID=null,this._normalmapMaterial.metadata.isRealMaterial=!1,this._originalMeshNormalmapTexture=this.getMaterialNormalmap(this._normalmapMaterial),this._originalMeshLightmapTexture=this.getMaterialLightmap(this._normalmapMaterial));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOriginalTexture",value:function(){if(this._originalMaterial){var e=this.getMaterialDiffuseTexturePropertyName(this._originalMaterial);return this._originalMaterial[e]?this._originalMaterial[e]:null}return null}},{key:"getMaterialDiffuseTexturePropertyName",value:function(e){return e instanceof BABYLON.StandardMaterial?"diffuseTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial?"baseTexture":e instanceof BABYLON.PBRSpecularGlossinessMaterial?"diffuseTexture":e instanceof BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial?"albedoTexture":"diffuseTexture"}},{key:"getMaterialOpacityTexturePropertyName",value:function(e){return e instanceof BABYLON.StandardMaterial?"opacityTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?null:(e instanceof BABYLON.PBRMaterial||Zakeke.PBRMaterial,"opacityTexture")}},{key:"getMaterialNormalmapTexturePropertyName",value:function(e){return e instanceof BABYLON.StandardMaterial?"bumpTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?"normalTexture":(e instanceof BABYLON.PBRMaterial||Zakeke.PBRMaterial,"bumpTexture")}},{key:"getMaterialLightmapTexturePropertyName",value:function(e){return e instanceof BABYLON.StandardMaterial?"ambientTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?"occlusionTexture":e instanceof BABYLON.PBRMaterial?"ambientTexture":e instanceof Zakeke.PBRMaterial?"aoTexture":"lightmapTexture"}},{key:"getMaterialDiffuse",value:function(e){return e[this.getMaterialDiffuseTexturePropertyName(e)]}},{key:"getMaterialNormalmap",value:function(e){return e?e[this.getMaterialNormalmapTexturePropertyName(e)]:null}},{key:"getMaterialLightmap",value:function(e){return e?e[this.getMaterialLightmapTexturePropertyName(e)]:null}},{key:"getMaterialOpacity",value:function(e){if(!e)return null;var t=this.getMaterialOpacityTexturePropertyName(e);return t?e[t]:null}},{key:"setMaterialLightmap",value:function(e,t){e&&(e[this.getMaterialLightmapTexturePropertyName(e)]=t,e instanceof Zakeke.PBRMaterial&&(e.useAOTextureAsLightmap=!0))}},{key:"setTextureWrapping",value:function(e){e&&(e.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,e.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE)}},{key:"setupCanvasAsync",value:function(){var e=v(p().mark((function e(){var t,n,r,i=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._side&&this._canvasMesh&&this._meshSide)){e.next=22;break}if(t=this._baseWidth,this._meshSide.get("percWidth")>0&&(t*=this._meshSide.get("percWidth")),n=this._baseHeight,this._meshSide.get("percHeight")>0&&(n*=this._meshSide.get("percHeight")),this._textureWidth=t,this._textureHeight=n,r=$("<canvas>",{id:this._canvasID}).attr({width:t,height:n}),this._canvas=r[0],this._context=this._canvas.getContext("2d"),!this._context){e.next=22;break}return this._context.imageSmoothingQuality="high",this._context.imageSmoothingEnabled=!0,this._customizer=new MPlaza.Customizer(!0,!1,this._canvas,!0),this._blankDataUrl=this._canvas.toDataURL(),this._customizer.showSideImage=!1,this._customizer.model=this._zkModel,this._customizer.fitToScreenMargin=1,this._customizer.setGrids(this._grids),this._customizer.setDesign(this._zkDesign),e.next=22,new Promise(function(){var e=v(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=i._customizer)||void 0===n?void 0:n.setSide(i._side);case 2:null===(r=i._customizer)||void 0===r||r.refresh({boundsToAreas:!0},v(p().mark((function e(){var n,r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i._customizer){e.next=8;break}return i._meshSide&&(n=i._meshSide.get("matrix"))&&(r=JSON.parse(n),a=new i._customizer.paper.Matrix(r),i._customizer.paper.view.matrix=a,i._customizer.paper.view.update()),e.next=4,i.updateDynamicTextureAsync();case 4:i._customizer.addItemCreatedListener(v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.updateDynamicTextureAsync();case 2:i.fireRenderingNeededEvent();case 3:case"end":return e.stop()}}),e)})))),i._customizer.addItemChangedListener(v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.updateDynamicTextureAsync();case 2:i.fireRenderingNeededEvent();case 3:case"end":return e.stop()}}),e)})))),i._customizer.addItemRemovedListener(v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.updateDynamicTextureAsync();case 2:i.fireRenderingNeededEvent();case 3:case"end":return e.stop()}}),e)})))),i._customizer.addImageLoadedListener(v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.updateDynamicTextureAsync();case 2:i.fireRenderingNeededEvent();case 3:case"end":return e.stop()}}),e)}))));case 8:t();case 9:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCustomizerGrids",value:function(e){var t;this._grids=e,null===(t=this._customizer)||void 0===t||t.setGrids(e)}},{key:"restoreOrignalMaterial",value:function(){this._mesh&&this._originalMaterial&&this._mesh.material&&this._normalmapMaterial&&this._mesh.material.id===this._normalmapMaterial.id&&(this._mesh.material=this._originalMaterial)}},{key:"getMeshesUsingMaterial",value:function(e){for(var t=[],n=this._scene.meshes,r=0;r<n.length;r++){var i=n[r];if(i.material)if(i.material.id==e)t.push(i);else if(i.material instanceof BABYLON.MultiMaterial)for(var a=0;a<i.material.subMaterials.length;a++){var o=i.material.subMaterials[a];if(null!=o&&o.id===e){t.push(i);break}}}return t}},{key:"checkNormalmapMaterialAsync",value:function(){var e=v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._mesh||!this._normalmapMaterial||this._mesh.material&&this._mesh.material.id===this._normalmapMaterial.id){e.next=4;break}return e.next=4,this.setupNormalmapMaterialAsync();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkDynamicMaterialAsync",value:function(){var e=v(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getMaterialIDForDesign())){e.next=6;break}if(!(this._side&&this._canvasMesh&&this._meshSide&&this._dynamicMaterial&&this._dynamicMaterial.id!=t)){e.next=6;break}return e.next=6,this.setupDynamicMaterialAsync();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupDynamicMaterialAsync",value:function(){var e=v(p().mark((function e(){var t,n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._side&&this._canvasMesh&&this._meshSide)){e.next=18;break}if(this._ownOldDynamicMaterial=this._ownDynamicMaterial,this._oldDynamicMaterial=this._dynamicMaterial,!(t=this.getMaterialIDForDesign())){e.next=11;break}if(!(n=this._scene.getMaterialByID(t))){e.next=11;break}return e.next=9,this.cloneMaterialAsync(n,n.name+" - clone");case 9:this._dynamicMaterial=e.sent,this._ownDynamicMaterial=!0;case 11:this._dynamicMaterial||(this._mesh.material&&this._mesh.material instanceof BABYLON.PBRBaseMaterial?((r=new BABYLON.PBRMaterial("dynamicMaterial",this._scene)).enableSpecularAntiAliasing=!0,r.backFaceCulling=!1,r.albedoColor=BABYLON.Color3.White(),r.reflectivityColor=BABYLON.Color3.Black(),void 0!=this._mesh.material.subSurface.indexOfRefraction&&(r.subSurface.indexOfRefraction=this._mesh.material.subSurface.indexOfRefraction),void 0!=this._mesh.material.roughness&&(r.roughness=this._mesh.material.roughness),void 0!=this._mesh.material.metallic&&(r.metallic=this._mesh.material.metallic),void 0!=this._mesh.material.reflectionTexture&&(r.reflectionTexture=this._mesh.material.reflectionTexture),void 0!=this._mesh.material.microSurface&&(r.microSurface=this._mesh.material.microSurface),this._dynamicMaterial=r):(this._dynamicMaterial=new BABYLON.StandardMaterial("dynamicMaterial",this._scene),this._dynamicMaterial.backFaceCulling=!1,this._dynamicMaterial.specularColor=BABYLON.Color3.Black(),this._dynamicMaterial.ambientColor=BABYLON.Color3.White(),this._dynamicMaterial.diffuseColor=BABYLON.Color3.White()),this._dynamicMaterial.id=Zakeke.generateUUID(),this._ownDynamicMaterial=!0),this._dynamicMaterial.zOffset=-1,this._dynamicMaterial.metadata={isRealMaterial:!1},this._dynamicMaterial.doNotSerialize=!0,this._originalDiffuseTexture=this.getMaterialDiffuse(this._dynamicMaterial),this._originalDesignNormalmapTexture=this.getMaterialNormalmap(this._dynamicMaterial),this._originalDesignLightmapTexture=this.getMaterialLightmap(this._dynamicMaterial);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cloneMaterialAsync",value:function(){var e=v(p().mark((function e(t,n){var r,i,a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(t.getActiveTextures().forEach(function(){var e=v(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.SceneHelper.whenTextureIsReadyAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r=n||t.name+" - clone",!(t instanceof BABYLON.ShaderMaterial)){e.next=13;break}if(i=this._zkScene.get("rootUrl")){e.next=8;break}return e.abrupt("return",null);case 8:return a=t.serialize(),o=BABYLON.Material.Parse(a,this._scene,i),e.abrupt("return",o);case 13:return e.abrupt("return",t.clone(r));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMeshHierarchySize",value:function(e){var t=e.getHierarchyBoundingVectors(!0);return t.max.subtract(t.min)}},{key:"getMeshHierarchyCenter",value:function(e){var t=e.getHierarchyBoundingVectors(!0),n=t.max.subtract(t.min);return t.min.add(n.scale(.5))}},{key:"refreshAsync",value:function(){var e=v(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof t&&(this._effect=t),this._side){e.next=12;break}return this.setupMeshSide(),this.checkDefaultEffect(),e.next=6,this.setupClonedObjectsAsync();case 6:return e.next=8,this.setupCanvasAsync();case 8:return e.next=10,this.setupDynamicMaterialAsync();case 10:e.next=16;break;case 12:return e.next=14,this.checkDynamicMaterialAsync();case 14:return e.next=16,this.checkNormalmapMaterialAsync();case 16:return this.refreshModelSide(),e.next=19,new Promise(function(){var e=v(p().mark((function e(t){var r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n._meshSide&&n.side&&n._customizer)){e.next=4;break}return e.next=3,null===(r=n._customizer)||void 0===r?void 0:r.setSide(n._side);case 3:null===(i=n._customizer)||void 0===i||i.refresh({boundsToAreas:!0},v(p().mark((function e(){var r,i,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._meshSide&&(r=n._meshSide.get("matrix"))&&n._customizer&&(i=JSON.parse(r),a=new n._customizer.paper.Matrix(i),n._customizer.paper.view.matrix=a,n._customizer.paper.view.update()),e.next=3,n.updateDynamicTextureAsync();case 3:t();case 4:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateDynamicTextureAsync",value:function(){var e=v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstRender){e.next=6;break}return console.log("First render..."),e.next=4,this.updateDynamicTextureInternalAsync();case 4:return this.isFirstRender=!1,e.abrupt("return");case 6:this._debouncedUpdateDynamicTexture||(this._debouncedUpdateDynamicTexture=(0,r.debounce)(this.updateDynamicTextureInternalAsync,150)),this._debouncedUpdateDynamicTexture();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateDynamicTextureInternalAsync",value:function(){var e=v(p().mark((function e(){var t,n,r,i,a,o,s,c,l,h,f,d,g,v,m,y,_,b,x,w;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Logger.info("updateDynamicTextureInternal"),this._side&&this._meshSide&&this._canvas&&this._canvasMesh&&this._dynamicMaterial){e.next=3;break}return e.abrupt("return");case 3:return t=this.getDesignConfig(),e.next=6,this.checkDynamicMaterialAsync();case 6:return e.next=8,this.checkNormalmapMaterialAsync();case 8:return n=t.getDiffuseEnabled(),r=t.getDiffuseBlendMode(),i=t.getDiffuseLevel(),"normal"!==r&&"multiply"!==r&&"overlay"!==r&&(r="normal"),a=t.getOpacityEnabled(),t.getOrCreateOpacityConfig(),o=t.getNormalmapEnabled(),s=t.getOrCreateNormalmapConfig(),c=t.getInnerShadowEnabled(),l=t.getOrCreateInnerShadowConfig(),h=t.getOuterShadowEnabled(),f=t.getOrCreateOuterShadowConfig(),d="diffuseTexture",g=this._meshSide.get("materialTexture"),d=g||this.getMaterialDiffuseTexturePropertyName(this._dynamicMaterial),v=this.getMaterialOpacityTexturePropertyName(this._dynamicMaterial),(m=this._dynamicTexture)&&m.dispose(),y=this._canvas.toDataURL(),_=y==this._blankDataUrl,b=this.dataURItoBlob(y),x=window.URL||window.webkitURL,w=x.createObjectURL(b),this._dynamicTexture=new BABYLON.Texture(w,this._scene),this._dynamicTexture.hasAlpha=!0,e.next=35,u.SceneHelper.whenTextureIsReadyAsync(this._dynamicTexture);case 35:if(_||!this._dynamicTexture){e.next=77;break}if(!o){e.next=39;break}return e.next=39,this.updateNormalmapTextureAsync(s);case 39:if(!c){e.next=42;break}return e.next=42,this.updateInnerShadowTextureAsync(l);case 42:if(!h){e.next=45;break}return e.next=45,this.updateOuterShadowTextureAsync(f);case 45:if(!a){e.next=48;break}return e.next=48,this.updateOpacityTextureAsync();case 48:if(!this._originalDiffuseTexture||!n||"normal"===r){e.next=51;break}return e.next=51,this.combineDiffuseTexturesAsync(r,i);case 51:if(!this._showDesign){e.next=77;break}if(n&&d&&("normal"!==r&&this._originalDiffuseTexture&&this._combinedDiffuseTexture?this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._combinedDiffuseTexture),this._dynamicMaterial[d]=this._combinedDiffuseTexture):(this._dynamicTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._dynamicTexture),this._dynamicMaterial[d]=this._dynamicTexture),this._dynamicMaterial[d].hasAlpha=!1,this._dynamicMaterial[d].hasAlpha=!0),n||!d||this.compareTextures(this._dynamicMaterial[d],this._originalDiffuseTexture)||(this._dynamicMaterial[d]=this._originalDiffuseTexture),!a&&v&&(this._dynamicMaterial[v]=null),this._canvasMesh.material!==this._dynamicMaterial&&(this._canvasMesh.material=this._dynamicMaterial),!o||!this._normalmapTexture){e.next=61;break}return e.next=59,this.setNormalmapTextureAsync(s);case 59:e.next=63;break;case 61:this.resetMeshNormalmapTexture(),this.resetDesignNormalmapTexture();case 63:if(!c||!this._innerShadowTexture){e.next=68;break}return e.next=66,this.setInnerShadowTextureAsync(l);case 66:e.next=69;break;case 68:this.removeInnerShadowTexture();case 69:if(!h||!this._outerShadowTexture){e.next=74;break}return e.next=72,this.setOuterShadowTextureAsync(f);case 72:e.next=75;break;case 74:this.removeOuterShadowTexture();case 75:this.disposeOldDynamicMaterial(),this._canvasMesh.isVisible=t.getShowDesign();case 77:_&&(this._canvasMesh.isVisible=!1),this.fireRenderingNeededEvent();case 79:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetDynamicTextures",value:function(){if(this._dynamicMaterial){var e="diffuseTexture",t=this._meshSide?this._meshSide.get("materialTexture"):null;(e=t||this.getMaterialDiffuseTexturePropertyName(this._dynamicMaterial))&&!this.compareTextures(this._dynamicMaterial[e],this._originalDiffuseTexture)&&(this._dynamicMaterial[e]=this._originalDiffuseTexture||new BABYLON.Texture(this._blankDataUrl,this._scene),this._dynamicMaterial[e].hasAlpha=!1,this._dynamicMaterial[e].hasAlpha=!0),this.resetDesignNormalmapTexture();var n=this.getMaterialOpacityTexturePropertyName(this._dynamicMaterial);n&&(this._dynamicMaterial[n]=null),this.removeInnerShadowTexture()}this._normalmapMaterial&&(this.resetMeshNormalmapTexture(),this.removeOuterShadowTexture())}},{key:"updateOpacityTextureAsync",value:function(){var e=v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dynamicTexture){e.next=9;break}return e.next=3,u.SceneHelper.whenTextureIsReadyAsync(this._dynamicTexture);case 3:if(this._dynamicOpacityTexture||(this._dynamicOpacityTexture=new a.ForegroundBackgroundProceduralTexture("dynamicOpacity",this._textureWidth,this._scene,this._dynamicTexture),this._dynamicOpacityTexture.backColor=new BABYLON.Vector3(0,0,0),this._dynamicOpacityTexture.foreColor=new BABYLON.Vector3(1,1,1),this._dynamicOpacityTexture.refreshRate=0,this._dynamicOpacityTexture.getAlphaFromRGB=!0),!this._dynamicOpacityTexture){e.next=9;break}return this._dynamicOpacityTexture.baseTexture=this._dynamicTexture,e.next=8,u.SceneHelper.whenTextureIsReadyAsync(this._dynamicOpacityTexture);case 8:this._dynamicOpacityTexture.render();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"combineDiffuseTexturesAsync",value:function(){var e=v(p().mark((function e(t,n){var r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._originalDiffuseTexture&&this._dynamicTexture){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.SceneHelper.whenTextureIsReadyAsync(this._originalDiffuseTexture);case 4:return e.next=6,u.SceneHelper.whenTextureIsReadyAsync(this._dynamicTexture);case 6:if(r=0===n?this._dynamicTexture:this._originalDiffuseTexture,i=0===n?this._originalDiffuseTexture:this._dynamicTexture,this._combinedDiffuseTexture||(this._combinedDiffuseTexture="multiply"==t?new o.MultiplyProceduralTexture("multiplyDiffuse",this._textureWidth,this._scene,r,i):new s.OverlayProceduralTexture("overlayDiffuse",this._textureWidth,this._scene,r,i),this._combinedDiffuseTexture.refreshRate=0),!this._combinedDiffuseTexture){e.next=15;break}return this._combinedDiffuseTexture.baseTexture=r,this._combinedDiffuseTexture.blendTexture=i,e.next=14,u.SceneHelper.whenTextureIsReadyAsync(this._combinedDiffuseTexture);case 14:this._combinedDiffuseTexture.render();case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateNormalmapTextureAsync",value:function(){var e=v(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dynamicTexture){e.next=8;break}return e.next=3,u.SceneHelper.whenTextureIsReadyAsync(this._dynamicTexture);case 3:return this._proceduralNormalMap||(this._proceduralNormalMap=new i.ProceduralNormalMap(this._dynamicTexture,this._textureWidth,t,this._scene)),e.next=6,this._proceduralNormalMap.getNormalMapTextureAsync(this._dynamicTexture,t);case 6:this._normalmapTexture=e.sent,this._normalmapTexture&&(this._normalmapTexture.coordinatesIndex=this._coordinatesIndex);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setNormalmapTextureAsync",value:function(){var e=v(p().mark((function e(t){var n,r,i,a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._normalmapTexture,r=this._normalmapTexture,!t.get("showOnMesh")){e.next=7;break}if(!this._originalMeshNormalmapTexture||!this._normalmapTexture){e.next=7;break}return e.next=6,this.combineMeshNormalmapTexturesAsync();case 6:this._meshCombinedNormalmapTexture&&(n=this._meshCombinedNormalmapTexture);case 7:if(!t.get("showOnDesign")){e.next=12;break}if(!this._originalDesignNormalmapTexture||!this._normalmapTexture){e.next=12;break}return e.next=11,this.combineDesignNormalmapTexturesAsync();case 11:this._designCombinedNormalmapTexture&&(r=this._designCombinedNormalmapTexture);case 12:this._normalmapMaterial&&n&&(n.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(n),i=this.getMaterialNormalmapTexturePropertyName(this._normalmapMaterial),t.get("showOnMesh")?this._normalmapMaterial[i]=n:this.resetMeshNormalmapTexture(),this._mesh.material!==this._normalmapMaterial&&(this._mesh.material=this._normalmapMaterial,this._mesh.metadata||(this._mesh.metadata={}),this._mesh.metadata.originalNormalmapMaterialID=null===(a=this._originalMaterial)||void 0===a?void 0:a.id)),this._dynamicMaterial&&r&&(r.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(r),o=this.getMaterialNormalmapTexturePropertyName(this._dynamicMaterial),t.get("showOnDesign")?this._dynamicMaterial[o]=r:this.resetDesignNormalmapTexture());case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"combineMeshNormalmapTexturesAsync",value:function(){var e=v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._originalMeshNormalmapTexture&&this._normalmapTexture){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.SceneHelper.whenTextureIsReadyAsync(this._originalMeshNormalmapTexture);case 4:return e.next=6,u.SceneHelper.whenTextureIsReadyAsync(this._normalmapTexture);case 6:if(this._meshCombinedNormalmapTexture||(this._meshCombinedNormalmapTexture=new s.OverlayProceduralTexture("overlayMeshNormal",this._textureWidth,this._scene,this._originalMeshNormalmapTexture,this._normalmapTexture),this._meshCombinedNormalmapTexture.refreshRate=0),!this._meshCombinedNormalmapTexture){e.next=13;break}return this._meshCombinedNormalmapTexture.baseTexture=this._originalMeshNormalmapTexture,this._meshCombinedNormalmapTexture.blendTexture=this._normalmapTexture,e.next=12,u.SceneHelper.whenTextureIsReadyAsync(this._meshCombinedNormalmapTexture);case 12:this._meshCombinedNormalmapTexture.render();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetMeshNormalmapTexture",value:function(){if(this._normalmapMaterial){var e=this.getMaterialNormalmapTexturePropertyName(this._normalmapMaterial);this.compareTextures(this._normalmapMaterial[e],this._originalMeshNormalmapTexture)||(this._originalMeshNormalmapTexture?this._normalmapMaterial[e]=this._originalMeshNormalmapTexture:this._normalmapMaterial[e]=null)}}},{key:"resetDesignNormalmapTexture",value:function(){if(this._dynamicMaterial){var e=this.getMaterialNormalmapTexturePropertyName(this._dynamicMaterial);this.compareTextures(this._dynamicMaterial[e],this._originalDesignNormalmapTexture)||(this._originalDesignNormalmapTexture?this._dynamicMaterial[e]=this._originalDesignNormalmapTexture:this._dynamicMaterial[e]=null)}}},{key:"combineDesignNormalmapTexturesAsync",value:function(){var e=v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._originalDesignNormalmapTexture&&this._normalmapTexture){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.SceneHelper.whenTextureIsReadyAsync(this._originalDesignNormalmapTexture);case 4:return e.next=6,u.SceneHelper.whenTextureIsReadyAsync(this._normalmapTexture);case 6:if(this._designCombinedNormalmapTexture||(this._designCombinedNormalmapTexture=new s.OverlayProceduralTexture("overlayDesignNormal",this._textureWidth,this._scene,this._originalDesignNormalmapTexture,this._normalmapTexture),this._designCombinedNormalmapTexture.refreshRate=0),!this._designCombinedNormalmapTexture){e.next=13;break}return this._designCombinedNormalmapTexture.baseTexture=this._originalDesignNormalmapTexture,this._designCombinedNormalmapTexture.blendTexture=this._normalmapTexture,e.next=12,u.SceneHelper.whenTextureIsReadyAsync(this._designCombinedNormalmapTexture);case 12:this._designCombinedNormalmapTexture.render();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateInnerShadowTextureAsync",value:function(){var e=v(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dynamicTexture){e.next=13;break}return e.next=3,u.SceneHelper.whenTextureIsReadyAsync(this._dynamicTexture);case 3:if(this._innerShadowGenerator){e.next=11;break}return this._innerShadowGenerator=new c.InnerShadow(this._dynamicTexture,this._textureWidth,t,this._scene),e.next=7,this._innerShadowGenerator.getInnerShadowTextureAsync(this._dynamicTexture);case 7:this._innerShadowTexture=e.sent,this._innerShadowTexture.coordinatesIndex=this._coordinatesIndex,e.next=13;break;case 11:return e.next=13,this._innerShadowGenerator.updateAsync(this._dynamicTexture,t);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInnerShadowTextureAsync",value:function(){var e=v(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._innerShadowTexture,!this._originalDesignLightmapTexture||!this._innerShadowTexture){e.next=5;break}return e.next=4,this.combineDesignLightmapTexturesAsync();case 4:this._designCombinedLightmapTexture&&(n=this._designCombinedLightmapTexture);case 5:n&&(n.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(n),this.setMaterialLightmap(this._dynamicMaterial,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"combineDesignLightmapTexturesAsync",value:function(){var e=v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._originalDesignLightmapTexture&&this._innerShadowTexture){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.SceneHelper.whenTextureIsReadyAsync(this._originalDesignLightmapTexture);case 4:return e.next=6,u.SceneHelper.whenTextureIsReadyAsync(this._innerShadowTexture);case 6:if(this._designCombinedLightmapTexture||(this._designCombinedLightmapTexture=new o.MultiplyProceduralTexture("overlayDesignLightmaps",this._textureWidth,this._scene,this._originalDesignLightmapTexture,this._innerShadowTexture),this._designCombinedLightmapTexture.refreshRate=0),!this._designCombinedLightmapTexture){e.next=13;break}return this._designCombinedLightmapTexture.baseTexture=this._originalDesignLightmapTexture,this._designCombinedLightmapTexture.blendTexture=this._innerShadowTexture,e.next=12,u.SceneHelper.whenTextureIsReadyAsync(this._designCombinedLightmapTexture);case 12:this._designCombinedLightmapTexture.render();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeInnerShadowTexture",value:function(){if(this._dynamicMaterial){var e=this.getMaterialLightmap(this._dynamicMaterial),t=this._originalDesignLightmapTexture;this.compareTextures(e,t)||this.setMaterialLightmap(this._dynamicMaterial,t)}}},{key:"updateOuterShadowTextureAsync",value:function(){var e=v(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dynamicTexture){e.next=13;break}return e.next=3,u.SceneHelper.whenTextureIsReadyAsync(this._dynamicTexture);case 3:if(this._outerShadowGenerator){e.next=11;break}return this._outerShadowGenerator=new l.OuterShadow(this._dynamicTexture,this._textureWidth,t,this._scene),e.next=7,this._outerShadowGenerator.getOuterShadowTextureAsync(this._dynamicTexture);case 7:this._outerShadowTexture=e.sent,this._outerShadowTexture.coordinatesIndex=this._coordinatesIndex,e.next=13;break;case 11:return e.next=13,this._outerShadowGenerator.updateAsync(this._dynamicTexture,t);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setOuterShadowTextureAsync",value:function(){var e=v(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._outerShadowTexture,!this._originalMeshLightmapTexture||!this._outerShadowTexture){e.next=5;break}return e.next=4,this.combineMeshLightmapTexturesAsync();case 4:this._meshCombinedLightmapTexture&&(n=this._meshCombinedLightmapTexture);case 5:n&&(n.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(n),this.setMaterialLightmap(this._normalmapMaterial,n),this._mesh.material!==this._normalmapMaterial&&(this._mesh.material=this._normalmapMaterial));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"combineMeshLightmapTexturesAsync",value:function(){var e=v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._originalMeshLightmapTexture&&this._outerShadowTexture){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.SceneHelper.whenTextureIsReadyAsync(this._originalMeshLightmapTexture);case 4:return e.next=6,u.SceneHelper.whenTextureIsReadyAsync(this._outerShadowTexture);case 6:if(this._meshCombinedLightmapTexture||(this._meshCombinedLightmapTexture=new o.MultiplyProceduralTexture("overlayMeshLightmap",this._textureWidth,this._scene,this._originalMeshLightmapTexture,this._outerShadowTexture),this._meshCombinedLightmapTexture.refreshRate=0),!this._meshCombinedLightmapTexture){e.next=13;break}return this._meshCombinedLightmapTexture.baseTexture=this._originalMeshLightmapTexture,this._meshCombinedLightmapTexture.blendTexture=this._outerShadowTexture,e.next=12,u.SceneHelper.whenTextureIsReadyAsync(this._meshCombinedLightmapTexture);case 12:this._meshCombinedLightmapTexture.render();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeOuterShadowTexture",value:function(){if(this._normalmapMaterial){var e=this.getMaterialLightmap(this._normalmapMaterial),t=this._originalMeshLightmapTexture;this.compareTextures(e,t)||this.setMaterialLightmap(this._normalmapMaterial,t)}}},{key:"compareTextures",value:function(e,t){return"undefined"===typeof e&&"undefined"===typeof t||null===e&&null===t||!(!e||!t)&&e===t}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([r],{type:n})}},{key:"downloadImage",value:function(e,t){var n=this.dataURItoBlob(e),r=window.URL.createObjectURL(n),i=t||"image.png",a=document.createElement("a");a.download=i,a.innerHTML="Download File",a.href=r,a.onclick=function(e){document.body.removeChild(a)},a.style.display="none",a.setAttribute("type","hidden"),document.body.appendChild(a),a.click()}},{key:"setDesignMeshVisibility",value:function(e){this._canvasMesh&&(this._canvasMesh.isVisible=e)}},{key:"getItemsInfo",value:function(){return this._customizer?this._customizer.getItemsInfo():[]}},{key:"removeItem",value:function(e){this._customizer&&this._customizer.removeItemByGuid(e)}},{key:"addItemText",value:function(e){this._customizer&&this._customizer.addTextElement(null,e,!1)}},{key:"setItemText",value:function(e,t){this._customizer&&this._customizer.modifyTextElementContentByGuid(e,t)}},{key:"setItemBold",value:function(e,t){if(this._customizer){var n=this._customizer.findItemByGuid(e);if(n){var r=this._customizer.getTextItemInfo(n).fontWeight.split(" "),i=[r.length>1?r[0]:"normal"];i.push(t?"bold":"normal"),this._customizer.modifyTextElementFontWeight(n,i.join(" "))}}}},{key:"setItemItalic",value:function(e,t){if(this._customizer){var n=this._customizer.findItemByGuid(e);if(n){var r=this._customizer.getTextItemInfo(n).fontWeight.split(" "),i=[t?"italic":"normal"];i.push(r.length>1?r[1]:r[0]),this._customizer.modifyTextElementFontWeight(n,i.join(" "))}}}},{key:"setItemColor",value:function(e,t){this._customizer&&this._customizer.modifyTextElementFillColorByGuid(e,t)}},{key:"setItemFontFamily",value:function(e,t){this._customizer&&this._customizer.modifyTextElementFontFamilyByGuid(e,t)}},{key:"addItemImage",value:function(){var e=v(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._customizer){e.next=3;break}return e.next=3,this._customizer.insertImageById(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setItemImage",value:function(){var e=v(p().mark((function e(t,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._customizer){e.next=3;break}return e.next=3,this._customizer.replaceImageByGuid(t,n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setItemTextOnPath",value:function(e,t){if(this._customizer){var n=this._customizer.findItemByGuid(e);t?this._customizer.convertToTextOnPath(n):this._customizer.convertToTextArea(n)}}},{key:"removeItemImage",value:function(e){this._customizer&&this._customizer.removeImageByGuid(e)}},{key:"containsItem",value:function(e){if(this._customizer){var t=this._customizer.findItemByGuid(e);return null!=t&&void 0!=t}return!1}},{key:"addNotifyMessageListener",value:function(e){if(this._customizer){var t=this._customizer;t.addNotifyMessageListeners((function(n,r,i,a,o,s,u,c){e(t.side.getSideID(),n,r,i,a,o,c.requiredWidth,c.requiredHeight)}))}}},{key:"addRemoveMessageListener",value:function(e){if(this._customizer){var t=this._customizer;t.addRemoveMessageListeners((function(n){e(t.side.getSideID(),n)}))}}},{key:"setEventMessages",value:function(e){this._customizer&&this._customizer.setCustomizedMessages(e)}},{key:"fireRenderingNeededEvent",value:function(){for(var e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}},{key:"addRenderingNeededListener",value:function(e){this._renderingNeededListeners.push(e)}},{key:"translateDesignView",value:function(e,t){if(this._meshSide&&this._customizer){var n=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values),r=JSON.parse(n),i=this._customizer.getTranslatedMatrixValues(r,e,t),a=JSON.stringify(i);this._meshSide.set("matrix",a)}}},{key:"rotateDesignView",value:function(e,t,n){if(this._meshSide&&this._customizer){var r=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values),i=JSON.parse(r),a=this._customizer.getRotatedMatrixValues(i,e,t,n),o=JSON.stringify(a);this._meshSide.set("matrix",o)}}},{key:"scaleDesignView",value:function(e,t,n,r){if(this._meshSide&&this._customizer){var i=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values),a=JSON.parse(i),o=this._customizer.getScaledMatrixValues(a,e,t,n,r),s=JSON.stringify(o);this._meshSide.set("matrix",s)}}},{key:"setDesignViewTextureUVChannelAsync",value:function(){var e=v(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._meshSide){e.next=4;break}return this._meshSide.set("uvChannel",t),e.next=4,this.updateDynamicTextureAsync();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDesignViewFormFactorAsync",value:function(){var e=v(p().mark((function e(t,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._meshSide){e.next=5;break}return this._meshSide.set("percWidth",t),this._meshSide.set("percHeight",n),e.next=5,this.refreshAsync();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],h=[{key:"createMeshDesignManagerAsync",value:function(){var t=v(p().mark((function t(n,r,i,a,o,s){var u,c=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=new e(n,r,i,a,o,s,!(c.length>6&&void 0!==c[6])||c[6],c.length>7?c[7]:void 0,c.length>8&&void 0!==c[8]?c[8]:1024),t.next=6,u.initAsync();case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r,i,a,o){return t.apply(this,arguments)}}()}],n&&m(t.prototype,n),h&&m(t,h),Object.defineProperty(t,"prototype",{writable:!1}),e}();y(_,"DEFAULT_SIZE",1024)},"../../3D/src/Components/DesignManagers/SceneDesignManager.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{SceneDesignManager:function(){return f}});var r=n("../../3D/src/Components/DesignManagers/MeshDesignManager.ts");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,a)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function u(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(t,n,r,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1024;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"_grids",[]),h(this,"_meshDesignManagers",[]),h(this,"_renderingNeededListeners",[]),h(this,"_designNotifyMessageListeners",[]),h(this,"_designRemoveMessageListeners",[]),h(this,"_designEventMessages",[]),h(this,"_meshDesignManagersRefreshing",new Set),this._scene=t,this._zkScene=n,this._zkModel=r,this._zkDesign=i,this._showDesign=a,this._designTextureResolution=o,this.init()}var t,n,i;return t=e,n=[{key:"showDesign",get:function(){return this._showDesign},set:function(e){this._showDesign!=e&&(this._showDesign=e,this._meshDesignManagers.forEach((function(t){return t.showDesign=e})))}},{key:"dispose",value:function(){this._meshDesignManagers.forEach((function(e){return e.dispose()}))}},{key:"init",value:function(){}},{key:"isForModels",value:function(e,t,n){return this._scene==e&&this._zkModel==t&&this._zkDesign==n}},{key:"getDefaultModelScene",value:function(){if(this._zkModel){var e=this._zkModel.get("scenes").findWhere({isDefault:!0});if(e)return e}return null}},{key:"getModelSceneMeshSide",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._scene&&this._zkModel){var n=this.getDefaultModelScene();if(n)for(var r=0;r<n.get("meshSides").length;r++){var i=n.get("meshSides").at(r);if(i.get("meshID")==e&&i.get("subMeshID")==t)return i}}return null}},{key:"refreshAsync",value:function(){var e=c(s().mark((function e(){var t,n,r,i,a,o,u,c,l,h,f,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._scene&&this._zkModel&&this._zkDesign)){e.next=36;break}if(!(t=this.getDefaultModelScene())){e.next=36;break}n=null,r=null,i=null,a=0;case 7:if(!(a<t.get("meshSides").length)){e.next=17;break}if(i=t.get("meshSides").at(a),o=i.get("meshID"),u=i.get("subMeshID"),!o){e.next=14;break}return e.next=14,this.refreshMeshDesignAsync(o,u);case 14:a++,e.next=7;break;case 17:c=0;case 18:if(!(c<this._meshDesignManagers.length)){e.next=36;break}n=this._meshDesignManagers[c],l=!1,h=0;case 22:if(!(h<t.get("meshSides").length)){e.next=30;break}if((i=t.get("meshSides").at(h)).get("meshID")!=n.getMeshID()||i.get("subMeshID")!=n.getSubMeshIdx()){e.next=27;break}return l=!0,e.abrupt("break",30);case 27:h++,e.next=22;break;case 30:f=!0,l&&(d=n.getMeshID())&&(r=this._scene.getMeshByID(d))&&(f=r.isVisible),l&&f||(n.dispose(),this._meshDesignManagers.splice(c--,1));case 33:c++,e.next=18;break;case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isValidEffectForMesh",value:function(e,t,n){if(n&&n instanceof MPlaza.ModelSceneMeshDesignEffect){var r=n.getParentModel();if(r&&r instanceof MPlaza.ModelScene)return r.isEffectForMesh(e,t,n.get("effectID"))}return!1}},{key:"refreshMeshDesignAsync",value:function(){var e=c(s().mark((function e(t){var n,i,o,u,c,l,h,f,d,p,g,v,m=this,y=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:0,i=y.length>2?y[2]:void 0,Zakeke.generateUUID(),o=this._scene.getMeshByID(t),u=i,i&&!this.isValidEffectForMesh(t,n,i)&&(u=void 0),!o||!o.isVisible){e.next=27;break}if(c=null,o.subMeshes&&o.subMeshes.length>0&&n>=0&&n<o.subMeshes.length&&(c=o.subMeshes[n]),l=this.getMeshDesignMananger(o,c)){e.next=24;break}return e.next=13,r.MeshDesignManager.createMeshDesignManagerAsync(this._scene,this._zkScene,o,c,this._zkModel,this._zkDesign,this._showDesign,u,this._designTextureResolution);case 13:(l=e.sent).addRenderingNeededListener((function(){return m.fireRenderingNeededEvent()})),l.setCustomizerGrids(this._grids),l.setEventMessages(this._designEventMessages),h=a(this._designNotifyMessageListeners);try{for(h.s();!(f=h.n()).done;)d=f.value,l.addNotifyMessageListener(d)}catch(s){h.e(s)}finally{h.f()}p=a(this._designRemoveMessageListeners);try{for(p.s();!(g=p.n()).done;)v=g.value,l.addRemoveMessageListener(v)}catch(s){p.e(s)}finally{p.f()}this._meshDesignManagers.push(l),e.next=27;break;case 24:return l.showDesign=this._showDesign,e.next=27,l.refreshAsync(u);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMeshDesignMananger",value:function(e,t){for(var n=0;n<this._meshDesignManagers.length;n++){var r=this._meshDesignManagers[n];if(r.isForMesh(e,t))return r}return null}},{key:"clearMeshDesignManagers",value:function(){this._meshDesignManagers=[]}},{key:"setCustomizerGrids",value:function(e){this._grids=e,this._meshDesignManagers.forEach((function(t){return t.setCustomizerGrids(e)}))}},{key:"getItemsInfo",value:function(){for(var e=[],t=0;t<this._meshDesignManagers.length;t++)for(var n=this._meshDesignManagers[t].getItemsInfo(),r=0;r<n.length;r++){for(var i=n[r],a=!1,o=0;o<e.length;o++)if(e[o].itemGuid==i.itemGuid){a=!0;break}a||e.push(i)}return e}},{key:"execOnMeshManagersContainingItem",value:function(){var e=c(s().mark((function e(t,n){var r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(this._meshDesignManagers),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=10;break}if(!(o=i.value).containsItem(t)){e.next=8;break}return e.next=8,n(o);case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(e){this.execOnMeshManagersContainingItem(e,function(){var t=c(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.removeItem(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"addItemText",value:function(e,t){var n=this._meshDesignManagers.find((function(e){return null!=e.side&&e.side.get("sideID")===t}));n&&n.addItemText(e)}},{key:"addItemImage",value:function(){var e=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._meshDesignManagers.find((function(e){return null!=e.side&&e.side.get("sideID")===n})))){e.next=4;break}return e.next=4,r.addItemImage(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setItemText",value:function(e,t){this.execOnMeshManagersContainingItem(e,function(){var n=c(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r.setItemText(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"setItemItalic",value:function(e,t){this.execOnMeshManagersContainingItem(e,function(){var n=c(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r.setItemItalic(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"setItemBold",value:function(e,t){this.execOnMeshManagersContainingItem(e,function(){var n=c(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r.setItemBold(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"setItemColor",value:function(e,t){this.execOnMeshManagersContainingItem(e,function(){var n=c(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r.setItemColor(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"setItemFontFamily",value:function(e,t){this.execOnMeshManagersContainingItem(e,function(){var n=c(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r.setItemFontFamily(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"setItemImage",value:function(){var e=c(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execOnMeshManagersContainingItem(t,function(){var e=c(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setItemImage(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setItemTextOnPath",value:function(e,t,n){var r=this._meshDesignManagers.find((function(e){return null!=e.side&&e.side.get("sideID")===t}));r&&r.setItemTextOnPath(e,n)}},{key:"removeItemImage",value:function(e){this.execOnMeshManagersContainingItem(e,function(){var t=c(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.removeItemImage(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setDesignVisibility",value:function(e,t){var n=this._scene.getMeshByID(e);if(n){var r=this.getMeshDesignMananger(n,n.subMeshes.length>0?n.subMeshes[0]:null);r&&r.setDesignMeshVisibility(t)}}},{key:"getDesignItemsJson",value:function(){for(var e="",t=0;t<this._zkDesign.get("designItems").length;t++)e&&(e+="\n"),e+=this._zkDesign.get("designItems").at(t).get("json");return e}},{key:"getDesignID",value:function(){return this._zkDesign.getDesignID()}},{key:"fireRenderingNeededEvent",value:function(){for(var e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}},{key:"addRenderingNeededListener",value:function(e){this._renderingNeededListeners.push(e)}},{key:"addNotifyMessageListener",value:function(e){this._designNotifyMessageListeners.push(e);var t,n=a(this._meshDesignManagers);try{for(n.s();!(t=n.n()).done;)t.value.addNotifyMessageListener(e)}catch(r){n.e(r)}finally{n.f()}}},{key:"addRemoveMessageListener",value:function(e){this._designRemoveMessageListeners.push(e);var t,n=a(this._meshDesignManagers);try{for(n.s();!(t=n.n()).done;)t.value.addRemoveMessageListener(e)}catch(r){n.e(r)}finally{n.f()}}},{key:"setEventMessages",value:function(e){this._designEventMessages=e;var t,n=a(this._meshDesignManagers);try{for(n.s();!(t=n.n()).done;)t.value.setEventMessages(e)}catch(r){n.e(r)}finally{n.f()}}},{key:"translateDesignView",value:function(e,t,n,r){var i=this.getMeshDesignMananger(e,t);i&&i.translateDesignView(n,r)}},{key:"rotateDesignView",value:function(e,t,n,r,i){var a=this.getMeshDesignMananger(e,t);a&&a.rotateDesignView(n,r,i)}},{key:"scaleDesignView",value:function(e,t,n,r,i,a){var o=this.getMeshDesignMananger(e,t);o&&o.scaleDesignView(n,r,i,a)}},{key:"setDesignViewTextureUVChannelAsync",value:function(){var e=c(s().mark((function e(t,n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.getMeshDesignMananger(t,n))){e.next=4;break}return e.next=4,i.setDesignViewTextureUVChannelAsync(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setDesignViewFormFactorAsync",value:function(){var e=c(s().mark((function e(t,n,r,i){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.getMeshDesignMananger(t,n))){e.next=4;break}return e.next=4,a.setDesignViewFormFactorAsync(r,i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"connectMeshToModelSideAsync",value:function(){var e=c(s().mark((function e(t,n,r){var i,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this.getModelSceneMeshSide(t,n))||!this._scene||!this._zkModel){e.next=16;break}if(!(a=this._scene.getMeshByID(t))){e.next=16;break}if(!(a.subMeshes&&a.subMeshes.length>0&&n>=0&&n<a.subMeshes.length)){e.next=16;break}if(a.subMeshes[n],!(o=this.getDefaultModelScene())){e.next=16;break}return(i=new MPlaza.ModelSceneMeshSide).set("meshID",t),i.set("subMeshID",n),i.set("sideID",r),o.get("meshSides").add(i),e.next=16,this.refreshAsync();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"expandCanvasMeshes",value:function(){this._meshDesignManagers.forEach((function(e){return e.expandCanvasMesh()}))}},{key:"contractCanvasMeshes",value:function(){this._meshDesignManagers.forEach((function(e){return e.contractCanvasMesh()}))}}],n&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/Draco/DracoCompression.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{DracoCompression:function(){return f}});var r=n("../../3D/src/Misc/WorkerPool.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){return"function"===typeof importScripts?(importScripts(e),Promise.resolve()):new Promise((function(t,n){BABYLON.Tools.LoadScript(e,(function(){t()}),(function(e){n(new Error(e))}))}))}function u(e,t,n){var r=t&&e||n;if(r)return s(r).then((function(){return new Promise((function(e){DracoDecoderModule({wasmBinary:t}).then((function(t){e({module:t})}))}))}))}function c(e,t,n,r,i){var a=new e.DecoderBuffer;a.Init(t,t.byteLength);var o,s,u=new e.Decoder;try{var c=u.GetEncodedGeometryType(a);switch(c){case e.TRIANGULAR_MESH:o=new e.Mesh,s=u.DecodeBufferToMesh(a,o);break;case e.POINT_CLOUD:o=new e.PointCloud,s=u.DecodeBufferToPointCloud(a,o);break;default:throw new Error("Invalid geometry type "+c)}if(!s.ok()||!o.ptr)throw new Error(s.error_msg());var l=o.num_points();if(c===e.TRIANGULAR_MESH){var h=o.num_faces(),f=new e.DracoInt32Array;try{for(var d=new Uint32Array(3*h),p=0;p<h;p++){u.GetFaceFromMesh(o,p,f);var g=3*p;d[g+0]=f.GetValue(0),d[g+1]=f.GetValue(1),d[g+2]=f.GetValue(2)}r(d)}finally{e.destroy(f)}}var v=u.GetAttributeId(o,e.POSITION),m=u.GetAttributeByUniqueId(o,v),y=new e.DracoFloat32Array;try{u.GetAttributeFloatForAllPoints(o,m,y);for(var _=new Float32Array(l*m.num_components()),b=0;b<_.length;b++)_[b]=y.GetValue(b);i("position",_)}finally{e.destroy(y)}var x=u.GetAttributeId(o,e.NORMAL);if(-1!==x){var w=u.GetAttributeByUniqueId(o,x),k=new e.DracoFloat32Array;try{u.GetAttributeFloatForAllPoints(o,w,k);for(var S=new Float32Array(l*w.num_components()),C=0;C<S.length;C++)S[C]=k.GetValue(C);i("normal",S)}finally{e.destroy(k)}}var M=u.GetAttributeId(o,e.COLOR);if(-1!==M){var A=u.GetAttributeByUniqueId(o,M),E=new e.DracoFloat32Array;try{u.GetAttributeFloatForAllPoints(o,A,E);var T=new Float32Array(l*A.num_components());for(C=0;C<T.length;C++)T[C]=E.GetValue(C);i("color",T)}finally{e.destroy(E)}}var I=u.GetAttributeId(o,e.TEX_COORD);if(-1!==I){var L=u.GetAttributeByUniqueId(o,I),O=new e.DracoFloat32Array;try{u.GetAttributeFloatForAllPoints(o,L,O);var P=new Float32Array(l*L.num_components());for(C=0;C<P.length;C++)P[C]=O.GetValue(C);i("uv",P)}finally{e.destroy(O)}var D=u.GetAttributeByUniqueId(o,I+1);if(D&&D.size()>0){var B=new e.DracoFloat32Array;try{u.GetAttributeFloatForAllPoints(o,D,B);var N=new Float32Array(l*D.num_components());for(C=0;C<N.length;C++)N[C]=B.GetValue(C);i("uv2",N)}finally{e.destroy(B)}}}}finally{o&&e.destroy(o),e.destroy(u),e.destroy(a)}}function l(){var e;onmessage=function(t){var n=t.data;switch(n.id){case"init":var r=n.decoder;e=u(r.wasmUrl,r.wasmBinary,r.fallbackUrl),postMessage("done");break;case"decodeMesh":if(!e)throw new Error("Draco decoder module is not available");e.then((function(e){c(e.module,n.dataView,n.attributes,(function(e){postMessage({id:"indices",value:e},[e.buffer])}),(function(e,t){postMessage({id:e,value:t},[t.buffer])})),postMessage("done")}))}}}function h(e){return"object"!==("undefined"===typeof document?"undefined":o(document))||"string"!==typeof e?e:BABYLON.Tools.GetAbsoluteUrl(e)}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DefaultNumWorkers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n,i=e.Configuration.decoder,a=i.wasmUrl&&i.wasmBinaryUrl&&"object"===("undefined"===typeof WebAssembly?"undefined":o(WebAssembly))?(n=h(i.wasmBinaryUrl),new Promise((function(e,t){BABYLON.Tools.LoadFile(n,(function(t){e(t)}),void 0,void 0,!0,(function(e,n){t(n)}))}))):Promise.resolve(void 0);t&&"function"===typeof Worker?this._workerPoolPromise=a.then((function(e){for(var n="".concat(s).concat(u).concat(c,"(").concat(l,")()"),a=URL.createObjectURL(new Blob([n],{type:"application/javascript"})),o=new Array(t),f=0;f<o.length;f++)o[f]=new Promise((function(t,n){var r=new Worker(a),o=function e(t){r.removeEventListener("error",e),r.removeEventListener("message",s),n(t)},s=function e(n){"done"===n.data&&(r.removeEventListener("error",o),r.removeEventListener("message",e),t(r))};r.addEventListener("error",o),r.addEventListener("message",s),r.postMessage({id:"init",decoder:{wasmUrl:h(i.wasmUrl),wasmBinary:e,fallbackUrl:h(i.fallbackUrl)}})}));return Promise.all(o).then((function(e){return new r.WorkerPool(e)}))})):this._decoderModulePromise=a.then((function(e){return u(i.wasmUrl,e,i.fallbackUrl)}))}var t,n,a;return t=e,n=[{key:"dispose",value:function(){}},{key:"whenReadyAsync",value:function(){return this._workerPoolPromise?this._workerPoolPromise.then((function(){})):this._decoderModulePromise?this._decoderModulePromise.then((function(){})):Promise.resolve()}},{key:"decodeMeshAsync",value:function(e,t){var n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(this._workerPoolPromise)return this._workerPoolPromise.then((function(e){return new Promise((function(r,i){e.push((function(e,a){var o=new BABYLON.VertexData,s=function t(n){e.removeEventListener("error",t),e.removeEventListener("message",u),i(n),a()},u=function t(n){"done"===n.data?(e.removeEventListener("error",s),e.removeEventListener("message",t),r(o),a()):"indices"===n.data.id?o.indices=n.data.value:o.set(n.data.value,n.data.id)};e.addEventListener("error",s),e.addEventListener("message",u);var c=new Uint8Array(n.byteLength);c.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),e.postMessage({id:"decodeMesh",dataView:c,attributes:t},[c.buffer])}))}))}));if(this._decoderModulePromise)return this._decoderModulePromise.then((function(e){var t=new BABYLON.VertexData;return c(e.module,n,0,(function(e){t.indices=e}),(function(e,n){t.set(n,e)})),t}));throw new Error("Draco decoder module is not available")}}],a=[{key:"DecoderAvailable",get:function(){var t=e.Configuration.decoder;return!!(t.wasmUrl&&t.wasmBinaryUrl&&"object"===("undefined"===typeof WebAssembly?"undefined":o(WebAssembly))||t.fallbackUrl)}},{key:"GetDefaultNumWorkers",value:function(){return"object"===("undefined"===typeof navigator?"undefined":o(navigator))&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),1):1}},{key:"Default",get:function(){return e._Default||(e._Default=new e),e._Default}}],n&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();a(f,"Configuration",{decoder:{wasmUrl:"https://zakekecdn.azureedge.net/cdn/Scripts/draco/1.3.4/rev.1/draco_wasm_wrapper.js",wasmBinaryUrl:"https://zakekecdn.azureedge.net/cdn/Scripts/draco/1.3.4/rev.1/draco_decoder.wasm",fallbackUrl:"https://zakekecdn.azureedge.net/cdn/Scripts/draco/1.3.4/rev.1/draco_decoder.js"}}),a(f,"DefaultNumWorkers",f.GetDefaultNumWorkers()),a(f,"_Default",null)},"../../3D/src/Components/Environment/EnvironmentManager.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{EnvironmentManager:function(){return s}});var r=n("../../3D/src/Misc/DefaultAssetUrls.ts"),i=n("../../3D/src/Components/SceneHelper.ts");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_originalSceneClearColor",null),o(this,"_originalCameraAutoRotate",null),o(this,"_environmentHelper",null),o(this,"_shadowLight",null),o(this,"_isHologram",!1),this._zkScene=t,this._scene=n,this._sceneHelper=new i.SceneHelper(this._scene),this._isHologram=r}var t,n,s;return t=e,(n=[{key:"scene",get:function(){return this._scene}},{key:"isHologram",get:function(){return this._isHologram},set:function(e){this._isHologram=e,this.update()}},{key:"dispose",value:function(){this._shadowLight&&this._shadowLight.dispose(),this._environmentHelper&&(this._environmentHelper.dispose(),this._environmentHelper=null),this.removeOldSkybox()}},{key:"update",value:function(){this.configureScene(),this.configureCamera(),this.configureSkybox()}},{key:"configureSkybox",value:function(){this.removeOldSkybox(),this._isHologram||this.createSkybox()}},{key:"removeOldSkybox",value:function(){var e=this.getSkyboxMesh(),t=this.getSkyboxMaterial();e&&e.dispose(),t&&t.dispose()}},{key:"createSkybox",value:function(){this.getGeneralConfig();var e=this.getEnvironmentConfig(),t=this.getSkyboxConfig();if(t&&void 0!=t.get("createSkybox")&&t.get("createSkybox")){var n,r;e&&void 0!=e.get("sizeAuto")&&null!=e.get("sizeAuto")&&"boolean"===typeof e.get("sizeAuto")&&e.get("sizeAuto");var i=null;void 0!=t.get("size")&&"number"===typeof t.get("size")&&(i=t.get("size"));var a=null;void 0!=t.get("texture")&&"string"===typeof t.get("texture")&&(a=t.get("texture"));var o=0;t.get("blur")>0&&(o=t.get("blur"));var s=null;void 0!=t.get("extensions")&&null!=t.get("extensions")&&"[object Array]"===Object.prototype.toString.call(t.get("extensions"))&&6===(null===(n=t.get("extensions"))||void 0===n?void 0:n.length)&&(s=t.get("extensions"));var u=null;if(void 0!=t.get("files")&&null!=t.get("files")&&"[object Array]"===Object.prototype.toString.call(t.get("files"))&&6===(null===(r=t.get("files"))||void 0===r?void 0:r.length)&&(u=t.get("files")),a){var c=null;if(c=a.endsWith(".dds")?BABYLON.CubeTexture.CreateFromPrefilteredData(a,this._scene):a.endsWith(".hdr")?new BABYLON.HDRCubeTexture(a,this._scene,256,!1,!0,!1,!0):a.endsWith(".env")?new BABYLON.CubeTexture(a,this._scene,null,!1,null,void 0,null,void 0,!0,void 0,!0):a.endsWith(".basis")?BABYLON.CubeTexture.CreateFromPrefilteredData(a,this._scene):s&&u?new BABYLON.CubeTexture(a,this._scene,s,!1,u,void 0):BABYLON.CubeTexture.CreateFromPrefilteredData(a,this._scene)){var l=1e3;l=null!=i&&i>0?i:(this._scene.activeCamera.maxZ-this._scene.activeCamera.minZ)/2;var h=this._scene.createDefaultSkybox(c,!0,l,o,!1);if(h){h.metadata={isSkyboxMesh:!0,isRealMesh:!1},h.doNotSerialize=!0;var f=h.material;f&&(f.metadata={isSkyboxMaterial:!0,isRealMaterial:!1},f.doNotSerialize=!0)}}}}}},{key:"getSkyboxMesh",value:function(){return this._scene.meshes.find((function(e){return e.metadata&&e.metadata.isSkyboxMesh}))||null}},{key:"getSkyboxMaterial",value:function(){var e=this._scene.materials.find((function(e){return e.metadata&&e.metadata.isSkyboxMaterial}));return e||null}},{key:"getSkyboxTexture",value:function(){var e=this.getSkyboxMaterial();return e?e.reflectionTexture:null}},{key:"update_OLD",value:function(){this.configureScene(),this.configureCamera(),this.configureEnvironment()}},{key:"configureScene",value:function(){if(this._scene)if(this._originalSceneClearColor=this._scene.clearColor.clone(),this._isHologram)this._scene.clearColor=new BABYLON.Color4(0,0,0,1);else{var e=this.getGeneralConfig();if(e){var t=null;void 0!=e.get("backgroundAlpha")&&null!=e.get("backgroundAlpha")&&"number"===typeof e.get("backgroundAlpha")&&(t=e.get("backgroundAlpha"));var n=null;if(void 0!=e.get("backgroundColor")&&"string"===typeof e.get("backgroundColor")&&this.isValidHexColor(e.get("backgroundColor"))&&(n=e.get("backgroundColor")),t||n){this._originalSceneClearColor=this._scene.clearColor;var r=this._scene.clearColor;if(null!=n){var i=BABYLON.Color3.FromHexString(n);r.r=i.r,r.g=i.g,r.b=i.b}null!=t&&(r.a=t)}}}}},{key:"configureEnvironment",value:function(){if(this._environmentHelper&&(this._environmentHelper.dispose(),this._environmentHelper=null),this._shadowLight&&(this._shadowLight.dispose(),this._shadowLight=null),0!=this._sceneHelper.countSceneMeshes()){var e=this.buildEnvironmentHelperOptions();if(e){this._environmentHelper=this._scene.createDefaultEnvironment(e);for(var t=this.getEnvironmentSceneNodes(),n=0;n<t.length;n++){var r=t[n];r&&(this.setDoNotSerialize(r),r.metadata||(r.metadata={}),r.metadata.isEnvironmentNode=!0,r instanceof BABYLON.AbstractMesh&&(r.isPickable=!1,r.metadata.isRealMesh=!1),r instanceof BABYLON.Material&&(r.metadata.isRealMaterial=!1))}}}}},{key:"buildEnvironmentHelperOptions",value:function(){var e=null,t=this.getGeneralConfig(),n=this.getEnvironmentConfig(),i=this.getSkyboxConfig(),a=this.getGroundConfig(),o=this.getCameraConfig(),s=null;t&&void 0!=t.get("environmentTexture")&&null!=t.get("environmentTexture")&&(s=t.get("environmentTexture"));var u=null;o&&void 0!=o.get("contrast")&&"number"===typeof o.get("contrast")&&(u=o.get("contrast"));var c=null;o&&void 0!=o.get("exposure")&&"number"===typeof o.get("exposure")&&(c=o.get("exposure"));var l=null;o&&void 0!=o.get("toneMappingEnabled")&&"boolean"===typeof o.get("toneMappingEnabled")&&(l=o.get("toneMappingEnabled"));var h=null;n&&void 0!=n.get("sizeAuto")&&null!=n.get("sizeAuto")&&"boolean"===typeof n.get("sizeAuto")&&(h=n.get("sizeAuto"));var f=null;n&&void 0!=n.get("mainColor")&&"string"===typeof n.get("mainColor")&&this.isValidHexColor(n.get("mainColor"))&&(f=n.get("mainColor"));var d=null;a&&void 0!=a.get("size")&&"number"===typeof a.get("size")&&(d=a.get("size"));var p=null;a&&void 0!=a.get("color")&&"string"===typeof a.get("color")&&this.isValidHexColor(a.get("color"))&&(p=a.get("color"));var g=null;a&&void 0!=a.get("enableShadow")&&"boolean"===typeof a.get("enableShadow")&&(g=a.get("enableShadow"));var v=null;a&&void 0!=a.get("shadowLevel")&&"number"===typeof a.get("shadowLevel")&&(v=a.get("shadowLevel"));var m=null;a&&void 0!=a.get("enableMirror")&&"boolean"===typeof a.get("enableMirror")&&(m=a.get("enableMirror"));var y=null;a&&void 0!=a.get("texture")&&"string"===typeof a.get("texture")&&(y=a.get("texture"));var _=null;a&&void 0!=a.get("opacity")&&"number"===typeof a.get("opacity")&&(_=a.get("opacity"));var b=null;a&&void 0!=a.get("mirrorBlurKernel")&&"number"===typeof a.get("mirrorBlurKernel")&&(b=a.get("mirrorBlurKernel"));var x=null;i&&void 0!=i.get("size")&&"number"===typeof i.get("size")&&(x=i.get("size"));var w=null;i&&void 0!=i.get("color")&&"string"===typeof i.get("color")&&this.isValidHexColor(i.get("color"))&&(w=i.get("color"));var k=null;return i&&void 0!=i.get("texture")&&"string"===typeof i.get("texture")&&(k=i.get("texture")),(i||a||null!=s||null!=u||null!=c||l)&&((e=e||{createSkybox:i&&i.get("createSkybox"),createGround:a&&a.get("createGround")}).setupImageProcessing=!1,null!=s&&(e.environmentTexture=s),(e.createSkybox||e.createGround)&&(null!=h&&(e.sizeAuto=h),null!=f&&(e.mainColor=BABYLON.Color3.FromHexString(f)),e.createGround&&(e.sizeAuto||null==d||(e.groundSize=d),e.mainColor||null==p||(e.groundColor=BABYLON.Color3.FromHexString(p)),null!=g&&(e.enableGroundShadow=g),e.enableGroundShadow&&this.createShadowLight(),null!=v&&(e.groundShadowLevel=v),null!=m&&(e.enableGroundMirror=m),null!=y&&(e.groundTexture=y),null!=_&&(e.groundOpacity=_),e.enableGroundMirror&&null!=b&&(e.groundMirrorBlurKernel=b)),e.createSkybox&&(e.sizeAuto||null==x||(e.skyboxSize=x),e.mainColor||null==w||(e.skyboxColor=BABYLON.Color3.FromHexString(w)),null!=k&&(e.skyboxTexture=k)),o&&(null!=u&&(e.cameraContrast=u),null!=c&&(e.cameraExposure=c),null!=l&&(e.toneMappingEnabled=l)))),e&&(e.environmentTexture||this._scene.environmentTexture||(e.environmentTexture=r.DefaultAssetUrls.Environment.EnvironmentTextureCDNUrl),void 0!=e.createGround&&e.createGround&&!e.groundTexture&&(e.groundTexture=r.DefaultAssetUrls.Environment.GroundTextureCDNUrl),void 0!=e.createSkybox&&e.createSkybox&&!e.skyboxTexture&&(e.skyboxTexture=r.DefaultAssetUrls.Environment.SkyboxTextureCDNUrl)),e}},{key:"createShadowLight",value:function(){if(this._shadowLight&&(this._shadowLight.dispose(),this._shadowLight=null),this._scene&&this._sceneHelper){var e=this._sceneHelper.getSceneBoundingInfo();if(e&&e.boundingBox){var t=e.boundingBox.vectorsWorld,n=Number(t[1].x-t[0].x),r=Number(t[1].y-t[0].y),i=Number(t[1].z-t[0].z),a=e.boundingBox.centerWorld,o=(e.boundingBox.maximumWorld,a.x+2.67*n),s=a.y+4.5*r,u=a.z+1*i,c=new BABYLON.Vector3(o,s,u),l=a.subtract(c);l=BABYLON.Vector3.Normalize(l),l=new BABYLON.Vector3(-2,-3,1),this._shadowLight=new BABYLON.DirectionalLight("shadowLight",l,this._scene),this._shadowLight.position=c,this._shadowLight.intensity=.1;var h=new BABYLON.ShadowGenerator(512,this._shadowLight);h.useBlurExponentialShadowMap=!0,h.useKernelBlur=!0,h.usePercentageCloserFiltering=!0,h.blurKernel=32;for(var f=0;f<this._scene.meshes.length;f++){var d=this._scene.meshes[f];!this.isEnvironmentNode(d)&&this._sceneHelper.isRealMesh(d)&&(d.receiveShadows=!1,h.addShadowCaster(d))}}}}},{key:"configureCamera",value:function(){if(this._scene&&this._scene.activeCamera&&this._scene.activeCamera instanceof BABYLON.ArcRotateCamera){var e=this.getCameraConfig();if(e){var t=this._scene.activeCamera;this._originalCameraAutoRotate=t.useAutoRotationBehavior;var n=e.get("autoRotate");t.useAutoRotationBehavior=void 0!=n&&n}}}},{key:"sanityCheck",value:function(){return this._scene&&this._scene instanceof BABYLON.Scene&&this._zkScene&&this._zkScene instanceof Zakeke.Scene&&void 0!=this._zkScene.get("config")&&null!=this._zkScene.get("config")&&this._zkScene.get("config")instanceof Zakeke.SceneConfig}},{key:"getSceneConfig",value:function(){if(this.sanityCheck()){var e=this._zkScene.getSceneConfig();if(void 0!=e&&null!=e)return e}return null}},{key:"getGeneralConfig",value:function(){if(this.sanityCheck()){var e=this._zkScene.getGeneralConfig();if(void 0!=e&&null!=e)return e}return null}},{key:"getEnvironmentConfig",value:function(){if(this.sanityCheck()){var e=this._zkScene.getEnvironmentConfig();if(void 0!=e&&null!=e)return e}return null}},{key:"getSkyboxConfig",value:function(){if(this.sanityCheck()){var e=this._zkScene.getSkyboxConfig();if(void 0!=e&&null!=e)return e}return null}},{key:"getGroundConfig",value:function(){if(this.sanityCheck()){var e=this._zkScene.getGroundConfig();if(void 0!=e&&null!=e)return e}return null}},{key:"getCameraConfig",value:function(){if(this.sanityCheck()){var e=this._zkScene.getCameraConfig();if(void 0!=e&&null!=e)return e}return null}},{key:"isValidHexColor",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}},{key:"getEnvironmentSceneNodes",value:function(){var e=[];return this._environmentHelper&&(this._environmentHelper.rootMesh&&e.push(this._environmentHelper.rootMesh),this._environmentHelper.skybox&&e.push(this._environmentHelper.skybox),this._environmentHelper.skyboxMaterial&&e.push(this._environmentHelper.skyboxMaterial),this._environmentHelper.skyboxTexture&&e.push(this._environmentHelper.skyboxTexture),this._environmentHelper.ground&&e.push(this._environmentHelper.ground),this._environmentHelper.groundMaterial&&e.push(this._environmentHelper.groundMaterial),this._environmentHelper.groundTexture&&e.push(this._environmentHelper.groundTexture),this._environmentHelper.groundMirror&&e.push(this._environmentHelper.groundMirror),this._shadowLight&&e.push(this._shadowLight)),e}},{key:"isEnvironmentNode",value:function(e){for(var t=this.getEnvironmentSceneNodes(),n=0;n<t.length;n++)if(e==t[n])return!0;return!1}},{key:"setDoNotSerialize",value:function(e){(e instanceof BABYLON.AbstractMesh||e instanceof BABYLON.Material||e instanceof BABYLON.Light)&&(e.doNotSerialize=!0)}},{key:"reset",value:function(){this._scene&&(this._originalSceneClearColor&&(this._scene.clearColor=this._originalSceneClearColor),null!=this._originalCameraAutoRotate&&this._scene.activeCamera&&this._scene.activeCamera instanceof BABYLON.ArcRotateCamera&&(this._scene.activeCamera.useAutoRotationBehavior=this._originalCameraAutoRotate),this._environmentHelper&&this._environmentHelper.updateOptions({}))}}])&&a(t.prototype,n),s&&a(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/Glow/GlowManager.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{GlowManager:function(){return a}});var r=n("../../3D/src/Components/SceneHelper.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var i,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=null,(a="_glowLayer")in(i=this)?Object.defineProperty(i,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[a]=o,this._zkScene=t,this._scene=n,this._sceneHelper=new r.SceneHelper(this._scene),this._glowLayer=this._scene.getGlowLayerByName("glow")}var t,n,a;return t=e,(n=[{key:"enabled",get:function(){var e=this.getGlowConfig();return e&&void 0!=e.get("enabled")&&"boolean"===typeof e.get("enabled")&&e.get("enabled"),!1},set:function(e){var t=this.getOrCreateGlowConfig();t&&t.set("enabled",e),this.update()}},{key:"intensity",get:function(){var e=this.getGlowConfig();return e&&void 0!=e.get("intensity")&&"number"===typeof e.get("intensity")&&e.get("intensity"),1},set:function(e){var t=this.getOrCreateGlowConfig();t&&t.set("intensity",e),this.update()}},{key:"blurSize",get:function(){var e=this.getGlowConfig();return e&&void 0!=e.get("blurSize")&&"number"===typeof e.get("blurSize")&&e.get("blurSize"),1},set:function(e){var t=this.getOrCreateGlowConfig();t&&t.set("blurSize",e),this.update()}},{key:"dispose",value:function(){this.destroyGlowLayer()}},{key:"destroyGlowLayer",value:function(){this._glowLayer&&(this._glowLayer.dispose(),this._glowLayer=null)}},{key:"createOrUpdateGlowLayer",value:function(e,t){this._glowLayer||(this._glowLayer=new BABYLON.GlowLayer("glow",this._scene)),this._glowLayer&&(this._glowLayer.intensity=e,this._glowLayer.blurKernelSize=t)}},{key:"update",value:function(){if(this._scene)if(this.getGlowConfig()){var e=this.enabled,t=this.intensity,n=this.blurSize;e?this.createOrUpdateGlowLayer(t,n):this.destroyGlowLayer()}else this.destroyGlowLayer()}},{key:"turnOffGlow",value:function(){this.destroyGlowLayer()}},{key:"turnOnGlow",value:function(){this.update()}},{key:"sanityCheck",value:function(){return this._scene&&this._scene instanceof BABYLON.Scene&&this._zkScene&&this._zkScene instanceof Zakeke.Scene&&void 0!=this._zkScene.get("config")&&null!=this._zkScene.get("config")&&this._zkScene.get("config")instanceof Zakeke.SceneConfig}},{key:"isGlowEnabledForMesh",value:function(e){return!!e&&e.metadata&&e.metadata.enableGlow}},{key:"enableGlowForMesh",value:function(e){}},{key:"disableGlowForMesh",value:function(e){}},{key:"getGlowConfig",value:function(){if(this.sanityCheck()){var e=this._zkScene.getGlowConfig();if(e)return e}return null}},{key:"getOrCreateGlowConfig",value:function(){return this.sanityCheck()?this._zkScene.getOrCreateGlowConfig():null}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/IncrementalFiles/IncrementalFiles.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{IncrementalFiles:function(){return h}});var r=n("../../3D/src/Misc/WorkerPool.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){return"function"===typeof importScripts?(importScripts(e),Promise.resolve()):new Promise((function(t,n){BABYLON.Tools.LoadScript(e,(function(){t()}),(function(e){n(new Error(e))}))}))}function u(e){if(0==e.length)return Promise.resolve();for(var t=[],n=0;n<e.length;n++)t.push(s(e[n]));return new Promise((function(e){Promise.all(t).then((function(){return e()}))}))}function c(e,t,n){return(new MakeIncremental).getSceneIncrementalFiles(e,t,n)}function l(){var e;onmessage=function(t){var n=t.data;switch(n.id){case"init":var r=n.urls;e=u(r),postMessage("done");break;case"makeIncremental":if(!e)throw new Error("Worker not initialized");e.then((function(){var e=c(n.sceneJson,n.version,n.options);postMessage({id:"result",files:e}),postMessage("done")}))}}}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DefaultNumWorkers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=["/Scripts/libs/underscore/underscore.js","/Scripts/libs/backbone/backbone.js","/Scripts/libs/backbone/backbone-associations.js","/Scripts/libs/msgpack/msgpack.min.js","/Scripts/libs/draco/draco_encoder.js","/Scripts/composer/models/model.js","/Scripts/composer/helpers/utils.js","/Scripts/3D/dist/MakeIncremental.js"].map((function(e){return function(e){return"object"!==("undefined"===typeof document?"undefined":o(document))||"string"!==typeof e?e:BABYLON.Tools.GetAbsoluteUrl(e)}(e)}));if(t&&"function"===typeof Worker){for(var i="".concat(s).concat(u).concat(c,"(").concat(l,")()"),a=URL.createObjectURL(new Blob([i],{type:"application/javascript"})),h=new Array(t),f=0;f<h.length;f++)h[f]=new Promise((function(e,t){var r=new Worker(a),i=function e(n){r.removeEventListener("error",e),r.removeEventListener("message",o),t(n)},o=function t(n){"done"===n.data&&(r.removeEventListener("error",i),r.removeEventListener("message",t),e(r))};r.addEventListener("error",i),r.addEventListener("message",o),r.postMessage({id:"init",urls:n})}));this._workerPoolPromise=Promise.all(h).then((function(e){return new r.WorkerPool(e)}))}}var t,n,a;return t=e,n=[{key:"dispose",value:function(){}},{key:"whenReadyAsync",value:function(){return this._workerPoolPromise?this._workerPoolPromise.then((function(){})):Promise.resolve()}},{key:"getIncrementalFilesAsync",value:function(e,t,n){if(this._workerPoolPromise)return this._workerPoolPromise.then((function(r){return new Promise((function(i,a){r.push((function(r,o){var s=[],u=function e(t){r.removeEventListener("error",e),r.removeEventListener("message",c),a(t),o()},c=function e(t){"done"===t.data?(r.removeEventListener("error",u),r.removeEventListener("message",e),i(s),o()):"result"===t.data.id&&(s=t.data.files)};r.addEventListener("error",u),r.addEventListener("message",c),r.postMessage({id:"makeIncremental",sceneJson:e,version:t,options:n})}))}))}));throw new Error("Incremental file worker is not available")}}],a=[{key:"GetDefaultNumWorkers",value:function(){return"object"===("undefined"===typeof navigator?"undefined":o(navigator))&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),2):1}},{key:"Default",get:function(){return e._Default||(e._Default=new e),e._Default}}],n&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();a(h,"DefaultNumWorkers",h.GetDefaultNumWorkers()),a(h,"_Default",null)},"../../3D/src/Components/IncrementalFiles/MakeIncremental.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{MakeIncremental:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return i}))});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getSceneIncrementalFiles",value:function(e,t,n){var r=this,i=[],a={useDraco:n.useDraco||!1,dracoEncodingSpeed:n.dracoEncodingSpeed||5,dracoDecodingSpeed:n.dracoDecodingSpeed||5},o=n.excludedMeshes||[];e.autoClear=!0;var s=[];e.meshes.forEach((function(e){if(!o.some((function(t){return t.test(e.name)}))){if(e.subMeshes&&e.subMeshes.length>1)return void(e.geometryId&&s.push(e.geometryId));if(e.checkCollisions)e.geometryId&&s.push(e.geometryId);else{var n=r.extractIncrementalFile(t,e,!0,a);n&&i.push(n)}}}));var u=e.geometries;if(u&&u.vertexData.forEach((function(e){var n=e.id;if(!s.some((function(e){return e===n}))){var o=r.extractIncrementalFile(t,e,!1,a);o&&i.push(o)}})),e.metadata&&e.metadata.delayedMaterials)for(var c=Object.keys(e.metadata.delayedMaterials),l=function(n){var a=e.materials[n];if(c.some((function(e){return e===a.id}))){var o=e.metadata.delayedMaterials[a.id],s=r.extractIncrementalMaterialFile(t,a,o.file);s&&(i.push(s),e.materials.splice(n--,1))}h=n},h=0;h<e.materials.length;h++)l(h);var f=new Zakeke.IncrementalFileInfo;return f.name="scene_"+t+".incremental.babylon",f.isScene=!0,f.dracoEncoded=!1,f.data=JSON.stringify(e,null,0),i.push(f),i}},{key:"extractIncrementalFile",value:function(e,t,n,r){var i=null;if(t.positions&&t.normals&&t.indices&&(i=this.createDelayLoadingFile(e,t,n,r))&&i.data){t.delayLoadingFile=i.name;for(var a=t.positions.map((function(e){return parseFloat(e)})),o=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],s=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],u=0;u<a.length;u+=3){var c=a[u],l=a[u+1],h=a[u+2];c<o[0]&&(o[0]=c),c>s[0]&&(s[0]=c),l<o[1]&&(o[1]=l),l>s[1]&&(s[1]=l),h<o[2]&&(o[2]=h),h>s[2]&&(s[2]=h)}t.boundingBoxMinimum=o,t.boundingBoxMaximum=s,t.positions=null,t.normals=null,t.indices=null,t.uvs&&(t.hasUVs=!0,t.uvs=null),t.uv2s&&(t.hasUVs2=!0,t.uv2s=null),t.colors&&(t.hasColors=!0,t.colors=null),t.tangents&&(t.hasTangents=!0,t.tangents=null),t.matricesIndices&&(t.hasMatricesIndices=!0,t.matricesIndices=null),t.matricesWeights&&(t.hasMatricesWeights=!0,t.matricesWeights=null),n&&t.subMeshes&&(t.subMeshes=null)}return i&&i.data?i:null}},{key:"createDelayLoadingFile",value:function(e,t,n,r){var i=new Zakeke.IncrementalFileInfo;i.isScene=!1;var a=r.useDraco&&!n&&!(t.matricesIndices||t.matricesWeights||t.tangents)&&t.indices.length>0&&t.positions.length>0&&t.normals.length>0;i.dracoEncoded=a;var o=(n?t.name:t.id).replace("+","_").replace(" ","_"),s=a?"draco":"";return i.name="scene_"+e+"."+o+(n?".babylonmesh"+s+"data":".babylongeometry"+s+"data"),i.data=a?this.createDracoDelayLoadingFileData(t,r):this.createPlainDelayLoadingFileData(t,n),i}},{key:"createPlainDelayLoadingFileData",value:function(e,t){var n={positions:e.positions,indices:e.indices,normals:e.normals};return e.uvs&&(n.uvs=e.uvs),e.uv2s&&(n.uv2s=e.uv2s),e.colors&&(n.colors=e.colors),e.tangents&&(n.tangents=e.tangents),e.matricesIndices&&(n.matricesIndices=e.matricesIndices),e.matricesWeights&&(n.matricesWeights=e.matricesWeights),t&&e.subMeshes&&(n.subMeshes=e.subMeshes),JSON.stringify(n,null,0)}},{key:"createDracoDelayLoadingFileData",value:function(e,t){(new Date).getTime();var n=this.getDracoEncodedGeometry(e,t);if((new Date).getTime(),n){var r={type:"draco",data:n};return msgpack.encode(r)}return null}},{key:"getDracoEncodedGeometry",value:function(e,t){if(!e)return null;var n=e.positions,r=e.normals,i=e.colors,a=e.uvs,o=e.uv2s,s=e.indices,u={indices:new Uint32Array(s),positions:new Float32Array(n),normals:new Float32Array(r)};a&&(u.uvs=new Float32Array(a)),o&&(u.uv2s=new Float32Array(o)),i&&(u.colors=new Float32Array(i));var c=DracoEncoderModule(),l=new c.Encoder,h=new c.MeshBuilder,f=new c.Mesh,d=u.indices.length/3,p=u.positions.length/3;h.AddFacesToMesh(f,d,u.indices),h.AddFloatAttributeToMesh(f,c.POSITION,p,3,u.positions),u.normals&&h.AddFloatAttributeToMesh(f,c.NORMAL,p,3,u.normals),u.colors&&h.AddFloatAttributeToMesh(f,c.COLOR,p,4,u.colors),u.uvs&&h.AddFloatAttributeToMesh(f,c.TEX_COORD,p,2,u.uvs),u.uv2s&&h.AddFloatAttributeToMesh(f,c.TEX_COORD,p,2,u.uv2s),l.SetSpeedOptions(t.dracoEncodingSpeed,t.dracoDecodingSpeed),l.SetAttributeQuantization(c.POSITION,14),l.SetAttributeQuantization(c.TEX_COORD,12),l.SetAttributeQuantization(c.NORMAL,10),l.SetAttributeQuantization(c.COLOR,10),l.SetAttributeQuantization(c.GENERIC,8),l.SetEncodingMethod(c.MESH_EDGEBREAKER_ENCODING);for(var g=new c.DracoInt8Array,v=l.EncodeMeshToDracoBuffer(f,g),m=new ArrayBuffer(v),y=new Int8Array(m),_=0;_<v;++_)y[_]=g.GetValue(_);return c.destroy(f),c.destroy(g),c.destroy(l),c.destroy(h),m}},{key:"extractIncrementalMaterialFile",value:function(e,t,n){return this.createDelayLoadingMaterialFile(e,t,n)}},{key:"createDelayLoadingMaterialFile",value:function(e,t,n){var r=new Zakeke.IncrementalFileInfo;return r.isScene=!1,r.dracoEncoded=!1,r.name=n,r.data=this.createMaterialFileData(t),r}},{key:"createMaterialFileData",value:function(e){return JSON.stringify(e,null,0)}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/InfoPointsManager/InfoPointsManager.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{InfoPointsManager:function(){return u}});var r=n("../../3D/src/Components/SceneHelper.ts");function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_meshesInfoPoints",{}),s(this,"_infoPoints",[]),s(this,"_imageUrls",[]),s(this,"_currentIdx",0),s(this,"_imagePanel",null),s(this,"_loadingText",null),s(this,"_image",null),s(this,"_closeImageButton",null),s(this,"_moveNextImageButton",null),s(this,"_movePrevImageButton",null),s(this,"_isOnMoveNextButton",!1),s(this,"_isOnMovePrevButton",!1),s(this,"_lastCameraPosition",null),s(this,"onBeforeShowImages",null),s(this,"onAfterShowImages",null),s(this,"_infoPointsShown",!0),s(this,"_canShowInfoPointsContent",!0),s(this,"_infoPointPickedListeners",[]),s(this,"_infoPointContentShownListeners",[]),s(this,"_infoPointContentHiddenListeners",[]),s(this,"_renderingNeededListeners",[]),s(this,"CLOSE_SVG","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-close' style='fill:\xa7color\xa7'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/g%3E%3C/svg%3E"),s(this,"CHEVRON_LEFT_SVG","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-chevron-left'%3E%3Cpath fill='\xa7color\xa7' d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/g%3E%3C/svg%3E"),s(this,"CHEVRON_RIGHT_SVG","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-chevron-right'%3E%3Cpath fill='\xa7color\xa7' d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/g%3E%3C/svg%3E"),this._zkScene=t,this._scene=n,this._sceneHelper=new r.SceneHelper(n),this._style={},this.setDefaultStyle(),i&&this.setStyle(i),this._rootContainer=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI",!0,this._scene)}var t,n,a;return t=e,(n=[{key:"infoPointsShown",get:function(){return this._infoPointsShown}},{key:"canShowInfoPointsContent",get:function(){return this._canShowInfoPointsContent},set:function(e){this._canShowInfoPointsContent=e,this.hideImages()}},{key:"dispose",value:function(){this._renderingNeededListeners=[],this._rootContainer.dispose()}},{key:"setDefaultStyle",value:function(){this._style.infoPointsStyle={borderColor:"#ffffff",innerPointColor:"#ffffff",color:"#a01c20",highlightColor:"#bb2025"},this._style.imagePanelStyle={backgroundColor:this._scene.clearColor.toHexString(),loadingTextColor:"#ffffff",buttonsBorderColor:"#a01c20",buttonsColor:"#a01c20",buttonsBorderHighlightColor:"#bb2025",buttonsHighlightColor:"#bb2025",buttonsIconColor:"white"}}},{key:"setStyle",value:function(e){e?(e.infoPointsStyle&&(this._style.infoPointsStyle||(this._style.infoPointsStyle={}),e.infoPointsStyle.borderColor&&(this._style.infoPointsStyle.borderColor=e.infoPointsStyle.borderColor),e.infoPointsStyle.innerPointColor&&(this._style.infoPointsStyle.innerPointColor=e.infoPointsStyle.innerPointColor),e.infoPointsStyle.color&&(this._style.infoPointsStyle.color=e.infoPointsStyle.color),e.infoPointsStyle.highlightColor&&(this._style.infoPointsStyle.highlightColor=e.infoPointsStyle.highlightColor)),e.imagePanelStyle&&(this._style.imagePanelStyle||(this._style.imagePanelStyle={}),e.imagePanelStyle.backgroundColor&&(this._style.imagePanelStyle.backgroundColor=e.imagePanelStyle.backgroundColor),e.imagePanelStyle.loadingTextColor&&(this._style.imagePanelStyle.loadingTextColor=e.imagePanelStyle.loadingTextColor),e.imagePanelStyle.buttonsBorderColor&&(this._style.imagePanelStyle.buttonsBorderColor=e.imagePanelStyle.buttonsBorderColor),e.imagePanelStyle.buttonsColor&&(this._style.imagePanelStyle.buttonsColor=e.imagePanelStyle.buttonsColor),e.imagePanelStyle.buttonsBorderHighlightColor&&(this._style.imagePanelStyle.buttonsBorderHighlightColor=e.imagePanelStyle.buttonsBorderHighlightColor),e.imagePanelStyle.buttonsHighlightColor&&(this._style.imagePanelStyle.buttonsHighlightColor=e.imagePanelStyle.buttonsHighlightColor),e.imagePanelStyle.buttonsIconColor&&(this._style.imagePanelStyle.buttonsIconColor=e.imagePanelStyle.buttonsIconColor))):this.setDefaultStyle()}},{key:"applyStyle",value:function(e){this.setStyle(e),this.refresh()}},{key:"showInfoPoints",value:function(){this.hideImages(),this.getAllInfoPoints().forEach((function(e){return e.isVisible=!0})),this._infoPointsShown=!0,this.fireRenderingNeededEvent()}},{key:"hideInfoPoints",value:function(){this.hideImages(),this.getAllInfoPoints().forEach((function(e){return e.isVisible=!1})),this._infoPointsShown=!1,this.fireRenderingNeededEvent()}},{key:"refresh",value:function(){this.hideImages(),this.refreshInfoPoints(),this.updateGuiElementsStyle(),this.fireRenderingNeededEvent()}},{key:"getAllInfoPoints",value:function(){var e=[];for(var t in this._meshesInfoPoints)e.push(this._meshesInfoPoints[t]);return e}},{key:"refreshInfoPoints",value:function(){for(var e=0;e<this._scene.meshes.length;e++){var t=this._scene.meshes[e],n=t.metadata&&t.metadata.showInfoPoints&&(t.isVisible||t.metadata.forceShowInfoPoints),r=t.material,i=r?this.getMaterialPhotoUrls(r):[];if(n&&i.length>0){var a=this.getOrCreateMeshInfoPoint(t);this.updateInfoPointUrls(a,i)}else this.removeMeshInfoPoints(t)}}},{key:"removeMeshInfoPoints",value:function(e){this._meshesInfoPoints.hasOwnProperty(e.id)&&(this._meshesInfoPoints[e.id].dispose(),delete this._meshesInfoPoints[e.id])}},{key:"getOrCreateMeshInfoPoint",value:function(e){if(this._meshesInfoPoints.hasOwnProperty(e.id))return this._meshesInfoPoints[e.id];var t=this.createMeshInfoPoint(e);return this._meshesInfoPoints[e.id]=t,t}},{key:"updateInfoPointUrls",value:function(e,t){e.metadata||(e.metadata={}),e.metadata.urls=t}},{key:"createMeshInfoPoint",value:function(e){var t,n,r,i,a=this,o=new BABYLON.GUI.Ellipse("infoPoint");o.width="29px",o.height="29px",o.color=(null===(t=this._style.infoPointsStyle)||void 0===t?void 0:t.borderColor)||"#dddddd",o.thickness=4,o.background=(null===(n=this._style.infoPointsStyle)||void 0===n?void 0:n.color)||"#a01c20",o.alpha=1,o.onPointerEnterObservable.add((function(e){var t;o.background=(null===(t=a._style.infoPointsStyle)||void 0===t?void 0:t.highlightColor)||"#bb2025",a.fireRenderingNeededEvent()})),o.onPointerOutObservable.add((function(e){var t;o.background=(null===(t=a._style.infoPointsStyle)||void 0===t?void 0:t.color)||"#a01c20",a.fireRenderingNeededEvent()})),this._rootContainer.addControl(o);var s=new BABYLON.GUI.Ellipse("innerPoint");return s.width=.29,s.height=.29,s.color=(null===(r=this._style.infoPointsStyle)||void 0===r?void 0:r.innerPointColor)||"White",s.thickness=0,s.background=(null===(i=this._style.infoPointsStyle)||void 0===i?void 0:i.innerPointColor)||"White",o.addControl(s),o.linkWithMesh(e),o.linkOffsetY=0,o.shadowBlur=6,o.shadowOffsetX=2,o.shadowOffsetY=2,o.isPointerBlocker=!0,o.hoverCursor="pointer",o.onPointerClickObservable.add((function(t){if(o.metadata&&o.metadata.urls){var n={meshID:e.id,materialID:e.material?e.material.id:null,materialPhotoUrl:o.metadata.urls};a.fireInfoPointPickedEvent(n),a.showImages(o.metadata.urls)}a.fireRenderingNeededEvent()})),o}},{key:"getMaterialInfoPoint",value:function(e){for(var t=0;t<this._infoPoints.length;t++){var n=this._infoPoints[t];if(n.metadata&&n.metadata.materialID&&n.metadata.materialID===e)return n}return null}},{key:"getMaterialPhotoUrls",value:function(e){return this._zkScene.get("materialPhotos").getMaterialPhotoUrls(e.id)}},{key:"getOrCreateImagePanel",value:function(){return this._imagePanel||this.createImagePanel(),this._imagePanel}},{key:"createImagePanel",value:function(){var e,t=new BABYLON.GUI.Rectangle("imagePanel");return t.background=(null===(e=this._style.imagePanelStyle)||void 0===e?void 0:e.backgroundColor)||this._scene.clearColor.toHexString(),t.width=1,t.height=1,t.zIndex=1e4,t.isVisible=!1,this._imagePanel=t,this._rootContainer.addControl(t),this.addCloseButton(t),this.addMoveNextImageButton(t),this.addMovePrevImageButton(t),t}},{key:"addCloseButton",value:function(e){var t,n,r,i=this,a=new BABYLON.GUI.StackPanel("closePanel");a.height="48px",a.width="48px",a.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,a.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,a.isVertical=!1,a.zIndex=10003,e.addControl(a);var o=new BABYLON.GUI.Rectangle("closeRect");o.width="24px",o.height="24px",o.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,o.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,o.background=(null===(t=this._style.imagePanelStyle)||void 0===t?void 0:t.buttonsColor)||"#a01c20",o.color=(null===(n=this._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderColor)||"#a01c20",o.isPointerBlocker=!0,o.hoverCursor="pointer",o.onPointerEnterObservable.add((function(e){var t,n;o.background=(null===(t=i._style.imagePanelStyle)||void 0===t?void 0:t.buttonsHighlightColor)||"#bb2025",o.color=(null===(n=i._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderHighlightColor)||"#bb2025",i.fireRenderingNeededEvent()})),o.onPointerOutObservable.add((function(e){var t,n;o.background=(null===(t=i._style.imagePanelStyle)||void 0===t?void 0:t.buttonsColor)||"#a01c20",o.color=(null===(n=i._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderColor)||"#a01c20",i.fireRenderingNeededEvent()})),o.onPointerClickObservable.add((function(e){i.hideImages(),i.fireRenderingNeededEvent()})),a.addControl(o);var s=new BABYLON.GUI.Image("close",this.getCloseSvg((null===(r=this._style.imagePanelStyle)||void 0===r?void 0:r.buttonsIconColor)||"white"));s.width=1,s.height=1,s.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,o.addControl(s),this._closeImageButton=a}},{key:"addMoveNextImageButton",value:function(e){var t,n,r,i=this,a=new BABYLON.GUI.StackPanel("rightPanel");a.width="48px",a.height="48px",a.paddingRight="24px",a.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,a.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,a.isVertical=!1,a.zIndex=10003,a.alpha=.3,a.isVisible=!1,e.addControl(a);var o=new BABYLON.GUI.Rectangle("rightRect");o.width="24px",o.height="48px",o.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,o.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,o.background=(null===(t=this._style.imagePanelStyle)||void 0===t?void 0:t.buttonsColor)||"#a01c20",o.color=(null===(n=this._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderColor)||"#a01c20",o.isPointerBlocker=!0,o.hoverCursor="pointer",o.onPointerEnterObservable.add((function(e){var t,n;i._isOnMoveNextButton=!0,o.background=(null===(t=i._style.imagePanelStyle)||void 0===t?void 0:t.buttonsHighlightColor)||"#bb2025",o.color=(null===(n=i._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderHighlightColor)||"#bb2025",i.updateMoveNextImageButton(),i.fireRenderingNeededEvent()})),o.onPointerOutObservable.add((function(e){var t,n;i._isOnMoveNextButton=!1,o.background=(null===(t=i._style.imagePanelStyle)||void 0===t?void 0:t.buttonsColor)||"#a01c20",o.color=(null===(n=i._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderColor)||"#a01c20",i.updateMoveNextImageButton(),i.fireRenderingNeededEvent()})),o.onPointerClickObservable.add((function(e){i.moveNextImage(),i.fireRenderingNeededEvent()})),a.addControl(o);var s=new BABYLON.GUI.Image("move-next",this.getChevronRightSvg((null===(r=this._style.imagePanelStyle)||void 0===r?void 0:r.buttonsIconColor)||"white"));s.width=1,s.height=1,s.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,s.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,o.addControl(s),this._moveNextImageButton=a}},{key:"addMovePrevImageButton",value:function(e){var t,n,r,i=this,a=new BABYLON.GUI.StackPanel("leftPanel");a.width="48px",a.height="48px",a.paddingLeft="24px",a.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,a.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,a.isVertical=!1,a.alpha=.3,a.zIndex=10003,a.isVisible=!1,e.addControl(a);var o=new BABYLON.GUI.Rectangle("leftRect");o.width="24px",o.height="48px",o.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,o.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,o.background=(null===(t=this._style.imagePanelStyle)||void 0===t?void 0:t.buttonsColor)||"#a01c20",o.color=(null===(n=this._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderColor)||"#a01c20",o.isPointerBlocker=!0,o.hoverCursor="pointer",o.onPointerEnterObservable.add((function(e){var t,n;i._isOnMovePrevButton=!0,o.background=(null===(t=i._style.imagePanelStyle)||void 0===t?void 0:t.buttonsHighlightColor)||"#bb2025",o.color=(null===(n=i._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderHighlightColor)||"#bb2025",i.updateMovePrevImageButton(),i.fireRenderingNeededEvent()})),o.onPointerOutObservable.add((function(e){var t,n;i._isOnMovePrevButton=!1,o.background=(null===(t=i._style.imagePanelStyle)||void 0===t?void 0:t.buttonsColor)||"#a01c20",o.color=(null===(n=i._style.imagePanelStyle)||void 0===n?void 0:n.buttonsBorderColor)||"#a01c20",i.updateMovePrevImageButton(),i.fireRenderingNeededEvent()})),o.onPointerClickObservable.add((function(e){i.movePrevImage(),i.fireRenderingNeededEvent()})),a.addControl(o);var s=new BABYLON.GUI.Image("move-prev",this.getChevronLeftSvg((null===(r=this._style.imagePanelStyle)||void 0===r?void 0:r.buttonsIconColor)||"white"));s.width=1,s.height=1,s.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,s.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,o.addControl(s),this._movePrevImageButton=a}},{key:"updateMoveNextImageButton",value:function(){this._moveNextImageButton&&(this._imageUrls.length<=1?this._moveNextImageButton.isVisible=!1:(this._moveNextImageButton.isVisible=!0,this._moveNextImageButton.alpha=this.canMoveNextImage()?this._isOnMoveNextButton?1:.3:.1))}},{key:"updateMovePrevImageButton",value:function(){this._movePrevImageButton&&(this._imageUrls.length<=1?this._movePrevImageButton.isVisible=!1:(this._movePrevImageButton.isVisible=!0,this._movePrevImageButton.alpha=this.canMovePrevImage()?this._isOnMovePrevButton?1:.3:.1))}},{key:"showImages",value:function(e){this._canShowInfoPointsContent&&(this._currentIdx=0,this._imageUrls=e,this._isOnMoveNextButton=!1,this._isOnMovePrevButton=!1,this.getOrCreateImagePanel(),this._imagePanel&&(this.onBeforeShowImages&&this.onBeforeShowImages(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this._imagePanel.isVisible=!0,this.showCurrentImage(),this.fireInfoPointContentShownEvent()),this.fireRenderingNeededEvent())}},{key:"moveNextImage",value:function(){this.canMoveNextImage()&&(this._currentIdx++,this.showCurrentImage(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this.fireRenderingNeededEvent())}},{key:"movePrevImage",value:function(){this.canMovePrevImage()&&(this._currentIdx--,this.showCurrentImage(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this.fireRenderingNeededEvent())}},{key:"showCurrentImage",value:function(){this._currentIdx>=0&&this._currentIdx<this._imageUrls.length&&this.showImage(this._imageUrls[this._currentIdx])}},{key:"canMoveNextImage",value:function(){return this._imageUrls.length>0&&this._currentIdx<this._imageUrls.length-1}},{key:"canMovePrevImage",value:function(){return this._imageUrls.length>0&&this._currentIdx>0}},{key:"hideImages",value:function(){this._imagePanel&&(this._imagePanel.isVisible=!1,this.onAfterShowImages&&this.onAfterShowImages(),this.fireInfoPointContentHiddenEvent(),this.fireRenderingNeededEvent())}},{key:"showImage",value:function(e){var t=this;if(this._imagePanel){this._image&&(this._imagePanel.removeControl(this._image),this._image.isVisible=!1,this._image.dispose(),this._image=null),this.showLoadingText();var n=new BABYLON.GUI.Image("but",e);n.width=1,n.height=1,n.isVisible=!0,n.zIndex=10002,n.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,n.onImageLoadedObservable.add((function(e){t.hideLoadingText()})),this._imagePanel.addControl(n),this._image=n,this.fireRenderingNeededEvent()}}},{key:"updateInfoPointsVisibility",value:function(){var e=!1;if(this._scene.activeCamera&&(!this._lastCameraPosition||!this._lastCameraPosition.equals(this._scene.activeCamera.position)))for(var t in this._lastCameraPosition=this._scene.activeCamera.position.clone(),this._meshesInfoPoints){var n=this._scene.getMeshByID(t);n&&(this.updateMeshInfoPointVisibility(n,this._meshesInfoPoints[t]),e=!0)}return e}},{key:"drawRay",value:function(e,t){var n=t.subtract(e);n=n.normalize();var r=2*t.subtract(e).length(),i=new BABYLON.Ray(e,n,r);BABYLON.RayHelper.CreateAndShow(i,this._scene,new BABYLON.Color3(1,1,.1))}},{key:"updateMeshInfoPointVisibility",value:function(e,t){if(this._scene.activeCamera){var n=this._sceneHelper.getMeshHierarchyCenter(e),r=this._scene.activeCamera.position,i=n.subtract(r);i=i.normalize();var a=2*n.subtract(r).length(),o=new BABYLON.Ray(r,i,a),s=this._scene.pickWithRay(o);s&&s.pickedMesh&&(t.alpha=s.pickedMesh===e?1:.2)}}},{key:"getCloseSvg",value:function(e){return this.getSvg(this.CLOSE_SVG,e)}},{key:"getChevronLeftSvg",value:function(e){return this.getSvg(this.CHEVRON_LEFT_SVG,e)}},{key:"getChevronRightSvg",value:function(e){return this.getSvg(this.CHEVRON_RIGHT_SVG,e)}},{key:"getSvg",value:function(e,t){return e.replace("\xa7color\xa7",encodeURIComponent(t))}},{key:"fireInfoPointPickedEvent",value:function(e){for(var t=0;t<this._infoPointPickedListeners.length;t++)this._infoPointPickedListeners[t](e)}},{key:"addInfoPointPickedListener",value:function(e){this._infoPointPickedListeners.push(e)}},{key:"addInfoPointPickedListenerRange",value:function(e){var t;(t=this._infoPointPickedListeners).push.apply(t,i(e))}},{key:"fireInfoPointContentShownEvent",value:function(){for(var e=0;e<this._infoPointContentShownListeners.length;e++)this._infoPointContentShownListeners[e]()}},{key:"addInfoPointContentShownListener",value:function(e){this._infoPointContentShownListeners.push(e)}},{key:"addInfoPointContentShownListenerRange",value:function(e){var t;(t=this._infoPointContentShownListeners).push.apply(t,i(e))}},{key:"fireInfoPointContentHiddenEvent",value:function(){for(var e=0;e<this._infoPointContentHiddenListeners.length;e++)this._infoPointContentHiddenListeners[e]()}},{key:"addInfoPointContentHiddenListener",value:function(e){this._infoPointContentHiddenListeners.push(e)}},{key:"addInfoPointContentHiddenListenerRange",value:function(e){var t;(t=this._infoPointContentHiddenListeners).push.apply(t,i(e))}},{key:"fireRenderingNeededEvent",value:function(){for(var e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}},{key:"addRenderingNeededListener",value:function(e){this._renderingNeededListeners.push(e)}},{key:"showLoadingText",value:function(){var e;this._loadingText?this._loadingText.isVisible=!0:this._imagePanel&&(this._loadingText=new BABYLON.GUI.TextBlock("loading"),this._loadingText.text="Loading...",this._loadingText.left=.5,this._loadingText.top=.7,this._loadingText.zIndex=10001,this._loadingText.color=(null===(e=this._style.imagePanelStyle)||void 0===e?void 0:e.loadingTextColor)||"white",this._imagePanel.addControl(this._loadingText),this.fireRenderingNeededEvent())}},{key:"hideLoadingText",value:function(){this._loadingText&&(this._loadingText.isVisible=!1),this.fireRenderingNeededEvent()}},{key:"updateGuiElementsStyle",value:function(){this.updateMeshInfoPointsStyle(),this.updateImagePanelStyle(),this.fireRenderingNeededEvent()}},{key:"updateMeshInfoPointsStyle",value:function(){var e=this;this.getAllInfoPoints().forEach((function(t){var n,r;t.color=(null===(n=e._style.infoPointsStyle)||void 0===n?void 0:n.borderColor)||"#dddddd",t.background=(null===(r=e._style.infoPointsStyle)||void 0===r?void 0:r.color)||"#a01c20";var i,a=t.getChildByName("innerPoint");a&&a instanceof BABYLON.GUI.Container&&(a.background=(null===(i=e._style.infoPointsStyle)||void 0===i?void 0:i.innerPointColor)||"White")}))}},{key:"updateImagePanelStyle",value:function(){if(this._imagePanel){var e;this._imagePanel.background=(null===(e=this._style.imagePanelStyle)||void 0===e?void 0:e.backgroundColor)||this._scene.clearColor.toHexString();var t=this._imagePanel.getChildByName("closePanel");if(t&&t instanceof BABYLON.GUI.Container){var n,r,i=t.getChildByName("closeRect");i&&i instanceof BABYLON.GUI.Container&&(i.background=(null===(n=this._style.imagePanelStyle)||void 0===n?void 0:n.buttonsColor)||"#a01c20",i.color=(null===(r=this._style.imagePanelStyle)||void 0===r?void 0:r.buttonsBorderColor)||"#a01c20")}var a=this._imagePanel.getChildByName("rightPanel");if(a&&a instanceof BABYLON.GUI.Container){var o,s,u=a.getChildByName("rightRect");u&&u instanceof BABYLON.GUI.Container&&(u.background=(null===(o=this._style.imagePanelStyle)||void 0===o?void 0:o.buttonsColor)||"#a01c20",u.color=(null===(s=this._style.imagePanelStyle)||void 0===s?void 0:s.buttonsBorderColor)||"#a01c20")}var c,l=this._imagePanel.getChildByName("leftPanel");if(l&&l instanceof BABYLON.GUI.Container){var h,f,d=l.getChildByName("leftRect");d&&d instanceof BABYLON.GUI.Container&&(d.background=(null===(h=this._style.imagePanelStyle)||void 0===h?void 0:h.buttonsColor)||"#a01c20",d.color=(null===(f=this._style.imagePanelStyle)||void 0===f?void 0:f.buttonsBorderColor)||"#a01c20")}this._loadingText&&(this._loadingText.color=(null===(c=this._style.imagePanelStyle)||void 0===c?void 0:c.loadingTextColor)||"white")}}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/MaterialsPreview/MaterialsPreview.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{MaterialPreviewData:function(){return p},MaterialsPreview:function(){return g}});var r=n("../../3D/src/Helpers/utils.ts"),i=n("../../3D/src/Misc/DefaultAssetUrls.ts"),a=n("../../3D/src/Components/SceneHelper.ts");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,s,u){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,s,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function c(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){c(a,r,i,o,s,"next",e)}function s(e){c(a,r,i,o,s,"throw",e)}o(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=function(){function e(){h(this,e),this.previewFiles={}}return d(e,[{key:"downloadFiles",value:function(){function e(e,t){return-1!==e.indexOf(t,e.length-t.length)}for(var t in this.previewFiles){var n=null,i=this.previewFiles[t];if(n="string"==typeof i?r.Utils.dataURItoBlob(i):i){var a=null;if(e(t,".jpeg")?a={type:"image/jpeg"}:e(t,".png")&&(a={type:"image/png"}),a){var o=document.createElement("a");document.body.appendChild(o),o.setAttribute("type","hidden"),o.download=t,o.href=window.URL.createObjectURL(new Blob([n],a)),o.click()}}}}}]),e}(),g=function(){function e(){h(this,e)}return d(e,null,[{key:"getPreviewsAsync",value:function(){var e=l(u().mark((function e(t,n,r,i){var a,o,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(c.length>4&&void 0!==c[4])||c[4],e.next=3,t.whenReadyAsync();case 3:return o=new v(t,n,r,i),e.next=6,o.getPreviewsAsync(a);case 6:return s=e.sent,o.dispose(),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"downloadPreviewsAsync",value:function(){var t=l(u().mark((function t(n,r,i,a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPreviewsAsync(n,r,i,a);case 2:t.sent.downloadFiles();case 4:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()}]),e}(),v=function(){function e(t,n,r,i){h(this,e),s(this,"_width",256),s(this,"_height",256),s(this,"_crop",!1),s(this,"_materials",[]),s(this,"_localEngine",null),s(this,"_hostingScene",null),s(this,"_hostingSceneHelper",null),s(this,"_hostingMesh",null),this._scene=t,this._rootUrl=n,this._materialIDs=r,this._options=i||{},this.setupPreviewSize(),void 0!=this._options.crop&&(this._crop=this._options.crop),this.readMaterials()}return d(e,[{key:"dispose",value:function(){this.disposeHostingScene(),this.disposeLocalEngine()}},{key:"getLocalEngine",value:function(){if(!this._localEngine){var e=document.createElement("canvas");e.id="MaterialPreviewCanvas",e.width=1024,e.height=1024,this._localEngine=new BABYLON.Engine(e,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0}),this._localEngine.setSize(this._width,this._height)}return this._localEngine}},{key:"disposeLocalEngine",value:function(){this._localEngine&&this._localEngine.dispose()}},{key:"disposeHostingScene",value:function(){this._hostingSceneHelper&&(this._hostingSceneHelper.dispose(),this._hostingSceneHelper=null),this._hostingScene&&(this._hostingScene.dispose(),this._hostingScene=null)}},{key:"setupPreviewSize",value:function(){var e=this._options;void 0!=e.width&&void 0==e.height?(this._width=e.width,this._height=e.width):void 0==e.width&&void 0!=e.height?(this._width=e.height,this._height=e.height):void 0!=e.width&&void 0!=e.height&&(this._width=e.width,this._height=e.height)}},{key:"readMaterials",value:function(){var e=this;this._materialIDs.forEach((function(t){var n=e._scene.getMaterialByID(t);n&&e._materials.push(n)}))}},{key:"downloadPreviewsAsync",value:function(){var e=l(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPreviewsAsync();case 2:e.sent.downloadFiles();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPreviewsAsync",value:function(){var e=l(u().mark((function e(){var t,n,r,o=this,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(s.length>0&&void 0!==s[0])||s[0],n=this.getLocalEngine(),this._hostingScene=new BABYLON.Scene(n),this._hostingSceneHelper=new a.SceneHelper(this._hostingScene),this._hostingSceneHelper.setupCamera(),(r=this._hostingScene.activeCamera)&&(/firefox/i.test(navigator.userAgent)||new BABYLON.PassPostProcess("scale_pass",4,r,BABYLON.Texture.BILINEAR_SAMPLINGMODE),new BABYLON.PassPostProcess("scale_pass",2,r,BABYLON.Texture.BILINEAR_SAMPLINGMODE),new BABYLON.PassPostProcess("scale_pass",1,r,BABYLON.Texture.BILINEAR_SAMPLINGMODE)),e.abrupt("return",new Promise((function(e){var n=new BABYLON.CubeTexture(i.DefaultAssetUrls.Environment.EnvironmentTextureCDNUrl,o._hostingScene,null,!1,null,l(u().mark((function r(){var i,a,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o._hostingScene&&o._hostingSceneHelper){r.next=2;break}return r.abrupt("return");case 2:o._hostingScene.environmentTexture=n,o._hostingSceneHelper.setupLights(),o._hostingMesh=o._hostingSceneHelper.createSphere(null),o._hostingSceneHelper.adjustCamera(void 0,void 0,void 0,!1),i=new p,a=0;case 8:if(!(a<o._materials.length)){r.next=15;break}return s=o._materials[a],r.next=12,o.createMaterialPreviewFileAsync(s,i,t);case 12:a++,r.next=8;break;case 15:o.disposeHostingScene(),o.disposeLocalEngine(),e(i);case 18:case"end":return r.stop()}}),r)}))),null,void 0,!0,void 0,!0)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createMaterialPreviewFileAsync",value:function(){var e=l(u().mark((function e(t,n){var i,o,s,c,l,h,f,d=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(d.length>2&&void 0!==d[2])||d[2],!(this._hostingScene&&this._hostingSceneHelper&&this._hostingMesh)){e.next=23;break}if(o=t.serialize(),!(s=BABYLON.Material.Parse(o,this._hostingScene,this._rootUrl))){e.next=23;break}return this._hostingMesh.material=s,e.next=8,a.SceneHelper.whenMeshMaterialIsReady(this._hostingMesh);case 8:return this._hostingScene.render(),e.next=11,this._hostingSceneHelper.takeContentScreenshotAsync(this._width,this._height);case 11:if(c=e.sent,!this._crop){e.next=17;break}return e.next=15,r.Utils.trimImageAsync(c);case 15:(l=e.sent)&&(c=l);case 17:h=s.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),h=this.getNextIncrementalName(h,".png",n)+".png",Logger.info("preview: "+h),f=c,i&&(f=r.Utils.dataURItoBlob(c)),n.previewFiles[h]=f;case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNextIncrementalName",value:function(e,t,n){var r=e;if(e)for(var i,a=0;n.previewFiles.hasOwnProperty(r+t);){if(!i){i=e;var o=e.lastIndexOf("_");if(o>0){var s=e.substring(o+1);parseInt(s).toString()===s&&(i=e.substring(0,o))}}r=i+"_"+ ++a}return r}}]),e}()},"../../3D/src/Components/MeshExpander/MeshExpander.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{MeshExpander:function(){return a}});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_mesh",null),i(this,"_scene",null),i(this,"_facesOfVertices",null),i(this,"_meshVerticesPositions",null),i(this,"_meshVerticesNormals",null),i(this,"_meshIndices",null),i(this,"_meshPositions",null),i(this,"_meshFacesNormals",null),i(this,"_sharedFacesOfVertices",{})}var t,n,a;return t=e,n=[{key:"dispose",value:function(){}},{key:"resetDataModel",value:function(){this._facesOfVertices=null,this._meshVerticesPositions=null,this._meshVerticesNormals=null,this._meshIndices=null,this._meshPositions=null,this._meshFacesNormals=null,this._sharedFacesOfVertices={}}},{key:"prepareDataModel",value:function(){if(this.resetDataModel(),this._mesh&&this._scene&&(this._facesOfVertices=[],this._sharedFacesOfVertices={},this._meshVerticesPositions=this._mesh.getVerticesData(BABYLON.VertexBuffer.PositionKind),this._meshVerticesNormals=this._mesh.getVerticesData(BABYLON.VertexBuffer.NormalKind),this._meshIndices=this._mesh.getIndices(),this._meshPositions=[],this._meshFacesNormals=[],this._meshVerticesPositions&&this._meshVerticesNormals&&this._meshIndices)){for(var e=0;e<this._meshVerticesPositions.length;e+=3)this._meshPositions.push(new BABYLON.Vector3(this._meshVerticesPositions[e],this._meshVerticesPositions[e+1],this._meshVerticesPositions[e+2]));for(var t=0;t<this._mesh.getTotalIndices()/3;t++)this._computeFaceNormal(t);this._getFacesOfVertices()}}},{key:"_getFaceVerticesIndex",value:function(e){return this._meshIndices?{v1:this._meshIndices[3*e],v2:this._meshIndices[3*e+1],v3:this._meshIndices[3*e+2]}:null}},{key:"_computeFaceNormal",value:function(e){if(this._meshPositions&&this._meshIndices&&this._meshFacesNormals){var t=this._getFaceVerticesIndex(e);if(t){var n=this._meshPositions[t.v1].subtract(this._meshPositions[t.v2]),r=this._meshPositions[t.v3].subtract(this._meshPositions[t.v2]);this._meshFacesNormals[e]=BABYLON.Vector3.Normalize(BABYLON.Vector3.Cross(n,r))}}}},{key:"_getPositionKey",value:function(e){return"".concat(e.x,"_").concat(e.y,"_").concat(e.z)}},{key:"_getFacesOfVertices",value:function(){if(this._mesh&&this._meshPositions&&this._meshIndices){this._sharedFacesOfVertices={},this._facesOfVertices=[];for(var e=0;e<this._meshPositions.length;e++){this._facesOfVertices[e]=[];var t=this._meshPositions[e],n=this._getPositionKey(t);this._sharedFacesOfVertices.hasOwnProperty(n)||(this._sharedFacesOfVertices[n]=new Set)}for(var r=0;r<this._meshIndices.length;r++){var i=this._meshIndices[r],a=r/3|0;this._facesOfVertices[i].push(a);var o=this._meshPositions[i],s=this._getPositionKey(o);this._sharedFacesOfVertices.hasOwnProperty(s)&&this._sharedFacesOfVertices[s].add(a)}}}},{key:"expandMesh",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;if(e instanceof BABYLON.Mesh&&(this._mesh=e,this._scene=e.getScene(),this.prepareDataModel(),this._meshPositions&&this._meshVerticesPositions&&this._meshVerticesNormals)){for(var n=0;n<this._meshPositions.length;n++){var r=this._meshPositions[n],i=this._getVertexComputedNormal(n);if(i){var a=i.scale(t);r.addInPlace(a),this._meshVerticesPositions[3*n]=r.x,this._meshVerticesPositions[3*n+1]=r.y,this._meshVerticesPositions[3*n+2]=r.z}}this._mesh.markVerticesDataAsUpdatable(BABYLON.VertexBuffer.PositionKind,!0),this._mesh.updateVerticesData(BABYLON.VertexBuffer.PositionKind,this._meshVerticesPositions),this._mesh.computeWorldMatrix(!0)}}},{key:"_reComputeNormals",value:function(){var e=[];if(this._meshPositions&&this._facesOfVertices){for(var t=0;t<this._meshPositions.length;t++)for(var n=this._facesOfVertices[t],r=0;r<n.length;r++)e[n[r]]=!0;var i;for(i in e)this._computeFaceNormal(i);for(i in e){var a=this._getFaceVerticesIndex(i);a&&(this._computeNormal(a.v1),this._computeNormal(a.v2),this._computeNormal(a.v3))}}}},{key:"_getVertexComputedNormal",value:function(e){var t=null;if(this._meshPositions&&this._meshFacesNormals){var n=this._meshPositions,r=this._meshFacesNormals,i=n[e],a=this._getPositionKey(i);if(this._sharedFacesOfVertices.hasOwnProperty(a)){var o=this._sharedFacesOfVertices[a];t=BABYLON.Vector3.Zero(),o.forEach((function(e){var n=r[e];t&&n&&(t=t.add(n))})),t=BABYLON.Vector3.Normalize(t.scale(1/o.size))}}return t}},{key:"_computeNormal",value:function(e){var t=this._getVertexComputedNormal(e);t&&this._meshVerticesNormals&&(this._meshVerticesNormals[3*e]=t.x,this._meshVerticesNormals[3*e+1]=t.y,this._meshVerticesNormals[3*e+2]=t.z)}}],n&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/NormalMap/ProceduralNormalMap.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{ProceduralNormalMap:function(){return f}});var r=n("../../3D/src/Components/ProceduralTextures/BlurXProceduralTexture.ts"),i=n("../../3D/src/Components/ProceduralTextures/BlurYProceduralTexture.ts"),a=n("../../3D/src/Components/ProceduralTextures/NormalMapProceduralTexture.ts");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,s,u){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function u(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"_bias",50),h(this,"_invertR",!1),h(this,"_invertG",!1),h(this,"_preBlurEnabled",!1),h(this,"_preBlur",3),h(this,"_postBlurEnabled",!1),h(this,"_postBlur",3),h(this,"_bevel",!0),h(this,"_intensity",.5),h(this,"_activeTextures",[]),h(this,"_preBlurXTexture",null),h(this,"_preBlurYTexture",null),h(this,"_normalMapTexture",null),h(this,"_postBlurXTexture",null),h(this,"_postBlurYTexture",null),this._baseTexture=t,this._size=n,this._scene=i,this.init(r)}var t,n,o;return t=e,n=[{key:"init",value:function(e){for(this._bias=e.get("bias"),this._invertR=e.get("invertR"),this._invertG=e.get("invertG"),this._bevel=e.get("bevel"),this._intensity=e.get("intensity"),this._preBlurEnabled=e.get("preBlurEnabled"),this._preBlur=e.get("preBlur"),this._postBlurEnabled=e.get("postBlurEnabled"),this._postBlur=e.get("postBlur");this._activeTextures.length>0;)this._activeTextures.pop();this.updateTextures()}},{key:"updateTextures",value:function(){var e=this.updatePreBlurTexture();e=this.updateNormalmapTexture(e),e=this.updatePostBlurTexture(e)}},{key:"updatePreBlurTexture",value:function(){var e=this._baseTexture;return this._preBlurEnabled&&(this._preBlurXTexture?this._preBlurXTexture.baseTexture=this._baseTexture:this._preBlurXTexture=new r.BlurXProceduralTexture("preBlurX",this._size,this._scene,this._baseTexture,void 0,!1),this._preBlurXTexture.beginInit(),this._preBlurXTexture.blur=this._preBlur,this._preBlurXTexture.refreshRate=0,this._preBlurXTexture.endInit(),this._activeTextures.push(this._preBlurXTexture),this._preBlurYTexture?this._preBlurYTexture.baseTexture=this._preBlurXTexture:this._preBlurYTexture=new i.BlurYProceduralTexture("preBlurY",this._size,this._scene,this._preBlurXTexture,void 0,!1),this._preBlurYTexture.beginInit(),this._preBlurYTexture.blur=this._preBlur,this._preBlurYTexture.refreshRate=0,this._preBlurYTexture.endInit(),this._activeTextures.push(this._preBlurYTexture),e=this._preBlurYTexture),e}},{key:"updateNormalmapTexture",value:function(e){return this._normalMapTexture?this._normalMapTexture.baseTexture=e:this._normalMapTexture=new a.NormalMapProceduralTexture("procNormal",this._size,this._scene,e,void 0,!1),this._normalMapTexture.beginInit(),this._normalMapTexture.bias=this._bias,this._normalMapTexture.invertR=this._invertR,this._normalMapTexture.invertG=this._invertG,this._normalMapTexture.bevel=this._bevel,this._normalMapTexture.intensity=this._intensity,this._normalMapTexture.refreshRate=0,this._normalMapTexture.endInit(),this._activeTextures.push(this._normalMapTexture),this._normalMapTexture}},{key:"updatePostBlurTexture",value:function(e){var t=e;return this._postBlurEnabled&&(this._postBlurXTexture?this._postBlurXTexture.baseTexture=e:this._postBlurXTexture=new r.BlurXProceduralTexture("postBlurX",this._size,this._scene,e,void 0,!1),this._postBlurXTexture&&(this._postBlurXTexture.beginInit(),this._postBlurXTexture.blur=this._postBlur,this._postBlurXTexture.refreshRate=0,this._postBlurXTexture.endInit(),this._activeTextures.push(this._postBlurXTexture),this._postBlurYTexture?this._postBlurYTexture.baseTexture=this._postBlurXTexture:this._postBlurYTexture=new i.BlurYProceduralTexture("postBlurY",this._size,this._scene,this._postBlurXTexture,void 0,!1),this._postBlurYTexture&&(this._postBlurYTexture.beginInit(),this._postBlurYTexture.blur=this._postBlur,this._postBlurYTexture.refreshRate=0,this._postBlurYTexture.endInit(),this._activeTextures.push(this._postBlurYTexture),t=this._postBlurYTexture))),t}},{key:"dispose",value:function(){this._preBlurXTexture&&(this._preBlurXTexture.dispose(),this._preBlurXTexture=null),this._preBlurYTexture&&(this._preBlurYTexture.dispose(),this._preBlurYTexture=null),this._normalMapTexture&&(this._normalMapTexture.dispose(),this._normalMapTexture=null),this._postBlurXTexture&&(this._postBlurXTexture.dispose(),this._postBlurXTexture=null),this._postBlurYTexture&&(this._postBlurYTexture.dispose(),this._postBlurYTexture=null)}},{key:"getNormalMapTextureAsync",value:function(){var e=c(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateAsync(t,n);case 2:if(!(this._activeTextures.length>0)){e.next=4;break}return e.abrupt("return",this._activeTextures[this._activeTextures.length-1]);case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateAsync",value:function(){var e=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.init(n),!(this._activeTextures.length>0)){e.next=11;break}this._activeTextures[0].baseTexture=t,r=0;case 4:if(!(r<this._activeTextures.length)){e.next=11;break}return e.next=7,this._activeTextures[r].isReadyAsync();case 7:this._activeTextures[r].render();case 8:r++,e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],n&&l(t.prototype,n),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/Preview3D/Preview3DConfigurationManager.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{Preview3DConfigurationManager:function(){return a}});var r=n("../../3D/src/Components/SceneHelper.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._zkModel=t,this._zkScene=n,this._scene=i,this._sceneHelper=new r.SceneHelper(i)}var t,n,a;return t=e,(n=[{key:"getPossibleVariableMaterials",value:function(){for(var e=this._sceneHelper.getAllMaterials(),t=[],n=0;n<e.length;n++){var r=e[n],i=this.getMeshesUsingMaterial(r.id),a=this.isSceneMaterialForVariant(r);i.length>0&&!a&&t.push(r)}return t}},{key:"getVariableMaterials",value:function(){var e=[],t=this._zkModel.getPreview3D();if(t){var n=t.getVariantsAttributeOptions();if(n)for(var r=0;r<n.get("variableMaterials").length;r++){var i=n.get("variableMaterials").at(r).get("materialID"),a=this._scene.getMaterialByID(i);a&&e.push(a)}}return e}},{key:"getVariableMaterialsSelection",value:function(){var e=this.getVariableMaterials().map((function(e){return e.id}));return this.getPossibleVariableMaterials().map((function(t){return{id:t.id,name:t.name,selected:-1!=e.indexOf(t.id)}}))}},{key:"getVariantMaterialsWithOriginal",value:function(e){var t=[],n=this._zkModel.getPreview3D();if(n&&e&&e instanceof MPlaza.Color){var r=this.getVariantID(e),i=n.getVariantsAttributeOptions();if(i){var a=i.getVariantOption(r);if(a)for(var o=0;o<a.get("materials").length;o++){var s=a.get("materials").at(o),u=s.get("optionMaterialID"),c=this._scene.getMaterialByID(u),l=s.get("variableMaterialID"),h=this._scene.getMaterialByID(l);c&&h&&t.push({material:c,variableMaterial:h})}}}return t}},{key:"updateVariableMaterials",value:function(){var e=this,t=this._zkModel.getPreview3D();if(t){var n=t.getVariantsAttributeOptions();if(n){for(var r=[],i=[],a=0;a<n.get("variableMaterials").length;a++){var o=n.get("variableMaterials").at(a).get("materialID");this._scene.getMaterialByID(o)?r.push(o):i.push(o)}r.forEach((function(t){return e.setVariableMaterialID(t)})),i.forEach((function(t){return e.unsetVariableMaterialID(t)}))}}}},{key:"unsetVariableMaterialID",value:function(e){var t=this._zkModel.getPreview3D();if(t){var n=t.getVariantsAttributeOptions();if(n){var r=this._zkModel.getAttributeByGuid(n.get("attributeGuid")),i=n.get("variableMaterials").getVariableMaterial(e);if(i){var a=this._scene.getMaterialByID(e);if(a)for(var o=0;o<i.get("meshes").length;o++){var s=this._scene.getMeshByID(i.get("meshes")[o]);s&&this._sceneHelper.applyMaterial(a,s)}}n.removeVariableMaterial(e);for(var u=[],c=0;c<n.get("variantOptions").length;c++){var l=n.get("variantOptions").at(c),h=null;r&&(h=r.getOptionByGuid(l.get("optionGuid")));for(var f=[],d=0;d<l.get("materials").length;d++){var p=l.get("materials").at(d);if(p.get("variableMaterialID")===e){for(var g=0;g<p.get("actions").length;g++){var v=p.get("actions").at(g);if(h){var m=h.get("actions").getActionByGuid(v.get("actionGuid"));m&&h.get("actions").remove(m)}}this.deleteSceneMaterial(p.get("optionMaterialID")),f.push(p)}}l.get("materials").remove(f),0===l.get("materials").length&&u.push(l)}for(var y=0;y<u.length;y++)this.removeVariantOption(n,u[y])}}}},{key:"setVariableMaterialID",value:function(e){var t=this._scene.getMaterialByID(e);if(t){var n=this.getMeshesUsingMaterial(t.id),r=n.map((function(e){return e.id})),i=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions();this.getOrCreateVariantAttribute(i),i.setVariableMaterial(e,r);for(var a=[],o=0;o<this._zkModel.get("colors").length;o++){var s=this._zkModel.get("colors").at(o),u=this.getVariantID(s);a.push(u),this.checkVariantOption(i,t,n,s)}for(var c=0;c<i.get("variantOptions").length;c++){var l=i.get("variantOptions").at(c);-1===a.indexOf(l.get("variantID"))&&this.removeVariantOption(i,l)}}}},{key:"checkVariantOption",value:function(e,t,n,r){var i=this.getVariantID(r),a=e.get("variantOptions").getVariantOption(i);a||(a=this.createVariantOption(e,r)),this.checkVariantOptionMaterial(e,a,t,n,r)}},{key:"createVariantOption",value:function(e,t){var n=this.getVariantID(t),r=this.getOrCreateVariantAttribute(e),i=this.getOrCreateVariantAttributeOption(e,t,r),a=new MPlaza.VariantOption;return a.set("variantID",n),a.set("optionGuid",i.get("optionGuid")),e.get("variantOptions").push(a),a}},{key:"removeVariantOption",value:function(e,t){var n=this._zkModel.getAttributeByGuid(e.get("attributeGuid"));if(n){var r=n.getOptionByGuid(t.get("optionGuid"));r&&n.get("options").remove(r)}for(var i=0;i<t.get("materials").length;i++){var a=t.get("materials").at(i).get("optionMaterialID");this.deleteSceneMaterial(a)}e.get("variantOptions").remove(t)}},{key:"getOrCreateVariantAttribute",value:function(e){var t=null;if(e.get("attributeGuid")&&(t=this._zkModel.getAttributeByGuid(e.get("attributeGuid"))),t||(t=this._zkModel.get("attributes").getAttributeByCode("variants_attribute")),!t){for(var n=0;n<e.get("variantOptions").length;n++)this.removeVariantOption(e,e.get("variantOptions").at(n));(t=new MPlaza.Attribute).set("attributeGuid",MPlaza.generateUUID()),t.set("name","Variants attribute"),t.set("attributeCode","variants_attribute"),t.set("attributeTypeID",MPlaza.AttributeType.Options),e.set("attributeGuid",t.get("attributeGuid")),this._zkModel.get("attributes").push(t)}return t}},{key:"getOrCreateVariantAttributeOption",value:function(e,t,n){var r=this.getVariantID(t),i=n.getOptionByCode(r);return i||((i=new MPlaza.AttributeOption).set("optionCode",r),i.set("name",t.get("name")),n.get("options").push(i)),i}},{key:"getVariantID",value:function(e){return"".concat(e.getModelID(),"_").concat(e.getColorID())}},{key:"checkVariantOptionMaterial",value:function(e,t,n,r,i){for(var a=this.getVariantID(i),o=null,s=0;s<t.get("materials").length;s++){var u=t.get("materials").at(s);if(u.get("variableMaterialID")===n.id){o=u;break}}if(!o){var c=this.getSceneMaterialForVariant(a,n.id);if(!c){var l="".concat(n.name," - ").concat(i.get("name"));(c=this.cloneSceneMaterial(n.id,void 0,l))&&this.setupSceneMaterialForVariant(c,a,n.id)}c&&((o=new MPlaza.VariantOptionMaterial).set("optionMaterialID",c.id),o.set("variableMaterialID",n.id),t.get("materials").push(o))}o&&this.checkVariantOptionActions(e,t,o,n,r,i)}},{key:"setupSceneMaterialForVariant",value:function(e,t,n){var r=this.getOrCreateSceneMaterialMetadata(e.id);r.isForPreview=!0,r.autoCreate=!0,r.variantID=t,r.variableMaterialID=n}},{key:"getSceneMaterialForVariant",value:function(e,t){for(var n=this._sceneHelper.getAllMaterials(),r=0;r<n.length;r++){var i=n[r],a=this.getSceneMaterialMetadata(i.id);if(a&&a.isForPreview&&a.variantID===e&&a.variableMaterialID===t)return n[r]}return null}},{key:"isSceneMaterialForVariant",value:function(e){if(!e)return!1;var t=this.getSceneMaterialMetadata(e.id);return t&&t.isForPreview}},{key:"canDeleteSceneMaterialForVariant",value:function(e){if(!e)return!1;var t=this.getSceneMaterialMetadata(e.id);return!t||void 0===t.isForPreview||null===t.isForPreview||void 0===t.autoCreate||null===t.autoCreate||t.isForPreview&&t.autoCreate}},{key:"getSceneMaterialMetadata",value:function(e){return this._sceneHelper.getSceneMaterialMetadata(e)}},{key:"getOrCreateSceneMaterialMetadata",value:function(e){return this._sceneHelper.getOrCreateSceneMaterialMetadata(e)}},{key:"removeSceneMaterialMetadata",value:function(e){this._sceneHelper.removeSceneMaterialMetadata(e)}},{key:"cloneSceneMaterial",value:function(e,t,n){var r=this._scene.getMaterialByID(e),i=null;if(r){var a=n||"".concat(r.name," - clone");if(i=r.clone(a)){var o=t||MPlaza.generateUUID();i.id=o;var s=this._zkScene.getMappingForSceneMaterial(r.id);if(s){var u=s.get("libraryMaterialID");this._zkScene.mapLibraryMaterial(u,i.id);for(var c=this._sceneHelper.getTexturesForMaterial(i),l=0;l<c.length;l++)c[l].materialMapping={libraryMaterialID:u,sceneMaterialID:i.id}}}}return i}},{key:"deleteSceneMaterial",value:function(e){var t=this._scene.getMaterialByID(e);if(t&&this.canDeleteSceneMaterialForVariant(t)){this.removeSceneMaterialMetadata(e);var n=this._zkScene.getLibraryShaderMaterialIDForSceneMaterial(e);n&&this._zkScene.unregisterShaderMaterial(n),this._zkScene.removeMappingForSceneMaterial(t.id);var r=this._sceneHelper.getTexturesExclusivelyForMaterial(t);t.dispose();for(var i=0;i<r.length;i++)r[i].dispose()}}},{key:"checkVariantOptionActions",value:function(e,t,n,r,i,a){var o=[];i.forEach((function(e){return o.push(e.id)}));for(var s=this.getOrCreateVariantAttribute(e),u=this.getOrCreateVariantAttributeOption(e,a,s),c=0;c<i.length;c++){var l=i[c],h=n.get("actions").getActionForMesh(l.id);if(!h){var f=new MPlaza.AttributeSceneAction;f.set("name",""),f.set("actionTypeID",MPlaza.SceneActionType.SetMeshMaterial),f.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),f.set("selector",l.id),f.set("value",n.get("optionMaterialID")),u.get("actions").push(f),(h=new MPlaza.VariantOptionMaterialAction).set("actionGuid",f.get("actionGuid")),h.set("meshID",l.id),n.get("actions").push(h)}}for(var d=[],p=0;p<n.get("actions").length;p++){var g=n.get("actions").at(p);if(-1===o.indexOf(g.get("meshID"))){var v=u.getActionByGuid(g.get("actionGuid"));v&&u.get("actions").remove(v),d.push(g)}}n.get("actions").remove(d)}},{key:"getVariantMaterials",value:function(e){var t=[],n=this._zkModel.getPreview3D();if(n&&e&&e instanceof MPlaza.Color){var r=this.getVariantID(e),i=n.getVariantsAttributeOptions();if(i){var a=i.getVariantOption(r);if(a)for(var o=0;o<a.get("materials").length;o++){var s=a.get("materials").at(o).get("optionMaterialID"),u=this._scene.getMaterialByID(s);u&&t.push(u)}}}return t}},{key:"getSelectedAttributeOption",value:function(e){var t={attributeID:null,attributeGuid:null,optionID:null,optionGuid:null},n=this._zkModel.getPreview3D();if(n&&e&&e instanceof MPlaza.Color){var r=this.getVariantID(e),i=n.getVariantsAttributeOptions();if(i&&i.get("attributeGuid")){var a=this._zkModel.getAttributeByGuid(i.get("attributeGuid"));if(a){var o=i.getVariantOption(r);if(o){var s=a.getOptionByGuid(o.get("optionGuid"));s&&(t.attributeID=a.get("attributeID"),t.attributeGuid=a.get("attributeGuid"),t.optionID=s.get("optionID"),t.optionGuid=s.get("optionGuid"))}}}}return t}},{key:"resetOriginaMaterialsOnMeshes",value:function(){var e=this._zkModel.getPreview3D();if(e){var t=e.getVariantsAttributeOptions();if(t)for(var n=0;n<t.get("variableMaterials").length;n++){var r=t.get("variableMaterials").at(n),i=r.get("materialID"),a=r.get("meshes"),o=this._scene.getMaterialByID(i);if(o)for(var s=0;s<a.length;s++){var u=this._scene.getMeshByID(r.get("meshes")[s]);u&&this._sceneHelper.applyMaterial(o,u)}}}}},{key:"getMeshesUsingMaterial",value:function(e){for(var t=[],n=this._sceneHelper.getSceneMeshes(),r=0;r<n.length;r++){var i=n[r];if(this._sceneHelper.isMeshUsingMaterial(i,e))t.push(i);else for(var a=this._sceneHelper.getMeshMaterials(i),o=0;o<a.length;o++){var s=a[o],u=this.getSceneMaterialMetadata(s.id);if(u&&u.isForPreview&&u.variableMaterialID&&u.variableMaterialID===e){t.push(i);break}}}return t}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{BaseProceduralTexture:function(){return h}});var r=n("../../3D/src/Components/SceneHelper.ts");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(){return o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},o.apply(this,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,n)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,BABYLON.ProceduralTexture);var t,n,i,h=u(f);function f(e,t,n,r,i,a,o){var s,u,l,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s=h.call(this,e,t,n,r,a,o),u=c(s),d=!1,(l="_initializing")in u?Object.defineProperty(u,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[l]=d,s._baseTexture=i,s.updateShaderUniforms(),s}return t=f,(n=[{key:"initializing",get:function(){return this._initializing}},{key:"baseTexture",get:function(){return this._baseTexture},set:function(e){this._baseTexture=e,this.updateShaderUniforms()}},{key:"isReadyAsync",value:function(){return r.SceneHelper.whenTextureIsReadyAsync(this)}},{key:"dispose",value:function(){o(l(f.prototype),"dispose",this).call(this),this._baseTexture&&this._baseTexture.dispose()}},{key:"beginInit",value:function(){this._initializing=!0}},{key:"endInit",value:function(){this._initializing=!1,this.updateShaderUniforms()}},{key:"updateShaderUniforms",value:function(){this._initializing||this.setBaseTextureUniform()}},{key:"setBaseTextureUniform",value:function(){this.setTexture("uSampler",this._baseTexture)}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}()},"../../3D/src/Components/ProceduralTextures/BlendProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{BlendProceduralTexture:function(){return h}});var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(f,BABYLON.ProceduralTexture);var t,n,r,h=s(f);function f(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(u(n=h.call(this,e,t,f.FRAGMENT_SHADER,r,i,a)),"_baseTexture",null),l(u(n),"_blendTexture",null),n.updateShaderUniforms(),n}return t=f,r=[{key:"Parse",value:function(e,t,n){var r=BABYLON.SerializationHelper.Parse((function(){return new f(e.name,e._size,t,void 0,e._generateMipMaps)}),e,t,n);return e.baseTexture&&(r.baseTexture=BABYLON.Texture.Parse(e.baseTexture,t,n)),e.blendTexture&&(r.blendTexture=BABYLON.Texture.Parse(e.blendTexture,t,n)),r}}],(n=[{key:"dispose",value:function(){this._baseTexture&&this._baseTexture.dispose(),this._blendTexture&&this._blendTexture.dispose()}},{key:"updateShaderUniforms",value:function(){this._baseTexture?(this.setTexture("uSampler",this._baseTexture),this.setInt("hasSampler",1),this.setVector2("uSamplerScale",new BABYLON.Vector2(this._baseTexture.uScale,this._baseTexture.vScale))):(this.setInt("hasSampler",0),this.setVector2("uSamplerScale",new BABYLON.Vector2(1,1))),this._blendTexture?(this.setTexture("uBlendSampler",this._blendTexture),this.setInt("hasBlend",1),this.setVector2("uBlendScale",new BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale))):(this.setInt("hasBlend",0),this.setVector2("uBlendScale",new BABYLON.Vector2(1,1))),this.setFloat("size",this.getRenderSize())}},{key:"render",value:function(e){a(c(f.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(c(f.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}},{key:"isReady",value:function(){return!(this._baseTexture&&!this._baseTexture.isReady())&&!(this._blendTexture&&!this._blendTexture.isReady())&&a(c(f.prototype),"isReady",this).call(this)}},{key:"baseTexture",get:function(){return this._baseTexture},set:function(e){this._baseTexture=e,this.updateShaderUniforms()}},{key:"blendTexture",get:function(){return this._blendTexture},set:function(e){this._blendTexture=e,this.updateShaderUniforms()}},{key:"serialize",value:function(){var e=BABYLON.SerializationHelper.Serialize(this,a(c(f.prototype),"serialize",this).call(this));return e.customType=f.CUSTOM_TYPE,this.baseTexture?e.baseTexture=this.baseTexture.serialize():e.baseTexture=null,this.blendTexture?e.blendTexture=this.blendTexture.serialize():e.blendTexture=null,e}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}();l(h,"FRAGMENT_SHADER","zakeke_BlendProceduralTexture"),l(h,"CUSTOM_TYPE","Zakeke.BlendProceduralTexture");var f=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","uniform bool hasSampler;","uniform bool hasBlend;","float BlendOverlayf(float base, float blend)","{","   return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));","}","vec4 BlendOverlay(vec4 base, vec4 blend)","{","   return vec4(BlendOverlayf(base.r, blend.r), BlendOverlayf(base.g, blend.g), BlendOverlayf(base.b, blend.b), BlendOverlayf(base.a, blend.a));","}","void main(void) {","   if (!hasSampler && !hasBlend)","   {","       gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","       return;","   }","   if (hasSampler && !hasBlend)","   {","       gl_FragColor = texture2D(uSampler, vUV.xy*uSamplerScale);","       return;","   }","   if (!hasSampler && hasBlend)","   {","       gl_FragColor = texture2D(uBlendSampler, vUV.xy*uBlendScale);","       return;","   }","   vec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","   vec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = BlendOverlay(base, blend);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(h.FRAGMENT_SHADER,"PixelShader")]=f,BABYLON.RegisterClass("Zakeke.BlendProceduralTexture",h)},"../../3D/src/Components/ProceduralTextures/BlurXProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{BlurXProceduralTexture:function(){return h}});var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(f,e);var t,n,r,h=s(f);function f(e,t,n,r,i,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(u(o=h.call(this,e,t,f.FRAGMENT_SHADER,n,r,i,a)),"_blur",1/512),o.updateShaderUniforms(),o}return t=f,(n=[{key:"blur",get:function(){return this._blur/(1/7e3)},set:function(e){this._blur=1/7e3*e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(c(f.prototype),"dispose",this).call(this)}},{key:"updateShaderUniforms",value:function(){if(a(c(f.prototype),"updateShaderUniforms",this).call(this),!this.initializing){var e=void 0!=this._blur?this._blur:1/512;this.setFloat("blur",e)}}},{key:"render",value:function(e){a(c(f.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(c(f.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);l(h,"FRAGMENT_SHADER","zakeke_BlurXProceduralTexture"),l(h,"CUSTOM_TYPE","Zakeke.BlurXProceduralTexture");var f=["precision mediump float;","varying vec2 vUV;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vUV.x - 4.0*blur, vUV.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vUV.x - 3.0*blur, vUV.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x - 2.0*blur, vUV.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x - blur, vUV.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vUV.x + blur, vUV.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x + 2.0*blur, vUV.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x + 3.0*blur, vUV.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x + 4.0*blur, vUV.y)) * 0.05;","   gl_FragColor = sum;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(h.FRAGMENT_SHADER,"PixelShader")]=f},"../../3D/src/Components/ProceduralTextures/BlurYProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{BlurYProceduralTexture:function(){return h}});var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(f,e);var t,n,r,h=s(f);function f(e,t,n,r,i,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(u(o=h.call(this,e,t,f.FRAGMENT_SHADER,n,r,i,a)),"_blur",1/512),o.updateShaderUniforms(),o}return t=f,(n=[{key:"blur",get:function(){return this._blur/(1/7e3)},set:function(e){this._blur=1/7e3*e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(c(f.prototype),"dispose",this).call(this)}},{key:"updateShaderUniforms",value:function(){if(a(c(f.prototype),"updateShaderUniforms",this).call(this),!this.initializing){var e=void 0!=this._blur?this._blur:1/512;this.setFloat("blur",e)}}},{key:"render",value:function(e){a(c(f.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(c(f.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);l(h,"FRAGMENT_SHADER","zakeke_BlurYProceduralTexture"),l(h,"CUSTOM_TYPE","Zakeke.BlurYProceduralTexture");var f=["precision mediump float;","varying vec2 vUV;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(h.FRAGMENT_SHADER,"PixelShader")]=f},"../../3D/src/Components/ProceduralTextures/ForegroundBackgroundProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{ForegroundBackgroundProceduralTexture:function(){return h}});var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(f,e);var t,n,r,h=s(f);function f(e,t,n,r,i,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(u(o=h.call(this,e,t,f.FRAGMENT_SHADER,n,r,i,a)),"_foreColor",new BABYLON.Vector3(1,1,1)),l(u(o),"_backColor",new BABYLON.Vector3(0,0,0)),o.updateShaderUniforms(),o}return t=f,(n=[{key:"foreColor",get:function(){return this._foreColor},set:function(e){this._foreColor=e,this.updateShaderUniforms()}},{key:"backColor",get:function(){return this._backColor},set:function(e){this._backColor=e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(c(f.prototype),"dispose",this).call(this)}},{key:"updateShaderUniforms",value:function(){if(a(c(f.prototype),"updateShaderUniforms",this).call(this),!this.initializing){var e=this._foreColor||new BABYLON.Vector3(1,1,1),t=this._backColor||new BABYLON.Vector3(0,0,0);this.setVector3("foreColor",e),this.setVector3("backColor",t)}}},{key:"render",value:function(e){a(c(f.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(c(f.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);l(h,"FRAGMENT_SHADER","zakeke_ForegroundBackgroundProceduralTexture"),l(h,"CUSTOM_TYPE","Zakeke.ForegroundBackgroundProceduralTexture");var f=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform vec3 foreColor;","uniform vec3 backColor;","void main(void) {","   // background color","   vec4 background = vec4(backColor.xyz, 1);","   vec4 foreground = vec4(foreColor.xyz, 1);","   // texel","\tvec4 t0 = texture2D(uSampler, vUV.xy);","   // change in white","   t0 = vec4(foreground.xyz, t0.a);","   gl_FragColor = mix(background, t0, t0.a);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(h.FRAGMENT_SHADER,"PixelShader")]=f},"../../3D/src/Components/ProceduralTextures/MoveProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{MoveProceduralTexture:function(){return h}});var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(f,e);var t,n,r,h=s(f);function f(e,t,n,r,i,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(u(o=h.call(this,e,t,f.FRAGMENT_SHADER,n,r,i,a)),"_offset",new BABYLON.Vector2(0,0)),o.updateShaderUniforms(),o}return t=f,(n=[{key:"offset",get:function(){return this._offset},set:function(e){this._offset=e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(c(f.prototype),"dispose",this).call(this)}},{key:"updateShaderUniforms",value:function(){if(a(c(f.prototype),"updateShaderUniforms",this).call(this),!this.initializing){var e=this.getRenderSize(),t=this._offset||new BABYLON.Vector2;this.setVector2("offset",new BABYLON.Vector2(t.x/e,t.y/e))}}},{key:"render",value:function(e){a(c(f.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(c(f.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);l(h,"FRAGMENT_SHADER","zakeke_MoveProceduralTexture"),l(h,"CUSTOM_TYPE","Zakeke.MoveProceduralTexture");var f=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform vec2 offset;","void main(void) {","   // translated texel","   gl_FragColor = texture2D(uSampler, vec2(vUV.x - offset.x, vUV.y + offset.y));","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(h.FRAGMENT_SHADER,"PixelShader")]=f},"../../3D/src/Components/ProceduralTextures/MultiplyProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{MultiplyProceduralTexture:function(){return l}});var l=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,n,r,c=s(l);function l(e,t,n,r,i,a,o){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(s=c.call(this,e,t,l.FRAGMENT_SHADER,n,r,a,o))._blendTexture=i,s.updateShaderUniforms(),s}return t=l,(n=[{key:"blendTexture",get:function(){return this._blendTexture},set:function(e){this._blendTexture=e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(u(l.prototype),"dispose",this).call(this),this._blendTexture&&this._blendTexture.dispose()}},{key:"updateShaderUniforms",value:function(){if(a(u(l.prototype),"updateShaderUniforms",this).call(this),!this.initializing){var e=new BABYLON.Vector2(1,1);this.baseTexture&&(e=new BABYLON.Vector2(this.baseTexture.uScale,this.baseTexture.vScale)),this.setVector2("uSamplerScale",e),this.setTexture("uBlendSampler",this._blendTexture);var t=new BABYLON.Vector2(1,1);this._blendTexture&&(t=new BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale)),this.setVector2("uBlendScale",t)}}},{key:"render",value:function(e){a(u(l.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(u(l.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);c(l,"FRAGMENT_SHADER","zakeke_MultiplyProceduralTexture"),c(l,"CUSTOM_TYPE","Zakeke.MultiplyProceduralTexture");var h=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","void main(void) {","\tvec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","\tvec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = base * blend;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(l.FRAGMENT_SHADER,"PixelShader")]=h},"../../3D/src/Components/ProceduralTextures/NormalMapProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{NormalMapProceduralTexture:function(){return h}});var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(f,e);var t,n,r,h=s(f);function f(e,t,n,r,i,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(u(o=h.call(this,e,t,f.FRAGMENT_SHADER,n,r,i,a)),"_bias",50),l(u(o),"_invertR",!1),l(u(o),"_invertG",!1),l(u(o),"_bevel",!1),l(u(o),"_intensity",.5),o.updateShaderUniforms(),o}return t=f,(n=[{key:"bias",get:function(){return void 0==this._bias?50:this._bias},set:function(e){this._bias=e,this.updateShaderUniforms()}},{key:"invertR",get:function(){return void 0!=this._invertR&&this._invertR},set:function(e){this._invertR=e,this.updateShaderUniforms()}},{key:"invertG",get:function(){return void 0!=this._invertG&&this._invertG},set:function(e){this._invertG=e,this.updateShaderUniforms()}},{key:"bevel",get:function(){return void 0!=this._bevel&&this._bevel},set:function(e){this._bevel=e,this.updateShaderUniforms()}},{key:"intensity",get:function(){return void 0==this._intensity?.5:this._intensity},set:function(e){this._intensity=e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(c(f.prototype),"dispose",this).call(this)}},{key:"updateShaderUniforms",value:function(){if(a(c(f.prototype),"updateShaderUniforms",this).call(this),!this.initializing){var e=this.getRenderSize(),t=e<1024?2*e:e;this.setFloat("size",e),this.setVector2("u_textureSize",new BABYLON.Vector2(e,e)),this.setVector3("dimensions",new BABYLON.Vector3(t,t,0)),this.setFloat("bias",this.bias),this.setFloat("invertR",this.invertR?-1:1),this.setFloat("invertG",this.invertG?-1:1),this.setFloat("bevel",this.bevel?1:0),this.setFloat("intensity",this.intensity)}}},{key:"render",value:function(e){a(c(f.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(c(f.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);l(h,"FRAGMENT_SHADER","zakeke_normalMapProceduralTexture"),l(h,"CUSTOM_TYPE","Zakeke.NormalMapProceduralTexture");var f=["precision mediump float;","varying vec2 vUV;","uniform vec3 dimensions;","uniform sampler2D uSampler;","uniform vec2 u_textureSize;","uniform float bias;","uniform float invertR;","uniform float invertG;","uniform float bevel;","uniform float intensity;","void main(void) {","   vec2 step = vec2(1.0, 1.0) / dimensions.xy;","   vec4 black = vec4(0, 0, 0, 1);","\tvec4 bk = vec4(1, 1, 1, 1);","\tvec4 t0 = texture2D(uSampler, vUV.xy + vec2(0.0, 0.0));","\tvec4 t1 = texture2D(uSampler, vUV.xy + vec2(step.x, 0.0));","\tvec4 t2 = texture2D(uSampler, vUV.xy + vec2(-step.x, 0.0));","\tvec4 t3 = texture2D(uSampler, vUV.xy + vec2(0.0, step.y));","\tvec4 t4 = texture2D(uSampler, vUV.xy + vec2(0.0, -step.y));","   if (bevel != 0.0) ","   {","      t0 = vec4(0, 0, 0, t0.a);","      t1 = vec4(0, 0, 0, t1.a);","      t2 = vec4(0, 0, 0, t2.a);","      t3 = vec4(0, 0, 0, t3.a);","      t4 = vec4(0, 0, 0, t4.a);","   }","\tt0 = mix(bk, t0, t0.a);","\tt1 = mix(bk, t1, t1.a);","\tt2 = mix(bk, t2, t2.a);","\tt3 = mix(bk, t3, t3.a);","\tt4 = mix(bk, t4, t4.a);","\tfloat d0 = abs(t0.r);","\tfloat d1 = abs(t1.r);","\tfloat d2 = abs(t2.r);","\tfloat d3 = abs(t3.r);","\tfloat d4 = abs(t4.r);","\tfloat dx = ((d2 - d0) + (d0 - d1)) * intensity;","\tfloat dy = ((d4 - d0) + (d0 - d3)) * intensity;","\tvec4 normal = vec4(normalize(vec3(dx * invertR, dy * invertG, 1.0 - ((bias - 0.1) / 100.0))), 1.0);","\tgl_FragColor = vec4(normal.xyz * 0.5 + 0.5, 1.0);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(h.FRAGMENT_SHADER,"PixelShader")]=f},"../../3D/src/Components/ProceduralTextures/OpacityProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{OpacityProceduralTexture:function(){return h}});var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(f,e);var t,n,r,h=s(f);function f(e,t,n,r,i,a,o){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),l(u(s=h.call(this,e,t,f.FRAGMENT_SHADER,n,r,a,o)),"_opacity",1),s.updateShaderUniforms(),s}return t=f,(n=[{key:"opacity",get:function(){return void 0==this._opacity?1:this._opacity},set:function(e){this._opacity=e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(c(f.prototype),"dispose",this).call(this)}},{key:"updateShaderUniforms",value:function(){a(c(f.prototype),"updateShaderUniforms",this).call(this),this.initializing||this.setFloat("opacity",this.opacity)}},{key:"render",value:function(e){a(c(f.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(c(f.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);l(h,"FRAGMENT_SHADER","zakeke_OpacityProceduralTexture"),l(h,"CUSTOM_TYPE","Zakeke.OpacityProceduralTexture");var f=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform float opacity;","void main(void) {","\tvec4 color = texture2D(uSampler, vUV.xy);","   color.a = opacity;","   gl_FragColor = color;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(h.FRAGMENT_SHADER,"PixelShader")]=f},"../../3D/src/Components/ProceduralTextures/OverlayProceduralTexture.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{OverlayProceduralTexture:function(){return l}});var l=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,n,r,c=s(l);function l(e,t,n,r,i,a,o){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(s=c.call(this,e,t,l.FRAGMENT_SHADER,n,r,a,o))._blendTexture=i,s.updateShaderUniforms(),s}return t=l,(n=[{key:"blendTexture",get:function(){return this._blendTexture},set:function(e){this._blendTexture=e,this.updateShaderUniforms()}},{key:"dispose",value:function(){a(u(l.prototype),"dispose",this).call(this),this._blendTexture&&this._blendTexture.dispose()}},{key:"updateShaderUniforms",value:function(){if(a(u(l.prototype),"updateShaderUniforms",this).call(this),!this.initializing){var e=new BABYLON.Vector2(1,1);this.baseTexture&&(e=new BABYLON.Vector2(this.baseTexture.uScale,this.baseTexture.vScale)),this.setVector2("uSamplerScale",e),this.setTexture("uBlendSampler",this._blendTexture);var t=new BABYLON.Vector2(1,1);this._blendTexture&&(t=new BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale)),this.setVector2("uBlendScale",t)}}},{key:"render",value:function(e){a(u(l.prototype),"render",this).call(this,e)}},{key:"resize",value:function(e,t){a(u(l.prototype),"resize",this).call(this,e,t),this.updateShaderUniforms()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(n("../../3D/src/Components/ProceduralTextures/BaseProceduralTexture.ts").BaseProceduralTexture);c(l,"FRAGMENT_SHADER","zakeke_OverlayProceduralTexture"),c(l,"CUSTOM_TYPE","Zakeke.OverlayProceduralTexture");var h=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","float BlendOverlayf(float base, float blend)","{","   return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));","}","vec4 BlendOverlay(vec4 base, vec4 blend)","{","   return vec4(BlendOverlayf(base.r, blend.r), BlendOverlayf(base.g, blend.g), BlendOverlayf(base.b, blend.b), BlendOverlayf(base.a, blend.a));","}","void main(void) {","\tvec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","\tvec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = BlendOverlay(base, blend);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(l.FRAGMENT_SHADER,"PixelShader")]=h},"../../3D/src/Components/SceneHelper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{SceneHelper:function(){return y}});var r=n("../../../node_modules/@gltf-transform/core/dist/core.modern.js"),i=n("../../../node_modules/@zakeke/zakeke-resizable-canvas/dist/index.js"),a=n("../Components/ChunkedTask.ts"),o=n("../../3D/src/Misc/DefaultAssetUrls.ts"),s=n("../../3D/src/Misc/StringTools.ts"),u=n("../../3D/src/Components/MeshExpander/MeshExpander.ts"),c=n("../../3D/src/Components/USDZ/UsdzHelper.ts");function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var l={};function h(){}function p(){}function g(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==f(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,s(_,"constructor",g),s(g,"constructor",p),p.displayName=s(g,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),s(_,o,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function p(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,s,"next",e)}function s(e){p(a,r,i,o,s,"throw",e)}o(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_hemiLight",null),m(this,"_pointLight",null),m(this,"_onPrePointerObservableObserver",null),m(this,"_isPointerDown",!1),m(this,"_radiusScale",.85),m(this,"_positionScale",.5),m(this,"_limitLowerRadius",!0),m(this,"_zoomEnabled",!0),m(this,"_minZoomPerc",null),m(this,"_maxZoomPerc",null),m(this,"_cameraPivot",null),m(this,"_resizableCanvas3DGenerator",new i.Preview3DGenerator),m(this,"_defHemiLightID","f90aba65-3b60-44ac-87f4-1b6441aee44b"),m(this,"_defPointLightID","b6491635-c471-45a4-bbb8-3f08556e5b3c"),m(this,"_targetAnimationID","6225769c-0113-4236-ab17-c39d24013de4"),m(this,"_radiusAnimationID","6f946c2f-af8d-46ab-9bea-9e22dedc4e9d"),m(this,"_alphaAnimationID","10713520-fe06-4cbf-bc6a-bab881d516e6"),m(this,"_betaAnimationID","6096ba34-852a-4423-bab3-dc97c1a9268f"),m(this,"_dummyMaterialID","081796b8-0908-44dc-a38a-d786b14cA6fc"),m(this,"_loadingMaterials",{}),this._scene=t,this._engine=t.getEngine(),this._camera=t.activeCamera,this._canvas=t.getEngine().getRenderingCanvas(),this.init()}var t,n,h;return t=e,n=[{key:"camera",get:function(){return this._camera}},{key:"materialRequiresDelayedLoading",value:function(e){return!this._scene.getMaterialByID(e)&&(!!(this._scene.metadata&&this._scene.metadata.delayedMaterials&&this._scene.metadata.delayedMaterials.hasOwnProperty(e))||!!(this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._scene.metadata.offloadedMaterials.hasOwnProperty(e)))}},{key:"init",value:function(){var e=this;this._onPrePointerObservableObserver=this._scene.onPrePointerObservable.add((function(t){t.type!==BABYLON.PointerEventTypes.POINTERDOWN?t.type===BABYLON.PointerEventTypes.POINTERUP&&(e._isPointerDown=!1):e._isPointerDown=!0}))}},{key:"dispose",value:function(){this._scene&&this._onPrePointerObservableObserver&&this._scene.onPrePointerObservable.remove(this._onPrePointerObservableObserver)}},{key:"switchFullScreen",value:function(e){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?this.quitFullscreen(e||this._canvas):this.launchFullscreen(e||this._canvas),this._canvas&&(this._canvas.width=document.body.clientWidth,this._canvas.height=document.body.clientHeight,this.adjustCamera(void 0,!0,!0,!1))}},{key:"quitFullscreen",value:function(e){var t=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen;t&&t.call(document)}},{key:"launchFullscreen",value:function(e){var t=e.requestFullscreen||e.webkitRequestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen;t&&t.call(e)}},{key:"getMeshHierarchySize",value:function(e){var t=e.getHierarchyBoundingVectors(!0);return t.max.subtract(t.min)}},{key:"getMeshHierarchyCenter",value:function(e){var t=e.getHierarchyBoundingVectors(!0),n=t.max.subtract(t.min);return t.min.add(n.scale(.5))}},{key:"getSceneBoundingInfo",value:function(){if(!this._scene)return null;var e=this.getWorldExtends();return e?new BABYLON.BoundingInfo(e.min,e.max):null}},{key:"userIsMoving",value:function(){return!!(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)&&(0!==this._camera.inertialAlphaOffset||0!==this._camera.inertialBetaOffset||0!==this._camera.inertialRadiusOffset||0!==this._camera.inertialPanningX||0!==this._camera.inertialPanningY||this._isPointerDown)}},{key:"cameraIsMoving",value:function(){return!!(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)&&(0!==this._camera.inertialAlphaOffset||0!==this._camera.inertialBetaOffset||0!==this._camera.inertialRadiusOffset||0!==this._camera.inertialPanningX||0!==this._camera.inertialPanningY)}},{key:"cameraLimitsReached",value:function(){return!!(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)&&(void 0!==this._camera.lowerRadiusLimit&&null!==this._camera.lowerRadiusLimit&&this._camera.radius===this._camera.lowerRadiusLimit||void 0!==this._camera.upperRadiusLimit&&null!==this._camera.upperRadiusLimit&&this._camera.radius===this._camera.upperRadiusLimit)}},{key:"restoreCameraState",value:function(){this._camera&&this._camera.restoreState()}},{key:"isTextureWithUrl",value:function(e){return e&&(e instanceof BABYLON.Texture||e instanceof BABYLON.CubeTexture||e instanceof BABYLON.HDRCubeTexture||e instanceof BABYLON.ColorGradingTexture||e instanceof BABYLON.EquiRectangularCubeTexture)}},{key:"getTextureUrl",value:function(e){if(e&&(e instanceof BABYLON.Texture||e instanceof BABYLON.CubeTexture||e instanceof BABYLON.HDRCubeTexture||e instanceof BABYLON.ColorGradingTexture||e instanceof BABYLON.EquiRectangularCubeTexture)){var t=e.url;if(e.getInternalTexture){var n=e.getInternalTexture();n&&n.url&&(t=n.url)}return t}return null}},{key:"isEditControl",value:function(e){return e&&("EditoControl"==e.name||e.metadata&&e.metadata.isEditControl)}},{key:"isRealMesh",value:function(e){return!(this.isEditControl(e)||e.metadata&&(e.metadata.boundingBox||e.metadata.isAxis||e.metadata.isGround||e.metadata.isEnvironmentNode||e.metadata.hasOwnProperty("isRealMesh")&&!e.metadata.isRealMesh))}},{key:"meshHasParent",value:function(e,t){if(this._scene){var n=this._scene.getMeshByID(e);if(n)for(;n.parent;){if(n.parent.id===t)return!0;n=n.parent}}return!1}},{key:"countSceneMeshes",value:function(){var e=this,t=0;return this._scene&&this._scene.meshes.forEach((function(n){e.isRealMesh(n)&&t++})),t}},{key:"sceneHasRealMeshes",value:function(){for(var e=0;e<this._scene.meshes.length;e++)if(this.isRealMesh(this._scene.meshes[e]))return!0;return!1}},{key:"getSceneMeshes",value:function(){var e=this,t=[];return this._scene&&this._scene.meshes.forEach((function(n){e.isRealMesh(n)&&t.push(n)})),t}},{key:"getSceneMeshesByName",value:function(e){var t,n=[];if(this._scene&&e)for(var r=new RegExp((t=e,t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).replace(/\\\*/g,".*"),"i"),i=0;i<this._scene.meshes.length;i++){var a=this._scene.meshes[i];this.isRealMesh(a)&&a.name&&r.test(a.name)&&n.push(a)}return n}},{key:"getVisibleMeshes",value:function(){var e=this,t=[];return this._scene.meshes.forEach((function(n){e.isRealMesh(n)&&n.isVisible&&t.push(n)})),t}},{key:"getInvisibleMeshes",value:function(){var e=this,t=[];return this._scene.meshes.forEach((function(n){e.isRealMesh(n)&&!n.isVisible&&t.push(n)})),t}},{key:"getSubMesh",value:function(e,t){return e.subMeshes&&e.subMeshes.length>0&&t>=0&&t<e.subMeshes.length?e.subMeshes[t]:null}},{key:"getMeshHierarchy",value:function(e){var t=[],n=this._scene.getMeshByID(e);return n?(function e(n){t.push(n);for(var r=n.getChildMeshes(),i=0;i<r.length;i++)e(r[i])}(n),t):t}},{key:"isCanvasMesh",value:function(e){return!!e&&!!e.metadata&&!(!e.metadata.hasOwnProperty("iscanvasMesh")||"boolean"!==typeof e.metadata.iscanvasMesh)&&e.metadata.iscanvasMesh}},{key:"isAREnabledForMesh",value:function(e){return!!e&&(!e.metadata||void 0===e.metadata.AR||null===e.metadata.AR||"boolean"!==typeof e.metadata.AR||e.metadata.AR)}},{key:"isTryOnEnabledForMesh",value:function(e){return!!e&&(!e.metadata||void 0===e.metadata.TryOn||null===e.metadata.TryOn||"boolean"!==typeof e.metadata.TryOn||e.metadata.TryOn)}},{key:"getMeshesForAR",value:function(){var e=this,t=[];return this._scene&&this._scene.meshes.forEach((function(n){(e.isRealMesh(n)||e.isCanvasMesh(n))&&n.isVisible&&e.isAREnabledForMesh(n)&&t.push(n)})),t}},{key:"checkMaterialsForAR",value:function(){for(var e=this.getMeshesMaterials(this.getMeshesForAR()),t=0;t<e.length;t++){var n=e[t];if(!(n instanceof BABYLON.PBRMaterial)&&!(n instanceof BABYLON.PBRMetallicRoughnessMaterial)&&!(n instanceof BABYLON.StandardMaterial))return!1}return!0}},{key:"getMeshesMaterials",value:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];if(i.material)if(i.material instanceof BABYLON.MultiMaterial)for(var a=0;a<i.material.subMaterials.length;a++){var o=i.material.subMaterials[a];o&&-1===t.indexOf(o.id)&&(n.push(o),t.push(o.id))}else-1===t.indexOf(i.material.id)&&(n.push(i.material),t.push(i.material.id))}return n}},{key:"getMeshMaterials",value:function(e){var t=[];if(e&&e.material)if(e.material instanceof BABYLON.MultiMaterial)for(var n=0;n<e.material.subMaterials.length;n++){var r=e.material.subMaterials[n];r&&t.push(r)}else t.push(e.material);return t}},{key:"getHiddenMeshTotalVertices",value:function(){return this.getTotalVertices((function(e){return!e.isVisible}))}},{key:"getTotalVertices",value:function(e){var t=this,n=0;return this._scene&&this._scene.meshes.forEach((function(r){t.isRealMesh(r)&&(e&&!e(r)||(n+=r.getTotalVertices()))})),n}},{key:"getHiddenMeshTotalIndices",value:function(){return this.getTotalIndices((function(e){return!e.isVisible}))}},{key:"getTotalIndices",value:function(e){var t=this,n=0;return this._scene&&this._scene.meshes.forEach((function(r){t.isRealMesh(r)&&(e&&!e(r)||(n+=r.getTotalIndices()))})),n}},{key:"getAllMaterials",value:function(){var e=[];return this._scene&&this._scene.materials.forEach((function(t){if(t.metadata){if(void 0!==t.metadata.isRealMaterial&&!t.metadata.isRealMaterial)return;if(void 0!==t.metadata.isEnvironmentNode&&t.metadata.isEnvironmentNode)return}"groundMaterial"!==t.id&&"default material"!==t.id&&e.push(t)})),e}},{key:"getMeshesUsingMaterial",value:function(e){for(var t=[],n=this.getSceneMeshes(),r=0;r<n.length;r++){var i=n[r];this.isMeshUsingMaterial(i,e)&&t.push(i)}return t}},{key:"isMeshUsingMaterial",value:function(e,t){if(e.material){if(e.material.id===t)return!0;if(e.material instanceof BABYLON.MultiMaterial)for(var n=0;n<e.material.subMaterials.length;n++){var r=e.material.subMaterials[n];if(r&&r.id===t)return!0}}return!1}},{key:"getAllUnusedMaterials",value:function(){for(var e=this.getAllMaterials(),t=[],n=0;n<e.length;n++){var r=e[n];0===this.getMeshesUsingMaterial(r.id).length&&t.push(r)}return t}},{key:"getSceneScreenshotAsync",value:function(){var e=g(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._camera){e.next=2;break}return e.abrupt("return","");case 2:return r={width:t,height:n},e.next=5,BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,r,"image/png");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"containsPBRMaterials",value:function(){if(this._scene)for(var e=0;e<this._scene.materials.length;e++)if(this._scene.materials[e]instanceof BABYLON.PBRBaseMaterial)return!0;return!1}},{key:"getMeshesForTryOn",value:function(){var e=this,t=[];return this._scene&&this._scene.meshes.forEach((function(n){(e.isRealMesh(n)||e.isCanvasMesh(n))&&n.isVisible&&e.isTryOnEnabledForMesh(n)&&t.push(n)})),t}},{key:"setupLights",value:function(){var e=this;this._hemiLight=null,this._pointLight=null;var t=null,n=null;this._scene.lights.forEach((function(r){r instanceof BABYLON.HemisphericLight&&(null===t&&(t=r),r.id===e._defHemiLightID&&(e._hemiLight=r)),r instanceof BABYLON.PointLight&&(null===n&&(n=r),r.id===e._defPointLightID&&(e._pointLight=r))})),null===this._hemiLight&&(null!==t?this._hemiLight=t:(this._hemiLight=new BABYLON.HemisphericLight("Default Hemispheric Light",BABYLON.Vector3.Up(),this._scene),this._hemiLight.intensity=.5),this._hemiLight&&(this._hemiLight.id=this._defHemiLightID)),null===this._pointLight&&(null!==n?this._pointLight=n:(this._pointLight=new BABYLON.PointLight("Default Point Light",new BABYLON.Vector3(0,5,0),this._scene),this._pointLight.intensity=.5),this._pointLight&&(this._pointLight.id=this._defPointLightID))}},{key:"getDefaultHemisphericLight",value:function(){return this._hemiLight}},{key:"getDefaultPointLight",value:function(){return this._pointLight}},{key:"isDefaultLight",value:function(e){return e.id==this._defHemiLightID||e.id==this._defPointLightID}},{key:"setupCamera",value:function(){if(this._scene){var e=this._scene.cameras.find((function(e){return e instanceof BABYLON.ArcRotateCamera}));e?this._camera=e:(this._camera=new BABYLON.ArcRotateCamera("camera1",0,0,0,BABYLON.Vector3.Zero(),this._scene),this._camera.setPosition(new BABYLON.Vector3(0,3,-8))),this.setupCameraLimits(),this._canvas&&this._camera.attachControl(this._canvas,!1)}}},{key:"setCameraRadiusParameters",value:function(e){this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._camera.lowerRadiusLimit=e*(this._zoomEnabled?.01:1),this._camera.upperRadiusLimit=e*(this._zoomEnabled?3:1),this._camera.wheelPrecision=100/e,this._camera.pinchPrecision=100/e,this._camera.minZ=.01*e,this._camera.maxZ=1e3*e,this._camera.speed=.2*e,this._camera.wheelDeltaPercentage=.01,this._camera.pinchDeltaPercentage=6e-4,this._camera.panningSensibility=1e-6,this._camera.wheelPrecision=100/e,this._camera.panningAxis=BABYLON.Vector3.Zero(),this._camera.panningInertia=0)}},{key:"removeCameraLimits",value:function(){this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._camera.lowerRadiusLimit=null,this._camera.upperRadiusLimit=null,this._camera.minZ=1,this._camera.maxZ=1e4)}},{key:"getWorldExtends",value:function(){var e=this;return this._scene?this._scene.getWorldExtends((function(t){return e.isRealMesh(t)&&t.isVisible})):null}},{key:"getCameraWorldExtends",value:function(){var e=this,t=null;if(this._scene){var n=this._cameraPivot;if(!n)for(var r=0;r<this._scene.meshes.length;r++){var i=this._scene.meshes[r];if(i.metadata&&void 0!==i.metadata.isCameraPivot&&i.metadata.isCameraPivot){n=i;break}}n&&(t=this._scene.getWorldExtends((function(t){return t===n||e.meshHasParent(t.id,n.id)})))}return t||(t=this.getWorldExtends()),t}},{key:"setupCameraLimits",value:function(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){if(void 0===e||null===e){var t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return;var n=e.max.subtract(e.min);if(isFinite(n.length())){this.removeCameraLimits();var r=this.calculateCameraRadius(e);if(this.setCameraRadiusParameters(r),this._limitLowerRadius){if(this._scene.meshes.length&&this._zoomEnabled){this._camera.useFramingBehavior=!0;var i=this._camera.getBehaviorByName("Framing");i&&i instanceof BABYLON.FramingBehavior&&(i.framingTime=0,i.elevationReturnTime=-1,i.radiusScale=this._radiusScale,i.positionScale=this._positionScale,this._camera.lowerRadiusLimit=null,i.zoomOnBoundingInfo(e.min,e.max),null!==this._minZoomPerc&&void 0!==this._minZoomPerc&&this._minZoomPerc>0&&(this._camera.lowerRadiusLimit=r*this._minZoomPerc),null!==this._maxZoomPerc&&void 0!==this._maxZoomPerc&&this._maxZoomPerc>0&&(this._camera.upperRadiusLimit=r*this._maxZoomPerc))}}else this._camera.lowerRadiusLimit=null}}}},{key:"adjustCamera",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var a=this.getCameraWorldExtends();if(a){var o=a.max.subtract(a.min);if(isFinite(o.length())){var s=a.min.add(o.scale(.5));this.removeCameraLimits();var u=this.calculateCameraRadius(a),c=this._camera.alpha;n||(c=-Math.PI/2,e&&"gltf"===e&&(c+=Math.PI));var l=this._camera.beta;r||(l=Math.PI/2-.3);var h=s.clone(),f=a.min.y,d=f+(a.max.y-f)*this._positionScale;h.y=d,i?this.animateCameraToFinalParamters(c,l,u,h,2,(function(){t.setupCameraLimits(a)})):(this._camera.alpha=c,this._camera.beta=l,this._camera.radius=u,this._camera.target=h,this.setupCameraLimits(a))}}}}},{key:"normalizeAngleOfView",value:function(e,t){var n=BABYLON.Vector3.Zero(),r=new BABYLON.ArcRotateCamera("ghostCamera",e,t,1,n,this._scene),i=r.position;return r.dispose(),this.computeCameraAngleOfView(n,i)}},{key:"computeCameraAngleOfView",value:function(e,t){var n=new BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);n.setPosition(t);var r=n.alpha,i=n.beta;return n.dispose(),{alpha:r,beta:i}}},{key:"moveCamera",value:function(e,t){var n=new BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);n.setPosition(t);var r=n.alpha,i=n.beta,a=n.radius;n.dispose(),this.moveCameraToFinalParameters(r,i,a,e)}},{key:"animateCamera",value:function(e,t,n,r){var i=new BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);i.setPosition(t);var a=i.alpha,o=i.beta,s=i.radius;i.dispose(),this.animateCameraToFinalParamters(a,o,s,e,n,r)}},{key:"wrapPi",value:function(e){if(Math.abs(e)>Math.PI){var t=2*Math.PI;e-=Math.floor((e+Math.PI)*(1/t))*t}return e}},{key:"wrap2Pi",value:function(e){var t=e%(2*Math.PI);return t<0&&(t+=2*Math.PI),t}},{key:"zoomIn",value:function(){this.zoom(.85)}},{key:"zoomOut",value:function(){this.zoom(1.15)}},{key:"zoom",value:function(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var t=this._camera.radius,n=null!==this._camera.lowerRadiusLimit&&void 0!==this._camera.lowerRadiusLimit?this._camera.lowerRadiusLimit:0,r=Math.max(0,n),i=Number.MAX_VALUE;null!=this._camera.upperRadiusLimit&&(i=this._camera.upperRadiusLimit);var a=Math.max(r,Math.min(i,t*e));a!==t&&this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,a,this._camera.target,.5)}}},{key:"moveCameraToFinalParameters",value:function(e,t,n,r){this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._camera.target=r,this._camera.alpha=e,this._camera.beta=t,this._camera.radius=n)}},{key:"animateCameraToFinalParamters",value:function(e,t,n,r,i,a){var o=this;if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var s=function(){if(o._camera){o._scene.stopAnimation(o._camera);for(var e=0;e<o._camera.animations.length;e++)o._camera.animations[e],o._camera.animations.splice(e--,1)}};s();var u=this._camera.alpha;this._camera.lowerAlphaLimit||this._camera.upperAlphaLimit||(u=this.wrap2Pi(this._camera.alpha));var c=this._camera.beta;this._camera.lowerBetaLimit||this._camera.upperBetaLimit||(c=this.wrap2Pi(this._camera.beta));var l=isFinite(e)?this.wrapPi(e):u;Math.abs(u-l)>Math.PI&&(l+=2*Math.PI);var h=isFinite(t)?this.wrapPi(t):c;Math.abs(c-h)>Math.PI&&(h+=2*Math.PI);var f=2;i&&"number"===typeof i&&i>0&&(f=i);var d=Math.floor(60*f),p=this._camera.target.subtract(r).length()/this._camera.radius,g=[],v=new BABYLON.CubicEase;v.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);var m=null;this._camera.target!==r&&(p>=.005?(m=new BABYLON.Animation("camTargetAnimation","target",60,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),g=[{frame:0,value:this._camera.target},{frame:d,value:r}],m.setKeys(g),m.setEasingFunction(v)):this._camera.target=r);var y=null;u!==l&&(g=[{frame:0,value:u},{frame:d,value:l}],(y=new BABYLON.Animation("camAlphaAnimation","alpha",60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE)).setKeys(g),y.setEasingFunction(v));var _=null;c!==h&&(g=[{frame:0,value:c},{frame:d,value:h}],(_=new BABYLON.Animation("camBetaAnimation","beta",60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE)).setKeys(g),_.setEasingFunction(v));var b=Math.abs(this._camera.radius-n)/this._camera.radius,x=null;this._camera.radius!==n&&(b>=.005?(x=new BABYLON.Animation("camRadiusAnimation","radius",60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),g=[{frame:0,value:this._camera.radius},{frame:d,value:n}],x.setKeys(g),x.setEasingFunction(v)):this._camera.radius=n);var w=this._camera.animations.length;m&&this._camera.animations.push(m),y&&this._camera.animations.push(y),_&&this._camera.animations.push(_),x&&this._camera.animations.push(x),this._camera.animations.length>w?this._scene.beginAnimation(this._camera,0,d,!1,1).onAnimationEnd=function(){s(),o.setupShaderMaterialsCameraPosition(),a&&a()}:a&&a()}}},{key:"getFrustumSlope",value:function(){var e=this._camera;if(!e)return BABYLON.Vector2.Zero();var t=this._engine.getAspectRatio(e),n=Math.tan(e.fov/2),r=n*t;return new BABYLON.Vector2(r,n)}},{key:"calculateCameraRadius",value:function(e){if(void 0===e||null===e){var t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return 1;e.max.subtract(e.min);var n=this.calculateLowerRadiusFromModelBoundingSphere(e.min,e.max);return isFinite(n)||(n=1),n}},{key:"calculateLowerRadiusFromModelBoundingSphere",value:function(e,t){var n=t.subtract(e).length(),r=this.getFrustumSlope(),i=.5*n*this._radiusScale,a=i*Math.sqrt(1+1/(r.x*r.x)),o=i*Math.sqrt(1+1/(r.y*r.y)),s=Math.max(a,o),u=this._camera;return u&&u instanceof BABYLON.ArcRotateCamera?(u.upperRadiusLimit&&(s=s>u.upperRadiusLimit?u.upperRadiusLimit:s),s):0}},{key:"getWorldCenter",value:function(e){if(void 0===e||null===e){var t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return null;var n=e.max.subtract(e.min);return isFinite(n.length())?e.min.add(n.scale(.5)):null}},{key:"getCameraWorldCenter",value:function(e){if(void 0===e||null===e){var t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return null;var n=e.max.subtract(e.min);return isFinite(n.length())?e.min.add(n.scale(.5)):null}},{key:"getCameraRadius",value:function(e){if(void 0===e||null===e){var t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return null;var n=e.max.subtract(e.min);return isFinite(n.length())?this.calculateCameraRadius(e):null}},{key:"setCameraLimitLowerRadius",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._limitLowerRadius=e,this.setupCameraLimits(),t&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&this.sceneHasRealMeshes()){var n=this._camera.target.clone(),r=this.getCameraWorldExtends();if(r){var i=r.min.y,a=i+(r.max.y-i)*this._positionScale;n.y=a,this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,this._camera.radius,n,.5)}}}},{key:"setCameraPositionScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._positionScale=e,t&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&this.sceneHasRealMeshes()){var n=this._camera.target.clone(),r=this.getCameraWorldExtends();if(r){var i=r.min.y,a=i+(r.max.y-i)*this._positionScale;n.y=a,this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,this._camera.radius,n,.5)}}}},{key:"getCameraPivot",value:function(){return this._cameraPivot}},{key:"setCameraPivot",value:function(e){this._cameraPivot=e,this.adjustCamera(void 0,!0,!0,!0)}},{key:"setZoomEnabled",value:function(e){this._zoomEnabled=e,this.adjustCamera(void 0,!0,!0,!0)}},{key:"setMinZoomPerc",value:function(e){var t=void 0===e||null===e?null:e;t!==this._minZoomPerc&&(this._minZoomPerc=t,this.adjustCamera(void 0,!0,!0,!1))}},{key:"setMaxZoomPerc",value:function(e){var t=void 0===e||null===e?null:e;t!==this._maxZoomPerc&&(this._maxZoomPerc=t,this.adjustCamera(void 0,!0,!0,!1))}},{key:"setCameraAlphaLimits",value:function(e,t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var n=this.normalizeAngleOfView(this._camera.alpha,this._camera.beta).alpha;this.setCameraLowerAlphaLimit(e),this.setCameraUpperAlphaLimit(t),this._camera.alpha=n}}},{key:"setCameraLowerAlphaLimit",value:function(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null===e||void 0===e)this._camera.lowerAlphaLimit=null;else{var t=this.normalizeAngleOfView(e,this._camera.beta).alpha;this._camera.upperAlphaLimit&&t>this._camera.upperAlphaLimit&&(this._camera.upperAlphaLimit+=2*Math.PI),this._camera.lowerAlphaLimit=t}}},{key:"setCameraUpperAlphaLimit",value:function(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null===e||void 0===e)this._camera.upperAlphaLimit=null;else{var t=this.normalizeAngleOfView(e,this._camera.beta).alpha;this._camera.lowerAlphaLimit&&t<this._camera.lowerAlphaLimit&&(t+=2*Math.PI),this._camera.upperAlphaLimit=t}}},{key:"setCameraLowerBetaLimit",value:function(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null===e||void 0===e)this._camera.lowerBetaLimit=.01;else{var t=this.normalizeAngleOfView(this._camera.alpha,e).beta;this._camera.upperBetaLimit&&t>this._camera.upperBetaLimit&&(this._camera.upperBetaLimit+=2*Math.PI),this._camera.lowerBetaLimit=t}}},{key:"setCameraUpperBetaLimit",value:function(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null===e||void 0===e)this._camera.upperBetaLimit=Math.PI-.01;else{var t=this.normalizeAngleOfView(this._camera.alpha,e).beta;this._camera.lowerBetaLimit&&t<this._camera.lowerBetaLimit&&(this._camera.lowerBetaLimit-=2*Math.PI),this._camera.upperBetaLimit=t}}},{key:"setCameraBetaLimits",value:function(e,t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var n=this.normalizeAngleOfView(this._camera.alpha,this._camera.beta).beta;this.setCameraLowerBetaLimit(e),this.setCameraUpperBetaLimit(t),this._camera.beta=n}}},{key:"zoomOnMesh",value:function(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){this._camera.useFramingBehavior=!0;var t=this._camera.getBehaviorByName("Framing");t&&t instanceof BABYLON.FramingBehavior&&(t.framingTime=0,t.elevationReturnTime=-1,t.radiusScale=this._radiusScale,t.positionScale=this._positionScale,t.zoomOnMeshHierarchy(e))}}},{key:"takeScreenshotAsync",value:function(){var e=g(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._camera){e.next=2;break}return e.abrupt("return","");case 2:return r={width:t,height:n},e.next=5,BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,r,"image/png");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"takeContentScreenshotAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._camera){e.next=2;break}return e.abrupt("return","");case 2:return r=this._scene.clearColor.clone(),this._scene.clearColor=new BABYLON.Color4(0,0,0,0),this._scene.render(),i={width:t,height:n},a=BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,i,"image/png"),this._scene.render(),this._scene.getEngine().endFrame(),e.next=11,a;case 11:return o=e.sent,this._scene.clearColor=r,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"takeMaterialScreenshotAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._scene.getMaterialByID(t)){e.next=3;break}return e.abrupt("return","");case 3:for(a=this.getVisibleMeshes(),o=0;o<a.length;o++)a[o].isVisible=!1;return s=this._scene.clearColor.clone(),this._scene.clearColor=new BABYLON.Color4(0,0,0,0),(u=BABYLON.Mesh.CreateSphere("temp_sphere",32,2,this._scene)).material=i,(c=new BABYLON.ArcRotateCamera("temp_camera",0,0,0,BABYLON.Vector3.Zero(),this._scene)).setPosition(new BABYLON.Vector3(0,0,-4)),this._scene.activeCamera=c,this._scene.render(),l={width:n,height:r},e.next=16,BABYLON.Tools.CreateScreenshotAsync(this._engine,c,l,"image/png");case 16:for(h=e.sent,this._scene.clearColor=s,u.dispose(),f=0;f<a.length;f++)a[f].isVisible=!0;return this._scene.activeCamera=this._camera,c.dispose(),e.abrupt("return",h);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getScenePBRMaterials",value:function(){var e=[];return this._scene&&this._scene.materials.forEach((function(t){t instanceof BABYLON.PBRBaseMaterial&&e.push(t)})),e}},{key:"resetPBRMaterialsImageProcessingConfiguration",value:function(){var e=this;this.getScenePBRMaterials().forEach((function(t){e.adjustPBRMaterialImageProcessingConfiguration(t)}))}},{key:"adjustPBRMaterialImageProcessingConfiguration",value:function(e){e instanceof BABYLON.PBRMaterial&&e.imageProcessingConfiguration&&(e.imageProcessingConfiguration.colorGradingWithGreenDepth=!1,e.imageProcessingConfiguration.colorGradingBGR=!1,e.imageProcessingConfiguration.exposure=1,e.imageProcessingConfiguration.toneMappingEnabled=!1,e.imageProcessingConfiguration.contrast=1)}},{key:"animateMeshToFinalParameters",value:function(e,t,n,r,i){var a=this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,s=arguments.length>6?arguments[6]:void 0;if(this._scene&&e){e.id;var u=function(){a._scene.stopAnimation(e);for(var t=0;t<e.animations.length;t++)e.animations.splice(t--,1)};u();var c,l=o,h=Math.floor(60*l),f=null;e.position!==t&&(f=new BABYLON.Animation("positionAnimation","position",60,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),c=[{frame:0,value:e.position},{frame:h,value:t}],f.setKeys(c));var d,p,g=null,v=null;null==e.rotationQuaternion?(d=null!=n?n.clone():r.toEulerAngles().clone(),e.rotation!=d&&(g=new BABYLON.Animation("eulerAnimation","rotation",60,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),c=[{frame:0,value:e.rotation},{frame:h,value:d}],g.setKeys(c))):(null!=r?p=r.clone():(p=BABYLON.Quaternion.Identity()).copyFrom(BABYLON.Quaternion.RotationYawPitchRoll(n.y,n.x,n.z)),v=new BABYLON.Animation("quaternionAnimation","rotationQuaternion",60,BABYLON.Animation.ANIMATIONTYPE_QUATERNION,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),c=[{frame:0,value:e.rotationQuaternion},{frame:h,value:p}],v.setKeys(c));var m=null;e.scaling!==i&&(m=new BABYLON.Animation("scalingAnimation","scaling",60,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),c=[{frame:0,value:e.scaling},{frame:h,value:i}],m.setKeys(c));var y=e.animations.length;f&&e.animations.push(f),g&&e.animations.push(g),v&&e.animations.push(v),m&&e.animations.push(m),e.animations.length>y&&(this._scene.beginAnimation(e,0,h,!1,1).onAnimationEnd=function(){u(),s&&s()})}}},{key:"getMaterialsUsingTexture",value:function(e){var t=this,n=this.getTextureMaterialsMap();return this._scene.materials.forEach((function(e){t.getTexturesForMaterial(e).forEach((function(t){n.hasOwnProperty(t.uid)||(n[t.uid]=[]),n[t.uid].push(e)}))})),n.hasOwnProperty(e.uid)?n[e.uid]:[]}},{key:"getTextureMaterialsMap",value:function(){var e=this,t={};return this._scene&&this._scene.materials.forEach((function(n){e.getTexturesForMaterial(n).forEach((function(e){t.hasOwnProperty(e.uid)||(t[e.uid]=[]),t[e.uid].push(n)}))})),t}},{key:"getTexturesForMaterial",value:function(e){return e.getActiveTextures()}},{key:"getTexturesExclusivelyForMaterial",value:function(e){for(var t=this.getTexturesForMaterial(e),n=this.getTextureMaterialsMap(),r=0;r<t.length;r++){var i=t[r];(n.hasOwnProperty(i.uid)?n[i.uid]:[]).length>1&&t.splice(r--,1)}return t}},{key:"getStandardMaterialTextures",value:function(e){return e.getActiveTextures()}},{key:"getPBRBaseSimpleMaterialTextures",value:function(e){return e.getActiveTextures()}},{key:"getPBRMaterialTextures",value:function(e){return e.getActiveTextures()}},{key:"getPBRMetallicRoughnessMaterialTextures",value:function(e){return e.getActiveTextures()}},{key:"getPBRSpecularGlossinessMaterialTextures",value:function(e){return e.getActiveTextures()}},{key:"getNewPBRMaterialTextures",value:function(e){return e.getActiveTextures()}},{key:"createMeshesFromSubMeshes",value:function(e){for(var t=e.getChildMeshes(),n=0;n<t.length;n++)this.createMeshesFromSubMeshes(t[n]);var r=[];if(e.subMeshes&&e.subMeshes.length>0)for(var i=0;i<e.subMeshes.length;i++){var a=this.createMeshFromSubMesh(e,i);a&&r.push(a)}var o=new BABYLON.VertexData;o.positions=[],o.indices=[],o.normals=[],o.uvs=[],o.uvs2=[],o.applyToMesh(e,!0),e.subMeshes=[],e.material=null,r.forEach((function(t){t.parent=e}))}},{key:"createMeshFromSubMesh",value:function(e,t,n){var r=e.subMeshes[t],i=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),a=e.getVerticesData(BABYLON.VertexBuffer.NormalKind),o=e.getIndices();if(i&&a&&o){var s=i.slice(3*r.verticesStart,3*(r.verticesStart+r.verticesCount)),u=a.slice(3*r.verticesStart,3*(r.verticesStart+r.verticesCount)),c=o.slice(r.indexStart,r.indexStart+r.indexCount),l=null;if(e.isVerticesDataPresent(BABYLON.VertexBuffer.UVKind)){var h=e.getVerticesData(BABYLON.VertexBuffer.UVKind);h&&(l=h.slice(2*r.verticesStart,2*(r.verticesStart+r.verticesCount)))}var f=null;if(e.isVerticesDataPresent(BABYLON.VertexBuffer.UV2Kind)){var d=e.getVerticesData(BABYLON.VertexBuffer.UV2Kind);d&&(f=d.slice(2*r.verticesStart,2*(r.verticesStart+r.verticesCount)))}for(var p=0;p<c.length;p++)c[p]-=r.verticesStart;var g=new BABYLON.Mesh(n||e.name+"_part_"+r._id,this._scene),v=new BABYLON.VertexData;v.positions=s,v.normals=u,v.indices=c,l&&(v.uvs=l),f&&(v.uvs2=f),v.applyToMesh(g),e.material&&(g.material=e.material instanceof BABYLON.MultiMaterial?e.material.subMaterials[r.materialIndex]:e.material)}return null}},{key:"getNextIncrementalName",value:function(e){var t=e;if(e)for(var n,r=0;this._scene.getMeshByName(t);){if(!n){n=e;var i=e.lastIndexOf("_");if(i>0){var a=e.substring(i+1);parseInt(a).toString()===a&&(n=e.substring(0,i))}}t=n+"_"+ ++r}return t}},{key:"createBox",value:function(e,t){var n=t||"Box";n=this.getNextIncrementalName(n);var r=BABYLON.Mesh.CreateBox(n,5,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}},{key:"createBoundingBox",value:function(e,t){var n=t||"BoundingBox";n=this.getNextIncrementalName(n);var r=e?e.getHierarchyBoundingVectors():this.getWorldExtends();if(!r)return this.createBox(e,t);var i=r.min,a=r.max,o=new BABYLON.BoundingInfo(i,a),s=a.subtract(i);if(!isFinite(s.length()))return this.createBox(e,t);var u=a.x-i.x,c=a.y-i.y,l=a.z-i.z,h=BABYLON.VertexData.CreateBox({width:u,height:c,depth:l}),f=new BABYLON.Mesh(n,this._scene);return h.applyToMesh(f),f.position.copyFrom(o.boundingBox.centerWorld),f.refreshBoundingInfo(),e&&e.parent&&(f.parent=e.parent),f}},{key:"createSphere",value:function(e,t){var n=t||"Sphere";n=this.getNextIncrementalName(n);var r=BABYLON.Mesh.CreateSphere(n,30,5,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}},{key:"createPlane",value:function(e,t){var n=t||"Plane";n=this.getNextIncrementalName(n);var r=BABYLON.Mesh.CreatePlane(n,10,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}},{key:"createDisc",value:function(e,t){var n=t||"Disc";n=this.getNextIncrementalName(n);var r=BABYLON.MeshBuilder.CreateDisc(n,{tessellation:70},this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}},{key:"createCylinder",value:function(e,t){var n=t||"Cylinder";n=this.getNextIncrementalName(n);var r=BABYLON.Mesh.CreateCylinder(n,6,6,6,30,1,this._scene,!1);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}},{key:"createTorus",value:function(e,t){var n=t||"Torus";n=this.getNextIncrementalName(n);var r=BABYLON.Mesh.CreateTorus(n,8,1,50,this._scene,!1);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}},{key:"createKnot",value:function(e,t){var n=t||"Knot";n=this.getNextIncrementalName(n);var r=BABYLON.Mesh.CreateTorusKnot(n,2,.5,128,64,2,3,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}},{key:"createRibbon",value:function(e,t){var n=t||"Ribbon";n=this.getNextIncrementalName(n);for(var r=function(e){for(var t=[],n=-10;n<10;n++)t.push(new BABYLON.Vector3(e,n,5*Math.sin(e/3)*Math.exp(-(n-e)*(n-e)/60)+n/3));return t},i=[],a=0;a<20;a++)i[a]=r(a);var o=BABYLON.Mesh.CreateRibbon("ribbon",i,!1,!1,0,this._scene);return o.id=Zakeke.generateUUID(),e&&(o.parent=e),o}},{key:"createRoundedCubeAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.RoundedCubeName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.RoundedCubeFileName,u=n||"Rounded Cube",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createRoundedCylinderAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.RoundedCylinderName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.RoundedCylinderFileName,u=n||"Rounded Cylinder",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createMatBallAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.MatBallName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.MatBallFileName,u=n||"Mat Ball",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createMaleHeadAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.MaleHeadName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.MaleHeadFileName,u=n||"Male Head",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createFemaleHeadAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.FemaleHeadName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.FemaleHeadFileName,u=n||"Female Head",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createPokemonBallAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.PokemonBallName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.PokemonBallFileName,u=n||"Pokemon Ball",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createShaderBallAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.ShaderBallName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.ShaderBallFileName,u=n||"Shader Ball",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createBootsAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.BootsName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.BootsFolder,u=o.DefaultAssetUrls.Shapes.BootsFileName,c=n||"Boots",c=this.getNextIncrementalName(c),e.next=8,this.importPrimitiveShapeAsync(i,a+s,u,t,c,r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createSuzanneAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.SuzanneName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.SuzanneFileName,u=n||"Suzanne",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createStepPyramidAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.StepPyramidName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.StepPyramidFileName,u=n||"Step Pyramid",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createTeapotAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.TeapotName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.TeapotFileName,u=n||"Teapot",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createAlloyWheelAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Shapes.AlloyWheelName,a=o.DefaultAssetUrls.Shapes.RootUrl,s=o.DefaultAssetUrls.Shapes.AlloyWheelFolder,u=o.DefaultAssetUrls.Shapes.AlloyWheelFileName,c=n||"Wheel",c=this.getNextIncrementalName(c),e.next=8,this.importPrimitiveShapeAsync(i,a+s,u,t,c,r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createTryonReferenceGlassesFrameAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.DefaultAssetUrls.Tryon.ReferenceGlassesFrameName,a=o.DefaultAssetUrls.Tryon.RootUrl,s=o.DefaultAssetUrls.Tryon.ReferenceGlassesFrameFileName,u=n||"Reference Glasses Frame",u=this.getNextIncrementalName(u),e.next=7,this.importPrimitiveShapeAsync(i,a,s,t,u,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"importPrimitiveShapeAsync",value:function(){var e=g(d().mark((function e(t,n,r,i,a,o){var s,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.next=3,BABYLON.SceneLoader.ImportMeshAsync(t,n,r,this._scene,o);case 3:if((u=e.sent)&&u.meshes)for(s=u.meshes,c=0;c<s.length;c++)(l=s[c]).parent||(l.name=a),l.id=Zakeke.generateUUID(),i&&(l.parent=i);return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()},{key:"replaceTransformNodeWithMesh",value:function(e){var t=null;if(this._scene){var n=e.parent,r=e.getChildren();(t=new BABYLON.Mesh(e.name,this._scene,n)).id=Zakeke.generateUUID(),t.scaling=e.scaling.clone(),t.position=e.position.clone(),t.rotation=e.rotation.clone(),e.rotationQuaternion&&(t.rotationQuaternion=e.rotationQuaternion.clone()),r.forEach((function(e){return e.parent=t})),e.dispose()}return t}},{key:"importMeshesFromUrlAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,g,v=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,BABYLON.GLTFFileLoader.IncrementalLoading=!1,BABYLON.SceneLoader.OnPluginActivatedObservable.add((function(e){i=e.name})),a=[],e.next=6,BABYLON.SceneLoader.ImportMeshAsync("",t,void 0,this._scene,r);case 6:return(o=e.sent)&&(o.meshes.forEach((function(e){e.id=Zakeke.generateUUID(),a.push(e),v.getMeshMaterials(e).forEach((function(e){return e.id=Zakeke.generateUUID()}))})),o.transformNodes.forEach((function(e){e.id=Zakeke.generateUUID();var t=v.replaceTransformNodeWithMesh(e);t&&a.push(t)})),o.geometries.forEach((function(e){return e.id=Zakeke.generateUUID()}))),s=BABYLON.Tools.GetFilename(t),u=s,-1!==(c=s.lastIndexOf("."))&&(u=s.substr(0,c)),(l=a.filter((function(e){return!e.parent}))).length>1||1===l.length&&"__root__"!==l[0].name?((h=new BABYLON.Mesh(u,this._scene)).id=Zakeke.generateUUID(),h.metadata={isRealMesh:!0,isGroup:!0},l.forEach((function(e){return e.parent=h}))):1===l.length&&"__root__"===(f=l[0]).name&&(p=BABYLON.Tools.GetFilename(t),-1!==(g=s.lastIndexOf("."))&&(p=s.substring(0,g)),f.name=p),this.adjustCamera(i,!1,!1),this.setupShaderMaterialsCameraPosition(),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setupShaderMaterialsCameraPosition",value:function(){if(this._scene)for(var e=0;e<this._scene.materials.length;e++){var t=this._scene.materials[e];this.setupShaderMaterialCameraPosition(t)}}},{key:"setupShaderMaterialCameraPosition",value:function(e){if(this._scene&&e&&e instanceof BABYLON.ShaderMaterial){var t=this._scene.activeCamera;t&&e.setVector3("cameraPosition",t.position)}}},{key:"getSceneCmScalingFactor",value:function(){var e=null;if(this._scene){for(var t=null,n=0;n<this._scene.meshes.length;n++){var r=this._scene.meshes[n];if(r.metadata&&r.metadata.sizecm){t=r;break}}if(t){var i=t.getHierarchyBoundingVectors(),a=i.min,o=i.max,s=o.subtract(a);if(isFinite(s.length())){var u=o.x-a.x,c=o.y-a.y,l=o.z-a.z,h=t.metadata.sizecm;return void 0===h.width||"number"!==typeof h.width||isNaN(h.width)||0===u?void 0===h.height||"number"!==typeof h.height||isNaN(h.height)||0===c?void 0===h.depth||"number"!==typeof h.depth||isNaN(h.depth)||0===l||(e=h.depth/l):e=h.height/c:e=h.width/u,e}}}return e}},{key:"exportSceneToUsdzAsync",value:function(){var e=g(d().mark((function e(t,n,r,i){var a,o,s,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(u.length>4&&void 0!==u[4])||u[4],o=this.getMeshesForAR(),s=(s=t||"scene").replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=6,this.exportMeshesToARAsync(s,n,o,r,i,"usdz",a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"exportMeshToUsdzAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>2&&void 0!==o[2])||o[2],i=this.getMeshHierarchy(n.id),a=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=5,this.exportMeshesToARAsync(a,t,i,void 0,void 0,"usdz",r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportSceneToRemoteGlTFAsync",value:function(){var e=g(d().mark((function e(t,n,r,i){var a,o,s,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(u.length>4&&void 0!==u[4])||u[4],o=this.getMeshesForAR(),s=(s=t||"scene").replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=6,this.exportMeshesToARAsync(s,n,o,r,i,"glTF",a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"exportMeshToRemoteGlTFAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>2&&void 0!==o[2])||o[2],i=this.getMeshHierarchy(n.id),a=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=5,this.exportMeshesToARAsync(a,t,i,void 0,void 0,"glTF",r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportSceneToRemoteGLBAsync",value:function(){var e=g(d().mark((function e(t,n,r,i){var a,o,s,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(u.length>4&&void 0!==u[4])||u[4],o=this.getMeshesForAR(),s=(s=t||"scene").replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=6,this.exportMeshesToARAsync(s,n,o,r,i,"glb",a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"exportMeshToRemoteGLBAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>2&&void 0!==o[2])||o[2],i=this.getMeshHierarchy(n.id),a=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=5,this.exportMeshesToARAsync(a,t,i,void 0,void 0,"glb",r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportSceneToARMultiformatAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a,o,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:["usdz","glb","png"],i=!(s.length>3&&void 0!==s[3])||s[3],a=this.getMeshesForAR(),o=(o=t||"scene").replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=7,this.exportMeshesToARMultiformatAsync(o,n,a,r,i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportMeshToARMultiformatAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a,o,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:["usdz","glb","png"],i=!(s.length>3&&void 0!==s[3])||s[3],a=this.getMeshHierarchy(n.id),o=n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),e.next=6,this.exportMeshesToARMultiformatAsync(o,t,a,r,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getGltfBlobForARExport",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,o,u,c,l,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={meshes:r,materials:this.getMeshesMaterials(r),transformNodes:void 0,lights:void 0,exportTextureUrls:null!==n&&void 0!==n,rootUrl:n,shouldExportNode:function(e){for(var t=0;t<r.length;t++)if(r[t]===e)return!0;return!1}},e.next=3,BABYLON.GLTF2Export.GLTFAsync(this._scene,t,i);case 3:if(!(a=e.sent)){e.next=16;break}for(c in o=new JSZip,u=a.serverImages&&a.glTFFiles.hasOwnProperty("TextureUrls.txt")?a.serverImages:[],a.glTFFiles)-1===u.indexOf(c)&&(l=a.glTFFiles[c],s.StringTools.EndsWith(c,".gltf")||s.StringTools.EndsWith(c,".bin")?o.file(c,l,{compression:"DEFLATE",compressionOptions:{level:9}}):o.file(c,l,{compression:"STORE"}));return e.next=10,o.generateAsync({type:"blob"});case 10:if(!(h=e.sent)){e.next=16;break}return h.lastModifiedDate=new Date,h.name="arobj.zip",e.abrupt("return",h);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"exportMeshesToARAsync",value:function(){var e=g(d().mark((function e(t,n,r,i,o){var s,u,c,l,h,f,p,g,v,m=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=m.length>5&&void 0!==m[5]?m[5]:"usdz",u="",!(i&&o&&Zakeke.config)){e.next=14;break}return c=Zakeke.config.baseApiUrl+"artasks/cachedresults/"+i+"/"+o+"/"+s,e.prev=5,e.next=8,jQuery.ajax({url:c,data:null,cache:!1,contentType:!1,processData:!1,type:"GET"});case 8:u=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),u="";case 14:if(u){e.next=31;break}return l=this.getSceneCmScalingFactor(),e.next=18,this.getGltfBlobForARExport(t,n,r);case 18:if(!(h=e.sent)){e.next=31;break}return f={flipTextures:!0,formats:[s]},i&&(f.sceneID=i),o&&(f.sceneCode=o),l&&(f.scale=l),p=!0,void 0!=window.isOwin&&(p=window.isOwin),g=new a.Task("artasks",window.token,p),e.next=29,g.upload(h,f);case 29:(v=e.sent)&&v.length>0&&(u=v[0].arFileUrl);case 31:return e.abrupt("return",u);case 32:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()},{key:"exportMeshesToARMultiformatAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,o,s,u,c,l,h,f,p,g,v=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.length>3&&void 0!==v[3]?v[3]:["usdz","glb","png"],o=[],s=this.getSceneCmScalingFactor(),e.next=6,this.getGltfBlobForARExport(t,n,r);case 6:if(!(u=e.sent)){e.next=17;break}return c={flipTextures:!0,formats:i},s&&(c.scale=s),l=!0,void 0!==window.isOwin&&(l=window.isOwin),h=new a.Task("artasks",window.token,l),e.next=15,h.upload(u,c);case 15:if((f=e.sent)&&f.length>0)for(p=0;p<f.length;p++)g=f[p],o.push(g);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalGlTFBlobsAsync",value:function(){var e=g(d().mark((function e(){var t,n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Zakeke.generateUUID(),n=this.getSceneToGltfExportOptions(),e.next=4,BABYLON.GLTF2Export.GLTFAsync(this._scene,t,n);case 4:for(a in r=e.sent,i=[],r.glTFFiles)i.push(r.glTFFiles[a]);return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalGlTFUrlsAsync",value:function(){var e=g(d().mark((function e(){var t,n,r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=Zakeke.generateUUID(),r=this.getSceneToGltfExportOptions(),e.next=5,BABYLON.GLTF2Export.GLTFAsync(this._scene,n,r);case 5:if(i=e.sent)for(a in i.glTFFiles)o=i.glTFFiles[a],t.push(this.getGltfFileUrl(a,o));return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadSceneLocalGltfAsync",value:function(){var e=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Zakeke.generateUUID(),n=this.getSceneToGltfExportOptions(),e.next=4,BABYLON.GLTF2Export.GLTFAsync(this._scene,t,n);case 4:(r=e.sent)&&r.downloadFiles();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalGLBBlobAsync",value:function(){var e=g(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSceneLocalGLBBlobInfoAsync();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t.blob);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalGLBBase64Async",value:function(){var e=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,this.getSceneLocalGLBBlobInfoAsync();case 3:return(n=e.sent)&&n.blob instanceof Blob&&((r=new FileReader).readAsDataURL(n.blob),r.onloadend=function(){var e=r.result;"string"===typeof e&&(t=e)}),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalGLBUrlAsync",value:function(){var e=g(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,this.getSceneLocalGLBBlobInfoAsync();case 3:return(n=e.sent)&&n.name&&n.blob instanceof Blob&&(t=this.getGltfFileUrl(n.name,n.blob)),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadSceneLocalGLBAsync",value:function(){var e=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSceneLocalGLBBlobInfoAsync();case 2:(t=e.sent)&&t.name&&t.blob instanceof Blob&&(n=this.getGltfFileUrl(t.name,t.blob),r=document.createElement("a"),document.body.appendChild(r),r.setAttribute("type","hidden"),r.download=t.name,r.href=n,r.click(),document.body.removeChild(r),URL.revokeObjectURL(n));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSceneLocalGLBBlobInfoAsync",value:function(){var e=g(d().mark((function e(){var t,n,i,a,o,u,c=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:null,blob:null},n=Zakeke.generateUUID(),i=this.getSceneToGltfExportOptions(),e.next=5,BABYLON.GLTF2Export.GLBAsync(this._scene,n,i);case 5:if(!(a=e.sent)||!a.glTFFiles){e.next=17;break}o=d().mark((function e(){var n,i,o,l,h,f,p,g,v,m,y;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.StringTools.EndsWith(u,".glb")){e.next=19;break}return n=c.getSceneCmScalingFactor(),i=1,n&&(i=n/100),o=BABYLON.Quaternion.RotationAxis(BABYLON.Axis.Y,2*Math.PI),l=new r.WebIO,e.next=8,a.glTFFiles[u].arrayBuffer();case 8:return h=e.sent,f=l.readBinary(h),p=f.getRoot().listNodes().filter((function(e){return null===e.getParent()||e.getParent()instanceof r.Scene})),g=[0,1,0,0],v=p.every((function(e){var t=e.getRotation();return g.length===t.length&&g.every((function(e,n){return e===t[n]}))})),p.forEach((function(e){e.setScale([i,i,i]),v&&e.setRotation([o.x,o.y,o.z,o.w])})),m=l.writeBinary(f),y=new Blob([m],{type:"model/gltf-binary"}),t.name=u,t.blob=y,e.abrupt("return","break");case 19:case"end":return e.stop()}}),e)})),e.t0=d().keys(a.glTFFiles);case 9:if((e.t1=e.t0()).done){e.next=17;break}return u=e.t1.value,e.delegateYield(o(),"t2",12);case 12:if("break"!==e.t2){e.next=15;break}return e.abrupt("break",17);case 15:e.next=9;break;case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalUSDZBlobAsync",value:function(){var e=g(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSceneLocalUSDZBlobInfoAsync();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t.blob);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalUSDZBase64Async",value:function(){var e=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,this.getSceneLocalUSDZBlobInfoAsync();case 3:return(n=e.sent)&&n.blob instanceof Blob&&((r=new FileReader).readAsDataURL(n.blob),r.onloadend=function(){var e=r.result;"string"===typeof e&&(t=e)}),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalUSDZUrlAsync",value:function(){var e=g(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,this.getSceneLocalUSDZBlobInfoAsync();case 3:return(n=e.sent)&&n.name&&n.blob instanceof Blob&&(t=this.getUsdzFileUrl(n.name,n.blob)),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadSceneLocalUSDZAsync",value:function(){var e=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSceneLocalUSDZBlobInfoAsync();case 2:(t=e.sent)&&t.name&&t.blob instanceof Blob&&(n=this.getUsdzFileUrl(t.name,t.blob),r=document.createElement("a"),document.body.appendChild(r),r.setAttribute("type","hidden"),r.download=t.name,r.href=n,r.click(),document.body.removeChild(r),URL.revokeObjectURL(n));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSceneLocalUSDZBlobInfoAsync",value:function(){var e=g(d().mark((function e(){var t,n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:null,blob:null},e.next=3,this.getSceneLocalGLBBlobInfoAsync();case 3:if(!((n=e.sent)&&n.name&&n.blob&&n.blob instanceof Blob)){e.next=11;break}return r=this.getGltfFileUrl(n.name,n.blob),e.next=8,c.UsdzHelper.convertGlbToUsdz(r);case 8:i=e.sent,t.name=n.name.replace(".glb",".usdz"),t.blob=i;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSceneToGltfExportOptions",value:function(){var e=this.getMeshesForAR();return{meshes:e,materials:this.getMeshesMaterials(e),transformNodes:void 0,lights:void 0,exportTextureUrls:!1,rootUrl:null,shouldExportNode:function(t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}}}},{key:"getGltfFileUrl",value:function(e,t){var n=void 0;return s.StringTools.EndsWith(e,".glb")?n={type:"model/gltf-binary"}:s.StringTools.EndsWith(e,".bin")?n={type:"application/octet-stream"}:s.StringTools.EndsWith(e,".gltf")?n={type:"model/gltf+json"}:s.StringTools.EndsWith(e,".jpeg")?n={type:"image/jpeg"}:s.StringTools.EndsWith(e,".png")&&(n={type:"image/png"}),window.URL.createObjectURL(new Blob([t],n))}},{key:"getUsdzFileUrl",value:function(e,t){return window.URL.createObjectURL(new Blob([t],{type:"model/vnd.usdz+zip"}))}},{key:"exportSceneToBabylon",value:function(){var e=BABYLON.SceneSerializer.Serialize(this._scene);return JSON.stringify(e)}},{key:"exportVisibleMeshesToBabylon",value:function(){var e=this.getVisibleMeshes(),t=BABYLON.SceneSerializer.SerializeMesh(e,!1,!1);return JSON.stringify(t)}},{key:"downloadImageFromBase64",value:function(e,t,n){var r=document.createElement("a");r.href=e,r.download=t,r.click(),r.remove()}},{key:"getStandardMaterialTextureType",value:function(e,t){return e.diffuseTexture===t?"diffuse":e.emissiveTexture===t?"emissive":e.ambientTexture===t?"ambient":e.lightmapTexture===t?"lightmap":e.opacityTexture===t?"opacity":e.specularTexture===t?"specular":e.reflectionTexture===t?"reflection":e.refractionTexture===t?"refraction":e.bumpTexture===t?"bump":null}},{key:"getPBRMetallicRoughnessMaterialTextureType",value:function(e,t){return e.environmentTexture===t?"environment":e.normalTexture===t?"normal":e.emissiveTexture===t?"emissive":e.occlusionTexture===t?"occlusion":e.baseTexture===t?"base":e.metallicRoughnessTexture===t?"metallicRoughness":null}},{key:"getPBRSpecularGlossinessMaterialTextureType",value:function(e,t){return e.environmentTexture===t?"environment":e.normalTexture===t?"normal":e.emissiveTexture===t?"emissive":e.occlusionTexture===t?"occlusion":e.diffuseTexture===t?"diffuse":e.specularGlossinessTexture===t?"specularGlossiness":null}},{key:"getPBRMaterialTextureType",value:function(e,t){if(e.cameraColorGradingTexture===t)return"cameraColorGrading";if(e.albedoTexture===t)return"albedo";if(e.ambientTexture===t)return"ambient";if(e.opacityTexture===t)return"opacity";if(e.reflectionTexture===t)return"reflection";if(e.emissiveTexture===t)return"emissive";if(e.reflectivityTexture===t)return"reflectivity";if(e.metallicTexture===t)return"metallic";if(e.microSurfaceTexture===t)return"microSurface";if(e.bumpTexture===t)return"bump";if(e.lightmapTexture===t)return"lightmap";if(e.refractionTexture===t)return"refraction";if(e.clearCoat){if(e.clearCoat.texture===t)return"clearCoat";if(e.clearCoat.bumpTexture===t)return"clearCoat_bump";if(e.clearCoat.tintTexture===t)return"clearCoat_tint";if(e.clearCoat.textureRoughness===t)return"clearCoat_textureRoughness";if(e.clearCoat.texture===t)return"clearCoat_texture"}if(e.anisotropy&&e.anisotropy.texture===t)return"anisotropy_texture";if(e.sheen){if(e.sheen.texture===t)return"sheen_texture";if(e.sheen.textureRoughness===t)return"sheen_textureRoughness"}if(e.subSurface){if(e.subSurface.thicknessTexture===t)return"subSurface_thickness";if(e.subSurface.refractionIntensityTexture===t)return"subSurface_refractionIntensity";if(e.subSurface.translucencyIntensityTexture===t)return"subSurface_translucencyIntensity"}return null}},{key:"getZakekePBRMaterialTextureType",value:function(e,t){return e.albedoTexture===t?"albedo":e.bumpTexture===t?"bump":e.reflectionTexture===t?"reflection":e.matCapReflectionTexture===t?"matCapReflection":e.reflectivityTexture===t?"reflectivity":e.microsurfaceTexture===t?"microsurface":e.ambientTexture===t?"ambient":e.aoTexture===t?"ao":e.opacityTexture===t?"opacity":null}},{key:"getMaterialTextureType",value:function(e,t){return e instanceof BABYLON.StandardMaterial?this.getStandardMaterialTextureType(e,t):e instanceof BABYLON.PBRMetallicRoughnessMaterial?this.getPBRMetallicRoughnessMaterialTextureType(e,t):e instanceof BABYLON.PBRSpecularGlossinessMaterial?this.getPBRSpecularGlossinessMaterialTextureType(e,t):e instanceof BABYLON.PBRMaterial?this.getPBRMaterialTextureType(e,t):e instanceof Zakeke.PBRMaterial?this.getZakekePBRMaterialTextureType(e,t):null}},{key:"getMaterialTexture",value:function(e,t){if(e instanceof BABYLON.StandardMaterial)switch(t){case"diffuse":return e.diffuseTexture;case"emissive":return e.emissiveTexture;case"ambient":return e.ambientTexture;case"lightmap":return e.lightmapTexture;case"opacity":return e.opacityTexture;case"specular":return e.specularTexture;case"reflection":return e.reflectionTexture;case"refraction":return e.refractionTexture;case"bump":return e.bumpTexture}else if(e instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(t){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":return e["".concat(t,"Texture")]}else if(e instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(t){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":return e["".concat(t,"Texture")]}else if(e instanceof BABYLON.PBRMaterial)switch(t){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":return e["".concat(t,"Texture")];case"refraction":return e.refractionTexture;case"environmentBRDF":return e.environmentBRDFTexture;case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture}else if(e instanceof Zakeke.PBRMaterial)switch(t){case"albedo":return e.albedoTexture;case"bump":return e.bumpTexture;case"reflection":return e.reflectionTexture;case"matCapReflection":return e.matCapReflectionTexture;case"reflectivity":return e.reflectivityTexture;case"microsurface":return e.microsurfaceTexture;case"ambient":return e.ambientTexture;case"ao":return e.aoTexture;case"opacity":return e.opacityTexture}return null}},{key:"applyTexture",value:function(e,t,n){if(e&&"lightmap"==n&&(e.coordinatesIndex=1,(t instanceof BABYLON.StandardMaterial||t instanceof BABYLON.PBRMaterial||t instanceof BABYLON.PBRBaseSimpleMaterial)&&(t.useLightmapAsShadowmap=!0)),t instanceof BABYLON.StandardMaterial)switch(n){case"diffuse":t.diffuseTexture=e;break;case"emissive":t.emissiveTexture=e;break;case"ambient":t.ambientTexture=e;break;case"lightmap":t.lightmapTexture=e;break;case"opacity":t.opacityTexture=e;break;case"specular":t.specularTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"refraction":t.refractionTexture=e;break;case"bump":t.bumpTexture=e}else if(t instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRMaterial)switch(n){case"cameraColorGrading":t.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":t["".concat(n,"Texture")]=e;break;case"refraction":t.refractionTexture=e;break;case"environmentBRDF":t.environmentBRDFTexture=e;break;case"clearCoat_texture":t.clearCoat.texture=e;break;case"clearCoat_bump":t.clearCoat.bumpTexture=e;break;case"clearCoat_tint":t.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":t.clearCoat.textureRoughness=e;break;case"anisotropy_texture":t.anisotropy.texture=e;break;case"sheen_texture":t.sheen.texture=e;break;case"sheen_textureRoughness":t.sheen.textureRoughness=e;break;case"subSurface_thickness":t.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":t.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":t.subSurface.refractionIntensityTexture=e}else if(t instanceof BABYLON.ShaderMaterial)e&&e instanceof BABYLON.Texture?t.setTexture(n,e):t.removeTexture(n);else if(t instanceof Zakeke.PBRMaterial)switch(n){case"albedo":t.albedoTexture=e;break;case"bump":t.bumpTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"matCapReflection":t.matCapReflectionTexture=e;break;case"reflectivity":t.reflectivityTexture=e;break;case"microsurface":t.microsurfaceTexture=e;break;case"ambient":t.ambientTexture=e;break;case"ao":t.aoTexture=e;break;case"opacity":t.opacityTexture=e}}},{key:"applyTextureOnSerializedMaterial",value:function(e,t,n,r){if(e&&"lightmap"==n&&(e.coordinatesIndex=1,"BABYLON.StandardMaterial"!==r&&"BABYLON.PBRMaterial"!==r&&"BABYLON.PBRBaseSimpleMaterial"!==r||(t.useLightmapAsShadowmap=!0)),"BABYLON.StandardMaterial"===r)t["".concat(n,"Texture")]=e;else if("BABYLON.PBRMetallicRoughnessMaterial"===r)t["".concat(n,"Texture")]=e;else if("BABYLON.PBRSpecularGlossinessMaterial"===r)t["".concat(n,"Texture")]=e;else if("BABYLON.PBRMaterial"===r)switch(n){case"cameraColorGrading":t.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":case"refraction":t["".concat(n,"Texture")]=e;break;case"environmentBRDF":t.environmentBRDFTexture=e;break;case"clearCoat_texture":t.clearCoat.texture=e;break;case"clearCoat_bump":t.clearCoat.bumpTexture=e;break;case"clearCoat_tint":t.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":t.clearCoat.textureRoughness=e;break;case"anisotropy_texture":t.anisotropy.texture=e;break;case"sheen_texture":t.sheen.texture=e;break;case"sheen_textureRoughness":t.sheen.textureRoughness=e;break;case"subSurface_thickness":t.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":t.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":t.subSurface.refractionIntensityTexture=e}else"Zakeke.PBRMaterial"===r&&(t["".concat(n,"Texture")]=e)}},{key:"getSerializedMaterialTexture",value:function(e,t,n){if("BABYLON.StandardMaterial"===n)return e["".concat(t,"Texture")];if("BABYLON.PBRMetallicRoughnessMaterial"===n)return e["".concat(t,"Texture")];if("BABYLON.PBRSpecularGlossinessMaterial"===n)return e["".concat(t,"Texture")];if("BABYLON.PBRMaterial"===n)switch(t){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":case"refraction":return e["".concat(t,"Texture")];case"environmentBRDF":return e.environmentBRDFTexture;case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture}else if("Zakeke.PBRMaterial"===n)return e["".concat(t,"Texture")];return null}},{key:"getMaterialTypeName",value:function(e){return e instanceof BABYLON.StandardMaterial?"BABYLON.StandardMaterial":e instanceof BABYLON.PBRMetallicRoughnessMaterial?"BABYLON.PBRMetallicRoughnessMaterial":e instanceof BABYLON.PBRSpecularGlossinessMaterial?"BABYLON.PBRSpecularGlossinessMaterial":e instanceof BABYLON.PBRMaterial?"BABYLON.PBRMaterial":e instanceof BABYLON.ShaderMaterial?"BABYLON.ShaderMaterial":e instanceof Zakeke.PBRMaterial?"Zakeke.PBRMaterial":"BABYLON.StandardMaterial"}},{key:"exportMeshToBabylon",value:function(){var e=g(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getMeshHierarchy(t.id),e.next=3,this.exportMeshesToBabylon(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportMeshesToBabylon",value:function(){var t=g(d().mark((function t(n){var r,i,a,o,s,u,c,l,h,p,g,v,m,y,_,b,x,w,k=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.getMeshesMaterials(n),i=n.map((function(e){return{id:e.id,doNotSerialize:e.doNotSerialize}})),a=r.map((function(e){return{id:e.id,doNotSerialize:e.doNotSerialize}})),n.forEach((function(e){return e.doNotSerialize=!1})),r.forEach((function(e){return e.doNotSerialize=!1})),t.prev=5,o={},s=0;case 8:if(!(s<r.length)){t.next=29;break}if(u=r[s],c=u.id,!((l=this.getMaterialDynamicTextures(u)).length>0)){t.next=26;break}o[c]={materialType:this.getMaterialTypeName(u),textures:[]},h=0;case 15:if(!(h<l.length)){t.next=26;break}return p=l[h],g=Zakeke.generateUUID(),v=this.getMaterialTextureType(u,p),t.next=21,this.exportTextureToBase64Async(p,"image/png");case 21:m=t.sent,v&&m&&(y={id:g,type:v,base64String:m,isProcedural:p instanceof BABYLON.ProceduralTexture},o[c].textures.push(y));case 23:h++,t.next=15;break;case 26:s++,t.next=8;break;case 29:_=BABYLON.SceneSerializer.SerializeMesh(n,!1,!1),b=d().mark((function t(){var n,r,i,a,s,u,c,l,h,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_.materials[_i5],Object.getOwnPropertyNames(n).filter((function(e){return"Texture"===e.slice(-7)&&"object"===f(n[e])})),r=n.id,!o.hasOwnProperty(r)){t.next=39;break}i=o[r],a=i.materialType,s=i.textures,u=0;case 8:if(!(u<s.length)){t.next=39;break}if(c=s[u],!(l=k.getSerializedMaterialTexture(n,c.type,i.materialType))){t.next=34;break}if(!c.isProcedural){t.next=32;break}return h=new BABYLON.Texture(c.base64String,k._scene,void 0,void 0,void 0,void 0),t.next=16,e.whenTextureIsReadyAsync(h);case 16:h.uScale=l.uScale,h.vScale=l.vScale,h.uOffset=l.uOffset,h.vOffset=l.vOffset,h.uAng=l.uAng,h.vAng=l.vAng,h.level=l.level,h.coordinatesIndex=l.coordinatesIndex,h.coordinatesMode=l.coordinatesMode,h.wrapU=l.wrapU,h.wrapV=l.wrapV,(p=h.serialize()).url=c.base64String,p.name="prcedural texture",k.applyTextureOnSerializedMaterial(p,n,c.type,a),h.dispose();case 32:t.next=36;break;case 34:l.url=c.base64String,l.name="dynamic texture";case 36:u++,t.next=8;break;case 39:case"end":return t.stop()}}),t)})),x=0;case 32:if(!(x<_.materials.length)){t.next=37;break}return t.delegateYield(b(),"t0",34);case 34:x++,t.next=32;break;case 37:return w=JSON.stringify(_),n.forEach((function(e){var t;return e.doNotSerialize=null===(t=i.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.doNotSerialize})),r.forEach((function(e){return e.doNotSerialize=a.find((function(t){return t.id===e.id})).doNotSerialize})),t.abrupt("return",w);case 41:return t.prev=41,n.forEach((function(e){var t;return e.doNotSerialize=null===(t=i.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.doNotSerialize})),r.forEach((function(e){return e.doNotSerialize=a.find((function(t){return t.id===e.id})).doNotSerialize})),t.finish(41);case 45:case"end":return t.stop()}}),t,this,[[5,,41,45]])})));return function(e){return t.apply(this,arguments)}}()},{key:"exportMeshesForTyOnToBabylon",value:function(){var e=g(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getMeshesForTryOn(),e.next=3,this.exportMeshesToBabylon(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadBlob",value:function(e){var t=URL.createObjectURL(e),n=document.createElement("a");n.download="mesh.json",n.href=t,n.click(),URL.revokeObjectURL(t)}},{key:"downloadMeshBabylonAsync",value:function(){var e=g(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportMeshToBabylon(t);case 2:(n=e.sent)&&(r=new Blob([n],{type:"application/json"}),this.downloadBlob(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadMeshesBabylonAsync",value:function(){var e=g(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportMeshesToBabylon(t);case 2:(n=e.sent)&&(r=new Blob([n],{type:"application/json"}),this.downloadBlob(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAllDelayedMaterialsAsync",value:function(){var e=g(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials)){e.next=7;break}for(i in r={},this._scene.metadata.delayedMaterials)r[i]={name:this._scene.metadata.delayedMaterials[i].name,file:this._scene.metadata.delayedMaterials[i].file};return e.next=6,this.loadMaterialsAsync(t,r);case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadDelayedMaterialsAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials)){e.next=7;break}for(i={},a=0;a<n.length;a++)this._scene.metadata.delayedMaterials.hasOwnProperty(n[a])&&(i[n[a]]={name:this._scene.metadata.delayedMaterials[n[a]].name,file:this._scene.metadata.delayedMaterials[n[a]].file});return e.next=6,this.loadMaterialsAsync(t,i);case 6:r=e.sent;case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadDelayedMaterialAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials)){e.next=9;break}if(r={},!this._scene.metadata.delayedMaterials.hasOwnProperty(n)){e.next=9;break}return r[n]={name:this._scene.metadata.delayedMaterials[n].name,file:this._scene.metadata.delayedMaterials[n].file},e.next=6,this.loadMaterialsAsync(t,r);case 6:if(!((i=e.sent).length>0)){e.next=9;break}return e.abrupt("return",i[0]);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadMaterialsAsync",value:function(){var t=g(d().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in i=[],a=[],r)(s=this._scene.getMaterialByID(o))?i.push(s):(u=r[o],a.push(this.loadMaterialInternalAsync(o,n,u.file)));return t.next=5,Promise.all(a);case 5:c=t.sent,l=0;case 7:if(!(l<c.length)){t.next=20;break}if(h=c[l],f=JSON.parse(h),!(p=BABYLON.Material.Parse(f,this._scene,n))){t.next=17;break}return Logger.info("Waiting for material ready: "+p.id+" - "+p.name),t.next=15,e.whenAllMaterialTexturesAreReady(p);case 15:Logger.info("Material ready: "+p.id+" - "+p.name),i.push(p);case 17:l++,t.next=7;break;case 20:return this.setupShaderMaterialsCameraPosition(),t.abrupt("return",i);case 22:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadMaterialInternalAsync",value:function(e,t,n){var r=this;if(Logger.info("Loading delayed material: "+e),this._loadingMaterials.hasOwnProperty(e))return this._loadingMaterials[e];var i=t+(s.StringTools.EndsWith(t,"/")?"":"/")+n,a=new Promise((function(t,n){BABYLON.Tools.LoadFile(i,(function(n){Logger.info("Loaded delayed material: "+e),t(n),delete r._loadingMaterials[e]}),void 0,void 0,!1,(function(t,i){n(i),delete r._loadingMaterials[e]}))}));return this._loadingMaterials[e]=a,a}},{key:"showMesh",value:function(e){this.showHideMesh(e,!0)}},{key:"hideMesh",value:function(e){this.showHideMesh(e,!1)}},{key:"showHideMesh",value:function(e,t){var n=this._scene.getMeshByID(e);n&&function e(t,n){t.isVisible=n;var r=t.getChildMeshes();r&&r.forEach((function(t){e(t,n)}))}(n,t)}},{key:"changeMaterialColor",value:function(e,t,n){for(var r=0;r<this._scene.meshes.length;r++){var i=this._scene.meshes[r];if(i.material===e)break}e[t]=n}},{key:"applyMaterialByName",value:function(e,t){if(this._scene){var n=this._scene.getMaterialByName(e);n&&this.applyMaterial(n,t)}}},{key:"applyMaterial",value:function(e,t){var n=this;t&&function t(r){if(r.subMeshes&&r.subMeshes.length>0&&r.material&&r.material instanceof BABYLON.MultiMaterial)for(var i=0;i<r.subMeshes.length;i++){var a=r.subMeshes[i];n.applyMaterialToSubMesh(e,r,a)}else r.material=e;var o=r.getChildMeshes();o&&o.forEach((function(e){t(e)}))}(t)}},{key:"applyMaterialToSubMeshByName",value:function(e,t,n){var r=this._scene.getMaterialByName(e);r&&this.applyMaterialToSubMesh(r,t,n)}},{key:"applyMaterialToSubMesh",value:function(e,t,n){var r=n.materialIndex,i=t||n.getMesh();i.material instanceof BABYLON.MultiMaterial&&r>=0&&r<i.material.subMaterials.length&&(i.material.subMaterials[r]=e)}},{key:"getSubMeshMaterial",value:function(e,t){var n=t.materialIndex,r=e||t.getMesh();return r.material instanceof BABYLON.MultiMaterial&&n>=0&&n<r.material.subMaterials.length?r.material.subMaterials[n]:null}},{key:"prefetchTexturesFormMeshAsync",value:function(){var e=g(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.material){e.next=3;break}return e.next=3,this.prefetchTexturesForMaterialAsync(t.material);case 3:n=t.getChildMeshes(),r=0;case 5:if(!(r<n.length)){e.next=13;break}if(!(i=n[r]).material){e.next=10;break}return e.next=10,this.prefetchTexturesForMaterialAsync(i.material);case 10:r++,e.next=5;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prefetchTexturesForMaterialAsync",value:function(){var t=g(d().mark((function t(n){var r,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}r=this.getTexturesForMaterial(n),i=0;case 3:if(!(i<r.length)){t.next=9;break}return t.next=6,e.whenTextureIsReadyAsync(r[i]);case 6:i++,t.next=3;break;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"checkDelayState",value:function(e){var t=this;e instanceof BABYLON.Mesh&&e._checkDelayState(),e.getChildMeshes().forEach((function(e){return t.checkDelayState(e)}))}},{key:"createEnvelopeMesh",value:function(e){var t=.01,n=e.getHierarchyBoundingVectors();if(n){var r=n.min,i=n.max;t=.005*new BABYLON.BoundingInfo(r,i).boundingSphere.radius}var a=this.cloneMesh(e.id,!0,!0);return a&&a instanceof BABYLON.Mesh&&this.expandMesh(a,t),a}},{key:"expandMesh",value:function(e,t){var n=new u.MeshExpander;if(e&&e instanceof BABYLON.Mesh){n.expandMesh(e,t);var r,i=l(e.getChildMeshes());try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof BABYLON.Mesh&&n.expandMesh(a,t)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"cloneMesh",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null;if(this._scene){var i=this._scene.getMeshByID(e);if(i){var a=this.getNextIncrementalName(i.name);if(r=i.clone(a,i.parent)){r.id=Zakeke.generateUUID(),t&&this.duplicateGeometry(i,r,n);var o,s=l(r.getChildMeshes());try{for(s.s();!(o=s.n()).done;){var u=o.value,c=this._scene.getMeshByID(u.id);u.id=Zakeke.generateUUID();var h=u.parent?u.parent.name:null;if(h){var f=u.name.indexOf(h+".")+h.length+1;u.name=u.name.substr(f)}c&&t&&this.duplicateGeometry(c,u,n)}}catch(d){s.e(d)}finally{s.f()}}}}return r}},{key:"duplicateGeometry",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof BABYLON.Mesh&&t instanceof BABYLON.Mesh){var r=BABYLON.VertexData.ExtractFromMesh(e,!0,!0);return new BABYLON.Geometry(Zakeke.generateUUID(),t.getScene(),r,n,t)}return null}},{key:"getSceneMaterialMetadata",value:function(e){return this._scene&&this._scene.metadata&&this._scene.metadata.materialsMetadata&&this._scene.metadata.materialsMetadata.hasOwnProperty(e)?this._scene.metadata.materialsMetadata[e]:null}},{key:"getOrCreateSceneMaterialMetadata",value:function(e){var t=this.getSceneMaterialMetadata(e);return t||(t={},this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.materialsMetadata||(this._scene.metadata.materialsMetadata={}),this._scene.metadata.materialsMetadata[e]=t),t}},{key:"removeSceneMaterialMetadata",value:function(e){this._scene.metadata&&this._scene.metadata.materialsMetadata&&this._scene.metadata.materialsMetadata.hasOwnProperty(e)&&delete this._scene.metadata.materialsMetadata[e]}},{key:"offloadAllUnusedMaterials",value:function(){var e=this;this.getAllUnusedMaterials().forEach((function(t){return e.offloadMaterial(t.id)}))}},{key:"offloadMaterial",value:function(e){var t=this._scene.getMaterialByID(e);t&&"default material"!==t.id&&0===this.getMeshesUsingMaterial(e).length&&(Logger.info("Offloading material: "+t.id+" - "+t.name),this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.offloadedMaterials||(this._scene.metadata.offloadedMaterials={}),this._scene.metadata.offloadedMaterials[e]=this.getOffloadedMaterialInfo(t),Logger.info("Disposing material: "+e),t.dispose(!1,!0))}},{key:"getOffloadedMaterialInfo",value:function(e){return{name:e.name,data:e.serialize()}}},{key:"loadAllOffloadedMaterials",value:function(e){var t=[];return this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&(t=this.loadOffloadedMaterials(e,this._scene.metadata.offloadedMaterials)),t}},{key:"loadOffloadedMaterialsByIDs",value:function(e,t){var n=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){for(var r={},i=0;i<t.length;i++)this._scene.metadata.offloadedMaterials.hasOwnProperty(t[i])&&(r[t[i]]={name:this._scene.metadata.offloadedMaterials[t[i]].name,data:this._scene.metadata.offloadedMaterials[t[i]].data});n=this.loadOffloadedMaterials(e,r)}return n}},{key:"loadOffloadedMaterial",value:function(e,t){if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){var n={};if(this._scene.metadata.offloadedMaterials.hasOwnProperty(t)){n[t]={name:this._scene.metadata.offloadedMaterials[t].name,data:this._scene.metadata.offloadedMaterials[t].data};var r=this.loadOffloadedMaterials(e,n);if(r.length>0)return r[0]}}return null}},{key:"loadOffloadedMaterials",value:function(e,t){var n=[];for(var r in t){var i=t[r],a=this.loadOffloadedMaterialInternal(r,i.name,e,i.data);a&&n.push(a)}return n}},{key:"loadOffloadedMaterialInternal",value:function(e,t,n,r){var i=this._scene.getMaterialByID(e);if(i)return i;var a=t?" - ".concat(t):"";return Logger.info("Loading offloaded material: "+e+a),BABYLON.Material.Parse(r,this._scene,n)}},{key:"loadAllOffloadedMaterialsAsync",value:function(){var e=g(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials)){e.next=5;break}return e.next=4,this.loadOffloadedMaterialsAsync(t,this._scene.metadata.offloadedMaterials);case 4:n=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadOffloadedMaterialsByIDsAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials)){e.next=7;break}for(i={},a=0;a<n.length;a++)this._scene.metadata.offloadedMaterials.hasOwnProperty(n[a])&&(i[n[a]]={name:this._scene.metadata.offloadedMaterials[n[a]].name,data:this._scene.metadata.offloadedMaterials[n[a]].data});return e.next=6,this.loadOffloadedMaterialsAsync(t,i);case 6:r=e.sent;case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadOffloadedMaterialAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials)){e.next=9;break}if(r={},!this._scene.metadata.offloadedMaterials.hasOwnProperty(n)){e.next=9;break}return r[n]={name:this._scene.metadata.offloadedMaterials[n].name,data:this._scene.metadata.offloadedMaterials[n].data},e.next=6,this.loadOffloadedMaterialsAsync(t,r);case 6:if(!((i=e.sent).length>0)){e.next=9;break}return e.abrupt("return",i[0]);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadOffloadedMaterialsAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in r=[],i=[],n)o=n[a],i.push(this.loadOffloadedMaterialInternalAsync(a,o.name,t,o.data));return e.next=5,Promise.all(i);case 5:return e.sent.forEach((function(e){e&&r.push(e)})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadOffloadedMaterialInternalAsync",value:function(){var t=g(d().mark((function t(n,r,i,a){var o,s,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=this._scene.getMaterialByID(n))){t.next=3;break}return t.abrupt("return",o);case 3:if(s=r?" - ".concat(r):"",Logger.info("Loading offloaded material: "+n+s),!(u=BABYLON.Material.Parse(a,this._scene,i))){t.next=13;break}return Logger.info("Waiting for material ready: "+n+s),t.next=10,e.whenAllMaterialTexturesAreReady(u);case 10:Logger.info("Material ready: "+n+s),t.next=14;break;case 13:Logger.info("No material was created from offloaded material: "+n+s);case 14:return t.abrupt("return",u);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"loadTextureFiles",value:function(e,t){if(e)for(var n=0;n<t.length;n++){var r=t[n],i=r;/^(?:\/|[a-z]+:\/\/)/.test(r)||(i=e+r);var a=i.lastIndexOf("."),o=a>-1?i.substring(a).toLowerCase():"",s=".png"===o,u=".jpg"===o;".dds"===o||".env"===o||".hdr"===o?BABYLON.Tools.LoadFile(i,(function(){})):(s||u)&&BABYLON.Tools.LoadImage(i,(function(e){}),(function(){}),null)}}},{key:"getOrLoadMaterialAsync",value:function(){var e=g(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=this._scene.getMaterialByID(t))||!this._scene.metadata){e.next=12;break}if(!this._scene.metadata.offloadedMaterials||!this._scene.metadata.offloadedMaterials.hasOwnProperty(t)){e.next=8;break}return e.next=5,this.loadOffloadedMaterialAsync(n,t);case 5:r=e.sent,e.next=12;break;case 8:if(!this._scene.metadata.delayedMaterials||!this._scene.metadata.delayedMaterials.hasOwnProperty(t)){e.next=12;break}return e.next=11,this.loadDelayedMaterialAsync(n,t);case 11:r=e.sent;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrCreateDummyMaterial",value:function(){var e=this._scene.getMaterialByID(this._dummyMaterialID);return e||((e=new BABYLON.StandardMaterial("Dummy Material",this._scene)).id=this._dummyMaterialID,e.metadata={isRealMaterial:!1}),e}},{key:"isDummyMaterial",value:function(e){return e.id===this._dummyMaterialID}},{key:"meshHasDummyMaterial",value:function(e,t){if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(var n=0;n<e.subMeshes.length;n++){var r,i=e.subMeshes[n].materialIndex;if(e.material.subMaterials[i]&&(null===(r=e.material.subMaterials[i])||void 0===r?void 0:r.id)===this._dummyMaterialID)return!0}else if(e.material&&e.material.id===this._dummyMaterialID)return!0;if(t)for(var a=0;a<e.getChildMeshes().length;a++)if(this.meshHasDummyMaterial(e.getChildMeshes()[a],!0))return!0;return!1}},{key:"getMeshDelayedMaterialIDs",value:function(e){var t=this,n=[];if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(var r=0;r<e.subMeshes.length;r++){var i,a=e.subMeshes[r].materialIndex;if(e.material.subMaterials[a]&&(null===(i=e.material.subMaterials[a])||void 0===i?void 0:i.id)===this._dummyMaterialID){var o="".concat(e.id,"_").concat(a);if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(o)){var s=this._scene.metadata.originalMeshMaterials[o];this._scene.metadata.delayedMaterials.hasOwnProperty(s)&&-1===n.indexOf(s)&&n.push(s)}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.delayedMaterials&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){var u=this._scene.metadata.originalMeshMaterials[e.id];this._scene.metadata.delayedMaterials.hasOwnProperty(u)&&-1===n.indexOf(u)&&n.push(u)}return e.getChildMeshes().forEach((function(e){return Array.prototype.push.apply(n,t.getMeshDelayedMaterialIDs(e))})),n}},{key:"getMeshOffloadedMaterialIDs",value:function(e){var t=this,n=[];if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(var r=0;r<e.subMeshes.length;r++){var i,a=e.subMeshes[r].materialIndex;if(e.material.subMaterials[a]&&(null===(i=e.material.subMaterials[a])||void 0===i?void 0:i.id)===this._dummyMaterialID){var o="".concat(e.id,"_").concat(a);if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(o)){var s=this._scene.metadata.originalMeshMaterials[o];this._scene.metadata.offloadedMaterials.hasOwnProperty(s)&&-1===n.indexOf(s)&&n.push(s)}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){var u=this._scene.metadata.originalMeshMaterials[e.id];this._scene.metadata.offloadedMaterials.hasOwnProperty(u)&&-1===n.indexOf(u)&&n.push(u)}return e.getChildMeshes().forEach((function(e){return Array.prototype.push.apply(n,t.getMeshOffloadedMaterialIDs(e))})),n}},{key:"setDummyMaterialToInvisibleMeshes",value:function(){var e=this;this.getInvisibleMeshes().forEach((function(t){e.setMeshDummyMaterial(t,!1)}))}},{key:"setMeshDummyMaterial",value:function(e,t){var n=this;this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.originalMeshMaterials||(this._scene.metadata.originalMeshMaterials={});var r=this.getOrCreateDummyMaterial();if(e.material)if(e.subMeshes&&e.subMeshes.length>0&&e.material instanceof BABYLON.MultiMaterial)for(var i=0;i<e.subMeshes.length;i++){var a=e.subMeshes[i].materialIndex,o=e.material.subMaterials[a];if(o&&!this.isDummyMaterial(o)){var s="".concat(e.id,"_").concat(a);this._scene.metadata.originalMeshMaterials[s]=o.id,e.material.subMaterials[a]=r}}else e.material&&!this.isDummyMaterial(e.material)&&(this._scene.metadata.originalMeshMaterials[e.id]=e.material.id,e.material=r);t&&e.getChildMeshes().forEach((function(e){return n.setMeshDummyMaterial(e,!0)}))}},{key:"unsetAllDummyMaterials",value:function(){for(var e=0;e<this._scene.meshes.length;e++)this.unsetMeshDummyMaterial(this._scene.meshes[e],!1)}},{key:"unsetAllDummyMaterialsAsync",value:function(){var e=g(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<this._scene.meshes.length)){e.next=7;break}return e.next=4,this.unsetMeshDummyMaterialAsync(this._scene.meshes[n],t,!1);case 4:n++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsetMeshDummyMaterial",value:function(e,t){var n=this;if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials){if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(var r=0;r<e.subMeshes.length;r++){var i,a=e.subMeshes[r].materialIndex;if(e.material.subMaterials[a]&&(null===(i=e.material.subMaterials[a])||void 0===i?void 0:i.id)===this._dummyMaterialID){var o="".concat(e.id,"_").concat(a);if(this._scene.metadata.originalMeshMaterials.hasOwnProperty(o)){var s=this._scene.metadata.originalMeshMaterials[o],u=this._scene.getMaterialByID(s);u&&(e.material.subMaterials[a]=u,delete this._scene.metadata.originalMeshMaterials[o])}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){var c=this._scene.metadata.originalMeshMaterials[e.id],l=this._scene.getMaterialByID(c);l&&(e.material=l,delete this._scene.metadata.originalMeshMaterials[e.id])}t&&e.getChildMeshes().forEach((function(e){return n.unsetMeshDummyMaterial(e,!0)}))}}},{key:"unsetMeshDummyMaterialAsync",value:function(){var e=g(d().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,g;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._scene.metadata||!this._scene.metadata.originalMeshMaterials){e.next=36;break}if(!(t.subMeshes&&t.subMeshes.length>0&&t.material&&t.material instanceof BABYLON.MultiMaterial)){e.next=20;break}i=0;case 3:if(!(i<t.subMeshes.length)){e.next=18;break}if(o=t.subMeshes[i],s=o.materialIndex,!t.material.subMaterials[s]||(null===(a=t.material.subMaterials[s])||void 0===a?void 0:a.id)!==this._dummyMaterialID){e.next=15;break}if(u="".concat(t.id,"_").concat(s),!this._scene.metadata.originalMeshMaterials.hasOwnProperty(u)){e.next=15;break}return c=this._scene.metadata.originalMeshMaterials[u],e.next=12,this.getOrLoadMaterialAsync(c,n);case 12:l=e.sent,t.material.subMaterials[s]=l,delete this._scene.metadata.originalMeshMaterials[u];case 15:i++,e.next=3;break;case 18:e.next=27;break;case 20:if(!(t.material&&t.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(t.id))){e.next=27;break}return h=this._scene.metadata.originalMeshMaterials[t.id],e.next=24,this.getOrLoadMaterialAsync(h,n);case 24:f=e.sent,t.material=f,delete this._scene.metadata.originalMeshMaterials[t.id];case 27:if(!r){e.next=36;break}p=t.getChildMeshes(),g=0;case 30:if(!(g<p.length)){e.next=36;break}return e.next=33,this.unsetMeshDummyMaterialAsync(p[g],n,!0);case 33:g++,e.next=30;break;case 36:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"reloadAllLoadingErrorTexturesAsync",value:function(){var e=g(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l(this._scene.textures),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,this.reloadLoadingErrorTextureAsync(t,i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadMaterialLoadingErrorTexturesAsync",value:function(){var e=g(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l(n.getActiveTextures()),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=9;break}return a=i.value,e.next=7,this.reloadLoadingErrorTextureAsync(t,a);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"reloadLoadingErrorTextureAsync",value:function(e,t){if(t instanceof BABYLON.Texture&&t.url){var n=t.getInternalTexture();if(t.loadingError||n&&n.loadingError){var r=t.url,i=/^(?:\/|[a-z]+:\/\/)/.test(t.url),a=t.url;return i||(a=e+t.url),new Promise((function(e,n){t.updateURL(a,null,(function(){t.url=r,e()}),(function(){t.url=r,n()}))}))}}return Promise.resolve()}},{key:"isTextureLoadingError",value:function(e){if(e.loadingError)return!0;var t=e.getInternalTexture();return null!==t&&t.loadingError}},{key:"materialHasLoadingErrorTextues",value:function(e){var t=this;return e.getActiveTextures().some((function(e){return t.isTextureLoadingError(e)}))}},{key:"getMaterialDynamicTextures",value:function(e){return e.getActiveTextures().filter((function(e){return e instanceof BABYLON.ProceduralTexture||e instanceof BABYLON.Texture&&e.url&&-1!==e.url.indexOf("blob:")}))}},{key:"exportTextureToBase64Async",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Promise.resolve().then(g(d().mark((function i(){var a,o;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.getPixelsFromTexture(e);case 2:if(a=i.sent){i.next=5;break}return i.abrupt("return",null);case 5:if(o=e.getSize(),!e.mimeType){i.next=14;break}i.t0=e.mimeType,i.next="image/jpeg"===i.t0?10:"image/png"===i.t0?12:14;break;case 10:return n="image/jpeg",i.abrupt("break",14);case 12:return n="image/png",i.abrupt("break",14);case 14:return i.abrupt("return",t.createBase64FromCanvasAsync(a,o.width,o.height,n,r));case 15:case"end":return i.stop()}}),i)}))))}},{key:"createBase64FromCanvasAsync",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(){var o=g(d().mark((function o(s,u){var c,l,h,f,p,g;return d().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=BABYLON.Constants.TEXTURETYPE_UNSIGNED_INT,l=i._scene,h=l.getEngine(),f=h.createRawTexture(e,t,n,BABYLON.Constants.TEXTUREFORMAT_RGBA,!1,a,BABYLON.Texture.NEAREST_SAMPLINGMODE,null,c),o.next=6,BABYLON.TextureTools.ApplyPostProcess("pass",f,l,c,BABYLON.Constants.TEXTURE_NEAREST_SAMPLINGMODE,BABYLON.Constants.TEXTUREFORMAT_RGBA);case 6:return o.next=8,h._readTexturePixels(f,t,n);case 8:return p=o.sent,o.next=11,BABYLON.Tools.DumpDataAsync(t,n,p,r,void 0,!0,!1);case 11:g=o.sent,s(g);case 13:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}},{key:"getPixelsFromTexture",value:function(e){return e.textureType,BABYLON.Constants.TEXTURETYPE_UNSIGNED_INT,e.readPixels()}},{key:"comparePBRMaterials",value:function(e,t){(e.albedoColor&&!t.albedoColor||!e.albedoColor&&t.albedoColor||e.albedoColor&&t.albedoColor&&!e.albedoColor.equals(t.albedoColor))&&console.log("albedoColor"),e.allowShaderHotSwapping!==t.allowShaderHotSwapping&&console.log("allowShaderHotSwapping"),e.alphaCutOff!==t.alphaCutOff&&console.log("alphaCutOff"),(e.ambientColor&&!t.ambientColor||!e.ambientColor&&t.ambientColor||e.ambientColor&&t.ambientColor&&!e.ambientColor.equals(t.ambientColor))&&console.log("ambientColor"),e.ambientTextureStrength!==t.ambientTextureStrength&&console.log("ambientTextureStrength"),this.compareAnisotropy(e.anisotropy,t.anisotropy),this.compareBRDF(e.brdf,t.brdf),this.compareClearCoat(e.clearCoat,t.clearCoat),e.depthFunction!==t.depthFunction&&console.log("depthFunction"),this.compareDetailMap(e.detailMap,t.detailMap),e.directIntensity!==t.directIntensity&&console.log("directIntensity"),e.disableBumpMap!==t.disableBumpMap&&console.log("disableBumpMap"),e.disableColorWrite!==t.disableColorWrite&&console.log("disableColorWrite"),e.disableDepthWrite!==t.disableDepthWrite&&console.log("disableDepthWrite"),e.disableLighting!==t.disableLighting&&console.log("disableLighting"),(e.emissiveColor&&!t.emissiveColor||!e.emissiveColor&&t.emissiveColor||e.emissiveColor&&t.emissiveColor&&!e.emissiveColor.equals(t.emissiveColor))&&console.log("emissiveColor"),e.emissiveIntensity!==t.emissiveIntensity&&console.log("emissiveIntensity"),e.enableSpecularAntiAliasing!==t.enableSpecularAntiAliasing&&console.log("enableSpecularAntiAliasing"),e.environmentIntensity!==t.environmentIntensity&&console.log("environmentIntensity"),e.forceAlphaTest!==t.forceAlphaTest&&console.log("forceAlphaTest"),e.forceDepthWrite!==t.forceDepthWrite&&console.log("forceDepthWrite"),e.forceIrradianceInFragment!==t.forceIrradianceInFragment&&console.log("forceIrradianceInFragment"),e.forceNormalForward!==t.forceNormalForward&&console.log("forceNormalForward"),e.invertNormalMapX!==t.invertNormalMapX&&console.log("invertNormalMapX"),e.invertNormalMapY!==t.invertNormalMapY&&console.log("invertNormalMapY"),e.maxSimultaneousLights!==t.maxSimultaneousLights&&console.log("maxSimultaneousLights"),e.metallic!==t.metallic&&console.log("metallic"),e.metallicF0Factor!==t.metallicF0Factor&&console.log("metallicF0Factor"),(e.metallicReflectanceColor&&!t.metallicReflectanceColor||!e.metallicReflectanceColor&&t.metallicReflectanceColor||e.metallicReflectanceColor&&t.metallicReflectanceColor&&!e.metallicReflectanceColor.equals(t.metallicReflectanceColor))&&console.log("metallicReflectanceColor"),e.microSurface!==t.microSurface&&console.log("microSurface"),e.parallaxScaleBias!==t.parallaxScaleBias&&console.log("parallaxScaleBias"),e.pointSize!==t.pointSize&&console.log("pointSize"),this.comparePrePassConfiguration(e.prePassConfiguration,t.prePassConfiguration),(e.reflectionColor&&!t.reflectionColor||!e.reflectionColor&&t.reflectionColor||e.reflectionColor&&t.reflectionColor&&!e.reflectionColor.equals(t.reflectionColor))&&console.log("reflectionColor"),(e.reflectivityColor&&!t.reflectivityColor||!e.reflectivityColor&&t.reflectivityColor||e.reflectivityColor&&t.reflectivityColor&&!e.reflectivityColor.equals(t.reflectivityColor))&&console.log("reflectivityColor"),e.roughness!==t.roughness&&console.log("roughness"),e.separateCullingPass!==t.separateCullingPass&&console.log("separateCullingPass"),this.compareSheen(e.sheen,t.sheen),e.sideOrientation!==t.sideOrientation&&console.log("sideOrientation"),e.specularIntensity!==t.specularIntensity&&console.log("specularIntensity"),this.compareSubSurface(e.subSurface,t.subSurface),e.twoSidedLighting!==t.twoSidedLighting&&console.log("twoSidedLighting"),e.unlit!==t.unlit&&console.log("unlit"),e.useAlphaFresnel!==t.useAlphaFresnel&&console.log("useAlphaFresnel"),e.useAlphaFromAlbedoTexture!==t.useAlphaFromAlbedoTexture&&console.log("useAlphaFromAlbedoTexture"),e.useAmbientInGrayScale!==t.useAmbientInGrayScale&&console.log("useAmbientInGrayScale"),e.useAmbientOcclusionFromMetallicTextureRed!==t.useAmbientOcclusionFromMetallicTextureRed&&console.log("useAmbientOcclusionFromMetallicTextureRed"),e.useAutoMicroSurfaceFromReflectivityMap!==t.useAutoMicroSurfaceFromReflectivityMap&&console.log("useAutoMicroSurfaceFromReflectivityMap"),e.useHorizonOcclusion!==t.useHorizonOcclusion&&console.log("useHorizonOcclusion"),e.useLightmapAsShadowmap!==t.useLightmapAsShadowmap&&console.log("useLightmapAsShadowmap"),e.useLinearAlphaFresnel!==t.useLinearAlphaFresnel&&console.log("useLinearAlphaFresnel"),e.useMetallnessFromMetallicTextureBlue!==t.useMetallnessFromMetallicTextureBlue&&console.log("useMetallnessFromMetallicTextureBlue"),e.useMicroSurfaceFromReflectivityMapAlpha!==t.useMicroSurfaceFromReflectivityMapAlpha&&console.log("useMicroSurfaceFromReflectivityMapAlpha"),e.useObjectSpaceNormalMap!==t.useObjectSpaceNormalMap&&console.log("useObjectSpaceNormalMap"),e.useOnlyMetallicFromMetallicReflectanceTexture!==t.useOnlyMetallicFromMetallicReflectanceTexture&&console.log("useOnlyMetallicFromMetallicReflectanceTexture"),e.useParallax!==t.useParallax&&console.log("useParallax"),e.useParallaxOcclusion!==t.useParallaxOcclusion&&console.log("useParallaxOcclusion"),e.useRadianceOcclusion!==t.useRadianceOcclusion&&console.log("useRadianceOcclusion"),e.useRadianceOverAlpha!==t.useRadianceOverAlpha&&console.log("useRadianceOverAlpha"),e.useRoughnessFromMetallicTextureAlpha!==t.useRoughnessFromMetallicTextureAlpha&&console.log("useRoughnessFromMetallicTextureAlpha"),e.useRoughnessFromMetallicTextureGreen!==t.useRoughnessFromMetallicTextureGreen&&console.log("useRoughnessFromMetallicTextureGreen"),e.useSpecularOverAlpha!==t.useSpecularOverAlpha&&console.log("useSpecularOverAlpha"),e.zOffset!==t.zOffset&&console.log("zOffset"),e.zOffsetUnits!==t.zOffsetUnits&&console.log("zOffsetUnits"),e.alpha!==t.alpha&&console.log("alpha"),e.alphaMode!==t.alphaMode&&console.log("alphaMode"),e.backFaceCulling!==t.backFaceCulling&&console.log("backFaceCulling"),this.compareCameraCurve("",e.cameraColorCurves,t.cameraColorCurves),e.cameraColorCurvesEnabled!==t.cameraColorCurvesEnabled&&console.log("cameraColorCurvesEnabled"),e.cameraColorGradingEnabled!==t.cameraColorGradingEnabled&&console.log("cameraColorGradingEnabled"),e.cameraContrast!==t.cameraContrast&&console.log("cameraContrast"),e.cameraExposure!==t.cameraExposure&&console.log("cameraExposure"),e.cameraToneMappingEnabled!==t.cameraToneMappingEnabled&&console.log("cameraToneMappingEnabled"),e.canRenderToMRT!==t.canRenderToMRT&&console.log("canRenderToMRT"),e.cullBackFaces!==t.cullBackFaces&&console.log("cullBackFaces"),e.fillMode!==t.fillMode&&console.log("fillMode"),e.fogEnabled!==t.fogEnabled&&console.log("fogEnabled"),e.hasRenderTargetTextures!==t.hasRenderTargetTextures&&console.log("hasRenderTargetTextures"),this.compareImageProcessingConfiguration(e.imageProcessingConfiguration,t.imageProcessingConfiguration),e.indexOfRefraction!==t.indexOfRefraction&&console.log("indexOfRefraction"),e.invertRefractionY!==t.invertRefractionY&&console.log("invertRefractionY"),e.isFrozen!==t.isFrozen&&console.log("isFrozen"),e.isPrePassCapable!==t.isPrePassCapable&&console.log("isPrePassCapable"),e.linkRefractionWithTransparency!==t.linkRefractionWithTransparency&&console.log("linkRefractionWithTransparency"),e.needDepthPrePass!==t.needDepthPrePass&&console.log("needDepthPrePass"),e.realTimeFiltering!==t.realTimeFiltering&&console.log("realTimeFiltering"),e.realTimeFilteringQuality!==t.realTimeFilteringQuality&&console.log("realTimeFilteringQuality"),e.transparencyMode!==t.transparencyMode&&console.log("transparencyMode"),e.useGLTFLightFalloff!==t.useGLTFLightFalloff&&console.log("useGLTFLightFalloff"),e.useLogarithmicDepth!==t.useLogarithmicDepth&&console.log("useLogarithmicDepth"),e.usePhysicalLightFalloff!==t.usePhysicalLightFalloff&&console.log("usePhysicalLightFalloff"),this.compareTexture("albedo",e.albedoTexture,t.albedoTexture),this.compareTexture("emissive",e.emissiveTexture,t.emissiveTexture)}},{key:"compareAnisotropy",value:function(e,t){var n="anisotropy";(e.direction&&!t.direction||!e.direction&&t.direction||e.direction&&t.direction&&!e.direction.equals(t.direction))&&console.log(n+" - direction"),e.intensity!==t.intensity&&console.log(n+" - intensity"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled")}},{key:"compareBRDF",value:function(e,t){var n="brdf";e.useEnergyConservation!==t.useEnergyConservation&&console.log(n+" - useEnergyConservation"),e.useSmithVisibilityHeightCorrelated!==t.useSmithVisibilityHeightCorrelated&&console.log(n+" - useSmithVisibilityHeightCorrelated"),e.useSpecularGlossinessInputEnergyConservation!==t.useSpecularGlossinessInputEnergyConservation&&console.log(n+" - useSpecularGlossinessInputEnergyConservation"),e.useSphericalHarmonics!==t.useSphericalHarmonics&&console.log(n+" - useSphericalHarmonics")}},{key:"compareClearCoat",value:function(e,t){var n="clearCoat";e.indexOfRefraction!==t.indexOfRefraction&&console.log(n+" - indexOfRefraction"),e.intensity!==t.intensity&&console.log(n+" - intensity"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.isTintEnabled!==t.isTintEnabled&&console.log(n+" - isTintEnabled"),e.roughness!==t.roughness&&console.log(n+" - roughness"),(e.tintColor&&!t.tintColor||!e.tintColor&&t.tintColor||e.tintColor&&t.tintColor&&!e.tintColor.equals(t.tintColor))&&console.log(n+" - tintColor"),e.tintColorAtDistance!==t.tintColorAtDistance&&console.log(n+" - tintColorAtDistance"),e.tintThickness!==t.tintThickness&&console.log(n+" - tintThickness"),e.useRoughnessFromMainTexture!=t.useRoughnessFromMainTexture&&console.log(n+" - useRoughnessFromMainTexture")}},{key:"compareDetailMap",value:function(e,t){var n="detailMap";e.bumpLevel!==t.bumpLevel&&console.log(n+" - bumpLevel"),e.diffuseBlendLevel!==t.diffuseBlendLevel&&console.log(n+" - diffuseBlendLevel"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.normalBlendMethod!==t.normalBlendMethod&&console.log(n+" - normalBlendMethod"),e.roughnessBlendLevel!==t.roughnessBlendLevel&&console.log(n+" - roughnessBlendLevel")}},{key:"comparePrePassConfiguration",value:function(e,t){var n="PrePassConfiguration";(e.currentViewProjection&&!t.currentViewProjection||!e.currentViewProjection&&t.currentViewProjection||e.currentViewProjection&&t.currentViewProjection&&!e.currentViewProjection.equals(t.currentViewProjection))&&console.log(n+" - currentViewProjection"),(e.previousViewProjection&&!t.previousViewProjection||!e.previousViewProjection&&t.previousViewProjection||e.previousViewProjection&&t.previousViewProjection&&!e.previousViewProjection.equals(t.previousViewProjection))&&console.log(n+" - previousViewProjection")}},{key:"compareSheen",value:function(e,t){var n="Sheen";e.albedoScaling!==t.albedoScaling&&console.log(n+" - albedoScaling"),(e.color&&!t.color||!e.color&&t.color||e.color&&t.color&&!e.color.equals(t.color))&&console.log(n+" - color"),e.intensity!==t.intensity&&console.log(n+" - intensity"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.linkSheenWithAlbedo!==t.linkSheenWithAlbedo&&console.log(n+" - linkSheenWithAlbedo"),e.roughness!==t.roughness&&console.log(n+" - roughness"),e.useRoughnessFromMainTexture!==t.useRoughnessFromMainTexture&&console.log(n+" - useRoughnessFromMainTexture")}},{key:"compareSubSurface",value:function(e,t){var n="SubSurface";(e.diffusionDistance&&!t.diffusionDistance||!e.diffusionDistance&&t.diffusionDistance||e.diffusionDistance&&t.diffusionDistance&&!e.diffusionDistance.equals(t.diffusionDistance))&&console.log(n+" - diffusionDistance"),e.indexOfRefraction!==t.indexOfRefraction&&console.log(n+" - indexOfRefraction"),e.invertRefractionY!==t.invertRefractionY&&console.log(n+" - invertRefractionY"),e.isRefractionEnabled!==t.isRefractionEnabled&&console.log(n+" - isRefractionEnabled"),e.isScatteringEnabled!==t.isScatteringEnabled&&console.log(n+" - isScatteringEnabled"),e.isTranslucencyEnabled!==t.isTranslucencyEnabled&&console.log(n+" - isTranslucencyEnabled"),e.linkRefractionWithTransparency!==t.linkRefractionWithTransparency&&console.log(n+" - linkRefractionWithTransparency"),e.maximumThickness!==t.maximumThickness&&console.log(n+" - maximumThickness"),e.minimumThickness!==t.minimumThickness&&console.log(n+" - minimumThickness"),e.refractionIntensity!==t.refractionIntensity&&console.log(n+" - refractionIntensity"),(e.tintColor&&!t.tintColor||!e.tintColor&&t.tintColor||e.tintColor&&t.tintColor&&!e.tintColor.equals(t.tintColor))&&console.log(n+" - tintColor"),e.tintColorAtDistance!==t.tintColorAtDistance&&console.log(n+" - tintColorAtDistance"),e.translucencyIntensity!==t.translucencyIntensity&&console.log(n+" - translucencyIntensity"),e.useAlbedoToTintRefraction!==t.useAlbedoToTintRefraction&&console.log(n+" - useAlbedoToTintRefraction"),e.useAlbedoToTintTranslucency!==t.useAlbedoToTintTranslucency&&console.log(n+" - useAlbedoToTintTranslucency"),e.useGltfStyleTextures!==t.useGltfStyleTextures&&console.log(n+" - useGltfStyleTextures"),e.useMaskFromThicknessTexture!==t.useMaskFromThicknessTexture&&console.log(n+" - useMaskFromThicknessTexture"),e.useThicknessAsDepth!==t.useThicknessAsDepth&&console.log(n+" - useThicknessAsDepth")}},{key:"compareCameraCurve",value:function(e,t,n){if((null===t&&null!==n||null!==t&&null===n)&&console.log("cameraColorCurves"),t&&n){var r=e?e+" - cameraColorCurves":"cameraColorCurves";t.globalDensity!==n.globalDensity&&console.log(r+" - globalDensity"),t.globalExposure!==n.globalExposure&&console.log(r+"- globalExposure"),t.globalHue!==n.globalHue&&console.log(r+" - globalHue"),t.globalSaturation!==n.globalSaturation&&console.log(r+" - globalSaturation"),t.highlightsDensity!==n.highlightsDensity&&console.log(r+" - highlightsDensity"),t.highlightsExposure!==n.highlightsExposure&&console.log(r+" - highlightsExposure"),t.highlightsHue!==n.highlightsHue&&console.log(r+" - highlightsHue"),t.highlightsSaturation!==n.highlightsSaturation&&console.log(r+" - highlightsSaturation"),t.midtonesDensity!==n.midtonesDensity&&console.log(r+" - midtonesDensity"),t.midtonesExposure!==n.midtonesExposure&&console.log(r+" - midtonesExposure"),t.midtonesHue!==n.midtonesHue&&console.log(r+" - midtonesHue"),t.midtonesSaturation!==n.midtonesSaturation&&console.log(r+" - midtonesSaturation"),t.shadowsDensity!==n.shadowsDensity&&console.log(r+" - shadowsDensity"),t.shadowsExposure!==n.shadowsExposure&&console.log(r+" - shadowsExposure"),t.shadowsHue!==n.shadowsHue&&console.log(r+" - shadowsHue"),t.shadowsSaturation!==n.shadowsSaturation&&console.log(r+" - shadowsSaturation")}}},{key:"compareImageProcessingConfiguration",value:function(e,t){var n="imageProcessingConfiguration";this.compareCameraCurve(n,e.colorCurves,t.colorCurves),e.vignetteCameraFov!==t.vignetteCameraFov&&console.log(n+" - vignetteCameraFov"),e.vignetteCentreX!==t.vignetteCentreX&&console.log(n+" - vignetteCentreX"),e.vignetteCentreY!==t.vignetteCentreY&&console.log(n+" - vignetteCentreY"),(e.vignetteColor&&!t.vignetteColor||!e.vignetteColor&&t.vignetteColor||e.vignetteColor&&t.vignetteColor&&!e.vignetteColor.equals(t.vignetteColor))&&console.log(n+" - vignetteColor"),e.vignetteStretch!==t.vignetteStretch&&console.log(n+" - vignetteStretch"),e.vignetteWeight!==t.vignetteWeight&&console.log(n+" - vignetteWeight"),e.applyByPostProcess!==t.applyByPostProcess&&console.log(n+" - applyByPostProcess"),e.colorCurvesEnabled!==t.colorCurvesEnabled&&console.log(n+" - colorCurvesEnabled"),e.colorGradingBGR!==t.colorGradingBGR&&console.log(n+" - colorGradingBGR"),e.colorGradingEnabled!==t.colorGradingEnabled&&console.log(n+" - colorGradingEnabled"),e.colorGradingWithGreenDepth!==t.colorGradingWithGreenDepth&&console.log(n+" - colorGradingWithGreenDepth"),e.contrast!==t.contrast&&console.log(n+" - contrast"),e.exposure!==t.exposure&&console.log(n+" - exposure"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.toneMappingEnabled!==t.toneMappingEnabled&&console.log(n+" - toneMappingEnabled"),e.toneMappingType!==t.toneMappingType&&console.log(n+" - toneMappingType"),e.vignetteBlendMode!==t.vignetteBlendMode&&console.log(n+" - vignetteBlendMode"),e.vignetteEnabled!==t.vignetteEnabled&&console.log(n+" - vignetteEnabled")}},{key:"compareTexture",value:function(e,t,n){t&&!n||!t&&n||t instanceof BABYLON.Texture&&!(n instanceof BABYLON.Texture)||n instanceof BABYLON.Texture&&!(t instanceof BABYLON.Texture)?console.log(e):t&&n&&(t.anisotropicFilteringLevel!==n.anisotropicFilteringLevel&&console.log(e+" - anisotropicFilteringLevel"),t instanceof BABYLON.Texture&&n instanceof BABYLON.Texture&&(t.homogeneousRotationInUVTransform!==n.homogeneousRotationInUVTransform&&console.log(e+" - homogeneousRotationInUVTransform"),t.uAng!==n.uAng&&console.log(e+" - uAng"),t.uOffset!==n.uOffset&&console.log(e+" - uOffset"),t.uRotationCenter!==n.uRotationCenter&&console.log(e+" - uRotationCenterSearch"),t.uScale!==n.uScale&&console.log(e+" - uScale"),t.vAng!==n.vAng&&console.log(e+" - vAng"),t.vOffset!==n.vOffset&&console.log(e+" - vOffset"),t.vRotationCenter!==n.vRotationCenter&&console.log(e+" - vRotationCenterSearch"),t.vScale!==n.vScale&&console.log(e+" - vScale"),t.wAng!==n.wAng&&console.log(e+" - wAng"),t.wRotationCenter!==n.wRotationCenter&&console.log(e+" - wRotationCenterSearch"),t.invertY!==n.invertY&&console.log(e+" - invertY"),t.mimeType!==n.mimeType&&console.log(e+" - mimeType")),t.invertZ!==n.invertZ&&console.log(e+" - invertZ"),t.isRenderTarget!==n.isRenderTarget&&console.log(e+" - isRenderTarget"),t.level!==n.level&&console.log(e+" - level"),t.wrapR!==n.wrapR&&console.log(e+" - wrapR"),t.canRescale!==n.canRescale&&console.log(e+" - canRescale"),t.coordinatesIndex!==n.coordinatesIndex&&console.log(e+" - coordinatesIndex"),t.coordinatesMode!==n.coordinatesMode&&console.log(e+" - coordinatesMode"),t.gammaSpace!==n.gammaSpace&&console.log(e+" - gammaSpace"),t.getAlphaFromRGB!==n.getAlphaFromRGB&&console.log(e+" - getAlphaFromRGB"),t.hasAlpha!==n.hasAlpha&&console.log(e+"- hasAlpha"),t.is2DArray!==n.is2DArray&&console.log(e+" - is2DArray"),t.is3D!==n.is3D&&console.log(e+" - is3D"),t.isBlocking!==n.isBlocking&&console.log(e+" - isBlocking"),t.isCube!==n.isCube&&console.log(e+" - isCube"),t.isRGBD!==n.isRGBD&&console.log(e+" - isRGBD"),t.linearSpecularLOD!==n.linearSpecularLOD&&console.log(e+" - linearSpecularLOD"),t.lodGenerationOffset!==n.lodGenerationOffset&&console.log(e+" - lodGenerationOffset"),t.lodGenerationScale!==n.lodGenerationScale&&console.log(e+" - lodGenerationScale"),t.noMipmap!==n.noMipmap&&console.log(e+" - noMipmap"),t.samplingMode!==n.samplingMode&&console.log(e+" - samplingMode"),t.textureFormat!==n.textureFormat&&console.log(e+" - textureFormat"),t.textureType!==n.textureType&&console.log(e+" - textureType"),t.wrapU!==n.wrapU&&console.log(e+" - wrapU"),t.wrapV!==n.wrapV&&console.log(e+" - wrapV"))}},{key:"showResizableCanvas",value:function(){var e=g(d().mark((function e(t,n,r,i,a,o,s,u){var c,l,h,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._scene){e.next=13;break}return this.clearMeshes(),c=this._resizableCanvas3DGenerator.generatePreview3D({width:t,height:n,depth:r,borderRadius:i,radiusResolution:.1,type:a,borderColor:o,columns:s,rows:u,useCheckerTexture:!1},this._scene),e.next=5,BABYLON.SceneLoader.ImportMeshAsync("","","data:"+JSON.stringify(c));case 5:return l=e.sent,h=l.meshes[0],f=2/Math.max(t,n),h.scaling.scaleInPlace(f),h.position.z=-.5,(p=this.getDefaultHemisphericLight())&&(p.intensity=1,p.direction=new BABYLON.Vector3(0,1,-1)),e.abrupt("return",l.meshes);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,a,o,s,u){return e.apply(this,arguments)}}()},{key:"clearMeshes",value:function(){this._scene.meshes.forEach((function(e){return e.dispose()})),this._scene.meshes=[]}}],h=[{key:"checkAllMaterialTextureReady",value:function(e){for(var t=e.getActiveTextures(),n=0;n<t.length;n++){var r=t[n];if(!r.isReady())return!1;r instanceof BABYLON.ProceduralTexture&&r.getEffect()}return!0}},{key:"whenAllMaterialTexturesAreReady",value:function(e){var t=this;return new Promise((function(n,r){if(t.checkAllMaterialTextureReady(e))n();else var i=setInterval((function(){t.checkAllMaterialTextureReady(e)&&(clearInterval(i),n())}),5)}))}},{key:"whenTextureIsReadyAsync",value:function(e){return new Promise((function(t,n){if(e.isReady())t();else var r=setInterval((function(){e.isReady()&&(clearInterval(r),e instanceof BABYLON.ProceduralTexture&&e.getEffect(),t())}),5)}))}},{key:"whenMeshMaterialIsReady",value:function(e){return new Promise((function(t,n){var r=setInterval((function(){e.material&&!e.material.isReady(e)||(clearInterval(r),t())}),5)}))}},{key:"whenMaterialIsReadyForSubMeshAsync",value:function(e,t,n){return new Promise((function(r,i){if(e.isReadyForSubMesh(t,n))Logger.info("Material ".concat(e.name," ready")),r();else{Logger.info("Material ".concat(e.name," NOT ready"));var a=setInterval((function(){!e.isReadyForSubMesh(t,n)||t.material&&t.material==e&&!t.material.isReady(t)||(Logger.info("Material ".concat(e.name," ready")),clearInterval(a),r())}),5)}}))}},{key:"getMeshGeometry",value:function(e){if(e.geometry)return e.geometry;for(var t=e.getScene().getGeometries(),n=0;n<t.length;n++){var r=t[n];if(r.meshes.find((function(t){return t===e})))return r}return null}},{key:"checkMeshIsReady",value:function(e){if(e instanceof BABYLON.Mesh){if(e._checkDelayState(),e.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_NOTLOADED)return!1;if(!e.geometry)for(var t=e.getScene().getGeometries(),n=0;n<t.length;n++){var r=t[n];if(r.meshes.find((function(t){return t===e}))&&!r.isReady())return!1}if(e.geometry&&!e.geometry.isReady())return!1;for(var i=0;i<e.getChildMeshes().length;i++){var a=e.getChildMeshes()[i];if(!this.checkMeshIsReady(a))return!1}}return e.isReady(!0)}},{key:"checkAllMeshesAreReady",value:function(e){for(var t=!0,n=0;n<e.length;n++)this.checkMeshIsReady(e[n])||(t=!1);return t}},{key:"whenAllMeshesAreReadyAsync",value:function(e){var t=this;return new Promise((function(n,r){if(t.checkAllMeshesAreReady(e))n();else var i=setInterval((function(){t.checkAllMeshesAreReady(e)&&(clearInterval(i),n())}),5)}))}},{key:"whenAllVisibleMeshesAreReadyAsync",value:function(){var e=g(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.meshes.filter((function(e){return e.isVisible})),e.next=3,this.whenAllMeshesAreReadyAsync(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"whenMeshIsReadyAsync",value:function(e){var t=this;return new Promise((function(n,r){if(t.checkMeshIsReady(e))n();else var i=setInterval((function(){t.checkMeshIsReady(e)&&(clearInterval(i),n())}),5)}))}},{key:"visibleMeshesRequireDelayedLoading",value:function(e){for(var t=e.meshes.filter((function(e){return e.isVisible})),n=0;n<t.length;n++)if(this.meshRequiresDelayedLoading(t[n]))return!0;return!1}},{key:"meshRequiresDelayedLoading",value:function(t){if(t instanceof BABYLON.Mesh){if(t.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_NOTLOADED||t.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_LOADING)return!0;var n=e.getMeshGeometry(t);if(n&&(n.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_LOADING||n.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_NOTLOADED))return!0}return!1}}],n&&v(t.prototype,n),h&&v(t,h),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/ScenePreview/ScenePreview.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{ScenePreviewData:function(){return g},ScenesPreview:function(){return v}});var r=n("../../3D/src/Components/DesignManagers/MeshDesignManager.ts"),i=n("../../3D/src/Components/SceneHelper.ts");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};u(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,u(_,"constructor",g),u(g,"constructor",p),p.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),u(_,s,"Generator"),u(_,i,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function l(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=d((function e(){p(this,e)})),v=function(){function e(){p(this,e)}return d(e,null,[{key:"getPreviewsAsync",value:function(){var e=h(c().mark((function e(t,n,r){var i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new m(t,n,r),e.next=3,i.getPreviewsAsync();case 3:return a=e.sent,i.dispose(),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),m=function(){function e(t,n,r){p(this,e),u(this,"_rootUrl",""),u(this,"_localEngine",null),u(this,"_hostingScene",null),u(this,"_hostingSceneHelper",null),this._scene=t,this._rootUrl=n,this._options=r}return d(e,[{key:"dispose",value:function(){this.disposeHostingScene(),this.disposeLocalEngine()}},{key:"createLocalEngine",value:function(){if(!this._localEngine){var e=document.createElement("canvas");e.id="ScenePreviewCanvas",e.width=this._options.width||1024,e.height=this._options.height||1024,this._localEngine=new BABYLON.Engine(e,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0}),this._localEngine.setSize(e.width,e.height),this._localEngine.displayLoadingUI=function(){return null},this._localEngine.hideLoadingUI=function(){return null}}return this._localEngine}},{key:"createScenePreviewFileAsync",value:function(){var e=h(c().mark((function e(t,n,a){var s,u,l,f,d=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=BABYLON.SceneSerializer.Serialize(n),!(u=JSON.stringify(s))){e.next=8;break}if(!(l=new BABYLON.Scene(this._localEngine))){e.next=8;break}return f=new i.SceneHelper(l),e.next=8,new Promise((function(e){BABYLON.SceneLoader.Append(t,"data:"+u,l,h(c().mark((function t(){var n,i,s,u,h;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.whenReadyAsync();case 2:if(f.setupCamera(),f.setupLights(),(n=l.activeCamera).position=d._options.camera.position,n.target=d._options.camera.target,!(d._options.meshesWithCustomizationIds&&d._options.zkDesign&&d._options.zkModel&&d._options.zkScene)){t.next=33;break}i=o(d._options.meshesWithCustomizationIds),t.prev=9,i.s();case 11:if((s=i.n()).done){t.next=20;break}if(u=s.value,!(h=l.getMeshByID(u))){t.next=18;break}return h.metadata&&h.metadata.originalNormalmapMaterialID&&(h.material=l.materials.find((function(e){return e.id===h.metadata.originalNormalmapMaterialID}))||null),t.next=18,r.MeshDesignManager.createMeshDesignManagerAsync(l,d._options.zkScene,h,h.subMeshes&&h.subMeshes.length>0?h.subMeshes[0]:null,d._options.zkModel,d._options.zkDesign,!0);case 18:t.next=11;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(9),i.e(t.t0);case 25:return t.prev=25,i.f(),t.finish(25);case 28:return t.next=30,new Promise((function(e){setTimeout((function(){e()}),500)}));case 30:return l.render(),t.next=33,new Promise((function(e){setTimeout((function(){e()}),500)}));case 33:return t.next=35,f.takeContentScreenshotAsync(d._options.width||1024,d._options.height||1024);case 35:a.previewFile=t.sent,e();case 37:case"end":return t.stop()}}),t,null,[[9,22,25,28]])}))))}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getPreviewsAsync",value:function(){var e=h(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.createLocalEngine(),t=new g,e.next=4,this.createScenePreviewFileAsync(this._rootUrl,this._scene,t);case 4:return this.disposeHostingScene(),this.disposeLocalEngine(),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disposeLocalEngine",value:function(){this._localEngine&&this._localEngine.dispose()}},{key:"disposeHostingScene",value:function(){this._hostingSceneHelper&&(this._hostingSceneHelper.dispose(),this._hostingSceneHelper=null),this._hostingScene&&(this._hostingScene.dispose(),this._hostingScene=null)}}]),e}()},"../../3D/src/Components/SceneToBlobs/SceneToBlobs.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{SceneToBlobs:function(){return f}});var r=n("../../3D/src/Misc/WorkerPool.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){return"function"===typeof importScripts?(importScripts(e),Promise.resolve()):new Promise((function(t,n){BABYLON.Tools.LoadScript(e,(function(){t()}),(function(e){n(new Error(e))}))}))}function u(e){if(0==e.length)return Promise.resolve();for(var t=[],n=0;n<e.length;n++)t.push(s(e[n]));return new Promise((function(e){Promise.all(t).then((function(){return e()}))}))}function c(e,t){return e?e.match(new RegExp(".[^]{1,"+t+"}","g")):null}function l(e,t,n){var r="scene_"+t+".babylon",i=e,a=[];if(i.length<=5e6){var o=!1;i.length>180&&i.length<=1e6&&(i=LZString.compressToUint8Array(i),r="compressed_"+r,o=!0);var s=null;if(o){var u=i.buffer;s=new Blob([u])}else s=new Blob([i],{type:"text/plain"});s&&a.push({name:r,blob:s})}else{var l=c(i,8e5);if(l)for(var h=0;h<l.length;h++){var f=l[h],d=r+"_part_"+h,p=!1;f.length>180&&(f=LZString.compressToUint8Array(f),d="compressed_"+d,p=!0);var g=null;if(p){var v=f.buffer;g=new Blob([v])}else g=new Blob([f],{type:"text/plain"});g&&a.push({name:d,blob:g}),n(h/l.length*100)}}return a}function h(){var e;onmessage=function(t){var n=t.data;switch(n.id){case"init":var r=n.urls;e=u(r),postMessage("done");break;case"makeBlobs":if(!e)throw new Error("Worker not initialized");e.then((function(){var e=l(n.json,n.version,(function(e){postMessage({id:"progress",perc:e})}));postMessage({id:"result",blobInfos:e}),postMessage("done")}))}}}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DefaultNumWorkers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=["/Scripts/libs/lz-string/base64-string.js","/Scripts/libs/lz-string/lz-string.min.js"].map((function(e){return function(e){return"object"!==("undefined"===typeof document?"undefined":o(document))||"string"!==typeof e?e:BABYLON.Tools.GetAbsoluteUrl(e)}(e)}));if(t&&"function"===typeof Worker){for(var i="".concat(s).concat(u).concat(c).concat(l,"(").concat(h,")()"),a=URL.createObjectURL(new Blob([i],{type:"application/javascript"})),f=new Array(t),d=0;d<f.length;d++)f[d]=new Promise((function(e,t){var r=new Worker(a),i=function e(n){r.removeEventListener("error",e),r.removeEventListener("message",o),t(n)},o=function t(n){"done"===n.data&&(r.removeEventListener("error",i),r.removeEventListener("message",t),e(r))};r.addEventListener("error",i),r.addEventListener("message",o),r.postMessage({id:"init",urls:n})}));this._workerPoolPromise=Promise.all(f).then((function(e){return new r.WorkerPool(e)}))}}var t,n,a;return t=e,n=[{key:"dispose",value:function(){}},{key:"whenReadyAsync",value:function(){return this._workerPoolPromise?this._workerPoolPromise.then((function(){})):Promise.resolve()}},{key:"getSceneBlobsAsync",value:function(e,t,n){if(this._workerPoolPromise)return this._workerPoolPromise.then((function(r){return new Promise((function(i,a){r.push((function(r,o){var s=[],u=function e(t){r.removeEventListener("error",e),r.removeEventListener("message",c),a(t),o()},c=function e(t){"done"===t.data?(r.removeEventListener("error",u),r.removeEventListener("message",e),i(s),o()):"progress"===t.data.id?n(t.data.perc):"result"===t.data.id&&(s=t.data.blobInfos)};r.addEventListener("error",u),r.addEventListener("message",c),r.postMessage({id:"makeBlobs",json:e,version:t})}))}))}));throw new Error("SceneToBlob worker is not available")}}],a=[{key:"GetDefaultNumWorkers",value:function(){return"object"===("undefined"===typeof navigator?"undefined":o(navigator))&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),2):1}},{key:"Default",get:function(){return e._Default||(e._Default=new e),e._Default}}],n&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();a(f,"DefaultNumWorkers",f.GetDefaultNumWorkers()),a(f,"_Default",null)},"../../3D/src/Components/Selector/ElementSelector.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{ElementSelector:function(){return i}});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getSubmeshIdx",value:function(e){var t=e.lastIndexOf("-");if(-1!=t){e=e.substring(0,t);var n=Number(e.substring(t+1));if(n&&!isNaN(n))return n}return null}},{key:"getRegExp",value:function(e,t){if((t&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var n=e.lastIndexOf("-");if(-1!=n){e=e.substring(0,n);var r=Number(e.substring(n+1));r&&isNaN(r)}}return new RegExp(this.escapeRegExp(e).replace(/\\\*/g,".*"),"i")}},{key:"getElements",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u,l=this.getRegExp(u,i);if((i&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){var h=this.getMeshes(e,t,n,l,c);Array.prototype.push.apply(a,h)}if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var f=this.getSubmeshIdx(c);if(f){var d=this.getSubMeshes(e,t,n,l,c,f);Array.prototype.push.apply(a,d)}}if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var p=this.getMaterials(e,t,n,l,c);Array.prototype.push.apply(a,p)}if((i&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){var g=this.getLights(e,t,n,l,c);Array.prototype.push.apply(a,g)}if((i&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){var v=this.getCameras(e,t,n,l,c);Array.prototype.push.apply(a,v)}if((i&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){var m=this.getCameraLocations(e,t,n,l);Array.prototype.push.apply(a,m)}}return a}},{key:"getMeshElements",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u,l=this.getRegExp(u,i);if((i&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){var h=this.getMeshes(e,t,n,l,c);Array.prototype.push.apply(a,h)}}return a}},{key:"getSubMeshElements",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u,l=this.getRegExp(u,i);if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var h=this.getSubmeshIdx(c);if(h){var f=this.getSubMeshes(e,t,n,l,c,h);Array.prototype.push.apply(a,f)}}}return a}},{key:"getMaterialElements",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u,l=this.getRegExp(u,i);if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var h=this.getMaterials(e,t,n,l,c);Array.prototype.push.apply(a,h)}}return a}},{key:"getLightElements",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u,l=this.getRegExp(u,i);if((i&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){var h=this.getLights(e,t,n,l,c);Array.prototype.push.apply(a,h)}}return a}},{key:"getCameraElements",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u,l=this.getRegExp(u,i);if((i&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){var h=this.getCameras(e,t,n,l,c);Array.prototype.push.apply(a,h)}}return a}},{key:"getCameraLocationElements",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=this.getRegExp(u,i);if((i&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){var l=this.getCameraLocations(e,t,n,c);Array.prototype.push.apply(a,l)}}return a}},{key:"getOffloadedElementIDs",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u;if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var l=u.lastIndexOf("-");if(-1!=l){c=u.substring(0,l);var h=Number(u.substring(l+1));h&&isNaN(h)}}var f=new RegExp(this.escapeRegExp(c).replace(/\\\*/g,".*"),"i");if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var d=this.getOffloadedMaterialIDs(e,t,n,f,c);Array.prototype.push.apply(a,d)}}return a}},{key:"getDelayedElementIDs",value:function(e,t,n,r,i){for(var a=[],o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u;if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var l=u.lastIndexOf("-");if(-1!=l){c=u.substring(0,l);var h=Number(u.substring(l+1));h&&isNaN(h)}}var f=new RegExp(this.escapeRegExp(c).replace(/\\\*/g,".*"),"i");if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var d=this.getDelayedMaterialIDs(e,t,n,f,c);Array.prototype.push.apply(a,d)}}return a}},{key:"getMeshes",value:function(e,t,n,r,i){var a=[];if(t&&t instanceof BABYLON.Scene)for(var o=0;o<t.meshes.length;o++){var s=t.meshes[o];(s.name&&r.test(s.name)||s.id&&s.id==i)&&this.verifyFilter(s.id,n)&&a.push(s)}return a}},{key:"getSubMeshes",value:function(e,t,n,r,i,a){var o=[];if(t&&t instanceof BABYLON.Scene)for(var s=0;s<t.meshes.length;s++){var u=t.meshes[s];(u.name&&r.test(u.name)||u.id&&u.id==i)&&this.verifyFilter(u.id,n)&&a<u.subMeshes.length&&a>=0&&o.push(u.subMeshes[a])}return o}},{key:"getMaterials",value:function(e,t,n,r,i){var a=[];if(t&&t instanceof BABYLON.Scene)for(var o=0;o<t.materials.length;o++){var s=t.materials[o];(s.name&&r.test(s.name)||s.id&&s.id==i||s.metadata&&!s.metadata.isRealMaterial&&s.metadata.originalMaterialID==i)&&this.verifyFilter(s.id,n)&&a.push(s)}return a}},{key:"getOffloadedMaterialIDs",value:function(e,t,n,r,i){var a=[];if(t&&t instanceof BABYLON.Scene&&t.metadata&&t.metadata.offloadedMaterials)for(var o in t.metadata.offloadedMaterials){var s=t.metadata.offloadedMaterials[o];(s.name&&r.test(s.name)||o&&o==i)&&this.verifyFilter(o,n)&&a.push(o)}return a}},{key:"getDelayedMaterialIDs",value:function(e,t,n,r,i){var a=[];if(t&&t instanceof BABYLON.Scene&&t.metadata&&t.metadata.delayedMaterials)for(var o in t.metadata.delayedMaterials){var s=t.metadata.delayedMaterials[o];(s.name&&r.test(s.name)||o&&o==i)&&this.verifyFilter(o,n)&&a.push(o)}return a}},{key:"getLights",value:function(e,t,n,r,i){var a=[];if(t&&t instanceof BABYLON.Scene)for(var o=0;o<t.lights.length;o++){var s=t.lights[o];(s.name&&r.test(s.name)||s.id&&s.id==i)&&this.verifyFilter(s.id,n)&&a.push(s)}return a}},{key:"getCameras",value:function(e,t,n,r,i){var a=[];if(t&&t instanceof BABYLON.Scene)for(var o=0;o<t.cameras.length;o++){var s=t.cameras[o];(s.name&&r.test(s.name)||s.id&&s.id==i)&&this.verifyFilter(s.id,n)&&a.push(s)}return a}},{key:"getCameraLocations",value:function(e,t,n,r){var i=[];if(e&&e instanceof Zakeke.Scene)for(var a=0;a<e.get("cameraLocations").length;a++){var o=e.get("cameraLocations").at(a),s=o.getLocationID(),u=o.get("name");(u&&r.test(u)||s&&r.test(s))&&this.verifyFilter(s,n)&&i.push(o)}return i}},{key:"getYesNoElements",value:function(e,t,n,r,i){for(var a={yes:[],no:[]},o=r.split(";"),s=0;s<o.length;s++){var u=o[s],c=u,l=0;if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var h=u.lastIndexOf("-");if(-1!=h){c=u.substring(0,h);var f=Number(u.substring(h+1));f&&!isNaN(f)&&(l=f)}}var d=new RegExp(this.escapeRegExp(c).replace(/\\\*/g,".*"),"i");if((i&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){var p=this.getYesNoMeshes(e,t,n,d);Array.prototype.push.apply(a.yes,p.yes),Array.prototype.push.apply(a.no,p.no)}if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var g=this.getYesNoSubMeshes(e,t,n,d,l);Array.prototype.push.apply(a.yes,g.yes),Array.prototype.push.apply(a.no,g.no)}if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var v=this.getYesNoMaterials(e,t,n,d);Array.prototype.push.apply(a.yes,v.yes),Array.prototype.push.apply(a.no,v.no)}if((i&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){var m=this.getYesNoLights(e,t,n,d);Array.prototype.push.apply(a.yes,m.yes),Array.prototype.push.apply(a.no,m.no)}if((i&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){var y=this.getYesNoCameras(e,t,n,d);Array.prototype.push.apply(a.yes,y.yes),Array.prototype.push.apply(a.no,y.no)}if((i&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){var _=this.getYesNoCameraLocations(e,t,n,d);Array.prototype.push.apply(a.yes,_.yes),Array.prototype.push.apply(a.no,_.no)}}return a}},{key:"getYesNoMeshes",value:function(e,t,n,r){var i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(var a=0;a<t.meshes.length;a++){var o=t.meshes[a],s=i.no;(o.name&&r.test(o.name)||o.id&&r.test(o.id))&&this.verifyFilter(o.id,n)&&(s=i.yes),s.push(o)}return i}},{key:"getYesNoSubMeshes",value:function(e,t,n,r,i){var a={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(var o=0;o<t.meshes.length;o++){var s=t.meshes[o];if((s.name&&r.test(s.name)||s.id&&r.test(s.id))&&this.verifyFilter(s.id,n)&&s.subMeshes)for(var u=0;u<s.subMeshes.length;u++)u==i?a.yes.push(s.subMeshes[u]):a.no.push(s.subMeshes[u])}return a}},{key:"getYesNoMaterials",value:function(e,t,n,r){var i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(var a=0;a<t.materials.length;a++){var o=t.materials[a];(o.name&&r.test(o.name)||o.id&&r.test(o.id))&&this.verifyFilter(o.id,n)?i.yes.push(o):i.no.push(o)}return i}},{key:"getYesNoLights",value:function(e,t,n,r){var i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(var a=0;a<t.lights.length;a++){var o=t.lights[a];(o.name&&r.test(o.name)||o.id&&r.test(o.id))&&this.verifyFilter(o.id,n)?i.yes.push(o):i.no.push(o)}return i}},{key:"getYesNoCameras",value:function(e,t,n,r){var i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(var a=0;a<t.cameras.length;a++){var o=t.cameras[a];(o.name&&r.test(o.name)||o.id&&r.test(o.id))&&this.verifyFilter(o.id,n)?i.yes.push(o):i.no.push(o)}return i}},{key:"getYesNoCameraLocations",value:function(e,t,n,r){var i={yes:[],no:[]};if(e&&e instanceof Zakeke.Scene)for(var a=0;a<e.get("cameraLocations").length;a++){var o=e.get("cameraLocations").at(a),s=o.getLocationID(),u=o.get("name");(u&&r.test(u)||s&&r.test(s))&&this.verifyFilter(s,n)?i.yes.push(o):i.no.push(o)}return i}},{key:"escapeRegExp",value:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},{key:"verifyFilter",value:function(e,t){return!t||0==t.length||-1!==t.indexOf(e)}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/Shadows/InnerShadow.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{InnerShadow:function(){return p}});var r=n("../../3D/src/Components/ProceduralTextures/ForegroundBackgroundProceduralTexture.ts"),i=n("../../3D/src/Components/ProceduralTextures/BlurXProceduralTexture.ts"),a=n("../../3D/src/Components/ProceduralTextures/BlurYProceduralTexture.ts"),o=n("../../3D/src/Components/ProceduralTextures/MoveProceduralTexture.ts"),s=n("../../3D/src/Components/ProceduralTextures/MultiplyProceduralTexture.ts"),u=n("../../3D/src/Components/SceneHelper.ts");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var f={};function d(){}function p(){}function g(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,s(_,"constructor",g),s(g,"constructor",p),p.displayName=s(g,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),s(_,o,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function h(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){h(a,r,i,o,s,"next",e)}function s(e){h(a,r,i,o,s,"throw",e)}o(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseTexture=t,this._size=n,this._scene=c,this._mask=new r.ForegroundBackgroundProceduralTexture("mask",this._size,this._scene,this._baseTexture),this._mask.backColor=new BABYLON.Vector3(0,0,0),this._mask.foreColor=new BABYLON.Vector3(1,1,1),this._mask.refreshRate=0,this._shadow=new r.ForegroundBackgroundProceduralTexture("shadow",this._size,this._scene,this._baseTexture),this._shadow.backColor=new BABYLON.Vector3(.1,.1,.1),this._shadow.foreColor=new BABYLON.Vector3(1,1,1),this._shadow.refreshRate=0,this._shadowBlurX=new i.BlurXProceduralTexture("shadow_blurX",this._size,this._scene,this._shadow),this._shadowBlurX.blur=5,this._shadowBlurX.refreshRate=0,this._shadowBlurY=new a.BlurYProceduralTexture("shadow_blurY",this._size,this._scene,this._shadowBlurX),this._shadowBlurY.blur=5,this._shadowBlurY.refreshRate=0,this._shadowMove=new o.MoveProceduralTexture("shadow_move",this._size,this._scene,this._shadowBlurY),this._shadowMove.offset=new BABYLON.Vector2(2.5,2.5),this._shadowMove.refreshRate=0,this._lightmap=new s.MultiplyProceduralTexture("lightmap",this._size,this._scene,this._shadowMove,this._mask),this._lightmap.refreshRate=0,this.updateParameters(u)}var t,n,c;return t=e,n=[{key:"updateParameters",value:function(e){if(e){var t=new BABYLON.Vector3(0,0,0);if(e.get("color")){var n=BABYLON.Color3.FromHexString(e.get("color"));t=new BABYLON.Vector3(n.r,n.g,n.b)}this._shadow.backColor=t;var r=1,i=135;void 0!==e.get("angle")&&null!==e.get("angle")&&(i=e.get("angle")),void 0!=e.get("distance")&&null!==e.get("distance")&&(r=e.get("distance"));var a=i*Math.PI/180;a=this.wrapPi(a);var o=Math.cos(a)*r,s=Math.sin(a)*r;this._shadowMove.offset=new BABYLON.Vector2(-o,s);var u=5;void 0!==e.get("size")&&null!==e.get("size")&&(u=Math.max(0,Math.min(100,e.get("size")))),this._shadowBlurX.blur=u,this._shadowBlurY.blur=u}}},{key:"wrapPi",value:function(e){if(Math.abs(e)>Math.PI){var t=2*Math.PI;e-=Math.floor((e+Math.PI)*(1/t))*t}return e}},{key:"dispose",value:function(){this._mask.dispose(),this._shadow.dispose(),this._shadowBlurX.dispose(),this._shadowBlurY.dispose(),this._shadowMove.dispose(),this._lightmap.dispose()}},{key:"getInnerShadowTextureAsync",value:function(){var e=f(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateAsync(t);case 2:return e.abrupt("return",this._lightmap);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAsync",value:function(){var e=f(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateParameters(n),this._baseTexture=t,e.next=4,u.SceneHelper.whenTextureIsReadyAsync(this._baseTexture);case 4:return this._mask.baseTexture=this._baseTexture,e.next=7,this._mask.isReadyAsync();case 7:return this._mask.render(),this._shadow.baseTexture=this._baseTexture,e.next=11,this._shadow.isReadyAsync();case 11:return this._shadow.render(),e.next=14,this._shadowBlurX.isReadyAsync();case 14:return this._shadowBlurX.render(),e.next=17,this._shadowBlurY.isReadyAsync();case 17:return this._shadowBlurY.render(),e.next=20,this._shadowMove.isReadyAsync();case 20:return this._shadowMove.render(),e.next=23,this._lightmap.isReadyAsync();case 23:this._lightmap.render();case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],n&&d(t.prototype,n),c&&d(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/Shadows/OuterShadow.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{OuterShadow:function(){return d}});var r=n("../../3D/src/Components/ProceduralTextures/ForegroundBackgroundProceduralTexture.ts"),i=n("../../3D/src/Components/ProceduralTextures/BlurXProceduralTexture.ts"),a=n("../../3D/src/Components/ProceduralTextures/BlurYProceduralTexture.ts"),o=n("../../3D/src/Components/ProceduralTextures/MoveProceduralTexture.ts"),s=n("../../3D/src/Components/SceneHelper.ts");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,s(_,"constructor",g),s(g,"constructor",p),p.displayName=s(g,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),s(_,o,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function l(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n,s,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._size=n,this._baseTexture=t,this._scene=u,this._shadow=new r.ForegroundBackgroundProceduralTexture("shadow",this._size,this._scene,this._baseTexture),this._shadow.backColor=new BABYLON.Vector3(1,1,1),this._shadow.foreColor=new BABYLON.Vector3(.2,.2,.2),this._shadow.refreshRate=0,this._shadowBlurX=new i.BlurXProceduralTexture("shadow_blurX",this._size,this._scene,this._shadow),this._shadowBlurX.blur=15,this._shadowBlurX.refreshRate=0,this._shadowBlurY=new a.BlurYProceduralTexture("shadow_blurY",this._size,this._scene,this._shadowBlurX),this._shadowBlurY.blur=15,this._shadowBlurY.refreshRate=0,this._shadowMove=new o.MoveProceduralTexture("shadow_move",this._size,this._scene,this._shadowBlurY),this._shadowMove.offset=new BABYLON.Vector2(2.5,2.5),this._shadowMove.refreshRate=0,this.updateParameters(s)}var t,n,u;return t=e,n=[{key:"updateParameters",value:function(e){if(e){var t=new BABYLON.Vector3(0,0,0);if(e.get("color")){var n=BABYLON.Color3.FromHexString(e.get("color"));t=new BABYLON.Vector3(n.r,n.g,n.b)}this._shadow.foreColor=t;var r=1,i=135;void 0!==e.get("angle")&&null!==e.get("angle")&&(i=e.get("angle")),void 0!=e.get("distance")&&null!==e.get("distance")&&(r=e.get("distance"));var a=i*Math.PI/180;a=this.wrapPi(a);var o=Math.cos(a)*r,s=Math.sin(a)*r;this._shadowMove.offset=new BABYLON.Vector2(-o,s);var u=5;void 0!==e.get("size")&&null!==e.get("size")&&(u=Math.max(0,Math.min(100,e.get("size")))),this._shadowBlurX.blur=u,this._shadowBlurY.blur=u}}},{key:"wrapPi",value:function(e){if(Math.abs(e)>Math.PI){var t=2*Math.PI;e-=Math.floor((e+Math.PI)*(1/t))*t}return e}},{key:"dispose",value:function(){this._shadow.dispose(),this._shadowBlurX.dispose(),this._shadowBlurY.dispose(),this._shadowMove.dispose()}},{key:"getOuterShadowTextureAsync",value:function(){var e=h(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateAsync(t);case 2:return e.abrupt("return",this._shadowMove);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAsync",value:function(){var e=h(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateParameters(n),this._baseTexture=t,e.next=4,s.SceneHelper.whenTextureIsReadyAsync(this._baseTexture);case 4:return this._shadow.baseTexture=this._baseTexture,e.next=7,this._shadow.isReadyAsync();case 7:return this._shadow.render(),e.next=10,this._shadowBlurX.isReadyAsync();case 10:return this._shadowBlurX.render(),e.next=13,this._shadowBlurY.isReadyAsync();case 13:return this._shadowBlurY.render(),e.next=16,this._shadowMove.isReadyAsync();case 16:this._shadowMove.render();case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],n&&f(t.prototype,n),u&&f(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Components/USDZ/UsdzHelper.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function a(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{UsdzHelper:function(){return u}});var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"convertGlbToUsdz",value:function(){var e=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=null;(new THREE.GLTFLoader).load(t,function(){var t=o(i().mark((function t(n){var a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.scene.updateWorldMatrix(!0,!0),a=new THREE.USDZExporter,t.next=4,a.parse(n.scene);case 4:o=t.sent,r=new Blob([o],{type:"model/vnd.usdz+zip"}),e(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],n&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Enumerations.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{EditingMode:function(){return i},EnvironmentMode:function(){return r},ZakekeEnvironment:function(){return a}});var r=function(e){return e[e.Editor=1]="Editor",e[e.Viewer=2]="Viewer",e}({}),i=function(e){return e.None="None",e.Translate="Translate",e.Rotate="Rotate",e.Scaling="Scaling",e}({}),a=function(e){return e[e.Customizer=1]="Customizer",e[e.Composer=2]="Composer",e[e.Viewer=3]="Viewer",e}({})},"../../3D/src/Helpers/debounce.ts":function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isImmediate:!1};return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=this,u=r.isImmediate&&void 0===t;void 0!==t&&clearTimeout(t),t=setTimeout((function(){t=void 0,r.isImmediate||e.apply(s,a)}),n),u&&e.apply(s,a)}}n.r(t),n.d(t,{debounce:function(){return r}})},"../../3D/src/Helpers/utils.ts":function(e,t,n){"use strict";function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,a)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,s,u){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function i(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,"next",e)}function u(e){i(o,r,a,s,u,"throw",e)}s(void 0)}))}}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{Utils:function(){return u}});var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,n=null,i=[{key:"isIPhoneX",value:function(){var e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,t=window.devicePixelRatio||1,n=window.screen.width*t,r=window.screen.height*t;return!(!e||1125!==n||2436!==r)}},{key:"isAndroid",value:function(){return/android/i.test(navigator.userAgent)}},{key:"isiOS",value:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}},{key:"isMobile",value:function(){var e=navigator.userAgent||navigator.vendor||self.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"getViewport",value:function(){var e="CSS1Compat"===document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}}},{key:"getContrastYIQ",value:function(e,t,n){return(299*e+587*t+114*n)/1e3>=128?"black":"white"}},{key:"getContrastYIQHex",value:function(e){return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"}},{key:"arrayContains",value:function(e,t){return"undefined"!==typeof t&&null!==o(t)&&function(e,t){var n,r=t!==t;return r||"function"!==typeof Array.prototype.indexOf?(n=function(e,t){var n=-1,i=-1;for(n=0;n<e.length;n++){var a=e[n];if(r&&a!==a||a===t){i=n;break}}return i},n(e,t)>-1):(n=Array.prototype.indexOf).call(e,t)>-1}(e,t)}},{key:"getColorBrightness",value:function(e){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16);return Math.sqrt(t*t*.241+n*n*.691+r*r*.068)}},{key:"isColorDark",value:function(t){return e.getColorBrightness(t)<130}},{key:"changeColorLuminosity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,r,i="#";for(r=0;r<3;r++)n=parseInt(e.substr(2*r,2),16),i+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16))).substr(n.length);return i}},{key:"cropImageTransparency",value:function(t,n,r,i){var a=new Image,o=$("<canvas>"),s=o[0],u=s.getContext("2d");a.crossOrigin="anonymous",a.onload=function(){if(o.attr({width:a.width,height:a.height}),u=s.getContext("2d")){u.drawImage(a,0,0);var t=e.removeBlanks(s,a.width,a.height,n,r);i&&i(t)}else alert("Get a real browser!")},a.src=t}},{key:"trimImageAsync",value:function(t){return new Promise((function(n,r){var i=new Image,a=$("<canvas>"),o=a[0],s=o.getContext("2d");i.crossOrigin="anonymous",i.onload=function(){if(a.attr({width:i.width,height:i.height}),s=o.getContext("2d")){s.drawImage(i,0,0);var t=e.trimCanvas(o);n(t)}else r(new Error("HTML5 Canvas not supported"))},i.src=t}))}},{key:"trimCanvas",value:function(e){var t=e.getContext("2d");if(!t)return null;var n=e.width,r=e.height,i=t.getImageData(0,0,e.width,e.height).data,a=function(e,t){return i[4*(n*t+e)+3]},o=function(e){return e<10},s=function(e){for(var t=e?1:-1,i=e?0:r-1;e?i<r:i>-1;i+=t)for(var s=0;s<n;s++)if(!o(a(s,i)))return i;return null},u=function(e){for(var t=e?1:-1,i=e?0:n-1;e?i<n:i>-1;i+=t)for(var s=0;s<r;s++)if(!o(a(i,s)))return i;return null},c=s(!0),l=s(!1),h=u(!0),f=u(!1);if(null!=c&&null!=l&&null!=h&&null!=f){var d=f-h+1,p=l-c+1,g=$("<canvas>").attr({width:d,height:p})[0],v=g.getContext("2d");return v?(v.drawImage(e,h,c,d,p,0,0,d,p),v.getImageData(0,0,g.width,g.height),g.toDataURL()):null}return null}},{key:"cropImageTransparencyAsync",value:function(t,n,r){return new Promise((function(i,a){var o=new Image,s=$("<canvas>"),u=s[0],c=u.getContext("2d");o.crossOrigin="anonymous",o.onload=function(){if(s.attr({width:o.width,height:o.height}),c=u.getContext("2d")){c.drawImage(o,0,0);var t=e.removeBlanks(u,o.width,o.height,n,r);i(t)}else a(new Error("HTML5 Canvas not supported"))},o.src=t}))}},{key:"removeBlanks",value:function(e,t,n,r,i){var a=e.getContext("2d");if(!a)return null;var o=a.getImageData(0,0,e.width,e.height).data,s=function(e,n){return o[4*(t*n+e)+3]},u=function(e){return 0===e},c=function(e){for(var r=e?1:-1,i=e?0:n-1;e?i<n:i>-1;i+=r)for(var a=0;a<t;a++)if(!u(s(a,i)))return i;return null},l=function(e){for(var r=e?1:-1,i=e?0:t-1;e?i<t:i>-1;i+=r)for(var a=0;a<n;a++)if(!u(s(i,a)))return i;return null},h=c(!0),f=c(!1),d=l(!0),p=l(!1);if(null!=h&&null!=f&&null!=d&&null!=p){var g=p-d,v=f-h,m=r,y=i,_=m/g,b=y/v,x=g*_,w=v*_;w>y&&(x=g*b,w=v*b);var k=$("<canvas>").attr({width:m,height:y})[0],S=k.getContext("2d");return S?(S.drawImage(e,d,h,g,v,(m-x)/2,(y-w)/2,x,w),S.getImageData(0,0,k.width,k.height),k.toDataURL()):null}return null}},{key:"resizeImageFromDataUri",value:function(e,t,n,r){return new Promise((function(i){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){var e=$("<canvas>")[0],o=e.getContext("2d");if(o){e.width=t,e.height=n;var s=Math.min(t/a.width,n/a.height),u=a.width*s,c=a.height*s;o.drawImage(a,0,0,a.width,a.height,(t-u+r)/2,(n-c+r)/2,u-r,c-r);var l=e.toDataURL();i(l)}},a.src=e}))}},{key:"getColorImage",value:function(e,t,n){var r=$("<canvas>");r.attr({width:t,height:n});var i=r[0],a=i.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,t,n),i.toDataURL()):null}},{key:"chunkString",value:function(e,t){return e?e.match(new RegExp(".[^]{1,"+t+"}","g")):null}},{key:"getStringHashCode",value:function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}},{key:"getAbsoluteUrl",value:function(e){var t=document.createElement("a");return t.href=e,t.href}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([r],{type:n})}},{key:"getRandomString",value:function(e,t){if("number"!==typeof e&&e<1)throw new RangeError("Length must be a positive integer!");void 0===t&&(t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");for(var n="",r=t.length,i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*r));return n}},{key:"flipImage",value:function(){var e=a(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var i=new Uint8Array(t),o=new Blob([i],{type:n}),s=(window.URL||window.webkitURL).createObjectURL(o),u=new Image;u.src=s,u.onload=a(r().mark((function t(){var i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=document.createElement("canvas"),a=i.getContext("2d"),i.width=u.width,i.height=u.height,a.translate(0,u.height),a.scale(1,-1),a.drawImage(u,0,0),i.toBlob((function(t){var n=new FileReader;n.addEventListener("loadend",(function(){var t=n.result;e(t)})),n.readAsArrayBuffer(t)}),n);case 8:case"end":return t.stop()}}),t)})))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],n&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Interfaces/IDisposable.ts":function(e,t,n){"use strict";n.r(t)},"../../3D/src/Interfaces/ISceneEditor.ts":function(e,t,n){"use strict";n.r(t)},"../../3D/src/Interfaces/ISupportInitialize.ts":function(e,t,n){"use strict";n.r(t)},"../../3D/src/Layers/AxesLayer.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{AxesLayer:function(){return a}});var a=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_axisRoot",null),i(this,"_axes",[]),this._sceneEditor=t,!t.engine)throw Error("LightsLayer requires a valid Babylon JS 3D Engine");var r=t.engine;if(!t.scene)throw Error("LightsLayer requires a valid Babylon JS 3D Scene");this._editorScene=t.scene,this._scene=new BABYLON.Scene(r),this._scene.autoClear=!1,this._scene.postProcessesEnabled=!1,this._sceneEditor.addPreUpdateListener((function(){return n.onPreUpdate()})),this._sceneEditor.addPostUpdateListener((function(){return n.onPostUpdate()})),this.createAxes()}var t,n,a;return t=e,(n=[{key:"dispose",value:function(){this._scene&&this._scene.dispose()}},{key:"onPreUpdate",value:function(){if(this._scene){var e=this._editorScene.activeCamera;if(e&&(this._scene.activeCamera=e,this._axisRoot)){var t=.03*BABYLON.Vector3.Distance(e.position,this._axisRoot.position);this._axisRoot.scaling=new BABYLON.Vector3(t,t,t),this._axisRoot.computeWorldMatrix(!0)}}}},{key:"onPostUpdate",value:function(){}},{key:"createAxes",value:function(){var e=this,t=10,n=this._scene,r=new BABYLON.Mesh("axisRoot",n);r.isVisible=this._sceneEditor.canShowAxes();var i=function(t,i,a){var o=new BABYLON.DynamicTexture("DynamicTexture",50,n,!0);o.hasAlpha=!0,o.drawText(t,5,40,"bold 36px Arial",i,"transparent",!0);var s=BABYLON.MeshBuilder.CreatePlane("TextPlane",{size:a,updatable:!0},n),u=new BABYLON.StandardMaterial("TextPlaneMaterial",n);return u.metadata={isRealMaterial:!1},u.backFaceCulling=!1,u.specularColor=new BABYLON.Color3(0,0,0),u.diffuseTexture=o,s.material=u,s.metadata={isRealMesh:!1,isAxis:!0},s.parent=r,s.isVisible=e._sceneEditor.canShowAxes(),s},a=BABYLON.Mesh.CreateLines("axisX",[BABYLON.Vector3.Zero(),new BABYLON.Vector3(t,0,0),new BABYLON.Vector3(9.5,.5,0),new BABYLON.Vector3(t,0,0),new BABYLON.Vector3(9.5,-.5,0)],n,!0);a.metadata={isRealMesh:!1,isAxis:!0},a.color=new BABYLON.Color3(1,0,0),a.parent=r,a.isVisible=this._sceneEditor.canShowAxes();var o=i("X","red",1);o.position=new BABYLON.Vector3(9,-.5,0);var s=BABYLON.Mesh.CreateLines("axisY",[BABYLON.Vector3.Zero(),new BABYLON.Vector3(0,t,0),new BABYLON.Vector3(-.5,9.5,0),new BABYLON.Vector3(0,t,0),new BABYLON.Vector3(.5,9.5,0)],n,!0);s.metadata={isRealMesh:!1,isAxis:!0},s.color=new BABYLON.Color3(0,1,0),s.parent=r,s.isVisible=this._sceneEditor.canShowAxes();var u=i("Y","green",1);u.position=new BABYLON.Vector3(0,9,-.5);var c=BABYLON.Mesh.CreateLines("axisZ",[BABYLON.Vector3.Zero(),new BABYLON.Vector3(0,0,t),new BABYLON.Vector3(0,-.5,9.5),new BABYLON.Vector3(0,0,t),new BABYLON.Vector3(0,.5,9.5)],n,!0);c.metadata={isRealMesh:!1,isAxis:!0},c.color=new BABYLON.Color3(0,0,1),c.parent=r,c.isVisible=this._sceneEditor.canShowAxes();var l=i("Z","blue",1);l.position=new BABYLON.Vector3(0,.5,9),this._axisRoot=r,this._axes.push(r,a,s,c,o,u,l)}},{key:"refresh",value:function(){for(var e=0;e<this._axes.length;e++)this._axes[e].isVisible=this._sceneEditor.canShowAxes()}},{key:"render",value:function(){this._scene&&this._scene.activeCamera&&this._scene.render()}},{key:"getScene",value:function(){return this._scene}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Layers/LightsLayer.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{LightsLayer:function(){return a}});var a=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_lightMeshes",[]),i(this,"_lightSelectedListeners",[]),this._sceneEditor=t,!t.engine)throw Error("LightsLayer requires a valid Babylon JS 3D Engine");var r=t.engine;if(!t.scene)throw Error("LightsLayer requires a valid Babylon JS 3D Scene");this._editorScene=t.scene,this._scene=new BABYLON.Scene(r),this._scene.autoClear=!1,this._scene.postProcessesEnabled=!1,this._scene.onPointerDown=this.onPointerDown,this._sceneEditorPreUpdate=function(){return n.onPreUpdate()},this._sceneEditorPostUpdate=function(){return n.onPostUpdate()},this._sceneEditor.addPreUpdateListener(this._sceneEditorPreUpdate),this._sceneEditor.addPostUpdateListener(this._sceneEditorPostUpdate)}var t,n,a;return t=e,(n=[{key:"dispose",value:function(){this._sceneEditor&&(this._sceneEditor.removePreUpdateListener(this._sceneEditorPreUpdate),this._sceneEditor.removePostUpdateListener(this._sceneEditorPostUpdate)),this._scene&&this._scene.dispose()}},{key:"onPreUpdate",value:function(){this._scene.activeCamera=this._editorScene.activeCamera}},{key:"onPostUpdate",value:function(){this._scene.getEngine();for(var e=0;e<this._lightMeshes.length;e++){var t=this._lightMeshes[e],n=this._editorScene.getLightByID(t.id);n&&this.configureLightMesh(t,n)}}},{key:"onPointerDown",value:function(e,t,n){if(t.hit&&t.pickedMesh){var r={name:t.pickedMesh.name,id:t.pickedMesh.id};this.fireLightSelectedEvent(r)}}},{key:"refresh",value:function(){this.updateLightMeshes()}},{key:"updateLightMeshes",value:function(){if(this._scene&&this._sceneEditor){for(var e=0;e<this._editorScene.lights.length;e++){var t=this._editorScene.lights[e],n=this._scene.getMeshByID(t.id);n?this.configureLightMesh(n,t):this._lightMeshes.push(this.createLightMesh(t))}for(var r=0;r<this._lightMeshes.length;r++){var i=this._lightMeshes[r];this._editorScene.getLightByID(i.id)||(i.dispose(),this._lightMeshes.splice(r--,1))}}}},{key:"createLightMesh",value:function(t){var n=new BABYLON.Texture(e._lightTexture,this._scene);n.hasAlpha=!0;var r=new BABYLON.StandardMaterial("LightMeshMaterial_"+t.id,this._scene);r.emissiveColor=BABYLON.Color3.White(),r.useAlphaFromDiffuseTexture=!0,r.disableDepthWrite=!1,r.diffuseTexture=n;var i=BABYLON.Mesh.CreatePlane(t.name,1,this._scene);return i.id=t.id,i.billboardMode=BABYLON.Mesh.BILLBOARDMODE_ALL,i.material=r,this.configureLightMesh(i,t),i}},{key:"clearLightMeshes",value:function(){if(this._scene)for(;this._lightMeshes.length>0;){var e=this._lightMeshes.pop();e&&e.dispose()}}},{key:"configureLightMesh",value:function(e,t){var n=this._editorScene.activeCamera;if(n&&e&&t){e.position=t.getAbsolutePosition();var r=.03*BABYLON.Vector3.Distance(n.position,e.position);e.scaling=new BABYLON.Vector3(r,r,r),e.computeWorldMatrix(!0),e.isVisible=this._sceneEditor.canShowLights()}}},{key:"render",value:function(){this._scene&&this._scene.render()}},{key:"getScene",value:function(){return this._scene}},{key:"fireLightSelectedEvent",value:function(e){for(var t=0;t<this._lightSelectedListeners.length;++t)this._lightSelectedListeners[t](e)}},{key:"addLightSelectedListener",value:function(e){this._lightSelectedListeners.push(e)}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(a,"_lightTexture","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALkAAAC5CAMAAABDc25uAAAC/VBMVEUAAAD6ggT5kgH6igH3nA78nwD8ogD8pQD8owD8nQD8oQD9qgD8pgD8pAD8pQD8qwD8qQD8pwD8mAD8qQD8qwD8pwD9qgD8qAH8pgD8pwD8qAD8qAD8qAH8qQD8qQD8qQD8qAD8qgD5lED9qgL6lzb6lTn6mDL6nyP6nSj6ohvMyL/5my/8qQX6pBb8pg78pwn9lCVzc3OnoZabmJC1trXBs5e/v7r1sFuoq6mwvczp6uK1t7qZl5SxsKqqo5fltnWcmJDZwZfiq1qtn4Ocl4/NpVeprana4+y7wsMAAAC+rou3nnSIiIjPmTrWqFEgICAODg4LCwsAAAAAAAAAAAD+vQP+wwb+ugL+wAT+yQP+xwb/+uf+7Qb+6Qf/+N3+5An/9tP/9Ln/9c3/7rL+6Gr/6IH+71z/85IBAQH+3lT+zgf+8gX+xAH/rAH/5Ij//O/f3dr/9LH/6Hn+4nX+72r/32X/7pn+7mL+6VL+2Qj+9ID+9mz+9mL+42z+3gn/8sb/9KD/3kz/9MD/76j/53L+6Frv7urm5eLa2db+twL///7//fb/99j/9Jn/9sb+71f/65L+91j+4EPj4d7+6WL++E793Tvr6ub/5Hz+3VvLzMz+2kT/9Kv/66f/9Ib+0ir+0wf/5GL+1jP/64v+5Ur+60XV1dPAwcH/77v+41v++kL+ziD/5FH+3jH/84z++Df/6Jj/7p/+8E/+8Dv6mzf9tg3z8u7Fx8f/7oLQ0dD/8sr/5ZH7pSf+5zr/9Kf+80X+5xb9sBT5lj3/34H+9Xj+7DD+xyv++Bj+9Q/+yA/+8yL++yL+9HL+1lL+5i/7oC/8qh/+vxL+73r+3ST+8RfZ1c3+7nP+/jP+zRT/6KD+4yS7vLz+4BfT0Mn+1j3+6SP/z3D/uSf/3W//12D+yzX+8Az/8MHHw7quqqHPzMTDvbP+xCD/1xj/zGK2sab+zj/Qxa7+0kn9sxmwsK7/1Hn/yFK9t6f49/W9ua/f0rTs38H06M0gIB9jYl8/Pj1icJHzAAAAVXRSTlMAAgUDCAsPFxIJDU8fFBpWSiMGRVkpUywdJS81Mjs+QThd/mPk8Natupv+yGyNf3T7/v77/v7dw3v86LEe1TXBzMKvnFNJZPxH0bXFUh5uakItgH0Y/skKLQAAHplJREFUeNrEl81OGlEYhtvSWhXtVEqnaqv8yG/48WromJAQhH1J0wvAwIpCegWyZ2kT2CAxYUjcNQNLtkrcuGhMegF9v+8cOUhrVX7sewZSKdBnnr7nm/HJdHlKsdmeIY7nyNILZJmzgGOBDsoLyhK9w+F49sxms+FjT3D8nzxV2A4JvUy0C4uU1WH4R7zMZ7BE+IAHPX36v8Df4F4CN1Mz8svxrCKMz/qv2f8LueJ2OGBbyJbQr5B1ZGX4RK+8RJhempfiHx1eccM3WNg1QRPsyhqysbYhskZZWVmhEyD7VJwXzM7o4H4kdCWcayJaIrAZGqxvkXcjwY94lfAVPEpD3h9XO2OzcKo3t4RtQzWowby5+QF5L0N/3txkftCTeqo92Nk71R3e586uwKVw6CZuxgY1oEHsdru3tra2ZbYQtxtnwPiAZ/PMvgx20v4o6PQ/ywPl+fMX5Ht1FbqpJOT6A6CB7HK9QV6LvKG4XDgD4IMe8FQbyc6VeZwxIxuOwSb6zTUBN2MTtIuQ7YguY0fwEuNvAR7sKD2XZpH36qO0HV/OO5OEM/dNbBINZE1zjkXTcAJMz/BCPLOTdmK3zVc7g9toZ0I4F2XITdhMzaBg93h2RDxOTacXJD3BMzvQadCQdm7MPMvOTeFLjxJO3Kwb2MB1AnFnNx4OhiKBQMDn8+E5EgzH4lGPRmcFepiHePautPOQsSnp86k4wDEJZVHgW3Dr7HonHg5FfF6zXq9bVotiWfW6afp9kWAs6iT5il1Whqb7Et2JzavrYhjytR7CZVGIGzURuqOxYADQVqvbbhhG4jqG0Wh3W1bd64+E4x4dJ2gHPHdGaYd1UfZ5gcO4bIoQ7mbfVANPPOgzTavbNgT03t7HHvJxb28vYRB+qd2qm4CPUu1ReNe2+z3XfdgYh+j63Iwvi6ZAOAouuD3aTjjiNa12gxD3Lq/OPlXzmUoKqaSbtaPO+aDH+I2uZfpDcU2Hd+xVVEa2XaKLG/e5GFfg7zYxUIRvcAe89S41ZG9w1s/nvv6ZVPb4xyVOy2i3ID7uFOysfYO1MzpfTmdODnDem9wUbjiE6+zb57XaRsLYuzpulr/enmT2yynUN7p1bySOSaPbof09tAv0BaDPfJtChDQ+BEfDIRz9jgXADd2DTob5yreF/jJXPe8ZiVK37g9FdU1oZ/R1KrssDDzNwfjiEFwIj4a8ddqUP/vlMejb6Ctnl2Bvmb4w6q4z+qbcp8r6LMEdI+CbsilOZ9hvtog7S7Jz9wngkx2wNyxvZNeuicYAXXWdJ8wMr0A8DleH4GgKGg7hDaN0Ct/AvnfIOzZr1/TH0BiFLiaMGOuznIc8VRQ4mhIPeLuG0eskv5aTDwrY81esPYQrk/01o2+g64uLy7iJEfcBM+zKTXCnHvObbaM0uAD3g4OT7fQMo+WN7Nhpn45Yn13V5e4cN+4MU1MSX3LlZIoXjvuE34iV+9oclBJt07drZ+sSfYa7dNiVxdVX68q4M+i1SkavCu5JU06eM3oc1iX6OqPTjSPIp+8K/6pMuxPg76RxT8jbSpRO8+VU5QGsFSyVSrLcwd1Y3R8X1mmu01jHb6cObvrMuoJLPua4640w3kLF07nKVEnljhICHROG0DcIfdiX6bsidydushhc8wAcxq8qyfSUqeT6vaH1bTfQqeo81aeVDnJZ8pei5AB3amEC/5lOZTKZtFr3TObGSrJ1X5Ssb4tdugp0JX1q5eiKKLnu0WNeC1Vpppogb8r1wPCHmvScPMZgNwM7ui5n4zqPxmk3KStfWlpGV7jktDu1uN8yjMtaqjkeZvo2tnCMM48mn0l+oQkTcWo6dums+oKPCuWiK+5t2p3RAM3xfio/mm9i3R3x5tE0Kz9Kia43yH1xi74sqL5MBy6Ui5I7I952ovQrlb/g5MdyK3IBK18AteKWX5FunpYSLW/suuor6/J6RNKnajlGOa5B3BWddmcXY6WZvximcFF4ePCpYdJ93H/VfVR1F+bLmujLNE1XynmuUFe0XSp5L5upjaZQK+wX9kdS4KfxxS/X9gv0fv7UddJnVPWQxtLlJlVNn7gsdNlfgfItviOPmI1E6axZU9mnhYMfBSb+d/ittIa5uEBfutQXzBdsUjkZ+Uo6+WBRymmuxKgrg1otO8y+OD5nmeozP/6Z7Ge8/3P2RpqfDNkX2qRK+hTk3HJsT1au0VzBP9HJZ1UAgQMLx90R75NrJLWf6AvNFxrqLH1BNn3yy6dULrZnkObKAMarWNkiDkYX4IeK71Ae4wuHZMchv4C/6+LYMBIt/y5tUiWdB+Pk+1Mqd5FynwXlZ7WqSLFavM4hjsPDIta/U6TFTxx8BQcaBiVcSkO6br9u+sR1ATnfsUjl3PKgCeWncPQn+gk/Dk8OT07w+PtiYnpGFLhI7UxIt0vpGIyT7lF1+aTBopSXzrPVPtYo/feT4kHx5ODkPjkoYuEjI9h9Oo4uhXQxXtZGpE+zP+UsD6PlRuJTti/yvf9d5UCsuyLfp4JvEclelUh6VOeZzoNxsj0KcBuXRe3PnYBloCz9/hHC6EP2A4mO4w5wxa3A+QurHVhpm0GuywexR1GXCcnlvRaNRJrlZhdX6R/VI5XfrJlLaxNRFMdBceEDgi5cKPjAN74+zaQx6xgJhFmYJyZZCM1SkoCBBEGJj4VWpAwKwgguUgQhg9pF0Y2LqTsX0m/g//zvnNxpNbaT+js3behkbn4M555zZ1qtYpB7EttTNWFYllC++Xhst/Dp/Bldo/NWFyYLLrkkC7sQbj1fv8FlCb/5qi3RVfEduFcjd6UL765V/7EgF/2qXHRNl/nM98BcNuaHcQ8n6/P6uXcOtizusk+6llsSSajKGVN8w7cAT9jfvOYaZbqwusxlzs5vk+USSqKz8MGPEVPfqT0/+MqK+xJkOXTAu7OyRlldcC/NXXrybDmibQiVBXstJAvMf/m+KzyxvJLxasfgs12eEuE+ccly6QvMTbqcOG6bUVJz1sQozSVZUtfPIlmchQ2KG3nXyqv7Q4Afs6A32OJN/PFPR9LlQtSMuEtPXNG5QHXPopVFirkT+O4YX3NTArxVHkpgbAc+ZsEEnMd1OekHXBlUl9NMFyb6HBVdd1s2zS8gWUDgjsHNsWhTXeVhdOftne14+xBj6o1hGIwFmDvOZ+wA0Iw00fcnNWcfOqBpLs/jLn+SeTPr7nhguDmw6rBehde23nwhhMibc2FOMXeY6Jc2JfqR5Oa6TzQN9ArSnObj0iDiNljFiLOyuqLcaTD4nqxixMHJZEBKAzFnXWSim4q+bx+LS6IbOW5acM/P1p/CQ5bPGTEPxiXD7dJtIgLWOsYE2owVYv1V24CJImCecaSNplK6X9QlmticfeiYPKw4imou4mIelgyLYG1xLWKCMcGY0misMCYx8Kk4i6REMCvMWdG5ROftReygtrRwgdJ8oxSGYavVovcWd1UmEwR/6ytmr9pq3mph0lL4M5OJlih7Ec0TF/So92tpYR+i+S+YizrJkbUymJRJo9yYDY5OWSzn1nKgRahegTmX6LXI/NA811zL+aHD0kGj0gLxzA98A1BvUM6V1Rqh6s1NIfCYlcd5NKd7BYTDjzSPdVH5PyP6f1Jzs2th75e9+TuH5kuViNEop+pKs9ysNf8FDtesuGE0qhjCII35pbhcOngwbo5rnmSB0lzL+dGUFEWaf1yvVIYiTu4Ltfu1CJhhzNZmKDyXs9B9PfxVhDr7/1Et6MZ87y7MsWv5TPFiOqgMhecxc0O+mc/j1Wzme02EDNJk4IAcr+G1Rfz56DlnrCyp+UWaHzOtKKk5V2h0D3rSmqfTxceRudAm+XZe6eV7s+n0cDiv4DRBphkaPsKcBf1iCuan1Jw3F0nMj1hz3FZY86XhsCBY804n3yE9E0pffyk4SHhCeypeIMONbDGdnpqf3I35AWuOR7hiDvViNoC58BLU2+16vd7pYBDP6/X7Xv9P8Eev53lex+sQOQUnyxwFw/ojiP8f8xnZUnw8NOJG3eApfRn9v8OjpO7VCSaI1INC8HX35naF0lxXaIbm2eJScNdgzaFC4tYvJDDkHb3pTuiu5tFkhe/Z7CZzXaG7ry1qnr3xvfCAX/Y04hnwnnnee8tvUu2mxWkgjAO4eBIFPfh+0/Ud8eNYbWjYszX5AL0UPHrtIZceUgJeHIKg9maxFdJXqEoKhlC2BOxpc8on8P88M9OJrXqI/13o7uxs/Tk7mcxL3u7l81vzs/dUGb+if53fq/tC1KX8uR5brleQI5DTufPFG2Y838nFq2632+m86ii3zh77L3bUQ13A3yh4p4O3e3XSrFuWkj8wdyIpr3T3JznminQP1fJ6wHKOkX+mDwoh/0lnudR3KEwXdZZjEND30Op3f8y4eIOL5Zi3AK7kotv1vA7lzWDAhA9vPuzyTuWHiv7+w7tdFenuDKTb63rdoGnkX55gxgW5fAagmtzMcq88+PhsJ28GkCMDb9AZyJTd2v7W0DVeZfBhoONxqMm13MwVzSy3+tL/Es3Pd/J6cuJpOocof2zwsj2CXLk1vENvQQmaps31/FxvilZazZ3TqzleE5k2bwovpHihIkSRYkfjcfjuBz6Cccjo5c+fIeg/luNsvJQNH1EGMvwmXpCU5LQmqryaQ2gFfd6soGkd6hh502f6MlxSmBL6fhSRL/PhzeTrws/G/EWUjcNxFr1b+iG7URUJZby8WZJ/fXxJys2eaIX9Fj2gY4KOYbEk7wXh7/Qw44yjH3E2hjda8GuWLhayYA59NkYVP6IsWc72IG6W5M8wKJamimjzqjtFJKdLlAeX2mxGciQPJV0GEpiEiOfz+SI+zfwFkp6eio38IhPzxXye+gK14h2c3XEY95R8BrnDSyIaWiDnHfTqu3NmCV0j+UzKe3kYx2mcpikEm80mEkWWQkd0fO4FBfyTTVacbmSWKSUmOMsBZ/nBAvpsFTlvW6hLFPuKDuRJYkl5L4+RlEKQeVwUAri/2FU5V2K4ciMtlmPASmbcze/fvnCh2o6o6S7yEr2K2aK6/7M8kXJD37A8LdCc8xUBJ/NJOfytpIuiiCHnKHrek/KE5bWn6OZmpkhyjHPVdv71gy2XHn58iilRIkSi5K1cydPNEJLvo2K9ktFkY5flw++j/nC1QfWUolocckQIgd7iFEfqDnpzt/Nf/RyXOzpG9KPCITnoSt7K15QhZ5WMRvlK03/HTycTLl2PRjP4ZdaUVovoBFfyT3fvmB2uqmcWfC8q7Yne+8RyprMckfI1yfO+CxZlqjNRr6vpiuX4zyUr4wZcywUFcO4sZjTnbl5BXj5u4W2up05tJhA/0fI202X6bn843SKr7XQ/2+kWn9/d/lrLyU7uFsN9ag8HnQWTFj0moptXPVU03eXWZRpdjr45NUv4CNPxr4LeJvnxcGjbNddtAchh7kv+RFTZ8Wv32XBrD6n+8XrdbnOTIz4Ha38aWdSYWP0kF3QzdeHVBc6gsQyFnOm60dvtY4697bluc9tosPIlZfpSh4oaU1SwtrYt67cRlmu4sGpO/+iR7iz6rOU/n1gw16gz8ylBkGu5pjfarvvUblBeHoaKHfxRtNzA8yCQcsdxcO5PTa47S8UnFkA3z0Kpc4uvjmNJ+CHdtp+5r9tMPHRTsf3afX3cKLW5hiN+gM5i9b88MOe46vD8DMmrjS7mGr324KioOyKQ8WKmG3nDct0eEQ/tXIS/yfPGfmeJvYDz07cci59vUY9aoLNUfmSR5DRf5GuUj1y40WeBpod73QX9uAbigV0VNF23bjoLy/PQU/IT4dT58RZ9fVbsLGZ04WtUP+FCPb1u+SfEDjwkL9PtNrqD3bAN3rApv2g5l9AmoigMC4KCohEMKoqP+KiV+gJRcCGC7hTctWbiG42QMAlojI+FSn0sCoLBhSSoBBMFJQoqEcQqiEGhi9FGRaJIjCa4qSFU0r3/OXOvdzKzm4x/s5CZjP3m9NxzX+fcfrj5XqvJYXAoR+zVHJwFXm7J45qmIov7REuUV3BWEZbRi0GtUGVdh659BLpy9KDZBE3svTZRTDxgBf/2ELM5qErK6hp5uV+1z26y/sQIQAbG2Wa+ohYS4BAm7h+V0fcKf7BYnT4sDpohi8nBTeCSvKJr3afOOY3+Ly034O9dWsaqBX4V1kgADl3/JtH3naG4yLLZm67oaL+CnLnviKUW/s+yIa0s0qFVSHRdzIWneARg9XT/OjTSEWCzxGLRO2IncjjE0Dlgkmzc5CyxcwL82zssbslFIlZBD3lncpBbUhal0X3USLOGIGeB4uVX09NNuzoFdPp7MPirry/vkCzgRi6kPWWTs5erwZb7BHTaRBc5UWaRhT+wrOd1MHqD0dW66OnTd9+9AjkcXbfQWsi5DewD9ru7p09bl0KZHMuh75dbA4u9fbr3dJluCU9fu+IFjD4odUewA/7l92/kLgTqVH9s6Nubl8AW4IP4CBnVkPYHIxaO5Sopd7LsP7tKhxYprqIk5w+MLhfRBx+odfSrT1qY2396dcCO/erT1x8/WtjZsK74C+xBw6hoA8W+AO0O2UzeDbkzeT5AQb2QMSJq00WhRyYmIk+eYIn0jRIWQJ88wQ2DuBlcoEdYRianaS+WohpKVojMMMv+CLz74hZpdI6MFNSrmYhQB/kDANIOVqdwxcArETlLcfM+ywiaZ+8cvyPhX4F3mT4vuiMumntaiYgtuojYX2RdvTwxMXH5qkPi+mUhfgSPkjKZrDaA5smpIVYv75pcJC5O4UpFMzIGaOSVTWZIhA5wqaOwbYZ3Ozt1H38LXBXgkp03cKuaxoUKIh+XRyyiF/KAXIwBRCNdFqCgfkNt6ZIEeYYQncrQCymTk/AkgWdGtDLqoPwyHXemJxV/Ct1abkGNtO91fzSTFOQdOQDNiSbtp3M2AH/4X/WJifu0Ya52zCECT3IoXwcvt3ZCakbhSdGfKnEJBCioFzh34XZSgAOdVG82b4O1Q3ifZh1vINAZHs9RtklOo1DuAzhFROu43ANye40L+wtNj3Kcl0IMkAA/VQfkCTY3JIx/IomLpxQ3g5N+3giRrwT8ombOi0JF5xTD1kh7irp2I5Fknb19RIohT9iF10meOKJ0+2yS3joRGdEwuF0rTS7rzmRg8c5fVPlcIEBBHegyL4p+TIHyyBFw1Vl4rSMn+JrUWalkAukV0T9LV/r+Nc+pshhnklfkHBk7ShaXoZGWtVAk/Q9Ekv1ssmpCTYg8SHLjI+ATyYqObr9nWcA3fbFsnmzy7rpPZ+mCtSf1mY1UCxlp0+yXpD7/bNbaJSQIiyxtpNy28QI/P19S4ifSAA9RKPcFposBi3e+4hwzqp6UGulTLNgDnVIX8RGqtVMnbUq1m4qcvotHwsmKRs2z1x+wVstxOqtn4Gqtjla8ZCNdhulRSNO1ahrsELEfx0+tVhpOdXAPl2q145+PQ0xNSofh4yEO5X4xYFHN02ty1Uil0XkNI6TlEmFmPy70E87RbpdKcVKp1G7DV+i6SmfFAzc0PMqhnHc/RQWRKn7y9ugZVVdsGh3D3QH8fr2SjHOGcVpk6qbbrJpUO/1BYuNLUDyRZXBunmzyubQtxL7ipclVfJGNVA1fRgEQQmBP58NpU4TXvnXw4PnDj4bD4RLUblO+9/EwQTN3PFIhcG6efjK5i/mEq0aqjL66j40OhkImng9Lpdv39uy5cuHiyTxKEYAOcqV8/iwZHNLKxT5ERDlgmWrrPb11dR7uKqNzd6SH2OzZZDyVl+SH9+w5eIjIGb1dktjx4eFENcrgAzpNhGwm9/4wMefwRXl6aIANiISdZPxRCqjhMNn8IGyeAjnF8zjXU8TzqXziBrgZfIAHLMrkM6zHE3juLtyT2j0dEJK9EEkAPhUvCW9JpZi8hCKYVOrRcBrTH5ObntExYPHLTgi+otLkPJfN6IvY0zGb1gldsEezg2fzw8O/iPzYY6CbRU6wfiKTq2hW8HKxN8CdkIspnOvuqHN2BHKFDhWyjS/79x+8cPMxivqo96/VB3OFqMRmbpCPwssx1FJjRFfr/O7DC6akA6YUejBWO//8cPj2g2vXqrnCWDmma0KSG+DBYg95OZt8novlOHfoVqOvfP1UDyp2wEd1kJ+/dekatsajmh4cig1EBbYEDwax87nG51de7oiInvuLzeg8ZESyUQc7yJ+fv3h88OHv3xWkfuyOBUGtuAEOobTPL0zu3IfzXvaOlEa7fcV+gEh2Xde1oJNch4AtuCFsUPjEUMvFDr/78KJGL1wdHZTs4Bsp5Bp28pZRbRRGiN7kxvfRPkWxtprve2tyZ22XbfRC1V1cI0UaeTtu1BOGnZxKeerGeGMkaHKLqiG7yV2Qu47pvHfUWxRnhpYbRp3Uctg8Y/Ado1Xuh1SNGQcWN17uftdLefqc6VTeRezlccMYhwwHeQPXIbo/Rtxc7zyLTN7N1orLmnS1+DKL6gHo2NPGeIs17vDzt7gj7rXKu0mjK1bPtkwoxDmc/1edK14YA8zy97xgmretBqv11kGOO1Im+Yse32wearkYl3fv6eQvdETk4t7i0G789I+9NTUWa1+5cujZg4cfgU7kY423UgAfGkLlbd/sRewr0stdBBZX7sJGl/6ycM3rF4ABfHmMVY41v3yJ16vZCpkcfSiuizvAHsI3R5euWiKPPIPJXZC7HwLIFa/5dNbvthXvR58ye3+ZFLOpLMTmxpG/619vnLUAccUcak1z0Qu5Dy/WM/QWLdi+s7eI04mBReoHYKf4jGKIsUfXr+/ZuGXhAnVUm6uQ6H5yJPyF0Ofu2rBzzcrl64t0IPQQsTtF0HQ89Pr1y/u2btq8Y744sNX9cpz7yRHvNfIJtH+rO5sdpaEwDJ8oOmriwoWJf0sZFTczbakg/8OA//9eBEuuAhpddkHSC2ivQBoSL8INq6ZraBcNCUnBwZn4ntOWgoJjYlLPvKvZzdOP93u/0y7Od+t2VRRfHDy4t5ve28MN3HgAqi+h6N/fvn0F9F5692GlJufz+efXcHEoAw9KnhA50CO/MPRb1+qiIIxLzw8ODu7dv797N53eW1c6fXf34cNHFYZtWFK+foPdeBp5JRGzxN9eLi8vLN5pUPLxVJJkuVarVPAEj1ZVAXJNzmiQaRiWlZcbN1auJUbJkyNHMkZ3LVOGmiuC3PPmc8swtcFA15XHK3pCpegDgFPyfOnOzs0QHLmSkMtjvwTReAnoV153F74ogNyfu6NRxrF1pa12e53+bNbvdHrdrtpWdH2wJG9cRnOGF7Yn5pX1C11p1aHaYnHkr5IPhyF6BN5WlCW5UdrZucHAL+CklYBXtt7jfuWVvDg6Opp4478jt0pXL8aLCZIEj9FTtE1B8HxB0b+7nncqOdB97zpBHIa7T5Le8xMvWoBjSMMCOdC/T9zTa+5npcLV1PoqiCS1tueHNOAXgEOTCSNn4CAHeq8H8qhDNSOb9a18jqTADY//0+34/74y50KKNKbfl+hQxhkqYc0Zd0AOdDebnSPQC+R8yJ10xeOqAx3lI69EwZ9E4NlQPh7BHsI5jBzoIx8Fp5OoTMI1M8mTr68QI+WqJwiIFneyKmfIPIOq07LrGXC7pknznFDs8/9xcRv91yAgr6rjvoMhGmdLPIlgF9qiQ1rvUTD9C4QAPPGCr6MzkUNx+Kk/ErbkeU9V7JHrZmz4nE0ikCe6bG573UlO7KK4Doq+iVwd2jbOA/G5BeT/nzuAz4ntWafTUVzP35TnKjV6PEMlkHPBDTXF+axPW5G64rRJJI1LRcKLUnUxA3S0YnuQyfyBHOjSeGrJZcKN6qLb64TDUnNshEuULSxclpPImI4ly5KeEm50OBY8Rw0O4ixC8H5BD+lqMPhRcSpWcLSoxFHNm31HFDzXGYAvsLMF0RckTQc48NuKZk3BbSIVn/LRnqzkjz/1XSFIxYwDt4RO78DnHTZEA25TA7jMT4MSUlWDPPfnUbawBg0nUbetm5ZkmeEkknMpwo2q7Rk49fnGPMcIZa7Xozwv8WMWUl3m+dz9nbytrkwidGmB8KPDurM1z5nN4zy3xiWOkoWQojjq9VHdZZ6H4PFXC0Y+oLmYIzypKIqeHee5Zmo2y/Ow3Ah0hcalhUFk8EWeqgqC4I1sHaIRYoR5bqA3KTYeCEaZ0mA0moQr1ZHma3kefuaCWQK3aAYbTCZfcQ6V2StRnOfxu3944gp/DJMzs1D00t99neMOHE1aB7qboWb5lTx4hVbbmiZzdEpcZc8VSmCHU2AUGomfg+15s9mso+raVC7wyc1Ubv04OT7e3xemeGNWVJxYcCQX9/ePT05+tN4SnvWhFesH1Ir1nnCtc89aW/TsPOFbb7eBfyS8681m8HeEf73Z36CzAE7IU9lYk6kVOJv4W5VqFkrSNJJUfUnOkFLFl80cVfPlWal3pHPFcvkQKhd5T8PE9RMPum6Sc/ZY0gAAAABJRU5ErkJggg==")},"../../3D/src/Misc/Database.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{Database:function(){return i}});var i=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="_idbFactory",r="undefined"!==typeof window?window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB:indexedDB,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._db=null,this._hasReachedQuota=!1,this._isSupported=!0}var t,n,i;return t=e,(n=[{key:"openAsync",value:function(){var e=this;return new Promise((function(t,n){return e.open(t,n)}))}},{key:"open",value:function(e,t){var n=this,r=function(){n._isSupported=!1,t&&t()};if(this._idbFactory)if(this._db)e&&e();else{this._hasReachedQuota=!1,this._isSupported=!0;var i=this._idbFactory.open("zakeke",1);i.onerror=function(){r()},i.onblocked=function(){Logger.info("IDB request blocked. Please reload the page."),r()},i.onsuccess=function(){n._db=i.result,e()},i.onupgradeneeded=function(e){if(n._db=e.target.result,n._db)try{n._db.createObjectStore("files",{keyPath:"fileId"})}catch(t){Logger.info("Error while creating object stores. Exception: "+t.message),r()}}}else this._isSupported=!1,t&&t()}},{key:"loadFileAsync",value:function(e){var t=this;return new Promise((function(n,r){if(t._isSupported&&t._db){var i,a="files",o=t._db.transaction([a]);o.oncomplete=function(){n(i?i.data:null)},o.onabort=function(){n(null)};var s=o.objectStore(a).get(e);s.onsuccess=function(e){i=e.target.result},s.onerror=function(){Logger.info("Error loading file "+e+" from DB."),n(null)}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),r("IndexedDB not supported or Db is not open")}))}},{key:"saveFileAsync",value:function(e,t){var n=this;return new Promise((function(r,i){if(n._isSupported){var a="files";if(!n._hasReachedQuota&&n._db){var o=n._db.transaction([a],"readwrite");o.onabort=function(e){var t=e.srcElement.error;t&&"QuotaExceededError"===t.name&&(n._hasReachedQuota=!0,i("Quota Exceeded"))},o.oncomplete=function(){Logger.info("File saved successfully"),r()};var s={fileId:e,data:t},u=o.objectStore(a).put(s);u.onsuccess=function(){},u.onerror=function(){Logger.info("Error in DB add file request in Zakeke3D.Database."),i("Error in DB add file request")}}else{var c=n._hasReachedQuota?"Quota has been reached":"Database closed";i(c)}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),i("IndexedDB not supported or Db is not open")}))}},{key:"deleteFileAsync",value:function(e){var t=this;return new Promise((function(n,r){if(t._isSupported&&t._db){var i="files",a=t._db.transaction([i]);a.oncomplete=function(){n()},a.onabort=function(){r("aborted cancellation")},a.objectStore(i).get(e).onerror=function(){Logger.info("Error deleting file "+e+" from DB."),r("Error deleting file from DB")}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),r("IndexedDB not supported or Db is not open")}))}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Misc/DefaultAssetUrls.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{DefaultAssetUrls:function(){return o}});var o=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(o,"Environment",{EnvironmentTextureName:"environmentSpecular_0af79b7524dc4cd4825eae49c5d9e22fae220fd.env",GroundTextureCDNUrl:"https://zakekecdn.azureedge.net/cdn/3d/assets/environments/backgroundGround9.png",SkyboxTextureCDNUrl:"https://zakekecdn.azureedge.net/cdn/3d/assets/environments/backgroundSkybox.dds",EnvironmentTextureCDNUrl:"https://zakekecdn.blob.core.windows.net/cdn/3d/assets/environments/environmentSpecular_0af79b7524dc4cd4825eae49c5d9e22fae220fd.env"}),a(o,"Tryon",{RootUrl:"https://zakekecdn.blob.core.windows.net/cdn/3d/assets/tryon/references/",ReferenceGlassesFrameName:"Reference Glasses Frame",ReferenceGlassesFrameFileName:"Reference_Glasses_Frame_001.json"}),a(o,"Shapes",{RootUrl:"https://zakekecdn.blob.core.windows.net/cdn/3d/assets/shapes/",RoundedCubeName:"Rounded Cube",RoundedCubeFileName:"rounded_cube.babylon",RoundedCylinderName:"Rounded Cylinder",RoundedCylinderFileName:"rounded_cylinder.babylon",MatBallName:"Mat Ball",MatBallFileName:"mat_ball.babylon",MaleHeadName:"Group48944",MaleHeadFileName:"DemoHead.babylon",FemaleHeadName:"Group12208",FemaleHeadFileName:"FemaleHead.babylon",PokemonBallName:"PokemonBall",PokemonBallFileName:"PokemonBall.babylon",ShaderBallName:"Elements",ShaderBallFileName:"ShaderBall.babylon",BootsFolder:"boots/",BootsName:"shoe",BootsFileName:"boots.incremental.babylon",SuzanneName:"Suzanne",SuzanneFileName:"suzanne.babylon",StepPyramidName:"Pyramid",StepPyramidFileName:"step-pyramid.babylon",TeapotName:"Teapot",TeapotFileName:"teapot.babylon",AlloyWheelName:"Wheel",AlloyWheelFolder:"alloy_wheel/",AlloyWheelFileName:"alloy_wheel.incremental.babylon"})},"../../3D/src/Misc/Observable.ts":function(e,t,n){"use strict";function r(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{EventState:function(){return c},MultiObserver:function(){return h},Observable:function(){return f},Observer:function(){return l}});var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;a(this,e),u(this,"skipNextObservers",!1),u(this,"mask",0),this.initalize(t,n,r,i)}return s(e,[{key:"initalize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return this.mask=e,this.skipNextObservers=t,this.target=n,this.currentTarget=r,this}}]),e}(),l=s((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a(this,e),u(this,"_willBeUnregistered",!1),u(this,"unregisterOnNextCall",!1),this.callback=t,this.mask=n,this.scope=r})),h=function(){function e(){a(this,e),u(this,"_observers",null),u(this,"_observables",null)}return s(e,[{key:"dispose",value:function(){if(this._observers&&this._observables)for(var e=0;e<this._observers.length;e++)this._observables[e].remove(this._observers[e]);this._observers=null,this._observables=null}}],[{key:"Watch",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=new e;o._observers=new Array,o._observables=t;var s,u=r(t);try{for(u.s();!(s=u.n()).done;){var c=s.value.add(n,i,!1,a);c&&o._observers.push(c)}}catch(l){u.e(l)}finally{u.f()}return o}}]),e}(),f=function(){function e(t){a(this,e),u(this,"_observers",new Array),u(this,"_onObserverAdded",null),this._eventState=new c(0),t&&(this._onObserverAdded=t)}return s(e,[{key:"observers",get:function(){return this._observers}},{key:"add",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)return null;var r=new l(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null);return r.unregisterOnNextCall=n,t?this._observers.unshift(r):this._observers.push(r),this._onObserverAdded&&this._onObserverAdded(r),r}},{key:"addOnce",value:function(e){return this.add(e,void 0,void 0,void 0,!0)}},{key:"remove",value:function(e){return!!e&&-1!==this._observers.indexOf(e)&&(this._deferUnregister(e),!0)}},{key:"removeCallback",value:function(e,t){for(var n=0;n<this._observers.length;n++){var r=this._observers[n];if(!r._willBeUnregistered&&r.callback===e&&(!t||t===r.scope))return this._deferUnregister(r),!0}return!1}},{key:"_deferUnregister",value:function(e){var t=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout((function(){t._remove(e)}),0)}},{key:"_remove",value:function(e){if(!e)return!1;var t=this._observers.indexOf(e);return-1!==t&&(this._observers.splice(t,1),!0)}},{key:"makeObserverTopPriority",value:function(e){this._remove(e),this._observers.unshift(e)}},{key:"makeObserverBottomPriority",value:function(e){this._remove(e),this._observers.push(e)}},{key:"notifyObservers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!this._observers.length)return!0;var a=this._eventState;a.mask=t,a.target=n,a.currentTarget=i,a.skipNextObservers=!1,a.lastReturnValue=e;var o,s=r(this._observers);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!u._willBeUnregistered&&(u.mask&t&&(u.scope?a.lastReturnValue=u.callback.apply(u.scope,[e,a]):a.lastReturnValue=u.callback(e,a),u.unregisterOnNextCall&&this._deferUnregister(u)),a.skipNextObservers))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}},{key:"notifyObserversWithPromise",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=Promise.resolve(e);if(!this._observers.length)return a;var o=this._eventState;return o.mask=n,o.target=r,o.currentTarget=i,o.skipNextObservers=!1,this._observers.forEach((function(r){o.skipNextObservers||r._willBeUnregistered||r.mask&n&&(a=r.scope?a.then((function(t){return o.lastReturnValue=t,r.callback.apply(r.scope,[e,o])})):a.then((function(t){return o.lastReturnValue=t,r.callback(e,o)})),r.unregisterOnNextCall&&t._deferUnregister(r))})),a.then((function(){return e}))}},{key:"notifyObserver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._eventState;r.mask=n,r.skipNextObservers=!1,e.callback(t,r)}},{key:"hasObservers",value:function(){return this._observers.length>0}},{key:"clear",value:function(){this._observers=new Array,this._onObserverAdded=null}},{key:"clone",value:function(){var t=new e;return t._observers=this._observers.slice(0),t}},{key:"hasSpecificMask",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=r(this._observers);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.mask&t||i.mask===t)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}}]),e}()},"../../3D/src/Misc/StringTools.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{StringTools:function(){return i}});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"EndsWith",value:function(e,t){return-1!==e.indexOf(t,e.length-t.length)}},{key:"StartsWith",value:function(e,t){return 0===e.indexOf(t)}},{key:"Decode",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return t}},{key:"EncodeArrayBufferToBase64",value:function(e){for(var t,n,r,i,a,o,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0,h=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);l<h.length;)i=(t=h[l++])>>2,a=(3&t)<<4|(n=l<h.length?h[l++]:Number.NaN)>>4,o=(15&n)<<2|(r=l<h.length?h[l++]:Number.NaN)>>6,s=63&r,isNaN(n)?o=s=64:isNaN(r)&&(s=64),c+=u.charAt(i)+u.charAt(a)+u.charAt(o)+u.charAt(s);return c}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Misc/WorkerPool.ts":function(e,t,n){"use strict";function r(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{WorkerPool:function(){return o}});var o=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="_pendingActions",i=new Array,r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this._workerInfos=t.map((function(e){return{worker:e,active:!1}}))}var t,n,i;return t=e,(n=[{key:"dispose",value:function(){var e,t=r(this._workerInfos);try{for(t.s();!(e=t.n()).done;)e.value.worker.terminate()}catch(n){t.e(n)}finally{t.f()}delete this._workerInfos,delete this._pendingActions}},{key:"push",value:function(e){var t,n=r(this._workerInfos);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!i.active)return void this._execute(i,e)}}catch(a){n.e(a)}finally{n.f()}this._pendingActions.push(e)}},{key:"_execute",value:function(e,t){var n=this;e.active=!0,t(e.worker,(function(){e.active=!1;var t=n._pendingActions.shift();t&&n._execute(e,t)}))}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/Polyfills/Array/Array.prototype.find.js":function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=0;i!==n;i++)if(e.call(r,this[i],i,t))return this[i]}})},"../../3D/src/Polyfills/Array/Array.prototype.includes.js":function(){Array.prototype.includes||(Array.prototype.includes=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var r,i,a=parseInt(arguments[1],10)||0;for(a>=0?r=a:(r=n+a)<0&&(r=0);r<n;){if(e===(i=t[r])||e!==e&&i!==i)return!0;r++}return!1})},"../../3D/src/Polyfills/Array/Array.prototype.map.js":function(){Array.prototype.map||(Array.prototype.map=function(e){var t,n,r;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=new Array(a),r=0;r<a;){var o,s;r in i&&(o=i[r],s=e.call(t,o,r,i),n[r]=s),r++}return n})},"../../3D/src/Polyfills/String/String.prototype.endsWith.js":function(){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})},"../../3D/src/Polyfills/String/String.prototype.startsWith.js":function(){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var n=t>0?0|t:0;return this.substring(n,n+e.length)===e}})},"../../3D/src/Viewers/MaterialEditor.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{EditorMeshType:function(){return g},MaterialEditor:function(){return v}});var r=n("../../3D/src/Viewers/SceneEditor.ts");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function o(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},c.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){return e[e.Box=0]="Box",e[e.RoundedBox=1]="RoundedBox",e[e.Sphere=2]="Sphere",e[e.Plane=3]="Plane",e[e.Cylinder=4]="Cylinder",e[e.RoundedCylinder=5]="RoundedCylinder",e[e.Torus=6]="Torus",e[e.Knot=7]="Knot",e[e.Ribbon=8]="Ribbon",e[e.Custom=9]="Custom",e}({}),v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(o,e);var t,n,r,i=h(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),p(f(t=i.call(this,e)),"_zkMaterial",null),p(f(t),"_material",null),p(f(t),"_meshType",g.Box),p(f(t),"_mesh",null),p(f(t),"_materialCreatedListeners",[]),p(f(t),"_filesInput",null),t}return t=o,n=[{key:"zkMaterial",get:function(){return this._zkMaterial}},{key:"material",get:function(){return this._material}},{key:"deleteComponents",value:function(){c(d(o.prototype),"deleteComponents",this).call(this),this.deleteEditorMaterial(),this.deleteEditorMesh()}},{key:"deleteEditorMaterial",value:function(){this._material&&(this._material.dispose(),this._material=null,this.fireMaterialCreatedEvent())}},{key:"deleteEditorMesh",value:function(){this._mesh&&(this._mesh.dispose(),this._mesh=null),this._scene&&this._sceneHelper&&this._sceneHelper.getSceneMeshes().forEach((function(e){return e.dispose()}))}},{key:"dispose",value:function(){c(d(o.prototype),"dispose",this).call(this)}},{key:"createEmptySceneAsync",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(d(o.prototype),"createEmptySceneAsync",this).call(this);case 2:return this.createEditorMaterial(void 0,"Standard"),e.next=5,this.createEditorMeshAsync();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createEditorMaterial",value:function(e,t,n){var r=null;return"ShaderMaterial"!=t?r=c(d(o.prototype),"createMaterial",this).call(this,e,t,n):(r=this.createShaderMaterial())&&(r.id=Zakeke.generateUUID(),this.checkSceneEmptyEnvironmentTexture()),this._material=r,this.setRenderingNeeded(),this.fireMaterialCreatedEvent(),r}},{key:"applyEditorMaterial",value:function(){this._material&&this._mesh&&this.applyMaterial(this._material,this._mesh)}},{key:"replaceSceneAsync",value:function(){var e=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=null,this._material&&this._zkMaterial&&(n=this._material.serialize(),r=this._zkMaterial.get("rootUrl")),this.deleteScene(),this._scene=t,e.next=7,this.setupSceneAsync();case 7:n&&r?(this._material=BABYLON.Material.Parse(n,this._scene,r),this.fireMaterialCreatedEvent()):this.createEditorMaterial(void 0,"Standard"),this.applyEditorMaterial(),this.adjustCamera(!1);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createShaderMaterial",value:function(){var e=null;if(this._scene&&this._zkMaterial&&this._zkMaterial.get("shaders")){var t=this._zkMaterial.get("name")||"ShaderMaterial - "+Zakeke.makeID(5),n={vertex:this._zkMaterial.get("shaders").get("name"),fragment:this._zkMaterial.get("shaders").get("name")},r={attributes:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Attribute),uniforms:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Uniform),samplers:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Sampler)};e=new BABYLON.ShaderMaterial(t,this._scene,n,r),this.setupShaderMaterialCameraPosition(e)}return e}},{key:"createEditorMaterialFromJson",value:function(e,t){if(this._scene){var n=JSON.parse(e);this._material=BABYLON.Material.Parse(n,this._scene,t),this._material&&this.setupShaderMaterialCameraPosition(this._material),this.checkSceneEmptyEnvironmentTexture(),this.fireMaterialCreatedEvent()}}},{key:"createEditorMeshAsync",value:function(){var e=s(a().mark((function e(){var t,n,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.deleteEditorMesh(),e.t0=this._meshType,e.next=e.t0===g.Box?4:e.t0===g.RoundedBox?6:e.t0===g.Sphere?11:e.t0===g.Plane?13:e.t0===g.Cylinder?15:e.t0===g.RoundedCylinder?17:e.t0===g.Torus?22:e.t0===g.Knot?24:e.t0===g.Ribbon?26:28;break;case 4:return this._mesh=this.createBox(null,"box"),e.abrupt("break",28);case 6:return e.next=8,this.createRoundedCubeAsync(null,"rounded box");case 8:return 1==(t=e.sent).length?this._mesh=t[0]:this._mesh=this.createGroup(null,"rounded box group",t),e.abrupt("break",28);case 11:return this._mesh=this.createSphere(null,"sphere"),e.abrupt("break",28);case 13:return this._mesh=this.createPlane(null,"plane"),e.abrupt("break",28);case 15:return this._mesh=this.createCylinder(null,"cylinder"),e.abrupt("break",28);case 17:return e.next=19,this.createRoundedCylinderAsync(null,"rounded cylinder");case 19:return 1==(n=e.sent).length?this._mesh=n[0]:(this._mesh=this.createGroup(null,"rounded cylinder group"),n.forEach((function(e){return e.parent=r._mesh}))),e.abrupt("break",28);case 22:return this._mesh=this.createTorus(null,"torus"),e.abrupt("break",28);case 24:return this._mesh=this.createKnot(null,"knot"),e.abrupt("break",28);case 26:return this._mesh=this.createRibbon(null,"ribbon"),e.abrupt("break",28);case 28:this.applyEditorMaterial(),this.adjustCamera(!1);case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setEditorMeshType",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._meshType=t,e.next=3,this.createEditorMeshAsync();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateMaterialModelAsync",value:function(){var e=s(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._zkMaterial&&this._material&&this._sceneHelper)){e.next=9;break}return e.next=3,this._sceneHelper.takeMaterialScreenshotAsync(this._material.id,500,450);case 3:t=e.sent,this._zkMaterial.set("imageData",t),(n=this._zkMaterial.get("name"))&&n!=this._material.name&&(this._material.name=n),(r=this.getEditorMaterialJson())&&this._zkMaterial.set("JSON",r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEditorMaterialJson",value:function(){if(this._scene&&this._sceneHelper&&this._material){var e=this._sceneHelper;this._scene.textures.forEach((function(t){if(e.isTextureWithUrl(t)&&t.url){var n=t.url.lastIndexOf("/");if(-1!==n&&-1!==(n=t.url.lastIndexOf("/",n-1))&&-1!=(n=t.url.lastIndexOf("/",n-1))){var r=t.url.substring(n+1);t.name=r,t.url=t.name}}}));var t=this._material.serialize();return JSON.stringify(t)}return null}},{key:"setMaterialModel",value:function(e,t){if(this._zkMaterial=e,this.deleteEditorMaterial(),this._zkMaterial&&this._zkMaterial instanceof Zakeke.Material){var n=this._zkMaterial.get("shaders");if(n){var r=n.get("name"),i=n.get("vertex"),a=n.get("fragment");r&&i&&a&&this.setupShadersStore({name:r,vertex:i,fragment:a})}var o=this._zkMaterial.get("JSON"),s=this._zkMaterial.get("rootUrl");o&&s?this.createEditorMaterialFromJson(o,s):this.createEditorMaterial(this._zkMaterial.get("name")||void 0,t),this._material&&(this._material.id=this._zkMaterial.getMaterialID())}else this.createEditorMaterial(void 0,t);this.applyEditorMaterial(),this.adjustCamera(!1),this.setupShaderMaterialsCameraPosition()}},{key:"getTexturesUploadUrl",value:function(e){return this._zkMaterial?this._zkMaterial.getTexturesUrl():""}},{key:"loadEditorMaterialTextureFiles__",value:function(e,t,n,r){this.loadTextureFiles(e,this._material,t,n,r)}},{key:"loadEditorMaterialTextureFiles",value:function(e,t,n,r){var i=this;if(this._material){var a=function(e){var t=e.lastIndexOf(".");if(-1!==t)return e.substring(t)},o=function(e,t){var n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)};if(e&&0!=e.length){var s=this.canLoadCubemap(this._material,t)&&(6==e.length||".dds"==a(e[0].name)||".hdr"==a(e[0].name)),u=[];if(s&&6==e.length){for(var c=["px","py","pz","nx","ny","nz"],l=0;l<e.length;l++){for(var h=e[l],f=-1,d=0;d<c.length;d++)if(o(h.name,c[d])){u.push(h),f=d;break}-1!==f&&c.splice(f,1)}if(0!=c.length){var p="Immagini per la cube map non valide";return r&&r(p),void Logger.info(p)}}else u.push(e[0]);for(var g=new FormData,v=0;v<u.length;v++)g.append("file-"+v,u[v]);jQuery.ajax({url:this.getTexturesUploadUrl(this._material.id),data:g,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){"[object Array]"===Object.prototype.toString.call(e)&&(s?i.setEditorMaterialCubeTextureImages(e,t):i.setEditorMaterialTextureImage(e[0],t)),n&&n()},error:function(e,t,n){r&&r("An error occurred: "+t+"nError: "+n)}})}}}},{key:"setEditorMaterialTextureImage",value:function(e,t){if(this._scene&&this._zkMaterial&&this._material&&e&&e.imageUrl&&e.fileObjectID){var n=new Zakeke.MaterialTextureImage;n.set("textureImageID",Zakeke.generateUUID()),n.set("fileObjectID",e.fileObjectID),n.set("imageUrl",e.imageUrl),this._zkMaterial.get("textureImages").push(n);var r=e.imageUrl,i=new BABYLON.Texture(r,this._scene),a=this.getMaterialTexture(this._material,t);a&&a instanceof BABYLON.Texture&&(i.uScale=a.uScale,i.vScale=a.vScale,i.uOffset=a.uOffset,i.vOffset=a.vOffset,i.uAng=a.uAng,i.vAng=a.vAng,i.level=a.level,i.coordinatesIndex=a.coordinatesIndex,i.coordinatesMode=a.coordinatesMode,i.hasAlpha=a.hasAlpha,i.wrapU=a.wrapU,i.wrapV=a.wrapV),this.applyTexture(i,this._material,t),a&&!this.isTextureUsed(a)&&a.dispose()}}},{key:"setEditorMaterialCubeTextureImages",value:function(e,t){var n=this;if(this._scene&&this._zkMaterial&&this._material&&"[object Array]"==Object.prototype.toString.call(e)){var r=null;if(1==e.length){var i=e[0];if(i.imageUrl&&i.fileObjectID){i.imageUrl.endsWith(".dds")?r=BABYLON.CubeTexture.CreateFromPrefilteredData(i.imageUrl,this._scene):i.imageUrl.endsWith(".hdr")&&(r=new BABYLON.HDRCubeTexture(i.imageUrl,this._scene,512,void 0,void 0,void 0,void 0,(function(){return n.setRenderingNeeded()})));var a=new Zakeke.MaterialTextureImage;a.set("textureImageID",Zakeke.generateUUID()),a.set("fileObjectID",i.fileObjectID),a.set("imageUrl",i.imageUrl),this._zkMaterial.get("textureImages").push(a)}}else if(6==e.length){for(var o=["px","py","pz","nx","ny","nz"],s="",u=[],c=[],l=function(e,t){var n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)},h=function(e,t){var n=e.lastIndexOf(".");if(-1!==n){var r=e.substring(0,n);if(r.endsWith("_"+t))return r.substring(0,r.length-("_"+t).length)}return null},f=function(e,t){var n=e.lastIndexOf("_"+t);return-1!==n?e.substr(n):null},d=0;d<o.length;d++)for(var p=o[d],g=0;g<e.length;g++){var v=e[g].imageUrl;if(v&&l(v,p)){u.push(v),c.push(f(v,p)),s||(s=h(v,p));break}}for(var m=0;m<e.length;m++){var y=e[m];if(y.imageUrl&&void 0!=y.fileObjectID){var _=y.imageUrl,b=y.fileObjectID,x=new Zakeke.MaterialTextureImage;x.set("textureImageID",Zakeke.generateUUID()),x.set("fileObjectID",b),x.set("imageUrl",_),this._zkMaterial.get("textureImages").push(x)}}r=new BABYLON.CubeTexture(s,this._scene,c,!1,u)}if(r){var w=this.getMaterialTexture(this._material,t);this.applyTexture(r,this._material,t),w&&!this.isTextureUsed(w)&&w.dispose()}}}},{key:"fireMaterialCreatedEvent",value:function(){for(var e=0;e<this._materialCreatedListeners.length;++e)this._materialCreatedListeners[e]()}},{key:"addMaterialCreatedListener",value:function(e){this._materialCreatedListeners.push(e)}},{key:"loadFiles",value:function(e,t,n){var r=this;if(this._engine&&this._scene&&this._sceneHelper){var i=this._engine,o=this._scene,u=this._sceneHelper;this._filesInput||(this._filesInput=new BABYLON.FilesInput(i,o,function(){var e=s(a().mark((function e(n,i){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.replaceSceneAsync(i);case 2:o=u.getSceneMeshes(),r._meshType=g.Custom,r._mesh=r.createGroup(null,"group",o),r.applyEditorMaterial(),t&&t();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),null,null,null,null,null,(function(e,t,r){n&&n(r)}))),this._filesInput&&this._filesInput.loadFiles(e)}}}],r=[{key:"createMaterialEditorAsync",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t={showGround:!1,editorBackgroundColor:"#33334c",showHighlight:!1}),n=new o(t),e.next=4,n.initAsync();case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],n&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.SceneEditor)},"../../3D/src/Viewers/SceneEditor.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{MaterialGroup:function(){return A},SceneEditor:function(){return T},SourceTaskStatus:function(){return E}});var r=n("../../3D/src/Components/Environment/EnvironmentManager.ts"),i=n("../../3D/src/Components/IncrementalFiles/IncrementalFiles.ts"),a=n("../../3D/src/Components/MaterialsPreview/MaterialsPreview.ts"),o=n("../../3D/src/Components/SceneHelper.ts"),s=n("../../3D/src/Components/SceneToBlobs/SceneToBlobs.ts"),u=n("../../3D/src/Enumerations.ts"),c=n("../../3D/src/Helpers/utils.ts"),l=n("../../3D/src/Layers/AxesLayer.ts"),h=n("../../3D/src/Layers/LightsLayer.ts"),f=n("../../3D/src/Misc/DefaultAssetUrls.ts"),d=n("../../3D/src/Viewers/SceneViewer.ts");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function g(){g=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=d.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==p(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=d,s(_,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),s(_,o,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function v(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,s,"next",e)}function s(e){v(a,r,i,o,s,"throw",e)}o(void 0)}))}}function y(){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},y.apply(this,arguments)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=S((function e(t){C(this,e),M(this,"materials",[]),M(this,"guid",Zakeke.generateUUID()),this.groupName=t})),E=function(e){return e[e.uploading=0]="uploading",e[e.progress=1]="progress",e[e.checking=2]="checking",e[e.success=3]="success",e[e.completed_success=4]="completed_success",e[e.completed_error=5]="completed_error",e}({}),T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(n,e);var t=b(n);function n(e){var r;return C(this,n),M(x(r=t.call(this,{configPreview:!0})),"_dracoEnabled",!0),M(x(r),"_dracoEncodingSpeed",5),M(x(r),"_dracoDecodingSpeed",5),M(x(r),"_envMode",u.EnvironmentMode.Editor),M(x(r),"_selectOnPick",!0),M(x(r),"_showBoundingBox",!1),M(x(r),"_editorBackgroundColor","#444444"),M(x(r),"_showGround",!0),M(x(r),"_ground",null),M(x(r),"_showLights",!1),M(x(r),"_lightsLayer",null),M(x(r),"_showAxes",!1),M(x(r),"_axesLayer",null),M(x(r),"_showHighlight",!0),M(x(r),"_highlightOver",!0),M(x(r),"_highlightOverColor","#0082ff"),M(x(r),"_editingMode",u.EditingMode.None),M(x(r),"_manipulatedNode",null),M(x(r),"_oldManipulatedNode",null),M(x(r),"_EditControl",org.ssatguru.babylonjs.component.EditControl),M(x(r),"_editControl",null),M(x(r),"_editControlVisible",!1),M(x(r),"_shiftPressed",!1),M(x(r),"_ctrlPressed",!1),M(x(r),"_realMeshVisibility",{}),M(x(r),"_sceneSourceTasks",[]),M(x(r),"_isLoadingSourceFiles",!1),M(x(r),"_preUpdateListeners",[]),M(x(r),"_postUpdateListeners",[]),M(x(r),"_meshSelectedListeners",[]),M(x(r),"_selectionChangedListeners",[]),M(x(r),"_lightSelectedListeners",[]),M(x(r),"_sceneCreatedListeners",[]),M(x(r),"_cameraLocationCreatedListeners",[]),M(x(r),"_sceneSourceTaskSuccessListeners",[]),M(x(r),"_sceneSourceTaskErrorListeners",[]),M(x(r),"_sceneSourceTasksCheckListeners",[]),M(x(r),"_meshesUpdateListeners",[]),M(x(r),"_materialsUpdateListeners",[]),M(x(r),"_lightsUpdateListeners",[]),M(x(r),"_cameraLocationsUpdateListeners",[]),M(x(r),"_meshLocationCreatedListeners",[]),M(x(r),"_meshLocationsUpdateListeners",[]),M(x(r),"_arTaskSuccessListeners",[]),M(x(r),"_arTaskErrorListeners",[]),M(x(r),"_arTasksCheckListeners",[]),M(x(r),"_initialMeshMaterials",{}),M(x(r),"_initialSubMeshMaterials",{}),M(x(r),"_lastMeshMaterials",{}),M(x(r),"_lastSubMeshMaterials",{}),M(x(r),"_meshOver",null),M(x(r),"_incrementalFilesMaker",null),M(x(r),"_sceneToBlobs",null),e&&(void 0!=e.showGround&&null!=e.showGround&&(r._showGround=e.showGround),void 0!==e.editorBackgroundColor&&null!==e.editorBackgroundColor&&(r._editorBackgroundColor=e.editorBackgroundColor),void 0!==e.showHighlight&&null!==e.showHighlight&&(r._showHighlight=e.showHighlight),void 0!==e.highlightColor&&null!==e.highlightColor&&(r._highlightColor=e.highlightColor),void 0!==e.highlightOver&&null!=e.highlightOver&&(r._highlightOver=e.highlightOver),void 0!==e.highlightOverColor&&null!=e.highlightOverColor&&(r._highlightOverColor=e.highlightOverColor)),r}return S(n,[{key:"realMeshVisibility",get:function(){return this._realMeshVisibility}},{key:"environmentManager",get:function(){return this._environmentManager}},{key:"envMode",get:function(){return this._envMode},set:function(e){this._envMode!=e&&(this._envMode=e,this.refreshEnvironment())}},{key:"sceneSourceTasks",get:function(){return this._sceneSourceTasks}},{key:"selectOnPick",get:function(){return this._selectOnPick}},{key:"seletOnPick",set:function(e){this._selectOnPick!=e&&(this._selectOnPick=e)}},{key:"showBoundingBox",get:function(){return this._showBoundingBox},set:function(e){this._showBoundingBox!=e&&(this._showBoundingBox=e,this.updateBoundingBox(),this.setRenderingNeeded())}},{key:"editorBackgroundColor",get:function(){return this._editorBackgroundColor},set:function(e){this._editorBackgroundColor!=e&&this.setEditorBackgroundColor(e)}},{key:"showGround",get:function(){return this._showGround},set:function(e){this._showGround!=e&&(this._showGround=e,this.refreshGround())}},{key:"showLights",get:function(){return this._showLights},set:function(e){this._showLights!=e&&(this._showLights=e,this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded())}},{key:"showAxes",get:function(){return this._showAxes},set:function(e){this._showAxes!=e&&(this._showAxes=e,this._axesLayer&&this._axesLayer.refresh(),this.setRenderingNeeded())}},{key:"showHighlight",get:function(){return this._showHighlight},set:function(e){this._showHighlight!=e&&(this._showHighlight=e)}},{key:"highlightOver",get:function(){return this._highlightOver},set:function(e){this._highlightOver!=e&&(this._highlightOver=e)}},{key:"highlightOverColor",get:function(){return this._highlightOverColor},set:function(e){this._highlightOverColor!=e&&(this._highlightOverColor=e)}},{key:"editingMode",get:function(){return this._editingMode},set:function(e){this._editingMode!=e&&this.setEditingMode(e)}},{key:"editControlVisible",get:function(){return this._editControlVisible},set:function(e){this._editControlVisible!=e&&this.showHideEditControl(e)}},{key:"createCanvas",value:function(){var e=this,t=y(w(n.prototype),"createCanvas",this).call(this);return t.addEventListener("keydown",(function(t){e._shiftPressed="Shift"==t.key,e._ctrlPressed="Control"==t.key}),!1),t.addEventListener("keyup",(function(t){e._shiftPressed=!("Shift"==t.key),e._ctrlPressed=!("Control"==t.key)}),!1),t.addEventListener("dblclick",(function(t){e.setRenderingNeeded()})),t}},{key:"deleteComponents",value:function(){y(w(n.prototype),"deleteComponents",this).call(this),this._editControl&&(this._editControl.detach(),this._editControl=null),this._lightsLayer&&(this._lightsLayer.dispose(),this._lightsLayer=null),this._axesLayer&&(this._axesLayer.dispose(),this._axesLayer=null)}},{key:"dispose",value:function(){y(w(n.prototype),"dispose",this).call(this),this._incrementalFilesMaker&&(this._incrementalFilesMaker.dispose(),delete this._incrementalFilesMaker),this._sceneToBlobs&&(this._sceneToBlobs.dispose(),delete this._sceneToBlobs)}},{key:"createEngine",value:function(){y(w(n.prototype),"createEngine",this).call(this),BABYLON.SceneLoader.ForceFullSceneLoadingForIncremental=!0}},{key:"createEmptySceneAsync",value:function(){var e=m(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(w(n.prototype),"createEmptySceneAsync",this).call(this);case 2:this._engine&&this.fireSceneCreatedEvent();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupSceneAsync",value:function(){var e=m(g().mark((function e(){var t=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(w(n.prototype),"setupSceneAsync",this).call(this);case 2:this._engine&&this._scene&&(this._scene.setRenderingAutoClearDepthStencil(1,!0,!0,!1),this._scene.setRenderingAutoClearDepthStencil(2,!0,!0,!1),this._lightsLayer=new h.LightsLayer(this),this._lightsLayer.addLightSelectedListener((function(e){t.lightsLayer_onLightSelected(e)})),this.setupAxes(),this._zkModel&&this._meshLocationsManager&&(this._meshLocationsManager.addBeforeSaveMeshLocationListener((function(){return t.onBeforeSaveMeshLocation()})),this._meshLocationsManager.addAfterSaveMeshLocationListener((function(){return t.onAfterSaveMeshLocation()}))),this._scene.onPointerMove=function(e,n){return t.onPointerMove(e,n)});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.firePreUpdateEvent(),y(w(n.prototype),"render",this).call(this),this._lightsLayer&&this._lightsLayer.render(),this._axesLayer&&this._axesLayer.render(),this.firePostUpdateEvent()}},{key:"deleteHighlightLayer",value:function(){this._highlightLayer&&(this._highlightLayer.dispose(),this._highlightLayer=null),this.setRenderingNeeded()}},{key:"setupAntialiasPostProcesses",value:function(){this.antialias&&this.getAntialiasEnabled()&&(this.createAntialiasPostProcesses(),this.disableAntialiasing())}},{key:"canEnableAntialiasing",value:function(){return this._scene&&this._antialias&&this.getAntialiasEnabled()&&this.envMode===u.EnvironmentMode.Viewer}},{key:"setupHighlightLayerIntensity",value:function(){this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=this._highlightBlurHorizontalSize,this._highlightLayer.blurVerticalSize=this._highlightBlurVerticalSize)}},{key:"setupAxes",value:function(){this._axesLayer=new l.AxesLayer(this)}},{key:"getMatchSameNameTextures",value:function(){if(this._zkScene){var e=this._zkScene.getMatchSameNameTextures();return void 0!==e&&null!==e&&e}return!1}},{key:"setMatchSameNameTextures",value:function(e){this._zkScene&&this._zkScene.setMatchSameNameTextures(e)}},{key:"getAREnabled",value:function(){if(this._zkScene){var e=this._zkScene.getAREnabled();return void 0!==e&&null!==e&&e}return!1}},{key:"setAREnabled",value:function(e){this._zkScene&&this._zkScene.setAREnabled(e)}},{key:"getArOnTheFly",value:function(){if(this._zkScene){var e=this._zkScene.getArOnTheFly();return void 0!==e&&null!==e&&e}return!1}},{key:"setArOnTheFly",value:function(e){this._zkScene&&this._zkScene.setArOnTheFly(e)}},{key:"getTryOnEnabled",value:function(){if(this._zkScene){var e=this._zkScene.getTryOnEnabled();return void 0!==e&&null!==e&&e}return!1}},{key:"setTryOnEnabled",value:function(e){this._zkScene&&this._zkScene.setTryOnEnabled(e)}},{key:"getUseDelayedMaterialLoading",value:function(){if(this.zkScene){var e=this.zkScene.getUseDelayedMaterialLoading();return void 0!==e&&null!==e&&e}return!1}},{key:"setUseDelayedMaterialLoading",value:function(e){this._zkScene&&this._zkScene.setUseDelayedMaterialLoading(e)}},{key:"getUseDelayedTextureLoading",value:function(){if(this._zkScene){var e=this._zkScene.getUseDelayedTextureLoading();return void 0!==e&&null!==e&&e}return!1}},{key:"setUseDelayedTextureLoading",value:function(e){this._zkScene&&this._zkScene.setUseDelayedTextureLoading(e)}},{key:"getGlowEnabled",value:function(){return!!this._glowManager&&this._glowManager.enabled}},{key:"setGlowEnabled",value:function(e){this._glowManager&&(this._glowManager.enabled=e,this.setRenderingNeeded())}},{key:"getGlowIntensity",value:function(){return this._glowManager?this._glowManager.intensity:1}},{key:"setGlowIntensity",value:function(e){this._glowManager&&(this._glowManager.intensity=e,this.setRenderingNeeded())}},{key:"getGlowBlurSize",value:function(){return this._glowManager?this._glowManager.blurSize:16}},{key:"setGlowBlurSize",value:function(e){this._glowManager&&(this._glowManager.blurSize=e,this.setRenderingNeeded())}},{key:"getInfoPointsEnabled",value:function(){if(this._zkScene){var e=this._zkScene.getInfoPointsEnabled();return void 0!==e&&null!==e&&e}return!1}},{key:"setInfoPointsEnabled",value:function(e){this._zkScene&&this._zkScene.setInfoPointsEnabled(e),this.refreshInfoPoints()}},{key:"getInfoPointsBorderColor",value:function(){if(this._zkScene){var e=this._zkScene.getInfoPointsBorderColor();return void 0===e||null===e?"":e}return""}},{key:"setInfoPointsBorderColor",value:function(e){this._zkScene&&(this._zkScene.setInfoPointsBorderColor(e),this.refreshInfoPoints())}},{key:"getInfoPointsInnerPointColor",value:function(){if(this._zkScene){var e=this._zkScene.getInfoPointsInnerPointColor();return void 0===e||null===e?"":e}return""}},{key:"setInfoPointsInnerPointColor",value:function(e){this._zkScene&&(this._zkScene.setInfoPointsInnerPointColor(e),this.refreshInfoPoints())}},{key:"getInfoPointsColor",value:function(){if(this._zkScene){var e=this._zkScene.getInfoPointsColor();return void 0===e||null===e?"":e}return""}},{key:"setInfoPointsColor",value:function(e){this._zkScene&&(this._zkScene.setInfoPointsColor(e),this.refreshInfoPoints())}},{key:"getInfoPointsHighlightColor",value:function(){if(this._zkScene){var e=this._zkScene.getInfoPointsHighlightColor();return void 0===e||null===e?"":e}return""}},{key:"setInfoPointsHighlightColor",value:function(e){this._zkScene&&(this._zkScene.setInfoPointsHighlightColor(e),this.refreshInfoPoints())}},{key:"enableGlowForMesh",value:function(e){this._glowManager&&this._glowManager.enableGlowForMesh(e)}},{key:"disableGlowForMesh",value:function(e){this._glowManager&&(this._glowManager.disableGlowForMesh(e),this.setRenderingNeeded())}},{key:"enableARForMesh",value:function(e){e&&(e.metadata||(e.metadata={}),e.metadata.AR=!0)}},{key:"disableARForMesh",value:function(e){e&&(e.metadata||(e.metadata={}),e.metadata.AR=!1)}},{key:"disableTryOnForMesh",value:function(e){var t=this;e&&(e.metadata||(e.metadata={}),e.metadata.TryOn=!1,e.getChildMeshes().forEach((function(e){return t.disableTryOnForMesh(e)})))}},{key:"enableTryOnForMesh",value:function(e){var t=this;e&&(e.metadata||(e.metadata={}),e.metadata.TryOn=!0,e.getChildMeshes().forEach((function(e){return t.enableTryOnForMesh(e)})))}},{key:"enableInfoPointsForMesh",value:function(e){e&&(e.metadata||(e.metadata={}),e.metadata.showInfoPoints=!0,this.refreshInfoPoints())}},{key:"disableInfoPointsForMesh",value:function(e){e&&e.metadata&&void 0!==e.metadata.showInfoPoints&&null!==e.metadata.showInfoPoints&&(delete e.metadata.showInfoPoints,this.refreshInfoPoints())}},{key:"enableForcedInfoPointsVisibilityOnMesh",value:function(e){e&&(e.metadata||(e.metadata={}),e.metadata.forceShowInfoPoints=!0,this.refreshInfoPoints())}},{key:"disableForcedInfoPointsVisibilityOnMesh",value:function(e){e&&e.metadata&&void 0!==e.metadata.forceShowInfoPoints&&null!==e.metadata.forceShowInfoPoints&&(delete e.metadata.forceShowInfoPoints,this.refreshInfoPoints())}},{key:"setEditorBackgroundColor",value:function(e){this._editorBackgroundColor=e,this.refreshEnvironment()}},{key:"setViewerBackgroundAlpha",value:function(e){this._zkScene&&(this._zkScene.getOrCreateGeneralConfig().set("backgroundAlpha",e),this.refreshEnvironment())}},{key:"setViewerBackgroundColor",value:function(e){this._zkScene&&(this._zkScene.getOrCreateGeneralConfig().set("backgroundColor",e),this.refreshEnvironment())}},{key:"setViewerEnvironmentSizeAuto",value:function(e){this._zkScene&&(this._zkScene.getOrCreateEnvironmentConfig().set("sizeAuto",e),this.refreshEnvironment())}},{key:"setViewerEnvironmentMainColor",value:function(e){this._zkScene&&(this._zkScene.getOrCreateEnvironmentConfig().set("mainColor",e),this.refreshEnvironment())}},{key:"setViewerSkyboxCreateSkybox",value:function(e){this._zkScene&&(this._zkScene.getOrCreateSkyboxConfig().set("createSkybox",e),this.refreshEnvironment())}},{key:"setViewerSkyboxSize",value:function(e){this._zkScene&&(this._zkScene.getOrCreateSkyboxConfig().set("size",e),this.refreshEnvironment())}},{key:"setViewerSkyboxBlur",value:function(e){if(this._zkScene){var t=e>=0?e:0;this._zkScene.getOrCreateSkyboxConfig().set("blur",t),this.refreshEnvironment()}}},{key:"setViewerSkyboxTexture",value:function(e,t,n){if(this._zkScene&&void 0!=e&&"string"===typeof e){var r=this._zkScene.getOrCreateSkyboxConfig();r.set("texture",e),r.set("extensions",t),r.set("files",n),this.refreshEnvironment()}}},{key:"removeViewerSkyboxTexture",value:function(){if(this._zkScene){var e=this._zkScene.getSkyboxConfig();e&&void 0!=e.get("texture")&&(e.unset("texture"),this.refreshEnvironment())}}},{key:"setViewerSkyboxColor",value:function(e){this._zkScene&&void 0!=e&&"string"===typeof e&&(this._zkScene.getOrCreateSkyboxConfig().set("color",e),this.refreshEnvironment())}},{key:"setViewerGroundCreateGround",value:function(e){this._zkScene&&void 0!=e&&"boolean"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("createGround",e),this.refreshEnvironment())}},{key:"setViewerGroundSize",value:function(e){this._zkScene&&(this._zkScene.getOrCreateGroundConfig().set("size",e),this.refreshEnvironment())}},{key:"setViewerGroundTexture",value:function(e){this._zkScene&&void 0!=e&&"string"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("texture",e),this.refreshEnvironment())}},{key:"removeViewerGroundTexture",value:function(){if(this._zkScene){var e=this._zkScene.getGroundConfig();e&&void 0!=e.get("texture")&&(e.unset("texture"),this.refreshEnvironment())}}},{key:"setViewerGroundColor",value:function(e){this._zkScene&&void 0!=e&&"string"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("color",e),this.refreshEnvironment())}},{key:"setViewerGroundOpacity",value:function(e){this._zkScene&&void 0!=e&&"number"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("opacity",e),this.refreshEnvironment())}},{key:"setViewerGroundEnableShadow",value:function(e){this._zkScene&&void 0!=e&&"boolean"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("enableShadow",e),this.refreshEnvironment())}},{key:"setViewerGroundShadowLevel",value:function(e){this._zkScene&&void 0!=e&&"number"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("shadowLevel",e),this.refreshEnvironment())}},{key:"setViewerGroundEnableMirror",value:function(e){this._zkScene&&void 0!=e&&"boolean"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("enableMirror",e),this.refreshEnvironment())}},{key:"setViewerGroundMirrorBlur",value:function(e){this._zkScene&&void 0!=e&&"number"===typeof e&&(this._zkScene.getOrCreateGroundConfig().set("mirrorBlurKernel",e),this.refreshEnvironment())}},{key:"setViewerCameraAutoRotate",value:function(e){this._zkScene&&void 0!=e&&"boolean"===typeof e&&(this._zkScene.getOrCreateCameraConfig().set("autoRotate",e),this.autoRender=e,this.refreshEnvironment())}},{key:"setViewerCameraContrast",value:function(e){this._zkScene&&void 0!=e&&"number"===typeof e&&(this._zkScene.getOrCreateCameraConfig().set("contrast",e),this.refreshEnvironment())}},{key:"setViewerCameraExposure",value:function(e){this._zkScene&&void 0!=e&&"number"===typeof e&&(this._zkScene.getOrCreateCameraConfig().set("exposure",e),this.refreshEnvironment())}},{key:"setViewerCameraToneMappingEnabled",value:function(e){this._zkScene&&void 0!=e&&"boolean"===typeof e&&(this._zkScene.getOrCreateCameraConfig().set("toneMappingEnabled",e),this.refreshEnvironment())}},{key:"resetEditorEnvironment",value:function(){this.resetEditorBackground(),this.resetEditorCamera(),this.setRenderingNeeded()}},{key:"resetEditorBackground",value:function(){this._scene&&(this._scene.clearColor=BABYLON.Color3.FromHexString(this._editorBackgroundColor).toColor4(),this.refreshGround(),this.setRenderingNeeded())}},{key:"resetEditorCamera",value:function(){if(this._scene){var e=this._scene.activeCamera;e instanceof BABYLON.ArcRotateCamera&&(e.useAutoRotationBehavior=!1),this._autoRender=!1,this.setRenderingNeeded()}}},{key:"preSceneContentScreenshot",value:function(){this.resetEditorEnvironment(),this.removeGround()}},{key:"postSceneContentScreenshot",value:function(){}},{key:"preSceneMaterialScreenshot",value:function(){y(w(n.prototype),"preSceneMaterialScreenshot",this).call(this),this.adjustSceneForSerialization()}},{key:"postSceneMaterialScreenshot",value:function(){y(w(n.prototype),"postSceneMaterialScreenshot",this).call(this)}},{key:"sceneReadyForSave",value:function(){if(this._scene)for(var e=0;e<this._scene.meshes.length;e++)if(!this._scene.meshes[e].isReady())return!1;return!0}},{key:"isCurrentCameraPivot",value:function(e){if(this._sceneHelper){var t=this._sceneHelper.getCameraPivot();return t&&t.id===e}return!1}},{key:"getCurrentCameraPivotID",value:function(){if(this._scene&&this._sceneHelper){var e=this._sceneHelper.getCameraPivot();if(e){var t=this._scene.getMeshByID(e.id);if(t)return t.id}}return null}},{key:"setCameraPivot",value:function(e){if(this._scene&&this._sceneHelper){for(var t=0;t<this._scene.meshes.length;t++){var n=this._scene.meshes[t];n.metadata&&void 0!=n.metadata.isCameraPivot&&delete n.metadata.isCameraPivot}if(e){var r=this._scene.getMeshByID(e);r&&(r.metadata=r.metadata||{},r.metadata.isCameraPivot=!0),this._sceneHelper.setCameraPivot(r||null)}else this._sceneHelper.setCameraPivot(null)}}},{key:"getBlobFromEmbeddedTextureAsync",value:function(){var e=m(g().mark((function e(t){var n,r,i,a,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!t.url){e.next=16;break}if(r=t.url,i="data:"===r.substring(0,5),a="blob:"===r.substring(0,5),o=i&&-1!==r.indexOf(";base64,"),!(i&&t._buffer&&(t._buffer instanceof ArrayBuffer||t._buffer instanceof Uint8Array||t._buffer instanceof Blob))){e.next=10;break}t._buffer instanceof Blob?n=t._buffer:t._buffer instanceof Uint8Array?n=new Blob([t._buffer],{type:t.mimeType}):t._buffer instanceof ArrayBuffer&&(n=new Blob([new Uint8Array(t._buffer)],{type:t.mimeType})),e.next=16;break;case 10:if(!a){e.next=15;break}return e.next=13,new Promise((function(e){var t=new XMLHttpRequest;t.open("GET",r,!0),t.responseType="blob",t.onload=function(t){200==this.status&&e(this.response)},t.send()}));case 13:e.next=16;break;case 15:o&&(s=new Uint8Array(BABYLON.Tools.DecodeBase64(r)),n=new Blob([s],{type:t.mimeType}));case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadEmbeddedTexturesAsync",value:function(){var e=m(g().mark((function e(t){var n,r,i,a,o=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],this._zkScene&&this._scene&&this._sceneHelper&&(this._scene,this._zkScene,r=this._sceneHelper,this.getAllMaterials().forEach((function(e){e.getActiveTextures().filter((function(e){return e instanceof BABYLON.Texture})).forEach((function(t){if(t.url){var i="data:"===t.url.substring(0,5),a="blob:"===t.url.substring(0,5),o=i&&-1!==t.url.indexOf(";base64,");if(i||a||o){var s=r.getMaterialTextureType(e,t);s&&n.push({texture:t,material:e,type:s})}}}))}))),i=g().mark((function e(){var r,i,s,u,c,l,h,f,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[a],i=r.texture,e.next=4,o.getBlobFromEmbeddedTextureAsync(i);case 4:if(!(s=e.sent)){e.next=20;break}return u=".png","image/jpeg"===i.mimeType&&(u=".jpg"),c=r.type.replace(" ","_"),l="".concat(c).concat(u),h=new File([s],l),e.next=13,o.uploadTextureFileAsync(h,r.material);case 13:if(!(f=e.sent)){e.next=19;break}if(!(d=f.get("url"))){e.next=19;break}return e.next=19,new Promise((function(e,t){i.updateURL(d,void 0,(function(){return e()}),(function(){return t()}))}));case 19:t&&t(a/n.length*100,"textures");case 20:case"end":return e.stop()}}),e)})),a=0;case 5:if(!(a<n.length)){e.next=10;break}return e.delegateYield(i(),"t0",7);case 7:a++,e.next=5;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"useIncrementalLoading",value:function(){return!!(this._sceneHelper&&this._sceneHelper.getTotalVertices()+this._sceneHelper.getTotalIndices()>=1e3)}},{key:"updateSceneModel",value:function(e,t,n){var r=this;if(this._zkScene&&this._scene){this._scene;var i=this._zkScene;this.resetRealVisibility();var a=this.infoPointsShown;a&&this.hideInfoPoints(),this.uploadEmbeddedTexturesAsync((function(e,t){n&&n(e,t)})).then((function(){r.getSceneScreenshotAsync(500,450).then((function(o){a&&r.showInfoPoints(),i.set("imageData",o),i.set("version",i.get("version")+1),r.useIncrementalLoading()?r.uploadSceneIncrementalFiles((function(t){r.onUploadScenFileSuccess(t),e&&e()}),(function(e){t&&t(e)}),(function(e){n&&n(e)})):r.uploadSceneFile((function(t){r.onUploadScenFileSuccess(t),e&&e()}),(function(e){t&&t(e)}),(function(e,t){n&&n(e,t)}))}))})).catch((function(e){t&&t(e)}))}}},{key:"onUploadScenFileSuccess",value:function(e){this._zkScene&&e&&(e.hasOwnProperty("fileObjectID")||e.hasOwnProperty("fileLength"))&&e.hasOwnProperty("rootUrl")&&e.hasOwnProperty("sceneFileName")&&(e.hasOwnProperty("manifestFileObjectID")||e.hasOwnProperty("manifestFileLength"))&&(e.hasOwnProperty("incrementalsFileObjectID")||e.hasOwnProperty("incrementalsFileLength"))?(this._zkScene.set("fileObjectID",e.fileObjectID),this._zkScene.set("fileLength",e.fileLength),this._zkScene.set("url",e.url),this._zkScene.set("rootUrl",e.rootUrl),this._zkScene.set("sceneFileName",e.sceneFileName),this._zkScene.set("manifestFileObjectID",e.manifestFileObjectID),this._zkScene.set("manifestFileLength",e.manifestFileLength),this._zkScene.set("manifestFileUrl",e.manifestFileUrl),this._zkScene.set("incrementalsFileObjectID",e.incrementalsFileObjectID),this._zkScene.set("incrementalsFileLength",e.incrementalsFileLength),this._zkScene.set("incrementalsFileUrl",e.incrementalsFileUrl)):Logger.info("le informazioni sul file di scena salvato sono vuote o incorrette")}},{key:"uploadSceneFile",value:function(e,t,n){if(this._scene&&this._zkScene){this._scene;var r=this._zkScene,i=r.get("version"),a=this.getSceneJson();this.getSceneFileBlobsAsync(a,i,(function(e){n&&n(e,"optimize")})).then((function(i){for(var a=new FormData,o=0;o<i.length;o++){var s=i[o];a.append("file_"+o,s.blob,s.name)}jQuery.ajax({url:r.getSceneFileUploadUrl(),data:a,cache:!1,contentType:!1,processData:!1,type:"POST",xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;n&&n(100*t,"upload")}}),!1),e},success:function(t){e&&e(t)},error:function(e,n,r){t&&t(r)}})}))}else t&&t("No scene to upload")}},{key:"getSceneFileBlobsAsync",value:function(){var e=m(g().mark((function e(t,n,r){var i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],this._sceneToBlobs||(this._sceneToBlobs=s.SceneToBlobs.Default),!this._sceneToBlobs){e.next=8;break}return e.next=5,this._sceneToBlobs.whenReadyAsync();case 5:return e.next=7,this._sceneToBlobs.getSceneBlobsAsync(t,n,r);case 7:i=e.sent;case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getSceneJson",value:function(){var e="";if(this._scene&&this._sceneHelper){var t=this._envMode;this.setEnvironmentMode(u.EnvironmentMode.Editor),this.disableAntialiasing(!0);var n=this.resetCameraRotationLimits();this.deleteHighlightLayer();var r=this._manipulatedNode;this.setManipulatedNode(null),this.getUseMaterialOffloading()&&!this.getUseDelayedMaterialLoading()&&this._sceneHelper.offloadAllUnusedMaterials(),this._sceneHelper.setDummyMaterialToInvisibleMeshes(),this.adjustSceneForSerialization();var i=BABYLON.SceneSerializer.Serialize(this._scene);if(i.postProcesses=[],e=JSON.stringify(i),this.getUseMaterialOffloading()&&!this.getUseDelayedMaterialLoading()){var a,o=null===(a=this._zkScene)||void 0===a?void 0:a.get("rootUrl");o&&this._sceneHelper.loadAllOffloadedMaterials(o)}this._sceneHelper.unsetAllDummyMaterials(),t!=u.EnvironmentMode.Editor&&this.setEnvironmentMode(t),this.enableAntialiasing(),this.createHighlightLayer(),this.setManipulatedNode(r),this.setCameraRotationLimits(n)}return e}},{key:"resetCameraRotationLimits",value:function(){var e={lowerAlphaLimit:null,upperAlphaLimit:null,lowerBetaLimit:null,upperBetaLimit:null};return this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(e.lowerAlphaLimit=this._camera.lowerAlphaLimit,e.upperAlphaLimit=this._camera.upperAlphaLimit,e.lowerBetaLimit=this._camera.lowerBetaLimit,e.upperBetaLimit=this._camera.upperBetaLimit,this._camera.lowerAlphaLimit=null,this._camera.upperAlphaLimit=null,this._camera.lowerBetaLimit=.01,this._camera.upperBetaLimit=Math.PI-.01),e}},{key:"setCameraRotationLimits",value:function(e){e=e||{lowerAlphaLimit:null,upperAlphaLimit:null,lowerBetaLimit:.01,upperBetaLimit:Math.PI-.01},this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._camera.lowerAlphaLimit=e.lowerAlphaLimit,this._camera.upperAlphaLimit=e.upperAlphaLimit,this._camera.lowerBetaLimit=e.lowerBetaLimit||.01,this._camera.upperBetaLimit=e.upperBetaLimit||Math.PI-.01)}},{key:"adjustSceneForSerialization",value:function(){var e=this;if(this._scene&&this._sceneHelper&&this._zkScene){var t=this._sceneHelper;this.removeDisabledFresnelParameters();var n=!1;void 0!=this._zkScene.getUseDelayedTextureLoading()&&(n=this._zkScene.getUseDelayedTextureLoading()),this._scene.useDelayedTextureLoading=n;var r=this.getMatchSameNameTextures(),i=this._zkScene.getSourcesIDs(),a=(this._zkScene.getLibraryMaterialIDs(),{}),o={},s=[],u=[],l=[],h=t.getTextureUrl(this._scene.environmentTexture),d=null!==h&&h.endsWith(f.DefaultAssetUrls.Environment.EnvironmentTextureName);if(this._zkScene.set("useDefaultEnvironmentTexture",d),this._scene.environmentTexture&&(this._scene.environmentTexture instanceof BABYLON.CubeTexture||this._scene.environmentTexture instanceof BABYLON.HDRCubeTexture)){var p=this._scene.environmentTexture.rotationY;this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.environmentTextureRotationY=p}this._scene.textures.forEach((function(n){if(t.isTextureWithUrl(n)){var h=n.url;if(n.getInternalTexture){var d=n.getInternalTexture();d&&d.url&&(h=d.url)}if(h){var p=h;if(p===f.DefaultAssetUrls.Environment.EnvironmentTextureCDNUrl)return n.url="textures/"+Zakeke.getEmptyUUID().replace(/-/g,"")+"/"+f.DefaultAssetUrls.Environment.EnvironmentTextureName,void(n.name=n.url);if(p==f.DefaultAssetUrls.Environment.SkyboxTextureCDNUrl||p==f.DefaultAssetUrls.Environment.GroundTextureCDNUrl)return;var g=!1;p.startsWith("blob:")&&n.metadata&&n.metadata.fileUrl&&(p=n.metadata.fileUrl);for(var v=0;v<i.length;v++){var m=i[v].replace(/-/g,""),y=p.indexOf(m);if(-1!=y){g=!0,n.name=p.substring(y),n.url=n.name,Logger.info("texture url: "+n.url);break}}var _=!1;if(n.materialMapping){_=!0;var b=n.materialMapping.libraryMaterialID.replace(/-/g,""),x=n.materialMapping.sceneMaterialID.replace(/-/g,""),w=p,k=n.name,S=p.indexOf(b);if(-1!=S){var C=p.replace(new RegExp(b,"g"),x);w=C,k=C;var M={};if(a.hasOwnProperty(b)?M=a[b]:a[b]=M,-1!==(S=C.lastIndexOf("/"))){var A=C.substring(S+1);M.hasOwnProperty(A)?(k=w=M[A],c.Utils.arrayContains(s,w)||s.push(w)):-1!==(S=C.lastIndexOf("/",S-1))&&-1!=(S=C.lastIndexOf("/",S-1))&&(k=w=C.substring(S+1),c.Utils.arrayContains(s,w)||s.push(w),r&&(M[A]=w))}n.name=k,n.url=w}}if(!g&&!_){var E=e.extractTextureNameAndUrl(p,r,o);if(E.url&&E.name&&(n.url=E.url,n.name=E.name,c.Utils.arrayContains(s,n.url)||s.push(n.url)),n.metadata&&n.metadata.mobileUrl){var T=e.extractTextureNameAndUrl(n.metadata.mobileUrl,r,o);T.url&&T.name&&(n.metadata.mobileUrl=T.url,c.Utils.arrayContains(s,n.metadata.mobileUrl)||s.push(n.metadata.mobileUrl),c.Utils.arrayContains(l,n.metadata.mobileUrl)||l.push(n.metadata.mobileUrl),c.Utils.arrayContains(u,n.url)||u.push(n.url))}}}}}));for(var g=["px","py","pz","nx","ny","nz"],v=function(e){var t=e.lastIndexOf("."),n=e;if(-1!==t)for(var r=e.substring(0,t),i=0;i<g.length;i++){var a=g[i];if(-1!=(t=r.lastIndexOf("_"+a))){n=r.substring(0,t);break}}return n},m=function(e){for(var t=v(e),n=0;n<s.length;n++){var r=s[n];if(t.endsWith(r))return!0}return!1},y=function(e){for(var t=v(e),n=0;n<u.length;n++){var r=u[n];if(t.endsWith(r))return!0}return!1},_=function(e){for(var t=v(e),n=0;n<l.length;n++){var r=l[n];if(t.endsWith(r))return!0}return!1},b=[],x=0;x<this._zkScene.get("textures").length;x++){var w=this._zkScene.get("textures").at(x),k=w.get("url");k&&m(k)?y(k)?w.set("usage",Zakeke.TextureUsage.Desktop):_(k)?w.set("usage",Zakeke.TextureUsage.Mobile):w.set("usage",Zakeke.TextureUsage.Any):b.push(w)}b.length>0&&this._zkScene.get("textures").remove(b),this._zkScene.set("usedTextureUrls",s)}}},{key:"extractTextureNameAndUrl",value:function(e,t,n){var r={name:"",url:""},i=e.lastIndexOf("/");if(-1!==i){var a=e.substring(i+1);if(n.hasOwnProperty(a))r.url=n[a],r.name=r.url;else if(-1!==(i=e.lastIndexOf("/",i-1))&&-1!==(i=e.lastIndexOf("/",i-1))){var o=e.substring(i+1);r.url=o,r.name=o,t&&(n[a]=o)}}return r}},{key:"removeDisabledFresnelParameters",value:function(){var e=function(e){return e&&void 0!=e.isEnabled&&!e.isEnabled&&void 0!=e.leftColor&&null!=e.leftColor&&e.leftColor instanceof BABYLON.Color3&&e.leftColor.equals(BABYLON.Color3.White())&&void 0!=e.rightColor&&null!=e.rightColor&&e.rightColor instanceof BABYLON.Color3&&e.rightColor.equals(BABYLON.Color3.Black())&&void 0!=e.bias&&0==e.bias&&void 0!=e.power&&1==e.power};this._scene&&this._scene.materials.forEach((function(t){t instanceof BABYLON.StandardMaterial?(t.diffuseFresnelParameters&&e(t.diffuseFresnelParameters)&&(t.diffuseFresnelParameters=new BABYLON.FresnelParameters,t.diffuseFresnelParameters.isEnabled=!1),t.emissiveFresnelParameters&&e(t.emissiveFresnelParameters)&&(t.emissiveFresnelParameters=new BABYLON.FresnelParameters,t.emissiveFresnelParameters.isEnabled=!1),t.opacityFresnelParameters&&e(t.opacityFresnelParameters)&&(t.opacityFresnelParameters=new BABYLON.FresnelParameters,t.opacityFresnelParameters.isEnabled=!1),t.reflectionFresnelParameters&&e(t.reflectionFresnelParameters)&&(t.reflectionFresnelParameters=new BABYLON.FresnelParameters,t.reflectionFresnelParameters.isEnabled=!1),t.refractionFresnelParameters&&e(t.refractionFresnelParameters)&&(t.refractionFresnelParameters=new BABYLON.FresnelParameters,t.refractionFresnelParameters.isEnabled=!1)):t instanceof BABYLON.PBRMaterial||t instanceof Zakeke.PBRMaterial&&t.opacityFresnelParameters&&e(t.opacityFresnelParameters)&&(t.opacityFresnelParameters=void 0)}))}},{key:"uploadSceneIncrementalFiles",value:function(e,t,n){var r=this;if(this._scene&&this._zkScene&&this._sceneHelper){this._scene;var i=this._zkScene,a=this._sceneHelper,o=i.get("version"),s=this.envMode;this.setEnvironmentMode(u.EnvironmentMode.Editor),this.disableAntialiasing(!0);var c=this.resetCameraRotationLimits();this.deleteHighlightLayer(),this.adjustSceneForSerialization(),a.setDummyMaterialToInvisibleMeshes();var l=this.getUseDelayedMaterialLoading(),h=this.getUseMaterialOffloading(),f={},d={};l?this.getAllMaterials().forEach((function(e){var t=r.getMeshesUsingMaterial(e.id);"default material"!==e.id&&0===t.length&&(f[e.id]={name:e.name,file:"material_"+o+"_"+e.id.replace(/[^a-z0-9]/gi,"_").toLowerCase()+".json"})})):h&&this.getAllMaterials().forEach((function(e){var t=r.getMeshesUsingMaterial(e.id);"default material"!==e.id&&0===t.length&&(d[e.id]=a.getOffloadedMaterialInfo(e))})),this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.offloadedMaterials=d,this._scene.metadata.delayedMaterials=f;var p=BABYLON.SceneSerializer.Serialize(this._scene);if(p.postProcesses=[],p.metadata&&p.metadata.originalMeshMaterials){var g=JSON.parse(JSON.stringify(p.metadata.originalMeshMaterials));a.unsetAllDummyMaterials(),p.metadata.originalMeshMaterials=g}var v={useDraco:this._dracoEnabled,dracoEncodingSpeed:this._dracoEncodingSpeed,dracoDecodingSpeed:this._dracoDecodingSpeed,excludedMeshes:[],delayMatarialLoading:Object.keys(f),offloadedMaterialIDs:Object.keys(d)};this.getSceneIncrementalFilesAsync(o,p,v,n).then((function(a){for(var o=new FormData,l=0;l<a.length;l++){var h=a[l],f=h.name,d=h.data,p=!1;!h.dracoEncoded&&h.data.length>180&&h.data.length<45e4&&(Logger.info("Uncompressed file length: "+h.data.length),d=LZString.compressToUint8Array(h.data),Logger.info("Compressed file length: "+d.length),f="compressed_"+h.name,p=!0);var g=void 0;if(h.dracoEncoded||p){var v=d.buffer;g=new Blob([v])}else g=new Blob([d],{type:"text/plain"});o.append("file_"+l,g,f)}jQuery.ajax({url:i.getSceneIncrementalFileUploadUrl(),data:o,cache:!1,contentType:!1,processData:!1,type:"POST",xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;n&&n(100*t)}}),!1),e},success:function(t){e&&e(t)},error:function(e,n,r){t&&t(r)}}),s!=u.EnvironmentMode.Editor&&r.setEnvironmentMode(s),r.enableAntialiasing(),r.createHighlightLayer(),r.setCameraRotationLimits(c)}))}else t&&t("No scene to upload")}},{key:"getSceneIncrementalFilesAsync",value:function(){var e=m(g().mark((function e(t,n,r,a){var o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],this._incrementalFilesMaker||(this._incrementalFilesMaker=i.IncrementalFiles.Default),!this._incrementalFilesMaker){e.next=8;break}return e.next=5,this._incrementalFilesMaker.whenReadyAsync();case 5:return e.next=7,this._incrementalFilesMaker.getIncrementalFilesAsync(n,t,r);case 7:o=e.sent;case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"setNewSceneModelAsync",value:function(){var e=m(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._zkModel=t,this._zkScene=n,e.next=4,this.init3DEngineAsync();case 4:this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),this.fireCameraLocationsUpdateEvent();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"preSceneFileLoading",value:function(){this.resetRealVisibility()}},{key:"postSceneFileLoading",value:function(){this.fireSceneCreatedEvent(),this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),this.fireCameraLocationsUpdateEvent()}},{key:"loadSceneSourceFiles",value:function(e,t,n){var r=this;if(this._zkScene){for(var i=this._zkScene,a=new FormData,o=0;o<e.length;o++)a.append("file-"+o,e[o]);var s={downloadProgress:0,uploadProgress:0,status:E.uploading,message:"",sceneSourceInfo:{},taskID:void 0,sourceID:void 0};this._sceneSourceTasks.push(s),jQuery.ajax({url:i.getSourceTasksUrl(),data:a,cache:!1,contentType:!1,processData:!1,type:"POST",xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;s.uploadProgress=100*t,r.fireSceneSourceTaskCheckEvent()}}),!1),e.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;s.downloadProgress=100*t,r.fireSceneSourceTaskCheckEvent()}}),!1),e},success:function(e){e&&e.hasOwnProperty("taskID")&&e.hasOwnProperty("sourceID")?(s.taskID=e.taskID,s.sourceID=e.sourceID,s.status=E.progress,r.fireSceneSourceTaskCheckEvent()):Logger.info("processo di creazione task non andato a buon fine"),t&&t(s)},error:function(e,t,i){r._sceneSourceTasks=r._sceneSourceTasks.filter((function(e){})),r.fireSceneSourceTaskCheckEvent(),n&&n(i)}}),this.fireSceneSourceTaskCheckEvent()}}},{key:"checkSceneSourceTasks",value:function(){var e=this;if(this._scene&&this._zkScene&&this._sceneSourceTasks&&this._sceneSourceTasks.length>0)for(var t=this._zkScene,n=function(n){var a=e._sceneSourceTasks[n];if(a.status==E.completed_error||a.status==E.completed_success)return e._sceneSourceTasks.splice(n--,1),e.fireSceneSourceTaskCheckEvent(),r=n,"continue";if(a.status==E.checking||a.status==E.uploading)return r=n,"continue";if(a.status==E.progress){a.status=E.checking;var o=function(t){t.status=E.completed_error,e.fireSceneSourceTaskErrorEvent(t.taskID),e.fireSceneSourceTaskCheckEvent()};i=function(e){jQuery.ajax({url:t.getSourceTaskResultUrl(e.taskID),cache:!1,contentType:!1,processData:!1,type:"GET",success:function(t){if(t&&t.hasOwnProperty("taskID")&&t.hasOwnProperty("state")&&t.hasOwnProperty("message")&&t.hasOwnProperty("sourceFile"))if(2==t.state){e.sceneSourceInfo={sourceID:t.sourceFile.sourceID,fileObjectID:t.sourceFile.fileObjectID,fileLength:t.sourceFile.fileLength,url:t.sourceFile.url,rootUrl:t.sourceFile.rootUrl,sceneFileName:t.sourceFile.sceneFileName,textureFiles:[]};for(var n=0;n<t.sourceFile.textureFiles.length;n++)e.sceneSourceInfo.textureFiles.push({textureID:t.sourceFile.textureFiles[n].textureID,fileObjectID:t.sourceFile.textureFiles[n].fileObjectID,fileLength:t.sourceFile.textureFiles[n].fileLength,url:t.sourceFile.textureFiles[n].url});e.status=E.success}else 3==t.state?o(e):e.status=E.progress;else o(e)},error:function(t,n,r){o(e)}})},i(a)}a.status==E.success&&(e._isLoadingSourceFiles||(e._isLoadingSourceFiles=!0,a.sceneSourceInfo.rootUrl&&a.sceneSourceInfo.sceneFileName?(e.updateSceneModelFromSourceTask(a),e.loadMeshesFromRemoteFiles(a.sceneSourceInfo.rootUrl,a.sceneSourceInfo.sceneFileName,(function(t){t&&"[object Array]"===Object.prototype.toString.call(t)&&t.forEach((function(e){e.isPickable=!0})),e._isLoadingSourceFiles=!1,e.fireSceneSourceTaskSuccessEvent(t),e.fireMeshesUpdateEvent(),e.fireMaterialsUpdateEvent(),e.fireLightsUpdateEvent(),a.status=E.completed_success}),(function(t){Logger.info("Errore nel caricamento delle mesh: "+t),e._isLoadingSourceFiles=!1,e.fireSceneSourceTaskErrorEvent(a.taskID),a.status=E.completed_error}))):(Logger.info("Risultato del task di caricamento non valido"),e._isLoadingSourceFiles=!1,e.fireSceneSourceTaskErrorEvent(a.taskID),a.status=E.completed_error),e.fireSceneSourceTaskCheckEvent())),r=n},r=0;r<this._sceneSourceTasks.length;r++){var i;n(r)}setTimeout((function(){return e.checkSceneSourceTasks()}),500)}},{key:"updateSceneModelFromSourceTask",value:function(e){if(this._zkScene){var t=new Zakeke.SceneSource;t.set("sourceID",e.sceneSourceInfo.sourceID),t.set("fileObjectID",e.sceneSourceInfo.fileObjectID),t.set("fileLength",e.sceneSourceInfo.fileLength),t.set("url",e.sceneSourceInfo.url),t.set("rootUrl",e.sceneSourceInfo.rootUrl),t.set("sceneFileName",e.sceneSourceInfo.sceneFileName);for(var n=0;n<e.sceneSourceInfo.textureFiles.length;n++){var r=e.sceneSourceInfo.textureFiles[n];if(r.textureID&&(r.fileObjectID||r.fileLength)&&r.url){var i=new Zakeke.SceneSourceTexture;i.set("textureID",r.textureID),i.set("fileObjectID",r.fileObjectID),i.set("fileLength",r.fileLength),i.set("url",r.url),t.get("textures").push(i)}}this._zkScene.get("sources").push(t)}}},{key:"loadMeshesFromRemoteFiles_NEW",value:function(e,t,n,r){var i=this;if(this._scene&&this._sceneHelper){this._scene;var a=e+t;this._sceneHelper.importMeshesFromUrlAsync(a,null,void 0).then((function(e){Logger.info("File imported successfully"),i.checkSceneEmptyEnvironmentTexture(),i.refreshEnvironment(),n&&n(e)})).catch((function(e){Logger.info("Error loading file"),r&&r(e)})),Logger.info("loading finished")}else r&&r("No scene to fill with imported meshes")}},{key:"loadMeshesFromRemoteFiles",value:function(e,t,n,r){var i=this;if(this._scene&&this._sceneHelper){var a=this._scene,o=this._sceneHelper,s=t,u=t.lastIndexOf(".");-1!==u&&(s=t.substr(0,u));var l=this._scene.materials.map((function(e){return e.id})),h=void 0;BABYLON.GLTFFileLoader.IncrementalLoading=!1,BABYLON.SceneLoader.OnPluginActivatedObservable.add((function(e){h=e.name}));var f=new BABYLON.AssetsManager(this._scene),d=f.addMeshTask("mesh-task","",e,t);d.onSuccess=function(e){Logger.info("task completed successfully");var t=e.loadedMeshes,r=new BABYLON.Mesh(s,a);r.id=Zakeke.generateUUID(),r.metadata={isRealMesh:!0,isGroup:!0},t.forEach((function(e){e.parent||(e.parent=r),e.material||(e.material=new BABYLON.StandardMaterial(e.name+"Mat",a)),e.id=Zakeke.generateUUID()})),a.materials.forEach((function(e){c.Utils.arrayContains(l,e.id)||(e.id=Zakeke.generateUUID())})),i.checkSceneEmptyEnvironmentTexture(),i.refreshEnvironment(),o.adjustCamera(h,!1,!1),o.setupShaderMaterialsCameraPosition(),n&&n(t)},d.onError=function(e,t,n){Logger.info("task completed with errors"),r&&r(t)},f.onFinish=function(){Logger.info("loading finished")},f.load()}else r&&r("No scene to fill with imported meshes")}},{key:"isRealMesh",value:function(e){return!!this._sceneHelper&&this._sceneHelper.isRealMesh(e)}},{key:"onMeshChanged",value:function(e){this.updateBoundingBox(),this.setRenderingNeeded()}},{key:"onSubMeshChanged",value:function(e){this.updateBoundingBox(),this.setRenderingNeeded()}},{key:"onMaterialChanged",value:function(e){this.setRenderingNeeded()}},{key:"onLightChanged",value:function(e){this.setRenderingNeeded()}},{key:"getSceneMeshesByName",value:function(e){return this._sceneHelper?this._sceneHelper.getSceneMeshesByName(e):[]}},{key:"getSceneMeshes",value:function(){return this._sceneHelper?this._sceneHelper.getSceneMeshes():[]}},{key:"getMeshesUsingMaterial",value:function(e){return this._sceneHelper?this._sceneHelper.getMeshesUsingMaterial(e):[]}},{key:"getMeshesMaterials",value:function(e){return this._sceneHelper?this._sceneHelper.getMeshesMaterials(e):[]}},{key:"getMeshMaterials",value:function(e){return this._sceneHelper?this._sceneHelper.getMeshMaterials(e):[]}},{key:"getAllMaterials",value:function(){return this._sceneHelper?this._sceneHelper.getAllMaterials():[]}},{key:"getGroupedMaterials",value:function(){for(var e=[],t={},n=this.getAllMaterials(),r=0;r<n.length;r++){var i=n[r];if("groundMaterial"!=i.id){var a=this.getMaterialGroup(i.id),o=null;t.hasOwnProperty(a)?o=t[a]:(o=new A(a),e.push(o),t[a]=o),o&&o.materials.push(i)}}return e.sort((function(e,t){var n=e.groupName.toLowerCase(),r=t.groupName.toLowerCase();return n<r?-1:n>r?1:0}))}},{key:"setMaterialsGroup",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;r<e.length;r++){var i=e[r];this.setMaterialGroup(i,t,n)}}},{key:"setMaterialGroup",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._scene&&this._scene.getMaterialByID(e)&&(this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.groups||(this._scene.metadata.groups={}),this._scene.metadata.groups[e]=t,n&&this.fireMaterialsUpdateEvent())}},{key:"getMaterialGroup",value:function(e){return this._scene&&this._scene.metadata&&this._scene.metadata.groups&&this._scene.metadata.groups.hasOwnProperty(e)?this._scene.metadata.groups[e]:n.EmptyGroupName}},{key:"removeMaterialGroup",value:function(e){this._scene&&this._scene.metadata&&this._scene.metadata.groups&&this._scene.metadata.groups.hasOwnProperty(e)&&(delete this._scene.metadata.groups[e],this.fireMaterialsUpdateEvent())}},{key:"getMaterialsByGroup",value:function(e){var t=this,r=[],i=e||n.EmptyGroupName;return this._scene&&this._sceneHelper&&this._sceneHelper.getAllMaterials().forEach((function(e){t.getMaterialGroup(e.id)===i&&r.push(e)})),r}},{key:"getGroupCenter",value:function(e){return this._sceneHelper?this._sceneHelper.getMeshHierarchyCenter(e):null}},{key:"getGroupBoundingInfo",value:function(e){var t=e.getHierarchyBoundingVectors(!0);return new BABYLON.BoundingInfo(t.min,t.max)}},{key:"showHideBoundingBox",value:function(e){this._showBoundingBox=e,this.updateBoundingBox(),this.setRenderingNeeded()}},{key:"updateBoundingBox",value:function(){this.deleteBoundingBox(),this.showBoundingBox&&this.createSceneBoundingBox(!0)}},{key:"deleteBoundingBox",value:function(){var e=this.getSceneBoundingBox();e&&e.dispose()}},{key:"setCameraPositionScale",value:function(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraPositionScale(e),this._sceneHelper.setCameraPositionScale(e,!0),this.setRenderingNeeded())}},{key:"setCameraLimitLowerRadius",value:function(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLimitLowerRadius(e),this._sceneHelper.setCameraLimitLowerRadius(e,!0),this.setRenderingNeeded())}},{key:"setCameraZoomEnabled",value:function(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraZoomEnabled(e),this._sceneHelper.setZoomEnabled(e),this.setRenderingNeeded())}},{key:"setCameraUseMinZoomPercentage",value:function(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUseMinZoomPerc(e),this._sceneHelper.setMinZoomPerc(e?this._zkScene.getCameraMinZoomPerc():void 0),this.setRenderingNeeded())}},{key:"setCameraMinZoomPercentage",value:function(e){if(this._zkScene&&this._sceneHelper){this._zkScene.setCameraMinZoomPerc(e);var t=this._zkScene.getCameraUseMinZoomPerc();this._sceneHelper.setMinZoomPerc(t?e:void 0),this.setRenderingNeeded()}}},{key:"setCameraUseMaxZoomPercentage",value:function(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUseMaxZoomPerc(e),this._sceneHelper.setMaxZoomPerc(e?this._zkScene.getCameraMaxZoomPerc():void 0),this.setRenderingNeeded())}},{key:"setCameraMaxZoomPercentage",value:function(e){if(this._zkScene&&this._sceneHelper){this._zkScene.setCameraMaxZoomPerc(e);var t=this._zkScene.getCameraUseMaxZoomPerc();this._sceneHelper.setMaxZoomPerc(t?e:void 0),this.setRenderingNeeded()}}},{key:"lockCameraAlphaAngle",value:function(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this._camera.alpha;this._zkScene.setCameraLowerAlphaLimit(e),this._zkScene.setCameraUpperAlphaLimit(e),this._sceneHelper.setCameraAlphaLimits(e,e),this.setRenderingNeeded()}}},{key:"unlockCameraAlphaAngle",value:function(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerAlphaLimit(null),this._zkScene.setCameraUpperAlphaLimit(null),this._sceneHelper.setCameraAlphaLimits(null,null),this.setRenderingNeeded())}},{key:"lockCameraBetaAngle",value:function(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this._camera.beta;this._zkScene.setCameraLowerBetaLimit(e),this._zkScene.setCameraUpperBetaLimit(e),this._sceneHelper.setCameraBetaLimits(e,e),this.setRenderingNeeded()}}},{key:"unlockCameraBetaAngle",value:function(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerBetaLimit(null),this._zkScene.setCameraUpperBetaLimit(null),this._sceneHelper.setCameraBetaLimits(null,null),this.setRenderingNeeded())}},{key:"setCameraLowerAlphaLimit",value:function(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this._camera.alpha;this._zkScene.setCameraLowerAlphaLimit(e),this._sceneHelper.setCameraLowerAlphaLimit(e),this.setRenderingNeeded()}}},{key:"unsetCameraLowerAlphaLimit",value:function(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerAlphaLimit(null),this._sceneHelper.setCameraLowerAlphaLimit(null),this.setRenderingNeeded())}},{key:"setCameraUpperAlphaLimit",value:function(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this._camera.alpha;this._zkScene.setCameraUpperAlphaLimit(e),this._sceneHelper.setCameraUpperAlphaLimit(e),this.setRenderingNeeded()}}},{key:"unsetCameraUpperAlphaLimit",value:function(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUpperAlphaLimit(null),this._sceneHelper.setCameraUpperAlphaLimit(null),this.setRenderingNeeded())}},{key:"setCameraLowerBetaLimit",value:function(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this._camera.beta;this._zkScene.setCameraLowerBetaLimit(e),this._sceneHelper.setCameraLowerBetaLimit(e),this.setRenderingNeeded()}}},{key:"unsetCameraLowerBetaLimit",value:function(){this._zkScene&&this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerBetaLimit(null),this._sceneHelper.setCameraLowerBetaLimit(null),this.setRenderingNeeded())}},{key:"setCameraUpperBetaLimit",value:function(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this._camera.beta;this._zkScene.setCameraUpperBetaLimit(e),this._sceneHelper.setCameraUpperBetaLimit(e),this.setRenderingNeeded()}}},{key:"unsetCameraUpperBetaLimit",value:function(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUpperBetaLimit(null),this._sceneHelper.setCameraUpperBetaLimit(null),this.setRenderingNeeded())}},{key:"selectMesh",value:function(e){this.selectUnselectMesh(e,!0)}},{key:"unselectMesh",value:function(e){this.selectUnselectMesh(e,!1)}},{key:"unselectAllMeshes",value:function(){var e=this;this._scene&&this._scene.meshes.forEach((function(t){return e.unselectSingleMesh(t)}))}},{key:"selectUnselectMesh",value:function(e,t){var n=this;if(this._scene){if(this.deleteBoundingBox(),this.unselectAllMeshes(),t){var r=this._scene.getMeshByID(e);r&&function e(t){n.selectSingleMesh(t),t.getChildMeshes().forEach((function(t){return e(t)}))}(r),this.setManipulatedNode(r)}else this.setManipulatedNode(null);this.fireSelectionChangedEvent()}}},{key:"selectSingleMesh",value:function(e){e.selected=!0,this.highlightMesh(e,!0),this.setRenderingNeeded()}},{key:"unselectSingleMesh",value:function(e){e.selected=!1,this.highlightMesh(e,!1),this.setRenderingNeeded()}},{key:"isMeshSelected",value:function(e){return e&&void 0!=e.selected&&e.selected}},{key:"showMesh",value:function(e){this.resetRealVisibility(),this.showHideMesh(e,!0,!0)}},{key:"hideMesh",value:function(e){this.resetRealVisibility(),this.showHideMesh(e,!1,!0)}},{key:"showHideMesh",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._scene&&this._sceneHelper&&this._camera){this._scene;var i=this._sceneHelper,a=this._camera,o=function e(t,n){t.isVisible=n,Logger.info(t.name),t.getChildMeshes().forEach((function(t){return e(t,n)}))},s=function(e,t){o(e,t),!(i&&a&&e.metadata&&e.metadata.isGroup&&0===e.getChildMeshes().length)&&t&&!a.isCompletelyInFrustum(e)&&(i.adjustCamera(void 0,!1,!1),i.setupShaderMaterialsCameraPosition()),r&&n.fireMeshesUpdateEvent(),n.setRenderingNeeded()},u=this._scene.getMeshByID(e);if(u){var c,l=null===(c=this._zkScene)||void 0===c?void 0:c.get("rootUrl");l?i.unsetMeshDummyMaterialAsync(u,l,!0).then((function(){return s(u,t)})):s(u,t)}this.refreshInfoPoints()}}},{key:"setTemporaryExclusivelyVisible",value:function(e){var t=this;this._scene&&(this.resetRealVisibility(),this._realMeshVisibility={},this._scene.meshes.forEach((function(e){t._realMeshVisibility[e.id]=e.isVisible,t.isRealMesh(e)&&(e.isVisible=!1)})),this.showHideMesh(e,!0,!1))}},{key:"resetRealVisibility",value:function(){var e=this;this._scene&&this._sceneHelper&&this._realMeshVisibility&&(this._sceneHelper.getSceneMeshes().forEach((function(t){e._realMeshVisibility.hasOwnProperty(t.id)&&(t.isVisible=e._realMeshVisibility[t.id])})),this.setRenderingNeeded())}},{key:"changeMaterialColor",value:function(e,t,n){this._sceneHelper&&this._sceneHelper.changeMaterialColor(e,t,n)}},{key:"renameMesh",value:function(e,t){if(this._scene){var n=this._scene.getMeshByID(e);n&&(n.name=t,this.fireMeshesUpdateEvent())}}},{key:"firePreUpdateEvent",value:function(){this._preUpdateListeners.forEach((function(e){return e()}))}},{key:"addPreUpdateListener",value:function(e){this._preUpdateListeners.push(e)}},{key:"removePreUpdateListener",value:function(e){for(var t=0;t<this._preUpdateListeners.length;t++)if(this._preUpdateListeners[t]==e){this._preUpdateListeners.splice(t--,1);break}}},{key:"firePostUpdateEvent",value:function(){this._postUpdateListeners.forEach((function(e){return e()}))}},{key:"addPostUpdateListener",value:function(e){this._postUpdateListeners.push(e)}},{key:"removePostUpdateListener",value:function(e){for(var t=0;t<this._postUpdateListeners.length;t++)if(this._postUpdateListeners[t]==e){this._postUpdateListeners.splice(t--,1);break}}},{key:"fireMeshSelectedEvent",value:function(e){this._meshSelectedListeners.forEach((function(t){return t(e)}))}},{key:"addMeshSelectedListener",value:function(e){this._meshSelectedListeners.push(e)}},{key:"fireSelectionChangedEvent",value:function(){this._selectionChangedListeners.forEach((function(e){return e()}))}},{key:"addSelectionChangedListener",value:function(e){this._selectionChangedListeners.push(e)}},{key:"fireLightSelectedEvent",value:function(e){this._lightSelectedListeners.forEach((function(t){return t(e)}))}},{key:"addLightSelectedListener",value:function(e){this._lightSelectedListeners.push(e)}},{key:"fireSceneCreatedEvent",value:function(){this._sceneCreatedListeners.forEach((function(e){return e()}))}},{key:"addSceneCreatedListener",value:function(e){this._sceneCreatedListeners.push(e)}},{key:"fireCameraLocationCreatedEvent",value:function(e){this._cameraLocationCreatedListeners.forEach((function(t){return t(e)}))}},{key:"addCameraLocationCreatedListener",value:function(e){this._cameraLocationCreatedListeners.push(e)}},{key:"fireCameraLocationsUpdateEvent",value:function(e){if(!e&&this._scene&&(e=this.getAllCameraLocations()),!e)throw"Failed firing positions update event: lights are null and no scene present";this._cameraLocationsUpdateListeners.forEach((function(t){return t(e)}))}},{key:"addCameraLocationsUpdateListener",value:function(e){this._cameraLocationsUpdateListeners.push(e)}},{key:"fireSceneSourceTaskSuccessEvent",value:function(e){this._sceneSourceTaskSuccessListeners.forEach((function(t){return t(e)}))}},{key:"addSceneSourceTaskSuccessListener",value:function(e){this._sceneSourceTaskSuccessListeners.push(e)}},{key:"fireSceneSourceTaskErrorEvent",value:function(e){this._sceneSourceTaskErrorListeners.forEach((function(t){return t(e)}))}},{key:"addSceneSourceTaskErrorListener",value:function(e){this._sceneSourceTaskErrorListeners.push(e)}},{key:"removeSceneSourceTaskErrorListener",value:function(e){var t=this._sceneSourceTaskErrorListeners.indexOf(e);-1!=t&&this._sceneSourceTaskErrorListeners.splice(t,1)}},{key:"fireSceneSourceTaskCheckEvent",value:function(){this._sceneSourceTasksCheckListeners.forEach((function(e){return e()}))}},{key:"addSceneSourceTaskCheckListener",value:function(e){this._sceneSourceTasksCheckListeners.push(e)}},{key:"fireMeshesUpdateEvent",value:function(e){if(!e&&this._scene&&(e=this.getSceneMeshes()),!e)throw"Failed firing mesh update event: meshes are null and no scene present";this._meshesUpdateListeners.forEach((function(t){return t(e)}))}},{key:"addMeshesUpdateListener",value:function(e){this._meshesUpdateListeners.push(e)}},{key:"fireMaterialsUpdateEvent",value:function(e){if(!e&&this._scene&&(e=this.getGroupedMaterials()),!e)throw"Failed firing materials update event: materials are null and no scene present";this._materialsUpdateListeners.forEach((function(t){return t(e)}))}},{key:"addMaterialsUpdateListener",value:function(e){this._materialsUpdateListeners.push(e)}},{key:"fireLightsUpdateEvent",value:function(e){if(!e&&this._scene&&(e=this.getAllLights()),!e)throw"Failed firing lights update event: lights are null and no scene present";this._lightsUpdateListeners.forEach((function(t){return t(e)}))}},{key:"addLightsUpdateListener",value:function(e){this._lightsUpdateListeners.push(e)}},{key:"fireMeshLocationCreatedEvent",value:function(e){this._meshLocationCreatedListeners.forEach((function(t){return t(e)}))}},{key:"addMeshLocationCreatedListener",value:function(e){this._meshLocationCreatedListeners.push(e)}},{key:"fireMeshLocationsUpdateEvent",value:function(e){if(!e&&this._scene&&(e=this.getAllMeshLocations()),!e)throw"Failed firing mesh positions update event: positions are null and no scene present";this._meshLocationsUpdateListeners.forEach((function(t){return t(e)}))}},{key:"addMeshLocatonsUpdateListener",value:function(e){this._meshLocationsUpdateListeners.push(e)}},{key:"fireArTaskSuccessEvent",value:function(){this._arTaskSuccessListeners.forEach((function(e){return e()}))}},{key:"addArTaskSuccessListener",value:function(e){this._arTaskSuccessListeners.push(e)}},{key:"fireArTaskErrorEvent",value:function(){this._arTaskErrorListeners.forEach((function(e){return e()}))}},{key:"addArTaskErrorListener",value:function(e){this._arTaskErrorListeners.push(e)}},{key:"fireArTaskCheckEvent",value:function(){this._arTasksCheckListeners.forEach((function(e){return e()}))}},{key:"addArTaskCheckListener",value:function(e){this._arTasksCheckListeners.push(e)}},{key:"clearListeners",value:function(){this._meshSelectedListeners=[],this._selectionChangedListeners=[],this._lightSelectedListeners=[],this._sceneCreatedListeners=[],this._cameraLocationCreatedListeners=[],this._sceneSourceTaskSuccessListeners=[],this._sceneSourceTaskErrorListeners=[],this._sceneSourceTasksCheckListeners=[],this._meshesUpdateListeners=[],this._materialsUpdateListeners=[],this._lightsUpdateListeners=[],this._cameraLocationsUpdateListeners=[],this._meshLocationCreatedListeners=[],this._meshLocationsUpdateListeners=[],this._arTaskSuccessListeners=[],this._arTaskErrorListeners=[],this._arTasksCheckListeners=[]}},{key:"onPointerDown",value:function(e,t){if(this._scene&&this._sceneHelper&&this._envMode==u.EnvironmentMode.Editor&&this._selectOnPick&&t&&t.hit&&t.pickedMesh&&t.pickedMesh!==this._ground){this.selectMesh(t.pickedMesh.id);var n=this.convertSceneToScreenPoint(this._scene.pointerX,this._scene.pointerY);if(n){var r={name:t.pickedMesh.name,id:t.pickedMesh.id,scenePointerX:this._scene.pointerX,scenePointerY:this._scene.pointerY,screenPointerX:n.X,screenPointerY:n.Y};this.fireMeshSelectedEvent(r)}}}},{key:"onPointerMove",value:function(e,t){if(this._scene&&this._sceneHelper&&this._envMode==u.EnvironmentMode.Editor)if(this.highlightMeshOver(!1),this._highlightOver){var n=this._scene.pick(this._scene.pointerX,this._scene.pointerY);n&&n.hit&&n.pickedMesh&&this._sceneHelper.isRealMesh(n.pickedMesh)&&(this._meshOver=n.pickedMesh,this.highlightMeshOver(!0))}else this._meshOver=null}},{key:"getSubMesh",value:function(e,t){return this._sceneHelper?this._sceneHelper.getSubMesh(e,t):null}},{key:"getLightByID",value:function(e){return this._scene?this._scene.getLightByID(e):null}},{key:"applyMaterialByName",value:function(e,t){this._sceneHelper&&this._sceneHelper.applyMaterialByName(e,t)}},{key:"applyMaterial",value:function(e,t){this._sceneHelper&&(this._sceneHelper.applyMaterial(e,t),this.setLongRenderingNeeded())}},{key:"applyMaterialToSubMeshByName",value:function(e,t,n){this._sceneHelper&&this._sceneHelper.applyMaterialToSubMeshByName(e,t,n)}},{key:"applyMaterialToSubMesh",value:function(e,t,n){this._sceneHelper&&this._sceneHelper.applyMaterialToSubMesh(e,t,n)}},{key:"resetMeshMaterial",value:function(e,t){t?this._initialMeshMaterials:this._lastMeshMaterials}},{key:"resetSubMeshMaterial",value:function(e,t,n){var r=n?this._initialSubMeshMaterials:this._lastSubMeshMaterials;if(e&&t&&e.material instanceof BABYLON.MultiMaterial){var i=t.materialIndex;if(i>=0&&i<e.material.subMaterials.length){var a="".concat(e.id,"_").concat(i);if(r.hasOwnProperty(a)){var o=r[a],s=this.getMaterialByID(o);s&&(e.material.subMaterials[i]=s)}}}this.setRenderingNeeded()}},{key:"getExtension",value:function(e){var t=e.lastIndexOf(".");if(-1!==t)return e.substring(t).toLowerCase()}},{key:"loadMobileTextureFilesAsync",value:function(e,t,n){var r=this;return new Promise((function(i,a){r.loadMobileTextureFiles(e,t,n,(function(){return i()}),(function(e){return a()}))}))}},{key:"loadMobileTextureFiles",value:function(e,t,n,r,i){var a=this,o=6===e.length||".dds"===this.getExtension(e[0].name)||".hdr"===this.getExtension(e[0].name)||".env"===this.getExtension(e[0].name)||".basis"===this.getExtension(e[0].name);this.uploadTextureFiles(e,t,n,(function(e){e.length>0&&(o?a.setMobileCubeTextureImages(e,t,n):a.setMobileTextureImage(e[0],t,n)),r&&r()}),i,!1)}},{key:"loadTextureFilesAsync",value:function(e,t,n){var r=this;return new Promise((function(i,a){r.loadTextureFiles(e,t,n,(function(){return i()}),(function(e){return a(e)}))}))}},{key:"loadTextureFiles",value:function(e,t,n,r,i){var a=this,o=6===e.length||".dds"===this.getExtension(e[0].name)||".hdr"===this.getExtension(e[0].name)||".env"===this.getExtension(e[0].name)||".basis"===this.getExtension(e[0].name);this.uploadTextureFiles(e,t,n,function(){var s=m(g().mark((function s(u){return g().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(u.length>0)){s.next=12;break}if(!o){s.next=6;break}return s.next=4,a.setCubeTextureImages(u,t,n);case 4:s.next=11;break;case 6:return s.next=8,a.setTextureImage(u[0],t,n);case 8:if(t[n+"Texture"].metadata&&t[n+"Texture"].metadata.mobileUrl){s.next=11;break}return s.next=11,new Promise(function(){var r=m(g().mark((function r(o){return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a.uploadTextureFiles(e,t,n,function(){var e=m(g().mark((function e(r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setMobileTextureImage(r[0],t,n),o();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i,!0);case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 11:r&&r();case 12:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),i,!1)}},{key:"uploadTextureFileAsync",value:function(e,t){var n=this;return new Promise((function(r,i){if(n._scene&&n._zkScene&&e){var a=t?t.id:Zakeke.getEmptyUUID(),o=function(e){if(n._zkScene&&e&&e.textureID&&e.materialID&&(e.fileObjectID||e.fileLength)&&e.url){var t=new Zakeke.SceneTexture;return t.set("textureID",e.textureID),t.set("materialID",e.materialID),t.set("fileObjectID",e.fileObjectID),t.set("fileLength",e.fileLength),t.set("url",e.url),n._zkScene.get("textures").push(t),t}return null},s=new FormData;s.append("file",e),jQuery.ajax({url:n.getTexturesUploadUrl(a),data:s,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(){var e=m(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"[object Array]"===Object.prototype.toString.call(t)&&(n=o(t[0]))?r(n):i("Immagine non valida");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(e,t,n){i("An error occurred: "+t+" Error: "+n)}})}else r(null)}))}},{key:"uploadTextureFiles",value:function(e,t,n,r,i,a){var o=this;if(this._scene&&this._zkScene&&e&&0!=e.length){var s=t?t.id:Zakeke.getEmptyUUID(),u=function(e){if(o._zkScene&&e&&e.textureID&&e.materialID&&(e.fileObjectID||e.fileLength)&&e.url){var t=new Zakeke.SceneTexture;return t.set("textureID",e.textureID),t.set("materialID",e.materialID),t.set("fileObjectID",e.fileObjectID),t.set("fileLength",e.fileLength),t.set("url",e.url),o._zkScene.get("textures").push(t),t}return null},c=function(e,t){var n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)},l=function(e){var t=e.lastIndexOf(".");return-1!==t?e.substring(t):null}(e[0].name),h=[];if(!this.canLoadCubemap(t,n)||6!=e.length&&".dds"!==l&&".hdr"!==l&&".env"!==l&&".basis"!==l||6!=e.length)h.push(e[0]);else{for(var f=["px","py","pz","nx","ny","nz"],d=0;d<e.length;d++){for(var p=e[d],v=-1,y=0;y<f.length;y++)if(c(p.name,f[y])){h.push(p),v=y;break}-1!==v&&f.splice(v,1)}if(0!=f.length){var _="Immagini per la cube map non valide";return i&&i(_),void Logger.info(_)}}for(var b=new FormData,x=0;x<h.length;x++)b.append("file-"+x,h[x]);jQuery.ajax({url:this.getTexturesUploadUrl(s)+"?resize="+a,data:b,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(){var e=m(g().mark((function e(t){var n,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],"[object Array]"!==Object.prototype.toString.call(t)){e.next=14;break}a=0;case 3:if(!(a<t.length)){e.next=14;break}if(o=u(t[a])){e.next=10;break}if(!i){e.next=10;break}return i("Immagini non valide"),e.abrupt("return");case 10:o&&n.push(o);case 11:a++,e.next=3;break;case 14:r&&r(n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(e,t,n){i&&i("An error occurred: "+t+" Error: "+n)}})}}},{key:"getTexturesUploadUrl",value:function(e){return this._zkScene?this._zkScene.getTexturesUrl(e):""}},{key:"removeAllMaterialPhotos",value:function(e){if(this._zkScene){for(var t=[],n=0;n<this._zkScene.get("materialPhotos").length;n++)this._zkScene.get("materialPhotos").at(n).get("materialID")===e.id&&t.push(this._zkScene.get("materialPhotos").at(n));t.length>0&&this._zkScene.get("materialPhotos").remove(t)}}},{key:"removeMaterialPhotoAtIndex",value:function(e,t){if(this._zkScene){for(var n=[],r=0;r<this._zkScene.get("materialPhotos").length;r++)this._zkScene.get("materialPhotos").at(r).get("materialID")===e.id&&n.push(this._zkScene.get("materialPhotos").at(r));if(n.length>0){var i=n[t];this._zkScene.get("materialPhotos").remove(i)}}}},{key:"loadMaterialPhotoFiles",value:function(e,t,n,r){var i=this;this.uploadMaterialPhotoFiles(e,t,(function(e){i.refreshInfoPoints(),n&&n()}),r)}},{key:"uploadMaterialPhotoFiles",value:function(e,t,n,r){var i=this;if(this._scene&&this._zkScene&&e&&0!==e.length){for(var a=t.id,o=function(e){if(i._zkScene&&e&&e.photoID&&e.materialID&&(e.fileObjectID||e.fileLength)&&e.url){var t=new Zakeke.SceneMaterialPhoto;return t.set("photoID",e.photoID),t.set("materialID",e.materialID),t.set("fileObjectID",e.fileObjectID),t.set("fileLength",e.fileLength),t.set("url",e.url),i._zkScene.get("materialPhotos").push(t),t}return null},s=function(e){var t=e.lastIndexOf(".");return-1!==t?e.substring(t):null},u=new FormData,c=0;c<e.length;c++){var l=s(e[c].name);".png"!==l&&".jpg"!==l||u.append("file-"+c,e[c])}jQuery.ajax({url:this.getMaterialPhotosUploadUrl(a),data:u,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){var t=[];if("[object Array]"===Object.prototype.toString.call(e))for(var i=0;i<e.length;i++){var a=o(e[i]);if(!a&&r)return void r("Immagini non valide");a&&t.push(a)}n&&n(t)},error:function(e,t,n){r&&r("An error occurred: "+t+" Error: "+n)}})}}},{key:"getMaterialPhotosUploadUrl",value:function(e){return this._zkScene?this._zkScene.getMaterialPhotosUrl(e):""}},{key:"canLoadCubemap",value:function(e,t){return e?e instanceof BABYLON.StandardMaterial&&("reflection"==t||"refraction"==t)||(e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?"environment"===t:e instanceof BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial?"reflection"===t:e instanceof BABYLON.ShaderMaterial):"environment"==t||"skybox"==t}},{key:"setEnvironmentTexture",value:function(e,t,n,r,i){"environment"===t?this.setSceneEnvironmentTexture(e,void 0,n,r,i):"skybox"===t?this.setViewerSkyboxTexture(e,n,r):"ground"===t&&this.setViewerGroundTexture(e)}},{key:"removeSceneEnvironmentTexture",value:function(){this._scene&&this._scene.environmentTexture&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null,this._scene.metadata&&void 0!=this._scene.metadata.environmentTextureRotationY&&delete this._scene.metadata.environmentTextureRotationY),this.setRenderingNeeded()}},{key:"setSceneEnvironmentTextureRotationY",value:function(e){this._scene&&this._scene.environmentTexture&&(this._scene.environmentTexture instanceof BABYLON.CubeTexture||this._scene.environmentTexture instanceof BABYLON.HDRCubeTexture)&&(this._scene.environmentTexture.rotationY=e*Math.PI/180,this.setLongRenderingNeeded())}},{key:"setTextureImage",value:function(){var e=m(g().mark((function e(t,n,r){var i=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(i._scene&&t&&t instanceof Zakeke.SceneTexture){var a=t.get("url");if(a)if(n){var s=i.getMaterialTexture(n,r),u=!0;s&&s instanceof BABYLON.Texture&&(u=s.invertY);var c=new BABYLON.Texture(a,i._scene,void 0,u,void 0,(function(){return i.setRenderingNeeded()}));s&&s instanceof BABYLON.Texture&&(c.uScale=s.uScale,c.vScale=s.vScale,c.uOffset=s.uOffset,c.vOffset=s.vOffset,c.uAng=s.uAng,c.vAng=s.vAng,c.level=s.level,c.coordinatesIndex=s.coordinatesIndex,c.coordinatesMode=s.coordinatesMode,c.hasAlpha=s.hasAlpha,c.wrapU=s.wrapU,c.wrapV=s.wrapV,c.gammaSpace=s.gammaSpace),o.SceneHelper.whenTextureIsReadyAsync(c).then((function(){i.applyTexture(c,n,r),s&&!i.isTextureUsed(s)&&s.dispose(),i.setRenderingNeeded(),e()}))}else i.setEnvironmentTexture(a,r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setCubeTextureImages",value:function(){var e=m(g().mark((function e(t,n,r){var i=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){i._scene&&"[object Array]"==Object.prototype.toString.call(t)||e();for(var a=0;a<t.length;a++){var s=t[a];s&&s instanceof Zakeke.SceneTexture||e()}var u=function(){return i.setLongRenderingNeeded()},c=null,l=i.getCubeTextureInfo(t);if(l.url&&i._scene)if(1===t.length){var h=l.url;h&&(n?h.endsWith(".dds")?c=BABYLON.CubeTexture.CreateFromPrefilteredData(h,i._scene):h.endsWith(".hdr")?c=new BABYLON.HDRCubeTexture(h,i._scene,128,void 0,void 0,void 0,void 0,u):h.endsWith(".env")?c=new BABYLON.CubeTexture(h,i._scene,null,!1,null,u,null,void 0,!0,void 0,!0):h.endsWith(".basis")&&(c=BABYLON.CubeTexture.CreateFromPrefilteredData(h,i._scene)):i.setEnvironmentTexture(h,r))}else 6===t.length&&6===l.files.length&&6===l.extensions.length&&(n?c=new BABYLON.CubeTexture(l.url,i._scene,l.extensions,!1,l.files,u):i.setEnvironmentTexture(l.url,r,l.extensions,l.files,u));c?o.SceneHelper.whenTextureIsReadyAsync(c).then((function(){if(n){var t=i.getMaterialTexture(n,r);i.applyTexture(c,n,r),t&&!i.isTextureUsed(t)&&t.dispose(),i.setRenderingNeeded(),e()}})):e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setMobileTextureImage",value:function(e,t,n){if(this._scene&&this._sceneHelper){var r=e.get("url");if(r){var i=null;null!==(i=t?this.getMaterialTexture(t,n):this._scene.environmentTexture)&&this._sceneHelper.isTextureWithUrl(i)&&(i.metadata||(i.metadata={}),i.metadata.mobileUrl=r)}}}},{key:"setMobileCubeTextureImages",value:function(e,t,n){if(this._scene&&"[object Array]"==Object.prototype.toString.call(e)){for(var r=0;r<e.length;r++){var i=e[r];if(!i||!(i instanceof Zakeke.SceneTexture))return}var a=this.getCubeTextureInfo(e);if(a.url){var o=null;(o=t?this.getMaterialTexture(t,n):this._scene.environmentTexture)&&o instanceof BABYLON.CubeTexture&&(o.metadata||(o.metadata={}),o.metadata.mobileUrl=a.url,6===a.files.length&&(o.metadata.mobileFiles=a.files,o.metadata.mobileExtensions=a.extensions))}}}},{key:"getCubeTextureInfo",value:function(e){var t={url:null,files:[],extensions:[]};if(1===e.length)t.url=e[0].get("url")||null;else if(6===e.length){for(var n=["px","py","pz","nx","ny","nz"],r=null,i=[],a=[],o=function(e,t){var n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)},s=function(e,t){var n=e.lastIndexOf(".");if(-1!==n){var r=e.substring(0,n);if(r.endsWith("_"+t))return r.substring(0,r.length-("_"+t).length)}return null},u=function(e,t){var n=e.lastIndexOf("_"+t);return-1!==n?e.substr(n):null},c=0;c<n.length;c++)for(var l=n[c],h=0;h<e.length;h++){var f=e[h].get("url");if(f&&o(f,l)){i.push(f);var d=u(f,l);d&&a.push(d),r||(r=s(f,l));break}}t.url=r,t.files=i,t.extensions=a}return t}},{key:"isTextureUsed",value:function(e){if(this._scene&&e)for(var t=0;t<this._scene.materials.length;t++)for(var n=this._scene.materials[t].getActiveTextures(),r=0;r<n.length;r++)if(n[r].uid===e.uid)return!0;return!1}},{key:"changeTextureInvertYAsync",value:function(){var e=m(g().mark((function e(t,n,r){var i,a,s,u,c,l=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._scene||!this._sceneHelper){e.next=19;break}if(!((i=this._sceneHelper.getMaterialTexture(t,n))&&i instanceof BABYLON.Texture&&i.invertY!=r)){e.next=19;break}if(!(a=i.url)){e.next=19;break}if(s=a,/^(?:\/|[a-z]+:\/\/)/.test(a)){e.next=12;break}return e.next=10,this.getSceneRootUrl();case 10:(u=e.sent)&&(s=u+a);case 12:return c=new BABYLON.Texture(s,this._scene,void 0,r,void 0,(function(){return l.setRenderingNeeded()})),i&&i instanceof BABYLON.Texture&&(c.uScale=i.uScale,c.vScale=i.vScale,c.uOffset=i.uOffset,c.vOffset=i.vOffset,c.uAng=i.uAng,c.vAng=i.vAng,c.level=i.level,c.coordinatesIndex=i.coordinatesIndex,c.coordinatesMode=i.coordinatesMode,c.hasAlpha=i.hasAlpha,c.wrapU=i.wrapU,c.wrapV=i.wrapV,c.gammaSpace=i.gammaSpace),e.next=16,o.SceneHelper.whenTextureIsReadyAsync(c);case 16:this.applyTexture(c,t,n),i&&!this.isTextureUsed(i)&&i.dispose(),this.setRenderingNeeded();case 19:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"applyTextureByName",value:function(e,t,n){if(this._scene){var r=this._scene.textures.find((function(t){return t.name===e}));r&&this.applyTexture(r,t,n)}}},{key:"applyTexture",value:function(e,t,n){if(e&&"lightmap"==n&&(e.coordinatesIndex=1,(t instanceof BABYLON.StandardMaterial||t instanceof BABYLON.PBRMaterial||t instanceof BABYLON.PBRBaseSimpleMaterial)&&(t.useLightmapAsShadowmap=!0)),t instanceof BABYLON.StandardMaterial)switch(n){case"diffuse":t.diffuseTexture=e;break;case"emissive":t.emissiveTexture=e;break;case"ambient":t.ambientTexture=e;break;case"lightmap":t.lightmapTexture=e;break;case"opacity":t.opacityTexture=e;break;case"specular":t.specularTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"refraction":t.refractionTexture=e;break;case"bump":t.bumpTexture=e}else if(t instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRMaterial)switch(n){case"cameraColorGrading":t.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":t["".concat(n,"Texture")]=e;break;case"refraction":t.refractionTexture=e;break;case"environmentBRDF":t.environmentBRDFTexture=e;break;case"clearCoat_texture":t.clearCoat.texture=e;break;case"clearCoat_bump":t.clearCoat.bumpTexture=e;break;case"clearCoat_tint":t.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":t.clearCoat.textureRoughness=e;break;case"anisotropy_texture":t.anisotropy.texture=e;break;case"sheen_texture":t.sheen.texture=e;break;case"sheen_textureRoughness":t.sheen.textureRoughness=e;break;case"subSurface_thickness":t.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":t.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":t.subSurface.refractionIntensityTexture=e}else if(t instanceof BABYLON.ShaderMaterial)e&&e instanceof BABYLON.Texture?t.setTexture(n,e):t.removeTexture(n);else if(t instanceof Zakeke.PBRMaterial)switch(n){case"albedo":t.albedoTexture=e;break;case"bump":t.bumpTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"matCapReflection":t.matCapReflectionTexture=e;break;case"reflectivity":t.reflectivityTexture=e;break;case"microsurface":t.microsurfaceTexture=e;break;case"ambient":t.ambientTexture=e;break;case"ao":t.aoTexture=e;break;case"opacity":t.opacityTexture=e}this.setLongRenderingNeeded()}},{key:"getMaterialTexture",value:function(e,t){if(e instanceof BABYLON.StandardMaterial)switch(t){case"diffuse":return e.diffuseTexture;case"emissive":return e.emissiveTexture;case"ambient":return e.ambientTexture;case"lightmap":return e.lightmapTexture;case"opacity":return e.opacityTexture;case"specular":return e.specularTexture;case"reflection":return e.reflectionTexture;case"refraction":return e.refractionTexture;case"bump":return e.bumpTexture}else if(e instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(t){case"environment":return e.environmentTexture;case"normal":return e.normalTexture;case"emissive":return e.emissiveTexture;case"occlusion":return e.occlusionTexture;case"base":return e.baseTexture;case"metallicRoughness":return e.metallicRoughnessTexture}else if(e instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(t){case"environment":return e.environmentTexture;case"normal":return e.normalTexture;case"emissive":return e.emissiveTexture;case"occlusion":return e.occlusionTexture;case"diffuse":return e.diffuseTexture;case"specularGlossiness":return e.specularGlossinessTexture}else if(e instanceof BABYLON.PBRMaterial)switch(t){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":return e.albedoTexture;case"ambient":return e.ambientTexture;case"opacity":return e.opacityTexture;case"reflection":return e.reflectionTexture;case"emissive":return e.emissiveTexture;case"reflectivity":return e.reflectivityTexture;case"metallic":return e.metallicTexture;case"microSurface":return e.microSurfaceTexture;case"bump":return e.bumpTexture;case"lightmap":return e.lightmapTexture;case"refraction":return e.refractionTexture;case"clearCoat":case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture}else if(e instanceof Zakeke.PBRMaterial)switch(t){case"albedo":return e.albedoTexture;case"bump":return e.bumpTexture;case"reflection":return e.reflectionTexture;case"matCapReflection":return e.matCapReflectionTexture;case"reflectivity":return e.reflectivityTexture;case"microsurface":return e.microsurfaceTexture;case"ambient":return e.ambientTexture;case"ao":return e.aoTexture;case"opacity":return e.opacityTexture}return null}},{key:"removeMaterialTexture",value:function(e,t){this.applyTexture(null,e,t)}},{key:"removeMaterialMobileTexture",value:function(e,t){var n=this.getMaterialTexture(e,t);n&&n.metadata&&n.metadata.mobileUrl&&(delete n.metadata.mobileUrl,n.metadata.hasOwnProperty("mobileFiles")&&delete n.metadata.mobileFiles,n.metadata.hasOwnProperty("mobileExtensions")&&delete n.metadata.mobileExtensions,0===Object.keys(n.metadata).length&&n.metadata.constructor===Object&&delete n.metadata)}},{key:"createGroup",value:function(e,t,n){if(this._scene){var r=new BABYLON.Mesh(t,this._scene);if(r.id=Zakeke.generateUUID(),r.metadata={isRealMesh:!0,isGroup:!0},e){var i=this._scene.getMeshByID(e);i&&(r.parent=i)}return n&&n.forEach((function(e){return e.parent=r})),this.fireMeshesUpdateEvent(),r}return null}},{key:"deleteMesh",value:function(e,t){var n=this,r={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){var i=this._scene,a=this._sceneHelper,o=this._zkScene,s=i.getMeshByID(e);if(s){t&&(function e(t){for(var i=n.getMeshMaterials(t),o=0;o<i.length;o++){var u=i[o];if(u){var c=n.getMeshesUsingMaterial(u.id);1===c.length&&c.every((function(e){return a.meshHasParent(e.id,s.id)}))&&(r.materialIDs.push(i[o].id),i[o].dispose())}}t.getChildMeshes().forEach((function(t){return e(t)}))}(s),this.fireMaterialsUpdateEvent());var u=a.getCameraPivot();u&&u===s&&this.setCameraPivot(null),this.isMeshSelected(s)&&this.unselectMesh(s.id),s.dispose(),r.meshIDs.push(e)}this.fireMeshesUpdateEvent(),this.setRenderingNeeded(),r.materialIDs.forEach((function(e){var t=o.getLibraryShaderMaterialIDForSceneMaterial(e);t&&o.unregisterShaderMaterial(t)}))}return r}},{key:"deleteAllMeshes",value:function(){if(this._scene&&this._sceneHelper){for(var e=0;e<this._scene.meshes.length;e++){var t=this._scene.meshes[e];this._sceneHelper.isRealMesh(t)&&(this._scene.meshes.splice(e--,1),t.dispose())}this.setCameraPivot(null),this.setRenderingNeeded()}}},{key:"deleteDuplicatedMeshesWithDifferentParent",value:function(e,t){var n=this,r={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){var i=this._scene,a=this._sceneHelper,o=this._zkScene,s=function i(o){for(var s=n.getSceneMeshesByName(o.name),u=!1,c=0;c<s.length;c++){var l=s[c];if(l.id!=o.id&&!a.meshHasParent(l.id,e)){if(t)for(var h=n.getMeshMaterials(l),f=0;f<h.length;f++)1==n.getMeshesUsingMaterial(h[f].id).length&&(r.materialIDs.push(h[f].id),h[f].dispose());r.meshIDs.push(l.id),l.dispose(),s.splice(c--,1),u=!0;break}}u||o.getChildMeshes().forEach((function(e){return i(e)}))},u=i.getMeshByID(e);u&&u.getChildMeshes().forEach((function(e){return s(e)})),this.setRenderingNeeded(),r.materialIDs.forEach((function(e){var t=o.getLibraryShaderMaterialIDForSceneMaterial(e);t&&o.unregisterShaderMaterial(t)}))}return r}},{key:"deleteDuplicatedChildMeshes",value:function(e,t){var n=this,r={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){var i=this._scene,a=this._sceneHelper,o=this._zkScene,s=function i(o){for(var s=n.getSceneMeshesByName(o.name),u=!1,c=0;c<s.length;c++){var l=s[c];if(l.id!=o.id&&!a.meshHasParent(l.id,e)){if(t)for(var h=n.getMeshMaterials(o),f=0;f<h.length;f++)1==n.getMeshesUsingMaterial(h[f].id).length&&(r.materialIDs.push(h[f].id),h[f].dispose());r.meshIDs.push(o.id),o.dispose(),u=!0;break}}if(!u)for(var d=o.getChildMeshes(),p=0;p<d.length;p++)i(d[p])},u=i.getMeshByID(e);u&&u.getChildMeshes().forEach((function(e){return s(e)})),this.setRenderingNeeded(),r.materialIDs.forEach((function(e){var t=o.getLibraryShaderMaterialIDForSceneMaterial(e);t&&o.unregisterShaderMaterial(t)}))}return r}},{key:"deleteMaterial",value:function(e){if(this._scene&&this._sceneHelper){var t=this._scene.getMaterialByID(e);t&&(this.deleteMaterialInternal(t),this.fireMaterialsUpdateEvent(),this.setRenderingNeeded())}}},{key:"deleteMaterialInternal",value:function(e){if(this._scene&&this._sceneHelper&&e){var t=e.id;if(this._zkScene){var n=this._zkScene.getLibraryShaderMaterialIDForSceneMaterial(e.id);n&&this._zkScene.unregisterShaderMaterial(n)}var r=this._sceneHelper.getTexturesExclusivelyForMaterial(e);e.dispose();for(var i=0;i<r.length;i++)r[i].dispose();this._sceneHelper.removeSceneMaterialMetadata(t)}}},{key:"deleteAllMaterials",value:function(){if(this._scene){for(;this._scene.materials.length>0;){var e=this._scene.materials.pop();e&&this.deleteMaterialInternal(e)}this.fireMaterialsUpdateEvent(),this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}}},{key:"renameMaterial",value:function(e,t){if(this._scene){var n=this._scene.getMaterialByID(e);n&&(n.name=t),this.fireMaterialsUpdateEvent()}}},{key:"cloneMesh",value:function(e){var t=null;return this._scene&&this._sceneHelper&&(t=this._sceneHelper.cloneMesh(e,!1,!1),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()),t}},{key:"duplicateMesh",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;return this._scene&&this._sceneHelper&&(n=this._sceneHelper.cloneMesh(e,!0,t),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()),n}},{key:"cloneMaterial",value:function(e,t,n){var r=null;if(this._scene&&this._sceneHelper){var i=this._scene.getMaterialByID(e);if(i){var a=n||i.name+" - clone";if(r=i.clone(a)){var o=t||Zakeke.generateUUID();if(r.id=o,this._zkScene){var s=this._zkScene.getMappingForSceneMaterial(i.id);if(s){var u=s.get("libraryMaterialID");this._zkScene.mapLibraryMaterial(u,r.id);for(var c=this._sceneHelper.getTexturesForMaterial(r),l=0;l<c.length;l++)c[l].materialMapping={libraryMaterialID:u,sceneMaterialID:r.id}}}}}this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}return r}},{key:"createMaterial",value:function(e,t,n){var r=null;if(this._scene){var i=e||"new material",a=t||"Standard";"Standard"===a?r=new BABYLON.StandardMaterial(i,this._scene):"PBRMetallicRoughness"===a?((r=new BABYLON.PBRMetallicRoughnessMaterial(i,this._scene)).subSurface.indexOfRefraction=1,r._imageProcessingConfiguration.contrast=1):"PBRSpecularGlossiness"===a?r=new BABYLON.PBRSpecularGlossinessMaterial(i,this._scene):"PBR"===a?((r=new BABYLON.PBRMaterial(i,this._scene)).enableSpecularAntiAliasing=!0,r.metallic=.9,r.roughness=.3,r.indexOfRefraction=1):"NewPBR"===a&&(r=new Zakeke.PBRMaterial(i,this._scene)),r&&(r.id=Zakeke.generateUUID(),n&&(r.metadata||(r.metadata={}),r.metadata.group=n)),this.checkSceneEmptyEnvironmentTexture(),this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}return r}},{key:"changeMeshParent",value:function(e,t){if(this._scene){var n=this._scene.getMeshByID(e);if(n&&(!n.parent||n.parent.id!=t)){var r=this._scene.getMeshByID(t);n.parent=r,this.setRenderingNeeded(),this.fireMeshesUpdateEvent()}}}},{key:"removeMeshParent",value:function(e){if(this._scene){var t=this._scene.getMeshByID(e);t&&(t.parent=null,this.fireMeshesUpdateEvent())}}},{key:"setManipulatedNode",value:function(e){e!==this._manipulatedNode&&(this._manipulatedNode=e,this.showHideEditControl(this._editControlVisible),this.setRenderingNeeded())}},{key:"importLibraryMaterial",value:function(e){if(this._scene&&this._sceneHelper&&this._zkScene&&e&&e instanceof Zakeke.Material){e.get("shaders")&&this.checkShaderMaterial(e);var t=e.get("JSON")||e.get("json"),n=e.get("rootUrl");if(t&&n){var r=JSON.parse(t),i=BABYLON.Material.Parse(r,this._scene,n);if(i){if(i.id=Zakeke.generateUUID(),this._zkScene.mapLibraryMaterial(e.getMaterialID(),i.id),e.get("shaders")){var a=e.get("shaders"),o=a.get("name"),s=a.get("vertex"),u=a.get("fragment");o&&s&&u&&this._zkScene.registerShaderMaterial(e.getMaterialID(),o,s,u),this.setupShaderMaterialCameraPosition(i)}for(var c=this._sceneHelper.getTexturesForMaterial(i),l=0;l<c.length;l++)c[l].materialMapping={libraryMaterialID:e.getMaterialID(),sceneMaterialID:i.id}}}this.fireMaterialsUpdateEvent(),this.setRenderingNeeded()}}},{key:"getTexturesForMaterial",value:function(e){return this._sceneHelper?this._sceneHelper.getTexturesForMaterial(e):[]}},{key:"getStandardMaterialTextures",value:function(e){return this._sceneHelper?this._sceneHelper.getStandardMaterialTextures(e):[]}},{key:"getPBRBaseSimpleMaterialTextures",value:function(e){return this._sceneHelper?this._sceneHelper.getPBRBaseSimpleMaterialTextures(e):[]}},{key:"getPBRMaterialTextures",value:function(e){return this._sceneHelper?this._sceneHelper.getPBRMaterialTextures(e):[]}},{key:"getNewPBRMaterialTextures",value:function(e){return this._sceneHelper?this._sceneHelper.getNewPBRMaterialTextures(e):[]}},{key:"getPBRMetallicRoughnessMaterialTextures",value:function(e){return this._sceneHelper?this._sceneHelper.getPBRMetallicRoughnessMaterialTextures(e):[]}},{key:"getPBRSpecularGlossinessMaterialTextures",value:function(e){return this._sceneHelper?this._sceneHelper.getPBRSpecularGlossinessMaterialTextures(e):[]}},{key:"removeCameraLocation",value:function(e){var t;null===(t=this._zkScene)||void 0===t||t.get("cameraLocations").remove(e),this.fireCameraLocationsUpdateEvent()}},{key:"saveCameraLocation",value:function(e){if(this._zkScene&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var t=this._camera.position,n=this._camera.target,r=new Zakeke.SceneCameraLocation;r.set("name",e),r.set("px",t.x),r.set("py",t.y),r.set("pz",t.z),r.set("tx",n.x),r.set("ty",n.y),r.set("tz",n.z),this._zkScene.get("cameraLocations").push(r),this.fireCameraLocationCreatedEvent(r),this.fireCameraLocationsUpdateEvent()}}},{key:"clearCameraLocations",value:function(){if(this._zkScene){for(var e=this._zkScene.get("cameraLocations");e.length>0;)e.remove(e.at(0));this.fireCameraLocationsUpdateEvent()}}},{key:"getAllCameraLocations",value:function(){var e=[];if(this._zkScene)for(var t=0;t<this._zkScene.get("cameraLocations").length;t++)e.push(this._zkScene.get("cameraLocations").at(t));return e}},{key:"saveMeshLocation",value:function(e){this._meshLocationsManager&&this._meshLocationsManager.saveMeshLocation(e)}},{key:"saveExplodedMeshLocation",value:function(){this._meshLocationsManager&&this._meshLocationsManager.saveExplodedMeshLocation()}},{key:"saveCollapsedMeshLocation",value:function(){this._meshLocationsManager&&this._meshLocationsManager.saveCollapsedMeshLocation()}},{key:"onBeforeSaveMeshLocation",value:function(){this._oldManipulatedNode=this._manipulatedNode,this.setManipulatedNode(null)}},{key:"onAfterSaveMeshLocation",value:function(){this.fireMeshLocationsUpdateEvent(),this.setManipulatedNode(this._oldManipulatedNode)}},{key:"clearMeshLocations",value:function(){this._meshLocationsManager&&this._meshLocationsManager.clearMeshLocations()}},{key:"getAllMeshLocations",value:function(){var e=[];if(this._zkScene)for(var t=0;t<this._zkScene.get("meshLocations").length;t++)e.push(this._zkScene.get("meshLocations").at(t));return e}},{key:"makeLibraryMaterial",value:function(e,t){var n=this;return new Promise((function(r,i){n.getMaterialScreenShotForLibrary(e,(function(a){a?n.createLibraryMaterial(e,t,a,r):i("No data generated for screenshot")}))}))}},{key:"getMaterialScreenShotForLibrary",value:function(e,t){var n=this;this._scene&&this._sceneHelper?(this.resetEditorEnvironment(),this.removeGround(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null),this._sceneHelper.takeMaterialScreenshotAsync(e,500,500).then((function(e){c.Utils.cropImageTransparency(e,500,500,(function(e){n.refreshEnvironment(),t&&t(e)}))}))):t&&t(null)}},{key:"createLibraryMaterial",value:function(e,t,n,r){var i=this,a=null,o=function(){a&&i.deleteMaterial(a.id),r&&r()};if(this._scene&&this._sceneHelper&&this._zkScene){var s=this._scene,u=this._sceneHelper,c=this._zkScene;if(s.getMaterialByID(e)){var l=new Zakeke.Material;l.set("name",t),l.set("imageData",n);var h=e,f=h.replace(/-/g,""),d=l.getMaterialID(),p=d.replace(/-/g,"");if(a=this.cloneMaterial(e,d,t)){for(var g=c.getSourcesIDs(),v=(c.getLibraryMaterialIDs(),u.getTexturesForMaterial(a)),m=[],y=0;y<v.length;y++){var _=v[y];if(_.materialMapping){var b=_.materialMapping.libraryMaterialID;b&&m.push(b)}}var x=new Zakeke.Materials,w=["px","py","pz","nx","ny","nz"],k=function(e,t){var n=function(e){var t=e.lastIndexOf(".");if(-1!==t){var n=e.substring(0,t);if(w.some((function(e){return n.endsWith("_"+e)})))return n.substring(0,n.length-3)}return e}(e);return n.endsWith(t)},S=function(){for(var e=0;e<v.length;e++){var t=v[e];if(t&&u.isTextureWithUrl(t)&&t.url){for(var n=null,r=null,i=null,s=null,d=0;d<g.length;d++){var m=g[d].replace(/-/g,"");if(-1!=t.url.indexOf(m)){n=g[d],r=m;break}}null==n&&t.materialMapping&&(i=t.materialMapping.libraryMaterialID)&&(s=i.replace(/-/g,""));var y=[];if(i){for(var _=0;_<x.length;_++)if(x.at(_).getMaterialID()==i)for(var b=x.at(_),w=0;w<b.get("textureImages").length;w++){var S=b.get("textureImages").at(w);k(S.get("imageUrl"),t.url)&&y.push({fileObjectID:S.get("fileObjectID"),url:S.get("imageUrl"),fileLength:S.get("fileLength")})}}else if(n){var C=c.get("sources").findSource(n);if(C)for(var M=0;M<C.get("textures").length;M++){var A=C.get("textures").at(M);k(A.get("url"),t.url)&&y.push({fileObjectID:A.get("fileObjectID"),url:A.get("url"),fileLength:A.get("fileLength")})}}else for(var E=0;E<c.get("textures").length;E++){var T=c.get("textures").at(E);k(T.get("url"),t.url)&&y.push({fileObjectID:T.get("fileObjectID"),url:T.get("url"),fileLength:T.get("fileLength")})}for(var I=0;I<y.length;I++){var L=new Zakeke.MaterialSourceTextureImage;L.set("fileObjectID",y[I].fileObjectID),L.set("url",y[I].url||""),L.set("fileLength",y[I].fileLength||-1),i?L.set("materialID",i):n?(L.set("sceneID",c.getSceneID()),L.set("sourceID",n)):(L.set("sceneID",c.getSceneID()),L.set("materialID",h)),l.get("sourceTextureImages").push(L)}var O="",P="",D=t.name;if(n&&r){var B=t.url.indexOf(r);-1!=B&&(D=t.url.substring(B)),O=r,P="textures/"+p,t.name=D.replace(new RegExp(O,"g"),P)}else if(i&&s)O=s,P=p,t.name=D.replace(new RegExp("textures/([A-Za-z0-9]*)/(.*)","g"),"textures/"+P+"/$2");else{var N=t.url.lastIndexOf("/");-1!==N&&-1!==(N=t.url.lastIndexOf("/",N-1))&&-1!=(N=t.url.lastIndexOf("/",N-1))&&(D=t.url.substring(N+1)),O=f,P=p,t.name=D.replace(new RegExp("textures/([A-Za-z0-9]*)/(.*)","g"),"textures/"+P+"/$2")}t.url=t.name}}if(a){var R=a.serialize(),j=JSON.stringify(R);l.set("JSON",j),l.save(null,{success:function(e,t,n){o()},error:function(e,t,n){o()}})}else o()};if(m.length>0){var C={ids:m.join(",")};try{x.fetch({success:function(e,t,n){x=e,S()},error:function(e,t,n){Logger.info("Errore nel salvataggio del materiale di libreria"),o()},data:C})}catch(M){}}else S()}else o()}else o()}else o()}},{key:"lightsLayer_onLightSelected",value:function(e){this.fireLightSelectedEvent(e)}},{key:"isDefaultLight",value:function(e){return!!this._sceneHelper&&this._sceneHelper.isDefaultLight(e)}},{key:"createLight",value:function(e,t){var n=null;if(this._scene){var r=e||"new light",i=t||"Point",a=BABYLON.Vector3.Zero(),o=BABYLON.Vector3.Zero(),s=25*Math.PI/180;"Point"==i?n=new BABYLON.PointLight(r,a,this._scene):"Directional"==i?n=new BABYLON.DirectionalLight(r,o,this._scene):"Spot"==i?n=new BABYLON.SpotLight(r,a,o,s,2,this._scene):"Hemispheric"==i&&(n=new BABYLON.HemisphericLight(r,o,this._scene)),n&&(n.id=Zakeke.generateUUID()),this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded(),this.fireLightsUpdateEvent()}return n}},{key:"cloneLight",value:function(e,t,n){var r=null;if(this._scene){var i=this._scene.getLightByID(e);if(i){var a=n||i.name+" - clone";if(r=i.clone(a)){r.name=a;var o=t||Zakeke.generateUUID();r.id=o,this._lightsLayer&&this._lightsLayer.refresh()}}this.setRenderingNeeded(),this.fireLightsUpdateEvent()}return r}},{key:"renameLight",value:function(e,t){if(this._scene){var n=this._scene.getLightByID(e);n&&(n.name=t,this._lightsLayer&&this._lightsLayer.refresh()),this.fireLightsUpdateEvent()}}},{key:"deleteLight",value:function(e){if(this._scene){var t=this._scene.getLightByID(e);t&&(t.dispose(),this._scene.meshes.forEach((function(e){return e._markSubMeshesAsLightDirty()})),this._lightsLayer&&this._lightsLayer.refresh()),this.setRenderingNeeded(),this.fireLightsUpdateEvent()}}},{key:"getAllLights",value:function(){return this._scene?this._scene.lights:[]}},{key:"canShowLights",value:function(){return this._showLights&&this._envMode==u.EnvironmentMode.Editor}},{key:"showHideLights",value:function(e){this._showLights=e,this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded()}},{key:"canShowGround",value:function(){return this._showGround&&this._envMode==u.EnvironmentMode.Editor}},{key:"removeGround",value:function(){this._ground&&(this._ground.dispose(),this._ground=null),this.setRenderingNeeded()}},{key:"refreshGround",value:function(){var e=this;if(this._scene)if(this.removeGround(),this.canShowGround()){var t=this._scene.clearColor,n=t.toHexString(),r=c.Utils.isColorDark(n)?.8:-.5,i=BABYLON.Color3.FromHexString(c.Utils.changeColorLuminosity(n,r)),a=1e3,o=1;if(this.countSceneMeshes()>0){var s=this._scene.getWorldExtends((function(t){return e.isRealMesh(t)})),u=1.5*s.max.subtract(s.min).length();isFinite(u)&&(o=(a=20*u)/100)}this._ground=BABYLON.Mesh.CreateGround("ground",a,a,10,this._scene),this._ground.doNotSerialize=!0,this._ground.isVisible=this.showGround,this._ground.isPickable=!1,this._ground.metadata={isRealMesh:!1,isGround:!0};var l=new BABYLON.GridMaterial("groundMaterial",this._scene);l.doNotSerialize=!0,l.backFaceCulling=!1,l.mainColor=new BABYLON.Color3(t.r,t.g,t.b),l.opacity=1,l.gridRatio=o,l.lineColor=i,l.metadata={isRealMaterial:!1},this._ground.material=l,this.setRenderingNeeded()}else this.setRenderingNeeded()}},{key:"showHideGround",value:function(e){this.showGround=e,this.refreshGround()}},{key:"canShowAxes",value:function(){return this._showAxes&&this._envMode==u.EnvironmentMode.Editor}},{key:"showHideAxes",value:function(e){this._showAxes=e,this._axesLayer&&this._axesLayer.refresh(),this.setRenderingNeeded()}},{key:"showHideHighlight",value:function(e){this._showHighlight=e;var t=this.getSelectedRootMesh();this.highlightMesh(t,e),this.setRenderingNeeded()}},{key:"setHighlightOver",value:function(e){this._highlightOver=e}},{key:"highlightMesh",value:function(e,t){this._showHighlight&&this._envMode==u.EnvironmentMode.Editor?(e&&e instanceof BABYLON.Mesh&&(t?(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer&&this._highlightLayer.addMesh(e,BABYLON.Color3.FromHexString(this._highlightColor))):this._highlightLayer&&this._highlightLayer.removeMesh(e)),this.setLongRenderingNeeded()):this.deleteHighlightLayer()}},{key:"highlightMeshOver",value:function(e){this._showHighlight&&this._envMode==u.EnvironmentMode.Editor?(this._meshOver&&this._meshOver instanceof BABYLON.Mesh&&!this.isMeshSelected(this._meshOver)&&(e&&this._highlightOver?(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer&&!this._highlightLayer.hasMesh(this._meshOver)&&this._highlightLayer.addMesh(this._meshOver,BABYLON.Color3.FromHexString(this.highlightOverColor))):this._highlightLayer&&this._highlightLayer.removeMesh(this._meshOver)),this.setLongRenderingNeeded()):this.deleteHighlightLayer()}},{key:"showHideEditControl",value:function(e){this._scene&&this._camera&&this._canvas&&(this._editControlVisible=e,!this._editControl||e&&null!=this._manipulatedNode||(this._editControl.detach(),this._editControl=null),e&&this._manipulatedNode&&(this._editControl?this._editControl.switchTo(this._manipulatedNode):(this._editControl=new this._EditControl(this._manipulatedNode,this._camera,this._canvas,.75,!0),this._editControl.setRotSnapValue(3.14/18),this._editControl.setTransSnapValue(.5),this._editControl.setScaleSnapValue(.25)),this.setEditingMode(this._editingMode)),this.setRenderingNeeded())}},{key:"setEditingMode",value:function(e){this._editingMode=e,this._editControl&&(e===u.EditingMode.Translate?this._editControl.enableTranslation():e===u.EditingMode.Rotate?this._editControl.enableRotation():e===u.EditingMode.Scaling&&this._editControl.enableScaling()),this.setRenderingNeeded()}},{key:"undoEditing",value:function(){this._editControl&&this._editControl.undo()}},{key:"redoEditing",value:function(){this._editControl&&this._editControl.redo()}},{key:"setEnvironmentMode",value:function(e){e!=this._envMode&&(this._envMode=e,this.refreshEnvironment())}},{key:"refreshEnvironment",value:function(){this._scene&&(this.setRenderingNeeded(),this._envMode==u.EnvironmentMode.Editor?(this.disableAntialiasing(),this.resetEditorEnvironment(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null)):(this.deleteHighlightLayer(),this.refreshGround(),this._zkScene&&(this._environmentManager&&this._environmentManager.scene==this._scene||(this._environmentManager=new r.EnvironmentManager(this._zkScene,this._scene)),this._environmentManager.update(),this.setLongRenderingNeeded())),this.refreshGround(),this._lightsLayer&&this._lightsLayer.refresh(),this._axesLayer&&this._axesLayer.refresh(),this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this.autoRender=this._camera.useAutoRotationBehavior),this.setRenderingNeeded())}},{key:"zoomOnMesh",value:function(e){this._sceneHelper&&this._sceneHelper.zoomOnMesh(e)}},{key:"moveCameraToMeshPosition",value:function(e){if(this._scene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var t=this._sceneHelper.getMeshHierarchyCenter(e),n=this._camera.target,r=this._camera.radius,i=t.subtract(n),a=i.length();if(isFinite(a)){var o=i.normalize(),s=n.add(o.scale(r)),u=new BABYLON.Ray(s,o.scale(-1),r),c=this._scene.pickWithRay(u,(function(t){return t===e}));if(c&&c.hit){var l=new BABYLON.Vector3,h=new BABYLON.Quaternion,f=new BABYLON.Vector3;e.getWorldMatrix().decompose(l,h,f),l.length(),c.pickedPoint;var d=c.getNormal();d&&(o=d.normalize(),s=n.add(o.scale(r)))}this._sceneHelper.animateCamera(n,s,1)}this.setRenderingNeeded()}}},{key:"exportMeshToOBJ",value:function(e){if(this._scene){var t=this._scene.getMeshByID(e);if(t&&t instanceof BABYLON.Mesh){var n=BABYLON.OBJExport.OBJ([t]);this.saveTextAsFile(n,t.name+".obj")}}}},{key:"exportMeshGeometryToJson",value:function(e){if(this._scene){var t=this._scene.getMeshByID(e);if(t&&t instanceof BABYLON.Mesh){var n={positions:t.getVerticesData(BABYLON.VertexBuffer.PositionKind),normals:t.getVerticesData(BABYLON.VertexBuffer.NormalKind),colors:t.getVerticesData(BABYLON.VertexBuffer.ColorKind),uvs:t.getVerticesData(BABYLON.VertexBuffer.UVKind),uvs2:t.getVerticesData(BABYLON.VertexBuffer.UV2Kind),indices:t.getIndices()},r=JSON.stringify(n,null,0);this.saveTextAsFile(r,t.name+".json")}}}},{key:"enableDisableARForMesh",value:function(e,t){var n=this.getMeshByID(e);n&&(n.metadata||(n.metadata={}),n.metadata.AR=t)}},{key:"isAREnabledForMesh",value:function(e){var t=this.getMeshByID(e);return!(!t||!t.metadata)&&(void 0===t.metadata.AR||t.metadata.AR)}},{key:"enableDisableTryOnForMesh",value:function(e,t){var n=this.getMeshByID(e);n&&(n.metadata||(n.metadata={}),n.metadata.AR=t)}},{key:"isTryOnEnabledForMesh",value:function(e){var t=this.getMeshByID(e);return!(!t||!t.metadata)&&(void 0===t.metadata.TryOn||t.metadata.TryOn)}},{key:"splitSubMeshes",value:function(e){if(this._scene&&this._sceneHelper){var t=this._scene.getMeshByID(e);t&&this._sceneHelper.createMeshesFromSubMeshes(t)}}},{key:"flipMeshFaces",value:function(e){var t=this.getMeshByID(e);t&&function e(t){t instanceof BABYLON.Mesh&&t.flipFaces(!0),t.getChildMeshes().forEach((function(t){return e(t)}))}(t)}},{key:"convertSceneToScreenPoint",value:function(e,t){if(this._canvas){var n=0,r=0,i=this._canvas;do{n+=i.offsetLeft,r+=i.offsetTop,i=i.offsetParent}while(i);return{X:e+n,Y:t+r}}return null}},{key:"saveTextAsFile",value:function(e,t){var n=new Blob([e],{type:"text/plain"}),r=window.URL.createObjectURL(n),i=t;this.downloadFile(i,r)}},{key:"saveBytesAsFile",value:function(e,t){var n=new Blob([e]),r=window.URL.createObjectURL(n);this.downloadFile(t,r)}},{key:"saveBlobAsFile",value:function(e,t,n){var r=null;r=n?window.URL.createObjectURL(new Blob([e],{type:n})):window.URL.createObjectURL(new Blob([e])),this.downloadFile(t,r)}},{key:"downloadFile",value:function(e,t){var n=document.createElement("a");n.download=e,n.innerHTML="Download File",n.href=t,n.onclick=function(e){document.body.removeChild(n)},n.style.display="none",document.body.appendChild(n),n.click()}},{key:"exportDracoEncodedToFile",value:function(e){if(this._scene){var t=this._scene.getMeshByID(e);if(t){var n=this.getDracoEncodedGeometry(t);n&&this.saveBytesAsFile(n,t.name+"_draco.dat")}}}},{key:"getDracoEncodedGeometry",value:function(e){var t=null;if(this._scene&&e&&e instanceof BABYLON.Mesh){var n=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),r=e.getVerticesData(BABYLON.VertexBuffer.NormalKind),i=e.getVerticesData(BABYLON.VertexBuffer.ColorKind),a=e.getVerticesData(BABYLON.VertexBuffer.UVKind),o=e.getVerticesData(BABYLON.VertexBuffer.UV2Kind),s=e.getIndices(),u={};s&&(u.indices=new Uint32Array(s)),n&&(u.positions=new Float32Array(n)),r&&(u.normals=new Float32Array(r)),a&&(u.uvs=new Float32Array(a)),o&&(u.uvs2=new Float32Array(o)),i&&(u.colors=new Uint32Array(i));var c=DracoEncoderModule(),l=new c.Encoder,h=new c.MeshBuilder,f=new c.Mesh,d=u.indices.length/3,p=u.positions.length/3;h.AddFacesToMesh(f,d,u.indices),h.AddFloatAttributeToMesh(f,c.POSITION,p,3,u.positions),u.normals&&h.AddFloatAttributeToMesh(f,c.NORMAL,p,3,u.normals),u.colors&&h.AddFloatAttributeToMesh(f,c.COLOR,p,4,u.colors),u.uvs&&h.AddFloatAttributeToMesh(f,c.TEX_COORD,p,2,u.uvs),u.uvs2&&h.AddFloatAttributeToMesh(f,c.TEX_COORD,p,2,u.uvs2),l.SetSpeedOptions(5,5),l.SetAttributeQuantization(c.POSITION,14),l.SetAttributeQuantization(c.TEX_COORD,12),l.SetAttributeQuantization(c.NORMAL,10),l.SetAttributeQuantization(c.COLOR,10),l.SetAttributeQuantization(c.GENERIC,8),l.SetEncodingMethod(c.MESH_EDGEBREAKER_ENCODING);var g=new c.DracoInt8Array,v=l.EncodeMeshToDracoBuffer(f,g);t=new ArrayBuffer(v);for(var m=new Int8Array(t),y=0;y<v;++y)m[y]=g.GetValue(y);c.destroy(f),c.destroy(g),c.destroy(l),c.destroy(h)}return t}},{key:"createCustomMesh",value:function(){var e=null;if(this._scene){e=new BABYLON.Mesh("custom",this._scene);var t=[-5,2,-3,-7,-2,-3,-3,-2,-3,5,2,3,7,-2,3,3,-2,3],n=[0,1,2,3,4,5],r=[];BABYLON.VertexData.ComputeNormals(t,n,r);var i=new BABYLON.VertexData;i.positions=t,i.indices=n,i.colors=[1,0,0,1,1,0,0,1,1,0,0,1,0,1,0,0,0,1,1,0,0,1,0,1],i.normals=r,i.uvs=[0,1,0,0,1,0],i.applyToMesh(e)}return e}},{key:"createBox",value:function(e,t){var n=null,r=null;return this._scene&&this._sceneHelper&&(e&&(r=this._scene.getMeshByID(e)),n=this._sceneHelper.createBox(r,t),this.setLongRenderingNeeded()),n}},{key:"getSceneBoundingBox",value:function(){var e=null;if(this._scene)for(var t=0;t<this._scene.meshes.length;t++){var n=this._scene.meshes[t];if(n&&n.metadata&&n.metadata.sceneBoundingBox){e=n;break}}return e}},{key:"getOrCreateSceneBoundingBox",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getSceneBoundingBox();return t||(t=this.createBoundingBox(null,"SceneBoundingBox",e))&&(t.metadata||(t.metadata={}),t.metadata.boundingBox=!0,t.metadata.sceneBoundingBox=!0),t}},{key:"createSceneBoundingBox",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getSceneBoundingBox();return t?t.isVisible=e:(t=this.createBoundingBox(null,"SceneBoundingBox",e))&&(t.metadata||(t.metadata={}),t.metadata.boundingBox=!0,t.metadata.sceneBoundingBox=!0),t}},{key:"createBoundingBox",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;if(e&&(r=this.getMeshByID(e)),this._sceneHelper){var i=this._sceneHelper.createBoundingBox(r,t);return i&&(i.isVisible=n),this.setLongRenderingNeeded(),i}return null}},{key:"createSphere",value:function(e,t){var n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createSphere(r,t),this.setLongRenderingNeeded()),n}},{key:"createPlane",value:function(e,t){var n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createPlane(r,t),this.setLongRenderingNeeded()),n}},{key:"createDisc",value:function(e,t){var n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createDisc(r,t),this.setLongRenderingNeeded()),n}},{key:"createCylinder",value:function(e,t){var n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createCylinder(r,t),this.setLongRenderingNeeded()),n}},{key:"createTorus",value:function(e,t){var n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createTorus(r,t),this.setLongRenderingNeeded()),n}},{key:"createKnot",value:function(e,t){var n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createKnot(r,t),this.setLongRenderingNeeded()),n}},{key:"createRibbon",value:function(e,t){var n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createRibbon(r,t),this.setLongRenderingNeeded()),n}},{key:"createRoundedCubeAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createRoundedCubeAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createRoundedCylinderAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createRoundedCylinderAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createMatBallAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createMatBallAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createMaleHeadAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createMaleHeadAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createFemaleHeadAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createFemaleHeadAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createPokemonBallAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createPokemonBallAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createShaderBallAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createShaderBallAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createBootsAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createBootsAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createSuzanneAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createSuzanneAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createStepPyramidAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createStepPyramidAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createTeapotAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createTeapotAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createAlloyWheelAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createAlloyWheelAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createTryonReferenceGlassesFrameAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=8;break}return e.next=6,this._sceneHelper.createTryonReferenceGlassesFrameAsync(i,n);case 6:r=e.sent,this.setLongRenderingNeeded();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"importMeshesFromUrlAsync",value:function(){var e=m(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=null,this._scene&&t&&(i=this._scene.getMeshById(t)),!this._sceneHelper){e.next=9;break}return e.next=6,this._sceneHelper.importMeshesFromUrlAsync(n,i);case 6:r=e.sent,this.checkSceneEmptyEnvironmentTexture(),this.setLongRenderingNeeded();case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"connectMeshToModelSideAsync",value:function(){var e=m(g().mark((function e(t,n,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._sceneDesignManager&&this._sceneDesignManager.connectMeshToModelSideAsync(t,n,r);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"clearMeshDesignManagers",value:function(){this._sceneDesignManager&&this._sceneDesignManager.clearMeshDesignManagers()}},{key:"getMeshDesignMananger",value:function(e,t){var n;return this._sceneDesignManager&&this.scene?null===(n=this._sceneDesignManager)||void 0===n?void 0:n.getMeshDesignMananger(e,t):null}},{key:"translateDesignView",value:function(e,t,n,r){this._sceneDesignManager&&this._sceneDesignManager.translateDesignView(e,t,n,r)}},{key:"rotateDesignView",value:function(e,t,n,r,i){this._sceneDesignManager&&this._sceneDesignManager.rotateDesignView(e,t,n,r,i)}},{key:"scaleDesignView",value:function(e,t,n,r,i,a){this._sceneDesignManager&&this._sceneDesignManager.scaleDesignView(e,t,n,r,i,a)}},{key:"setDesignViewTextureUVChannelAsync",value:function(){var e=m(g().mark((function e(t,n,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneDesignManager){e.next=3;break}return e.next=3,this._sceneDesignManager.setDesignViewTextureUVChannelAsync(t,n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setDesignViewFormFactorAsync",value:function(){var e=m(g().mark((function e(t,n,r,i){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneDesignManager){e.next=3;break}return e.next=3,this._sceneDesignManager.setDesignViewFormFactorAsync(t,n,r,i);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"setSceneSizeCm",value:function(e,t){var n=this.getOrCreateSceneBoundingBox(!1);n&&this.setMeshSizeCm(n.id,e,t)}},{key:"getSceneWidthCm",value:function(){var e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.width?e.metadata.sizecm.width:null}},{key:"getSceneHeightCm",value:function(){var e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.height?e.metadata.sizecm.height:null}},{key:"getSceneDepthCm",value:function(){var e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.depth?e.metadata.sizecm.depth:null}},{key:"setMeshSizeCm",value:function(e,t,n){var r=this.getMeshByID(e);if(r){var i=null;t&&"number"===typeof t&&!isNaN(t)&&("width"===n?i={width:t}:"height"===n?i={height:t}:"depth"===n&&(i={depth:t})),r.metadata||(r.metadata={}),r.metadata.sizecm=i}}},{key:"getMeshWidthCm",value:function(e){var t=this.getMeshByID(e);return t&&t.metadata&&t.metadata.sizecm&&t.metadata.sizecm.width?t.metadata.sizecm.width:null}},{key:"getMeshHeightCm",value:function(e){var t=this.getMeshByID(e);return t&&t.metadata&&t.metadata.sizecm&&t.metadata.sizecm.height?t.metadata.sizecm.height:null}},{key:"getMeshDepthCm",value:function(e){var t=this.getMeshByID(e);return t&&t.metadata&&t.metadata.sizecm&&t.metadata.sizecm.depth?t.metadata.sizecm.depth:null}},{key:"getMaterialsPreviewsAsync",value:function(){var e=m(g().mark((function e(t,n,r,i){var o,s,u,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],!(this._scene&&this._sceneHelper&&this._zkScene)){e.next=11;break}return e.next=5,this.getSceneRootUrl();case 5:if(!(s=e.sent)){e.next=11;break}return e.next=9,a.MaterialsPreview.getPreviewsAsync(this._scene,s,t,{width:n,height:r},!0);case 9:for(c in(u=e.sent).previewFiles)o.push(u.previewFiles[c]);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"getAllMaterialsPreviewsAsync",value:function(){var e=m(g().mark((function e(t,n,r){var i,a,o,s,u=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(u.length>3&&void 0!==u[3])||u[3],a=[],!(this._scene&&this._sceneHelper&&this._zkScene)){e.next=6;break}return o=this._sceneHelper.getAllMaterials(),s=o.map((function(e){return e.id})),e.abrupt("return",this.getMaterialsPreviewsAsync(s,t,n,r,i));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"downloadMaterialsPreviewsAsync",value:function(){var e=m(g().mark((function e(t,n,r,i){var o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._scene&&this._sceneHelper&&this._zkScene)){e.next=7;break}return e.next=3,this.getSceneRootUrl();case 3:if(!(o=e.sent)){e.next=7;break}return e.next=7,a.MaterialsPreview.downloadPreviewsAsync(this._scene,o,t,{width:n,height:r,crop:i});case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"downloadAllMaterialsPreviewsAsync",value:function(){var e=m(g().mark((function e(t,n,r){var i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._scene&&this._sceneHelper&&this._zkScene)){e.next=5;break}return i=this._sceneHelper.getAllMaterials(),a=i.map((function(e){return e.id})),e.next=5,this.downloadMaterialsPreviewsAsync(a,t,n,r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createEnvelopeMesh",value:function(e){if(this._scene&&this._sceneHelper){var t=this._scene.getMeshByID(e);if(t&&t instanceof BABYLON.Mesh)return this._sceneHelper.createEnvelopeMesh(t)}return null}},{key:"expandMesh",value:function(e,t){if(this._scene&&this._sceneHelper){var n=this._scene.getMeshByID(e);n&&n instanceof BABYLON.Mesh&&this._sceneHelper.expandMesh(n,t)}}},{key:"enableDisableMeshFacetData",value:function(e,t){if(this._scene&&this._sceneHelper){var n=this._scene.getMeshByID(e);n&&(t?n.updateFacetData():n.disableFacetData())}}},{key:"enableDisableDepthSortFacets",value:function(e,t){if(this._scene&&this._sceneHelper){var n=this._scene.getMeshByID(e);n&&(n.mustDepthSortFacets=t)}}}],[{key:"createSceneEditorAsync",value:function(){var e=m(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new n(t),e.next=3,r.initAsync();case 3:return r.checkSceneSourceTasks(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.SceneViewer);M(T,"EmptyGroupName","_dummy_")},"../../3D/src/Viewers/SceneViewer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{BroadcastChannelEventType:function(){return E},SceneViewer:function(){return T}});var r=n("../../../node_modules/paper/dist/paper-full.js"),i=n.n(r),a=n("../../3D/src/Components/ActionExecutor/SceneActionExecutor.ts"),o=n("../../3D/src/Components/CollapseExplode/MeshLocationsManager.ts"),s=n("../../3D/src/Components/DesignManagers/MeshDesignManager.ts"),u=n("../../3D/src/Components/DesignManagers/SceneDesignManager.ts"),c=n("../../3D/src/Components/Draco/DracoCompression.ts"),l=n("../../3D/src/Components/Environment/EnvironmentManager.ts"),h=n("../../3D/src/Components/Glow/GlowManager.ts"),f=n("../../3D/src/Components/InfoPointsManager/InfoPointsManager.ts"),d=n("../../3D/src/Components/MaterialsPreview/MaterialsPreview.ts"),p=n("../../3D/src/Components/SceneHelper.ts"),g=n("../../3D/src/Components/ScenePreview/ScenePreview.ts"),v=n("../../3D/src/Components/Selector/ElementSelector.ts"),m=n("../../3D/src/Helpers/utils.ts"),y=n("../../3D/src/Misc/Database.ts"),_=n("../../3D/src/Misc/DefaultAssetUrls.ts");function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(){k=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(M([])));v&&v!==t&&n.call(v,i)&&(p=v);var m=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==b(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(_.prototype),s(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function S(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){S(a,r,i,o,s,"next",e)}function s(e){S(a,r,i,o,s,"throw",e)}o(void 0)}))}}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){return e.CameraMovement="camera-movement",e.ScriptExecution="script-execution",e.DesignChanged="design-changed",e}({}),T=function(){function e(t){var n,r=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),A(this,"_zkScene",null),A(this,"_zkModel",null),A(this,"_canvasID","zakeke-canvas-viewer3D-"+Zakeke.makeID(5)),A(this,"_canvas",null),A(this,"_domElement",null),A(this,"_lastWidth",Number.MIN_VALUE),A(this,"_lastHeight",Number.MIN_VALUE),A(this,"_engine",null),A(this,"_scene",null),A(this,"_bindedResize",null),A(this,"_sceneHelper",null),A(this,"_environmentManager",null),A(this,"_glowManager",null),A(this,"_sceneActionsExecutor",null),A(this,"_renderingNeeded",!1),A(this,"_renderingPaused",!1),A(this,"_autoRender",!1),A(this,"_antialias",!0),A(this,"_postProcesses",[]),A(this,"_camera",null),A(this,"_hemiLight",null),A(this,"_pointLight",null),A(this,"_highlightColor","#00ff00"),A(this,"_highlightSize",2),A(this,"_highlightLayer",null),A(this,"_highlightBlurHorizontalSize",1),A(this,"_highlightBlurVerticalSize",1),A(this,"_highlightAnimationID",null),A(this,"_highlightCurrentMeshes",[]),A(this,"_highlightNextMeshes",[]),A(this,"_deviceType",MPlaza.DeviceType.All),A(this,"_destroyed",!1),A(this,"_sceneDesignManager",null),A(this,"_meshLocationsManager",null),A(this,"_groupPickedListeners",[]),A(this,"_focusAttributesListeners",[]),A(this,"_designNotifyMessageListeners",[]),A(this,"_designRemoveMessageListeners",[]),A(this,"_designEventMessages",[]),A(this,"_onDelayLoadingStart",null),A(this,"_onDelayLoadingProgress",null),A(this,"_onDelayLoadingSuccess",null),A(this,"_onDelayLoadingError",null),A(this,"_infoPointPickedListeners",[]),A(this,"_infoPointContentShownListeners",[]),A(this,"_infoPointContentHiddenListeners",[]),A(this,"_beginAssetsLoadingListeners",[]),A(this,"_endAssetsLoadingListeners",[]),A(this,"_beginSceneLoadingListeners",[]),A(this,"_endSceneLoadingListeners",[]),A(this,"_arFileUrls",{}),A(this,"_designTextureResolution",1024),A(this,"_configPreview",!1),A(this,"_defaultBackgroundColor",null),A(this,"_grids",[]),A(this,"_dracoCompression",null),A(this,"_infoPointsManager",null),A(this,"_infoPointsManagerStyle",null),A(this,"_canShowInfoPoints",!0),A(this,"_canShowInfoPointsContent",!0),A(this,"_broadcastChannel",null),A(this,"_isHologramSource",!1),A(this,"_isHologram",!1),A(this,"_lastResizableMeshID",""),A(this,"setCameraLocked",(function(e){r._zkScene&&r._sceneHelper&&r._scene&&(r._sceneHelper.setupCamera(),r._camera=r._scene.activeCamera,r._camera&&(e?(r._sceneHelper.setCameraLimitLowerRadius(!0),r._sceneHelper.setMinZoomPerc(1),r._sceneHelper.setMaxZoomPerc(1)):(r._sceneHelper.setCameraLimitLowerRadius(!1),r._sceneHelper.setMinZoomPerc(1),r._sceneHelper.setMaxZoomPerc(1.5))))})),void 0!=t&&("boolean"==typeof t?this._configPreview=t:(this._designTextureResolution=null!==(n=null===t||void 0===t?void 0:t.designTextureResolution)&&void 0!==n?n:1024,this._configPreview=t.configPreview,t.defaultBackgroundColor&&(this._defaultBackgroundColor=BABYLON.Color4.FromHexString(t.defaultBackgroundColor)))),this._elementSelector=new v.ElementSelector}var t,n,r;return t=e,n=[{key:"zkScene",get:function(){return this._zkScene}},{key:"zkModel",get:function(){return this._zkModel}},{key:"canvas",get:function(){return this._canvas}},{key:"engine",get:function(){return this._engine}},{key:"scene",get:function(){return this._scene}},{key:"autoRender",get:function(){return this._autoRender},set:function(e){this._autoRender=e}},{key:"antialias",get:function(){return this._antialias},set:function(e){this._antialias=e}},{key:"isHologramSource",get:function(){return this.isHologramSource},set:function(e){this._isHologramSource=e,e&&(this._isHologram=!1,this.detachBroadcastChannelEventHandlers())}},{key:"isHologram",get:function(){return this._isHologram},set:function(e){this._isHologram=e,e?(this._isHologramSource=!1,this.attachBroadcastChannelEventHandlers()):this.detachBroadcastChannelEventHandlers(),this.refreshEnvironment()}},{key:"getAntialiasEnabled",value:function(){if(this._zkScene){var e=this._zkScene.getAntialiasEnabled();return void 0===e||null===e||e}return!0}},{key:"setAntialiasEnabled",value:function(e){this._zkScene&&(this._zkScene.setAntialiasEnabled(e),e?this.enableAntialiasing():this.disableAntialiasing())}},{key:"getARScale",value:function(){if(this._zkScene){var e=this._zkScene.getARScale();return void 0===e||null===e||e}return!0}},{key:"setARScale",value:function(e){this._zkScene&&this._zkScene.setARScale(e)}},{key:"getUseMaterialOffloading",value:function(){if(this.zkScene){var e=this.zkScene.getUseMaterialOffloading();return void 0!==e&&null!==e&&e}return!1}},{key:"setUseMaterialOffloading",value:function(e){this._zkScene&&this._zkScene.setUseMaterialOffloading(e)}},{key:"getPrefetchMeshes",value:function(){if(this.zkScene){var e=this.zkScene.getPrefetchMeshes();return void 0===e||null===e||e}return!0}},{key:"setPrefetchMeshes",value:function(e){this._zkScene&&this._zkScene.setPrefetchMeshes(e)}},{key:"getPrefetchMaterials",value:function(){if(this.zkScene){var e=this.zkScene.getPrefetchMaterials();return void 0===e||null===e||e}return!0}},{key:"setPrefetchMaterials",value:function(e){this._zkScene&&this._zkScene.setPrefetchMaterials(e)}},{key:"getShowHideInfoPoints",value:function(){return this.canShowInfoPoints}},{key:"setShowHideInfoPoints",value:function(e){this.canShowInfoPoints=e}},{key:"camera",get:function(){return this._camera}},{key:"deviceType",get:function(){return this._deviceType},set:function(e){this._deviceType=e}},{key:"getDeviceType",value:function(){return this.deviceType}},{key:"highlightColor",get:function(){return this._highlightColor},set:function(e){this._highlightColor=e}},{key:"highlightSize",get:function(){return this._highlightSize},set:function(e){this._highlightSize=e}},{key:"destroyed",get:function(){return this._destroyed}},{key:"onDelayLoadingStart",get:function(){return this._onDelayLoadingStart},set:function(e){this._onDelayLoadingStart=e}},{key:"onDelayLoadingProgress",get:function(){return this._onDelayLoadingProgress},set:function(e){this._onDelayLoadingProgress=e}},{key:"onDelayLoadingSuccess",get:function(){return this._onDelayLoadingSuccess},set:function(e){this._onDelayLoadingSuccess=e}},{key:"onDelayLoadingError",get:function(){return this._onDelayLoadingError},set:function(e){this._onDelayLoadingError=e}},{key:"dracoCompression",get:function(){return this._dracoCompression||(this._dracoCompression=c.DracoCompression.Default),this._dracoCompression}},{key:"infoPointsShown",get:function(){return!!this._infoPointsManager&&this._infoPointsManager.infoPointsShown}},{key:"infoPointsManagerStyle",get:function(){return this._infoPointsManagerStyle},set:function(e){this._infoPointsManagerStyle=e,this.updateInfoPointsManagerStyle()}},{key:"canShowInfoPoints",get:function(){return this._canShowInfoPoints},set:function(e){this._canShowInfoPoints=e,this.refreshInfoPoints()}},{key:"canShowInfoPointsContent",get:function(){return this._canShowInfoPointsContent},set:function(e){this._canShowInfoPointsContent=e,this._infoPointsManager&&(this._infoPointsManager.canShowInfoPointsContent=e)}},{key:"dispose",value:function(){this.closeBroadcastChannel(),this.removeCanvas(),this.removeDomElement(),this.deleteScene(),this.deleteEngine()}},{key:"initAsync",value:function(){var e=C(k().mark((function e(){var t=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._bindedResize=this.resize.bind(this),Zakeke.Tools.Init(),BABYLON.Geometry.onDelayLoadingStart=function(e){t._onDelayLoadingStart&&t._onDelayLoadingStart(e)},BABYLON.Geometry.onDelayLoadingProgress=function(e){t._onDelayLoadingProgress&&t._onDelayLoadingProgress(e)},BABYLON.Geometry.onDelayLoadingSuccess=function(e){t._onDelayLoadingSuccess&&t._onDelayLoadingSuccess(e)},BABYLON.Geometry.onDelayLoadingError=function(e){t._onDelayLoadingError&&t._onDelayLoadingError(e)},BABYLON.Geometry.dracoDecodingFunction=function(e,n,r){t.dracoDecodingFunction(e,n,r)},this.createCanvas(),this.createDOMElement(),e.next=11,this.init3DEngineAsync();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init3DEngineAsync",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.createEngine(),e.next=3,this.createEmptySceneAsync();case 3:this._destroyed=!1;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createCanvas",value:function(){var e=this;return this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",this._canvasID),this._canvas.setAttribute("touch-action","none"),this._canvas.addEventListener("dblclick",(function(t){return e.setRenderingNeeded()})),this._canvas}},{key:"removeCanvas",value:function(){this._canvas&&(this._canvas.remove(),this._canvas=null)}},{key:"deleteEngine",value:function(){this._engine&&(this._engine.dispose(),this._engine=null),this._destroyed=!0,$(window).off("resize",this._bindedResize)}},{key:"deleteScene",value:function(){this.deleteComponents(),this._scene&&(this._scene.dispose(),this._scene=null)}},{key:"deleteComponents",value:function(){this.emptyArFileCache(),this.disposeInfoPointsManager(),this._meshLocationsManager&&(this._meshLocationsManager.dispose(),this._meshLocationsManager=null),this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null),this._glowManager&&(this._glowManager.dispose(),this._glowManager=null),this._sceneActionsExecutor&&(this._sceneActionsExecutor.dispose(),this._sceneActionsExecutor=null),this.disposePostProcesses()}},{key:"disposeInfoPointsManager",value:function(){this._infoPointsManager&&(this._infoPointsManager.dispose(),this._infoPointsManager=null)}},{key:"disposePostProcesses",value:function(){for(;this._postProcesses.length>0;){var e=this._postProcesses.pop();e&&e.dispose()}}},{key:"emptyArFileCache",value:function(){this._arFileUrls={}}},{key:"resetSceneAsync",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init3DEngineAsync();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeBroadcastChannel",value:function(){this._broadcastChannel&&(this._broadcastChannel.close(),this._broadcastChannel=null)}},{key:"openBroadcastChannel",value:function(){if(!this._broadcastChannel&&window.BroadcastChannel)try{this._broadcastChannel=new BroadcastChannel("zakeke-broadcast-channel")}catch(e){console.error("Failed opening broadcast channel"),console.error(e)}}},{key:"getOrCreateBroadcastChannel",value:function(){return this.openBroadcastChannel(),this._broadcastChannel}},{key:"createEngine",value:function(){var e=this;this.deleteScene(),this.deleteEngine(),this._engine=new BABYLON.Engine(this._canvas,!0,{stencil:!0,preserveDrawingBuffer:!0}),this._engine.enableOfflineSupport=!1,Logger.info("WebGL version: "+this._engine.webGLVersion),$(window).resize(this._bindedResize),$(window).on("orientationchange",(function(){setTimeout((function(){return e._bindedResize()}),100)}))}},{key:"createEmptySceneAsync",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.deleteScene(),!this._engine){e.next=6;break}return this._scene=new BABYLON.Scene(this._engine),this._defaultBackgroundColor&&this._scene.clearColor.copyFrom(this._defaultBackgroundColor),e.next=6,this.setupSceneAsync();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupSceneAsync",value:function(){var e=C(k().mark((function e(){var t,n,r,i,a,s,u,c,l,h,f,d=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._engine||!this._scene){e.next=35;break}return this._sceneHelper=new p.SceneHelper(this._scene),t=this._zkScene?this._zkScene.getCameraPositionScale():void 0,n=this._zkScene?this._zkScene.getCameraLimitLowerRadius():void 0,r=this._zkScene?this._zkScene.getCameraZoomEnabled():void 0,i=!!this._zkScene&&this._zkScene.getCameraUseMinZoomPerc(),a=this._zkScene?this._zkScene.getCameraMinZoomPerc():1,s=!!this._zkScene&&this._zkScene.getCameraUseMaxZoomPerc(),u=this._zkScene?this._zkScene.getCameraMaxZoomPerc():1.5,c=this._zkScene?this._zkScene.getCameraLowerAlphaLimit():null,l=this._zkScene?this._zkScene.getCameraUpperAlphaLimit():null,h=this._zkScene?this._zkScene.getCameraLowerBetaLimit():null,f=this._zkScene?this._zkScene.getCameraUpperBetaLimit():null,void 0!=t&&null!=t&&this._sceneHelper.setCameraPositionScale(t,!1),void 0!=n&&null!=n&&this._sceneHelper.setCameraLimitLowerRadius(n,!1),void 0!=r&&null!=r&&this._sceneHelper.setZoomEnabled(r),this._sceneHelper.setupCamera(),this._camera=this._scene.activeCamera,this._camera&&(i?this._sceneHelper.setMinZoomPerc(a):this._sceneHelper.setMinZoomPerc(null),s?this._sceneHelper.setMaxZoomPerc(u):this._sceneHelper.setMaxZoomPerc(null),this._sceneHelper.setCameraAlphaLimits(c,l),this._sceneHelper.setCameraBetaLimits(h,f),this._camera.onViewMatrixChangedObservable.add((function(){d.notifyCameraMovement()})),this._camera.onRestoreStateObservable.add((function(){d.setupShaderMaterialsCameraPosition(),d.setRenderingNeeded()}))),this._sceneHelper.setupLights(),this.createHighlightLayer(),this.fixEnvironmentTexture(),this.refreshEnvironment(),this.setupGlowManager(),this._zkScene&&(this._meshLocationsManager=new o.MeshLocationsManager,this._meshLocationsManager.setModelAndScene(this._zkScene,this._scene),this._meshLocationsManager.addMeshAnimationCompletedListener((function(){return d.setRenderingNeeded()}))),e.next=27,this.setupSceneActionsExecutorAsync();case 27:this.setRenderingOnDelayLoaded(),this.setupAntialiasPostProcesses(),this._scene.onPointerDown=function(e,t){return d.onPointerDown(e,t)},this._scene.registerBeforeRender((function(){d.onBeforeRender()})),this.refreshInfoPoints(),this._engine.stopRenderLoop(),this.render(),this._engine.runRenderLoop((function(){d.checkRendering()}));case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onBeforeRender",value:function(){if(this._scene&&this._sceneHelper){if(this._camera){var e=this._sceneHelper.getDefaultPointLight();e&&(e.position=this._camera.position)}this._scene.meshes.forEach((function(e){e.mustDepthSortFacets&&e.isFacetDataEnabled&&e.updateFacetData()}))}}},{key:"render",value:function(){!this._scene||this._scene.isDisposed||this._renderingPaused||this._scene.render()}},{key:"checkRendering",value:function(){this._scene&&(this._autoRender||this._renderingNeeded||0!==this._scene._activeAnimatables.length||this._sceneHelper&&this._sceneHelper.userIsMoving()?(this._autoRender||0!==this._scene._activeAnimatables.length||this._sceneHelper&&this._sceneHelper.userIsMoving()?this.disableAntialiasing():this.enableAntialiasing(),this.render(),this._renderingNeeded&&(this._renderingNeeded=!1)):!this._scene.postProcessesEnabled&&this.canEnableAntialiasing()&&(this.enableAntialiasing(),this.render()),this._infoPointsManager&&this._infoPointsManager.updateInfoPointsVisibility()&&this.render())}},{key:"setupAntialiasPostProcesses",value:function(){this._antialias&&this.getAntialiasEnabled()&&this.createAntialiasPostProcesses()}},{key:"createAntialiasPostProcesses",value:function(){this._camera&&0===this._postProcesses.length&&(/firefox/i.test(navigator.userAgent)||this._postProcesses.push(new BABYLON.PassPostProcess("scale_pass",4,this._camera,BABYLON.Texture.BILINEAR_SAMPLINGMODE)),this._postProcesses.push(new BABYLON.PassPostProcess("scale_pass",2,this._camera,BABYLON.Texture.BILINEAR_SAMPLINGMODE)),this._postProcesses.push(new BABYLON.PassPostProcess("scale_pass",1,this._camera,BABYLON.Texture.BILINEAR_SAMPLINGMODE)))}},{key:"canEnableAntialiasing",value:function(){return this._scene&&this._antialias&&this.getAntialiasEnabled()}},{key:"enableAntialiasing",value:function(){this._scene&&this.canEnableAntialiasing()&&(this.createAntialiasPostProcesses(),this._scene.postProcessesEnabled=!0)}},{key:"disableAntialiasing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._scene&&this._antialias&&(this._scene.postProcessesEnabled=!1),e&&this.disposePostProcesses()}},{key:"setRenderingNeeded",value:function(){this._renderingNeeded=!0}},{key:"setLongRenderingNeeded",value:function(){var e=this;this.setRenderingNeeded();for(var t=50;t<=1e3;t+=200)setTimeout((function(){return e.setRenderingNeeded()}),t)}},{key:"refreshRendering",value:function(){this.setLongRenderingNeeded()}},{key:"pauseRendering",value:function(){this._renderingPaused=!0}},{key:"resumeRendering",value:function(){this._renderingPaused=!1,this.setRenderingNeeded()}},{key:"setLoadingScreen",value:function(e){this._engine&&(this._engine.loadingScreen=e)}},{key:"setRenderingOnDelayLoaded",value:function(){if(this._scene){var e=this;this._scene.getGeometries().forEach((function(t){var n=t.onGeometryUpdated;t.onGeometryUpdated=function(t,r){e.setLongRenderingNeeded(),n&&n.apply(this,[t,r])}}))}}},{key:"createHighlightLayer",value:function(){this._scene&&(this._highlightLayer=new BABYLON.HighlightLayer("hl1",this._scene),this.setupHighlightLayerIntensity())}},{key:"setupHighlightLayerIntensity",value:function(){this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=this._highlightSize,this._highlightLayer.blurVerticalSize=this._highlightSize,this._highlightBlurHorizontalSize=this._highlightSize,this._highlightBlurVerticalSize=this._highlightSize)}},{key:"createDOMElement",value:function(){this._canvas&&(this._domElement=document.createElement("div"),this._domElement.setAttribute("id","zakeke-canvas-viewer3D-div-"+Zakeke.makeID(5)),this._domElement.appendChild(this._canvas),this._domElement.style.position="absolute",this._domElement.style.width="100%",this._domElement.style.height="100%",this._domElement.style.left="0",this._domElement.style.top="0")}},{key:"removeDomElement",value:function(){this._domElement&&(this.detach(),this._domElement.remove(),this._domElement=null)}},{key:"appendTo",value:function(e){this._domElement&&(e.firstChild?e.insertBefore(this._domElement,e.firstChild):e.appendChild(this._domElement),e.appendChild(this._domElement),this.resize(),this.resize())}},{key:"detach",value:function(){this._domElement&&this._domElement.parentNode&&this._domElement.parentNode.removeChild(this._domElement)}},{key:"updateView",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.resize(e)}},{key:"resize",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._canvas){this.disableAntialiasing(!0);var t=this._canvas.parentNode;if(t&&t instanceof HTMLElement){var n=t.offsetWidth,r=t.offsetHeight;n==this._lastWidth&&r==this._lastHeight||(this._canvas.style.width="100%",this._canvas.style.height="100%",this._engine&&(this._engine.resize(),e&&(this._scene&&this.adjustCamera(!1),this.setupShaderMaterialsCameraPosition()),this.setRenderingNeeded())),this._lastWidth=n,this._lastHeight=r,this.enableAntialiasing()}}}},{key:"switchFullScreen",value:function(e){this._sceneHelper&&this._sceneHelper.switchFullScreen(e)}},{key:"setupGlowManager",value:function(){this._glowManager&&(this._glowManager.dispose(),this._glowManager=null),this._zkScene&&this._scene&&(this._glowManager=new h.GlowManager(this._zkScene,this._scene),this._glowManager.update(),this.setRenderingNeeded())}},{key:"setupSceneActionsExecutorAsync",value:function(){var e=C(k().mark((function e(){var t=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._zkScene&&this._scene&&(this._sceneActionsExecutor=new a.SceneActionsExecutor(this._zkScene,this._scene),this._sceneActionsExecutor.deviceType=this.deviceType,this._sceneActionsExecutor.useMaterialOffloading=!this._configPreview&&this.getUseMaterialOffloading(),this._sceneActionsExecutor.prefetchMeshes=this.getPrefetchMeshes(),this._sceneActionsExecutor.prefetchMaterials=this.getPrefetchMaterials(),this._sceneActionsExecutor.addMeshDesignRefreshRequiredListeners(function(){var e=C(k().mark((function e(n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.refreshMeshesDesignAsync(n.meshes,n.effect);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this._sceneActionsExecutor.addBeginAssetsLoadingListener((function(){return t.fireBeginAssetsLoadingEvent()})),this._sceneActionsExecutor.addEndAssetsLoadingListener((function(){return t.fireEndAssetsLoadingEvent()})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"restoreCameraState",value:function(){this._sceneHelper&&(this._sceneHelper.restoreCameraState(),this._sceneHelper.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded())}},{key:"fixEnvironmentTexture",value:function(){if(this._scene&&this._scene.environmentTexture&&this._scene.environmentTexture.url&&"string"===typeof this._scene.environmentTexture.url){var e=this._scene.environmentTexture.url,t=(e.match(/http/g)||[]).length,n=e;if(t>1){var r=e.lastIndexOf("http");r>=0&&(n=e.substring(r))}var i=void 0,a=void 0,o=void 0;this._scene&&this._scene.metadata&&(void 0!==this._scene.metadata.environmentTextureRotationY&&"number"===typeof this._scene.metadata.environmentTextureRotationY&&(i=this._scene.metadata.environmentTextureRotationY),this._scene.metadata.environmentTextureExtensions&&(a=this._scene.metadata.environmentTextureExtensions),this._scene.metadata.environmentTextureFiles&&(o=this._scene.metadata.environmentTextureFiles)),this.setSceneEnvironmentTexture(n,i,a,o)}else this.checkSceneEmptyEnvironmentTexture()}},{key:"checkSceneEmptyEnvironmentTexture",value:function(){this._scene&&this._sceneHelper&&this._sceneHelper.containsPBRMaterials()&&!this._scene.environmentTexture&&this.setDefaultSceneEnvironmentTexture()}},{key:"setDefaultSceneEnvironmentTexture",value:function(){var e=_.DefaultAssetUrls.Environment.EnvironmentTextureCDNUrl;this.setSceneEnvironmentTexture(e)}},{key:"setSceneEnvironmentTexture",value:function(e,t,n,r,i){var a=this;if(this._scene&&this._sceneHelper){this._scene.environmentTexture&&this._sceneHelper.isTextureWithUrl(this._scene.environmentTexture)&&this._scene.environmentTexture.url&&this._scene.environmentTexture.url!=e&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null);var o=function(){i&&i(),a.setLongRenderingNeeded()};this._scene.metadata||(this._scene.metadata={}),delete this._scene.metadata.environmentTextureType,delete this._scene.metadata.environmentTextureSize,delete this._scene.metadata.environmentTextureExtensions,delete this._scene.metadata.environmentTextureFiles;var s=null;e.endsWith(".dds")?s=BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene):e.endsWith(".hdr")?(s=new BABYLON.HDRCubeTexture(e,this._scene,128,void 0,void 0,void 0,void 0,o),this._scene.metadata.environmentTextureType="BABYLON.HDRCubeTexture",this._scene.metadata.environmentTextureSize=128):e.endsWith(".env")?s=new BABYLON.CubeTexture(e,this._scene,null,!1,null,o,null,void 0,!0,void 0,!0):e.endsWith(".basis")?s=BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene):n&&6===n.length&&r&&6===r.length&&(s=new BABYLON.CubeTexture(e,this._scene,n,!1,r,o),this._scene.metadata.environmentTextureExtensions=n,this._scene.metadata.environmentTextureFiles=r),s&&p.SceneHelper.whenTextureIsReadyAsync(s).then((function(){s&&a._scene&&(void 0!=t?s.rotationY=t:a._scene.metadata&&void 0!=a._scene.metadata.environmentTextureRotationY&&delete a._scene.metadata.environmentTextureRotationY,a._scene.environmentTexture=s,a.setRenderingNeeded())}))}}},{key:"loadSceneFromModelAsync",value:function(){var e=C(k().mark((function e(t,n,r){var i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t instanceof MPlaza.Model&&(this._zkModel=t),!(n&&n instanceof Zakeke.Scene)){e.next=9;break}if(this._zkScene=n,this.checkSceneShaderMaterials(n),i=n.get("rootUrl"),a=n.get("sceneFileName"),!i||!a){e.next=9;break}return e.next=9,this.loadSceneFromRemoteFilesAsync(i,a,r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"loadSceneFromModelDataAsync",value:function(){var e=C(k().mark((function e(t,n,r,i){var a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t instanceof MPlaza.Model&&(this._zkModel=t),!(n&&n instanceof Zakeke.Scene)){e.next=9;break}if(this._zkScene=n,this.checkSceneShaderMaterials(n),a="data:"+r,!(o=n.get("rootUrl"))){e.next=9;break}return e.next=9,this.loadSceneFromRemoteFilesAsync(o,a,i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"preSceneFileLoading",value:function(){}},{key:"postSceneFileLoading",value:function(){}},{key:"loadSceneFromRemoteFilesAsync",value:function(){var e=C(k().mark((function e(t,n,r){var i,a,o,s,u,c=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._engine){e.next=2;break}throw new Error("Unable to load scene when the 3D engine is null");case 2:return e.prev=2,this.fireBeginSceneLoadingEvent(),this.preSceneFileLoading(),this.pauseRendering(),this._engine.sceneFileRootUrl=t,e.next=9,BABYLON.SceneLoader.LoadAsync(t,n,this._engine,r);case 9:if(i=e.sent,!this._destroyed){e.next=14;break}return Logger.info("Loading scene engine destroyed"),i.dispose(),e.abrupt("return");case 14:return e.next=16,new Promise((function(e){return i.executeWhenReady((function(){return e()}))}));case 16:if(!this._destroyed){e.next=20;break}throw Logger.info("Loading scene engine destroyed"),i.dispose(),new Error("Engine destroyed while loading scene");case 20:return(a=p.SceneHelper.visibleMeshesRequireDelayedLoading(i))&&this.fireBeginAssetsLoadingEvent(),e.next=24,p.SceneHelper.whenAllVisibleMeshesAreReadyAsync(i);case 24:for(a&&this.fireEndAssetsLoadingEvent(),this.deleteScene(),this._scene=i,o=0;o<this._scene.textures.length;o++)(s=this._scene.textures[o])instanceof BABYLON.Texture&&s.onLoadObservable&&s.onLoadObservable.add((function(e){c.setLongRenderingNeeded()}));return e.next=30,this.setupSceneAsync();case 30:if(!this._sceneHelper){e.next=45;break}if(!(this._configPreview&&this._scene.metadata&&this._scene.metadata.delayedMaterials)){e.next=34;break}return e.next=34,this._sceneHelper.loadAllDelayedMaterialsAsync(t);case 34:return this._configPreview&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._sceneHelper.loadAllOffloadedMaterials(t),this._configPreview&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials&&this._sceneHelper.unsetAllDummyMaterials(),this._sceneHelper.setupShaderMaterialsCameraPosition(),e.prev=37,e.next=40,this.reloadAllLoadingErrorTexturesAsync();case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(37),console.error(e.t0);case 45:if(!this._environmentManager){e.next=50;break}if(!(u=this._environmentManager.getSkyboxTexture())){e.next=50;break}return e.next=50,p.SceneHelper.whenTextureIsReadyAsync(u);case 50:return e.prev=50,this.resumeRendering(),this.postSceneFileLoading(),this.fireEndSceneLoadingEvent(),e.finish(50);case 55:case"end":return e.stop()}}),e,this,[[2,,50,55],[37,42]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getSkyboxTexture",value:function(){var e;return null===(e=this._environmentManager)||void 0===e?void 0:e.getSkyboxTexture()}},{key:"loadSceneFromRemoteFilesAsync_OLD",value:function(){var e=C(k().mark((function e(t,n,r){var i=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=C(k().mark((function e(a,o){var s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i._engine||o(),i.preSceneFileLoading(),i._engine.sceneFileRootUrl=t,e.next=5,BABYLON.SceneLoader.LoadAsync(t,n,i._engine,r);case 5:if(s=e.sent,!i._destroyed){e.next=10;break}return Logger.info("Loading scene engine destroyed"),s.dispose(),e.abrupt("return");case 10:s.executeWhenReady(C(k().mark((function e(){var n,r,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i._destroyed&&(Logger.info("Loading scene engine destroyed"),s.dispose(),o()),(n=p.SceneHelper.visibleMeshesRequireDelayedLoading(s))&&i.fireBeginAssetsLoadingEvent(),e.next=5,p.SceneHelper.whenAllVisibleMeshesAreReadyAsync(s);case 5:for(n&&i.fireEndAssetsLoadingEvent(),i.deleteScene(),i._scene=s,r=0;r<i._scene.textures.length;r++)(u=i._scene.textures[r])instanceof BABYLON.Texture&&u.onLoadObservable&&u.onLoadObservable.add((function(e){i.setLongRenderingNeeded()}));return e.next=11,i.setupSceneAsync();case 11:if(!i._sceneHelper){e.next=18;break}if(!(i._configPreview&&i._scene.metadata&&i._scene.metadata.delayedMaterials)){e.next=15;break}return e.next=15,i._sceneHelper.loadAllDelayedMaterialsAsync(t);case 15:i._configPreview&&i._scene.metadata&&i._scene.metadata.offloadedMaterials&&i._sceneHelper.loadAllOffloadedMaterials(t),i._configPreview&&i._scene.metadata&&i._scene.metadata.originalMeshMaterials&&i._sceneHelper.unsetAllDummyMaterials(),i._sceneHelper.setupShaderMaterialsCameraPosition();case 18:i.postSceneFileLoading(),a();case 20:case"end":return e.stop()}}),e)}))));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"checkSceneShaderMaterials",value:function(e){if(e instanceof Zakeke.Scene&&e.get("shaderMaterials"))for(var t=0;t<e.get("shaderMaterials").length;t++){var n=e.get("shaderMaterials").at(t),r=n.get("name"),i=n.get("vertex"),a=n.get("fragment");if(r&&i&&a){var o={name:r,vertex:i,fragment:a};this.setupShadersStore(o)}}}},{key:"checkShaderMaterial",value:function(e){if(e&&e instanceof Zakeke.Material&&e.get("shaders")){var t=e.get("shaders").get("name"),n=e.get("shaders").get("vertex"),r=e.get("shaders").get("fragment");if(t&&n&&r){var i={name:t,vertex:n,fragment:r};this.setupShadersStore(i)}}}},{key:"setupShadersStore",value:function(e){if(e&&e.hasOwnProperty("name")&&e.hasOwnProperty("vertex")&&e.hasOwnProperty("fragment")){var t=e.name+"VertexShader",n=e.name+"FragmentShader";BABYLON.Effect.ShadersStore[t]=e.vertex,BABYLON.Effect.ShadersStore[n]=e.fragment}}},{key:"isRealMesh",value:function(e){return!!this._sceneHelper&&this._sceneHelper.isRealMesh(e)}},{key:"countSceneMeshes",value:function(){return this._sceneHelper?this._sceneHelper.countSceneMeshes():0}},{key:"getVisibleMeshes",value:function(){return this._sceneHelper?this._sceneHelper.getVisibleMeshes():[]}},{key:"getSceneBoundingInfo",value:function(){return this._sceneHelper?this._sceneHelper.getSceneBoundingInfo():null}},{key:"selectMesh",value:function(e){this.selectUnselectMesh(e,!0)}},{key:"unselectMesh",value:function(e){this.selectUnselectMesh(e,!1)}},{key:"unselectAllMeshes",value:function(){var e=this;this._scene&&(this._scene.meshes.forEach((function(t){return e.unselectSingleMesh(t)})),this.fireFocusAttributesEvent({groups:[]}))}},{key:"selectUnselectMesh",value:function(e,t){var n=this;if(this._scene&&(this._scene.meshes.forEach((function(e){return n.unselectSingleMesh(e)})),t)){var r=this._scene.getMeshByID(e);if(r){!function e(t){n.selectSingleMesh(t);var r=t.getChildMeshes();r&&r.forEach((function(t){return e(t)}))}(r);var i=this.getGroupForMesh(r);i&&(this.highlightGroupForMesh(r),this.fireGroupPickedEvent({groupID:i.get("groupID")}));var a=this.getVisibleHiddenAttributesForMesh(r);this.fireFocusAttributesEvent({groups:a}),a.length>0&&this.highlightMeshes([r])}}}},{key:"selectSingleMesh",value:function(e){this.setRenderingNeeded(),e.selected=!0}},{key:"unselectSingleMesh",value:function(e){this.setRenderingNeeded(),e.selected=!1}},{key:"selectMeshesWithMaterial",value:function(e){this.selectUnselectMeshesWithMaterial(e,!0)}},{key:"unselectMeshesWithMaterial",value:function(e){this.selectUnselectMeshesWithMaterial(e,!1)}},{key:"selectUnselectMeshesWithMaterial",value:function(e,t){var n=this;if(this._scene&&(this._scene.meshes.forEach((function(e){return n.unselectSingleMesh(e)})),t)){var r=function t(r){r.material&&r.material.id===e&&n.selectSingleMesh(r);var i=r.getChildMeshes();i&&i.forEach((function(e){t(e)}))};this._scene.meshes.forEach((function(e){r(e)}))}}},{key:"onPointerDown",value:function(e,t){t.hit&&t.pickedMesh?this.selectMesh(t.pickedMesh.id):this.unselectAllMeshes()}},{key:"getSelectedRootMesh",value:function(){if(this._scene)for(var e=0;e<this._scene.meshes.length;e++){var t=this._scene.meshes[e];if(t.selected){var n=t.parent;if(!n||!n.selected)return t}}return null}},{key:"getMeshByID",value:function(e){return this._scene?this._scene.getMeshByID(e):null}},{key:"getMeshByName",value:function(e){return this._scene?this._scene.getMeshByName(e):null}},{key:"getMaterialByID",value:function(e){return this._scene?this._scene.getMaterialByID(e):null}},{key:"setCameraLocation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._zkScene&&this._sceneHelper){var r=this._zkScene.getCameraLocation(e);if(r){var i=new BABYLON.Vector3(r.get("px"),r.get("py"),r.get("pz")),a=new BABYLON.Vector3(r.get("tx"),r.get("ty"),r.get("tz"));if(n)if(t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var o=this._sceneHelper.computeCameraAngleOfView(a,i);this._sceneHelper.animateCameraToFinalParamters(o.alpha,o.beta,this._camera.radius,this._camera.target,.5)}}else this._sceneHelper.animateCamera(a,i,.5);else if(t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var s=this._sceneHelper.computeCameraAngleOfView(a,i);this._sceneHelper.moveCameraToFinalParameters(s.alpha,s.beta,this._camera.radius,this._camera.target)}}else this._sceneHelper.moveCamera(a,i)}}this.setRenderingNeeded()}},{key:"adjustCamera",value:function(e){this._sceneHelper&&(void 0!=e&&null!=e&&"boolean"===typeof e?this._sceneHelper.adjustCamera(void 0,void 0,void 0,e):this._sceneHelper.adjustCamera(),this.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded())}},{key:"zoomIn",value:function(){this._sceneHelper&&this._sceneHelper.zoomIn()}},{key:"zoomOut",value:function(){this._sceneHelper&&this._sceneHelper.zoomOut()}},{key:"zoom",value:function(e){this._sceneHelper&&this._sceneHelper.zoom(e)}},{key:"setCameraPivot",value:function(e){if(this._scene&&this._sceneHelper){var t=e?this._scene.getMeshByID(e):null;this._sceneHelper.setCameraPivot(t)}}},{key:"setCameraZoomEnabled",value:function(e){this._scene&&this._sceneHelper&&(this._sceneHelper.setZoomEnabled(e),this.setRenderingNeeded())}},{key:"executeScriptAsync",value:function(){var e=C(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneActionsExecutor){e.next=7;break}return e.next=3,this._sceneActionsExecutor.executeScriptAsync(t);case 3:this.notifyScriptExecution(t),this.setupShaderMaterialsCameraPosition(),this.refreshInfoPoints(),this.setLongRenderingNeeded();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeActionsAsync",value:function(){var e=C(k().mark((function e(t,n,r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneActionsExecutor){e.next=7;break}return e.next=3,this._sceneActionsExecutor.executeActionsAsync(t,n,r);case 3:this.notifyActionExecution(t,n,r),this.setupShaderMaterialsCameraPosition(),this.refreshInfoPoints(),this.setLongRenderingNeeded();case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"prefetchMeshesForUnselectedOptionsAsync",value:function(){var e=C(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneActionsExecutor){e.next=3;break}return e.next=3,this._sceneActionsExecutor.prefetchMeshesForUnselectedOptionsAsync(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prefetchDataForUnselectedOptionsAsync",value:function(){var e=C(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneActionsExecutor){e.next=3;break}return e.next=3,this._sceneActionsExecutor.prefetchDataForUnselectedOptionsAsync(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshEnvironment",value:function(){this._zkScene&&this._scene&&(this._environmentManager&&this._environmentManager.scene==this._scene&&this._environmentManager.isHologram==this._isHologram||(this._environmentManager=new l.EnvironmentManager(this._zkScene,this._scene,this._isHologram)),this._environmentManager.update(),this.setLongRenderingNeeded(),this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._autoRender=this._camera.useAutoRotationBehavior),this.setRenderingNeeded())}},{key:"highlightMeshes",value:function(e){var t=this;if(e&&"[object Array]"===Object.prototype.toString.call(e)&&0!=this._highlightSize){var n=this._highlightBlurHorizontalSize,r=this._highlightBlurVerticalSize,i=function e(n){n.isVisible&&t._highlightLayer&&t._highlightLayer.addMesh(n,BABYLON.Color3.FromHexString(t._highlightColor)),n.getChildMeshes().forEach((function(t){t instanceof BABYLON.Mesh&&e(t)}))},a=function e(n){t._highlightLayer&&t._highlightLayer.removeMesh(n),n.getChildMeshes().forEach((function(t){t instanceof BABYLON.Mesh&&e(t)}))},o=function(){if(t._highlightAnimationID&&(clearInterval(t._highlightAnimationID),t._highlightAnimationID=null),t._highlightCurrentMeshes&&t._highlightCurrentMeshes.forEach((function(e){e instanceof BABYLON.Mesh&&a(e)})),t._highlightLayer&&(t._highlightLayer.blurHorizontalSize=n,t._highlightLayer.blurVerticalSize=r),t._highlightNextMeshes){var e=t._highlightNextMeshes;t._highlightNextMeshes=[],t.highlightMeshes(e)}};if(this._highlightAnimationID)return this._highlightNextMeshes=e,void o();if(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer){this._highlightCurrentMeshes=e,e.forEach((function(e){e instanceof BABYLON.Mesh&&i(e)}));var s=n,u=r;this._highlightAnimationID=window.setInterval((function(){t._highlightLayer&&(s-=.025*n,u-=.025*r,s=Math.max(0,s),u=Math.max(0,u),s>=0&&(t._highlightLayer.blurHorizontalSize=s),u>=0&&(t._highlightLayer.blurVerticalSize=u),0!=s&&0!=u||o(),t.setRenderingNeeded())}),20),this.setRenderingNeeded()}}}},{key:"highlightGroupForMesh",value:function(e){var t=this.getGroupForMesh(e);this.highlightGroup(t)}},{key:"highlightGroupByID",value:function(e){if(this._zkModel){var t=this._zkModel.get("attributeGroups").findWhere({groupID:e});t?this.highlightGroup(t):this.highlightGroup(null)}}},{key:"highlightGroup",value:function(e){if(this._zkScene&&this._scene&&e){var t=e.get("meshSelector");if(t){var n=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Mesh);this.highlightMeshes(n)}}}},{key:"getGroupForMesh",value:function(e){if(this._zkModel&&this._zkScene&&this._scene&&e&&this._sceneHelper)for(var t=this._zkModel.get("attributeGroups"),n=0;n<t.length;n++){var r=t.at(n),i=r.get("meshSelector");if(i)for(var a=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh),o=0;o<a.length;o++){var s=a[o];if(e.id==s.id||this._sceneHelper.meshHasParent(e.id,s.id))return r}}return null}},{key:"highlightAttributeByID",value:function(e){if(this._zkModel){var t=this._zkModel.get("attributes").findWhere({attributeID:e});t?this.highlightAttribute(t):this.highlightAttribute(null)}}},{key:"highlightAttribute",value:function(e){if(this._zkScene&&this._scene&&e){var t=e.get("meshSelector");if(t){var n=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Mesh);this.highlightMeshes(n)}}}},{key:"getVisibleHiddenAttributesForMesh",value:function(e){var t=this,n=[],r=function(e){var t=n.find((function(t){return t.groupId==e}));return t||(t={groupId:e,visibleAttributes:[],hiddenAttributes:[]},n.push(t)),t};if(this._zkModel&&this._zkScene&&this._scene&&e)for(var i=this._zkModel.get("attributes"),a=0;a<i.length;a++){var o=i.at(a),s=o.get("attributeID"),u=o.get("meshSelector");if(u){var c=r(o.get("groupID"));this._elementSelector.getMeshElements(this._zkScene,this._scene,null,u,MPlaza.SceneElementType.Mesh).find((function(n){return!!t._sceneHelper&&(e.id==n.id||t._sceneHelper.meshHasParent(e.id,n.id))}))?c.visibleAttributes.push(s):c.hiddenAttributes.push(s)}}return n.filter((function(e){return e.visibleAttributes.length>0}))}},{key:"fireGroupPickedEvent",value:function(e){for(var t=0;t<this._groupPickedListeners.length;t++)this._groupPickedListeners[t](e)}},{key:"addGroupPickedListener",value:function(e){this._groupPickedListeners.push(e)}},{key:"fireFocusAttributesEvent",value:function(e){for(var t=0;t<this._focusAttributesListeners.length;t++)this._focusAttributesListeners[t](e)}},{key:"addFocusAttributesListener",value:function(e){this._focusAttributesListeners.push(e)}},{key:"addNotifyMessageListener",value:function(e){this._designNotifyMessageListeners.push(e),this._sceneDesignManager&&this._sceneDesignManager.addNotifyMessageListener(e)}},{key:"addRemoveMessageListener",value:function(e){this._designRemoveMessageListeners.push(e),this._sceneDesignManager&&this._sceneDesignManager.addRemoveMessageListener(e)}},{key:"setEventMessages",value:function(e){this._designEventMessages=e,this._sceneDesignManager&&this._sceneDesignManager.setEventMessages(e)}},{key:"addInfoPointPickedListener",value:function(e){this._infoPointPickedListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointPickedListener(e)}},{key:"addInfoPointContentShownListener",value:function(e){this._infoPointContentShownListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointContentShownListener(e)}},{key:"addInfoPointContentHiddenListener",value:function(e){this._infoPointContentHiddenListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointContentHiddenListener(e)}},{key:"addBeginAssetsLoadingListener",value:function(e){this._beginAssetsLoadingListeners.push(e)}},{key:"fireBeginAssetsLoadingEvent",value:function(){Logger.info("Begin Assets Loading");for(var e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()}},{key:"addEndAssetsLoadingListener",value:function(e){this._endAssetsLoadingListeners.push(e)}},{key:"fireEndAssetsLoadingEvent",value:function(){Logger.info("End Assets Loading");for(var e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()}},{key:"addBeginSceneLoadingListener",value:function(e){this._beginAssetsLoadingListeners.push(e)}},{key:"fireBeginSceneLoadingEvent",value:function(){Logger.info("Begin Scene Loading");for(var e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()}},{key:"addEndSceneLoadingListener",value:function(e){this._endAssetsLoadingListeners.push(e)}},{key:"fireEndSceneLoadingEvent",value:function(){Logger.info("End Scene Loading");for(var e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()}},{key:"getSceneScreenshotAsync",value:function(){var e=C(k().mark((function e(t,n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sceneHelper){e.next=5;break}return this.setRenderingNeeded(),e.next=4,this._sceneHelper.takeScreenshotAsync(t,n);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSceneContentScreenshotAsync",value:function(){var e=C(k().mark((function e(t,n){var r,i,a,o,s,u,c,l,h=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>2&&void 0!==h[2]?h[2]:0,i=h.length>3?h[3]:void 0,a=h.length>4?h[4]:void 0,o=h.length>5?h[5]:void 0,this._sceneHelper&&this.scene&&this.zkModel&&this.zkScene){e.next=6;break}return e.abrupt("return",null);case 6:if(this.preSceneContentScreenshot(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null),this.setRenderingNeeded(),s=this.scene.meshes.filter((function(e){var t;return null===(t=e.metadata)||void 0===t?void 0:t.iscanvasMesh})).map((function(e){return e.metadata.originalMeshID})),u="",!a){e.next=17;break}return e.next=14,this._sceneHelper.takeContentScreenshotAsync(t,n);case 14:u=e.sent,e.next=21;break;case 17:return e.next=19,g.ScenesPreview.getPreviewsAsync(this.scene,this._zkScene.get("rootUrl"),{width:1024,height:1024,camera:o?{position:new BABYLON.Vector3(o.get("px"),o.get("py"),o.get("pz")),target:new BABYLON.Vector3(o.get("tx"),o.get("ty"),o.get("tz"))}:{position:this._scene.activeCamera.position,target:this._scene.activeCamera.target},zkScene:this._zkScene,zkModel:this._zkModel,zkDesign:i,meshesWithCustomizationIds:s});case 19:c=e.sent,u=c.previewFile;case 21:return e.next=23,m.Utils.trimImageAsync(u);case 23:if(l=e.sent){e.next=26;break}throw new Error("Failed cropping image. DataUrl: ".concat(u," ").concat(a,", trimImage:").concat(l));case 26:return e.next=28,m.Utils.resizeImageFromDataUri(l,t,n,r);case 28:if(l=e.sent){e.next=31;break}throw new Error("Failed resizing image.");case 31:return this.refreshEnvironment(),this.postSceneContentScreenshot(),e.abrupt("return",l);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"preSceneContentScreenshot",value:function(){}},{key:"postSceneContentScreenshot",value:function(){}},{key:"preSceneMaterialScreenshot",value:function(){this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null)}},{key:"postSceneMaterialScreenshot",value:function(){this.refreshEnvironment()}},{key:"getMaterialScreenshotAsync",value:function(){var e=C(k().mark((function e(t,n,r){var i,a,o,s,u,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._scene&&this._sceneHelper){e.next=2;break}return e.abrupt("return",null);case 2:return this.preSceneMaterialScreenshot(),i=null,e.next=6,this.getSceneRootUrl();case 6:if(!(a=e.sent)){e.next=15;break}return e.next=10,d.MaterialsPreview.getPreviewsAsync(this._scene,a,[t],{width:n,height:r,crop:!0},!1);case 10:o=e.sent,1==(s=Object.keys(o.previewFiles)).length&&(i=o.previewFiles[s[0]]),e.next=22;break;case 15:return e.next=17,this._sceneHelper.takeMaterialScreenshotAsync(t,n,r);case 17:return u=e.sent,e.next=20,m.Utils.trimImageAsync(u);case 20:(c=e.sent)&&(i=c);case 22:return this.postSceneMaterialScreenshot(),e.abrupt("return",i);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"clearListeners",value:function(){this._groupPickedListeners=[],this._focusAttributesListeners=[]}},{key:"renderDesignAsync",value:function(){var e=C(k().mark((function e(t){var n,r,i,a,o,s,c,l=this,h=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(h.length>1&&void 0!==h[1])||h[1],!(this._scene&&this._zkScene&&this._zkModel&&t)){e.next=21;break}if(!this._sceneDesignManager||!this._sceneDesignManager.isForModels(this._scene,this._zkModel,t)){e.next=8;break}return this._sceneDesignManager.showDesign=n,e.next=6,this._sceneDesignManager.refreshAsync();case 6:e.next=20;break;case 8:this.emptyArFileCache(),this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this._sceneDesignManager=new u.SceneDesignManager(this._scene,this._zkScene,this._zkModel,t,n,this._designTextureResolution),this._sceneDesignManager.addRenderingNeededListener((function(){l.setLongRenderingNeeded(),l.notifyDesignChanged(t)})),this._sceneDesignManager.setCustomizerGrids(this._grids),this._sceneDesignManager.setEventMessages(this._designEventMessages),r=x(this._designNotifyMessageListeners);try{for(r.s();!(i=r.n()).done;)a=i.value,this._sceneDesignManager.addNotifyMessageListener(a)}catch(f){r.e(f)}finally{r.f()}o=x(this._designRemoveMessageListeners);try{for(o.s();!(s=o.n()).done;)c=s.value,this._sceneDesignManager.addRemoveMessageListener(c)}catch(f){o.e(f)}finally{o.f()}return e.next=20,this._sceneDesignManager.refreshAsync();case 20:this.setLongRenderingNeeded();case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetDesign",value:function(){this._scene&&this._zkScene&&this._zkModel&&(this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this.setLongRenderingNeeded())}},{key:"clearMeshDesignManagers",value:function(){this._sceneDesignManager&&this._sceneDesignManager.clearMeshDesignManagers()}},{key:"refreshMeshesDesignAsync",value:function(){var e=C(k().mark((function e(t,n){var r=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&"[object Array]"===Object.prototype.toString.call(t)&&t.forEach(function(){var e=C(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.refreshMeshDesignAsync(t.id,void 0,n||void 0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refreshMeshDesignAsync",value:function(){var e=C(k().mark((function e(t){var n,r,i,a=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.length>1&&void 0!==a[1]?a[1]:0,i=a.length>2?a[2]:void 0,null===(n=this._sceneDesignManager)||void 0===n||n.refreshMeshDesignAsync(t,r,i);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setCustomizerGrids",value:function(e){var t;this._grids=e,null===(t=this._sceneDesignManager)||void 0===t||t.setCustomizerGrids(e)}},{key:"removeDesignItem",value:function(e){var t;null===(t=this._sceneDesignManager)||void 0===t||t.removeItem(e)}},{key:"addDesignItemText",value:function(e,t){var n;return null===(n=this._sceneDesignManager)||void 0===n?void 0:n.addItemText(e,t)}},{key:"addDesignItemImage",value:function(){var e=C(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this._sceneDesignManager)||void 0===r?void 0:r.addItemImage(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDesignItemsInfo",value:function(){var e;return(null===(e=this._sceneDesignManager)||void 0===e?void 0:e.getItemsInfo())||[]}},{key:"setDesignItemText",value:function(e,t){var n;null===(n=this._sceneDesignManager)||void 0===n||n.setItemText(e,t)}},{key:"setDesignItemBold",value:function(e,t){var n;null===(n=this._sceneDesignManager)||void 0===n||n.setItemBold(e,t)}},{key:"setDesignItemItalic",value:function(e,t){var n;null===(n=this._sceneDesignManager)||void 0===n||n.setItemItalic(e,t)}},{key:"setDesignItemColor",value:function(e,t){var n;null===(n=this._sceneDesignManager)||void 0===n||n.setItemColor(e,t)}},{key:"setDesignItemFontFamily",value:function(e,t){var n;null===(n=this._sceneDesignManager)||void 0===n||n.setItemFontFamily(e,t)}},{key:"setDesignItemImage",value:function(){var e=C(k().mark((function e(t,n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this._sceneDesignManager)||void 0===r?void 0:r.setItemImage(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setItemTextOnPath",value:function(e,t,n){var r;null===(r=this._sceneDesignManager)||void 0===r||r.setItemTextOnPath(e,t,n)}},{key:"removeDesignItemImage",value:function(e){var t;null===(t=this._sceneDesignManager)||void 0===t||t.removeItemImage(e)}},{key:"setDesignVisibility",value:function(e,t){var n;null===(n=this._sceneDesignManager)||void 0===n||n.setDesignVisibility(e,t)}},{key:"setupShaderMaterialsCameraPosition",value:function(){if(this._scene)for(var e=0;e<this._scene.materials.length;e++){var t=this._scene.materials[e];this.setupShaderMaterialCameraPosition(t)}}},{key:"setupShaderMaterialCameraPosition",value:function(e){this._scene&&this._scene.activeCamera&&e&&e instanceof BABYLON.ShaderMaterial&&e.setVector3("cameraPosition",this._scene.activeCamera.position)}},{key:"setMeshLocation",value:function(e){this._meshLocationsManager&&this._meshLocationsManager.setMeshLocationByID(e)}},{key:"explodeMeshes",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._meshLocationsManager){e.next=3;break}return e.next=3,this._meshLocationsManager.explodeMeshes();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"collapseMeshes",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._meshLocationsManager){e.next=3;break}return e.next=3,this._meshLocationsManager.collapseMeshes();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dracoDecodingFunction",value:function(e,t,n){this.decodeDracoFile(e,t,n)}},{key:"decodeDracoFile",value:function(e,t,n){var r=(new Date).getTime(),i=new Uint8Array(t),a=msgpack.decode(i);this.dracoCompression.decodeMeshAsync(a.data).then((function(i){var a={};i&&(i.indices&&(a.indices=i.indices),i.positions&&(a.positions=i.positions),i.normals&&(a.normals=i.normals),i.uvs&&(a.uvs=i.uvs),i.uvs2&&(a.uvs2=i.uvs2));var o=new Date,s=o.getTime()-r,u=o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"."+o.getMilliseconds();Logger.info("Draco Decoding ["+u+"] - "+e+"\t"+t.byteLength+"\t"+s+" ms"),n&&n(a)}))}},{key:"exportSceneToBabylon",value:function(){return this._zkScene&&this._sceneHelper?this._sceneHelper.exportSceneToBabylon():null}},{key:"exportVisibleMeshesToBabylon",value:function(){return this._zkScene&&this._sceneHelper?this._sceneHelper.exportVisibleMeshesToBabylon():null}},{key:"exportMeshesForTyOnToBabylon",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._zkScene&&this._sceneHelper){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this._sceneHelper.exportMeshesForTyOnToBabylon();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportMeshToBabylon",value:function(){var e=C(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._scene&&this._zkScene&&this._sceneHelper){e.next=2;break}return e.abrupt("return",null);case 2:if(!(n=this._scene.getMeshById(t))){e.next=7;break}return e.next=6,this._sceneHelper.exportMeshToBabylon(n);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadMeshToBabylon",value:function(){var e=C(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._scene&&this._zkScene&&this._sceneHelper){e.next=2;break}return e.abrupt("return");case 2:if(!(n=this._scene.getMeshById(t))){e.next=6;break}return e.next=6,this._sceneHelper.downloadMeshBabylonAsync(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveSceneOnDatabaseAsync",value:function(){var e=C(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.exportSceneToBabylon())){e.next=7;break}return r=new y.Database,e.next=5,r.openAsync();case 5:return e.next=7,r.saveFileAsync(t,n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveVisibleMeshesOnDatabaseAsync",value:function(){var e=C(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportMeshesForTyOnToBabylon();case 2:if(!(n=e.sent)){e.next=9;break}return r=new y.Database,e.next=7,r.openAsync();case 7:return e.next=9,r.saveFileAsync(t,n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveGlbOnDatabaseAsync",value:function(){var e=C(k().mark((function e(t){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,this.exportSceneToLocalGLBAsync();case 3:if(!(n=e.sent)){e.next=10;break}return r=new y.Database,e.next=8,r.openAsync();case 8:return e.next=10,r.saveFileAsync(t,n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArFileUrlCacheKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"usdz",r="scene_"+e;if(t&&(r+="_code_"+t),this._sceneDesignManager){var i=this._sceneDesignManager.getDesignItemsJson();if(i){var a=CryptoJS.SHA1(i).toString();r+="_design_"+this._sceneDesignManager.getDesignID()+"_"+a}}return r+="_"+n}},{key:"getCachedArFileUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"usdz",r=this.getArFileUrlCacheKey(e,t,n);return this._arFileUrls.hasOwnProperty(r)?this._arFileUrls[r]:null}},{key:"cacheArFileUrl",value:function(e,t,n,r){if(r){var i=this.getArFileUrlCacheKey(e,t||void 0,n);this._arFileUrls[i]=r}}},{key:"exportSceneToUsdzAsync",value:function(){var e=C(k().mark((function e(t,n,r){var i,a,o,s,u,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._zkScene&&this._sceneHelper){e.next=2;break}return e.abrupt("return",null);case 2:if(a="usdz",o=null,!t||this._sceneDesignManager&&!r||(o=this.getCachedArFileUrl(t,n,a)),!o){e.next=7;break}return e.abrupt("return",o);case 7:return s=null,u=null,(c=this._zkScene.get("name"))&&(s=c),(l=this._zkScene.get("rootUrl"))&&(u=l),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),e.next=16,this._sceneHelper.exportSceneToUsdzAsync(s,u,this._sceneDesignManager&&!r?void 0:t,this._sceneDesignManager&&!r?void 0:n,null===(i=this._zkScene)||void 0===i?void 0:i.getARScale());case 16:return o=e.sent,this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),o&&t&&!this._sceneDesignManager&&this.cacheArFileUrl(t,n||null,a,o),e.abrupt("return",o);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"exportMeshToUsdzAsync",value:function(){var e=C(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=this.getMeshByID(t))&&this._zkScene&&this._sceneHelper)){e.next=10;break}return r=null,(i=this._zkScene.get("rootUrl"))&&(r=i),e.next=7,this._sceneHelper.exportMeshToUsdzAsync(r,n,this.getARScale());case 7:return a=e.sent,Logger.info("USDZ: "+a),e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportSceneToRemoteGlTFAsync",value:function(){var e=C(k().mark((function e(t,n,r){var i,a,o,s,u,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sceneHelper){e.next=2;break}return e.abrupt("return",null);case 2:if(a="glTF",o=null,!t||this._sceneDesignManager&&!r||(o=this.getCachedArFileUrl(t,n,a)),!o){e.next=7;break}return e.abrupt("return",o);case 7:return s=null,u=null,this._zkScene&&((c=this._zkScene.get("name"))&&(s=c),(l=this._zkScene.get("rootUrl"))&&(u=l)),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),e.next=13,this._sceneHelper.exportSceneToRemoteGlTFAsync(s,u,this._sceneDesignManager&&!r?void 0:t,this._sceneDesignManager&&!r?void 0:n,null===(i=this._zkScene)||void 0===i?void 0:i.getARScale());case 13:return o=e.sent,this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),o&&t&&!this._sceneDesignManager&&this.cacheArFileUrl(t,n||null,a,o),Logger.info("GlTF: "+o),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"exportMeshToRemoteGlTFAsync",value:function(){var e=C(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=this.getMeshByID(t))&&this._zkScene&&this._sceneHelper)){e.next=10;break}return r=null,(i=this._zkScene.get("rootUrl"))&&(r=i),e.next=7,this._sceneHelper.exportMeshToRemoteGlTFAsync(r,n,this.getARScale());case 7:return a=e.sent,Logger.info("GlTF: "+a),e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportSceneToRemoteGLBAsync",value:function(){var e=C(k().mark((function e(t,n,r){var i,a,o,s,u,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sceneHelper){e.next=2;break}return e.abrupt("return",null);case 2:if(a="glb",o=null,!t||this._sceneDesignManager&&!r||(o=this.getCachedArFileUrl(t,n,a)),!o){e.next=7;break}return e.abrupt("return",o);case 7:return s=null,u=null,this._zkScene&&((c=this._zkScene.get("name"))&&(s=c),(l=this._zkScene.get("rootUrl"))&&(u=l)),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),e.next=13,this._sceneHelper.exportSceneToRemoteGLBAsync(s,u,this._sceneDesignManager&&!r?void 0:t,this._sceneDesignManager&&!r?void 0:n,null===(i=this._zkScene)||void 0===i?void 0:i.getARScale());case 13:return o=e.sent,this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),o&&t&&!this._sceneDesignManager&&this.cacheArFileUrl(t,n||null,a,o),Logger.info("GLB: "+o),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"exportMeshToRemoteGLBAsync",value:function(){var e=C(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=this.getMeshByID(t))&&this._zkScene&&this._sceneHelper)){e.next=10;break}return r=null,(i=this._zkScene.get("rootUrl"))&&(r=i),e.next=7,this._sceneHelper.exportMeshToRemoteGLBAsync(r,n,this.getARScale());case 7:return a=e.sent,Logger.info("GlTF: "+a),e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exportSceneToARAsync",value:function(){var e=C(k().mark((function e(){var t,n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this._sceneHelper){e.next=3;break}return e.abrupt("return",t);case 3:return n=null,r=null,this._zkScene&&((i=this._zkScene.get("name"))&&(n=i),(a=this._zkScene.get("rootUrl"))&&(r=a)),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),e.next=9,this._sceneHelper.exportSceneToARMultiformatAsync(n,r,["usdz","glb"]);case 9:return t=e.sent,this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportMeshToARAsync",value:function(){var e=C(k().mark((function e(t){var n,r,i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!((r=this.getMeshByID(t))&&this._zkScene&&this._sceneHelper)){e.next=9;break}return i=null,(a=this._zkScene.get("rootUrl"))&&(i=a),e.next=8,this._sceneHelper.exportMeshToARMultiformatAsync(i,r,["usdz","glb"],this.getARScale());case 8:n=e.sent;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isAREnabled",value:function(){if(!this._zkScene)return!1;var e=this._zkScene.getAREnabled();return null!==e&&void 0!==e&&e&&null!=this._sceneHelper&&this._sceneHelper.getMeshesForAR().length>0&&this._sceneHelper.checkMaterialsForAR()}},{key:"exportSceneToLocalGLBAsync",value:function(){var e=C(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),t=null,!this._sceneHelper){e.next=6;break}return e.next=5,this._sceneHelper.exportSceneToLocalGLBBlobAsync();case 5:t=e.sent;case 6:return this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadSceneLocalGLBAsync",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),!this._sceneHelper){e.next=4;break}return e.next=4,this._sceneHelper.downloadSceneLocalGLBAsync();case 4:this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportSceneToLocalUSDZAsync",value:function(){var e=C(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),t=null,!this._sceneHelper){e.next=6;break}return e.next=5,this._sceneHelper.exportSceneToLocalUSDZUrlAsync();case 5:t=e.sent;case 6:return this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadSceneLocalUSDZAsync",value:function(){var e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),!this._sceneHelper){e.next=4;break}return e.next=4,this._sceneHelper.downloadSceneLocalUSDZAsync();case 4:this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSceneRootUrl",value:function(){var e=this;return new Promise((function(t,n){var r=null;e._zkScene?(r=e._zkScene.get("rootUrl")||null)?t(r):jQuery.ajax({url:e._zkScene.getSceneRootUrlApiUrl(),type:"GET",success:function(e){t(r=e)},error:function(e,t,r){n(r)}}):t(r)}))}},{key:"refreshInfoPoints",value:function(){var e=this;if(!(this._zkScene&&this._zkScene.getInfoPointsEnabled()&&this.canShowInfoPoints))return this.disposeInfoPointsManager(),void this.setLongRenderingNeeded();var t=this.getInfoPointsManagerStyle(),n=null;this._infoPointsManager||this._scene&&this._zkScene&&(this._infoPointsManager=new f.InfoPointsManager(this._zkScene,this._scene,t),this._infoPointPickedListeners&&this._infoPointPickedListeners.length>0&&this._infoPointsManager.addInfoPointPickedListenerRange(this._infoPointPickedListeners),this._infoPointContentShownListeners&&this._infoPointContentShownListeners.length>0&&this._infoPointsManager.addInfoPointContentShownListenerRange(this._infoPointContentShownListeners),this._infoPointContentShownListeners&&this._infoPointContentShownListeners.length>0&&this._infoPointsManager.addInfoPointContentShownListenerRange(this._infoPointContentShownListeners),this._infoPointsManager.onBeforeShowImages=function(){null===n&&(n=e.antialias),e.antialias=!1,e.disableAntialiasing()},this._infoPointsManager.onAfterShowImages=function(){e.antialias=n,n=null,e.enableAntialiasing(),e.setLongRenderingNeeded()},this._infoPointsManager.addRenderingNeededListener((function(){return e.setRenderingNeeded()}))),this._infoPointsManager&&(this.updateInfoPointsManagerStyle(),this._infoPointsManager.canShowInfoPointsContent=this.canShowInfoPointsContent,this._infoPointsManager.refresh()),this.setLongRenderingNeeded()}},{key:"getInfoPointsManagerStyle",value:function(){var e=this._infoPointsManagerStyle?this._infoPointsManagerStyle:{};if(this._zkScene){var t=this._zkScene.getInfoPointsStyleConfig();t&&(e.infoPointsStyle||(e.infoPointsStyle={}),t.get("borderColor")&&(e.infoPointsStyle.borderColor=t.get("borderColor")),t.get("innerPointColor")&&(e.infoPointsStyle.innerPointColor=t.get("innerPointColor")),t.get("color")&&(e.infoPointsStyle.color=t.get("color")),t.get("highlightColor")&&(e.infoPointsStyle.highlightColor=t.get("highlightColor")))}return e}},{key:"updateInfoPointsManagerStyle",value:function(){if(this._infoPointsManager){var e=this.getInfoPointsManagerStyle();this._infoPointsManager.applyStyle(e)}}},{key:"showInfoPoints",value:function(){this._infoPointsManager&&(this._infoPointsManager.showInfoPoints(),this.render(),this.setRenderingNeeded())}},{key:"hideInfoPoints",value:function(){this._infoPointsManager&&(this._infoPointsManager.hideInfoPoints(),this.render(),this.setRenderingNeeded())}},{key:"reloadAllLoadingErrorTexturesAsync",value:function(){var e=C(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._zkScene||!this._sceneHelper){e.next=5;break}if(!(t=this._zkScene.get("rootUrl"))){e.next=5;break}return e.next=5,this._sceneHelper.reloadAllLoadingErrorTexturesAsync(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadMaterialLoadingErrorTexturesAsync",value:function(){var e=C(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._zkScene||!this._sceneHelper){e.next=5;break}if(!(n=this._zkScene.get("rootUrl"))){e.next=5;break}return e.next=5,this._sceneHelper.reloadMaterialLoadingErrorTexturesAsync(n,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadLoadingErrorTextureAsync",value:function(){var e=C(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._zkScene||!this._sceneHelper){e.next=5;break}if(!(n=this._zkScene.get("rootUrl"))){e.next=5;break}return e.next=5,this._sceneHelper.reloadLoadingErrorTextureAsync(n,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isTextureLoadingError",value:function(e){return!!this._sceneHelper&&this._sceneHelper.isTextureLoadingError(e)}},{key:"materialHasLoadingErrorTextues",value:function(e){return!!this._sceneHelper&&this._sceneHelper.materialHasLoadingErrorTextues(e)}},{key:"notifyCameraMovement",value:function(){if(this._isHologramSource&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this.getOrCreateBroadcastChannel();if(!e)return;e.postMessage({type:E.CameraMovement,target:{x:this._camera.target.x,y:this._camera.target.y,z:this._camera.target.z},alpha:this._camera.alpha,beta:this._camera.beta,radius:this._camera.radius})}}},{key:"notifyScriptExecution",value:function(e){if(this._isHologramSource){var t=e.map((function(e){return{attributeID:e.attributeID,selectedValue:e.selectedValue,actions:e.actions.map((function(e){return e.toJSON()}))}})),n=this.getOrCreateBroadcastChannel();if(!n)return;n.postMessage({type:E.ScriptExecution,script:t})}}},{key:"notifyDesignChanged",value:function(e){if(this._isHologramSource){var t=this.getOrCreateBroadcastChannel();if(!t)return;t.postMessage({type:E.DesignChanged,design:e.toJSON()})}}},{key:"notifyActionExecution",value:function(e,t,n){this.notifyScriptExecution([{attributeID:e,selectedValue:t,actions:n}])}},{key:"attachBroadcastChannelEventHandlers",value:function(){var e=this;if(this._isHologram&&!this._isHologramSource){var t=this.getOrCreateBroadcastChannel();if(!t)return;t.onmessage=function(t){return e.onBroadcastMessageReceived(t)}}}},{key:"detachBroadcastChannelEventHandlers",value:function(){this._broadcastChannel&&(this._broadcastChannel.onmessage=null)}},{key:"onBroadcastMessageReceived",value:function(e){this._isHologram&&e&&e.data&&e.data.type&&(e.data.type===E.CameraMovement?this.processCameraMovementEvent(e):e.data.type===E.ScriptExecution?this.processScriptExecution(e):e.data.type===E.DesignChanged&&this.processDesignChanged(e))}},{key:"processCameraMovementEvent",value:function(e){this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&e&&e.data&&(this._camera.target=new BABYLON.Vector3(e.data.target.x,e.data.target.y,e.data.target.z),this._camera.alpha=e.data.alpha,this._camera.beta=e.data.beta,this._camera.radius=e.data.radius,this.setRenderingNeeded())}},{key:"processScriptExecution",value:function(e){if(e&&e.data&&e.data.script&&"[object Array]"===Object.prototype.toString.call(e.data.script)){var t=e.data.script.map((function(e){return{attributeID:e.attributeID,selectedValue:e.selectedValue,actions:e.actions.map((function(e){return new MPlaza.AttributeSceneAction(e)}))}}));this.executeScriptAsync(t)}}},{key:"processDesignChanged",value:function(e){if(e&&e.data&&e.data.design){var t=new MPlaza.Design(e.data.design);this.renderDesignAsync(t)}}},{key:"showResizableCanvasModel",value:function(){var e=C(k().mark((function e(t){var n,r,a,o,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._scene&&this._zkScene&&this._zkModel&&this._sceneHelper)){e.next=14;break}return e.next=3,this._sceneHelper.showResizableCanvas(t.width,t.height,t.depth,t.borderRadius,t.type,t.borderColor,t.columns,t.rows);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",{meshes:[],matrixJson:""});case 6:return(r=new(i().PaperScope)).setup(new r.Size(1,1)),a=new r.Matrix,o=s.MeshDesignManager.DEFAULT_SIZE,a.translate(o/2,o/2),a.scale(o/t.width,o/t.height),u=JSON.stringify(a.values),e.abrupt("return",{meshes:n,matrixJson:u});case 14:return e.abrupt("return",{meshes:[],matrixJson:""});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showResizableCanvasPerCurrentSide",value:function(){var e=C(k().mark((function e(t){var n,r,i,a,o,s=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("showResizableCanvasPerCurrentSide",t),n="resizable-canvas-".concat(t.width,"-").concat(t.height,"-").concat(t.colorId,"-sideIdPlaceholder-").concat(t.columns,"-").concat(t.rows,"-").concat(t.type,"-").concat(t.borderColor),this._lastResizableMeshID!==n){e.next=4;break}return e.abrupt("return");case 4:return this._lastResizableMeshID=n,e.next=7,this.showResizableCanvasModel(t);case 7:if(0!==(r=e.sent).meshes.length){e.next=10;break}return e.abrupt("return");case 10:if((i=this._zkModel.get("scenes").at(0).get("meshSides")).filter((function(e){return e.get("isResizable")})).forEach((function(e){return i.remove(e)})),a=r.meshes.find((function(e){return"front"===e.name}))){e.next=16;break}return e.abrupt("return");case 16:a.id=n.replace("sideIdPlaceholder",t.currentSideId.toString()),o=new MPlaza.ModelSceneMeshSide({sideID:t.currentSideId,meshID:a.id,uvChannel:0,percWidth:1,percHeight:1,subMeshID:0,matrix:r.matrixJson,isResizable:!0}),i.push(o),setTimeout((function(){return s.adjustCamera(!1)}),100);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showResizableCanvasPerVariant",value:function(){var e=C(k().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,d=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("showResizableCanvasPerVariant",t),this.zkModel){e.next=3;break}return e.abrupt("return");case 3:if(n="resizable-canvas-".concat(t.width,"-").concat(t.height,"-").concat(t.colorId,"-sideIdPlaceholder-").concat(t.columns,"-").concat(t.rows,"-").concat(t.type,"-").concat(t.borderColor),this._lastResizableMeshID!==n){e.next=6;break}return e.abrupt("return");case 6:return this._lastResizableMeshID=n,e.next=9,this.showResizableCanvasModel(t);case 9:if(0!==(r=e.sent).meshes.length){e.next=12;break}return e.abrupt("return");case 12:i=0,a=t.sidesIds.length>1,o=["front","back","borders"],"colored"===t.type?o=a?["front","back"]:["front"]:"mirrored"===t.type&&(o=a?["front","back","borders"]:["front","borders"]),(s=this._zkModel.get("scenes").at(0).get("meshSides")).filter((function(e){return e.get("isResizable")})).forEach((function(e){return s.remove(e)})),u=x(r.meshes);try{for(u.s();!(c=u.n()).done;)(l=c.value)&&o.includes(l.name)&&(h=a&&"front"!==l.name?t.sidesIds[1]:t.sidesIds[0],l.id=n.replace("sideIdPlaceholder",h.toString())+i++,f=new MPlaza.ModelSceneMeshSide({sideID:h,meshID:l.id,uvChannel:0,percWidth:1,percHeight:1,subMeshID:0,matrix:r.matrixJson,isResizable:!0}),s.push(f))}catch(p){u.e(p)}finally{u.f()}setTimeout((function(){return d.adjustCamera(!1)}),100);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearResizableProduct",value:function(){if(this.zkModel&&this._sceneHelper){this._sceneHelper.clearMeshes();var e=this._zkModel.get("scenes").at(0).get("meshSides");e.filter((function(e){return e.get("isResizable")})).forEach((function(t){return e.remove(t)}))}}}],r=[{key:"createSceneViewerAsync",value:function(){var t=C(k().mark((function t(n){var r;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new e(n),t.next=3,r.initAsync();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}],n&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"../../3D/src/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{AndroidAR:function(){return L.AndroidAR},AxesLayer:function(){return N.AxesLayer},BlendProceduralTexture:function(){return f.BlendProceduralTexture},BlurXProceduralTexture:function(){return i.BlurXProceduralTexture},BlurYProceduralTexture:function(){return a.BlurYProceduralTexture},BroadcastChannelEventType:function(){return H.BroadcastChannelEventType},Database:function(){return V.Database},DefaultAssetUrls:function(){return j.DefaultAssetUrls},DracoCompression:function(){return C.DracoCompression},EditingMode:function(){return r.EditingMode},EditorMeshType:function(){return Y.EditorMeshType},ElementSelector:function(){return M.ElementSelector},EnvironmentManager:function(){return A.EnvironmentManager},EnvironmentMode:function(){return r.EnvironmentMode},EventState:function(){return F.EventState},ForegroundBackgroundProceduralTexture:function(){return o.ForegroundBackgroundProceduralTexture},GlowManager:function(){return g.GlowManager},IncrementalFiles:function(){return m.IncrementalFiles},InfoPointsManager:function(){return O.InfoPointsManager},InnerShadow:function(){return b.InnerShadow},LightsLayer:function(){return R.LightsLayer},MakeIncremental:function(){return v.MakeIncremental},MaterialEditor:function(){return Y.MaterialEditor},MaterialGroup:function(){return G.MaterialGroup},MaterialPreviewData:function(){return y.MaterialPreviewData},MaterialsPreview:function(){return y.MaterialsPreview},MeshDesignManager:function(){return w.MeshDesignManager},MeshExpander:function(){return E.MeshExpander},MeshLocationsManager:function(){return p.MeshLocationsManager},MoveProceduralTexture:function(){return s.MoveProceduralTexture},MultiObserver:function(){return F.MultiObserver},MultiplyProceduralTexture:function(){return u.MultiplyProceduralTexture},NormalMapProceduralTexture:function(){return c.NormalMapProceduralTexture},Observable:function(){return F.Observable},Observer:function(){return F.Observer},OpacityProceduralTexture:function(){return l.OpacityProceduralTexture},OuterShadow:function(){return x.OuterShadow},OverlayProceduralTexture:function(){return h.OverlayProceduralTexture},Preview3DConfigurationManager:function(){return S.Preview3DConfigurationManager},ProceduralNormalMap:function(){return _.ProceduralNormalMap},SceneActionsExecutor:function(){return d.SceneActionsExecutor},SceneDesignManager:function(){return k.SceneDesignManager},SceneEditor:function(){return G.SceneEditor},SceneHelper:function(){return T.SceneHelper},SceneToBlobs:function(){return I.SceneToBlobs},SceneViewer:function(){return H.SceneViewer},SourceTaskStatus:function(){return G.SourceTaskStatus},StringTools:function(){return z.StringTools},Task:function(){return W.Task},UsdzHelper:function(){return P.UsdzHelper},Utils:function(){return B.Utils},WorkerPool:function(){return U.WorkerPool},ZakekeEnvironment:function(){return r.ZakekeEnvironment},debounce:function(){return D.debounce}}),n("../../3D/src/Polyfills/Array/Array.prototype.find.js"),n("../../3D/src/Polyfills/Array/Array.prototype.includes.js"),n("../../3D/src/Polyfills/Array/Array.prototype.map.js"),n("../../3D/src/Polyfills/String/String.prototype.startsWith.js"),n("../../3D/src/Polyfills/String/String.prototype.endsWith.js");var r=n("../../3D/src/Enumerations.ts"),i=n("../../3D/src/Components/ProceduralTextures/BlurXProceduralTexture.ts"),a=n("../../3D/src/Components/ProceduralTextures/BlurYProceduralTexture.ts"),o=n("../../3D/src/Components/ProceduralTextures/ForegroundBackgroundProceduralTexture.ts"),s=n("../../3D/src/Components/ProceduralTextures/MoveProceduralTexture.ts"),u=n("../../3D/src/Components/ProceduralTextures/MultiplyProceduralTexture.ts"),c=n("../../3D/src/Components/ProceduralTextures/NormalMapProceduralTexture.ts"),l=n("../../3D/src/Components/ProceduralTextures/OpacityProceduralTexture.ts"),h=n("../../3D/src/Components/ProceduralTextures/OverlayProceduralTexture.ts"),f=n("../../3D/src/Components/ProceduralTextures/BlendProceduralTexture.ts"),d=n("../../3D/src/Components/ActionExecutor/SceneActionExecutor.ts"),p=n("../../3D/src/Components/CollapseExplode/MeshLocationsManager.ts"),g=n("../../3D/src/Components/Glow/GlowManager.ts"),v=n("../../3D/src/Components/IncrementalFiles/MakeIncremental.ts"),m=n("../../3D/src/Components/IncrementalFiles/IncrementalFiles.ts"),y=n("../../3D/src/Components/MaterialsPreview/MaterialsPreview.ts"),_=n("../../3D/src/Components/NormalMap/ProceduralNormalMap.ts"),b=n("../../3D/src/Components/Shadows/InnerShadow.ts"),x=n("../../3D/src/Components/Shadows/OuterShadow.ts"),w=n("../../3D/src/Components/DesignManagers/MeshDesignManager.ts"),k=n("../../3D/src/Components/DesignManagers/SceneDesignManager.ts"),S=n("../../3D/src/Components/Preview3D/Preview3DConfigurationManager.ts"),C=n("../../3D/src/Components/Draco/DracoCompression.ts"),M=n("../../3D/src/Components/Selector/ElementSelector.ts"),A=n("../../3D/src/Components/Environment/EnvironmentManager.ts"),E=n("../../3D/src/Components/MeshExpander/MeshExpander.ts"),T=n("../../3D/src/Components/SceneHelper.ts"),I=n("../../3D/src/Components/SceneToBlobs/SceneToBlobs.ts"),L=n("../../3D/src/Components/AR/AndroidAR.ts"),O=n("../../3D/src/Components/InfoPointsManager/InfoPointsManager.ts"),P=n("../../3D/src/Components/USDZ/UsdzHelper.ts"),D=n("../../3D/src/Helpers/debounce.ts"),B=n("../../3D/src/Helpers/utils.ts"),N=(n("../../3D/src/Interfaces/IDisposable.ts"),n("../../3D/src/Interfaces/ISupportInitialize.ts"),n("../../3D/src/Interfaces/ISceneEditor.ts"),n("../../3D/src/Layers/AxesLayer.ts")),R=n("../../3D/src/Layers/LightsLayer.ts"),j=n("../../3D/src/Misc/DefaultAssetUrls.ts"),z=n("../../3D/src/Misc/StringTools.ts"),F=n("../../3D/src/Misc/Observable.ts"),U=n("../../3D/src/Misc/WorkerPool.ts"),V=n("../../3D/src/Misc/Database.ts"),H=n("../../3D/src/Viewers/SceneViewer.ts"),G=n("../../3D/src/Viewers/SceneEditor.ts"),Y=n("../../3D/src/Viewers/MaterialEditor.ts"),W=n("../Components/ChunkedTask.ts")},"../Components/ChunkedTask.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{Task:function(){return f}});var r=n("../../../node_modules/axios/index.js"),i=n.n(r);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=l((function e(t,n){var r=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"upload",function(){var e=u(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.uploadFileChunked(t,t.type,Zakeke.generateUUID(),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"uploadFileChunked",function(){var e=u(o().mark((function e(t,n,i,a,s){var u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.resumableUpload(t,n,i,s);case 2:if("OK"!==e.sent){e.next=16;break}return e.next=6,r.createTask(i,a);case 6:if(-1===(u=e.sent)){e.next=15;break}return e.next=10,r.getResultFromTask(u);case 10:if(!(c=e.sent)){e.next=13;break}return e.abrupt("return",c.files);case 13:e.next=16;break;case 15:throw"Upload failed";case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()),h(this,"resumableUpload",function(){var e=u(o().mark((function e(t,n,i,a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var s=new Resumable({target:Zakeke.config.baseApiUrl+"filechunks/upload",generateUniqueIdentifier:function(){return i},maxFiles:1,testChunks:!1,headers:r.headers,query:{resumableType:n},simultaneousUploads:3});s.addFile(t),s.on("fileError",(function(t,n){e("KO"),console.error("fileError",t,n)})),s.on("error",(function(t,n){e("KO"),console.error("error",t,n)})),s.on("progress",(function(){var e=100*s.progress();a&&a(e)})),s.on("fileAdded",(function(e,t){s.upload()})),s.on("complete",(function(){e("OK")}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),h(this,"createTask",function(){var e=u(o().mark((function e(t,n){var a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={fileID:t,options:n},e.next=3,i().post(Zakeke.config.baseApiUrl+r.tasksUrl,a,{headers:r.headers});case 3:return s=e.sent,e.abrupt("return",s?s.data.taskID:-1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"getResultFromTask",function(){var e=u(o().mark((function e(t){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=1,e.next=4,i().get(Zakeke.config.baseApiUrl+r.tasksUrl+"/results/"+t,{headers:r.headers});case 4:if(!(a=e.sent)||2!==a.data.state){e.next=9;break}return e.abrupt("return",a.data);case 9:if(!a||3!==a.data.state){e.next=11;break}return e.abrupt("return",null);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",null);case 16:if(!(++n>200)){e.next=19;break}return e.abrupt("return",null);case 19:return e.next=21,new Promise((function(e){return setTimeout(e,1e3)}));case 21:e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()),this.tasksUrl=t,this.token=n,this.headers=a?{Authorization:"Bearer "+this.token,"Accept-Language":"en-US"}:{"X-Auth-Token":this.token,"Accept-Language":"en-US"}}))},"./src/api.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{axiosApi:function(){return r},setupApi:function(){return u}});var r,i=n("./node_modules/axios/lib/axios.js"),a=n("./node_modules/lodash/lodash.js"),o=n.n(a),s=n("./src/helpers.tsx");function u(e,t){console.log(Zakeke.config),r=i.default.create({baseURL:Zakeke.config.cloudFlareApiUrl||Zakeke.config.baseApiUrl,timeout:12e4,withCredentials:!0,headers:{Authorization:"Bearer "+t,"Accept-Language":e}}),$.ajaxSetup({xhrFields:{withCredentials:!0},headers:{Authorization:"Bearer "+t,"Accept-Language":e}}),r.interceptors.response.use((function(e){return e.data&&(o().isObject(e.data)||o().isArray(e.data))&&(e.data=s.StringHelper.pascalToCamel(e.data)),e}),(function(e){return e.response&&e.response.data&&(e.response.data=s.StringHelper.pascalToCamel(e.response.data)),Promise.reject(e)}))}},"./src/components/customizer.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{ZakekeDesigner:function(){return p}});var r,i=n("react"),a=n("styled-components"),o=n.n(a),s=n("./src/helpers.tsx"),u=n("./src/state/provider.tsx");function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h,f,d=o().div(r||(h=["\n    width: 100%;\n    height: 100%;\n    position: relative;\n    outline: none !important;\n    \n    canvas {\n        outline: none !important;\n    }\n"],f||(f=h.slice(0)),r=Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(f)}})))),p=i.forwardRef((function(e,t){var n=c(i.useState((0,s.uuid)()),1)[0],r=(0,u.useZakeke)(),a=r.designUpdate,o=r.internalProduct,l=r.currentTemplate,h=r.internalCurrentTemplate,f=c(i.useState(null),2),p=f[0],g=f[1];(0,i.useEffect)((function(){var e=document.getElementById("zakeke-designer-container-"+n),t=new MPlaza.Customizer(!1,!1,null,!0);t.showSideImage=!1,t.addItemChangedListener(v),t.addItemRemovedListener(m),t.setCustomizedMessages([{Description:"",EventID:MPlaza.EventMessages.DPIWarning,Visible:!1}]),t.appendTo(e),g(t)}),[]),(0,i.useEffect)((function(){if(o){var t=o.get("colors").at(0).get("sides").find((function(t){return t.get("sideID")==e.areaId}));t&&p&&h&&(p.model=o,p.setDesign(h),p.setSide(t).then((function(){p.adaptZoomToSideAreas(!1)})))}}),[e.areaId,l,!!p]);var v=function(){a()},m=function(){a()},y=function(){p&&p.zoomIn()},_=function(){p&&p.zoomOut()};return(0,i.useImperativeHandle)(t,(function(){return{zoomIn:y,zoomOut:_}}),[]),i.createElement(d,{id:"zakeke-designer-container-"+n})}))},"./src/components/sceneViewer.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{ZakekeViewer:function(){return d}});var r,i=n("react"),a=n("./src/state/provider.tsx"),o=n("./src/helpers.tsx"),s=n("styled-components");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l,h,f=n.n(s)().div(r||(l=["\n    width: 100%;\n    height: 100%;\n    position: relative;\n    outline: none !important;\n    \n    canvas {\n        outline: none !important;\n    }\n"],h||(h=l.slice(0)),r=Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(h)}})))),d=function(e){var t=e.className,n=u(i.useState((0,o.uuid)()),1)[0],r=(0,a.useZakeke)(),s=r.isViewerReady,c=r.internalAppendViewer;return(0,i.useEffect)((function(){s&&c(document.getElementById("zakeke-viewer-container-"+n))}),[s]),i.createElement(f,{id:"zakeke-viewer-container-"+n,className:t})}},"./src/environment.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{ZakekeEnvironment:function(){return E}});var r=n("./node_modules/lodash/lodash.js"),i=n.n(r),a=n("./src/index.tsx"),o=n("../../3D/src/index.ts"),s=n("../../libs/pricingRuleBase/DesignPriceCalculatorRuleBased.tsx"),u=n("./src/api.ts"),c=n("./src/exceptions.tsx"),l=n("./src/fontsManager.ts"),h=n("./src/helpers.tsx"),f=n("./src/imageUploadTask.ts"),d=n("./src/integrations/Integration.ts"),p=n("./src/integrations/helpers.ts"),g=n("./src/models.ts");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(){b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(M([])));v&&v!==t&&n.call(v,i)&&(p=v);var m=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==_(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function x(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){x(a,r,i,o,s,"next",e)}function s(e){x(a,r,i,o,s,"throw",e)}o(void 0)}))}}function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function S(e,t){if(e){if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"platformAttributesSelection",[]),A(this,"previewWidth",768),A(this,"previewHeight",768),A(this,"clientPreviewWidth",1024),A(this,"clientPreviewHeight",1024),A(this,"shareUrlPrefix",null),A(this,"events",[]),A(this,"zkProduct",null),A(this,"zkScene",null),A(this,"zkCurrentTemplate",null),A(this,"zkTemplates",[]),A(this,"internalIsFullscreen",!1),A(this,"highlightSettings",null),A(this,"previousMeshesVisibleStates",{}),A(this,"lastCameraLocation",null),A(this,"enableShareCompositionUrl",!1),A(this,"sharedCompositionDocId",null),A(this,"templateId",null),A(this,"loadedComposition",null),A(this,"savedCompositions",null),A(this,"isDraftEditor",!1),A(this,"isViewerMode",!1),A(this,"isTemplateEditor",!1),A(this,"draftCompositionDocId",null),A(this,"undoStack",[]),A(this,"redoStack",[]),A(this,"currentAttributesSelection",null),A(this,"currentCompositionInfo",null),A(this,"copyrightMessageLocalStorageKey",""),A(this,"sellerSettings",null),A(this,"themeCompositions",null),A(this,"currency","EUR"),A(this,"groups",[]),A(this,"fonts",[]),A(this,"disableTextColors",!1),A(this,"textColors",[]),A(this,"defaultColor",""),A(this,"quantity",1),A(this,"quantityRule",null),A(this,"culture","en-US"),A(this,"price",0),A(this,"compositionId",null),A(this,"templates",[]),A(this,"currentTemplate",null),A(this,"product",null),A(this,"templateCategories",null),A(this,"cameras",[]),A(this,"isExplodedMode",!1),A(this,"isAssetsLoading",!1),A(this,"extensionFields",[]),A(this,"nftSettings",null),A(this,"eventMessages",null),A(this,"visibleEventMessages",[]),A(this,"translations",{statics:[],dynamics:[]}),A(this,"publicTranslations",null),A(this,"useLegacyScreenshot",!1),A(this,"parseParameters",(function(e){if(console.info("Parameters",e),e)for(var n in e){var r=e[n];switch(n){case"name":t.productName=r.replace(/\+/g,"%20");break;case"ecommerce":t.platform=r;break;case"qty":t.quantity=r;break;case"culture":t.culture=r;break;case"currency":t.currency=r;break;case"token":t.token=r;break;case"compositionId":t.compositionId=r;break;case"modelCode":t.productCode=r;break;case"previewWidth":t.previewWidth=r;break;case"previewHeight":t.previewHeight=r;break;case"shareUrlPrefix":t.shareUrlPrefix=r;break;case"sharedCompositionDocId":t.sharedCompositionDocId=r;break;case"templateId":t.templateId=r;break;case"enableShareCompositionUrl":t.enableShareCompositionUrl=r;break;case"isDraftEditor":t.isDraftEditor=r;break;case"draftCompositionDocId":t.draftCompositionDocId=r;break;case"viewerMode":t.isViewerMode=r;break;case"templateEditor":t.isTemplateEditor=r;break;case"legacyScreenshot":t.useLegacyScreenshot=1==r}if(0==n.indexOf("attributes")){var i,a=k(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.platformAttributesSelection.push(new d.PlatformAttributeSelection(JSON.stringify(o[0]),JSON.stringify(o[1]),"","",!0,!0))}}catch(b){a.e(b)}finally{a.f()}}}else for(var s=window.location.href.substring(window.location.href.lastIndexOf("?")+1).split("&"),u=0;u<s.length;u++){var l=s[u].indexOf("=");if(-1==l)throw new c.ParametersParseFailException(s[u]);var h=decodeURIComponent(s[u].substring(0,l)),f=s[u].substring(l+1);switch(h){case"name":t.productName=decodeURIComponent(f.replace(/\+/g,"%20"));break;case"ecommerce":t.platform=decodeURIComponent(f);break;case"qty":t.quantity=parseFloat(decodeURIComponent(f));break;case"culture":t.culture=decodeURIComponent(f);break;case"currency":t.currency=decodeURIComponent(f);break;case"token":t.token=decodeURIComponent(f);break;case"compositionId":t.compositionId=decodeURIComponent(f);break;case"modelCode":t.productCode=decodeURIComponent(f.replace(/\+/g,"%20"));break;case"previewWidth":t.previewWidth=parseInt(decodeURIComponent(f.replace(/\+/g,"%20")));break;case"previewHeight":t.previewHeight=parseInt(decodeURIComponent(f.replace(/\+/g,"%20")));break;case"shareUrlPrefix":t.shareUrlPrefix=decodeURIComponent(f.replace(/\+/g,"%20"));break;case"sharedCompositionDocId":t.sharedCompositionDocId=decodeURIComponent(f.replace(/\+/g,"%20"));break;case"templateId":t.templateId=decodeURIComponent(f.replace(/\+/g,"%20"));break;case"isDraftEditor":t.isDraftEditor=!0;break;case"enableShareCompositionUrl":t.enableShareCompositionUrl=!0;break;case"draftCompositionDocId":t.draftCompositionDocId=f;break;case"viewerMode":t.isViewerMode=!0;break;case"isTemplateEditor":t.isTemplateEditor=!0;break;case"legacyScreenshot":t.useLegacyScreenshot="1"==f}if(0==h.indexOf("attributes")){var p=decodeURIComponent(f.replace(/\+/g,"%20"));if(p&&""!=p){var g,v=k(JSON.parse(p));try{for(v.s();!(g=v.n()).done;){var m=g.value;t.platformAttributesSelection.push(new d.PlatformAttributeSelection(JSON.stringify(m[0]),JSON.stringify(m[1]),"","",!0,!0))}}catch(b){v.e(b)}finally{v.f()}}}}var y={"culture (in xx_XX format)":t.culture,currency:t.currency,"name (product name)":t.productName,ecommerce:t.platform,"qty (product quantity)":t.quantity,token:t.token,modelCode:t.productCode};for(var _ in y)if(!y[_])throw new c.Exception("Missing parameter: "+_);return window.token=t.token,window.isOwin=!0,!0})),A(this,"getProduct",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.productCode&&""!=t.productCode){e.next=2;break}throw new c.Exception("Loading product but no SKU found");case 2:return e.abrupt("return",new Promise((function(e,n){var r=new MPlaza.Model;r.set("modelID",1),r.fetch({success:function(){e(r)},error:function(){n(new c.Exception("Failed loading product"))},data:{c:t.productCode}})})));case 3:case"end":return e.stop()}}),e)})))),A(this,"getScene",function(){var e=w(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new c.Exception("Loading scene but no product found");case 2:if(0!=t.get("scenes").length){e.next=4;break}throw new c.Exception("The product don't have any scene configured");case 4:return(n=new Zakeke.Scene).set("sceneID",t.get("scenes").at(0).get("sceneID")),e.abrupt("return",new Promise((function(e,t){n.fetch({success:function(t){e(t)},error:function(){t(new c.Exception("Failed loading scene"))}})})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"getComposerModels",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.productCode&&""!=t.productCode){e.next=2;break}throw new c.Exception("Loading product but no SKU found");case 2:return e.abrupt("return",new Promise((function(e,n){var r=new Zakeke.ComposerModels;r.set("modelID",1),r.fetch({success:function(){e(r)},error:function(){n(new c.Exception("Failed loading product"))},data:{c:t.productCode}})})));case 3:case"end":return e.stop()}}),e)})))),A(this,"getFonts",w(b().mark((function e(){var n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get("fontfamilies/");case 2:return i=e.sent.data,(a=null!==(n=null===(r=t.zkProduct)||void 0===r?void 0:r.get("printTypes").at(0).get("fonts").map((function(e){return e.get("fontFamilyID")})))&&void 0!==n?n:[]).length>0&&(i=i.filter((function(e){return-1!=a.indexOf(e.fontFamilyID)}))),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))),A(this,"getSettings",w(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get("customizerinfo/");case 2:return t=e.sent.data,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),A(this,"getSellerSetting",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=w(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get("sellerSetting/");case 2:r=e.sent.data,t(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))),A(this,"createQuote",function(){var e=w(b().mark((function e(n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new g.Quote).formData=JSON.stringify(n),a.quantity=t.quantity,a.compositionDocID=t.composition.get("docID"),e.next=6,t.integration.getPrice(t.composition,t.zkCurrentTemplate,t.zkProduct,t.platformAttributesSelection,0,t.settings.additionalFeatures.prices3dConfigurator,t.settings.isPricingAdvancedEnabled,1);case 6:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=10;break}e.t0=void 0!==r;case 10:if(!e.t0){e.next=14;break}e.t2=r,e.next=15;break;case 14:e.t2=0;case 15:return a.modelPrice=e.t2,a.variantName=null!==(i=t.product.name)&&void 0!==i?i:"",e.next=19,u.axiosApi.post(Zakeke.config.baseApiUrl+"quotes",a);case 19:return o=e.sent.data,e.abrupt("return",o);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"getTranslations",w(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.axiosApi.get("sellerLocalizations/customizer-localizations");case 3:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return",t.data);case 8:console.log("getTranslations response is empty");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))),A(this,"loadLocalization",w(b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.culture,-1==Zakeke.config.avaibleLanguages.indexOf(n)&&(n=t.culture.substring(0,2)),-1==Zakeke.config.avaibleLanguages.lastIndexOf(n)&&(n="en"),e.next=5,t.loadScript(Zakeke.config.baseUrl+"Scripts/localizations/".concat(n.toLowerCase(),"/composer.js"));case 5:case"end":return e.stop()}}),e)})))),A(this,"getTemplateMacroCategories",w(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get("compositionmacrocategories");case 2:return t=e.sent,n=t.data.map((function(e){var t=e.category.map((function(e){return{categoryName:e.name,categoryID:e.categoryID}}));return{macroCategoryName:e.name,macroCategoryID:e.macroCategoryID,categories:t}})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),A(this,"loadScript",function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=document.createElement("script");r.onload=e,r.src=t,document.body.appendChild(r)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"validationNFTEmail",(function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)})),A(this,"validationNFTWalletAddress",(function(e){return/^0x[a-fA-F0-9]{40}$/.test(e)})),A(this,"saveCustomerWalletInfo",function(){var e=w(b().mark((function e(t,n,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.post(Zakeke.config.baseApiUrl+"customerwalletdocs",{email:n,walletAddress:r,zakekeEnvironment:2,compositionDocID:t});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),A(this,"setCopyrightMessageAccepted",(function(e){try{e?window.localStorage.setItem(t.copyrightMessageLocalStorageKey,e.toString()):window.localStorage.removeItem(t.copyrightMessageLocalStorageKey)}catch(n){}})),A(this,"getCopyrightMessageAccepted",(function(){var e=!1;try{e=!!window.localStorage.getItem(t.copyrightMessageLocalStorageKey)}catch(n){}return e})),A(this,"boot",function(){var e=w(b().mark((function e(n){var r,i,c,l,f;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.parseParameters(n),(0,u.setupApi)(t.culture,t.token),e.next=4,t.loadLocalization();case 4:return e.next=6,t.getSettings();case 6:return t.settings=e.sent,t.copyrightMessageLocalStorageKey=t.settings.userID+"_copyright_accepted",t.eventMessages=t.settings.eventMessages.map((function(e){return a.EventMessage.fromMessage(e)})),t.nftSettings=t.settings.nftSettings,t.trigger("change"),e.next=13,t.getTranslations();case 13:return t.translations=e.sent,c=new Map(t.translations.statics.map((function(e){return[e.original,e.localization]}))),l=new Map(t.translations.dynamics.map((function(e){return[e.original,e.localization]}))),t.publicTranslations={statics:c,dynamics:l},h.T.translations=t.publicTranslations,t.trigger("change"),e.next=21,t.getComposerModels();case 21:return f=e.sent,t.zkScene=f.get("scene"),t.zkProduct=f.get("model"),t.product=g.Product.fromProduct(t.zkProduct),t.quantityRule=t.zkProduct.get("quantityRule")?g.ProductQuantityRule.fromQuantityRule(t.zkProduct.get("quantityRule")):null,e.next=28,(0,p.integrationFor)(t.platform);case 28:return t.integration=e.sent,e.next=31,t.getSellerSetting();case 31:return t.sellerSettings=e.sent,e.next=34,t.getTemplateMacroCategories();case 34:if(t.templateCategories=e.sent,t.zkScene){e.next=37;break}throw new Error("Product has no 3D scene.");case 37:return e.next=39,s.DesignPriceCalculatorRuleFactory.create(t.zkProduct,Zakeke.config.baseApiUrl,t.token,!0,Zakeke.config.cloudFlareApiUrl);case 39:return t.pricingCalculator=e.sent,t.pricingCalculator.colorID=t.zkProduct.get("colors").at(0).get("colorID"),t.integration.setPricingCalculator(t.pricingCalculator),t.trigger("change"),e.next=45,t.getFonts();case 45:return t.fonts=e.sent,t.defaultColor=t.getDefaultColor(),t.disableTextColors=t.getDisableTextColors(),t.textColors=t.getTextColors(),t.trigger("change"),e.next=52,t.getTemplates();case 52:return t.zkTemplates=e.sent,t.templates=t.zkTemplates.map((function(e){return g.Template.fromTemplate(e)})),t.cameras=null!==(r=null===(i=t.zkScene)||void 0===i?void 0:i.get("cameraLocations").map((function(e){return g.Camera.fromZkCamera(e)})))&&void 0!==r?r:[],t.trigger("change"),e.next=58,o.SceneViewer.createSceneViewerAsync();case 58:return t.viewer=e.sent,t.viewer.isHologramSource=!0,t.viewer.addBeginAssetsLoadingListener((function(){t.isAssetsLoading=!0,t.trigger("change")})),t.viewer.addEndAssetsLoadingListener((function(){t.isAssetsLoading=!1,t.trigger("change")})),t.highlightSettings&&(t.viewer.highlightColor=t.highlightSettings.color,t.viewer.highlightSize=t.highlightSettings.size),t.viewer.setLoadingScreen({displayLoadingUI:function(){return null},hideLoadingUI:function(){return null},loadingUIBackgroundColor:"black",loadingUIText:"black"}),t.viewer.infoPointsManagerStyle={imagePanelStyle:{backgroundColor:"white",loadingTextColor:"#cccccc",buttonsBorderColor:"#dddddd",buttonsBorderHighlightColor:"#eeeeee",buttonsColor:"#888888",buttonsHighlightColor:"#555555",buttonsIconColor:"white"}},t.zkScene.getOrCreateEnvironmentConfig().set("mainColor","#000000"),t.zkScene.getOrCreateGeneralConfig().set("backgroundColor","#000000"),t.zkScene.getOrCreateGeneralConfig().set("backgroundAlpha",0),e.next=70,s.DesignPriceCalculatorRuleFactory.create(t.zkProduct,Zakeke.config.baseApiUrl,t.token,!0,Zakeke.config.cloudFlareApiUrl);case 70:return t.pricingCalculator=e.sent,t.pricingCalculator.colorID=t.zkProduct.get("colors").at(0).get("colorID"),t.integration.setPricingCalculator(t.pricingCalculator),e.next=75,t.viewer.loadSceneFromModelAsync(t.zkProduct,t.zkScene);case 75:return t.trigger("change"),e.next=78,t.handleSceneLoaded();case 78:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"appendViewer",(function(e){t.viewer&&t.viewer.appendTo(e)})),A(this,"setHighlightSettings",(function(e){t.highlightSettings=e,t.viewer&&(t.viewer.highlightColor=e.color,t.viewer.highlightSize=e.size)})),A(this,"renderDesign",i().throttle(w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer||!t.zkCurrentTemplate){e.next=4;break}return e.next=3,t.viewer.renderDesignAsync(t.zkCurrentTemplate);case 3:t.fireItemsChange();case 4:case"end":return e.stop()}}),e)}))),300)),A(this,"resize",(function(){t.viewer&&(t.lastCameraLocation&&t.lastCameraLocation!==Zakeke.getEmptyUUID()?(console.log("Restoring last camera location "+t.lastCameraLocation+" ..."),t.setCamera(t.lastCameraLocation,!1,!1)):t.viewer.adjustCamera(!1))})),A(this,"buildRecapProps",i().debounce((function(e){if(t.sellerSettings&&t.sellerSettings.isCompositionRecapEnabled){var n=t.zkProduct.get("attributes"),r=t.zkProduct.get("attributeGroups"),i=t.zkProduct.get("attributeSteps"),a={};e.forEach((function(e){var o,s=n.find((function(t){return t.get("attributeID")==e.attributeID})),u=s.get("options").find((function(t){return t.get("optionID")==e.optionID})),c=r.find((function(e){return e.get("groupID")==s.get("groupID")})),l=i.find((function(e){return e.get("stepID")==s.get("stepID")})),f="";null===(o=t.selection)||void 0===o||o.get("groups").each((function(e){e.get("attributes").each((function(n){var r,i,o,d;n.get("options").find((function(e){return e.get("optionID")==u.get("optionID")}))&&n.get("enabled")&&(t.isOptionEnabled(u.get("optionID")),f=-1!==e.get("groupID")?h.T._d(e.get("name"))+" "+h.T._d(s.get("name")):h.T._d(s.get("name")),a["".concat(f)]={groupDisplayOrder:null!==(r=null===c||void 0===c?void 0:c.get("displayOrder"))&&void 0!==r?r:0,stepDisplayOrder:null!==(i=null===l||void 0===l?void 0:l.get("displayOrder"))&&void 0!==i?i:0,attributeDisplayOrder:null!==(o=null===s||void 0===s?void 0:s.get("displayOrder"))&&void 0!==o?o:0,optionDisplayOrder:null!==(d=null===u||void 0===u?void 0:u.get("displayOrder"))&&void 0!==d?d:0,value:h.T._d(u.get("name"))})}))}))})),t.currentAttributesSelection=a}}),200)),A(this,"updateRecapAndExtensionField",(function(){var e,n=[];null===(e=t.selection)||void 0===e||e.getAllAttributeSelections().forEach((function(e){e.get("options").forEach((function(e){e.get("selected")&&n.push({attributeID:e.get("attributeID"),optionID:e.get("optionID")})}))})),t.getCurrentExtensionFields(n),t.buildRecapProps(n),t.trigger("change")})),A(this,"getCurrentExtensionFields",(function(e){var n=[],r={},i=t.zkProduct.get("attributes");e.forEach((function(e){var t=i.find((function(t){return t.get("attributeID")==e.attributeID})).get("options").find((function(t){return t.get("optionID")==e.optionID}));t.get("extensionFields").length&&t.get("extensionFields").forEach((function(e){var t;0!==n.length&&-1!=n.indexOf(e.name)||(n.push(e.name),r[e.name]={value:0,label:e.label,formatString:e.formatString}),t=e.dataTypeID===g.ExtensionFieldDataType.Integer?parseInt(e.value):parseFloat(e.value),r[e.name].value+=t}))}));var a=Object.keys(r).map((function(e){return r[e]}));t.extensionFields=a})),A(this,"handleSceneLoaded",w(b().mark((function e(){var n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",t.resize),console.log("Scene loaded"),t.selection=Zakeke.ComposerSelection.CreateComposerSelection(t.zkProduct),n=t.templateId||t.draftCompositionDocId||t.sharedCompositionDocId||t.compositionId,void 0==t.initialSelection&&(t.initialSelection=t.cloneSelection(t.selection)),e.next=7,t.internalLoadComposition(n);case 7:if(t.trigger("change"),t.buildStructure(),t.setQuantity(t.quantity),t.renderDesign(),t.viewer.addNotifyMessageListener((function(e,n,r,i,a,o,s,u){t.visibleEventMessages.push({areaID:e,itemGuid:n,type:r,title:i,message:a,closabled:o,requiredWidth:s,requiredHeight:u}),t.trigger("change")})),t.viewer.addRemoveMessageListener((function(e,n){t.visibleEventMessages=t.visibleEventMessages.filter((function(t){return t.areaID!==e&&t.itemGuid!==n})),t.trigger("change")})),t.viewer.setEventMessages(t.settings.eventMessages.map((function(e){return{AddToCartDisabledIfVisible:e.addToCartDisabledIfVisible,AdditionalData:e.additionalData,Closeable:e.closeable,Description:e.description,EnableCheckForSellerImages:e.enableCheckForSellerImages,EventID:e.eventID,Visible:e.visible}}))),t.sellerSettings&&(t.addHotjarScript(null===(r=t.sellerSettings)||void 0===r?void 0:r.hotjarSiteID),t.addGoogleTagManagerID(null===(i=t.sellerSettings)||void 0===i?void 0:i.googleTagManagerID)),t.sharedCompositionDocId&&(t.composition.set("docID",null),t.composition.set("designDocID",null)),t.registerView(),t.isTemplateEditor){e.next=20;break}return e.next=20,t.updateSavedCompositions();case 20:setTimeout((function(){return t.updateRecapAndExtensionField()}),1e3);case 21:case"end":return e.stop()}}),e)})))),A(this,"getComposition",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=new MPlaza.Composition;i.set("docID",n),i.fetch({success:function(t){e(t)},error:function(){r()},data:{frombackoffice:!!t.isDraftEditor}})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"getDesign",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=new MPlaza.Design;i.set("docID",n),i.fetch({success:function(t){e(t)},error:function(){r()},data:{frombackoffice:!!t.isDraftEditor}}),i.addEventListener("change",t.updatePrice)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"internalLoadDesign",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDesign(t.composition.get("designDocID"));case 2:return t.zkCurrentTemplate=e.sent,e.next=5,(0,l.downloadFontsOfDesign)(t.zkCurrentTemplate,t.fonts);case 5:t.renderDesign();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"loadComposition",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.internalLoadComposition(n);case 2:t.buildStructure();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"internalLoadComposition",function(){var e=w(b().mark((function e(n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return e.next=3,t.getComposition(n);case 3:if(t.composition=e.sent,t.templateId&&(t.loadedComposition={templateName:t.composition.get("name"),attributesOptions:t.composition.get("compositionItems").map((function(e){return{attributeID:e.get("attributeID"),optionID:e.get("selectedOptionID")}})),selectedCategoryID:t.composition.get("categories").length>0?t.composition.get("categories").at(0).get("categoryID"):null}),t.selection.setupOnComposition(t.composition),!t.composition.get("designDocID")){e.next=11;break}return e.next=9,t.internalLoadDesign(t.composition.get("designDocID"));case 9:e.next=12;break;case 11:t.templates.length>0&&t.setTemplate(t.templates[0].id);case 12:e.next=32;break;case 14:t.composition=t.selection.buildComposition(),r=k(t.platformAttributesSelection),e.prev=16,a=b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.value,t.zkProduct.get("attributes").each((function(e){if((0,h.isPlatformCode)(e.get("attributeCode")))try{if((0,h.compare)(JSON.parse(e.get("attributeCode")),JSON.parse(n.attributeCode))){var r=e.get("options").find((function(e){return(0,h.compare)(JSON.parse(e.get("optionCode")),JSON.parse(n.optionCode))}));r&&(t.selection.selectAttributeValue(e.get("attributeID"),r.get("optionID")),n.attributeLabel=e.get("name"),n.optionLabel=r.get("name"))}}catch(i){console.error("Failed parsing attribute from data:",n),console.error(i)}}));case 2:case"end":return e.stop()}}),e)})),r.s();case 19:if((i=r.n()).done){e.next=23;break}return e.delegateYield(a(),"t0",21);case 21:e.next=19;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),r.e(e.t1);case 28:return e.prev=28,r.f(),e.finish(28);case 31:t.templates.length>0&&t.setTemplate(t.templates[0].id);case 32:return e.next=34,t.sync3DAndPlatformSelectionWithCurrentSelection();case 34:t.updateComposition(),t.updateRecapAndExtensionField();case 36:case"end":return e.stop()}}),e,null,[[16,25,28,31]])})));return function(t){return e.apply(this,arguments)}}()),A(this,"sync3DAndPlatformSelectionWithCurrentSelection",w(b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.selection.get("groups").each((function(e){e.get("attributes").each((function(e){if(!t.platformAttributesSelection.find((function(t){return(0,h.matchCodes)(t.attributeCode,e.get("attributeCode"))}))){var n=e.get("options").findWhere({selected:!0});n&&t.platformAttributesSelection.push(new d.PlatformAttributeSelection(e.get("attributeCode"),n.get("optionCode"),e.get("name"),n.get("name"),e.get("enabled"),n.get("enabled")))}}))})),n=t.selection.getAllAttributeTransformationScript(),t.viewer.adjustCamera(!1),e.next=5,t.viewer.executeScriptAsync(n);case 5:t.selection.on("attributeSelectionChanged",(function(e){t.handleAttributeSelectionChanged(e)})),t.selection.on("attributeEnabled",(function(e){t.handleAttributeEnabled(e.attributeID)})),t.selection.on("attributeDisabled",(function(e){t.handleAttributeDisabled(e.attributeID)})),t.selection.on("attributeOptionEnabled",(function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)})),t.selection.on("attributeOptionDisabled",(function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)}));case 10:case"end":return e.stop()}}),e)})))),A(this,"cloneSelection",(function(e){var n=new Zakeke.ComposerSelection;n.set("zkModel",t.zkProduct),n.set("attributeDependencies",e.get("attributeDependencies")),n.set("optionDependencies",e.get("optionDependencies")),n.get("groups").reset(),e.get("groups").each((function(e){var t=new Zakeke.AttributeGroupSelection;for(var r in e.attributes)t.set(r,e.attributes[r]);n.get("groups").add(t)}));var r=0;return n.get("groups").each((function(t){t.set("attributes",e.get("groups").at(r).get("attributes").clone()),t.get("attributes").reset(),e.get("groups").at(r).get("attributes").each((function(e){var n=new Zakeke.AttributeSelection;for(var r in e.attributes)n.set(r,e.attributes[r]);t.get("attributes").add(n)}));var n=0;t.get("attributes").each((function(t){t.set("options",e.get("groups").at(r).get("attributes").at(n).get("options").clone()),t.get("options").reset(),e.get("groups").at(r).get("attributes").at(n).get("options").each((function(e){var n=new Zakeke.OptionSelection;for(var r in e.attributes)n.set(r,e.attributes[r]);t.get("options").add(n)})),n++})),r++})),n})),A(this,"undo",w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.undoStack&&t.undoStack.length>0?t.undoStack.pop():null){e.next=3;break}return e.abrupt("return");case 3:return t.redoStack.push(t.selection),t.selection=n,t.selection.on("attributeSelectionChanged",(function(e){t.handleAttributeSelectionChanged(e)})),t.selection.on("attributeEnabled",(function(e){t.handleAttributeEnabled(e.attributeID)})),t.selection.on("attributeDisabled",(function(e){t.handleAttributeDisabled(e.attributeID)})),t.selection.on("attributeOptionEnabled",(function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)})),t.selection.on("attributeOptionDisabled",(function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)})),t.selection.attachEvents(),r=t.selection.getAllAttributeTransformationScript(),e.next=14,t.viewer.executeScriptAsync(r);case 14:t.buildStructure(),t.updateComposition(),t.updateRecapAndExtensionField();case 17:case"end":return e.stop()}}),e)})))),A(this,"redo",w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.redoStack&&t.redoStack.length>0?t.redoStack.pop():null){e.next=3;break}return e.abrupt("return");case 3:return t.undoStack.push(t.selection),t.selection=n,t.selection.on("attributeSelectionChanged",(function(e){t.handleAttributeSelectionChanged(e)})),t.selection.on("attributeEnabled",(function(e){t.handleAttributeEnabled(e.attributeID)})),t.selection.on("attributeDisabled",(function(e){t.handleAttributeDisabled(e.attributeID)})),t.selection.on("attributeOptionEnabled",(function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)})),t.selection.on("attributeOptionDisabled",(function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)})),t.selection.attachEvents(),r=t.selection.getAllAttributeTransformationScript(),e.next=14,t.viewer.executeScriptAsync(r);case 14:t.buildStructure(),t.updateComposition(),t.updateRecapAndExtensionField();case 17:case"end":return e.stop()}}),e)})))),A(this,"reset",w(b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.initialSelection){e.next=2;break}return e.abrupt("return");case 2:return t.undoStack=[],t.redoStack=[],t.selection=t.cloneSelection(t.initialSelection),t.selection.attachEvents(),t.selection.on("attributeSelectionChanged",(function(e){t.handleAttributeSelectionChanged(e)})),t.selection.on("attributeEnabled",(function(e){t.handleAttributeEnabled(e.attributeID)})),t.selection.on("attributeDisabled",(function(e){t.handleAttributeDisabled(e.attributeID)})),t.selection.on("attributeOptionEnabled",(function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)})),t.selection.on("attributeOptionDisabled",(function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)})),n=t.selection.getAllAttributeTransformationScript(),e.next=14,t.viewer.executeScriptAsync(n);case 14:t.buildStructure(),t.updateComposition(),t.updateRecapAndExtensionField();case 17:case"end":return e.stop()}}),e)})))),A(this,"handleAttributeSelectionChanged",function(){var e=w(b().mark((function e(n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.viewer.executeActionsAsync(n.attributeID,n.selectedValue,n.actions);case 2:t.updateComposition(),(r=t.zkProduct.get("attributes").find((function(e){return e.get("attributeID")==n.attributeID})))&&(i=r.get("options").find((function(e){return e.get("optionID")==n.selectedValue})))&&((a=t.platformAttributesSelection.find((function(e){return(0,h.matchCodes)(e.attributeCode,r.get("attributeCode"))})))&&(a.optionCode=i.get("optionCode"),a.optionLabel=i.get("name")),t.setOptionSelectionEnabled(r.get("attributeID"),i.get("optionID"),t.isOptionEnabled(i.get("optionID")))),t.buildStructure(),t.renderDesign();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"handleAttributeEnabled",(function(e){t.updateComposition(),t.setAttributeSelectionEnabled(e,!0),t.buildStructure(),t.renderDesign()})),A(this,"handleAttributeDisabled",(function(e){t.updateComposition(),t.setAttributeSelectionEnabled(e,!1),t.buildStructure(),t.renderDesign()})),A(this,"handleAttributeOptionEnabled",(function(e,n){t.updateComposition(),t.setOptionSelectionEnabled(e,n,!0),t.buildStructure(),t.renderDesign()})),A(this,"handleAttributeOptionDisabled",(function(e,n){t.updateComposition(),t.setOptionSelectionEnabled(e,n,!1),t.buildStructure(),t.renderDesign()})),A(this,"setAttributeSelectionEnabled",(function(e,n){var r=t.zkProduct.get("attributes").find((function(t){return t.get("attributeID")==e}));if(r){var i=t.platformAttributesSelection.find((function(e){return(0,h.matchCodes)(e.attributeCode,r.get("attributeCode"))}));i&&(i.attributeIsEnabled=n),r.get("options").each((function(r){t.setOptionSelectionEnabled(e,r.get("optionID"),n)}))}})),A(this,"setOptionSelectionEnabled",(function(e,n,r){var i=t.zkProduct.get("attributes").find((function(t){return t.get("attributeID")==e}));if(i){var a=i.get("options").find((function(e){return e.get("optionID")==n}));if(a){var o=t.platformAttributesSelection.find((function(e){return(0,h.matchCodes)(e.attributeCode,i.get("attributeCode"))}));o&&(0,h.matchCodes)(o.optionCode,a.get("optionCode"))&&(o.optionIsEnabled=r)}}t.updateRecapAndExtensionField()})),A(this,"isOptionEnabled",(function(e){var n=!1;return t.selection.get("groups").each((function(t){t.get("attributes").each((function(t){var r=t.get("options").find((function(t){return t.get("optionID")==e}));r&&(n=r.get("enabled"))}))})),n})),A(this,"updateComposition",(function(){t.selection.updateComposition(t.composition),t.updatePrice()})),A(this,"_updatePrice",w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!t.composition||!t.zkProduct){e.next=6;break}return r=t.composition.getPrice(t.zkProduct,t.quantity),e.next=5,t.integration.getPrice(t.composition,t.zkCurrentTemplate,t.zkProduct,t.platformAttributesSelection,r,t.settings.additionalFeatures.prices3dConfigurator,t.settings.isPricingAdvancedEnabled,t.quantity);case 5:n=e.sent;case 6:t.price=n,t.trigger("change");case 8:case"end":return e.stop()}}),e)})))),A(this,"updatePrice",i().debounce(this._updatePrice,300)),A(this,"buildStructure",(function(){var e=[];if(t.selection){for(var n=0;n<t.selection.get("groups").length;n++){var r=t.selection.get("groups").at(n),i=t.createGroupFromSelection(r);e.push(i)}e.sort((function(e,t){return e.displayOrder-t.displayOrder}))}t.groups=e,t.trigger("change")})),A(this,"createGroupFromSelection",(function(e){var n=t.zkProduct.get("attributeGroups").get(e.get("groupID")),r=n?n.get("imageUrl"):null,i=new g.Group;i.id=n?n.get("groupID"):-1,i.guid=n?n.get("groupGuid"):"-1",i.name=n?n.get("name"):"Other",i.imageUrl=r,i.enabled=!0,i.cameraLocationId=n?n.get("sceneCameraLocationID"):null,i.steps=t.zkProduct.get("attributeSteps").filter((function(e){return e.get("groupID")==i.id})).map((function(n){return t.createStep(n,e)})),n&&(i.displayOrder=n.get("displayOrder"),i.direction=n.get("direction"),i.attributesAlwaysOpened=n.get("attributesAlwaysOpened"));for(var a=function(){var n=e.get("attributes").at(o),r=t.zkProduct.get("attributes").find((function(e){return e.get("attributeID")==n.id}));if(-1==r.get("stepID")){var a=t.createAttributeFromSelection(n);i.attributes.push(a)}},o=0;o<e.get("attributes").length;o++)a();i.attributes.sort((function(e,t){return e.displayOrder-t.displayOrder}));for(var s=function(){var n=t.zkProduct.get("templateGroups").at(u),r=e.get("templateGroups").find((function(e){return e.get("templateGroupID")==n.get("templateGroupID")}));if(r&&null==n.get("stepID")){var a=t.createTemplateGroupFromSelection(r);i.templateGroups.push(a)}},u=0;u<t.zkProduct.get("templateGroups").length;u++)s();return i.templateGroups.sort((function(e,t){return e.displayOrder-t.displayOrder})),i})),A(this,"createAttributeFromSelection",(function(e){var n=t.zkProduct.get("attributes").get(e.get("attributeID")),r=new g.Attribute;r.id=n.get("attributeID"),r.guid=n.get("attributeGuid"),r.code=n.get("attributeCode"),r.name=n.get("name")||"",r.description=n.get("description")||"",r.optionShapeType=1==n.get("optionPreviewShapeID")?g.AttributeOptionShapeType.Round:g.AttributeOptionShapeType.Square,r.displayOrder=n.get("displayOrder"),r.enabled=e.get("enabled"),r.groupId=n.get("groupID"),r.stepId=n.get("stepID"),r.hideOptionsLabel=n.get("hideOptionsLabel"),r.cameraLocationId=n?n.get("sceneCameraLocationID"):null;for(var i=0;i<e.get("options").length;i++){var a=e.get("options").at(i),o=t.createOptionFromSelection(a);o.attribute=r,r.options.push(o)}return e.get("attributeTypeID")==MPlaza.AttributeType.Options?r.type=g.AttributeType.Select:e.get("attributeTypeID")==MPlaza.AttributeType.Color?(r.type=g.AttributeType.Colorpicker,r.value=e.get("selectedValue")):(e.get("attributeTypeID")==MPlaza.AttributeType.Number||e.get("attributeTypeID")==MPlaza.AttributeType.String)&&(r.type=g.AttributeType.Colorpicker,r.value=e.get("selectedValue"),r.numberFormat=""),r.options.sort((function(e,t){return e.displayOrder-t.displayOrder})),r})),A(this,"createOptionFromSelection",(function(e){var n=t.zkProduct.get("attributes").get(e.get("attributeID")).get("options").get(e.get("optionID")),r=new g.Option;return r.id=n.get("optionID"),r.guid=n.get("optionGuid"),r.code=n.get("optionCode"),r.name=n.get("name")||"",r.description=n.get("description")||"",r.imageUrl=n.get("imageUrl"),r.displayOrder=n.get("displayOrder"),r.selected=e.get("selected"),r.enabled=e.get("enabled"),r})),A(this,"createTemplateGroupFromSelection",(function(e){var n,r=t.zkProduct.get("templateGroups").find((function(t){return t.get("templateGroupID")===e.get("templateGroupID")}));if(!r)return new a.ThemeTemplateGroup;var i=new a.ThemeTemplateGroup;i.templateGroupID=r.get("templateGroupID"),i.name=null!==(n=r.get("name"))&&void 0!==n?n:"",i.groupID=r.get("groupID"),i.stepID=r.get("stepID"),i.displayOrder=r.get("displayOrder");for(var o=function(){var t=e.get("macrocategory").at(s),n=r.get("macrocategory").find((function(e){return e.get("macroCategoryID")===t.get("macroCategoryID")}));if(!n)return{v:i};var o=new a.ThemeMacroCategory;o.id=n.get("macroCategoryID"),o.name=n.get("name");var l=function(){var e=t.get("category").at(u),r=n.get("category").find((function(t){return t.get("categoryID")===e.get("categoryID")}));if(!r)return{v:{v:i}};var s=new a.ThemeCategory;s.id=r.get("categoryID"),s.name=r.get("name");var l=function(){var t=e.get("composition").at(c),n=r.get("composition").find((function(e){return e.get("compositionID")===t.get("compositionID")}));if(!n)return{v:{v:{v:i}}};var o=new a.TemplateComposition;o.name=n.get("name"),o.previewImageUrl=n.get("previewImageUrl"),o.compositionID=n.get("compositionID"),s.composition.push(o)};for(c=0;c<e.get("composition").length;c++){var h=l();if("object"===_(h))return h.v}o.category.push(s)};for(u=0;u<t.get("category").length;u++){var h=l();if("object"===_(h))return h.v}i.macroCategory.push(o)},s=0;s<e.get("macrocategory").length;s++){var u,c,l=o();if("object"===_(l))return l.v}return i})),A(this,"saveDesignBackbone",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.zkCurrentTemplate;r?r.save(null,{success:function(n){t.composition.set("designDocID",n.get("docID")),e()},error:function(){n()},headers:{fromBackOffice:!!t.isDraftEditor}}):e()})));case 1:case"end":return e.stop()}}),e)})))),A(this,"saveCompositionBackbone",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.composition.save(null,{success:function(){e()},error:function(){n()},headers:{fromBackOffice:!!t.isDraftEditor}})})));case 1:case"end":return e.stop()}}),e)})))),A(this,"trigger",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a,o=k(t.events.filter((function(t){return t.event==e})));try{for(o.s();!(a=o.n()).done;){var s=a.value;s.callback?s.callback.apply(t,r):console.error("Event handler can't be null or undefined")}}catch(u){o.e(u)}finally{o.f()}})),A(this,"on",(function(e,n){t.events.push(new g.ZakekeEvent(e,n))})),A(this,"off",(function(e,n){t.events=t.events.filter((function(t){return t.event==e&&t.callback==n}))})),A(this,"setTemplate",(function(e){t.zkCurrentTemplate=t.zkTemplates.find((function(t){return t.get("templateDesignID")==e})),t.currentTemplate=t.templates.find((function(t){return t.id==e}))||null,t.renderDesign()})),A(this,"getTemplateUploadRestrictictions",(function(e,n){var r,i,a,o,s,u,c,l=t.zkTemplates.find((function(t){return t.get("templateDesignID")==e}));if(!l)throw"Template does not exists with id "+e;var h=l.getDesignSide(t.zkProduct.get("colors").at(0).get("sides").get(n)),f=function(e){var t,n;return h&&h.get("uploadRestrictions")?null===(t=h.get("uploadRestrictions"))||void 0===t?void 0:t[e]:l.get("uploadRestrictions")?void(null===(n=l.get("uploadRestrictions"))||void 0===n||n[e]):null},d=t.settings.addons.find((function(e){return"PDF"===e.addonName||"PDF_EPS"===e.addonName})),p=t.settings.addons.find((function(e){return"EPS"===e.addonName||"PDF_EPS"===e.addonName}));return{isUserImageAllowed:null===(r=f("isUserImageAllowed"))||void 0===r||r,isJpgAllowed:null===(i=f("isJpgAllowed"))||void 0===i||i,isPngAllowed:null===(a=f("isPngAllowed"))||void 0===a||a,isSvgAllowed:null===(o=f("isSvgAllowed"))||void 0===o||o,isPdfAllowed:(null===(s=f("isPdfAllowed"))||void 0===s||s)&&!!d,isEpsAllowed:(null===(u=f("isEpsAllowed"))||void 0===u||u)&&!!p,isPdfWithRasterAllowed:(null===(c=f("isPdfWithRasterAllowed"))||void 0===c||c)&&!!d}})),A(this,"getTemplates",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=w(b().mark((function e(n,r){var i,a,o,s,c,h;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get("designs/templates/"+t.zkProduct.get("modelID"));case 2:if(i=e.sent.data,a=[],!(i.length>0)){e.next=26;break}o=k(i[0].categories[0].templates),e.prev=6,o.s();case 8:if((s=o.n()).done){e.next=18;break}return c=s.value,e.next=12,t.getTemplate(c.designID);case 12:return h=e.sent,e.next=15,(0,l.downloadFontsOfDesign)(h,t.fonts);case 15:a.push(h);case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),o.e(e.t0);case 23:return e.prev=23,o.f(),e.finish(23);case 26:n(a);case 27:case"end":return e.stop()}}),e,null,[[6,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))),A(this,"saveProduct",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.zkProduct&&t.zkProduct.save(null,{success:function(t,n,r){e()},error:function(e,t,r){n(t)}})})));case 1:case"end":return e.stop()}}),e)})))),A(this,"getTemplate",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=new MPlaza.Design;i.set("docID",n),i.fetch({success:function(){var t=w(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(i);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),error:function(){return null},data:{template:!0}}),i.addEventListener("change",t.updatePrice)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"updateView",(function(){t.viewer.updateView()})),A(this,"selectOption",(function(e){var n,r,i=t.cloneSelection(t.selection);if(t.undoStack.push(i),t.zkProduct.get("attributes").each((function(t){var i=t.get("options").find((function(t){return t.get("optionID")==e}));i&&(n=i,r=t)})),!n)throw new c.Exception("Invalid option with id "+e);n.selected||t.selection.selectAttributeValue(r.get("attributeID"),e)})),A(this,"focusGroup",(function(e){var n=t.groups.find((function(t){return t.id==e}));n&&n.cameraLocationId&&(t.viewer.setCameraLocation(n.cameraLocationId),t.lastCameraLocation=n.cameraLocationId)})),A(this,"focusAttribute",function(){var e=w(b().mark((function e(n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selection.getAttributeUnselectedOptionsSceneActions(n),e.next=3,t.viewer.prefetchDataForUnselectedOptionsAsync(r);case 3:(i=t.zkProduct.get("attributes").find((function(e){return e.get("attributeID")==n})))&&i.get("sceneCameraLocationID")&&i.get("sceneCameraLocationID")!=Zakeke.getEmptyUUID()&&(t.viewer.setCameraLocation(i.get("sceneCameraLocationID")),t.lastCameraLocation=i.get("sceneCameraLocationID"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"base64StringToFile",(function(e,t){for(var n,r,i,a=e.split(","),o=null!==(n=null===(r=a[0])||void 0===r||null===(i=r.match(/:(.*?);/))||void 0===i?void 0:i[1])&&void 0!==n?n:"",s=atob(a[1]),u=s.length,c=new Uint8Array(u);u--;)c[u]=s.charCodeAt(u);return new File([c],t,{type:o})})),A(this,"saveTemplate",function(){var e=w(b().mark((function e(n,r,i){var a,o,s,u,c,l,f,d;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Array.from(i.keys()),(o=t.composition.get("compositionItems")).toArray().forEach((function(e){a.includes(e.get("attributeID"))||o.remove(e)})),t.composition.set("name",n),t.composition.set("compositionItems",o),t.composition.set("isTemplate",!0),s=new MPlaza.CompositionCategoriesMapping,r&&((u=new MPlaza.CompositionCategoryMapping).set("categoryID",r),u.set("name",""),s.add(u)),t.composition.set("categories",s),0!==t.zkProduct.get("templateGroups").length){e.next=16;break}return(c=new MPlaza.TemplateGroup).set("name","Pre-set configurations"),t.zkProduct.get("attributeGroups").length>0?((l=new MPlaza.AttributeGroup).set("name","Pre-set configurations"),l.set("displayOrder",t.zkProduct.get("attributeGroups").at(0).get("displayOrder")-1),t.zkProduct.get("attributeGroups").unshift(l),c.set("groupGuid",l.get("groupGuid"))):t.zkProduct.get("attributeSteps")&&t.zkProduct.get("attributeSteps").length>0?((f=new MPlaza.AttributeStep).set("name","Pre-set configurations"),f.set("groupGuid",Zakeke.generateUUID()),f.set("displayOrder",t.zkProduct.get("attributeSteps").at(0).get("displayOrder")-1),t.zkProduct.get("attributeSteps").unshift(f),c.set("stepGuid",f.get("stepGuid"))):(d=t.zkProduct.get("attributes").filter((function(e){return-1===e.get("groupID")})).sort((0,h.ascComparator)((function(e){return e.get("displayOrder")})))).length>0&&c.set("displayOrder",d[0].get("displayOrder")-1),t.zkProduct.get("templateGroups").add(c),e.next=16,t.saveProduct();case 16:return e.next=18,t.addToCart([],void 0,void 0,void 0);case 18:return e.next=20,t.reset();case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),A(this,"addToCart",function(){var e=w(b().mark((function e(n,r,a,o){var s,c,l,f,d,p,g,v,m,y,_;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setExplodedMode(!1);case 2:if(t.composition.set("compositionClientPreviews",[]),c=[],l=[],(f=null===(s=t.zkScene)||void 0===s?void 0:s.get("cameraLocations").filter((function(e){var t;return-1!==(null===(t=e.get("name"))||void 0===t?void 0:t.toLowerCase().indexOf("buy_screenshot_camera_"))})))&&(l=i().sortBy(f,(function(e){return e.get("name")}))),!(l&&l.length>0)){e.next=36;break}d=k(l),e.prev=9,d.s();case 11:if((p=d.n()).done){e.next=27;break}return g=p.value,e.next=15,t.viewer.getSceneContentScreenshotAsync(t.clientPreviewWidth,t.clientPreviewHeight,0,t.zkCurrentTemplate,a,g);case 15:return v=e.sent,m=new FormData,y=t.base64StringToFile(v,g+".png"),m.set("file",y),e.next=21,u.axiosApi.post(Zakeke.config.baseApiUrl+"designs/upload-client-preview",m);case 21:return _=e.sent.data,c.push({fileObjectID:_.id,cameraName:g.get("name"),url:_.url}),e.next=25,(0,h.sleep)(1);case 25:e.next=11;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(9),d.e(e.t0);case 32:return e.prev=32,d.f(),e.finish(32);case 35:t.composition.set("compositionClientPreviews",c);case 36:return t.composition.get("isDraft")&&!t.isDraftEditor&&(t.composition.set("docID",null),t.composition.set("designDocID",null),t.composition.set("isDraft",!1),t.zkCurrentTemplate&&t.zkCurrentTemplate.set("docID",null)),e.next=39,t.saveComposition(void 0,a);case 39:if(!o){e.next=42;break}return e.next=42,t.saveCustomerWalletInfo(t.composition.get("docID"),o.email,o.walletAddress);case 42:if(!r){e.next=45;break}return e.next=45,r({composition:t.composition.id,preview:t.composition.get("previewImageUrl"),attributes:t.platformAttributesSelection,designItems:t.getDesignItemsInfo(),quantity:t.quantity,additionalProperties:n});case 45:t.integration.addToCart(t.composition,t.zkCurrentTemplate,t.zkProduct,t.platformAttributesSelection,t.getDesignItemsInfo(),t.quantity,n);case 46:case"end":return e.stop()}}),e,null,[[9,29,32,35]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()),A(this,"zoomIn",(function(){t.viewer&&t.viewer.zoomIn()})),A(this,"zoomOut",(function(){t.viewer&&t.viewer.zoomOut()})),A(this,"isFullscreenEnabled",(function(){return!h.iOS})),A(this,"switchFullscreen",(function(){var e=null;t.viewer.switchFullScreen(document.getElementById("zakeke-viewer-container")),e||(e=setInterval((function(){t.isFullscreenMode&&0==t.internalIsFullscreen&&setTimeout((function(){t.viewer.updateView(),t.internalIsFullscreen=!0,console.info("Fullscreen enabled")}),10),t.isFullscreenMode||1!=t.internalIsFullscreen||(clearInterval(e),e=null,setTimeout(w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.internalIsFullscreen=!1,e.next=3,t.extendedUpdate();case 3:t.viewer.updateView(),console.info("Fullscreen disabled");case 5:case"end":return e.stop()}}),e)}))),10))}),100))})),A(this,"openSecondScreen",(function(){var e=Zakeke.config.baseUrl+"en/SecondScreen?token="+t.token+"&modelID="+t.zkProduct.get("modelID");window.open(e)})),A(this,"extendedUpdate",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=0,i=setInterval((function(){t.viewer.updateView(),++r>20&&(clearInterval(i),e())}),100)})));case 1:case"end":return e.stop()}}),e)})))),A(this,"exportSceneToUsdz",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer||!t.viewer.zkScene){e.next=2;break}return e.abrupt("return",t.viewer.exportSceneToUsdzAsync(t.viewer.zkScene.get("sceneID"),n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"exportSceneToGlb",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.viewer.exportSceneToLocalGLBAsync());case 1:case"end":return e.stop()}}),e)})))),A(this,"setExplodedMode",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=8;break}if(!n){e.next=6;break}return e.next=4,t.viewer.explodeMeshes();case 4:e.next=8;break;case 6:return e.next=8,t.viewer.collapseMeshes();case 8:t.isExplodedMode=n;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"hasExplodedMode",(function(){var e=t.zkScene;return!!e&&!!e.getFirstExplodedMeshLocation()})),A(this,"setBackgroundColor",(function(e,n){var r=t.zkScene;if(0==e.indexOf("rgb")){var i=e.replace("rgb(","").replace(")","").split(",");e=(0,h.rgb2hex)(i[0],i[1],i[2])}t.viewer&&r&&(r.getOrCreateEnvironmentConfig().set("mainColor",e),r.getOrCreateGeneralConfig().set("backgroundColor",e),r.getOrCreateGeneralConfig().set("backgroundAlpha",n),t.viewer.refreshEnvironment())})),A(this,"getCurrentSelection",(function(){return i().cloneDeep(t.platformAttributesSelection)})),A(this,"getScreenshot",w(b().mark((function e(){var n,r,i,a,o,s,u=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:1024,r=u.length>1&&void 0!==u[1]?u[1]:1024,i=u.length>2?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:null,o=u.length>4&&void 0!==u[4]?u[4]:0,e.next=7,t.viewer.getSceneContentScreenshotAsync(n,r,o,t.zkCurrentTemplate,i);case 7:if(s=e.sent){e.next=10;break}throw new Error("Failed generating screenshot");case 10:if(!a){e.next=13;break}return e.next=13,new Promise((function(e){var t=new Image;t.onload=function(){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");r&&(r.fillStyle=a,r.fillRect(0,0,t.width,t.height),r.drawImage(t,0,0),s=n.toDataURL(),e())},t.src=s}));case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})))),A(this,"fireItemsChange",(function(){t.trigger("change")})),A(this,"removeItem",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.viewer?(t.viewer.removeDesignItem(n),t.fireItemsChange(),e()):r("Called remove item but no viewer or viewer not ready")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"setItemText",(function(e,n){if(!t.viewer)throw"Called set item text but no viewer or viewer not ready";t.viewer.setDesignItemText(e,n)})),A(this,"setItemItalic",(function(e,n){if(!t.viewer)throw"Called set item italic but no viewer or viewer not ready";t.viewer.setDesignItemItalic(e,n)})),A(this,"setItemBold",(function(e,n){if(!t.viewer)throw"Called set item bold but no viewer or viewer not ready";t.viewer.setDesignItemBold(e,n)})),A(this,"setItemColor",(function(e,n){if(!t.viewer)throw"Called set item color but no viewer or viewer not ready";t.viewer.setDesignItemColor(e,n)})),A(this,"setItemFontFamily",function(){var e=w(b().mark((function e(n,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=12;break}if(!(i=t.fonts.find((function(e){return e.name===r})))){e.next=9;break}return e.next=5,(0,l.loadFonts)([i]);case 5:t.viewer.setDesignItemFontFamily(n,r),t.fireItemsChange(),e.next=10;break;case 9:console.warn("No font found for ".concat(r));case 10:e.next=13;break;case 12:throw"Called set item font family but no viewer or viewer not ready";case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A(this,"setItemTextOnPath",(function(e,n,r){if(!t.viewer)throw"Called toggleItemTextOnPath but no viewer or viewer not ready";t.viewer.setItemTextOnPath(e,n,r),t.fireItemsChange()})),A(this,"createImage",function(){var e=w(b().mark((function e(n,r){var i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=9;break}return i=new f.default(t.culture,t.token),e.next=4,i.upload(n,r);case 4:return a=e.sent,o=a?a[0]:null,e.abrupt("return",o);case 9:throw"Called create image but no viewer or viewer not ready";case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A(this,"createImageFromUrl",function(){var e=w(b().mark((function e(n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=7;break}return e.next=3,u.axiosApi.post(Zakeke.config.baseApiUrl+"images/import/url",{url:n});case 3:return r=e.sent.data,e.abrupt("return",r);case 7:throw"Called create image from url but no viewer or viewer not ready";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"addItemImage",function(){var e=w(b().mark((function e(n,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=8;break}return e.next=3,t.viewer.addDesignItemImage(n,r);case 3:return e.next=5,t.renderDesign();case 5:t.fireItemsChange(),e.next=9;break;case 8:throw"Called add item text but no viewer or viewer not ready";case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A(this,"setItemImageFromFile",function(){var e=w(b().mark((function e(n,r,i){var a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=9;break}return e.next=3,t.createImage(r,i);case 3:return a=e.sent,e.next=6,t.setItemImage(n,a.imageID);case 6:t.fireItemsChange(),e.next=10;break;case 9:throw"Called set item image but no viewer or viewer not ready";case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),A(this,"setItemImageFromBase64",function(){var e=w(b().mark((function e(n,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=9;break}return(i=new MPlaza.Image).set("imageID",-1),i.set("previewUrl",r),e.next=6,t.viewer.setDesignItemImage(n,i);case 6:t.fireItemsChange(),e.next=10;break;case 9:throw"Called set item image but no viewer or viewer not ready";case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A(this,"setItemImage",function(){var e=w(b().mark((function e(n,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=w(b().mark((function e(i,a){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=6;break}(o=new MPlaza.Image).set("imageID",r),o.fetch({success:function(){var e=w(b().mark((function e(r,a,s){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.viewer.setDesignItemImage(n,o);case 2:t.fireItemsChange(),i();case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),error:function(e,t,n){return null}}),e.next=7;break;case 6:throw"Called set item image but no viewer or viewer not ready";case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A(this,"getMacroCategories",w(b().mark((function e(){var t,n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get("imagemacrocategories/");case 2:t=(t=e.sent.data).filter((function(e){return e.hasImages})),n=k(t);try{for(n.s();!(r=n.n()).done;)(i=r.value).categories=i.categories.filter((function(e){return e.hasImages}))}catch(a){n.e(a)}finally{n.f()}return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),A(this,"getImages",function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get("images/",{params:{type:"lib",c:t}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"getPDF",w(b().mark((function e(){var n,r,i,o,s,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getScreenshot(2048,2048);case 2:return r=e.sent,i=t.getDesignItemsInfo(),o=null===(n=t.product)||void 0===n?void 0:n.areas.filter((function(e){return t.isAreaVisible(e.id)})).map((function(e){return{name:e.name,textItems:i.filter((function(t){return t.areaId==e.id&&t.type===a.ItemType.Text}))}})).filter((function(e){return e.textItems.length>0})),s=t.platformAttributesSelection.filter((function(e){return e.attributeIsEnabled&&e.attributeIsEnabled})).map((function(e){var t=e.attributeLabel,n=e.attributeCode,r=e.optionCode,i=e.optionLabel;return{attributeLabel:t,attributeCode:(0,h.isPlatformCode)(n)?"":n,optionLabel:i,optionCode:(0,h.isPlatformCode)(r)?"":r}})),c={environment:2,productName:t.zkProduct.get("name"),previewImage:r,sides:[],areas:o,selectedOptions:s},e.next=9,u.axiosApi.post(Zakeke.config.baseApiUrl+"previewdesigns/pdf",c,{transformResponse:function(e){return e},responseType:"text"});case 9:return l=e.sent.data.replace(/"/g,""),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})))),A(this,"rewriteShareUrl",(function(e){var n=e.split("/SharedPreview")[1];if(t.shareUrlPrefix)return t.shareUrlPrefix+n;if(document.referrer&&2===t.settings.referrerID){var r=document.referrer.replace(/(apps\/configurator\/)([\s\S]*)/gm,"$1");return r.endsWith("/")||(r+="/"),r+n}return e})),A(this,"getShareCompositionUrl",w(b().mark((function e(){var n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(n=t.composition.get("isDraft"))&&void 0!==n&&n,t.composition.set("isDraft",!1),e.next=4,t.saveCompositionCopy();case 4:return i=e.sent,t.composition.set("isDraft",r),e.next=8,t.integration.getSharedCompositionUrl(i);case 8:return a=e.sent,e.abrupt("return",a.url);case 10:case"end":return e.stop()}}),e)})))),A(this,"saveCompositionCopy",w(b().mark((function e(){var n,r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=null,(i=t.zkCurrentTemplate)&&(r=i.get("docID"),i.set("docID",null)),n=t.composition.get("docID"),t.composition.set("docID",null),t.composition.set("designDocID",null),e.next=9,t.saveComposition();case 9:return a=t.composition.get("docID"),t.composition.set("docID",n),t.composition.set("designDocID",r),i&&i.set("docID",r),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))),A(this,"getOnlineScreenshot",function(){var e=w(b().mark((function e(n,r,i,a){var o,s,c,l,h=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>4&&void 0!==h[4]?h[4]:30,e.next=3,t.getScreenshot(n,r,i,a,o);case 3:return s=e.sent,e.next=6,u.axiosApi.post(Zakeke.config.baseApiUrl+"designs/save-share-preview",{preview:s});case 6:return c=e.sent.data.url,l=t.rewriteShareUrl(c),e.abrupt("return",{originalUrl:c,rewrittenUrl:l});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),A(this,"isSceneArOnTheFly",(function(){var e;return!!t.viewer&&(null===(e=t.zkScene)||void 0===e?void 0:e.getArOnTheFly())})),A(this,"isArDeviceCompliant",(function(){return h.IS_AR_DEVICE_COMPLIANT})),A(this,"isAndroidOrIOS",(function(){return h.IS_ANDROID||h.IS_IOS})),A(this,"isAndroid",h.IS_ANDROID),A(this,"isIOS",h.IS_IOS),A(this,"buildModelViewerUrl",(function(e){var n,r=Zakeke.config.baseUrl+"ModelViewer",i=new URL(r),a="",o=k(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s.format&&s.arFileUrl){var u=encodeURIComponent(s.arFileUrl),c="";switch(s.format){case"gltf":case"glb":c="gltf="+u;break;case"usdz":c="usdz="+u;break;case"png":c="poster="+u}c&&(a+=(a?"&":"")+c)}}}catch(l){o.e(l)}finally{o.f()}return a+="&arScale="+(t.zkScene.getARScale()?1:0),i.search+=a,i.toString()})),A(this,"isSceneArEnabled",(function(){return t.zkScene&&t.zkScene.getAREnabled()||!1})),A(this,"getPregeneratedARUrl",(function(e){var n,r,i;return null===(n=t.zkScene)||void 0===n||null===(r=n.get("arFiles"))||void 0===r||null===(i=r.find((function(t){return t.get("fileType")==e})))||void 0===i?void 0:i.get("url")})),A(this,"getQrCodeArUrl",function(){var e=w(b().mark((function e(n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"Android"!=n){e.next=11;break}if(e.t0=t.getPregeneratedARUrl("glb"),e.t0){e.next=7;break}return e.next=6,t.viewer.exportSceneToRemoteGLBAsync();case 6:e.t0=e.sent;case 7:i=e.t0,r=[{format:"gltf",arFileUrl:i}],e.next=20;break;case 11:if(a=t.getPregeneratedARUrl("glb"),o=t.getPregeneratedARUrl("usdz"),!a||!o){e.next=17;break}r=[{format:"glb",arFileUrl:a},{format:"usdz",arFileUrl:o}],e.next=20;break;case 17:return e.next=19,t.viewer.exportSceneToARAsync();case 19:r=e.sent;case 20:return e.abrupt("return",t.buildModelViewerUrl(r));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"getMobileArUrl",function(){var e=w(b().mark((function e(n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!t.isSceneArOnTheFly()){e.next=7;break}return e.next=4,t.getMobileLocalArUrl(n);case 4:r=e.sent,e.next=16;break;case 7:if(!h.IS_IOS){e.next=13;break}return e.next=10,t.viewer.exportSceneToUsdzAsync(t.zkScene.get("sceneID"),t.selection.getCompositionHashCode());case 10:r=e.sent,e.next=16;break;case 13:return e.next=15,t.viewer.exportSceneToRemoteGLBAsync(t.zkScene.get("sceneID"),t.selection.getCompositionHashCode());case 15:r=e.sent;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"getMobileLocalArUrl",(function(e){return new Promise((function(n){if(t.zkScene&&t.viewer){var i=t.zkScene.getSceneID();t.viewer.getSceneRootUrl().then(function(){var a=w(b().mark((function a(o){var s;return b().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o){a.next=2;break}return a.abrupt("return");case 2:if(!h.IS_IOS){a.next=9;break}return a.next=5,t.viewer.exportSceneToLocalUSDZAsync();case 5:(s=a.sent)?n(s):(0,r.reject)(s),a.next=12;break;case 9:if(e){a.next=11;break}throw new Error("no url defined for the ar on fly");case 11:t.viewer.saveGlbOnDatabaseAsync(i).then((function(){var r=new URL(e),a="id="+i;a+="&rootUrl="+encodeURIComponent(o),a+="&productId="+t.product.id,a+="&environment="+t.product.environment,a+="&token="+t.token,r.search+=a;var s=r.toString();n(s)}));case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}}))})),A(this,"openArMobile",(function(e){if(t.viewer&&t.zkScene)if(t.isSceneArOnTheFly()&&h.IS_ANDROID)window.open(e);else if(h.IS_IOS){e&&!t.zkScene.getARScale()&&(e+="#allowsContentScaling=0");var n=document.createElement("a");n.setAttribute("rel","ar"),n.setAttribute("href",e),n.appendChild(document.createElement("img")),n.click()}else h.IS_ANDROID&&o.AndroidAR.openSceneViewer(e,(function(){alert("Device not supported.")}),t.zkScene.getARScale())})),A(this,"registerView",w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.zkProduct&&!t.isViewerMode){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u.axiosApi.post(Zakeke.config.baseApiUrl+"viewscount/addview",{productID:t.zkProduct.get("modelID"),environment:t.zkProduct.get("environment"),ecommerceID:t.settings.ecommerceID});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Failed registering view",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))),A(this,"getMeshIDbyName",(function(e){var n,r;return null===(n=t.viewer)||void 0===n||null===(r=n.getMeshByName(e))||void 0===r?void 0:r.id})),A(this,"hideMeshAndSaveState",(function(e){if(t.viewer.scene){var n=t.viewer.getMeshByID(e);if(n){var r,i=k([n].concat(y(n.getChildMeshes())));try{for(i.s();!(r=i.n()).done;){var a=r.value;t.previousMeshesVisibleStates[a.id]=a.isVisible,a.isVisible=!1}}catch(o){i.e(o)}finally{i.f()}t.viewer.setRenderingNeeded()}}})),A(this,"restoreMeshVisibility",(function(e){if(t.viewer.scene){var n=t.viewer.getMeshByID(e);if(n&&void 0!==t.previousMeshesVisibleStates[n.id]){var r,i=k([n].concat(y(n.getChildMeshes())));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.isVisible=t.previousMeshesVisibleStates[a.id],delete t.previousMeshesVisibleStates[a.id]}}catch(o){i.e(o)}finally{i.f()}t.viewer.setRenderingNeeded()}}})),A(this,"setMeshDesignVisibility",(function(e,n){t.viewer&&(t.viewer.setDesignVisibility(e,n),t.viewer.setRenderingNeeded())})),A(this,"addFocusAttributesListener",(function(e){t.viewer&&t.viewer.addFocusAttributesListener(e)})),A(this,"clearListeners",(function(){t.viewer&&t.viewer.clearListeners()})),A(this,"setCameraLocked",(function(e){return t.viewer.setCameraLocked(e)})),A(this,"isSceneTryOnEnabled",(function(){var e;return!(!t.viewer||!t.zkScene)&&null!==(e=t.zkScene.getTryOnEnabled())&&void 0!==e&&e})),A(this,"getTryOnUrl",(function(e){return new Promise((function(n){if(t.zkScene&&t.viewer){var r=t.zkScene.getSceneID();t.viewer.getSceneRootUrl().then((function(i){i&&t.viewer.saveVisibleMeshesOnDatabaseAsync(r).then((function(){var a=new URL(null!==e&&void 0!==e?e:"https://zakekecdn.blob.core.windows.net/cdn/c/tryon/index.html"),o="id="+r;o+="&rootUrl="+encodeURIComponent(i),o+="&attachmentPoint=noseBridge",o+="&productId="+t.zkProduct.get("modelID"),o+="&environment="+t.zkProduct.get("environment"),o+="&token="+t.token,a.search+=o;var s=a.toString();n(s)}))}))}}))})),A(this,"getDisableTextColors",(function(){try{var e,n;return null!==(e=null===(n=t.zkProduct.get("printTypes").at(0).get("printTypeRestrictions"))||void 0===n?void 0:n.get("disableTextColors"))&&void 0!==e&&e}catch(r){throw console.log(r),"Failed loading restrictions"}})),A(this,"getTextColors",(function(){try{var e,n,r=null!==(e=null===(n=t.zkProduct.get("printTypes").at(0).get("printTypeRestrictions"))||void 0===n?void 0:n.get("textColors"))&&void 0!==e?e:[],i={colorCode:t.defaultColor,isDefault:!0};return r.find((function(e){return e.colorCode===i.colorCode}))||r.push(i),r}catch(a){throw console.log(a),"Failed loading restrictions"}})),A(this,"getDefaultColor",(function(){try{var e,n;return null!==(e=null===(n=t.zkProduct.get("printTypes").at(0).get("printTypeRestrictions"))||void 0===n?void 0:n.get("defaultColor"))&&void 0!==e?e:"#000000"}catch(r){throw console.log(r),"Failed loading restrictions"}})),A(this,"saveComposition",function(){var e=w(b().mark((function e(n,r){var i,a,o,s,u,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Saving..."),(s=null===(i=t.zkScene)||void 0===i?void 0:i.get("cameraLocations").find((function(e){var t;return"buy_screenshot_camera"===(null===(t=e.get("name"))||void 0===t?void 0:t.toLowerCase())})))||t.viewer.restoreCameraState(),e.next=5,(0,h.sleep)(1);case 5:return e.next=7,t.viewer.getSceneContentScreenshotAsync(null!==(a=null===n||void 0===n?void 0:n.customCartPreviewHeight)&&void 0!==a?a:t.previewWidth,null!==(o=null===n||void 0===n?void 0:n.customCartPreviewWidth)&&void 0!==o?o:t.previewHeight,0,t.zkCurrentTemplate,r,s);case 7:if(u=e.sent,t.composition.set("previewImageData",u),t.composition.get("isTemplate")||!t.zkCurrentTemplate){e.next=23;break}if(c=t.zkCurrentTemplate,(l=c.get("designItems")).filter((function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement})).forEach((function(e){e.get("areas").length>0&&!t.isAreaVisible(e.get("areas").at(0).get("sideID"))&&l.remove(e)})),!((null===l||void 0===l?void 0:l.toArray().map((function(e){return!e.get("constraints")||e.get("constraints").get("canResize")||e.get("constraints").get("canMove")||e.get("constraints").get("canDelete")||e.get("constraints").get("canRotate")||e.get("constraints").get("canEdit")||e.get("constraints").get("isPrintable")})).filter((function(e){return e})).length)>0)){e.next=20;break}return e.next=18,t.saveDesignBackbone();case 18:e.next=21;break;case 20:t.composition.set("designDocID",null);case 21:e.next=24;break;case 23:t.composition.set("designDocID",null);case 24:return e.next=26,t.saveCompositionBackbone();case 26:console.log("Composition saved!");case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A(this,"bootstrapComposition",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.selection=Zakeke.ComposerSelection.CreateComposerSelection(t.zkProduct),t.composition=n,e.next=4,t.internalLoadComposition(t.composition.id);case 4:t.currentCompositionInfo||(t.currentCompositionInfo={compositionId:"",compositionName:"",compositionTags:[]}),t.currentCompositionInfo.compositionId=t.compositionId,t.currentCompositionInfo.compositionName=t.composition.get("name"),t.currentCompositionInfo.compositionTags=t.composition.get("tags");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"loadSavedComposition",function(){var e=w(b().mark((function e(n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=null===(r=t.savedCompositions)||void 0===r?void 0:r.find((function(e){return e.docID==n})))){e.next=4;break}return e.next=4,t.bootstrapComposition(new MPlaza.Composition(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"updateSavedCompositions",w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.get(Zakeke.config.baseApiUrl+"compositiondocs/product/".concat(t.zkProduct.get("modelID")),{params:{draft:!0}});case 2:n=e.sent.data,t.savedCompositions=n,n&&(r=t.themeCompositionsFromSavedCompositions(n),t.themeCompositions=r),t.trigger("change");case 6:case"end":return e.stop()}}),e)})))),A(this,"themeCompositionsFromSavedCompositions",(function(e){return e.map((function(e){return{name:e.name,docID:e.docID,previewImageUrl:e.previewImageUrl,tags:e.tags}}))})),A(this,"saveDraftsComposition",function(){var e=w(b().mark((function e(n,r,i){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.composition.set("name",n),t.composition.set("tags",r),t.composition.set("isDraft",!0),!i){e.next=8;break}return e.next=6,t.saveCompositionCopy();case 6:e.next=10;break;case 8:return e.next=10,t.saveComposition(void 0);case 10:return e.abrupt("return",t.updateSavedCompositions());case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),A(this,"deleteSavedComposition",function(){var e=w(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.axiosApi.delete(Zakeke.config.baseApiUrl+"compositiondocs/".concat(n));case 2:t.updateSavedCompositions();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A(this,"applyTemplate",function(){var e=w(b().mark((function e(n){var r,i,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.axiosApi.get("proxycompositions/"+n,{params:{template:!0}});case 3:return e.next=5,e.sent.data;case 5:return r=e.sent,i=t.composition.get("compositionItems"),a=new MPlaza.CompositionItems(r.compositionItems),o=new MPlaza.CompositionItems,i.toArray().forEach((function(e){var t=a.find((function(t){return t.get("attributeID")===e.get("attributeID")}));o.add(null!==t&&void 0!==t?t:e)})),t.composition.set("compositionItems",o),t.selection.setupOnComposition(t.composition),e.next=14,t.sync3DAndPlatformSelectionWithCurrentSelection();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}())}var t,n,v;return t=e,n=[{key:"internalProduct",get:function(){return this.zkProduct}},{key:"internalScene",get:function(){return this.zkScene}},{key:"internalCurrentTemplate",get:function(){return this.zkCurrentTemplate}},{key:"isFullscreenMode",get:function(){var e=document;return Boolean(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)}},{key:"isViewerReady",get:function(){return!!this.viewer}},{key:"addHotjarScript",value:function(e){if(e&&e.length>0&&this.platform&&"preview"!==this.platform.toLowerCase()){var t=document.createElement("script");t.type="text/javascript",t.innerHTML="(function(h,o,t,j,a,r){\n                    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\n                    h._hjSettings={hjid:".concat(e,",hjsv:6};\n                    a=o.getElementsByTagName('head')[0];\n                    r=o.createElement('script');r.async=1;\n                    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n                    a.appendChild(r);\n                })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');"),document.getElementsByTagName("head")[0].appendChild(t)}}},{key:"addGoogleTagManagerID",value:function(e){if(e&&e.length>0&&this.platform&&"preview"!==this.platform.toLowerCase()){$("head").append("<script>"+"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n                })(window,document,'script','dataLayer','".concat(e,"')")+"<\/script>");var t=document.createElement("noscript"),n=document.createElement("iframe");n.src="https://www.googletagmanager.com/ns.html?id=".concat(e),n.height="0",n.width="0",n.style.cssText="display:none;visibility:hidden",t.appendChild(n),document.body.insertBefore(t,document.body.firstChild)}}},{key:"setQuantity",value:function(e){var t=this.zkProduct.get("quantityRule");if(t){var n=t.get("minQuantity"),r=t.get("maxQuantity"),i=t.get("step");n&&e<n&&(e=n),r&&e>r&&(e=r),i&&(e=Math.round(e/i)*i)<i&&(e=i)}this.quantity=e,this.trigger("change"),this.updatePrice()}},{key:"createStep",value:function(e,t){var n,r,i=this,a=new g.Step;a.id=e.get("stepID"),a.guid=e.get("stepGuid"),a.name=null!==(n=e.get("name"))&&void 0!==n?n:"",a.cameraLocationID=null!==(r=e.get("cameraLocationID"))&&void 0!==r?r:null,a.displayOrder=e.get("displayOrder");for(var o=function(){var n=i.zkProduct.get("attributes").at(s),r=t.get("attributes").find((function(e){return e.get("attributeID")==n.get("attributeID")}));if(r&&n.get("stepID")==e.get("stepID")){var o=i.createAttributeFromSelection(r);a.attributes.push(o)}},s=0;s<this.zkProduct.get("attributes").length;s++)o();a.attributes.sort((function(e,t){return e.displayOrder-t.displayOrder}));for(var u=function(){var n=i.zkProduct.get("templateGroups").at(c),r=t.get("templateGroups").find((function(e){return e.get("templateGroupID")==n.get("templateGroupID")}));if(r&&n.get("stepID")==e.get("stepID")){var o=i.createTemplateGroupFromSelection(r);a.templateGroups.push(o)}},c=0;c<this.zkProduct.get("templateGroups").length;c++)u();return a.templateGroups.sort((function(e,t){return e.displayOrder-t.displayOrder})),a}},{key:"setCamera",value:function(e,t,n){this.viewer.setCameraLocation(e,t,n),this.lastCameraLocation=e}},{key:"getCameraByName",value:function(e){var t;return null===(t=this.zkScene)||void 0===t?void 0:t.get("cameraLocations").find((function(t){return t.get("name")==e}))}},{key:"setCameraLocation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getCameraByName(e);if(!n)throw new Error("Camera with name ".concat(e," does not exists."));this.viewer.setCameraLocation(n.get("locationID"),!1,t),this.lastCameraLocation=n.get("locationID")}},{key:"getDesignItemsInfo",value:function(){var e,t,n=[];return this.viewer&&(n=null!==(e=null===(t=this.viewer.getDesignItemsInfo())||void 0===t?void 0:t.map((function(e){return e instanceof MPlaza.ImageItemInfo?new g.ImageItem(e):new g.TextItem(e)})))&&void 0!==e?e:[]),n}},{key:"isAreaVisible",value:function(e){var t,n=k(this.zkProduct.get("scenes").at(0).get("meshSides").filter((function(t){return t.get("sideID")==e})));try{for(n.s();!(t=n.n()).done;){var r=t.value.get("meshID");if(r){var i=this.viewer.scene.getMeshByID(r);if(i&&i.isVisible)return!0}}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"addItemText",value:function(){var e=w(b().mark((function e(t,n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.viewer){e.next=12;break}if(!(r=this.fonts.find((function(e){return e.name===t.fontFamily})))){e.next=9;break}return e.next=5,(0,l.loadFonts)([r]);case 5:this.viewer.addDesignItemText(m(m({},t),{},{content:t.text}),n),this.renderDesign(),e.next=10;break;case 9:console.warn("No font found for ".concat(t.fontFamily));case 10:e.next=13;break;case 12:throw"Called add item text but no viewer or viewer not ready";case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setCameraPivot",value:function(e){this.viewer.setCameraPivot(e)}},{key:"resetCameraPivot",value:function(){this.viewer.setCameraPivot(null)}},{key:"setCameraZoomEnabled",value:function(e){this.viewer.setCameraZoomEnabled(e)}},{key:"setCameraByName",value:function(e,t,n){if(this.zkScene){var r=this.zkScene.get("cameraLocations").find((function(t){return t.get("name")==e}));r&&this.viewer.setCameraLocation(r.get("locationID"),t,n)}}},{key:"findObjectByName",value:function(e){return this.viewer&&this.viewer.scene?this.viewer.scene.meshes.find((function(t){return t.name==e})):null}},{key:"hightlightGroup",value:function(e){var t;null===(t=this.viewer)||void 0===t||t.highlightGroupByID(e)}},{key:"highlightAttribute",value:function(e){var t;null===(t=this.viewer)||void 0===t||t.highlightAttributeByID(e)}}],n&&M(t.prototype,n),v&&M(t,v),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/exceptions.tsx":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var a=s(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,{Exception:function(){return h},NonSquarePixelException:function(){return g},ParametersParseFailException:function(){return f},UnsupportedPlatformException:function(){return d},UploadFailedExpection:function(){return p}});var h=c((function e(t){l(this,e),this.message=t})),f=function(e){i(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this,"Failed parsing parameters: "+e)).parameter=e,r}return c(n)}(h),d=function(e){i(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this,"Platform "+e.toString()+" not supported.")).platform=e,r}return c(n)}(h),p=function(e){i(n,e);var t=o(n);function n(){return l(this,n),t.call(this,"Upload failed.")}return c(n)}(h),g=function(e){i(n,e);var t=o(n);function n(){return l(this,n),t.call(this,"The image is not supported (non-square pixels)")}return c(n)}(h)},"./src/fontsManager.ts":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,a)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function c(e){return l.apply(this,arguments)}function l(){return(l=u(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){WebFont.load({timeout:2e5,custom:{families:t.map((function(e){return e.name+(e.variations&&""!=e.variations?":"+e.variations:"")})),urls:t.map((function(e){return e.cssUrl}))},active:function(){e()}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return f.apply(this,arguments)}function f(){return(f=u(o().mark((function e(t,n){var r,a,s,u,l,h,f,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=i(t.get("designItems").models);try{for(a.s();!(s=a.n()).done;)u=s.value,l=JSON.parse(u.get("json")),h=l[1],(f=h.fontFamily||(h.children&&h.children.length>0&&h.children[0].length>1?h.children[0][1].fontFamily:null))&&r.push(f.replace(/"/g,""))}catch(o){a.e(o)}finally{a.f()}if(d=r.map((function(e){return n.find((function(t){return t.name==e}))||null})).filter((function(e){return null!=e})),!(d.length>0)){e.next=7;break}return e.next=7,c(d);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.r(t),n.d(t,{downloadFontsOfDesign:function(){return h},loadFonts:function(){return c}})},"./src/helpers.tsx":function(e,t,n){"use strict";function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function i(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.r(t),n.d(t,{Browser:function(){return g},IS_ANDROID:function(){return L},IS_AR_DEVICE_COMPLIANT:function(){return P},IS_IOS:function(){return O},Pagination:function(){return v},StringHelper:function(){return p},T:function(){return f},ascComparator:function(){return R},compare:function(){return M},copy:function(){return C},dataURLtoFile:function(){return d},getPlatformSettings:function(){return I},hex2rgb:function(){return m},hslToRgb:function(){return b},hsvToRgb:function(){return k},hue2rgb:function(){return x},iOS:function(){return S},isPlatformCode:function(){return E},isValidJSON:function(){return A},matchCodes:function(){return T},rgb2hex:function(){return y},rgbToHsl:function(){return _},rgbToHsv:function(){return w},sleep:function(){return B},uuid:function(){return D}});var c,l,h,f=function(){function e(){o(this,e)}return u(e,null,[{key:"_",value:function(e,t){var n;if(null!==(n=this.translations)&&void 0!==n&&n.statics)for(var r,i=0,a=Array.from(null===(r=this.translations)||void 0===r?void 0:r.statics.keys());i<a.length;i++){var o=a[i];if(o.toLowerCase()===e.toLowerCase())return this.translations.statics.get(o)}var s=window.gt;return s?s.dgettext(t,e):e}},{key:"_d",value:function(e){var t,n=e;if(null!==(t=this.translations)&&void 0!==t&&t.dynamics)for(var r,i=0,a=Array.from(null===(r=this.translations)||void 0===r?void 0:r.dynamics.keys());i<a.length;i++){var o=a[i];o.toLowerCase()===e.toLowerCase()&&this.translations.dynamics.get(o)&&(n=this.translations.dynamics.get(o))}return n}}]),e}();function d(e,t){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),a=i.length,o=new Uint8Array(a);a--;)o[a]=i.charCodeAt(a);return new File([o],t,{type:r})}h=null,(l="translations")in(c=f)?Object.defineProperty(c,l,{value:h,enumerable:!0,configurable:!0,writable:!0}):c[l]=h;var p=function(){function e(){o(this,e)}return u(e,null,[{key:"padLeft",value:function(e,t,n){for(var r=e.toString(),i=0;i<t-r.length;i++)r=n+r;return r}},{key:"padRight",value:function(e,t,n){for(var r=e.toString(),i=0;i<t-r.length;i++)r+=n;return r}},{key:"format",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t,n){return e.replace("{".concat(n,"}"),t)}),e)}},{key:"camelToSnake",value:function(t){var n,r,i,o={};if(t instanceof Array)for(n in o=[],t)"object"===a(i=t[n])&&(i=e.camelToSnake(i)),o.push(i);else for(n in o={},t)t.hasOwnProperty(n)&&(r=n.replace(/\.?([A-Z]+)/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,""),(i=t[n])&&(i&&i instanceof Array||null!==i&&i.constructor===Object)&&(i=e.camelToSnake(i)),o[r]=i);return o}},{key:"pascalToCamel",value:function(t){var n,r,i,o={};if(t instanceof Array)for(n in o=[],t)"object"===a(i=t[n])&&(i=e.pascalToCamel(i)),o.push(i);else for(n in o={},t)t.hasOwnProperty(n)&&(r=n.replace(/^([A-Z])/g,(function(e,t){return t.toLowerCase()})),(i=t[n])&&(i&&i instanceof Array||null!==i&&i.constructor===Object)&&(i=e.pascalToCamel(i)),o[r]=i);return o}}]),e}(),g=function(){function e(){o(this,e)}return u(e,null,[{key:"openWindow",value:function(e,t,n){return window.open(e,"width="+t+",height="+n+";menubar=no,location=no,status=no,toolbar=no")}}]),e}(),v=function(){function e(){o(this,e)}return u(e,null,[{key:"nextPage",value:function(e){var t=/.*<(.*)>; rel="next".*/.exec(e);return t?t[1]:null}}]),e}();function m(e){e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t>>0&255}}function y(e,t,n){return"#"+("0"+parseInt(e).toString(16)).slice(-2)+("0"+parseInt(t).toString(16)).slice(-2)+("0"+parseInt(n).toString(16)).slice(-2)}function _(e,t,n){e/=255,t/=255,n/=255;var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=(a+o)/2;if(a==o)r=i=0;else{var u=a-o;switch(i=s>.5?u/(2-a-o):u/(a+o),a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return[r,i,s]}function b(e,t,n){var r,i,a;if(0==t)r=i=a=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=x(s,o,e+1/3),i=x(s,o,e),a=x(s,o,e-1/3)}return[255*r,255*i,255*a]}function x(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function w(e,t,n){e/=255,t/=255,n/=255;var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=a,u=a-o;if(i=0==a?0:u/a,a==o)r=0;else{switch(a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return[r,i,s]}function k(e,t,n){var r,i,a,o=Math.floor(6*e),s=6*e-o,u=n*(1-t),c=n*(1-s*t),l=n*(1-(1-s)*t);switch(o%6){case 0:r=n,i=l,a=u;break;case 1:r=c,i=n,a=u;break;case 2:r=u,i=n,a=l;break;case 3:r=u,i=c,a=n;break;case 4:r=l,i=u,a=n;break;case 5:r=n,i=u,a=c}return[255*r,255*i,255*a]}var S=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);function C(e){if(!e)return e;var t,n,r;for(r in t=Array.isArray(e)?[]:{},e)n=e[r],t[r]="object"===a(n)?C(n):n;return t}function M(e,t){if(!e||!t)return!1;var n,r,i=C(e),o=C(t);try{var s=JSON.parse(i.id);"object"===a(s)&&s.id&&(i=s,console.log("Code is a valid json with Id for obj1, use json instead",i,o));var u=JSON.parse(o.id);"object"===a(u)&&u.id&&(o=u,console.log("Code is a valid json with Id for obj2, use json instead",i,o))}catch(f){}if(delete i.zakekePlatform,delete o.zakekePlatform,delete i.label,delete o.label,delete i.isGlobal,delete o.isGlobal,Object.keys(i).length!=Object.keys(o).length)return!1;var c=!0;for(r in i){if(n=i[r],"undefined"===typeof o[r]&&(c=!1),n!=o[r]&&(c=!1),"object"===a(n)&&"object"===a(o[r])&&(c=M(n,o[r])),A(n)||A(o[r]))try{var l="object"===a(n)?n:JSON.parse(n),h="object"===a(o[r])?o[r]:JSON.parse(o[r]);"object"==a(l)&&"object"==a(h)&&(c=M(l,h))}catch(d){}if(!c)break}return c}function A(e){try{return JSON.parse(e),!0}catch(t){}return!1}function E(e){try{return JSON.parse(e).zakekePlatform}catch(t){}return!1}function T(e,t){return E(e)&&E(t)?M(JSON.parse(e),JSON.parse(t)):e==t}function I(){return CURRENT_REDUX_STORE.getState().platformSettings}var L=/android/i.test(navigator.userAgent),O=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,P=function(){var e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}();function D(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)}))}function B(e){return N.apply(this,arguments)}function N(){var e;return e=r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})),N=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,"next",e)}function u(e){i(o,r,a,s,u,"throw",e)}s(void 0)}))},N.apply(this,arguments)}function R(e){return function(t,n){var r=e(t),i=e(n);return r<i?-1:i<r?1:0}}},"./src/imageUploadTask.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n("./src/api.ts"),i=n("./src/exceptions.tsx");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=l((function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"upload",function(){var e=u(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.uploadFileChunked(t,t.type,Zakeke.generateUUID(),{},n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"uploadFileChunked",function(){var e=u(o().mark((function e(t,n,r,s,u){var c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.resumableUpload(t,n,r,u);case 2:if("OK"!==e.sent){e.next=21;break}return e.next=6,a.createImageTask(r,s);case 6:if(-1===(c=e.sent)){e.next=20;break}return e.next=10,a.getImageFromTask(c);case 10:if(l=e.sent,!s.IsPreview){e.next=16;break}if(!l){e.next=14;break}return e.abrupt("return",l.previewUrls);case 14:e.next=18;break;case 16:if(!l||!l.images){e.next=18;break}return e.abrupt("return",l.images);case 18:e.next=21;break;case 20:throw new i.UploadFailedExpection;case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()),h(this,"resumableUpload",function(){var e=u(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var s={Authorization:"Bearer "+a.token,"Accept-Language":a.culture},u=new Resumable({target:Zakeke.config.baseImagesUploadApiUrl+"filechunks/upload",generateUniqueIdentifier:function(){return r},maxFiles:1,testChunks:!1,headers:s,query:{resumableType:n},simultaneousUploads:3});u.addFile(t),u.on("fileError",(function(t,n){e("KO"),console.error("fileError",t,n)})),u.on("error",(function(t,n){e("KO"),console.error("error",t,n)})),u.on("progress",(function(){var e=100*u.progress();i&&i(e)})),u.on("fileAdded",(function(e,t){u.upload()})),u.on("complete",(function(){e("OK")}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),h(this,"createImageTask",function(){var e=u(o().mark((function e(t,n){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={fileID:t,options:n},e.next=3,r.axiosApi.post(Zakeke.config.baseImagesUploadApiUrl+"imagetasks",i);case 3:return a=e.sent,e.abrupt("return",a?a.data.taskID:-1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(this,"getImageFromTask",function(){var e=u(o().mark((function e(t){var n,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=1,e.next=4,r.axiosApi.get(Zakeke.config.baseImagesUploadApiUrl+"imagetasks/results/"+t);case 4:if(!(a=e.sent)||2!==a.data.state){e.next=9;break}return e.abrupt("return",a.data);case 9:if(!a||3!==a.data.state){e.next=11;break}return e.abrupt("return",null);case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(1),406!=(null===(s=e.t0.response)||void 0===s?void 0:s.status)){e.next=19;break}throw new i.NonSquarePixelException;case 19:return e.abrupt("return",null);case 20:if(!(++n>100)){e.next=23;break}return e.abrupt("return",null);case 23:return e.next=25,new Promise((function(e){return setTimeout(e,1e3)}));case 25:e.next=1;break;case 27:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()),this.culture=t,this.token=n}))},"./src/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{Attribute:function(){return s.Attribute},AttributeOptionShapeType:function(){return s.AttributeOptionShapeType},AttributeType:function(){return s.AttributeType},Camera:function(){return s.Camera},Composition:function(){return s.Composition},CompositionItem:function(){return s.CompositionItem},EventMessage:function(){return s.EventMessage},EventMessageType:function(){return s.EventMessageType},ExtensionFieldDataType:function(){return s.ExtensionFieldDataType},Group:function(){return s.Group},ImageItem:function(){return s.ImageItem},ItemType:function(){return s.ItemType},Option:function(){return s.Option},Platform:function(){return s.Platform},PlatformPriceType:function(){return s.PlatformPriceType},PlatformSettings:function(){return s.PlatformSettings},Product:function(){return s.Product},ProductArea:function(){return s.ProductArea},ProductQuantityRule:function(){return s.ProductQuantityRule},Quote:function(){return s.Quote},QuoteRule:function(){return s.QuoteRule},Step:function(){return s.Step},Template:function(){return s.Template},TemplateArea:function(){return s.TemplateArea},TemplateComposition:function(){return s.TemplateComposition},TemplateConstraints:function(){return s.TemplateConstraints},TextItem:function(){return s.TextItem},ThemeCategory:function(){return s.ThemeCategory},ThemeMacroCategory:function(){return s.ThemeMacroCategory},ThemeTemplateGroup:function(){return s.ThemeTemplateGroup},User:function(){return s.User},Variant:function(){return s.Variant},ZakekeDesigner:function(){return a.ZakekeDesigner},ZakekeEnvironment:function(){return r.ZakekeEnvironment},ZakekeEvent:function(){return s.ZakekeEvent},ZakekeProvider:function(){return o.ZakekeProvider},ZakekeViewer:function(){return i.ZakekeViewer},useInternalState:function(){return o.useInternalState},useZakeke:function(){return o.useZakeke}});var r=n("./src/environment.tsx"),i=n("./src/components/sceneViewer.tsx"),a=n("./src/components/customizer.tsx"),o=n("./src/state/provider.tsx"),s=n("./src/models.ts")},"./src/integrations/Integration.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.r(t),n.d(t,{PlatformAttributeSelection:function(){return a}});var a=i((function e(t,n,r,i,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeCode=t,this.optionCode=n,this.attributeLabel=r,this.optionLabel=i,this.attributeIsEnabled=a,this.optionIsEnabled=o}))},"./src/integrations/generic.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{default:function(){return o}});var a=function(e){return e.AddToCart="AddToCart",e.Price="Price",e.Close="Close",e.SharedComposition="SharedComposition",e}(a||{}),o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"callbacks",new Map),i(this,"messageIds",0),i(this,"pricingCalculator",null),window.addEventListener("message",(function(e){var n=e.data.zakekeMessageType;if(n===a.Price||n===a.SharedComposition){var r=e.data.messageId;if(!t.callbacks.has(r))return;var i=t.callbacks.get(r);t.callbacks.delete(r),i(e.data.message)}}))}var t,n,o;return t=e,(n=[{key:"addToCart",value:function(e,t,n,r,i,o,s){var u=this.pricingCalculator&&t?this.pricingCalculator.calculate(t,o):0;window.parent.postMessage({zakekeMessageType:a.AddToCart,message:{composition:e.id,preview:e.get("previewImageUrl"),designPrice:u,attributes:r,designItems:i,quantity:o,additionalProperties:s}},"*")}},{key:"getPrice",value:function(e,t,n,r,i,o,s,u){var c=this;return new Promise((function(e,n){var l=c.messageIds++;c.callbacks.set(l,e),console.log("Calculating price...");var h=c.pricingCalculator&&t?c.pricingCalculator.calculate(t,u):0,f=c.pricingCalculator&&t?c.pricingCalculator.getMatchedConditions(t,u,!0):[];s||(h=0,f=[]),o||(i=0),console.log("Calculated Zakeke price:"),console.log("- Composition price: "+i),console.log("- Design price: "+h),window.parent.postMessage({zakekeMessageType:a.Price,messageId:l,message:{attributes:r,compositionPrice:i+h,designPrice:h,conditions:f,quantity:u}},"*")}))}},{key:"getSharedCompositionUrl",value:function(e){var t=this;return new Promise((function(n,r){var i=t.messageIds++;t.callbacks.set(i,n),console.log("getSharedCompositionUrl generic ts"),window.parent.postMessage({zakekeMessageType:a.SharedComposition,messageId:i,message:{compositionDocID:e}},"*")}))}},{key:"close",value:function(){window.parent.postMessage({zakekeMessageType:a.Close},"*")}},{key:"setPricingCalculator",value:function(e){this.pricingCalculator=e}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/integrations/helpers.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{integrationFor:function(){return a}});var r=n("./src/integrations/preview.ts"),i=n("./src/integrations/generic.ts");function a(e){return new Promise((function(t,n){t("preview"===e?new r.default:new i.default)}))}},"./src/integrations/preview.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{default:function(){return a}});var i=function(e){return e.Close="Close",e}(i||{}),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"addToCart",value:function(e,t,n,r,i,a,o){}},{key:"getPrice",value:function(e,t,n,r,i,a,o,s){return new Promise((function(e,t){e(a?i:0)}))}},{key:"getSharedCompositionUrl",value:function(e){return new Promise((function(e,t){}))}},{key:"setPricingCalculator",value:function(e){}},{key:"close",value:function(){window.parent.postMessage({zakekeMessageType:i.Close},"*")}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/models.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{Attribute:function(){return D},AttributeOptionShapeType:function(){return P},AttributeType:function(){return O},Camera:function(){return T},Composition:function(){return U},CompositionItem:function(){return F},EventMessage:function(){return A},EventMessageType:function(){return E},ExtensionFieldDataType:function(){return V},Group:function(){return I},ImageItem:function(){return C},ItemType:function(){return k},Option:function(){return B},Platform:function(){return l},PlatformPriceType:function(){return h},PlatformSettings:function(){return M},Product:function(){return d},ProductArea:function(){return v},ProductQuantityRule:function(){return m},Quote:function(){return g},QuoteRule:function(){return p},Step:function(){return L},Template:function(){return w},TemplateArea:function(){return x},TemplateComposition:function(){return N},TemplateConstraints:function(){return b},TextItem:function(){return S},ThemeCategory:function(){return R},ThemeMacroCategory:function(){return j},ThemeTemplateGroup:function(){return z},User:function(){return f},Variant:function(){return y},ZakekeEvent:function(){return _}});var r=n("./node_modules/lodash/lodash.js"),i=n.n(r),a=n("./src/exceptions.tsx");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(e){return e[e.Magento1=5]="Magento1",e[e.Magento2=1]="Magento2",e[e.Shopify=3]="Shopify",e[e.WooCommerce=2]="WooCommerce",e}({}),h=function(e){return e[e.Standard=0]="Standard",e[e.Inline=1]="Inline",e}({}),f=u((function e(t,n,r){c(this,e),this.id=t,this.username=n,this.name=r})),d=function(){function e(){c(this,e),o(this,"areas",[]),o(this,"quantityRule",null),o(this,"quoteRule",null),o(this,"environment",null),o(this,"isShowSecondScreenEnabled",!1)}return u(e,null,[{key:"fromProduct",value:function(t){var n=new e;return n.id=t.id,n.sku=t.get("code"),n.name=t.get("name"),n.previewUrl=t.get("largeImageUrl"),n.quantityRule=t.get("quantityRule")?m.fromQuantityRule(t.get("quantityRule")):null,n.areas=t.get("colors").length>0?t.get("colors").at(0).get("sides").map((function(e){return v.fromSide(e)})):[],n.quoteRule=t.get("quoteRule")?new p(t.get("quoteRule")):null,n.environment=t.get("environment"),n.isShowSecondScreenEnabled=t.get("isShowSecondScreenEnabled"),n}}]),e}(),p=u((function e(t){c(this,e),this.quoteRuleID=t.quoteRuleID,this.name=t.name,this.sellerID=t.sellerID,this.formControlsData=t.formControlsData,this.isValidForAllProducts=t.isValidForAllProducts,this.allowAddToCart=t.allowAddToCart,this.products=t.products})),g=u((function e(){c(this,e),o(this,"statusID",1),o(this,"quantity",1),o(this,"modelPrice",0)})),v=function(){function e(){c(this,e)}return u(e,null,[{key:"fromSide",value:function(t){var n=new e;return n.id=t.id,n.name=t.get("name"),n.cameraLocationID=t.get("cameraLocationID"),n}}]),e}(),m=function(){function e(){c(this,e),o(this,"minQuantity",null),o(this,"maxQuantity",null),o(this,"step",null)}return u(e,null,[{key:"fromQuantityRule",value:function(t){if(!t)throw"Invalid quantity rule";var n=new e;return n.minQuantity=t.get("minQuantity"),n.maxQuantity=t.get("maxQuantity"),n.step=t.get("step"),n}}]),e}(),y=u((function e(t,n,r,i,a){c(this,e),this.id=t,this.sku=n,this.name=r,this.price=i,this.metadata=a})),_=u((function e(t,n){c(this,e),this.event=t,this.callback=n})),b=u((function e(){c(this,e),o(this,"isUserImageAllowed",!0)})),x=function(){function e(){c(this,e),o(this,"id",-1),o(this,"uploadRestrictions",new b),o(this,"disableSellerImages",!1),o(this,"canAddImage",!0),o(this,"canAddText",!0)}return u(e,null,[{key:"fromTemplateArea",value:function(t){var n=new e;return n.id=t.get("sideID"),n.disableSellerImages=t.get("disableSellerImages"),n.canAddImage=t.get("canAddImage"),n.canAddText=t.get("canAddText"),t.get("uploadRestrictions")&&(n.uploadRestrictions=i().mergeWith(new b,t.get("uploadRestrictions"),(function(e,t){return void 0!=t?t:e}))),n}}]),e}(),w=function(){function e(){c(this,e),o(this,"id",-1),o(this,"name",""),o(this,"areas",[])}return u(e,null,[{key:"fromTemplate",value:function(t){var n=new e;return n.id=t.get("templateDesignID"),n.name=t.get("name"),n.areas=t.get("sides").map((function(e){return x.fromTemplateArea(e)})),n}}]),e}(),k=function(e){return e[e.Text=0]="Text",e[e.Image=1]="Image",e}({}),S=u((function e(t){var n;c(this,e),o(this,"constraints",null),this.type=k.Text,this.areaId=t.sideID,this.guid=t.itemGuid,this.name=t.designItem.get("name"),this.text=t.text,this.strokeColor=t.strokeColor,this.strokeWidth=t.strokeWidth,this.fillColor=t.fillColor,this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontWeight=t.fontWeight,this.fontStyle=t.fontStyle,this.fontStretch=t.fontStretch,this.justification=t.justification,this.isTextOnPath=t.isTextOnPath,this.isTemplateElement=null!==(n=t.item.data.isTemplateElement)&&void 0!==n&&n,this.constraints=t.constraints})),C=u((function e(t){c(this,e),o(this,"constraints",null),this.type=k.Image,this.imageID=t.imageID,this.areaId=t.sideID,this.guid=t.itemGuid,this.name=t.designItem.get("name"),this.url=t.url,this.deleted=!t.visible,this.constraints=t.constraints})),M=function(){function e(t,n,r,i,a,o,s,u,l,h){c(this,e),this.ecommerceId=t,this.currencyId=n,this.apiKey=r,this.apiSecret=i,this.accessKey=a,this.accessSecret=o,this.remoteUrl=s,this.username=u,this.password=l,this.adminPath=h}return u(e,[{key:"platform",get:function(){return this.ecommerceId}}],[{key:"fromData",value:function(t){if(!t)throw new a.Exception("Cannot create platform settings from null");return new e(t.ecommerceId,t.currencyId,t.apiKey,t.accessSecret,t.accessKey,t.accessSecret,t.remoteUrl,t.username,t.password,t.adminPath)}}]),e}();o(M,"Empty",new M(-1,-1,"","","","","","","",""));var A=function(){function e(){c(this,e),o(this,"eventID",-1),o(this,"description",""),o(this,"closeable",!1),o(this,"visible",!1),o(this,"addToCartDisabledIfVisible",!1),o(this,"enableCheckForSellerImages",!1)}return u(e,null,[{key:"fromMessage",value:function(t){var n=new e;return n.eventID=t.eventID,n.description=t.description,n.closeable=t.closeable,n.visible=t.visible,n.addToCartDisabledIfVisible=t.addToCartDisabledIfVisible,n.additionalData=""!==t.additionalData&&null!==t.additionalData?JSON.parse(t.additionalData):"",n.enableCheckForSellerImages=t.enableCheckForSellerImages,n}}]),e}(),E=function(e){return e[e.Undefined=-1]="Undefined",e[e.ImageQualityWarning=1]="ImageQualityWarning",e[e.Welcome=3]="Welcome",e[e.AddToCart=4]="AddToCart",e[e.Copyright=8]="Copyright",e}({}),T=function(){function e(){c(this,e),o(this,"id",""),o(this,"name","")}return u(e,null,[{key:"fromZkCamera",value:function(t){var n=new e;return n.id=t.get("locationID"),n.name=t.get("name"),n}}]),e}(),I=u((function e(){c(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"name","Group"),o(this,"enabled",!1),o(this,"imageUrl",null),o(this,"icon",null),o(this,"attributes",[]),o(this,"steps",[]),o(this,"templateGroups",[]),o(this,"cameraLocationId",null),o(this,"displayOrder",1),o(this,"direction",0),o(this,"attributesAlwaysOpened",!1)})),L=u((function e(){c(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"name","Step"),o(this,"cameraLocationID",null),o(this,"displayOrder",1),o(this,"attributes",[]),o(this,"templateGroups",[])})),O=function(e){return e[e.Select=0]="Select",e[e.Input=1]="Input",e[e.Colorpicker=2]="Colorpicker",e}({}),P=function(e){return e[e.Round=1]="Round",e[e.Square=2]="Square",e}({}),D=u((function e(){c(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"code",""),o(this,"name","Attribute"),o(this,"description",""),o(this,"enabled",!1),o(this,"imageUrl",null),o(this,"groupId",-1),o(this,"stepId",-1),o(this,"options",[]),o(this,"value",null),o(this,"numberFormat",""),o(this,"type",O.Select),o(this,"optionShapeType",P.Round),o(this,"displayOrder",1),o(this,"hideOptionsLabel",!1),o(this,"cameraLocationId",null)})),B=u((function e(){c(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"code",""),o(this,"name","Option"),o(this,"description",""),o(this,"enabled",!1),o(this,"selected",!1),o(this,"imageUrl",null),o(this,"displayOrder",1)})),N=u((function e(){c(this,e),o(this,"compositionID",-1),o(this,"name",""),o(this,"previewImageUrl","")})),R=u((function e(){c(this,e),o(this,"id",-1),o(this,"name",""),o(this,"composition",[])})),j=u((function e(){c(this,e),o(this,"id",-1),o(this,"name",""),o(this,"category",[])})),z=u((function e(){c(this,e),o(this,"templateGroupID",-1),o(this,"name",""),o(this,"groupID",-1),o(this,"stepID",-1),o(this,"displayOrder",-1),o(this,"macroCategory",[])})),F=u((function e(){c(this,e),o(this,"attributeID",-1),o(this,"attributeName",""),o(this,"attributeCode",""),o(this,"selectedOptionName",""),o(this,"selectedOptionCode","")})),U=function(){function e(){c(this,e),o(this,"name",""),o(this,"docID",""),o(this,"compositionID",-1),o(this,"compositionItems",[]),o(this,"previewImageUrl",""),o(this,"designID",null),o(this,"tags",[])}return u(e,null,[{key:"fromJSON",value:function(t){var n=new e;return i().assign(n,t),n}}]),e}(),V=function(e){return e[e.Money=1]="Money",e[e.Integer=2]="Integer",e[e.Decimal=3]="Decimal",e}({})},"./src/state/boot.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n("./node_modules/qs/lib/index.js"),i=n.n(r),a=n("react"),o=n.n(a),s=n("./src/index.tsx");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,s(_,"constructor",g),s(g,"constructor",p),p.displayName=s(g,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),s(_,o,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function l(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}var f=function(e){var t=e.children,n=(0,s.useInternalState)(),r=(0,a.useRef)(n);r.current=n;var u=(0,a.useCallback)(function(){var e=h(c().mark((function e(t){var n,i,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=r.current)||void 0===n||n.dispatch({type:"IS_SCENE_LOADING",isLoading:!0}),null===(i=r.current)||void 0===i||i.state.environment.on("change",(function(){var e;return null===(e=r.current)||void 0===e?void 0:e.dispatch({type:"UPDATE"})})),e.next=4,null===(a=r.current)||void 0===a?void 0:a.state.environment.boot(t);case 4:null===(o=r.current)||void 0===o||o.dispatch({type:"IS_SCENE_LOADING",isLoading:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),l=(0,a.useCallback)(function(){var e=h(c().mark((function e(t){var n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"load"!=t.data.type||null!==(n=r.current)&&void 0!==n&&n.state.parametersReceived||(null===(i=r.current)||void 0===i||i.dispatch({type:"PARAMETERS_RECEIVED"}),u(t.data.parameters),window.parent.postMessage({zakekeType:"loaded"},"*"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,a.useEffect)((function(){var e=i().parse(window.location.search);return e&&e.ecommerce&&"preview"==e.ecommerce?u(null):window.addEventListener("message",l),function(){return window.removeEventListener("message",l)}}),[]),o().createElement(o().Fragment,null,t)}},"./src/state/provider.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{ZakekeProvider:function(){return p},useInternalState:function(){return d},useZakeke:function(){return f}});var r=n("react"),i=n.n(r),a=n("./src/state/boot.tsx"),o=n("./src/state/providerValue.ts"),s=n("./src/state/reducer.ts");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=i().createContext(null),h=i().createContext(null),f=function(){var e=(0,r.useContext)(l);if(!e)throw new Error("Corrupted Zakeke state");return e},d=function(){var e=(0,r.useContext)(h);if(!e)throw"Corrupted Zakeke state";return e},p=function(e){var t=e.environment,n=e.children,c=u((0,r.useReducer)(s.reducer,{environment:t,isAddToCartLoading:!1,isSceneLoading:!1,parametersReceived:!1}),2),f=c[0],d=c[1],p=(0,o.createProviderValue)(f,d);return i().createElement(l.Provider,{value:p},i().createElement(h.Provider,{value:{state:f,dispatch:d}},i().createElement(a.default,null,n)))}},"./src/state/providerValue.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{createProviderValue:function(){return u}}),n("./src/index.tsx");var r=n("./src/helpers.tsx");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function d(){}function p(){}function g(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,c(_,"constructor",g),c(g,"constructor",p),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,u,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function o(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))}}var u=function(e,t){if(!e.environment)throw new Error("Invalid Zakeke environment.");return{price:e.environment.price,currency:e.environment.currency,culture:e.environment.culture,quantity:e.environment.quantity,quantityRule:e.environment.quantityRule,internalProduct:e.environment.internalProduct,internalScene:e.environment.internalScene,internalCurrentTemplate:e.environment.internalCurrentTemplate,draftCompositions:e.environment.themeCompositions,currentAttributesSelection:e.environment.currentAttributesSelection,isSceneLoading:e.isSceneLoading,isAddToCartLoading:e.isAddToCartLoading,fonts:e.environment.fonts,disableTextColors:e.environment.disableTextColors,defaultColor:e.environment.defaultColor,textColors:e.environment.textColors,groups:e.environment.groups,templates:e.environment.templates,loadedComposition:e.environment.loadedComposition,currentTemplate:e.environment.currentTemplate,isViewerReady:e.environment.isViewerReady,publicTranslations:e.environment.publicTranslations,items:e.environment.getDesignItemsInfo(),productName:e.environment.productName,productCode:e.environment.productCode,product:e.environment.product,cameras:e.environment.cameras,sellerSettings:e.environment.sellerSettings,eventMessages:e.environment.eventMessages,visibleEventMessages:e.environment.visibleEventMessages,isAssetsLoading:e.environment.isAssetsLoading,extensionFields:e.environment.extensionFields,currentCompositionInfo:e.environment.currentCompositionInfo,nftSettings:e.environment.nftSettings,useLegacyScreenshot:e.environment.useLegacyScreenshot,saveComposition:e.environment.saveComposition,loadComposition:e.environment.loadComposition,getPDF:e.environment.getPDF.bind(e.environment),getOnlineScreenshot:e.environment.getOnlineScreenshot.bind(e.environment),reset:e.environment.reset.bind(e.environment),undo:e.environment.undo.bind(e.environment),redo:e.environment.redo.bind(e.environment),setCamera:e.environment.setCamera.bind(e.environment),setCameraByName:e.environment.setCameraByName.bind(e.environment),setCameraZoomEnabled:e.environment.setCameraZoomEnabled.bind(e.environment),resetCameraPivot:e.environment.resetCameraPivot.bind(e.environment),setCameraPivot:e.environment.setCameraPivot.bind(e.environment),setQuantity:e.environment.setQuantity.bind(e.environment),getImages:e.environment.getImages.bind(e.environment),openSecondScreen:e.environment.openSecondScreen.bind(e.environment),getMacroCategories:e.environment.getMacroCategories.bind(e.environment),createQuote:e.environment.createQuote,previewOnly__setItemImageFromBase64:function(){var e=s(a().mark((function e(n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"SET_ITEM_IMAGE_FROM_BASE64",guid:n,base64:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setItemImageFromFile:function(){var e=s(a().mark((function e(n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"SET_ITEM_IMAGE_FROM_FILE",guid:n,file:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addItemImage:function(){var e=s(a().mark((function e(n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"ADD_ITEM_IMAGE",imageId:n,areaId:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createImage:e.environment.createImage.bind(e.environment),createImageFromUrl:e.environment.createImageFromUrl.bind(e.environment),setItemImage:function(){var e=s(a().mark((function e(n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"SET_ITEM_IMAGE",guid:n,imageId:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setItemFontFamily:function(e,n){return t({type:"SET_ITEM_FONT_FAMILY",guid:e,fontFamily:n})},setItemColor:function(e,n){return t({type:"SET_ITEM_COLOR",guid:e,color:n})},setItemBold:function(e,n){return t({type:"SET_ITEM_BOLD",guid:e,bold:n})},setItemItalic:function(e,n){return t({type:"SET_ITEM_ITALIC",guid:e,italic:n})},setItemTextOnPath:function(e,n,r){return t({type:"SET_ITEM_TEXT_PATH",guid:e,areaId:n,value:r})},setItemText:function(e,n){return t({type:"SET_ITEM_TEXT",guid:e,text:n})},addItemText:function(){var e=s(a().mark((function e(n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"ADD_ITEM_TEXT",settings:n,areaId:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),removeItem:function(){var e=s(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"REMOVE_ITEM",guid:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isFullscreenMode:e.environment.isFullscreenMode,switchFullscreen:function(){return t({type:"SWITCH_FULLSCREEN"})},zoomIn:function(){return t({type:"ZOOM_IN"})},zoomOut:function(){return t({type:"ZOOM_OUT"})},setHighlightSettings:function(e){return t({type:"SET_HIGHLIGHT_SETTINGS",settings:e})},updateView:function(e){return t({type:"UPDATE_VIEW",adjustCamera:e})},hasExplodedMode:e.environment.hasExplodedMode,isExplodedMode:e.environment.isExplodedMode,setExplodedMode:function(e){return t({type:"SET_EXPLODED_MODE",exploded:e})},internalAppendViewer:function(e){return t({type:"APPEND_VIEWER",container:e})},designUpdate:function(){return t({type:"DESIGN_UPDATE"})},selectOption:function(e){return t({type:"SELECT_OPTION",optionId:e})},isAreaVisible:e.environment.isAreaVisible.bind(e.environment),setTemplate:function(e){return t({type:"SET_TEMPLATE",templateId:e})},saveTemplate:e.environment.saveTemplate,addToCart:function(){var n=s(a().mark((function n(){var r,i=arguments;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"IS_ADD_TO_CART_LOADING",isLoading:!0}),n.next=3,(r=e.environment).addToCart.apply(r,i);case 3:t({type:"IS_ADD_TO_CART_LOADING",isLoading:!1});case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),loadSavedComposition:e.environment.loadSavedComposition,saveDraftsComposition:e.environment.saveDraftsComposition,deleteSavedComposition:e.environment.deleteSavedComposition,getMeshIDbyName:e.environment.getMeshIDbyName.bind(e.environment),hideMeshAndSaveState:e.environment.hideMeshAndSaveState.bind(e.environment),restoreMeshVisibility:e.environment.restoreMeshVisibility.bind(e.environment),setMeshDesignVisibility:e.environment.setMeshDesignVisibility.bind(e.environment),exportSceneToGlb:e.environment.exportSceneToGlb,clearListeners:e.environment.clearListeners,addFocusAttributesListener:e.environment.addFocusAttributesListener,focusAttribute:e.environment.focusAttribute,highlightGroup:e.environment.hightlightGroup.bind(e.environment),highlightAttribute:e.environment.highlightAttribute.bind(e.environment),getQrCodeArUrl:e.environment.getQrCodeArUrl,getMobileArUrl:e.environment.getMobileArUrl,openArMobile:e.environment.openArMobile,isSceneArEnabled:e.environment.isSceneArEnabled,isArDeviceCompliant:e.environment.isArDeviceCompliant,IS_ANDROID:r.IS_ANDROID,IS_IOS:r.IS_IOS,setBackgroundColor:e.environment.setBackgroundColor.bind(e.environment),getTryOnUrl:e.environment.getTryOnUrl.bind(e.environment),isSceneTryOnEnabled:e.environment.isSceneTryOnEnabled.bind(e.environment),setCameraLocked:e.environment.setCameraLocked.bind(e.environment),getTemplateUploadRestrictictions:e.environment.getTemplateUploadRestrictictions.bind(e.environment),getShareCompositionUrl:e.environment.getShareCompositionUrl.bind(e.environment),getCopyrightMessageAccepted:e.environment.getCopyrightMessageAccepted.bind(e.environment),setCopyrightMessageAccepted:e.environment.setCopyrightMessageAccepted.bind(e.environment),validationNFTEmail:e.environment.validationNFTEmail.bind(e.environment),validationNFTWalletAddress:e.environment.validationNFTWalletAddress.bind(e.environment),templateCategories:e.environment.templateCategories,applyTemplate:e.environment.applyTemplate.bind(e.environment)}}},"./src/state/reducer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{reducer:function(){return a}});var r=n("./node_modules/lodash/lodash.js"),i=n.n(r);function a(e,t){var n=i().clone(e);switch(t.type){case"BOOT_COMPLETED":case"UPDATE":break;case"DESIGN_UPDATE":n.environment.renderDesign();break;case"PARAMETERS_RECEIVED":n.parametersReceived=!0;break;case"UPDATE_VIEW":n.environment.updateView();break;case"SWITCH_FULLSCREEN":n.environment.switchFullscreen();break;case"SELECT_OPTION":n.environment.selectOption(t.optionId);break;case"APPEND_VIEWER":n.environment.appendViewer(t.container);break;case"SET_HIGHLIGHT_SETTINGS":n.environment.setHighlightSettings(t.settings);case"IS_SCENE_LOADING":n.isSceneLoading=t.isLoading;break;case"IS_ADD_TO_CART_LOADING":n.isAddToCartLoading=t.isLoading;break;case"SET_TEMPLATE":n.environment.setTemplate(t.templateId);break;case"SET_ITEM_IMAGE_FROM_BASE64":n.environment.setItemImageFromBase64(t.guid,t.base64);break;case"SET_ITEM_IMAGE_FROM_FILE":n.environment.setItemImageFromFile(t.guid,t.file);break;case"ADD_ITEM_IMAGE":n.environment.addItemImage(t.imageId,t.areaId);break;case"SET_ITEM_IMAGE":n.environment.setItemImage(t.guid,t.imageId);break;case"SET_ITEM_FONT_FAMILY":n.environment.setItemFontFamily(t.guid,t.fontFamily);break;case"SET_ITEM_COLOR":n.environment.setItemColor(t.guid,t.color);break;case"SET_ITEM_BOLD":n.environment.setItemBold(t.guid,t.bold);break;case"SET_ITEM_ITALIC":n.environment.setItemItalic(t.guid,t.italic);break;case"SET_ITEM_TEXT_PATH":n.environment.setItemTextOnPath(t.guid,t.areaId,t.value);break;case"SET_ITEM_TEXT":n.environment.setItemText(t.guid,t.text);break;case"ADD_ITEM_TEXT":n.environment.addItemText(t.settings,t.areaId);break;case"REMOVE_ITEM":n.environment.removeItem(t.guid);break;case"ZOOM_IN":n.environment.zoomIn();break;case"ZOOM_OUT":n.environment.zoomOut();break;case"SET_EXPLODED_MODE":n.environment.setExplodedMode(t.exploded);break;default:throw new Error("Invalid reducer action ".concat(t.type,"."))}return n}},"../../libs/pricingRuleBase/DesignPriceCalculatorRuleBased.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{DesignPriceCalculatorRuleBased:function(){return w},DesignPriceCalculatorRuleFactory:function(){return x}});var r=n("../../../node_modules/axios/index.js"),i=n.n(r),a=n("../../../node_modules/lodash/lodash.js"),o=n.n(a),s=n("../../utils/rectangle.ts");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var h={};function d(){}function p(){}function g(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(M([])));y&&y!==t&&n.call(y,i)&&(v=y);var _=g.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,a,o,s){var c=l(e[i],e,a);if("throw"!==c.type){var h=c.arg,f=h.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){h.value=e,o(h)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=g,s(_,"constructor",g),s(g,"constructor",p),p.displayName=s(g,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),s(_,o,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function d(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,s,"next",e)}function s(e){d(a,r,i,o,s,"throw",e)}o(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){return e[e.Tutti=1]="Tutti",e[e.AllElementsNoTemplateItems=18]="AllElementsNoTemplateItems",e[e.AllTexts=8]="AllTexts",e[e.AllCustomText=9]="AllCustomText",e[e.SingleElement=10]="SingleElement",e[e.AllImages=11]="AllImages",e[e.UploadedImages=12]="UploadedImages",e[e.AllTextArt=13]="AllTextArt",e[e.AllCustomTextArt=14]="AllCustomTextArt",e[e.AllCustomElements=15]="AllCustomElements",e[e.ClipartImages=16]="ClipartImages",e[e.TemplatesImages=17]="TemplatesImages",e}(_||{}),b=function(e){var t,n=null===(t=[{operator:">",func:function(e,t){return e>t}},{operator:"<",func:function(e,t){return e<t}},{operator:"=",func:function(e,t){return e==t}},{operator:">=",func:function(e,t){return e>=t}},{operator:"<=",func:function(e,t){return e<=t}}].find((function(t){return t.operator==e})))||void 0===t?void 0:t.func;if(null==n)throw new Error("Function  for operator ".concat(e," not found"));return n},x=v((function e(){m(this,e)}));y(x,"create",function(){var e=p(f().mark((function e(t,n,r,i,a,o){var s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new w(n,r,i,a,o),e.next=3,s.init(t).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}());var w=v((function e(t,n,r,u,h){var d=this;m(this,e),y(this,"colorID",-1),y(this,"config",{isOwin:!0,apiUrl:"https://test-api.zakeke.com/api/graphql",cloudFlareApiUrl:null,token:"Gw6IL2Q7e66r3osC16_T6XSlsrnuUAHmw59Y3-qJv2LaPPV-nuzDkC0eOGAU8ef_i94HLlu8vDVXpk9MAWBtwrXWN7_XizPAeIfKXArfol19Ek7wmZMR3zRQWwHChqPmYDJMrI3WeCIQGRJxsR7q8hh5xywTqdOwVi6LT7_8-qP9jkc_tdBUPiMUrT6HI1i1ygnEGEk6Eoa97zvbVGRE3NRt-W5nXKGv4_INB_VBdpOihHVXIzl7PtchqPyBr7AaW5Hdrbh_KoFwEhLTcTixXpxfzOcjecbyqFHw20fNFlg2ny6Cb375i7hpnFWD7Q4lj9xI3R6jbkpFHsQEFfBK-UF1f9vli0liCWQ3WdAYGQEmUYx7QjCy240GuR_cK6c28JHoabSGQdW91K7KEAug4o19nokKfzbWoZM7WD4T4RVXNB_ob_gjeYKsK7EJIt6qGiPpnJEbSeFCjz1EhE31Jw6MO-oawNSASxgYk1D6Z3XkLw1G",clientLang:null}),y(this,"init",(function(e){return d.product=e,new Promise((function(t,n){try{d.getPricings(e,(function(e,n){d.pricings=e,d.properties=n,t()}))}catch(r){n(r)}}))})),y(this,"getPricings",function(){var e=p(f().mark((function e(t,n){var r,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.pricings){e.next=4;break}n(d.pricings,d.properties),e.next=30;break;case 4:if(r={name:"pricingsConfigurationQuery",query:"query pricingsQuery($first: Int!, $productID: Long!, $languageCulture: String) {\n                                    pricingProperties { propertyID functionName }\n                                    pricingsDetailed(first: $first, productID: $productID, isForFrontEnd: true, languageCulture: $languageCulture) {\n                                        edges {\n                                            node {\n                                                id\n                                                description\n                                                infoPricingText\n                                                priceDescriptionEnabled\n                                                priceStructure\n                                                products {\n                                                    productID\n                                                }\n                                                printTypes {\n                                                    printTypeID\n                                                }\n                                                rules {\n                                                    ruleID\n                                                    propertyID\n                                                    allMatchType\n                                                    elementID\n                                                    elementTitle\n                                                    isSetupPrice\n                                                    priceType\n                                                    targets {\n                                                        area\n                                                        color\n                                                        side\n                                                        targetID\n                                                    }\n                                                    conditions {\n                                                        conditionID\n                                                        formula\n                                                        position\n                                                        priceToAdd\n                                                        quantity\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }",variables:{first:50,productID:t.get("modelID"),languageCulture:d.config.clientLang}},a={headers:{"Content-Type":"application/json",Accept:"application/json"}},d.config.isOwin?a.headers.Authorization="Bearer "+d.config.token:a.headers["X-Auth-Token"]=d.config.token,o={type:"POST",url:d.config.apiUrl,data:JSON.stringify(r),contentType:"application/json",dataType:"json"},d.config.isOwin?o.Authorization="Bearer "+d.config.token:o["X-Auth-Token"]=d.config.token,e.prev=9,"undefined"===typeof d.config.cloudFlareApiUrl||null===d.config.cloudFlareApiUrl||""===d.config.cloudFlareApiUrl){e.next=16;break}return e.next=13,i().post(d.config.cloudFlareApiUrl,r,a);case 13:return s=e.sent,n(s.data.data.pricingsDetailed.edges.map((function(e){return e.node})),s.data.data.pricingProperties),e.abrupt("return");case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(9);case 20:return e.prev=20,e.next=23,i().post(d.config.apiUrl,r,a);case 23:u=e.sent,n(u.data.data.pricingsDetailed.edges.map((function(e){return e.node})),u.data.data.pricingProperties),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(20),console.log(e.t1);case 30:case"end":return e.stop()}}),e,null,[[9,18],[20,27]])})));return function(t,n){return e.apply(this,arguments)}}()),y(this,"getPricing",(function(e){if(d.pricings){var t=d.pricings.filter((function(e){return e.products.filter((function(e){return e.productID==d.product.get("modelID")})).length>0}));return 0==t.length&&(t=d.pricings.filter((function(t){return t.printTypes.filter((function(t){return t.printTypeID==e.get("printTypeID")})).length>0}))),t.length>0?t[0]:void 0}})),y(this,"distinct",(function(e,t,n){return n.indexOf(e)===t})),y(this,"ElementSizeFunction",(function(e,t){var n={result:!1,multiplier:0,items:e.items};if(!t.values||0==t.values.length)throw"values missing in formula";if(null==t.values||0==t.values.length)throw"ElementSize invalid value";return e.items.forEach((function(r){var i=JSON.parse(r.get("json"))[1],a=i.data.transformsData.dimensions.width,o=i.data.transformsData.dimensions.height,s=r.get("areas").at(0).get("sideID"),u=e.sides.find((function(e){return e.get("sideID")==s}));if(null!=a&&null!=o&&null!=u&&u.get("ppcm")>0){var c=a/u.get("ppcm"),l=o/u.get("ppcm")*c;b(t.operator)(l,t.values[0])&&(n.result=!0,n.multiplier+=1,n.items=n.items.filter((function(e){return e!=r})))}})),n})),y(this,"NumberOfElementsSimplifiedFunction",(function(e,t){return{result:e.items.length>0,multiplier:e.items.length,items:e.items}})),y(this,"LinesLengthFunction",(function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";return e.items.forEach((function(e){var r=JSON.parse(e.get("json"))[1],i=r.data.isText,o=r.data.isTextArea,s=r.data.isTextOnPath,u=r.data.isTextArt,c="";if(null!=i&&i?c=r.content.toString():(null!=o&&o||null!=s&&s)&&(c=r.data.text.toString()),null!=u&&u&&(c=e.get("textArt").get("text")),!(0,a.isEmpty)(c)){var l=c.split("\n").length;b(t.operator)(l,t.values[0])&&(n.result=!0,n.multiplier+=1)}})),n})),y(this,"AmountOfElementsFunction",(function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";return b(t.operator)(e.items.length,t.values[0])&&(n.result=!0,n.multiplier=1),n})),y(this,"AmountOfUsedColorsFunction",(function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";var r=(0,a.uniq)(e.items.filter((function(e){return e.get("itemColors")&&!(0,a.isEmpty)(e.get("itemColors"))})).flatMap((function(e){return e.get("itemColors")})));return b(t.operator)(r.filter(d.distinct).length,t.values[0])&&(n.result=!0,n.multiplier=1),n})),y(this,"CanvasSizeFunction",(function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";if(e.sides&&!(0,a.isEmpty)(e.sides)){var r=e.sides.flatMap((function(e){return e.get("areas").models})),i=[];r.forEach((function(t){e.items.filter((function(e){return e.get("areas").filter((function(e){return e.get("colorID")==t.getColorID()&&e.get("sideID")==t.getSideID()&&e.get("areaID")==t.get("areaID")})).length>0})).length>0&&(i=[].concat(c(i),[t]))})),i.forEach((function(r){var i=r.get("boundsWidth"),a=r.get("boundsHeight"),o=e.sides.find((function(e){return e.get("sideID")==r.getSideID()}));if(null!=o&&o.get("ppcm")>0){var s=i/o.get("ppcm"),u=a/o.get("ppcm");s=Math.round(100*s)/100,u=Math.round(100*u)/100,b(t.operator)(s,t.values[0])&&b(t.operator)(u,t.values[1])&&(n.result=!0,n.multiplier+=1)}}))}return n})),y(this,"DesignSizeFunction",(function(e,t){var n={result:!1,multiplier:0},r=0;if(!t.values||0==t.values.length)throw"values missing in formula";return e.sides&&!(0,a.isEmpty)(e.sides)&&e.sides.flatMap((function(e){return e.get("areas").models})).forEach((function(t){var n=e.items.filter((function(e){return e.get("areas").filter((function(e){return e.get("colorID")==t.getColorID()&&e.get("sideID")==t.getSideID()&&e.get("areaID")==t.get("areaID")})).length>0})),i=e.sides.find((function(e){return e.get("sideID")==t.getSideID()}));if(null!=i&&i.get("ppcm")>0){var a=n.map((function(e){var t=JSON.parse(e.get("json"))[1],n=t.data.transformsData.dimensions.width,r=t.data.transformsData.dimensions.height,i=t.data.transformsData.position.x,a=t.data.transformsData.position.y;return new s.Rectangle(n,r,i,a)}));r+=(0,s.rectanglesDistinctArea)(a,i.get("ppcm")),console.log("itemsArea",r)}})),r>0&&b(t.operator)(r,t.values[0])&&(n.result=!0,n.multiplier+=1),n})),y(this,"DesignTextLengthFunction",(function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";var r=0;return e.items.forEach((function(e){var t=JSON.parse(e.get("json"))[1],n=t.data.isText,i=t.data.isTextArea,o=t.data.isTextOnPath,s=t.data.isTextArt,u="";null!=n&&n?u=t.content.toString():null!=i&&i||null!=o&&o?u=t.data.text.toString():null!=s&&s&&(u=e.get("textArt").get("text")),(0,a.isEmpty)(u)||(r+=u.trim().split(" ").join("").replace(/(\r\n|\n|\r)/gm,"").length)})),b(t.operator)(r,t.values[0])&&(n.result=!0,n.multiplier=1),n})),y(this,"CustomizedSidesFunction",(function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";var r=0;return e.sides.forEach((function(t){e.items.filter((function(e){return e.get("areas").filter((function(e){return e.get("sideID")==t.get("sideID")})).length>0})).length>0&&r++})),e.sides.length>0&&b(t.operator)(r,t.values[0])&&(n.result=!0,n.multiplier=1),n})),y(this,"TextLengthFunction",(function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";return e.items.forEach((function(e){var r=JSON.parse(e.get("json"))[1],i=r.data.isText,o=r.data.isTextArea,s=r.data.isTextOnPath,u=r.data.isTextArt,c="";null!=i&&i?c=r.content.toString():null!=o&&o||null!=s&&s?c=r.data.text.toString():null!=u&&u&&(c=e.get("textArt").get("text")),!(0,a.isEmpty)(c)&&b(t.operator)(c.trim().split(" ").join("").length,t.values[0])&&(n.result=!0,n.multiplier+=1)})),n})),y(this,"conditionsToConditionsGroupByFormula",(function(e){var t=o().groupBy(e,(function(e){return null!==e&&void 0!==e&&e.formula?null===e||void 0===e?void 0:e.formula:""}));return Object.keys(t).map((function(e){var n;return{formula:e,position:null===(n=t[e][0])||void 0===n?void 0:n.position,conditions:t[e]}}))})),y(this,"getFunctionName",(function(e,t){try{return null===e||void 0===e?void 0:e.filter((function(e){return e.propertyID==t.propertyID})).map((function(e){return e.functionName}))[0]}catch(n){throw"function or operator don't exist in dictionaries"}})),y(this,"clearPricings",(function(){d.pricing=void 0,d.pricings=void 0})),y(this,"GetContextForRule",(function(e,t,n){var r={sides:[],items:[]},i=n.get("designItems").toArray(),s=[],u="",h=t.get("colors").find((function(e){return e.get("colorID")==d.colorID}));if(null==h||void 0==h)return r;u=h.get("name");var f=h.get("sides");r.sides=[],0==e.targets.length?(s=i,r.sides=f.toArray()):e.targets.forEach((function(e){var n=!1,o=null,h=i;if((0,a.isEmpty)(e.color)||e.color.toLowerCase()==u.toLowerCase()){var d,p=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(f.toArray());try{for(p.s();!(d=p.n()).done;){var g=d.value;-1===r.sides.indexOf(g)&&r.sides.push(g)}}catch(_){p.e(_)}finally{p.f()}}else n=!0;if(!(0,a.isEmpty)(e.side))if(null!=(o=f.find((function(t){return t.get("name").toLowerCase()==e.side.toLowerCase()})))&&o.get("areas")){var v=[];o.get("areas").forEach((function(e){v=v.concat(i.filter((function(n){return function(e,n){return e.get("areas").filter((function(e){return e.get("modelID")==t.get("modelID")&&e.get("colorID")==n.getSide().getColor().get("colorID")&&e.get("sideID")==n.getSide().get("sideID")&&e.get("areaID")==n.get("areaID")})).length>0}(n,e)})))})),h=v}else n=!0;if(!(0,a.isEmpty)(e.area)){var m=[],y=[];f.forEach((function(t){y=y.concat(t.get("areas").filter((function(t){return t.get("name").toLowerCase()==e.area.toLowerCase()})))})),y.forEach((function(e){m=c(h.filter((function(n){return n.get("areas").filter((function(n){return n.get("modelID")==t.get("modelID")&&n.get("colorID")==e.getSide().getColor().get("colorID")&&n.get("sideID")==e.getSide().get("sideID")&&n.get("areaID")==e.get("areaID")})).length>0})))})),h=m}n||(s=[].concat(c(s),c(h)))})),e.elementID==_.AllTexts?s=s.filter((function(e){var t=JSON.parse(e.get("json"))[1];return null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt})):e.elementID==_.AllElementsNoTemplateItems?s=s.filter((function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement})):e.elementID==_.AllCustomText?s=s.filter((function(e){var t=JSON.parse(e.get("json"))[1];return null!=t.data.isTemplateElement&&!t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)||null==t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)})):e.elementID==_.AllImages?s=s.filter((function(e){return e.get("imageID")>0})).filter((function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement})):e.elementID==_.UploadedImages?s=s.filter((function(e){if(e.get("imageID")>0){if(e.get("imageVisitorCode")||e.get("imageCustomerCode"))return!0;if(e.get("imageVisitorID")>0||e.get("imageCustomerID")>0)return!0}return!1})).filter((function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement})):e.elementID==_.ClipartImages?s=s.filter((function(e){if(e.get("imageID")>0){if(e.get("imageVisitorCode")&&e.get("imageCustomerCode"))return!0;if(e.get("imageVisitorID")<=0&&e.get("imageCustomerID")<=0)return!0}return!1})).filter((function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement})):e.elementID==_.TemplatesImages?s=s.filter((function(e){return e.get("imageID")>0})).filter((function(e){return JSON.parse(e.get("json"))[1].data.isTemplateElement})):e.elementID==_.SingleElement?s=s.filter((function(t){return t.get("name").toLowerCase()==e.elementTitle.toLowerCase()})):e.elementID==_.AllTextArt?s=s.filter((function(e){var t=JSON.parse(e.get("json"))[1];return null!=t.data.isTextArt&&t.data.isTextArt})):e.elementID==_.AllCustomTextArt||(e.elementID==_.AllCustomElements?s=s.filter((function(e){var t=JSON.parse(e.get("json"))[1];return e.get("imageID")>0&&!t.data.isTemplateElement&&(e.get("imageVisitorCode")||e.get("imageCustomerCode")||e.get("imageVisitorID")>0||e.get("imageCustomerID")>0)||null!=t.data.isTemplateElement&&!t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)||null==t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)})):e.elementID==_.UploadedImages&&(s=s.filter((function(e){if(e.get("imageID")>0){if(e.get("imageVisitorCode")||e.get("imageCustomerCode"))return!0;if(e.get("imageVisitorID")>0||e.get("imageCustomerID")>0)return!0}return!1}))));var p=o().groupBy(s,(function(e){return e.get("itemGuid")}));return r.items=Object.keys(p).map((function(e){return p[e][0]})),r})),y(this,"isUsingAmountOfColors",(function(e){return d.pricing=d.getPricing(e),!!d.pricing&&void 0!=d.pricing.rules.find((function(e){return 10==e.propertyID}))})),y(this,"getPremiumPhotosPrice",(function(e,t){for(var n=[],r=0,i=function(){var i,o=e.get("designItems").at(a);if(o.get("imageID")>0&&o.get("imagePrice")>0&&null!=o.get("providerImageID")&&(null===(i=o.get("providerImageID"))||void 0===i?void 0:i.length)>0&&!n.find((function(e){return e.get("providerImageID")===o.get("providerImageID")}))){n.push(o);var s=o.get("imagePrice");s=d.product.get("hasAdditionalFeeOnImagesProvider")||null===o.get("applyImagePriceForQuantity")||o.get("applyImagePriceForQuantity")?o.get("imagePrice")*t:o.get("imagePrice"),r+=s}},a=0;a<e.get("designItems").length;a++)i();return Logger.info("Premium photo price: ",r),r})),y(this,"getImagePrice",(function(e,t){for(var n=0,r=0;r<e.get("designItems").length;r++){var i=e.get("designItems").at(r);i.get("imageID")>0&&i.get("imagePrice")>0&&!i.get("providerImageID")&&(i.get("imagePrice"),n+=i.get("imagePrice")*t)}return Logger.info("Image price: ",n),n})),y(this,"getMatchedConditions",(function(e,t,n){if(d.pricing=d.getPricing(e),!d.pricing)return[];var r=[];return d.pricing.rules.forEach((function(i){if(n||1!=i.priceType){var a=d.GetContextForRule(i,d.product,e);if(0!==a.sides.length){var o=d.conditionsToConditionsGroupByFormula(i.conditions),s={};try{o.sort((function(e,t){return e&&t&&e.position>t.position?1:-1})).forEach((function(e){var n=JSON.parse(e.formula);if(!n.operator)throw"operator missing in formula";var o=d.getFunctionName(d.properties,i)+"Function",u=d[o](a,n);if(u.result){var c=e.conditions.filter((function(e){return e.quantity<=t})).sort((function(e,t){return t.quantity-e.quantity}))[0];if(null!=c){var l=c.priceToAdd,h=i.isSetupPrice,f=u.multiplier,p=i.priceType;r.push({priceToAdd:l,isSetupPrice:h,multiplier:f,priceType:p});var g=!u.items||0==u.items.length;if(!i.allMatchType&&u.items&&(a.items=u.items),!i.allMatchType&&g)throw s}}}))}catch(u){if(u!==s)throw u}}}})),r})),y(this,"calculate",(function(e,t){var n=d.getPremiumPhotosPrice(e,t);return n+=d.getImagePrice(e,t),d.getMatchedConditions(e,t,!1).forEach((function(e){var r=e.priceToAdd*e.multiplier;e.isSetupPrice||(r*=t),n+=r})),Logger.info("Total custom price: ",n),n})),y(this,"getPricingAdditionalInfo",(function(e){if(e){var t=d.getPricing(e);if(t)return{description:t.description,priceDescriptionEnabled:t.priceDescriptionEnabled,infoPricingText:t.infoPricingText,priceStructure:t.priceStructure}}})),void 0!==t&&(this.config.apiUrl=t+"graphql"),void 0!==n&&(this.config.token=n),void 0!==r&&(this.config.isOwin=r),u&&(this.config.cloudFlareApiUrl=u+"graphql"),h&&(this.config.clientLang=h)}))},"../../utils/rectangle.ts":function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{Rectangle:function(){return u},rectangleArea:function(){return l},rectanglesDistinctArea:function(){return h}});var u=o((function e(t,n,r,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"maxX",(function(){return a.x+a.width})),s(this,"maxY",(function(){return a.y+a.height})),s(this,"area",(function(){return a.width*a.height})),s(this,"areaPPCM",(function(e){return a.width/e*(a.height/e)})),s(this,"equals",(function(e){return a.width==e.width&&a.height==e.height&&a.x==e.x&&a.y==e.y})),this.width=t,this.height=n,this.x=r,this.y=i})),c=function(e,t,n){return n.indexOf(e)===t},l=function(e){return e.width*e.height},h=function(e,t){var n=e.reduce((function(e,t){return[].concat(r(e),[t.x,t.maxX()])}),[]).filter(c).sort((function(e,t){return e-t})),i=r(e);n.forEach((function(e){var t=i.filter((function(t){return function(e,t){return e.x<t&&e.maxX()>t}(t,e)})),n=i.filter((function(t){return function(e,t){return e.x>=t||e.maxX()<=t}(t,e)})),a=t.map((function(t){return function(e,t){return t<=e.x||t>=e.x+e.width?[e]:[new u(t-e.x,e.height,e.x,e.y),new u(e.maxX()-t,e.height,t,e.y)]}(t,e)})).reduce((function(e,t){return e.concat(t)}),[]);i=[].concat(r(n),r(a))}));var a=i.reduce((function(e,t){return[].concat(r(e),[t.y,t.maxY()])}),[]).filter(c).sort((function(e,t){return e-t})),o=r(i);return a.forEach((function(e){var t=o.filter((function(t){return function(e,t){return e.y<t&&e.maxY()>t}(t,e)})),n=o.filter((function(t){return function(e,t){return e.y>=t||e.maxY()<=t}(t,e)})),i=t.map((function(t){return function(e,t){return t<=e.y||t>=e.y+e.height?[e]:[new u(e.width,t-e.y,e.x,e.y),new u(e.width,e.maxY()-t,e.x,t)]}(t,e)})).reduce((function(e,t){return e.concat(t)}),[]);o=[].concat(r(n),r(i))})),o.filter((function(e,t,n){return n.findIndex((function(t){return t.equals(e)}))==t})).reduce((function(e,n){return t?e+n.areaPPCM(t):e+n.area()}),0)}},"../../../node_modules/gl-matrix/esm/common.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ARRAY_TYPE:function(){return i},EPSILON:function(){return r},RANDOM:function(){return a},equals:function(){return c},setMatrixArrayType:function(){return o},toRadian:function(){return u}});var r=1e-6,i="undefined"!==typeof Float32Array?Float32Array:Array,a=Math.random;function o(e){i=e}var s=Math.PI/180;function u(e){return e*s}function c(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},"../../../node_modules/gl-matrix/esm/mat4.js":function(e,t,n){"use strict";n.r(t),n.d(t,{add:function(){return q},adjoint:function(){return f},clone:function(){return a},copy:function(){return o},create:function(){return i},determinant:function(){return d},equals:function(){return J},exactEquals:function(){return Q},frob:function(){return W},fromQuat:function(){return D},fromQuat2:function(){return E},fromRotation:function(){return k},fromRotationTranslation:function(){return A},fromRotationTranslationScale:function(){return O},fromRotationTranslationScaleOrigin:function(){return P},fromScaling:function(){return w},fromTranslation:function(){return x},fromValues:function(){return s},fromXRotation:function(){return S},fromYRotation:function(){return C},fromZRotation:function(){return M},frustum:function(){return B},getRotation:function(){return L},getScaling:function(){return I},getTranslation:function(){return T},identity:function(){return c},invert:function(){return h},lookAt:function(){return H},mul:function(){return $},multiply:function(){return p},multiplyScalar:function(){return K},multiplyScalarAndAdd:function(){return X},ortho:function(){return U},orthoNO:function(){return F},orthoZO:function(){return V},perspective:function(){return R},perspectiveFromFieldOfView:function(){return z},perspectiveNO:function(){return N},perspectiveZO:function(){return j},rotate:function(){return m},rotateX:function(){return y},rotateY:function(){return _},rotateZ:function(){return b},scale:function(){return v},set:function(){return u},str:function(){return Y},sub:function(){return ee},subtract:function(){return Z},targetTo:function(){return G},translate:function(){return g},transpose:function(){return l}});var r=n("../../../node_modules/gl-matrix/esm/common.js");function i(){var e=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function a(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,n,i,a,o,s,u,c,l,h,f,d,p,g,v){var m=new r.ARRAY_TYPE(16);return m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=a,m[5]=o,m[6]=s,m[7]=u,m[8]=c,m[9]=l,m[10]=h,m[11]=f,m[12]=d,m[13]=p,m[14]=g,m[15]=v,m}function u(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,g,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=c,e[9]=l,e[10]=h,e[11]=f,e[12]=d,e[13]=p,e[14]=g,e[15]=v,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function h(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],p=t[12],g=t[13],v=t[14],m=t[15],y=n*s-r*o,_=n*u-i*o,b=n*c-a*o,x=r*u-i*s,w=r*c-a*s,k=i*c-a*u,S=l*g-h*p,C=l*v-f*p,M=l*m-d*p,A=h*v-f*g,E=h*m-d*g,T=f*m-d*v,I=y*T-_*E+b*A+x*M-w*C+k*S;return I?(I=1/I,e[0]=(s*T-u*E+c*A)*I,e[1]=(i*E-r*T-a*A)*I,e[2]=(g*k-v*w+m*x)*I,e[3]=(f*w-h*k-d*x)*I,e[4]=(u*M-o*T-c*C)*I,e[5]=(n*T-i*M+a*C)*I,e[6]=(v*b-p*k-m*_)*I,e[7]=(l*k-f*b+d*_)*I,e[8]=(o*E-s*M+c*S)*I,e[9]=(r*M-n*E-a*S)*I,e[10]=(p*w-g*b+m*y)*I,e[11]=(h*b-l*w-d*y)*I,e[12]=(s*C-o*A-u*S)*I,e[13]=(n*A-r*C+i*S)*I,e[14]=(g*_-p*x-v*y)*I,e[15]=(l*x-h*_+f*y)*I,e):null}function f(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],p=t[12],g=t[13],v=t[14],m=t[15];return e[0]=s*(f*m-d*v)-h*(u*m-c*v)+g*(u*d-c*f),e[1]=-(r*(f*m-d*v)-h*(i*m-a*v)+g*(i*d-a*f)),e[2]=r*(u*m-c*v)-s*(i*m-a*v)+g*(i*c-a*u),e[3]=-(r*(u*d-c*f)-s*(i*d-a*f)+h*(i*c-a*u)),e[4]=-(o*(f*m-d*v)-l*(u*m-c*v)+p*(u*d-c*f)),e[5]=n*(f*m-d*v)-l*(i*m-a*v)+p*(i*d-a*f),e[6]=-(n*(u*m-c*v)-o*(i*m-a*v)+p*(i*c-a*u)),e[7]=n*(u*d-c*f)-o*(i*d-a*f)+l*(i*c-a*u),e[8]=o*(h*m-d*g)-l*(s*m-c*g)+p*(s*d-c*h),e[9]=-(n*(h*m-d*g)-l*(r*m-a*g)+p*(r*d-a*h)),e[10]=n*(s*m-c*g)-o*(r*m-a*g)+p*(r*c-a*s),e[11]=-(n*(s*d-c*h)-o*(r*d-a*h)+l*(r*c-a*s)),e[12]=-(o*(h*v-f*g)-l*(s*v-u*g)+p*(s*f-u*h)),e[13]=n*(h*v-f*g)-l*(r*v-i*g)+p*(r*f-i*h),e[14]=-(n*(s*v-u*g)-o*(r*v-i*g)+p*(r*u-i*s)),e[15]=n*(s*f-u*h)-o*(r*f-i*h)+l*(r*u-i*s),e}function d(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],d=e[12],p=e[13],g=e[14],v=e[15];return(t*o-n*a)*(h*v-f*g)-(t*s-r*a)*(l*v-f*p)+(t*u-i*a)*(l*g-h*p)+(n*s-r*o)*(c*v-f*d)-(n*u-i*o)*(c*g-h*d)+(r*u-i*s)*(c*p-l*d)}function p(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],g=t[12],v=t[13],m=t[14],y=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*h+w*g,e[1]=_*i+b*u+x*f+w*v,e[2]=_*a+b*c+x*d+w*m,e[3]=_*o+b*l+x*p+w*y,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*h+w*g,e[5]=_*i+b*u+x*f+w*v,e[6]=_*a+b*c+x*d+w*m,e[7]=_*o+b*l+x*p+w*y,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*h+w*g,e[9]=_*i+b*u+x*f+w*v,e[10]=_*a+b*c+x*d+w*m,e[11]=_*o+b*l+x*p+w*y,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*h+w*g,e[13]=_*i+b*u+x*f+w*v,e[14]=_*a+b*c+x*d+w*m,e[15]=_*o+b*l+x*p+w*y,e}function g(e,t,n){var r,i,a,o,s,u,c,l,h,f,d,p,g=n[0],v=n[1],m=n[2];return t===e?(e[12]=t[0]*g+t[4]*v+t[8]*m+t[12],e[13]=t[1]*g+t[5]*v+t[9]*m+t[13],e[14]=t[2]*g+t[6]*v+t[10]*m+t[14],e[15]=t[3]*g+t[7]*v+t[11]*m+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=r*g+s*v+h*m+t[12],e[13]=i*g+u*v+f*m+t[13],e[14]=a*g+c*v+d*m+t[14],e[15]=o*g+l*v+p*m+t[15]),e}function v(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function m(e,t,n,i){var a,o,s,u,c,l,h,f,d,p,g,v,m,y,_,b,x,w,k,S,C,M,A,E,T=i[0],I=i[1],L=i[2],O=Math.hypot(T,I,L);return O<r.EPSILON?null:(T*=O=1/O,I*=O,L*=O,a=Math.sin(n),s=1-(o=Math.cos(n)),u=t[0],c=t[1],l=t[2],h=t[3],f=t[4],d=t[5],p=t[6],g=t[7],v=t[8],m=t[9],y=t[10],_=t[11],b=T*T*s+o,x=I*T*s+L*a,w=L*T*s-I*a,k=T*I*s-L*a,S=I*I*s+o,C=L*I*s+T*a,M=T*L*s+I*a,A=I*L*s-T*a,E=L*L*s+o,e[0]=u*b+f*x+v*w,e[1]=c*b+d*x+m*w,e[2]=l*b+p*x+y*w,e[3]=h*b+g*x+_*w,e[4]=u*k+f*S+v*C,e[5]=c*k+d*S+m*C,e[6]=l*k+p*S+y*C,e[7]=h*k+g*S+_*C,e[8]=u*M+f*A+v*E,e[9]=c*M+d*A+m*E,e[10]=l*M+p*A+y*E,e[11]=h*M+g*A+_*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function y(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+h*r,e[7]=u*i+f*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=h*i-s*r,e[11]=f*i-u*r,e}function _(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-h*r,e[3]=u*i-f*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+h*i,e[11]=u*r+f*i,e}function b(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+h*r,e[3]=u*i+f*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=h*i-s*r,e[7]=f*i-u*r,e}function x(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function w(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function k(e,t,n){var i,a,o,s=n[0],u=n[1],c=n[2],l=Math.hypot(s,u,c);return l<r.EPSILON?null:(s*=l=1/l,u*=l,c*=l,i=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=s*s*o+a,e[1]=u*s*o+c*i,e[2]=c*s*o-u*i,e[3]=0,e[4]=s*u*o-c*i,e[5]=u*u*o+a,e[6]=c*u*o+s*i,e[7]=0,e[8]=s*c*o+u*i,e[9]=u*c*o-s*i,e[10]=c*c*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function S(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function C(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,c=a+a,l=r*s,h=r*u,f=r*c,d=i*u,p=i*c,g=a*c,v=o*s,m=o*u,y=o*c;return e[0]=1-(d+g),e[1]=h+y,e[2]=f-m,e[3]=0,e[4]=h-y,e[5]=1-(l+g),e[6]=p+v,e[7]=0,e[8]=f+m,e[9]=p-v,e[10]=1-(l+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function E(e,t){var n=new r.ARRAY_TYPE(3),i=-t[0],a=-t[1],o=-t[2],s=t[3],u=t[4],c=t[5],l=t[6],h=t[7],f=i*i+a*a+o*o+s*s;return f>0?(n[0]=2*(u*s+h*i+c*o-l*a)/f,n[1]=2*(c*s+h*a+l*i-u*o)/f,n[2]=2*(l*s+h*o+u*a-c*i)/f):(n[0]=2*(u*s+h*i+c*o-l*a),n[1]=2*(c*s+h*a+l*i-u*o),n[2]=2*(l*s+h*o+u*a-c*i)),A(e,t,n),e}function T(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function I(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,s),e[2]=Math.hypot(u,c,l),e}function L(e,t){var n=new r.ARRAY_TYPE(3);I(n,t);var i=1/n[0],a=1/n[1],o=1/n[2],s=t[0]*i,u=t[1]*a,c=t[2]*o,l=t[4]*i,h=t[5]*a,f=t[6]*o,d=t[8]*i,p=t[9]*a,g=t[10]*o,v=s+h+g,m=0;return v>0?(m=2*Math.sqrt(v+1),e[3]=.25*m,e[0]=(f-p)/m,e[1]=(d-c)/m,e[2]=(u-l)/m):s>h&&s>g?(m=2*Math.sqrt(1+s-h-g),e[3]=(f-p)/m,e[0]=.25*m,e[1]=(u+l)/m,e[2]=(d+c)/m):h>g?(m=2*Math.sqrt(1+h-s-g),e[3]=(d-c)/m,e[0]=(u+l)/m,e[1]=.25*m,e[2]=(f+p)/m):(m=2*Math.sqrt(1+g-s-h),e[3]=(u-l)/m,e[0]=(d+c)/m,e[1]=(f+p)/m,e[2]=.25*m),e}function O(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,d=i*l,p=a*c,g=a*l,v=o*l,m=s*u,y=s*c,_=s*l,b=r[0],x=r[1],w=r[2];return e[0]=(1-(p+v))*b,e[1]=(f+_)*b,e[2]=(d-y)*b,e[3]=0,e[4]=(f-_)*x,e[5]=(1-(h+v))*x,e[6]=(g+m)*x,e[7]=0,e[8]=(d+y)*w,e[9]=(g-m)*w,e[10]=(1-(h+p))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function P(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],u=t[3],c=a+a,l=o+o,h=s+s,f=a*c,d=a*l,p=a*h,g=o*l,v=o*h,m=s*h,y=u*c,_=u*l,b=u*h,x=r[0],w=r[1],k=r[2],S=i[0],C=i[1],M=i[2],A=(1-(g+m))*x,E=(d+b)*x,T=(p-_)*x,I=(d-b)*w,L=(1-(f+m))*w,O=(v+y)*w,P=(p+_)*k,D=(v-y)*k,B=(1-(f+g))*k;return e[0]=A,e[1]=E,e[2]=T,e[3]=0,e[4]=I,e[5]=L,e[6]=O,e[7]=0,e[8]=P,e[9]=D,e[10]=B,e[11]=0,e[12]=n[0]+S-(A*S+I*C+P*M),e[13]=n[1]+C-(E*S+L*C+D*M),e[14]=n[2]+M-(T*S+O*C+B*M),e[15]=1,e}function D(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,d=i*s,p=i*u,g=a*o,v=a*s,m=a*u;return e[0]=1-h-p,e[1]=l+m,e[2]=f-v,e[3]=0,e[4]=l-m,e[5]=1-c-p,e[6]=d+g,e[7]=0,e[8]=f+v,e[9]=d-g,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function B(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}function N(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}var R=N;function j(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=i*a,e[14]=i*r*a):(e[10]=-1,e[14]=-r),e}function z(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function F(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1,e}var U=F;function V(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=a*c,e[15]=1,e}function H(e,t,n,i){var a,o,s,u,l,h,f,d,p,g,v=t[0],m=t[1],y=t[2],_=i[0],b=i[1],x=i[2],w=n[0],k=n[1],S=n[2];return Math.abs(v-w)<r.EPSILON&&Math.abs(m-k)<r.EPSILON&&Math.abs(y-S)<r.EPSILON?c(e):(f=v-w,d=m-k,p=y-S,a=b*(p*=g=1/Math.hypot(f,d,p))-x*(d*=g),o=x*(f*=g)-_*p,s=_*d-b*f,(g=Math.hypot(a,o,s))?(a*=g=1/g,o*=g,s*=g):(a=0,o=0,s=0),u=d*s-p*o,l=p*a-f*s,h=f*o-d*a,(g=Math.hypot(u,l,h))?(u*=g=1/g,l*=g,h*=g):(u=0,l=0,h=0),e[0]=a,e[1]=u,e[2]=f,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=s,e[9]=h,e[10]=p,e[11]=0,e[12]=-(a*v+o*m+s*y),e[13]=-(u*v+l*m+h*y),e[14]=-(f*v+d*m+p*y),e[15]=1,e)}function G(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],u=r[1],c=r[2],l=i-n[0],h=a-n[1],f=o-n[2],d=l*l+h*h+f*f;d>0&&(l*=d=1/Math.sqrt(d),h*=d,f*=d);var p=u*f-c*h,g=c*l-s*f,v=s*h-u*l;return(d=p*p+g*g+v*v)>0&&(p*=d=1/Math.sqrt(d),g*=d,v*=d),e[0]=p,e[1]=g,e[2]=v,e[3]=0,e[4]=h*v-f*g,e[5]=f*p-l*v,e[6]=l*g-h*p,e[7]=0,e[8]=l,e[9]=h,e[10]=f,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function Y(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function W(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function q(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Z(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function K(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function X(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Q(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function J(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],_=t[0],b=t[1],x=t[2],w=t[3],k=t[4],S=t[5],C=t[6],M=t[7],A=t[8],E=t[9],T=t[10],I=t[11],L=t[12],O=t[13],P=t[14],D=t[15];return Math.abs(n-_)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-b)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-x)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-w)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-k)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(u-S)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-C)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(l-M)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(h-A)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(d-T)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-I)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(g-L)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(v-O)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-D)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(D))}var $=p,ee=Z},"../../../node_modules/gl-matrix/esm/vec3.js":function(e,t,n){"use strict";n.r(t),n.d(t,{add:function(){return l},angle:function(){return z},bezier:function(){return L},ceil:function(){return p},clone:function(){return a},copy:function(){return u},create:function(){return i},cross:function(){return E},dist:function(){return q},distance:function(){return x},div:function(){return W},divide:function(){return d},dot:function(){return A},equals:function(){return H},exactEquals:function(){return V},floor:function(){return g},forEach:function(){return Q},fromValues:function(){return s},hermite:function(){return I},inverse:function(){return C},len:function(){return K},length:function(){return o},lerp:function(){return T},max:function(){return m},min:function(){return v},mul:function(){return Y},multiply:function(){return f},negate:function(){return S},normalize:function(){return M},random:function(){return O},rotateX:function(){return N},rotateY:function(){return R},rotateZ:function(){return j},round:function(){return y},scale:function(){return _},scaleAndAdd:function(){return b},set:function(){return c},sqrDist:function(){return Z},sqrLen:function(){return X},squaredDistance:function(){return w},squaredLength:function(){return k},str:function(){return U},sub:function(){return G},subtract:function(){return h},transformMat3:function(){return D},transformMat4:function(){return P},transformQuat:function(){return B},zero:function(){return F}});var r=n("../../../node_modules/gl-matrix/esm/common.js");function i(){var e=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function o(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function s(e,t,n){var i=new r.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=n,i}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function c(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function l(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function h(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function f(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function d(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function p(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function g(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function v(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function m(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function y(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function _(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function b(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function x(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function w(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function k(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function C(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function M(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function A(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function E(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function T(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function I(e,t,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),l=o*(3-2*a);return e[0]=t[0]*s+n[0]*u+r[0]*c+i[0]*l,e[1]=t[1]*s+n[1]*u+r[1]*c+i[1]*l,e[2]=t[2]*s+n[2]*u+r[2]*c+i[2]*l,e}function L(e,t,n,r,i,a){var o=1-a,s=o*o,u=a*a,c=s*o,l=3*a*s,h=3*u*o,f=u*a;return e[0]=t[0]*c+n[0]*l+r[0]*h+i[0]*f,e[1]=t[1]*c+n[1]*l+r[1]*h+i[1]*f,e[2]=t[2]*c+n[2]*l+r[2]*h+i[2]*f,e}function O(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=i*t,e}function P(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function D(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function B(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],c=t[2],l=i*c-a*u,h=a*s-r*c,f=r*u-i*s,d=i*f-a*h,p=a*l-r*f,g=r*h-i*l,v=2*o;return l*=v,h*=v,f*=v,d*=2,p*=2,g*=2,e[0]=s+l+d,e[1]=u+h+p,e[2]=c+f+g,e}function N(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function R(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function j(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function z(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(a*a+o*o+s*s),c=u&&A(e,t)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function F(e){return e[0]=0,e[1]=0,e[2]=0,e}function U(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function V(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function H(e,t){var n=e[0],i=e[1],a=e[2],o=t[0],s=t[1],u=t[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))}var G=h,Y=f,W=d,q=x,Z=w,K=o,X=k,Q=function(){var e=i();return function(t,n,r,i,a,o){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}()},"../../../node_modules/is-buffer/index.js":function(e){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},"../../../node_modules/lodash/lodash.js":function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,c=32,l=64,h=128,f=256,d=1/0,p=9007199254740991,g=NaN,v=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",f]],y="[object Arguments]",_="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",k="[object Function]",S="[object GeneratorFunction]",C="[object Map]",M="[object Number]",A="[object Object]",E="[object Promise]",T="[object RegExp]",I="[object Set]",L="[object String]",O="[object Symbol]",P="[object WeakMap]",D="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",j="[object Int8Array]",z="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",H="[object Uint16Array]",G="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(Z.source),Q=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Me="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Le="['\u2019]",Oe="["+Se+"]",Pe="["+Ie+"]",De="["+Ce+"]",Be="\\d+",Ne="["+Me+"]",Re="["+Ae+"]",je="[^"+Se+Ie+Be+Me+Ae+Ee+"]",ze="\\ud83c[\\udffb-\\udfff]",Fe="[^"+Se+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Ee+"]",Ge="\\u200d",Ye="(?:"+Re+"|"+je+")",We="(?:"+He+"|"+je+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+De+"|"+ze+")?",Xe="["+Te+"]?",Qe=Xe+Ke+"(?:"+Ge+"(?:"+[Fe,Ue,Ve].join("|")+")"+Xe+Ke+")*",Je="(?:"+[Ne,Ue,Ve].join("|")+")"+Qe,$e="(?:"+[Fe+De+"?",De,Ue,Ve,Oe].join("|")+")",et=RegExp(Le,"g"),tt=RegExp(De,"g"),nt=RegExp(ze+"(?="+ze+")|"+$e+Qe,"g"),rt=RegExp([He+"?"+Re+"+"+qe+"(?="+[Pe,He,"$"].join("|")+")",We+"+"+Ze+"(?="+[Pe,He+Ye,"$"].join("|")+")",He+"?"+Ye+"+"+qe,He+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,Je].join("|"),"g"),it=RegExp("["+Ge+Se+Ce+Te+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,ut={};ut[N]=ut[R]=ut[j]=ut[z]=ut[F]=ut[U]=ut[V]=ut[H]=ut[G]=!0,ut[y]=ut[_]=ut[D]=ut[b]=ut[B]=ut[x]=ut[w]=ut[k]=ut[C]=ut[M]=ut[A]=ut[T]=ut[I]=ut[L]=ut[P]=!1;var ct={};ct[y]=ct[_]=ct[D]=ct[B]=ct[b]=ct[x]=ct[N]=ct[R]=ct[j]=ct[z]=ct[F]=ct[C]=ct[M]=ct[A]=ct[T]=ct[I]=ct[L]=ct[O]=ct[U]=ct[V]=ct[H]=ct[G]=!0,ct[w]=ct[k]=ct[P]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,ft=parseInt,dt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=dt||pt||Function("return this")(),vt=t&&!t.nodeType&&t,mt=vt&&e&&!e.nodeType&&e,yt=mt&&mt.exports===vt,_t=yt&&dt.process,bt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||_t&&_t.binding&&_t.binding("util")}catch(t){}}(),xt=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,kt=bt&&bt.isMap,St=bt&&bt.isRegExp,Ct=bt&&bt.isSet,Mt=bt&&bt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Pt(e,t){return!(null==e||!e.length)&&Ht(e,t,0)>-1}function Dt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=qt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Ht(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,Yt,n)}function Gt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Yt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:g}function qt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Xt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function $t(e){return function(t){return e(t)}}function en(e,t){return Bt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var an=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+lt[e]}function un(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return un(e)?function(e){for(var t=nt.lastIndex=0;nt.test(e);)++t;return t}(e):Ft(e)}function gn(e){return un(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yn=function e(t){var n=(t=null==t?gt:yn.defaults(gt.Object(),t,yn.pick(gt,ot))).Array,r=t.Date,se=t.Error,Se=t.Function,Ce=t.Math,Me=t.Object,Ae=t.RegExp,Ee=t.String,Te=t.TypeError,Ie=n.prototype,Le=Se.prototype,Oe=Me.prototype,Pe=t["__core-js_shared__"],De=Le.toString,Be=Oe.hasOwnProperty,Ne=0,Re=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),je=Oe.toString,ze=De.call(Me),Fe=gt._,Ue=Ae("^"+De.call(Be).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=yt?t.Buffer:i,He=t.Symbol,Ge=t.Uint8Array,Ye=Ve?Ve.allocUnsafe:i,We=ln(Me.getPrototypeOf,Me),qe=Me.create,Ze=Oe.propertyIsEnumerable,Ke=Ie.splice,Xe=He?He.isConcatSpreadable:i,Qe=He?He.iterator:i,Je=He?He.toStringTag:i,$e=function(){try{var e=ha(Me,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,it=r&&r.now!==gt.Date.now&&r.now,lt=t.setTimeout!==gt.setTimeout&&t.setTimeout,dt=Ce.ceil,pt=Ce.floor,vt=Me.getOwnPropertySymbols,mt=Ve?Ve.isBuffer:i,_t=t.isFinite,bt=Ie.join,Ft=ln(Me.keys,Me),Zt=Ce.max,_n=Ce.min,bn=r.now,xn=t.parseInt,wn=Ce.random,kn=Ie.reverse,Sn=ha(t,"DataView"),Cn=ha(t,"Map"),Mn=ha(t,"Promise"),An=ha(t,"Set"),En=ha(t,"WeakMap"),Tn=ha(Me,"create"),In=En&&new En,Ln={},On=Ra(Sn),Pn=Ra(Cn),Dn=Ra(Mn),Bn=Ra(An),Nn=Ra(En),Rn=He?He.prototype:i,jn=Rn?Rn.valueOf:i,zn=Rn?Rn.toString:i;function Fn(e){if(ts(e)&&!Go(e)&&!(e instanceof Gn)){if(e instanceof Hn)return e;if(Be.call(e,"__wrapped__"))return ja(e)}return new Hn(e)}var Un=function(){function e(){}return function(t){if(!es(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Xn(e,t){var n=Go(e),r=!n&&Ho(e),i=!n&&!r&&Zo(e),a=!n&&!r&&!i&&cs(e),o=n||r||i||a,s=o?Qt(e.length,Ee):[],u=s.length;for(var c in e)!t&&!Be.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ya(c,u))||s.push(c);return s}function Qn(e){var t=e.length;return t?e[Zr(0,t-1)]:i}function Jn(e,t){return Da(Ti(e),sr(t,0,e.length))}function $n(e){return Da(Ti(e))}function er(e,t,n){(n!==i&&!Fo(e[t],n)||n===i&&!(t in e))&&ar(e,t,n)}function tr(e,t,n){var r=e[t];Be.call(e,t)&&Fo(r,n)&&(n!==i||t in e)||ar(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Fo(e[n][0],t))return n;return-1}function rr(e,t,n,r){return fr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ir(e,t){return e&&Ii(t,Ls(t),e)}function ar(e,t,n){"__proto__"==t&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Ms(e,t[r]);return o}function sr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,a,o){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!es(e))return e;var h=Go(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return Ti(e,s)}else{var f=pa(e),d=f==k||f==S;if(Zo(e))return ki(e,u);if(f==A||f==y||d&&!a){if(s=c||d?{}:va(e),!u)return c?function(e,t){return Ii(e,da(e),t)}(e,function(e,t){return e&&Ii(t,Os(t),e)}(s,e)):function(e,t){return Ii(e,fa(e),t)}(e,ir(s,e))}else{if(!ct[f])return a?e:{};s=function(e,t,n){var r,i=e.constructor;switch(t){case D:return Si(e);case b:case x:return new i(+e);case B:return function(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case j:case z:case F:case U:case V:case H:case G:return Ci(e,n);case C:return new i;case M:case L:return new i(e);case T:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new i;case O:return r=e,jn?Me(jn.call(r)):{}}}(e,f,u)}}o||(o=new Kn);var p=o.get(e);if(p)return p;o.set(e,s),os(e)?e.forEach((function(r){s.add(ur(r,t,n,r,e,o))})):ns(e)&&e.forEach((function(r,i){s.set(i,ur(r,t,n,i,e,o))}));var g=h?i:(l?c?ia:ra:c?Os:Ls)(e);return Tt(g||e,(function(r,i){g&&(r=e[i=r]),tr(s,i,ur(r,t,n,i,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Me(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function lr(e,t,n){if("function"!=typeof e)throw new Te(a);return Ia((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=Pt,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Bt(t,$t(n))),r?(a=Dt,o=!1):t.length>=200&&(a=tn,o=!1,t=new Zn(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h===h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else a(t,h,r)||u.push(l)}return u}Fn.templateSettings={escape:J,evaluate:$,interpolate:ee,variable:"",imports:{_:Fn}},Fn.prototype=Vn.prototype,Fn.prototype.constructor=Fn,Hn.prototype=Un(Vn.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Un(Vn.prototype),Gn.prototype.constructor=Gn,Yn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return n===o?i:n}return Be.call(t,e)?t[e]:i},Yn.prototype.has=function(e){var t=this.__data__;return Tn?t[e]!==i:Be.call(t,e)},Yn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&t===i?o:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return nr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Cn||Wn),string:new Yn}},qn.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ca(this,e).get(e)},qn.prototype.has=function(e){return ca(this,e).has(e)},qn.prototype.set=function(e,t){var n=ca(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,o),this},Zn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Cn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var fr=Pi(br),dr=Pi(xr,!0);function pr(e,t){var n=!0;return fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(u===i?s===s&&!us(s):n(s,u)))var u=s,c=o}return c}function vr(e,t){var n=[];return fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function mr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ma),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?mr(s,t-1,n,r,i):Nt(i,s):r||(i[i.length]=s)}return i}var yr=Di(),_r=Di(!0);function br(e,t){return e&&yr(e,t,Ls)}function xr(e,t){return e&&_r(e,t,Ls)}function wr(e,t){return Ot(t,(function(t){return Qo(e[t])}))}function kr(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[Na(t[n++])];return n&&n==r?e:i}function Sr(e,t,n){var r=t(e);return Go(e)?r:Nt(r,n(e))}function Cr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in Me(e)?function(e){var t=Be.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(o){}var a=je.call(e);return r&&(t?e[Je]=n:delete e[Je]),a}(e):function(e){return je.call(e)}(e)}function Mr(e,t){return e>t}function Ar(e,t){return null!=e&&Be.call(e,t)}function Er(e,t){return null!=e&&t in Me(e)}function Tr(e,t,r){for(var a=r?Dt:Pt,o=e[0].length,s=e.length,u=s,c=n(s),l=1/0,h=[];u--;){var f=e[u];u&&t&&(f=Bt(f,$t(t))),l=_n(f.length,l),c[u]=!r&&(t||o>=120&&f.length>=120)?new Zn(u&&f):i}f=e[0];var d=-1,p=c[0];e:for(;++d<o&&h.length<l;){var g=f[d],v=t?t(g):g;if(g=r||0!==g?g:0,!(p?tn(p,v):a(h,v,r))){for(u=s;--u;){var m=c[u];if(!(m?tn(m,v):a(e[u],v,r)))continue e}p&&p.push(v),h.push(g)}}return h}function Ir(e,t,n){var r=null==(e=Aa(e,t=_i(t,e)))?e:e[Na(Ka(t))];return null==r?i:At(r,e,n)}function Lr(e){return ts(e)&&Cr(e)==y}function Or(e,t,n,r,a){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=Go(e),u=Go(t),c=s?_:pa(e),l=u?_:pa(t),h=(c=c==y?A:c)==A,f=(l=l==y?A:l)==A,d=c==l;if(d&&Zo(e)){if(!Zo(t))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Kn),s||cs(e)?ta(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!a(new Ge(e),new Ge(t)));case b:case x:case M:return Fo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case T:case L:return e==t+"";case C:var s=cn;case I:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=ta(s(e),s(t),r,i,a,o);return o.delete(e),l;case O:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var p=h&&Be.call(e,"__wrapped__"),g=f&&Be.call(t,"__wrapped__");if(p||g){var v=p?e.value():e,m=g?t.value():t;return o||(o=new Kn),a(v,m,n,r,o)}}return!!d&&(o||(o=new Kn),function(e,t,n,r,a,o){var s=1&n,u=ra(e),c=u.length,l=ra(t),h=l.length;if(c!=h&&!s)return!1;for(var f=c;f--;){var d=u[f];if(!(s?d in t:Be.call(t,d)))return!1}var p=o.get(e),g=o.get(t);if(p&&g)return p==t&&g==e;var v=!0;o.set(e,t),o.set(t,e);for(var m=s;++f<c;){var y=e[d=u[f]],_=t[d];if(r)var b=s?r(_,y,d,t,e,o):r(y,_,d,e,t,o);if(!(b===i?y===_||a(y,_,n,r,o):b)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o))}(e,t,n,r,Or,a))}function Pr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Me(e);a--;){var u=n[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var c=(u=n[a])[0],l=e[c],h=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var f=new Kn;if(r)var d=r(l,h,c,e,t,f);if(!(d===i?Or(h,l,3,r,f):d))return!1}}return!0}function Dr(e){return!(!es(e)||(t=e,Re&&Re in t))&&(Qo(e)?Ue:ye).test(Ra(e));var t}function Br(e){return"function"==typeof e?e:null==e?ru:"object"==typeof e?Go(e)?Ur(e[0],e[1]):Fr(e):fu(e)}function Nr(e){if(!ka(e))return Ft(e);var t=[];for(var n in Me(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Rr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in Me(e))t.push(n);return t}(e);var t=ka(e),n=[];for(var r in e)("constructor"!=r||!t&&Be.call(e,r))&&n.push(r);return n}function jr(e,t){return e<t}function zr(e,t){var r=-1,i=Wo(e)?n(e.length):[];return fr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Fr(e){var t=la(e);return 1==t.length&&t[0][2]?Ca(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Ur(e,t){return ba(e)&&Sa(t)?Ca(Na(e),t):function(n){var r=Ms(n,e);return r===i&&r===t?As(n,e):Or(t,r,3)}}function Vr(e,t,n,r,a){e!==t&&yr(t,(function(o,s){if(a||(a=new Kn),es(o))!function(e,t,n,r,a,o,s){var u=Ea(e,n),c=Ea(t,n),l=s.get(c);if(l)er(e,n,l);else{var h=o?o(u,c,n+"",e,t,s):i,f=h===i;if(f){var d=Go(c),p=!d&&Zo(c),g=!d&&!p&&cs(c);h=c,d||p||g?Go(u)?h=u:qo(u)?h=Ti(u):p?(f=!1,h=ki(c,!0)):g?(f=!1,h=Ci(c,!0)):h=[]:is(c)||Ho(c)?(h=u,Ho(u)?h=ms(u):es(u)&&!Qo(u)||(h=va(c))):f=!1}f&&(s.set(c,h),a(h,c,r,o,s),s.delete(c)),er(e,n,h)}}(e,t,s,n,Vr,r,a);else{var u=r?r(Ea(e,s),o,s+"",e,t,a):i;u===i&&(u=o),er(e,s,u)}}),Os)}function Hr(e,t){var n=e.length;if(n)return ya(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?Bt(t,(function(e){return Go(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[ru];var r=-1;t=Bt(t,$t(ua()));var i=zr(e,(function(e,n,i){var a=Bt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var u=Mi(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Yr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=kr(e,o);n(s,o)&&$r(a,_i(o,e),s)}return a}function Wr(e,t,n,r){var i=r?Gt:Ht,a=-1,o=t.length,s=e;for(e===t&&(t=Ti(t)),n&&(s=Bt(e,$t(n)));++a<o;)for(var u=0,c=t[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ke.call(s,u,1),Ke.call(e,u,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ya(i)?Ke.call(e,i,1):hi(e,i)}}return e}function Zr(e,t){return e+pt(wn()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return La(Ma(e,t,ru),e+"")}function Qr(e){return Qn(Fs(e))}function Jr(e,t){var n=Fs(e);return Da(n,sr(t,0,n.length))}function $r(e,t,n,r){if(!es(e))return e;for(var a=-1,o=(t=_i(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var c=Na(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=es(h)?h:ya(t[a+1])?[]:{})}tr(u,c,l),u=u[c]}return e}var ei=In?function(e,t){return In.set(e,t),e}:ru,ti=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:eu(t),writable:!0})}:ru;function ni(e){return Da(Fs(e))}function ri(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ii(e,t){var n;return fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!us(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return oi(e,t,ru,n)}function oi(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,c=us(t),l=t===i;a<o;){var h=pt((a+o)/2),f=n(e[h]),d=f!==i,p=null===f,g=f===f,v=us(f);if(s)var m=r||g;else m=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!v):!p&&!v&&(r?f<=t:f<t);m?a=h+1:o=h}return _n(o,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Fo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ui(e){return"number"==typeof e?e:us(e)?g:+e}function ci(e){if("string"==typeof e)return e;if(Go(e))return Bt(e,ci)+"";if(us(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Pt,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Dt;else if(a>=200){var c=t?null:Ki(e);if(c)return fn(c);o=!1,i=tn,u=new Zn}else u=t?[]:s;e:for(;++r<a;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function hi(e,t){return null==(e=Aa(e,t=_i(t,e)))||delete e[Na(Ka(t))]}function fi(e,t,n,r){return $r(e,t,n(kr(e,t)),r)}function di(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ri(e,r?0:a,r?a+1:i):ri(e,r?a+1:0,r?i:a)}function pi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),n)}function gi(e,t,r){var i=e.length;if(i<2)return i?li(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=hr(o[a]||s,e[u],t,r));return li(mr(o,1),t,r)}function vi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var u=r<o?t[r]:i;n(s,e[r],u)}return s}function mi(e){return qo(e)?e:[]}function yi(e){return"function"==typeof e?e:ru}function _i(e,t){return Go(e)?e:ba(e,t)?[e]:Ba(ys(e))}var bi=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var wi=nt||function(e){return gt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=Ye?Ye(n):new e.constructor(n);return e.copy(r),r}function Si(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Ci(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Mi(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=us(e),s=t!==i,u=null===t,c=t===t,l=us(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!l&&e<t||l&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}function Ai(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,c=t.length,l=Zt(o-s,0),h=n(c+l),f=!i;++u<c;)h[u]=t[u];for(;++a<s;)(f||a<o)&&(h[r[a]]=e[a]);for(;l--;)h[u++]=e[a++];return h}function Ei(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,c=-1,l=t.length,h=Zt(o-u,0),f=n(h+l),d=!i;++a<h;)f[a]=e[a];for(var p=a;++c<l;)f[p+c]=t[c];for(;++s<u;)(d||a<o)&&(f[p+r[s]]=e[a++]);return f}function Ti(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ii(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),a?ar(n,u,c):tr(n,u,c)}return n}function Li(e,t){return function(n,r){var i=Go(n)?Et:rr,a=t?t():{};return i(n,e,ua(r,2),a)}}function Oi(e){return Xr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&_a(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Me(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!Wo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Me(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Di(e){return function(t,n,r){for(var i=-1,a=Me(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function Bi(e){return function(t){var n=un(t=ys(t))?gn(t):i,r=n?n[0]:t.charAt(0),a=n?xi(n,1).join(""):t.slice(1);return r[e]()+a}}function Ni(e){return function(t){return Rt(Qs(Hs(t).replace(et,"")),e,"")}}function Ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function ji(e){return function(t,n,r){var a=Me(t);if(!Wo(t)){var o=ua(n,3);t=Ls(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function zi(e){return na((function(t){var n=t.length,r=n,o=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Te(a);if(o&&!u&&"wrapper"==oa(s))var u=new Hn([],!0)}for(r=u?r:n;++r<n;){var c=oa(s=t[r]),l="wrapper"==c?aa(s):i;u=l&&xa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[oa(l[0])].apply(u,l[3]):1==s.length&&xa(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Go(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Fi(e,t,r,a,o,s,u,c,l,f){var d=t&h,p=1&t,g=2&t,v=24&t,m=512&t,y=g?i:Ri(e);return function h(){for(var _=arguments.length,b=n(_),x=_;x--;)b[x]=arguments[x];if(v)var w=sa(h),k=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(a&&(b=Ai(b,a,o,v)),s&&(b=Ei(b,s,u,v)),_-=k,v&&_<f){var S=hn(b,w);return qi(e,t,Fi,h.placeholder,r,b,S,c,l,f-_)}var C=p?r:this,M=g?C[e]:e;return _=b.length,c?b=function(e,t){for(var n=e.length,r=_n(t.length,n),a=Ti(e);r--;){var o=t[r];e[r]=ya(o,n)?a[o]:i}return e}(b,c):m&&_>1&&b.reverse(),d&&l<_&&(b.length=l),this&&this!==gt&&this instanceof h&&(M=y||Ri(M)),M.apply(C,b)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=ui(n),r=ui(r)),a=e(n,r)}return a}}function Hi(e){return na((function(t){return t=Bt(t,$t(ua())),Xr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Gi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,dt(e/pn(t)));return un(t)?xi(gn(r),0,e).join(""):r.slice(0,e)}function Yi(e){return function(t,r,a){return a&&"number"!=typeof a&&_a(t,r,a)&&(r=a=i),t=ds(t),r===i?(r=t,t=0):r=ds(r),function(e,t,r,i){for(var a=-1,o=Zt(dt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:ds(a),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function qi(e,t,n,r,a,o,s,u,h,f){var d=8&t;t|=d?c:l,4&(t&=~(d?l:c))||(t&=-4);var p=[e,t,a,d?o:i,d?s:i,d?i:o,d?i:s,u,h,f],g=n.apply(i,p);return xa(e)&&Ta(g,p),g.placeholder=r,Oa(g,e,t)}function Zi(e){var t=Ce[e];return function(e,n){if(e=vs(e),(n=null==n?0:_n(ps(n),292))&&_t(e)){var r=(ys(e)+"e").split("e");return+((r=(ys(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=An&&1/fn(new An([,-0]))[1]==d?function(e){return new An(e)}:uu;function Xi(e){return function(t){var n=pa(t);return n==C?cn(t):n==I?dn(t):function(e,t){return Bt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qi(e,t,r,o,d,p,g,v){var m=2&t;if(!m&&"function"!=typeof e)throw new Te(a);var y=o?o.length:0;if(y||(t&=-97,o=d=i),g=g===i?g:Zt(ps(g),0),v=v===i?v:ps(v),y-=d?d.length:0,t&l){var _=o,b=d;o=d=i}var x=m?i:aa(e),w=[e,t,r,o,d,_,b,p,g,v];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==h&&8==n||r==h&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ai(c,u,t[4]):u,e[4]=c?hn(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ei(c,u,t[6]):u,e[6]=c?hn(e[5],s):t[6]),(u=t[7])&&(e[7]=u),r&h&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],o=w[3],d=w[4],!(v=w[9]=w[9]===i?m?0:e.length:Zt(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==u?function(e,t,r){var a=Ri(e);return function o(){for(var s=arguments.length,u=n(s),c=s,l=sa(o);c--;)u[c]=arguments[c];var h=s<3&&u[0]!==l&&u[s-1]!==l?[]:hn(u,l);return(s-=h.length)<r?qi(e,t,Fi,o.placeholder,i,u,h,i,i,r-s):At(this&&this!==gt&&this instanceof o?a:e,this,u)}}(e,t,v):t!=c&&33!=t||d.length?Fi.apply(i,w):function(e,t,r,i){var a=1&t,o=Ri(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,h=n(l+u),f=this&&this!==gt&&this instanceof t?o:e;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++s];return At(f,a?r:this,h)}}(e,t,r,o);else var k=function(e,t,n){var r=1&t,i=Ri(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Oa((x?ei:Ta)(k,w),e,t)}function Ji(e,t,n,r){return e===i||Fo(e,Oe[n])&&!Be.call(r,n)?t:e}function $i(e,t,n,r,a,o){return es(e)&&es(t)&&(o.set(t,e),Vr(e,t,i,$i,o),o.delete(t)),e}function ea(e){return is(e)?i:e}function ta(e,t,n,r,a,o){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),h=o.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=2&n?new Zn:i;for(o.set(e,t),o.set(t,e);++f<u;){var g=e[f],v=t[f];if(r)var m=s?r(v,g,f,t,e,o):r(g,v,f,e,t,o);if(m!==i){if(m)continue;d=!1;break}if(p){if(!zt(t,(function(e,t){if(!tn(p,t)&&(g===e||a(g,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(g!==v&&!a(g,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function na(e){return La(Ma(e,i,Ga),e+"")}function ra(e){return Sr(e,Ls,fa)}function ia(e){return Sr(e,Os,da)}var aa=In?function(e){return In.get(e)}:uu;function oa(e){for(var t=e.name+"",n=Ln[t],r=Be.call(Ln,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function sa(e){return(Be.call(Fn,"placeholder")?Fn:e).placeholder}function ua(){var e=Fn.iteratee||iu;return e=e===iu?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function la(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Sa(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Dr(n)?n:i}var fa=vt?function(e){return null==e?[]:(e=Me(e),Ot(vt(e),(function(t){return Ze.call(e,t)})))}:gu,da=vt?function(e){for(var t=[];e;)Nt(t,fa(e)),e=We(e);return t}:gu,pa=Cr;function ga(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,a=!1;++r<i;){var o=Na(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&$o(i)&&ya(o,i)&&(Go(e)||Ho(e))}function va(e){return"function"!=typeof e.constructor||ka(e)?{}:Un(We(e))}function ma(e){return Go(e)||Ho(e)||!!(Xe&&e&&e[Xe])}function ya(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function _a(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?Wo(n)&&ya(t,n.length):"string"==r&&t in n)&&Fo(n[t],e)}function ba(e,t){if(Go(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!us(e))||ne.test(e)||!te.test(e)||null!=t&&e in Me(t)}function xa(e){var t=oa(e),n=Fn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=aa(n);return!!r&&e===r[0]}(Sn&&pa(new Sn(new ArrayBuffer(1)))!=B||Cn&&pa(new Cn)!=C||Mn&&pa(Mn.resolve())!=E||An&&pa(new An)!=I||En&&pa(new En)!=P)&&(pa=function(e){var t=Cr(e),n=t==A?e.constructor:i,r=n?Ra(n):"";if(r)switch(r){case On:return B;case Pn:return C;case Dn:return E;case Bn:return I;case Nn:return P}return t});var wa=Pe?Qo:vu;function ka(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Sa(e){return e===e&&!es(e)}function Ca(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Me(n))}}function Ma(e,t,r){return t=Zt(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=Zt(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),At(e,this,u)}}function Aa(e,t){return t.length<2?e:kr(e,ri(t,0,-1))}function Ea(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ta=Pa(ei),Ia=lt||function(e,t){return gt.setTimeout(e,t)},La=Pa(ti);function Oa(e,t,n){var r=t+"";return La(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(m,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(r),n)))}function Pa(e){var t=0,n=0;return function(){var r=bn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Da(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Zr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ba=function(e){var t=Do(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Na(e){if("string"==typeof e||us(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ra(e){if(null!=e){try{return De.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ja(e){if(e instanceof Gn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Ti(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var za=Xr((function(e,t){return qo(e)?hr(e,mr(t,1,qo,!0)):[]})),Fa=Xr((function(e,t){var n=Ka(t);return qo(n)&&(n=i),qo(e)?hr(e,mr(t,1,qo,!0),ua(n,2)):[]})),Ua=Xr((function(e,t){var n=Ka(t);return qo(n)&&(n=i),qo(e)?hr(e,mr(t,1,qo,!0),i,n):[]}));function Va(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Zt(r+i,0)),Vt(e,ua(t,3),i)}function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ps(n),a=n<0?Zt(r+a,0):_n(a,r-1)),Vt(e,ua(t,3),a,!0)}function Ga(e){return null!=e&&e.length?mr(e,1):[]}function Ya(e){return e&&e.length?e[0]:i}var Wa=Xr((function(e){var t=Bt(e,mi);return t.length&&t[0]===e[0]?Tr(t):[]})),qa=Xr((function(e){var t=Ka(e),n=Bt(e,mi);return t===Ka(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Tr(n,ua(t,2)):[]})),Za=Xr((function(e){var t=Ka(e),n=Bt(e,mi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Tr(n,i,t):[]}));function Ka(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xa=Xr(Qa);function Qa(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var Ja=na((function(e,t){var n=null==e?0:e.length,r=or(e,t);return qr(e,Bt(t,(function(e){return ya(e,n)?+e:e})).sort(Mi)),r}));function $a(e){return null==e?e:kn.call(e)}var eo=Xr((function(e){return li(mr(e,1,qo,!0))})),to=Xr((function(e){var t=Ka(e);return qo(t)&&(t=i),li(mr(e,1,qo,!0),ua(t,2))})),no=Xr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,li(mr(e,1,qo,!0),i,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(qo(e))return t=Zt(e.length,t),!0})),Qt(t,(function(t){return Bt(e,qt(t))}))}function io(e,t){if(!e||!e.length)return[];var n=ro(e);return null==t?n:Bt(n,(function(e){return At(t,i,e)}))}var ao=Xr((function(e,t){return qo(e)?hr(e,t):[]})),oo=Xr((function(e){return gi(Ot(e,qo))})),so=Xr((function(e){var t=Ka(e);return qo(t)&&(t=i),gi(Ot(e,qo),ua(t,2))})),uo=Xr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,gi(Ot(e,qo),i,t)})),co=Xr(ro),lo=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,io(e,n)}));function ho(e){var t=Fn(e);return t.__chain__=!0,t}function fo(e,t){return t(e)}var po=na((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&ya(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fo,args:[a],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)})),go=Li((function(e,t,n){Be.call(e,n)?++e[n]:ar(e,n,1)})),vo=ji(Va),mo=ji(Ha);function yo(e,t){return(Go(e)?Tt:fr)(e,ua(t,3))}function _o(e,t){return(Go(e)?It:dr)(e,ua(t,3))}var bo=Li((function(e,t,n){Be.call(e,n)?e[n].push(t):ar(e,n,[t])})),xo=Xr((function(e,t,r){var i=-1,a="function"==typeof t,o=Wo(e)?n(e.length):[];return fr(e,(function(e){o[++i]=a?At(t,e,r):Ir(e,t,r)})),o})),wo=Li((function(e,t,n){ar(e,n,t)}));function ko(e,t){return(Go(e)?Bt:zr)(e,ua(t,3))}var So=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Co=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_a(e,t[0],t[1])?t=[]:n>2&&_a(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,mr(t,1),[])})),Mo=it||function(){return gt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Qi(e,h,i,i,i,i,t)}function Eo(e,t){var n;if("function"!=typeof t)throw new Te(a);return e=ps(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var To=Xr((function(e,t,n){var r=1;if(n.length){var i=hn(n,sa(To));r|=c}return Qi(e,r,t,n,i)})),Io=Xr((function(e,t,n){var r=3;if(n.length){var i=hn(n,sa(Io));r|=c}return Qi(t,r,e,n,i)}));function Lo(e,t,n){var r,o,s,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Te(a);function g(t){var n=r,a=o;return r=o=i,h=t,u=e.apply(a,n)}function v(e){var n=e-l;return l===i||n>=t||n<0||d&&e-h>=s}function m(){var e=Mo();if(v(e))return y(e);c=Ia(m,function(e){var n=t-(e-l);return d?_n(n,s-(e-h)):n}(e))}function y(e){return c=i,p&&r?g(e):(r=o=i,u)}function _(){var e=Mo(),n=v(e);if(r=arguments,o=this,l=e,n){if(c===i)return function(e){return h=e,c=Ia(m,t),f?g(e):u}(l);if(d)return wi(c),c=Ia(m,t),g(l)}return c===i&&(c=Ia(m,t)),u}return t=vs(t)||0,es(n)&&(f=!!n.leading,s=(d="maxWait"in n)?Zt(vs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&wi(c),h=0,r=l=o=c=i},_.flush=function(){return c===i?u:y(Mo())},_}var Oo=Xr((function(e,t){return lr(e,1,t)})),Po=Xr((function(e,t,n){return lr(e,vs(t)||0,n)}));function Do(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Do.Cache||qn),n}function Bo(e){if("function"!=typeof e)throw new Te(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Do.Cache=qn;var No=bi((function(e,t){var n=(t=1==t.length&&Go(t[0])?Bt(t[0],$t(ua())):Bt(mr(t,1),$t(ua()))).length;return Xr((function(r){for(var i=-1,a=_n(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return At(e,this,r)}))})),Ro=Xr((function(e,t){var n=hn(t,sa(Ro));return Qi(e,c,i,t,n)})),jo=Xr((function(e,t){var n=hn(t,sa(jo));return Qi(e,l,i,t,n)})),zo=na((function(e,t){return Qi(e,f,i,i,i,t)}));function Fo(e,t){return e===t||e!==e&&t!==t}var Uo=Wi(Mr),Vo=Wi((function(e,t){return e>=t})),Ho=Lr(function(){return arguments}())?Lr:function(e){return ts(e)&&Be.call(e,"callee")&&!Ze.call(e,"callee")},Go=n.isArray,Yo=xt?$t(xt):function(e){return ts(e)&&Cr(e)==D};function Wo(e){return null!=e&&$o(e.length)&&!Qo(e)}function qo(e){return ts(e)&&Wo(e)}var Zo=mt||vu,Ko=wt?$t(wt):function(e){return ts(e)&&Cr(e)==x};function Xo(e){if(!ts(e))return!1;var t=Cr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Qo(e){if(!es(e))return!1;var t=Cr(e);return t==k||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jo(e){return"number"==typeof e&&e==ps(e)}function $o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=kt?$t(kt):function(e){return ts(e)&&pa(e)==C};function rs(e){return"number"==typeof e||ts(e)&&Cr(e)==M}function is(e){if(!ts(e)||Cr(e)!=A)return!1;var t=We(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&De.call(n)==ze}var as=St?$t(St):function(e){return ts(e)&&Cr(e)==T},os=Ct?$t(Ct):function(e){return ts(e)&&pa(e)==I};function ss(e){return"string"==typeof e||!Go(e)&&ts(e)&&Cr(e)==L}function us(e){return"symbol"==typeof e||ts(e)&&Cr(e)==O}var cs=Mt?$t(Mt):function(e){return ts(e)&&$o(e.length)&&!!ut[Cr(e)]},ls=Wi(jr),hs=Wi((function(e,t){return e<=t}));function fs(e){if(!e)return[];if(Wo(e))return ss(e)?gn(e):Ti(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=pa(e);return(t==C?cn:t==I?fn:Fs)(e)}function ds(e){return e?(e=vs(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ps(e){var t=ds(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?sr(ps(e),0,v):0}function vs(e){if("number"==typeof e)return e;if(us(e))return g;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=me.test(e);return n||_e.test(e)?ft(e.slice(2),n?2:8):ve.test(e)?g:+e}function ms(e){return Ii(e,Os(e))}function ys(e){return null==e?"":ci(e)}var _s=Oi((function(e,t){if(ka(t)||Wo(t))Ii(t,Ls(t),e);else for(var n in t)Be.call(t,n)&&tr(e,n,t[n])})),bs=Oi((function(e,t){Ii(t,Os(t),e)})),xs=Oi((function(e,t,n,r){Ii(t,Os(t),e,r)})),ws=Oi((function(e,t,n,r){Ii(t,Ls(t),e,r)})),ks=na(or),Ss=Xr((function(e,t){e=Me(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&_a(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Os(o),u=-1,c=s.length;++u<c;){var l=s[u],h=e[l];(h===i||Fo(h,Oe[l])&&!Be.call(e,l))&&(e[l]=o[l])}return e})),Cs=Xr((function(e){return e.push(i,$i),At(Ds,i,e)}));function Ms(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function As(e,t){return null!=e&&ga(e,t,Er)}var Es=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=n}),eu(ru)),Ts=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]}),ua),Is=Xr(Ir);function Ls(e){return Wo(e)?Xn(e):Nr(e)}function Os(e){return Wo(e)?Xn(e,!0):Rr(e)}var Ps=Oi((function(e,t,n){Vr(e,t,n)})),Ds=Oi((function(e,t,n,r){Vr(e,t,n,r)})),Bs=na((function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Ii(e,ia(e),n),r&&(n=ur(n,7,ea));for(var i=t.length;i--;)hi(n,t[i]);return n})),Ns=na((function(e,t){return null==e?{}:function(e,t){return Yr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function Rs(e,t){if(null==e)return{};var n=Bt(ia(e),(function(e){return[e]}));return t=ua(t),Yr(e,n,(function(e,n){return t(e,n[0])}))}var js=Xi(Ls),zs=Xi(Os);function Fs(e){return null==e?[]:en(e,Ls(e))}var Us=Ni((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return Xs(ys(e).toLowerCase())}function Hs(e){return(e=ys(e))&&e.replace(xe,an).replace(tt,"")}var Gs=Ni((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ys=Ni((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ws=Bi("toLowerCase"),qs=Ni((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Zs=Ni((function(e,t,n){return e+(n?" ":"")+Xs(t)})),Ks=Ni((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xs=Bi("toUpperCase");function Qs(e,t,n){return e=ys(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Js=Xr((function(e,t){try{return At(e,i,t)}catch(n){return Xo(n)?n:new se(n)}})),$s=na((function(e,t){return Tt(t,(function(t){t=Na(t),ar(e,t,To(e[t],e))})),e}));function eu(e){return function(){return e}}var tu=zi(),nu=zi(!0);function ru(e){return e}function iu(e){return Br("function"==typeof e?e:ur(e,1))}var au=Xr((function(e,t){return function(n){return Ir(n,e,t)}})),ou=Xr((function(e,t){return function(n){return Ir(e,n,t)}}));function su(e,t,n){var r=Ls(t),i=wr(t,r);null!=n||es(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Ls(t)));var a=!(es(n)&&"chain"in n)||!!n.chain,o=Qo(e);return Tt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Ti(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})})),e}function uu(){}var cu=Hi(Bt),lu=Hi(Lt),hu=Hi(zt);function fu(e){return ba(e)?qt(Na(e)):function(e){return function(t){return kr(t,e)}}(e)}var du=Yi(),pu=Yi(!0);function gu(){return[]}function vu(){return!1}var mu=Vi((function(e,t){return e+t}),0),yu=Zi("ceil"),_u=Vi((function(e,t){return e/t}),1),bu=Zi("floor"),xu=Vi((function(e,t){return e*t}),1),wu=Zi("round"),ku=Vi((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Te(a);return e=ps(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Ao,Fn.assign=_s,Fn.assignIn=bs,Fn.assignInWith=xs,Fn.assignWith=ws,Fn.at=ks,Fn.before=Eo,Fn.bind=To,Fn.bindAll=$s,Fn.bindKey=Io,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Go(e)?e:[e]},Fn.chain=ho,Fn.chunk=function(e,t,r){t=(r?_a(e,t,r):t===i)?1:Zt(ps(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(dt(a/t));o<a;)u[s++]=ri(e,o,o+=t);return u},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Nt(Go(r)?Ti(r):[r],mr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=ua();return e=t?Bt(e,(function(e){if("function"!=typeof e[1])throw new Te(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Ls(e);return function(n){return cr(n,e,t)}}(ur(e,1))},Fn.constant=eu,Fn.countBy=go,Fn.create=function(e,t){var n=Un(e);return null==t?n:ir(n,t)},Fn.curry=function e(t,n,r){var a=Qi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Fn.curryRight=function e(t,n,r){var a=Qi(t,u,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Fn.debounce=Lo,Fn.defaults=Ss,Fn.defaultsDeep=Cs,Fn.defer=Oo,Fn.delay=Po,Fn.difference=za,Fn.differenceBy=Fa,Fn.differenceWith=Ua,Fn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:ps(t))<0?0:t,r):[]},Fn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:ps(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!0):[]},Fn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_a(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ps(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ps(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Fn.filter=function(e,t){return(Go(e)?Ot:vr)(e,ua(t,3))},Fn.flatMap=function(e,t){return mr(ko(e,t),1)},Fn.flatMapDeep=function(e,t){return mr(ko(e,t),d)},Fn.flatMapDepth=function(e,t,n){return n=n===i?1:ps(n),mr(ko(e,t),n)},Fn.flatten=Ga,Fn.flattenDeep=function(e){return null!=e&&e.length?mr(e,d):[]},Fn.flattenDepth=function(e,t){return null!=e&&e.length?mr(e,t=t===i?1:ps(t)):[]},Fn.flip=function(e){return Qi(e,512)},Fn.flow=tu,Fn.flowRight=nu,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Fn.functions=function(e){return null==e?[]:wr(e,Ls(e))},Fn.functionsIn=function(e){return null==e?[]:wr(e,Os(e))},Fn.groupBy=bo,Fn.initial=function(e){return null!=e&&e.length?ri(e,0,-1):[]},Fn.intersection=Wa,Fn.intersectionBy=qa,Fn.intersectionWith=Za,Fn.invert=Es,Fn.invertBy=Ts,Fn.invokeMap=xo,Fn.iteratee=iu,Fn.keyBy=wo,Fn.keys=Ls,Fn.keysIn=Os,Fn.map=ko,Fn.mapKeys=function(e,t){var n={};return t=ua(t,3),br(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Fn.mapValues=function(e,t){var n={};return t=ua(t,3),br(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Fn.matches=function(e){return Fr(ur(e,1))},Fn.matchesProperty=function(e,t){return Ur(e,ur(t,1))},Fn.memoize=Do,Fn.merge=Ps,Fn.mergeWith=Ds,Fn.method=au,Fn.methodOf=ou,Fn.mixin=su,Fn.negate=Bo,Fn.nthArg=function(e){return e=ps(e),Xr((function(t){return Hr(t,e)}))},Fn.omit=Bs,Fn.omitBy=function(e,t){return Rs(e,Bo(ua(t)))},Fn.once=function(e){return Eo(2,e)},Fn.orderBy=function(e,t,n,r){return null==e?[]:(Go(t)||(t=null==t?[]:[t]),Go(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},Fn.over=cu,Fn.overArgs=No,Fn.overEvery=lu,Fn.overSome=hu,Fn.partial=Ro,Fn.partialRight=jo,Fn.partition=So,Fn.pick=Ns,Fn.pickBy=Rs,Fn.property=fu,Fn.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},Fn.pull=Xa,Fn.pullAll=Qa,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,ua(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},Fn.pullAt=Ja,Fn.range=du,Fn.rangeRight=pu,Fn.rearg=zo,Fn.reject=function(e,t){return(Go(e)?Ot:vr)(e,Bo(ua(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ua(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return qr(e,i),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Te(a);return Xr(e,t=t===i?t:ps(t))},Fn.reverse=$a,Fn.sampleSize=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ps(t),(Go(e)?Jn:Jr)(e,t)},Fn.set=function(e,t,n){return null==e?e:$r(e,t,n)},Fn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:$r(e,t,n,r)},Fn.shuffle=function(e){return(Go(e)?$n:ni)(e)},Fn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_a(e,t,n)?(t=0,n=r):(t=null==t?0:ps(t),n=n===i?r:ps(n)),ri(e,t,n)):[]},Fn.sortBy=Co,Fn.sortedUniq=function(e){return e&&e.length?si(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?si(e,ua(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&_a(e,t,n)&&(t=n=i),(n=n===i?v:n>>>0)?(e=ys(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=ci(t))&&un(e)?xi(gn(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Te(a);return t=null==t?0:Zt(ps(t),0),Xr((function(n){var r=n[t],i=xi(n,0,t);return r&&Nt(i,r),At(e,this,i)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:ps(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:ps(t)))<0?0:t,r):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?di(e,ua(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?di(e,ua(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Te(a);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lo(e,t,{leading:r,maxWait:t,trailing:i})},Fn.thru=fo,Fn.toArray=fs,Fn.toPairs=js,Fn.toPairsIn=zs,Fn.toPath=function(e){return Go(e)?Bt(e,Na):us(e)?[e]:Ti(Ba(ys(e)))},Fn.toPlainObject=ms,Fn.transform=function(e,t,n){var r=Go(e),i=r||Zo(e)||cs(e);if(t=ua(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:es(e)&&Qo(a)?Un(We(e)):{}}return(i?Tt:br)(e,(function(e,r,i){return t(n,e,r,i)})),n},Fn.unary=function(e){return Ao(e,1)},Fn.union=eo,Fn.unionBy=to,Fn.unionWith=no,Fn.uniq=function(e){return e&&e.length?li(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?li(e,ua(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?li(e,i,t):[]},Fn.unset=function(e,t){return null==e||hi(e,t)},Fn.unzip=ro,Fn.unzipWith=io,Fn.update=function(e,t,n){return null==e?e:fi(e,t,yi(n))},Fn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:fi(e,t,yi(n),r)},Fn.values=Fs,Fn.valuesIn=function(e){return null==e?[]:en(e,Os(e))},Fn.without=ao,Fn.words=Qs,Fn.wrap=function(e,t){return Ro(yi(t),e)},Fn.xor=oo,Fn.xorBy=so,Fn.xorWith=uo,Fn.zip=co,Fn.zipObject=function(e,t){return vi(e||[],t||[],tr)},Fn.zipObjectDeep=function(e,t){return vi(e||[],t||[],$r)},Fn.zipWith=lo,Fn.entries=js,Fn.entriesIn=zs,Fn.extend=bs,Fn.extendWith=xs,su(Fn,Fn),Fn.add=mu,Fn.attempt=Js,Fn.camelCase=Us,Fn.capitalize=Vs,Fn.ceil=yu,Fn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=vs(n))===n?n:0),t!==i&&(t=(t=vs(t))===t?t:0),sr(vs(e),t,n)},Fn.clone=function(e){return ur(e,4)},Fn.cloneDeep=function(e){return ur(e,5)},Fn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},Fn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},Fn.conformsTo=function(e,t){return null==t||cr(e,t,Ls(t))},Fn.deburr=Hs,Fn.defaultTo=function(e,t){return null==e||e!==e?t:e},Fn.divide=_u,Fn.endsWith=function(e,t,n){e=ys(e),t=ci(t);var r=e.length,a=n=n===i?r:sr(ps(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Fn.eq=Fo,Fn.escape=function(e){return(e=ys(e))&&Q.test(e)?e.replace(K,on):e},Fn.escapeRegExp=function(e){return(e=ys(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Fn.every=function(e,t,n){var r=Go(e)?Lt:pr;return n&&_a(e,t,n)&&(t=i),r(e,ua(t,3))},Fn.find=vo,Fn.findIndex=Va,Fn.findKey=function(e,t){return Ut(e,ua(t,3),br)},Fn.findLast=mo,Fn.findLastIndex=Ha,Fn.findLastKey=function(e,t){return Ut(e,ua(t,3),xr)},Fn.floor=bu,Fn.forEach=yo,Fn.forEachRight=_o,Fn.forIn=function(e,t){return null==e?e:yr(e,ua(t,3),Os)},Fn.forInRight=function(e,t){return null==e?e:_r(e,ua(t,3),Os)},Fn.forOwn=function(e,t){return e&&br(e,ua(t,3))},Fn.forOwnRight=function(e,t){return e&&xr(e,ua(t,3))},Fn.get=Ms,Fn.gt=Uo,Fn.gte=Vo,Fn.has=function(e,t){return null!=e&&ga(e,t,Ar)},Fn.hasIn=As,Fn.head=Ya,Fn.identity=ru,Fn.includes=function(e,t,n,r){e=Wo(e)?e:Fs(e),n=n&&!r?ps(n):0;var i=e.length;return n<0&&(n=Zt(i+n,0)),ss(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Zt(r+i,0)),Ht(e,t,i)},Fn.inRange=function(e,t,n){return t=ds(t),n===i?(n=t,t=0):n=ds(n),function(e,t,n){return e>=_n(t,n)&&e<Zt(t,n)}(e=vs(e),t,n)},Fn.invoke=Is,Fn.isArguments=Ho,Fn.isArray=Go,Fn.isArrayBuffer=Yo,Fn.isArrayLike=Wo,Fn.isArrayLikeObject=qo,Fn.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Cr(e)==b},Fn.isBuffer=Zo,Fn.isDate=Ko,Fn.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Wo(e)&&(Go(e)||"string"==typeof e||"function"==typeof e.splice||Zo(e)||cs(e)||Ho(e)))return!e.length;var t=pa(e);if(t==C||t==I)return!e.size;if(ka(e))return!Nr(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Or(e,t)},Fn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},Fn.isError=Xo,Fn.isFinite=function(e){return"number"==typeof e&&_t(e)},Fn.isFunction=Qo,Fn.isInteger=Jo,Fn.isLength=$o,Fn.isMap=ns,Fn.isMatch=function(e,t){return e===t||Pr(e,t,la(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,la(t),n)},Fn.isNaN=function(e){return rs(e)&&e!=+e},Fn.isNative=function(e){if(wa(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=rs,Fn.isObject=es,Fn.isObjectLike=ts,Fn.isPlainObject=is,Fn.isRegExp=as,Fn.isSafeInteger=function(e){return Jo(e)&&e>=-9007199254740991&&e<=p},Fn.isSet=os,Fn.isString=ss,Fn.isSymbol=us,Fn.isTypedArray=cs,Fn.isUndefined=function(e){return e===i},Fn.isWeakMap=function(e){return ts(e)&&pa(e)==P},Fn.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Cr(e)},Fn.join=function(e,t){return null==e?"":bt.call(e,t)},Fn.kebabCase=Gs,Fn.last=Ka,Fn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ps(n))<0?Zt(r+a,0):_n(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Vt(e,Yt,a,!0)},Fn.lowerCase=Ys,Fn.lowerFirst=Ws,Fn.lt=ls,Fn.lte=hs,Fn.max=function(e){return e&&e.length?gr(e,ru,Mr):i},Fn.maxBy=function(e,t){return e&&e.length?gr(e,ua(t,2),Mr):i},Fn.mean=function(e){return Wt(e,ru)},Fn.meanBy=function(e,t){return Wt(e,ua(t,2))},Fn.min=function(e){return e&&e.length?gr(e,ru,jr):i},Fn.minBy=function(e,t){return e&&e.length?gr(e,ua(t,2),jr):i},Fn.stubArray=gu,Fn.stubFalse=vu,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=xu,Fn.nth=function(e,t){return e&&e.length?Hr(e,ps(t)):i},Fn.noConflict=function(){return gt._===this&&(gt._=Fe),this},Fn.noop=uu,Fn.now=Mo,Fn.pad=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(pt(i),n)+e+Gi(dt(i),n)},Fn.padEnd=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?e+Gi(t-r,n):e},Fn.padStart=function(e,t,n){e=ys(e);var r=(t=ps(t))?pn(e):0;return t&&r<t?Gi(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ys(e).replace(oe,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_a(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ds(e),t===i?(t=e,e=0):t=ds(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=wn();return _n(e+a*(t-e+ht("1e-"+((a+"").length-1))),t)}return Zr(e,t)},Fn.reduce=function(e,t,n){var r=Go(e)?Rt:Kt,i=arguments.length<3;return r(e,ua(t,4),n,i,fr)},Fn.reduceRight=function(e,t,n){var r=Go(e)?jt:Kt,i=arguments.length<3;return r(e,ua(t,4),n,i,dr)},Fn.repeat=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ps(t),Kr(ys(e),t)},Fn.replace=function(){var e=arguments,t=ys(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var r=-1,a=(t=_i(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Na(t[r])];o===i&&(r=a,o=n),e=Qo(o)?o.call(e):o}return e},Fn.round=wu,Fn.runInContext=e,Fn.sample=function(e){return(Go(e)?Qn:Qr)(e)},Fn.size=function(e){if(null==e)return 0;if(Wo(e))return ss(e)?pn(e):e.length;var t=pa(e);return t==C||t==I?e.size:Nr(e).length},Fn.snakeCase=qs,Fn.some=function(e,t,n){var r=Go(e)?zt:ii;return n&&_a(e,t,n)&&(t=i),r(e,ua(t,3))},Fn.sortedIndex=function(e,t){return ai(e,t)},Fn.sortedIndexBy=function(e,t,n){return oi(e,t,ua(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Fo(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return oi(e,t,ua(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ai(e,t,!0)-1;if(Fo(e[n],t))return n}return-1},Fn.startCase=Zs,Fn.startsWith=function(e,t,n){return e=ys(e),n=null==n?0:sr(ps(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Fn.subtract=ku,Fn.sum=function(e){return e&&e.length?Xt(e,ru):0},Fn.sumBy=function(e,t){return e&&e.length?Xt(e,ua(t,2)):0},Fn.template=function(e,t,n){var r=Fn.templateSettings;n&&_a(e,t,n)&&(t=i),e=ys(e),t=xs({},t,r,Ji);var a,o,s=xs({},t.imports,r.imports,Ji),u=Ls(s),c=en(s,u),l=0,h=t.interpolate||we,f="__p += '",d=Ae((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),f+=e.slice(l,u).replace(ke,sn),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),f+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(fe.test(g))throw new se("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(Y,""):f).replace(W,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Js((function(){return Se(u,p+"return "+f).apply(i,c)}));if(v.source=f,Xo(v))throw v;return v},Fn.times=function(e,t){if((e=ps(e))<1||e>p)return[];var n=v,r=_n(e,v);t=ua(t),e-=v;for(var i=Qt(r,t);++n<e;)t(n);return i},Fn.toFinite=ds,Fn.toInteger=ps,Fn.toLength=gs,Fn.toLower=function(e){return ys(e).toLowerCase()},Fn.toNumber=vs,Fn.toSafeInteger=function(e){return e?sr(ps(e),-9007199254740991,p):0===e?e:0},Fn.toString=ys,Fn.toUpper=function(e){return ys(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=ys(e))&&(n||t===i))return Jt(e);if(!e||!(t=ci(t)))return e;var r=gn(e),a=gn(t);return xi(r,nn(r,a),rn(r,a)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=ci(t)))return e;var r=gn(e);return xi(r,0,rn(r,gn(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=ys(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=gn(e);return xi(r,nn(r,gn(t))).join("")},Fn.truncate=function(e,t){var n=30,r="...";if(es(t)){var a="separator"in t?t.separator:a;n="length"in t?ps(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=ys(e)).length;if(un(e)){var s=gn(e);o=s.length}if(n>=o)return e;var u=n-pn(r);if(u<1)return r;var c=s?xi(s,0,u).join(""):e.slice(0,u);if(a===i)return c+r;if(s&&(u+=c.length-u),as(a)){if(e.slice(u).search(a)){var l,h=c;for(a.global||(a=Ae(a.source,ys(ge.exec(a))+"g")),a.lastIndex=0;l=a.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(e.indexOf(ci(a),u)!=u){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+r},Fn.unescape=function(e){return(e=ys(e))&&X.test(e)?e.replace(Z,mn):e},Fn.uniqueId=function(e){var t=++Ne;return ys(e)+t},Fn.upperCase=Ks,Fn.upperFirst=Xs,Fn.each=yo,Fn.eachRight=_o,Fn.first=Ya,su(Fn,function(){var e={};return br(Fn,(function(t,n){Be.call(Fn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Fn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),Tt(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===i?1:Zt(ps(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,v),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ua(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(ru)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Ir(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(Bo(ua(e)))},Gn.prototype.slice=function(e,t){e=ps(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ps(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(v)},br(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Fn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Gn,c=s[0],l=u||Go(t),h=function(e){var t=a.apply(Fn,Nt([e],s));return r&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,g=u&&!d;if(!o&&l){t=g?t:new Gn(this);var v=e.apply(t,s);return v.__actions__.push({func:fo,args:[h],thisArg:i}),new Hn(v,f)}return p&&g?e.apply(this,s):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Go(i)?i:[],e)}return this[n]((function(n){return t.apply(Go(n)?n:[],e)}))}})),br(Gn.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";Be.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Fi(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Ti(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ti(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ti(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Go(e),r=t<0,i=n?e.length:0,a=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=_n(t,e+o);break;case"takeRight":e=Zt(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,h=l.length,f=0,d=_n(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return pi(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var g=-1,v=e[c+=t];++g<h;){var m=l[g],y=m.iteratee,_=m.type,b=y(v);if(2==_)v=b;else if(!b){if(1==_)continue e;break e}}p[f++]=v}return p},Fn.prototype.at=po,Fn.prototype.chain=function(){return ho(this)},Fn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=ja(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:fo,args:[$a],thisArg:i}),new Hn(t,this.__chain__)}return this.thru($a)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Qe&&(Fn.prototype[Qe]=function(){return this}),Fn}();gt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},"../../../node_modules/paper/dist/paper-full.js":function(e,t,n){var r,i,a;(function(o,s){var u=(o=o||n("?a736")).window,c=o.document,l=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,r=Object.create,i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=t.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},u=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},c=Object.assign||function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},l=function(e,t,n){if(e){var r=i(e,"length");(r&&"number"===typeof r.value?o:u).call(e,t,n=n||e)}return n};function h(t,n,r,o,s){var u={};function c(e,c){"string"===typeof(c=c||(c=i(n,e))&&(c.get?c:c.value))&&"#"===c[0]&&(c=t[c.substring(1)]||c);var l,h="function"===typeof c,d=c,p=s||h&&!c.base?c&&c.get?e in t:t[e]:null;s&&p||(h&&p&&(c.base=p),h&&!1!==o&&(l=e.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[l[3].toLowerCase()+l[4]]=l[2]),d&&!h&&d.get&&"function"===typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(i(t,e)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!l),a(t,e,d))}if(n){for(var l in n)n.hasOwnProperty(l)&&!e.test(l)&&c(l);for(var l in u){var h=u[l],d=t["set"+h],p=t["get"+h]||d&&t["is"+h];!p||!0!==o&&0!==p.length||c(l,{get:p,set:d})}}return t}function f(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&c(this,n)}return this}return h(f,{inject:function(e){if(e){var t=!0===e.statics?e:e.statics,n=e.beans,r=e.preserve;t!==e&&h(this.prototype,e,e.enumerable,n,r),h(this,t,null,n,r)}for(var i=1,a=arguments.length;i<a;i++)this.inject(arguments[i]);return this},extend:function(){for(var e,t,n,i=this,o=0,s=arguments.length;o<s&&(!e||!t);o++)n=arguments[o],e=e||n.initialize,t=t||n.prototype;return e=e||function(){i.apply(this,arguments)},t=e.prototype=t||r(this.prototype),a(t,"constructor",{value:e,writable:!0,configurable:!0}),h(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=i,e}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var e=r(this);return e.inject.apply(e,arguments)},each:function(e,t){return l(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:c,each:l,create:r,define:a,describe:i,clone:function(e){return c(new e.constructor,e)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===f||"Object"===t.name)},pick:function(e,t){return e!==s?e:t},slice:function(e,t,r){return n.call(e,t,r)}}})};e.exports=l,l.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+l.each(this,(function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?g.instance.number(e):"string"===n?"'"+e+"'":e))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return l.importJSON(e,this)},exportJSON:function(e){return l.exportJSON(this,e)},toJSON:function(){return l.serialize(this)},set:function(e,t){return e&&l.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!l.exports[n]&&(l.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"===typeof e&&"object"===typeof t){if(Array.isArray(e)&&Array.isArray(t)){if((n=e.length)!==t.length)return!1;for(;n--;)if(!l.equals(e[n],t[n]))return!1}else{var n,r=Object.keys(e);if((n=r.length)!==Object.keys(t).length)return!1;for(;n--;){var i=r[n];if(!t.hasOwnProperty(i)||!l.equals(e[i],t[i]))return!1}}return!0}return!1},read:function(e,t,n,r){if(this===l){var i=this.peek(e,t);return e.__index++,i}var a=this.prototype,o=a._readIndex,u=t||o&&e.__index||0,c=e.length,h=e[u];if(r=r||c-u,h instanceof this||n&&n.readNull&&null==h&&r<=1)return o&&(e.__index=u+1),h&&n&&n.clone?h.clone():h;if(h=l.create(a),o&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+r<c?l.slice(e,u,u+r):e)||h,o){e.__index=u+h.__read;var f=h.__filtered;f&&(e.__filtered=f,h.__filtered=s),h.__read=s}return h},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var i,a=[],o=t||0,s=r?o+r:e.length,u=o;u<s;u++)a.push(Array.isArray(i=e[u])?this.read(i,0,n):this.read(e,u,n,1));return a},readNamed:function(e,t,n,r,i){var a=this.getNamed(e,t),o=a!==s;if(o){var u=e.__filtered;if(!u){var c=this.getSource(e);(u=e.__filtered=l.create(c)).__unfiltered=c}u[t]=s}return this.read(o?[a]:e,n,r,i)},readSupported:function(e,t){var n=this.getSource(e),r=this,i=!1;return n&&Object.keys(n).forEach((function(n){if(n in t){var a=r.readNamed(e,n);a!==s&&(t[n]=a),i=!0}})),i},getSource:function(e){var t=e.__source;if(t===s){var n=1===e.length&&e[0];t=e.__source=n&&l.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,r){var i;function a(r){if((!n||!(r in n))&&(!i||!(r in i))){var a=t[r];a!==s&&(e[r]=a)}}if(r){for(var o,u={},c=0,l=r.length;c<l;c++)(o=r[c])in t&&(a(o),u[o]=!0);i=u}return Object.keys(t.__unfiltered||t).forEach(a),e},isPlainValue:function(e,t){return l.isPlainObject(e)||Array.isArray(e)||t&&"string"===typeof e},serialize:function(e,t,n,r){t=t||{};var i,a=!r;if(a&&(t.formatter=new g(t.precision),r={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,r=this.references[n];if(!r){this.length++;var i=t.call(e),a=e._class;a&&i[0]!==a&&i.unshift(a),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),e&&e._serialize){i=e._serialize(t,r);var o=e._class;!o||e._compactSerialize||!a&&n||i[0]===o||i.unshift(o)}else if(Array.isArray(e)){i=[];for(var s=0,u=e.length;s<u;s++)i[s]=l.serialize(e[s],t,n,r)}else if(l.isPlainObject(e)){i={};var c=Object.keys(e);for(s=0,u=c.length;s<u;s++){var h=c[s];i[h]=l.serialize(e[h],t,n,r)}}else i="number"===typeof e?t.formatter.number(e,t.precision):e;return a&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(e,t,n,r,i){var a=e,o=!n,s=o&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var u=e[0],c="dictionary"===u;if(1==e.length&&/^#/.test(u))return n.dictionary[u];a=[];for(var h=(u=l.exports[u])?1:0,f=e.length;h<f;h++)a.push(l.deserialize(e[h],t,n,c,s));if(u){var d=a;a=t?t(u,d,o||i):new u(d)}}else if(l.isPlainObject(e))for(var p in a={},r&&(n.dictionary=a),e)a[p]=l.deserialize(e[p],t,n);return s?a[1]:a},exportJSON:function(e,t){var n=l.serialize(e,t);return t&&0==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return l.deserialize("string"===typeof e?JSON.parse(e):e,(function(e,n,r){var i=r&&t&&t.constructor===e,a=i?t:l.create(e.prototype);if(1===n.length&&a instanceof A&&(i||!(a instanceof T))){var o=n[0];l.isPlainObject(o)&&(o.insert=!1,i&&(n=n.concat([A.INSERT])))}return(i?a.set:e).apply(a,n),i&&(t=null),a}))},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var i=0;i<n;i++)e[r+i]=t[i]}return e},splice:function(e,t,n,r){var i=t&&t.length,a=n===s;(n=a?e.length:n)>e.length&&(n=e.length);for(var o=0;o<i;o++)t[o]._index=n+o;if(a)return l.push(e,t),[];var u=[n,r];t&&l.push(u,t);for(var c=e.splice.apply(e,u),h=(o=0,c.length);o<h;o++)c[o]._index=s;for(o=n+i,h=e.length;o<h;o++)e[o]._index=o;return c},capitalize:function(e){return e.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))},camelize:function(e){return e.replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(e,t){if("string"!==typeof e)l.each(e,(function(e,t){this.on(t,e)}),this);else{var n=this._eventTypes,r=n&&n[e],i=this._callbacks=this._callbacks||{};-1===(i=i[e]=i[e]||[]).indexOf(t)&&(i.push(t),r&&r.install&&1===i.length&&r.install.call(this,e))}return this},off:function(e,t){if("string"===typeof e){var n,r=this._eventTypes,i=r&&r[e],a=this._callbacks&&this._callbacks[e];return a&&(!t||-1!==(n=a.indexOf(t))&&1===a.length?(i&&i.uninstall&&i.uninstall.call(this,e),delete this._callbacks[e]):-1!==n&&a.splice(n,1)),this}l.each(e,(function(e,t){this.off(t,e)}),this)},once:function(e,t){return this.on(e,(function n(){t.apply(this,arguments),this.off(e,n)}))},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=l.slice(arguments,1),i=t&&t.target&&!t.currentTarget;n=n.slice(),i&&(t.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,r)){t&&t.stop&&t.stop();break}return i&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t)for(var i in n)if(n[i].length>0){var a=t[i],o=a&&a[r];o&&o.call(this,i)}},statics:{inject:function e(t){var n=t._events;if(n){var r={};l.each(n,(function(e,n){var i="string"===typeof e,a=i?e:n,o=l.capitalize(a),s=a.substring(2).toLowerCase();r[s]=i?{}:e,a="_"+a,t["get"+o]=function(){return this[a]},t["set"+o]=function(e){var t=this[a];t&&this.off(s,t),e&&this.on(s,e),this[a]=e}})),t._eventTypes=r}return e.base.apply(this,arguments)}}},f=l.extend({_class:"PaperScope",initialize:function e(){fe=this,this.settings=new l({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=ue.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ce.nativeModes},ue.release(n)}if(!this.agent){var r=o.navigator.userAgent.toLowerCase(),i=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],a="darwin"===i?"mac":i,s=t.agent=t.browser={platform:a};a&&(s[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(e,t,n,r,i){if(!s.chrome){var a="opera"===t?r:/^(node|trident)$/.test(t)?i:n;s.version=a,s.versionNumber=parseFloat(a),t={trident:"msie",jsdom:"node"}[t]||t,s.name=t,s[t]=!0}})),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=fe.PaperScript.execute(e,this,t);return J.updateFocus(),n},install:function(e){var t=this;for(var n in l.each(["project","view","tool"],(function(n){l.define(e,n,{configurable:!0,get:function(){return t[n]}})})),this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return fe=this,this.project=new M(e),this},createCanvas:function(e,t){return ue.getCanvas(e,t)},activate:function(){fe=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),d=l.extend(h,{initialize:function(e){this._scope=fe,this._index=this._scope[this._list].push(this)-1,!e&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(l.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),p={findItemBoundsCollisions:function(e,t,n){function r(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var r=e[n].getBounds();t[n]=[r.left,r.top,r.right,r.bottom]}return t}var i=r(e),a=t&&t!==e?r(t):i;return this.findBoundsCollisions(i,a,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function i(e){for(var t=Math.min,n=Math.max,r=new Array(e.length),i=0;i<e.length;i++){var a=e[i];r[i]=[t(a[0],a[2],a[4],a[6]),t(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return r}var a=i(e),o=t&&t!==e?i(t):a;if(r){for(var s=this.findBoundsCollisions(a,o,n||0,!1,!0),u=this.findBoundsCollisions(a,o,n||0,!0,!0),c=[],l=0,h=s.length;l<h;l++)c[l]={hor:s[l],ver:u[l]};return c}return this.findBoundsCollisions(a,o,n||0)},findBoundsCollisions:function(e,t,n,r,i){var a=!t||e===t,o=a?e:e.concat(t),s=e.length,u=o.length;function c(e,t,n){for(var r=0,i=e.length;r<i;){var a=i+r>>>1;o[e[a]][t]<n?r=a+1:i=a}return r-1}for(var l=r?1:0,h=l+2,f=r?0:1,d=f+2,p=new Array(u),g=0;g<u;g++)p[g]=g;p.sort((function(e,t){return o[e][l]-o[t][l]}));var v=[],m=new Array(s);for(g=0;g<u;g++){var y=p[g],_=o[y],b=a?y:y-s,x=y<s,w=a||!x,k=x?[]:null;if(v.length){var S=c(v,h,_[l]-n)+1;if(v.splice(0,S),a&&i){k=k.concat(v);for(var C=0;C<v.length;C++)m[E=v[C]].push(b)}else{var M=_[d],A=_[f];for(C=0;C<v.length;C++){var E=v[C],T=o[E],I=E<s,L=a||E>=s;(i||(x&&L||w&&I)&&M>=T[f]-n&&A<=T[d]+n)&&(x&&L&&k.push(a?E:E-s),w&&I&&m[E].push(b))}}}if(x&&(e===t&&k.push(y),m[y]=k),v.length){var O=c(v,h,_[h]);v.splice(O+1,0,y)}else v.push(y)}for(g=0;g<m.length;g++){var P=m[g];P&&P.sort((function(e,t){return e-t}))}return m}},g=l.extend({initialize:function(e){this.precision=l.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});g.instance=new g;var v=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,a=Math.log2||function(e){return Math.log(e)*Math.LOG2E},o=1e-12,s=112e-18;function u(e,t,n){return e<t?t:e>n?n:e}function c(e,t,r){function i(e){var t=134217729*e,n=e-t+t;return[n,e-n]}var a=t*t-e*r,o=t*t+e*r;if(3*n(a)<o){var s=i(e),u=i(t),c=i(r),l=t*t,h=e*r;a=l-h+(u[0]*u[0]-l+2*u[0]*u[1]+u[1]*u[1]-(s[0]*c[0]-h+s[0]*c[1]+s[1]*c[0]+s[1]*c[1]))}return a}function l(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?i(2,-Math.round(a(e))):0}return{EPSILON:o,MACHINE_EPSILON:s,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(e){return e>=-1e-12&&e<=o},isMachineZero:function(e){return e>=-112e-18&&e<=s},clamp:u,integrate:function(n,r,i,a){for(var o=e[a-2],s=t[a-2],u=.5*(i-r),c=u+r,l=0,h=a+1>>1,f=1&a?s[l++]*n(c):0;l<h;){var d=u*o[l];f+=s[l++]*(n(c+d)+n(c-d))}return u*f},findRoot:function(e,t,r,i,a,o,s){for(var c=0;c<o;c++){var l=e(r),h=l/t(r),f=r-h;if(n(h)<s){r=f;break}l>0?(a=r,r=f<=i?.5*(i+a):f):(i=r,r=f>=a?.5*(i+a):f)}return u(r,i,a)},solveQuadratic:function(e,t,i,a,h,f){var d,p=1/0;if(n(e)<o){if(n(t)<o)return n(i)<o?-1:0;d=-i/t}else{var g=c(e,t*=-.5,i);if(g&&n(g)<s){var v=l(n(e),n(t),n(i));v&&(g=c(e*=v,t*=v,i*=v))}if(g>=-112e-18){var m=g<0?0:r(g),y=t+(t<0?-m:m);0===y?p=-(d=i/e):(d=y/e,p=i/y)}}var _=0,b=null==h,x=h-o,w=f+o;return isFinite(d)&&(b||d>x&&d<w)&&(a[_++]=b?d:u(d,h,f)),p!==d&&isFinite(p)&&(b||p>x&&p<w)&&(a[_++]=b?p:u(p,h,f)),_},solveCubic:function(e,t,a,c,h,f,d){var p,g,m,y,_,b=l(n(e),n(t),n(a),n(c));function x(n){var r=e*(p=n);y=(r+(g=r+t))*p+(m=g*p+a),_=m*p+c}if(b&&(e*=b,t*=b,a*=b,c*=b),n(e)<o)e=t,g=a,m=c,p=1/0;else if(n(c)<o)g=t,m=a,p=0;else{x(-t/e/3);var w=_/e,k=i(n(w),1/3),S=w<0?-1:1,C=-y/e,M=C>0?1.324717957244746*Math.max(k,r(C)):k,A=p-S*M;if(A!==p){do{x(A),A=0===y?p:p-_/y/(1+s)}while(S*A>S*p);n(e)*p*p>n(c/p)&&(g=((m=-c/p)-a)/p)}}var E=v.solveQuadratic(e,g,m,h,f,d),T=null==f;return isFinite(p)&&(0===E||E>0&&p!==h[0]&&p!==h[1])&&(T||p>f-o&&p<d+o)&&(h[E++]=T?p:u(p,f,d)),E}}},m={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},y=l.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var a="number"===typeof t;this._set(e,a?t:e),r&&(i=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var o="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new y(this.x,this.y)},toString:function(){var e=g.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();v.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=y.read(arguments),t=this.getLength()*e.getLength();if(v.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=y.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=arguments,t=y.read(e),n=t.x-this.x,r=t.y-this.y,i=n*n+r*r;return l.read(e)?i:Math.sqrt(i)},normalize:function(e){e===s&&(e=1);var t=this.getLength(),n=0!==t?e/t:0,r=new y(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),i=Math.cos(e);return n=new y(n.x*i-n.y*r,n.x*r+n.y*i),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=y.read(arguments);return new y(this.x+e.x,this.y+e.y)},subtract:function(){var e=y.read(arguments);return new y(this.x-e.x,this.y-e.y)},multiply:function(){var e=y.read(arguments);return new y(this.x*e.x,this.y*e.y)},divide:function(){var e=y.read(arguments);return new y(this.x/e.x,this.y/e.y)},modulo:function(){var e=y.read(arguments);return new y(this.x%e.x,this.y%e.y)},negate:function(){return new y(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var e=arguments,t=y.read(e),n=l.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=y.read(arguments);return y.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=y.read(arguments);return y.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=v.isZero;return e(this.x)&&e(this.y)},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.x)||isNaN(this.y)})),isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=y.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=y.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=y.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new y(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=y.read(e),n=y.read(e);return new y(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=y.read(e),n=y.read(e);return new y(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new y(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))}}},l.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new y(t(this.x),t(this.y))}}),{})),_=y.extend({initialize:function(e,t,n,r){this._x=e,this._y=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),b=l.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var a="number"===typeof t;this._set(e,a?t:e),r&&(i=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var o="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var e=g.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=b.read(arguments);return new b(this.width+e.width,this.height+e.height)},subtract:function(){var e=b.read(arguments);return new b(this.width-e.width,this.height-e.height)},multiply:function(){var e=b.read(arguments);return new b(this.width*e.width,this.height*e.height)},divide:function(){var e=b.read(arguments);return new b(this.width/e.width,this.height/e.height)},modulo:function(){var e=b.read(arguments);return new b(this.width%e.width,this.height%e.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var e=v.isZero;return e(this.width)&&e(this.height)},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.width)||isNaN(this.height)})),statics:{min:function(e,t){return new b(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new b(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new b(Math.random(),Math.random())}}},l.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new b(t(this.width),t(this.height))}}),{})),x=b.extend({initialize:function(e,t,n,r){this._width=e,this._height=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),w=l.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,n,r){var i,a=arguments,o=typeof e;if("number"===o?(this._set(e,t,n,r),i=4):"undefined"===o||null===e?(this._set(0,0,0,0),i=null===e?1:0):1===a.length&&(Array.isArray(e)?(this._set.apply(this,e),i=1):e.x!==s||e.width!==s?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),i=1):e.from===s&&e.to===s&&(this._set(0,0,0,0),l.readSupported(a,this)&&(i=1))),i===s){var u,c,h=y.readNamed(a,"from"),f=l.peek(a),d=h.x,p=h.y;if(f&&f.x!==s||l.hasNamed(a,"to")){var g=y.readNamed(a,"to");u=g.x-d,c=g.y-p,u<0&&(d=g.x,u=-u),c<0&&(p=g.y,c=-c)}else{var v=b.read(a);u=v.width,c=v.height}this._set(d,p,u,c),i=a.__index}var m=a.__filtered;return m&&(this.__filtered=m),this.__read&&(this.__read=i),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(e){var t=l.isPlainValue(e)?w.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=g.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){return new(e?y:_)(this.x,this.y,this,"setPoint")},setPoint:function(){var e=y.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){return new(e?b:x)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=b.read(arguments),t=this._sx,n=this._sy,r=e.width,i=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-i)*n),this.width=r,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){return new(e?y:_)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=y.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==s||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(y.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=w.read(arguments),t=l.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=w.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),i=Math.min(this.y+this.height,e.y+e.height);return new w(t,n,r-t,i-n)},unite:function(){var e=w.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),i=Math.max(this.y+this.height,e.y+e.height);return new w(t,n,r-t,i-n)},include:function(){var e=y.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),i=Math.max(this.y+this.height,e.y);return new w(t,n,r-t,i-n)},expand:function(){var e=b.read(arguments),t=e.width,n=e.height;return new w(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===s?e:t)-this.height)}},l.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var i=e[r?0:1],a=e[r?1:0],o="get"+i,s="get"+a,u="set"+i,c="set"+a,l="set"+n;this["get"+n]=function(e){return new(e?y:_)(this[o](),this[s](),this,l)},this[l]=function(){var e=y.read(arguments);this[u](e.x),this[c](e.y)}}),{beans:!0})),k=w.extend({initialize:function(e,t,n,r,i,a){this._set(e,t,n,r,!0),this._owner=i,this._setter=a},_set:function(e,t,n,r,i){return this._x=e,this._y=t,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var e=w.prototype;return l.each(["x","y","width","height"],(function(e){var t=l.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}}),l.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),S=l.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,i=r.length,a=!0;if(i>=6?this._set.apply(this,r):1===i||2===i?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):a=!1:i?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,i,a,o){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=i,this._ty=a,o||this._changed(),this},_serialize:function(e,t){return l.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=g.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,l.pick(e,!0),t),this.isIdentity())},translate:function(){var e=y.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=y.read(e),n=y.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=y.read(arguments,1),n=t.x,r=t.y,i=Math.cos(e),a=Math.sin(e),o=n-n*i+r*a,s=r-n*a-r*i,u=this._a,c=this._b,l=this._c,h=this._d;return this._a=i*u+a*l,this._b=i*c+a*h,this._c=-a*u+i*l,this._d=-a*c+i*h,this._tx+=o*u+s*l,this._ty+=o*c+s*h,this._changed(),this},shear:function(){var e=arguments,t=y.read(e),n=y.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*i,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=y.read(e),n=y.read(e,0,{readNull:!0}),r=Math.PI/180,i=new y(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(i,n)},append:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,a=this._d,o=e._a,s=e._c,u=e._b,c=e._d,l=e._tx,h=e._ty;this._a=o*n+u*i,this._c=s*n+c*i,this._b=o*r+u*a,this._d=s*r+c*a,this._tx+=l*n+h*i,this._ty+=l*r+h*a,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,a=this._d,o=this._tx,s=this._ty,u=e._a,c=e._c,l=e._b,h=e._d,f=e._tx,d=e._ty;this._a=u*n+c*r,this._c=u*i+c*a,this._b=l*n+h*r,this._d=l*i+h*a,this._tx=u*o+c*s+f,this._ty=l*o+h*s+d,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,i=this._tx,a=this._ty,o=e*r-t*n,s=null;return o&&!isNaN(o)&&isFinite(i)&&isFinite(a)&&(this._a=r/o,this._b=-t/o,this._c=-n/o,this._d=e/o,this._tx=(n*a-r*i)/o,this._ty=(t*i-e*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(y.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,i=e.y;return t||(t=new y),t._set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,i=2*n;r<i;r+=2){var a=e[r],o=e[r+1];t[r]=a*this._a+o*this._c+this._tx,t[r+1]=a*this._b+o*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,i=n+e.height,a=[t,n,r,n,r,i,t,i];return this._transformCoordinates(a,a,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),i=r.slice(0,2),a=i.slice(),o=2;o<8;o++){var s=r[o],u=1&o;s<i[u]?i[u]=s:s>a[u]&&(a[u]=s)}return t||(t=new w),t._set(i[0],i[1],a[0]-i[0],a[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(y.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,i=this._b,a=this._c,o=this._d,s=this._tx,u=this._ty,c=r*o-i*a,l=null;if(c&&!isNaN(c)&&isFinite(s)&&isFinite(u)){var h=e.x-this._tx,f=e.y-this._ty;t||(t=new y),l=t._set((h*o-f*a)/c,(f*r-h*i)/c,n)}return l},decompose:function(){var e,t,n,r=this._a,i=this._b,a=this._c,o=this._d,s=r*o-i*a,u=Math.sqrt,c=Math.atan2,l=180/Math.PI;if(0!==r||0!==i){var h=u(r*r+i*i);e=Math.acos(r/h)*(i>0?1:-1),t=[h,s/h],n=[c(r*a+i*o,h*h),0]}else if(0!==a||0!==o){var f=u(a*a+o*o);e=Math.asin(a/f)*(o>0?1:-1),t=[s/f,f],n=[0,c(r*a+i*o,f*f)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*l,scaling:new y(t),skewing:new y(n[0]*l,n[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new y(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},l.each(["a","b","c","d","tx","ty"],(function(e){var t=l.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}}),{})),C=l.extend({_class:"Line",initialize:function(e,t,n,r,i){var a=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=r,a=i):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new y(this._px,this._py)},getVector:function(){return new y(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return C.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return C.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return C.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return y.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return y.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,i,a,o,s,u,c){u||(n-=e,r-=t,o-=i,s-=a);var l=n*s-r*o;if(!v.isMachineZero(l)){var h=e-i,f=t-a,d=(o*f-s*h)/l,p=(n*f-r*h)/l,g=-1e-12,m=1+1e-12;if(c||g<d&&d<m&&g<p&&p<m)return c||(d=d<=0?0:d>=1?1:d),new y(e+d*n,t+d*r)}},getSide:function(e,t,n,r,i,a,o,s){o||(n-=e,r-=t);var u=i-e,c=u*r-(a-t)*n;return!s&&v.isMachineZero(c)&&(c=(u*n+u*n)/(n*n+r*r))>=0&&c<=1&&(c=0),c<0?-1:c>0?1:0},getSignedDistance:function(e,t,n,r,i,a,o){return o||(n-=e,r-=t),0===n?r>0?i-e:e-i:0===r?n<0?a-t:t-a:((i-e)*r-(a-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,i,a,o){return Math.abs(C.getSignedDistance(e,t,n,r,i,a,o))}}}),M=d.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new K(null,null,this),this._view=J.create(this,e||ue.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return l.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var i=this._changesById,a=t._id,o=i[a];o?o.flags|=e:r.push(i[a]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new T({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:O,match:function(n){var r=n._definition,i=r._id;return t[i]||(t[i]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],i=r._selection;1&i&&r.isInserted()?t.push(r):i||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(s,e)},insertLayer:function(e,t){if(t instanceof T){t._remove(!1,!0),l.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(s,new T(A.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return A._getItems(this,e)},getItem:function(e){return A._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return l.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var i=n[r];for(var a in t){var o=t[a];o&&o!=n&&delete o[i._id]}i.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,i=new l({offset:new y(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new S],updateMatrix:!0}),a=0,o=r.length;a<o;a++)r[a].draw(e,i);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var s=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var h in s)s[h]._drawSelection(e,t,u,s,c);e.restore()}}}),A=l.extend(h,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=l.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return l.each(e,(function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&l.isPlainObject(e),r=n&&!0===e.internal,i=this._matrix=new S,a=n&&e.project||fe.project,o=fe.settings;return this._id=r?null:m.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,t&&i.translate(t),i._owner=this,this._style=new K(a._currentStyle,this,a),r||n&&0==e.insert||!o.insertItems&&(!n||1!=e.insert)?this._setProject(a):(n&&e.parent||a)._insertItem(s,this,!0),n&&e!==A.NO_INSERT&&e!==A.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},r=this;function i(i){for(var a in i){var o=r[a];l.equals(o,"leading"===a?1.2*i.fontSize:i[a])||(n[a]=l.serialize(o,e,"data"!==a,t))}}return i(this._serializeFields),this instanceof E||i(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,r=this._project;8&e&&(this._bounds=this._position=this._decomposed=s),16&e&&(this._globalMatrix=s),n&&72&e&&A._clearBoundsCache(n),2&e&&A._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||s,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},l.each(["locked","visible","blendMode","opacity","guide"],(function(e){var t=l.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(r[e]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?y:_,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(y.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new _(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=y.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},l.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(e,t){this[t]=function(t){return this.getBounds(t,e)}}),{beans:!0,getBounds:function(e,t){var n=t||e instanceof S,r=l.set({},n?t:e,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var i=this._getCachedBounds(n&&e,r).rect;return arguments.length?i:new k(i.x,i.y,i.width,i.height,this,"setBounds")},setBounds:function(){var e=w.read(arguments),t=this.getBounds(),n=this._matrix,r=new S,i=e.getCenter();r.translate(i),e.width==t.width&&e.height==t.height||(n.isInvertible()||(n.set(n._backup||(new S).translate(n.getTranslation())),t=this.getBounds()),r.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),i=t.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(A._updateBoundsCache(this,t.cacheItem),A._getBounds(n,e,t)):new w},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,i=t.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),o=i&&(!e||e.equals(a))&&this._getBoundsCacheKey(t,r),s=this._bounds;if(A._updateBoundsCache(this._parent||this._symbol,i),o&&s&&o in s)return{rect:(f=s[o]).rect.clone(),nonscaling:f.nonscaling};var u=this._getBounds(e||a,t),c=u.rect||u,l=this._style,h=u.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(o){s||(this._bounds=s={});var f=s[o]={rect:c.clone(),nonscaling:h,internal:r}}return{rect:c,nonscaling:h}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=s;for(var n=0,r=t.list,i=r.length;n<i;n++){var a=r[n];a!==e&&(a._bounds=a._position=s,a._boundsCache&&A._clearBoundsCache(a))}}},_getBounds:function(e,t,n){var r=1/0,i=-r,a=r,o=i,s=!1;n=n||{};for(var u=0,c=e.length;u<c;u++){var l=e[u];if(l._visible&&!l.isEmpty(!0)){var h=l._getCachedBounds(t&&t.appended(l._matrix),n,!0),f=h.rect;r=Math.min(f.x,r),a=Math.min(f.y,a),i=Math.max(f.x+f.width,i),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(r)?new w(r,a,i-r,o-a):new w,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new _(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=y.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,i=new S,a=v.isZero;if(a(e.x)||a(e.y))i.translate(r.translation),n&&i.rotate(n),i.scale(t.x,t.y),this._matrix.set(i);else{var o=this.getPosition(!0);i.translate(o),n&&i.rotate(n),i.scale(t.x/e.x,t.y/e.y),n&&i.rotate(-n),i.translate(o.negate()),this.transform(i)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var i=0,a=r.length;i<a;i++)r[i]._globalMatrix=null;break}r.push(n),n=n._parent}return t||(t=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&t.prepend(n.getGlobalMatrix(!0))),e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof T)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return l.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(A.NO_INSERT),n=this._children,r=l.pick(e?e.insert:s,e===s||!0===e),i=l.pick(e?e.deep:s,!0);n&&t.copyAttributes(this),n&&!i||t.copyContent(this),n||t.copyAttributes(this),r&&t.insertAbove(this);var a=this._name,o=this._parent;if(a&&o){n=o._children;for(var u=a,c=1;n[a];)a=u+" "+c++;a!==u&&t.setName(a)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var a=n[r];e.hasOwnProperty(a)&&(this[a]=e[a])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var o=e._data,s=e._name;this._data=o?l.clone(o):null,s&&this.setName(s)},rasterize:function(e,t){var n,r,i;l.isPlainObject(e)?(n=e.resolution,r=e.insert,i=e.raster):(n=e,r=t),i||(i=new L(A.NO_INSERT));var a=this.getStrokeBounds(),o=(n||this.getView().getResolution())/72,u=a.getTopLeft().floor(),c=a.getBottomRight().ceil(),h=new b(c.subtract(u)),f=h.multiply(o);if(i.setSize(f,!0),!f.isZero()){var d=i.getContext(!0),p=(new S).scale(o).translate(u.negate());d.save(),p.applyToContext(d),this.draw(d,new l({matrices:[p]})),d.restore()}return i._matrix.set((new S).translate(u.add(h.divide(2))).scale(1/o)),(r===s||r)&&i.insertAbove(this),i},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(y.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new F.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof A&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){var e=arguments;return this._hitTest(y.read(e),D.getOptions(e))}function t(){var e=arguments,t=y.read(e),n=D.getOptions(e),r=[];return this._hitTest(t,new l({all:r},n)),r}function n(e,t,n,r){var i=this._children;if(i)for(var a=i.length-1;a>=0;a--){var o=i[a],s=o!==r&&o._hitTest(e,t,n);if(s&&!t.all)return s}return null}return M.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,i=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(t.tolerance,1e-12),o=t._tolerancePadding=new b(F._getStrokePadding(a,r._shiftless().invert()));if(!(e=r._inverseTransform(e))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(e))return null;var s,u,c=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==l.hyphenate(this._class)||t.class&&!(this instanceof t.class)),h=t.match,f=this;function d(e){return e&&h&&!h(e)&&(e=null),e&&t.all&&t.all.push(e),e}function p(t,n){var r=n?s["get"+n]():f.getPosition();if(e.subtract(r).divide(o).length<=1)return new D(t,f,{name:n?l.hyphenate(n):t,point:r})}var g=t.position,v=t.center,m=t.bounds;if(c&&this._parent&&(g||v||m)){if((v||m)&&(s=this.getInternalBounds()),!(u=g&&p("position")||v&&p("center","Center"))&&m)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],_=0;_<8&&!u;_++)u=p("bounds",y[_]);u=d(u)}return u||(u=this._hitTestChildren(e,t,i)||c&&d(this._hitTestSelf(e,t,i,this.getStrokeScaling()?null:i._shiftless().invert()))||null),u&&u.point&&(u.point=r.transform(u.point)),u},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new D("fill",this)},matches:function(e,t){var n=typeof e;if("object"===n){for(var r in e)if(e.hasOwnProperty(r)&&!this.matches(r,e[r]))return!1;return!0}if("function"===n)return e(this);if("match"===e)return t(this);var i=/^(empty|editable)$/.test(e)?this["is"+l.capitalize(e)]():"type"===e?l.hyphenate(this._class):this[e];if("class"===e){if("function"===typeof t)return this instanceof t;i=this._class}if("function"===typeof t)return!!t(i);if(t){if(t.test)return t.test(i);if(l.isPlainObject(t))return function e(t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],a=n[r];if(l.isPlainObject(i)&&l.isPlainObject(a)){if(!e(i,a))return!1}else if(!l.equals(i,a))return!1}return!0}(t,i)}return l.equals(i,t)},getItems:function(e){return A._getItems(this,e,this._matrix)},getItem:function(e){return A._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,i,a){if(!i){var o="object"===typeof n&&n,s=o&&o.overlapping,u=o&&o.inside,c=(y=s||u)&&w.read([y]);i={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!s,rect:c,path:s&&new F.Rectangle({rectangle:c,insert:!1})},o&&(n=l.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=t._children,f=i.items;r=(c=i.rect)&&(r||new S);for(var d=0,p=h&&h.length;d<p;d++){var g=h[d],v=r&&r.appended(g._matrix),m=!0;if(c){var y=g.getBounds(v);if(!c.intersects(y))continue;c.contains(y)||i.overlapping&&(y.contains(c)||i.path.intersects(g,v))||(m=!1)}if(m&&g.matches(n)&&(f.push(g),a))break;if(!1!==i.recursive&&e(g,n,v,i,a),a&&f.length>0)break}return f}}},{importJSON:function(e){var t=l.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(s,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){for(var r={},i=(t=l.slice(t)).length-1;i>=0;i--){var a=(c=t[i])&&c._id;!c||r[a]?t.splice(i,1):(c._remove(!1,!0),r[a]=!0)}l.splice(n,t,e,0);for(var o=this._project,s=o._changes,u=(i=0,t.length);i<u;i++){var c,h=(c=t[i])._name;c._parent=this,c._setProject(o,!0),h&&c.setName(h),s&&c._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(s,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,i=n[r],a=i?i.indexOf(this):-1;-1!==a&&(t[r]==this&&delete t[r],i.splice(a,1),i.length?t[r]=i[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,i=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),l.splice(n._children,null,i,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=l.pick(t,this._children.length);for(var n=l.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do{t.unshift(e)}while(e=e._parent);return t}for(var n=t(this),r=t(e),i=0,a=Math.min(n.length,r.length);i<a;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},l.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?l:y).read(n),i=y.read(n,0,{readNull:!0});return this.transform((new S)[e](r,i||this.getPosition(!0)))}}),{translate:function(){var e=new S;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,i=e&&!e.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(i||!r.isIdentity()||t&&this._children);if(!i&&!a)return this;if(i){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var o=this._style,s=o.getFillColor(!0),u=o.getStrokeColor(!0);s&&s.transform(e),u&&u.transform(e)}if(a&&(a=this._transformContent(r,t,n))){var c=this._pivot;c&&r._transformPoint(c,c,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var l=this._bounds,h=this._position;(i||a)&&this._changed(25);var f=i&&l&&e.decompose();if(f&&f.skewing.isZero()&&f.rotation%90===0){for(var d in l){var p=l[d];if(p.nonscaling)delete l[d];else if(a||!p.internal){var g=p.rect;e._transformBounds(g,g)}}this._bounds=l;var v=l[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else i&&h&&this._pivot&&(this._position=e._transformPoint(h,h));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var i=0,a=r.length;i<a;i++)r[i].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(y.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(y.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(y.read(arguments))},localToParent:function(){return this._matrix._transformPoint(y.read(arguments))},fitBounds:function(e,t){e=w.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=e.height/e.width,a=(t?r>i:r<i)?e.width/n.width:e.height/n.height,o=new w(new y,new b(n.width*a,n.height*a));o.setCenter(e.getCenter()),this.setBounds(o)}}),{_setStyles:function(e,t,n){var r=this._style,i=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,i)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,i),e.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),o=r.getStrokeCap(),s=r.getMiterLimit();if(a&&(e.lineJoin=a),o&&(e.lineCap=o),s&&(e.miterLimit=s),fe.support.nativeDash){var u=r.getDashArray(),c=r.getDashOffset();u&&u.length&&("setLineDash"in e?(e.setLineDash(u),e.lineDashOffset=c):(e.mozDash=u,e.mozDashOffset=c))}}if(r.hasShadow()){var l=t.pixelRatio||1,h=n._shiftless().prepend((new S).scale(l,l)),f=h.transform(new y(r.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=f.getLength(),e.shadowOffsetX=d.x,e.shadowOffsetY=d.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var r=t.matrices,i=t.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){i=i?i.appended(o):o,r.push(o),t.updateMatrix&&(this._globalMatrix=o);var s,u,c,l=this._blendMode,h=v.clamp(this._opacity,0,1),f="normal"===l,d=ce.nativeModes[l],p=f&&1===h||t.dontStart||t.clip||(d||f&&h<1)&&this._canComposite(),g=t.pixelRatio||1;if(!p){var m=this.getStrokeBounds(i);if(!m.width||!m.height)return void r.pop();c=t.offset,u=t.offset=m.getTopLeft().floor(),s=e,e=ue.getContext(m.getSize().ceil().add(1).multiply(g)),1!==g&&e.scale(g,g)}e.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i,_=!p&&t.clipItem,b=!y||_;if(p?(e.globalAlpha=h,d&&(e.globalCompositeOperation=l)):b&&e.translate(-u.x,-u.y),b&&(p?a:i).applyToContext(e),_&&t.clipItem.draw(e,t.extend({clip:!0})),y){e.setTransform(g,0,0,g,0,0);var x=t.offset;x&&e.translate(-x.x,-x.y)}this._draw(e,t,i,y),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),p||(ce.process(l,e,s,h,u.subtract(c).multiply(g)),ue.release(e),t.offset=c)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof U)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,i){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,u=4&a;if(this._drawSelected||(o=!1),(o||s||u)&&this._isUpdated(i)){var c,l=this.getSelectedColor(!0)||(c=this.getLayer())&&c.getSelectedColor(!0),h=t.appended(this.getGlobalMatrix(!0)),f=n/2;if(e.strokeStyle=e.fillStyle=l?l.toCanvasStyle(e):"#009dec",o&&this._drawSelected(e,h,r),u){var d=this.getPosition(!0),p=this._parent,g=p?p.localToGlobal(d):d,v=g.x,m=g.y;e.beginPath(),e.arc(v,m,f,0,2*Math.PI,!0),e.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],_=f,b=n+1,x=0;x<4;x++){var w=y[x],k=w[0],S=w[1];e.moveTo(v+k*_,m+S*_),e.lineTo(v+k*b,m+S*b),e.stroke()}}if(s){var C=h._transformCorners(this.getInternalBounds());for(e.beginPath(),x=0;x<8;x++)e[x?"lineTo":"moveTo"](C[x],C[++x]);for(e.closePath(),e.stroke(),x=0;x<8;x++)e.fillRect(C[x]-f,C[++x]-f,n,n)}}},_canComposite:function(){return!1}},l.each(["down","drag","up","move"],(function(e){this["removeOn"+l.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}}),{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,i=n&&n.start,a=null!=n&&("number"===typeof n?n:n.duration),o=new oe(this,e,t,a,r,i);return a&&this.on("frame",(function e(t){o._handleFrame(1e3*t.time),o.running||this.off("frame",e)})),o},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),E=A.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(t){e.base.call(this,t),2050&t&&(this._clipItem=s)},_getClipItem:function(){var e=this._clipItem;if(e===s){e=null;for(var t=this._children,n=0,r=t.length;n<r;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),l.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var i=this._getClipItem();return(!i||i.contains(t))&&e.base.call(this,t,n,r,i)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var i=this._children,a=0,o=i.length;a<o;a++){var s=i[a];s!==r&&s.draw(e,t)}}}),T=E.extend({_class:"Layer",initialize:function(){E.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),I=A.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&l.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new x(e.width,e.height,this,"setSize")},setSize:function(){var e=b.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;"rectangle"===t?this._radius.set(b.min(this._radius,e.divide(2).abs())):"circle"===t?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===t&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new x(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=b.read(arguments),this._radius){if(this._radius.equals(e))return;this._radius.set(e),"rectangle"===t?(n=b.max(this._size,e.multiply(2)),this._size.set(n)):"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new(F[l.capitalize(this._type)])({center:new y,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),fe.settings.applyMatrix&&t.setApplyMatrix(!0),(e===s||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var i=this._style,a=i.hasFill(),o=i.hasStroke(),s=t.dontFinish||t.clip,u=!r;if(a||o||s){var c=this._type,l=this._radius,h="circle"===c;if(t.dontStart||e.beginPath(),u&&h)e.arc(0,0,l,0,2*Math.PI,!0);else{var f=h?l:l.width,d=h?l:l.height,p=this._size,g=p.width,v=p.height;if(u&&"rectangle"===c&&0===f&&0===d)e.rect(-g/2,-v/2,g,v);else{var m=g/2,y=v/2,_=.44771525016920644,b=f*_,x=d*_,w=[-m,-y+d,-m,-y+x,-m+b,-y,-m+f,-y,m-f,-y,m-b,-y,m,-y+x,m,-y+d,m,y-d,m,y-x,m-b,y,m-f,y,-m+f,y,-m+b,y,-m,y-x,-m,y-d];r&&r.transform(w,w,32),e.moveTo(w[0],w[1]),e.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),m!==f&&e.lineTo(w[8],w[9]),e.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&e.lineTo(w[16],w[17]),e.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),m!==f&&e.lineTo(w[24],w[25]),e.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}e.closePath()}s||!a&&!o||(this._setStyles(e,t,n),a&&(e.fill(i.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new w(this._size).setCenter(0,0),r=this._style,i=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),i?n.expand(F._getStrokePadding(i,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var r=e._radius;if(!r.isZero())for(var i=e._size.divide(2),a=1;a<=4;a++){var o=new y(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(i),u=s.subtract(o.multiply(r));if(new w(n?s.add(o.multiply(n)):s,u).contains(t))return{point:u,quadrant:a}}}function t(e,t,n,r){var i=e.divide(t);return(!r||i.isInQuadrant(r))&&i.subtract(i.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var r=e(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,a,o){var s=!1,u=this._style,c=i.stroke&&u.hasStroke(),l=i.fill&&u.hasFill();if(c||l){var h=this._type,f=this._radius,d=c?u.getStrokeWidth()/2:0,p=i._tolerancePadding.add(F._getStrokePadding(d,!u.getStrokeScaling()&&o));if("rectangle"===h){var g=p.multiply(2),v=e(this,r,g);if(v)s=t(r.subtract(v.point),f,p,v.quadrant);else{var m=new w(this._size).setCenter(0,0),y=m.expand(g),_=m.expand(g.negate());s=y._containsPoint(r)&&!_._containsPoint(r)}}else s=t(r,f,p)}return s?new D(c?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,r,i){var a=l.create(I.prototype);return a._type=e,a._size=n,a._radius=r,a._initialize(l.getNamed(i),t),a}return{Circle:function(){var t=arguments,n=y.readNamed(t,"center"),r=l.readNamed(t,"radius");return e("circle",n,new b(2*r),r,t)},Rectangle:function(){var t=arguments,n=w.readNamed(t,"rectangle"),r=b.min(b.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=I._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(e){var t,n;if(l.hasNamed(e,"radius"))t=y.readNamed(e,"center"),n=b.readNamed(e,"radius");else{var r=w.readNamed(e,"rectangle");t=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),L=A.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,t){if(!this._initialize(e,t!==s&&y.read(arguments))){var n,r=typeof e,i="string"===r?c.getElementById(e):"object"===r?e:null;if(i&&i!==A.NO_INSERT)if(i.getContext||null!=i.naturalHeight)n=i;else if(i){var a=b.read(arguments);a.isZero()||(n=ue.getCanvas(a))}n?this.setImage(n):this.setSource(e)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=ue.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new x(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=b.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(ue.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&ue.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new y(0,0).transform(e),n=new y(1,0).transform(e).subtract(t),r=new y(0,1).transform(e).subtract(t);return new b(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(e){var n=t.getView(),r=e&&e.type||"load";n&&t.responds(r)&&(fe=n._scope,t.emit(r,new ee(e)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&Q.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&ue.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new b(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=ue.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){ue.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new o.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing="string"===typeof e?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=w.read(arguments),t=ue.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=w.read(arguments),t=new L(A.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=y.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof z?(n=e,t=e.getBounds()):"object"===typeof e&&("width"in e?t=new w(e):"x"in e&&(t=new w(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=Math.min(t.width,32),i=Math.min(t.height,32),a=L._sampleContext;a?a.clearRect(0,0,33,33):a=L._sampleContext=ue.getContext(new b(32)),a.save();var o=(new S).scale(r/t.width,i/t.height).translate(-t.x,-t.y);o.applyToContext(a),n&&n.draw(a,new l({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var s=this.getElement(),u=this._size;s&&a.drawImage(s,-u.width/2,-u.height/2),a.restore();for(var c=a.getImageData(.5,.5,Math.ceil(r),Math.ceil(i)).data,h=[0,0,0],f=0,d=0,p=c.length;d<p;d+=4){var g=c[d+3];f+=g,g/=255,h[0]+=c[d]*g,h[1]+=c[d+1]*g,h[2]+=c[d+2]*g}for(d=0;d<3;d++)h[d]/=f;return f?W.read(h):null},getPixel:function(){var e=y.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new W("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=y.read(e),n=W.read(e),r=n._convert("rgb"),i=n._alpha,a=this.getContext(!0),o=a.createImageData(1,1),s=o.data;s[0]=255*r[0],s[1]=255*r[1],s[2]=255*r[2],s[3]=null!=i?255*i:255,a.putImageData(o,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=b.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=w.read(arguments);return e.isEmpty()&&(e=new w(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=y.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new w(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new D("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=v.clamp(this._opacity,0,1),this._setStyles(e,t,n);var i=this._smoothing,a="off"===i;X.setPrefixed(e,a?"imageSmoothingEnabled":"imageSmoothingQuality",!a&&i),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),O=A.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==s&&y.read(arguments,1))||this.setDefinition(e instanceof P?e:new P(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),i=this._definition._item._hitTest(e,r,n);return i&&(i.item=this),i},_draw:function(e,t){this._definition._item.draw(e,t)}}),P=l.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=m.get(),this.project=fe.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,(function(){return l.serialize([this._class,this._item],e,!1,t)}))},_changed:function(e){8&e&&A._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new y),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new O(this,e)},clone:function(){return new P(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),D=l.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){var t=e&&l.read(e);return new l({type:null,tolerance:fe.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),B=l.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,n,r,i,a){var o,u,c,l,h=arguments.length;h>0&&(null==e||"object"===typeof e?1===h&&e&&"point"in e?(o=e.point,u=e.handleIn,c=e.handleOut,l=e.selection):(o=e,u=t,c=n,l=r):(o=[e,t],u=n!==s?[n,r]:null,c=i!==s?[i,a]:null)),new N(o,this,"_point"),new N(u,this,"_handleIn"),new N(c,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(e,t){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),l.serialize(i,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,r=t._curves,i=this._index;r&&(e&&e!==this._point&&e!==this._handleIn||!(n=i>0?r[i-1]:t._closed?r[r.length-1]:null)||n._changed(),e&&e!==this._point&&e!==this._handleOut||!(n=r[i])||n._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(y.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(y.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(y.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new j(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var r=e||{},i=r.type,a=r.factor,o=this.getPrevious(),u=this.getNext(),c=(o||this)._point,l=this._point,h=(u||this)._point,f=c.getDistance(l),d=l.getDistance(h);if(i&&"catmull-rom"!==i){if("geometric"!==i)throw new Error("Smoothing method '"+i+"' not supported.");if(o&&u){var p=c.subtract(h),g=a===s?.4:a,v=g*f/(f+d);t||this.setHandleIn(p.multiply(v)),n||this.setHandleOut(p.multiply(v-g))}}else{var m=a===s?.5:a,_=Math.pow(f,m),b=_*_,x=Math.pow(d,m),w=x*x;if(!t&&o){var k=2*w+3*x*_+b,S=3*x*(x+_);this.setHandleIn(0!==S?new y((w*c._x+k*l._x-b*h._x)/S-l._x,(w*c._y+k*l._y-b*h._y)/S-l._y):new y)}!n&&u&&(k=2*b+3*_*x+w,S=3*_*(_+x),this.setHandleOut(0!==S?new y((b*h._x+k*l._x-w*c._x)/S-l._x,(b*h._y+k*l._y-w*c._y)/S-l._y):new y))}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new B(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new B(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,i=n,a=e._point,o=t._point,s=e._handleIn,u=t._handleIn,c=t._handleOut,l=e._handleOut;this._point._set(r*a._x+i*o._x,r*a._y+i*o._y,!0),this._handleIn._set(r*s._x+i*u._x,r*s._y+i*u._y,!0),this._handleOut._set(r*l._x+i*c._x,r*l._y+i*c._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=r._x,s=r._y,u=2;return t[0]=o,t[1]=s,i&&(t[u++]=i._x+o,t[u++]=i._y+s),a&&(t[u++]=a._x+o,t[u++]=a._y+s),e&&(e._transformCoordinates(t,t,u/2),o=t[0],s=t[1],n?(r._x=o,r._y=s,u=2,i&&(i._x=t[u++]-o,i._y=t[u++]-s),a&&(a._x=t[u++]-o,a._y=t[u++]-s)):(i||(t[u++]=o,t[u++]=s),a||(t[u++]=o,t[u++]=s))),t}}),N=y.extend({initialize:function(e,t,n){var r,i,a;if(e)if((r=e[0])!==s)i=e[1];else{var o=e;(r=o.x)===s&&(r=(o=y.read(arguments)).x),i=o.y,a=o.selected}else r=i=0;this._x=r,this._y=i,this._owner=t,t[n]=this,a&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=v.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),R=l.extend({_class:"Curve",beans:!0,initialize:function(e,t,n,r,i,a,o,s){var u,c,l,h,f,d,p=arguments.length;3===p?(this._path=e,u=t,c=n):p?1===p?"segment1"in e?(u=new B(e.segment1),c=new B(e.segment2)):"point1"in e?(l=e.point1,f=e.handle1,d=e.handle2,h=e.point2):Array.isArray(e)&&(l=[e[0],e[1]],h=[e[6],e[7]],f=[e[2]-e[0],e[3]-e[1]],d=[e[4]-e[6],e[5]-e[7]]):2===p?(u=new B(e),c=new B(t)):4===p?(l=e,f=t,d=n,h=r):8===p&&(l=[e,t],h=[o,s],f=[n-e,r-t],d=[i-o,a-s]):(u=new B,c=new B),this._segment1=u||new B(l,null,f),this._segment2=c||new B(h,d,null)},_serialize:function(e,t){return l.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=s},clone:function(){return new R(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return R.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;(e=t.remove())&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(y.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(y.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(y.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(y.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return R.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new y(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=R.getLength(this.getValues(),0,1)),this._length},getArea:function(){return R.getArea(this.getValues())},getLine:function(){return new C(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new R(R.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return R.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=null;if(e>=1e-8&&e<=.99999999){var r=R.subdivide(this.getValues(),e),i=r[0],a=r[1],o=t||this.hasHandles(),s=this._segment1,u=this._segment2,c=this._path;o&&(s._handleOut._set(i[2]-i[0],i[3]-i[1]),u._handleIn._set(a[4]-a[6],a[5]-a[7]));var l=i[6],h=i[7],f=new B(new y(l,h),o&&new y(i[4]-l,i[5]-h),o&&new y(a[2]-l,a[3]-h));c?(c.insert(s._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new R(f,u))}return n},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===s?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===s?.5:t?e:this.getTimeAt(e))},reversed:function(){return new R(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var i=e._point,a=e._handleOut,o=t._handleIn,s=t._point,u=i.x,c=i.y,l=s.x,h=s.y,f=r?[u,c,u,c,l,h,l,h]:[u,c,u+a._x,c+a._y,l+o._x,h+o._y,l,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7];t===s&&(t=.5);var h=1-t,f=h*n+t*i,d=h*r+t*a,p=h*i+t*o,g=h*a+t*u,v=h*o+t*c,m=h*u+t*l,y=h*f+t*p,_=h*d+t*g,b=h*p+t*v,x=h*g+t*m,w=h*y+t*b,k=h*_+t*x;return[[n,r,f,d,y,_,w,k],[w,k,b,x,v,m,c,l]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,i=e[r+0],a=e[r+2],o=e[r+4],s=e[r+6];if(i>=a===a>=o&&a>=o===o>=s||R.isStraight(e))n.push(e);else{var u=3*(a-o)-i+s,c=2*(i+o)-4*a,l=a-i,h=[],f=v.solveQuadratic(u,c,l,h,1e-8,.99999999);if(f){h.sort();var d=h[0],p=R.subdivide(e,d);n.push(p[0]),f>1&&(d=(h[1]-d)/(1-d),p=R.subdivide(p[1],d),n.push(p[0])),n.push(p[1])}else n.push(e)}return n},solveCubic:function(e,t,n,r,i,a){var o=e[t],s=e[t+2],u=e[t+4],c=e[t+6],l=0;if(!(o<n&&c<n&&s<n&&u<n||o>n&&c>n&&s>n&&u>n)){var h=3*(s-o),f=3*(u-s)-h,d=c-o-h-f;l=v.solveCubic(d,f,h,o-n,r,i,a)}return l},getTimeOf:function(e,t){var n=new y(e[0],e[1]),r=new y(e[6],e[7]),i=1e-7;if(null===(t.isClose(n,1e-12)?0:t.isClose(r,1e-12)?1:null))for(var a=[t.x,t.y],o=[],s=0;s<2;s++)for(var u=R.solveCubic(e,s,a[s],o,0,1),c=0;c<u;c++){var l=o[c];if(t.isClose(R.getPoint(e,l),i))return l}return t.isClose(n,i)?0:t.isClose(r,i)?1:null},getNearestTime:function(e,t){if(R.isStraight(e)){var n=e[0],r=e[1],i=e[6]-n,a=e[7]-r,o=i*i+a*a;if(0===o)return 0;var s=((t.x-n)*i+(t.y-r)*a)/o;return s<1e-12?0:s>.999999999999?1:R.getTimeOf(e,new y(n+s*i,r+s*a))}var u=1/0,c=0;function l(n){if(n>=0&&n<=1){var r=t.getDistance(R.getPoint(e,n),!0);if(r<u)return u=r,c=n,!0}}for(var h=0;h<=100;h++)l(h/100);for(var f=.005;f>1e-8;)l(c-f)||l(c+f)||(f/=2);return c},getPart:function(e,t,n){var r=t>n;if(r){var i=t;t=n,n=i}return t>0&&(e=R.subdivide(e,t)[1]),n<1&&(e=R.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=3*i-2*n-u,h=3*a-2*r-c,f=3*o-2*u-n,d=3*s-2*c-r;return Math.max(l*l,f*f)+Math.max(h*h,d*d)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7];return 3*((u-n)*(r+a)-(s-t)*(i+o)+i*(t-a)-r*(n-o)+u*(a+t/3)-s*(o+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],i=0;i<2;i++)R._addBounds(e[i],e[i+2],e[i+4],e[i+6],i,0,t,n,r);return new w(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,i,a,o,s,u){function c(e,t){var n=e-t,r=e+t;n<o[i]&&(o[i]=n),r>s[i]&&(s[i]=r)}a/=2;var l=o[i]+a,h=s[i]-a;if(e<l||t<l||n<l||r<l||e>h||t>h||n>h||r>h)if(t<e!=t<r&&n<e!=n<r)c(e,0),c(r,0);else{var f=3*(t-n)-e+r,d=2*(e+n)-4*t,p=t-e,g=v.solveQuadratic(f,d,p,u);c(r,0);for(var m=0;m<g;m++){var y=u[m],_=1-y;1e-8<=y&&y<=.99999999&&c(_*_*_*e+3*_*_*y*t+3*_*y*y*n+y*y*y*r,a)}}}}},l.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=F[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}}),{}),l.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var i=r.subtract(e);if(i.isZero())return!1;if(i.isCollinear(t)&&i.isCollinear(n)){var a=new C(e,r);if(a.getDistance(e.add(t))<1e-7&&a.getDistance(r.add(n))<1e-7){var o=i.dot(i),s=i.dot(t)/o,u=i.dot(n)/o;return s>=0&&s<=1&&u<=0&&u>=-1}}return!1},isLinear:function(e,t,n,r){var i=r.subtract(e).divide(3);return t.equals(i)&&n.negate().equals(i)}},(function(e,t){this[t]=function(t){var n=this._segment1,r=this._segment2;return e(n._point,n._handleOut,r._handleIn,r._point,t)},this.statics[t]=function(t,n){var r=t[0],i=t[1],a=t[6],o=t[7];return e(new y(r,i),new y(t[2]-r,t[3]-i),new y(t[4]-a,t[5]-o),new y(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new j(this,e):null},getTimeAt:function(e,t){return R.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=y.read(arguments);return e.isZero()?[]:R.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(y.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return R.getTimeOf(this.getValues(),y.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=y.read(arguments),t=this.getValues(),n=R.getNearestTime(t,e),r=R.getPoint(t,n);return new j(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return l.each(e,(function(e){this[e+"At"]=function(t,n){var r=this.getValues();return R[e](r,n?t:R.getTimeAt(r,t))},this[e+"AtTime"]=function(t){return R[e](this.getValues(),t)}}),{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=9*(r-a)+3*(s-t),l=6*(t+a)-12*r,h=3*(r-t),f=9*(i-o)+3*(u-n),d=6*(n+o)-12*i,p=3*(i-n);return function(e){var t=(c*e+l)*e+h,n=(f*e+d)*e+p;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function n(e,t,n,r){if(null==t||t<0||t>1)return null;var i=e[0],a=e[1],o=e[2],s=e[3],u=e[4],c=e[5],l=e[6],h=e[7],f=v.isZero;f(o-i)&&f(s-a)&&(o=i,s=a),f(u-l)&&f(c-h)&&(u=l,c=h);var d,p,g=3*(o-i),m=3*(u-o)-g,_=l-i-g-m,b=3*(s-a),x=3*(c-s)-b,w=h-a-b-x;if(0===n)d=0===t?i:1===t?l:((_*t+m)*t+g)*t+i,p=0===t?a:1===t?h:((w*t+x)*t+b)*t+a;else{var k=1e-8,S=1-k;if(t<k?(d=g,p=b):t>S?(d=3*(l-u),p=3*(h-c)):(d=(3*_*t+2*m)*t+g,p=(3*w*t+2*x)*t+b),r){0===d&&0===p&&(t<k||t>S)&&(d=u-o,p=c-s);var C=Math.sqrt(d*d+p*p);C&&(d/=C,p/=C)}if(3===n){u=6*_*t+2*m,c=6*w*t+2*x;var M=Math.pow(d*d+p*p,1.5);d=0!==M?(d*c-p*u)/M:0,p=0}}return 2===n?new y(p,-d):new y(d,p)}return{statics:{classify:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=r*(n-c)+i*(u-t)+t*c-n*u,h=3*(a*(i-n)+o*(t-r)+r*n-i*t),f=h-l,d=f-l+(t*(c-o)+n*(a-u)+u*o-c*a),p=Math.sqrt(d*d+f*f+h*h),g=0!==p?1/p:0,m=v.isZero,y="serpentine";function _(e,t,n){var r=t!==s,i=r&&t>0&&t<1,a=r&&n>0&&n<1;return!r||(i||a)&&("loop"!==e||i&&a)||(e="arch",i=a=!1),{type:e,roots:i||a?i&&a?t<n?[t,n]:[n,t]:[i?t:n]:null}}if(f*=g,h*=g,m(d*=g))return m(f)?_(m(h)?"line":"quadratic"):_(y,h/(3*f));var b=3*f*f-4*d*h;if(m(b))return _("cusp",f/(2*d));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),w=2*d;return _(b>0?y:"loop",(f+x)/w,(f-x)/w)},getLength:function(n,r,i,a){if(r===s&&(r=0),i===s&&(i=1),R.isStraight(n)){var o=n;i<1&&(o=R.subdivide(o,i)[0],r/=i),r>0&&(o=R.subdivide(o,r)[1]);var u=o[6]-o[0],c=o[7]-o[1];return Math.sqrt(u*u+c*c)}return v.integrate(a||e(n),r,i,t(r,i))},getTimeAt:function(n,r,i){if(i===s&&(i=r<0?1:0),0===r)return i;var a=Math.abs,o=r>0,u=o?i:0,c=o?1:i,l=e(n),h=R.getLength(n,u,c,l),f=a(r)-h;if(a(f)<1e-12)return o?c:u;if(f>1e-12)return null;var d=r/h,p=0;return v.findRoot((function(e){return p+=v.integrate(l,i,e,t(i,e)),i=e,p-r}),l,i+d,u,c,32,1e-12)},getPoint:function(e,t){return n(e,t,0,!1)},getTangent:function(e,t){return n(e,t,1,!0)},getWeightedTangent:function(e,t){return n(e,t,1,!1)},getNormal:function(e,t){return n(e,t,2,!0)},getWeightedNormal:function(e,t){return n(e,t,2,!1)},getCurvature:function(e,t){return n(e,t,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=3*r-t-3*a+e[6],u=3*t-6*r+3*a,c=-3*t+3*r,l=3*i-n-3*o+e[7],h=3*n-6*i+3*o,f=-3*n+3*i,d=[];return v.solveCubic(9*(s*s+l*l),9*(s*u+h*l),2*(u*u+h*h)+3*(c*s+f*l),c*u+h*f,d,1e-8,.99999999),d.sort()}}}},new function(){function e(e,t,n,r,i,a,o){var s=!o&&n.getPrevious()===i,u=!o&&n!==i&&n.getNext()===i,c=1e-8,l=1-c;if(null!==r&&r>=(s?c:0)&&r<=(u?l:1)&&null!==a&&a>=(u?c:0)&&a<=(s?l:1)){var h=new j(n,r,null,o),f=new j(i,a,null,o);h._intersection=f,f._intersection=h,t&&!t(h)||j.insert(e,h,!0)}}function t(r,i,a,o,s,u,c,l,h,f,d,p,g){if(++h>=4096||++l>=40)return h;var v,m,y=i[0],_=i[1],b=i[6],x=i[7],w=C.getSignedDistance,k=w(y,_,b,x,i[2],i[3]),S=w(y,_,b,x,i[4],i[5]),M=k*S>0?3/4:4/9,A=M*Math.min(0,k,S),E=M*Math.max(0,k,S),T=w(y,_,b,x,r[0],r[1]),I=w(y,_,b,x,r[2],r[3]),L=w(y,_,b,x,r[4],r[5]),O=w(y,_,b,x,r[6],r[7]),P=function(e,t,n,r){var i,a=[0,e],o=[1/3,t],s=[2/3,n],u=[1,r],c=t-(2*e+r)/3,l=n-(e+2*r)/3;if(c*l<0)i=[[a,o,u],[a,s,u]];else{var h=c/l;i=[h>=2?[a,o,u]:h<=.5?[a,s,u]:[a,o,s,u],[a,u]]}return(c||l)<0?i.reverse():i}(T,I,L,O),D=P[0],B=P[1];if(0===k&&0===S&&0===T&&0===I&&0===L&&0===O||null==(v=n(D,B,A,E))||null==(m=n(D.reverse(),B.reverse(),A,E)))return h;var N=f+(d-f)*v,j=f+(d-f)*m;if(Math.max(g-p,j-N)<1e-9){var z=(N+j)/2,F=(p+g)/2;e(s,u,c?o:a,c?F:z,c?a:o,c?z:F)}else{r=R.getPart(r,v,m);var U=g-p;if(m-v>.8)if(j-N>U)z=(N+j)/2,h=t(i,(V=R.subdivide(r,.5))[0],o,a,s,u,!c,l,h,p,g,N,z),h=t(i,V[1],o,a,s,u,!c,l,h,p,g,z,j);else{var V;F=(p+g)/2,h=t((V=R.subdivide(i,.5))[0],r,o,a,s,u,!c,l,h,p,F,N,j),h=t(V[1],r,o,a,s,u,!c,l,h,F,g,N,j)}else h=0===U||U>=1e-9?t(i,r,o,a,s,u,!c,l,h,p,g,N,j):t(r,i,a,o,s,u,c,l,h,N,j,p,g)}return h}function n(e,t,n,i){return e[0][1]<n?r(e,!0,n):t[0][1]>i?r(t,!1,i):e[0][0]}function r(e,t,n){for(var r=e[0][0],i=e[0][1],a=1,o=e.length;a<o;a++){var s=e[a][0],u=e[a][1];if(t?u>=n:u<=n)return u===n?s:r+(n-i)*(s-r)/(u-i);r=s,i=u}return null}function i(e,t,n,r,i){var a=v.isZero;if(a(r)&&a(i)){var o=R.getTimeOf(e,new y(t,n));return null===o?[]:[o]}for(var s=Math.atan2(-i,r),u=Math.sin(s),c=Math.cos(s),l=[],h=[],f=0;f<8;f+=2){var d=e[f]-t,p=e[f+1]-n;l.push(d*c-p*u,d*u+p*c)}return R.solveCubic(l,1,0,h,0,1),h}function a(t,n,r,a,o,s,u){for(var c=n[0],l=n[1],h=i(t,c,l,n[6]-c,n[7]-l),f=0,d=h.length;f<d;f++){var p=h[f],g=R.getPoint(t,p),v=R.getTimeOf(n,g);null!==v&&e(o,s,u?a:r,u?v:p,u?r:a,u?p:v)}}function o(t,n,r,i,a,o){var s=C.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);s&&e(a,o,r,R.getTimeOf(t,s),i,R.getTimeOf(n,s))}function s(n,r,i,s,u,l){var h=1e-12,f=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+h>f(r[0],r[2],r[4],r[6])&&f(n[0],n[2],n[4],n[6])-h<d(r[0],r[2],r[4],r[6])&&d(n[1],n[3],n[5],n[7])+h>f(r[1],r[3],r[5],r[7])&&f(n[1],n[3],n[5],n[7])-h<d(r[1],r[3],r[5],r[7])){var p=c(n,r);if(p)for(var g=0;g<2;g++){var v=p[g];e(u,l,i,v[0],s,v[1],!0)}else{var m=R.isStraight(n),_=R.isStraight(r),b=m&&_,x=m&&!_,w=u.length;if((b?o:m||_?a:t)(x?r:n,x?n:r,x?s:i,x?i:s,u,l,x,0,0,0,1,0,1),!b||u.length===w)for(g=0;g<4;g++){var k=g>>1,S=1&g,C=6*k,M=6*S,A=new y(n[C],n[C+1]),E=new y(r[M],r[M+1]);A.isClose(E,h)&&e(u,l,i,k,s,S)}}}return u}function u(t,n,r,i){var a=R.classify(t);if("loop"===a.type){var o=a.roots;e(r,i,n,o[0],n,o[1])}return r}function c(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var r=Math.abs,i=C.getDistance,a=1e-7,o=R.isStraight(e),s=R.isStraight(t),u=o&&s,c=n(e)<n(t),l=c?t:e,h=c?e:t,f=l[0],d=l[1],p=l[6]-f,g=l[7]-d;if(i(f,d,p,g,h[0],h[1],!0)<a&&i(f,d,p,g,h[6],h[7],!0)<a)!u&&i(f,d,p,g,l[2],l[3],!0)<a&&i(f,d,p,g,l[4],l[5],!0)<a&&i(f,d,p,g,h[2],h[3],!0)<a&&i(f,d,p,g,h[4],h[5],!0)<a&&(o=s=u=!0);else if(u)return null;if(o^s)return null;for(var v=[e,t],m=[],_=0;_<4&&m.length<2;_++){var b=1&_,x=1^b,w=_>>1,k=R.getTimeOf(v[b],new y(v[x][w?6:0],v[x][w?7:1]));if(null!=k){var S=b?[w,k]:[k,w];(!m.length||r(S[0]-m[0][0])>1e-8&&r(S[1]-m[0][1])>1e-8)&&m.push(S)}if(_>2&&!m.length)break}if(2!==m.length)m=null;else if(!u){var M=R.getPart(e,m[0][0],m[1][0]),A=R.getPart(t,m[0][1],m[1][1]);(r(A[2]-M[2])>a||r(A[3]-M[3])>a||r(A[4]-M[4])>a||r(A[5]-M[5])>a)&&(m=null)}return m}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?s(t,n,this,e,[]):u(t,this,[])},statics:{getOverlaps:c,getIntersections:function(e,t,n,r,i,a){var o=!t;o&&(t=e);for(var c=e.length,l=t.length,h=new Array(c),f=o?h:new Array(l),d=[],g=0;g<c;g++)h[g]=e[g].getValues(r);if(!o)for(g=0;g<l;g++)f[g]=t[g].getValues(i);for(var v=p.findCurveBoundsCollisions(h,f,1e-7),m=0;m<c;m++){var y=e[m],_=h[m];o&&u(_,y,d,n);var b=v[m];if(b)for(var x=0;x<b.length;x++){if(a&&d.length)return d;var w=b[x];if(!o||w>m){var k=t[w];s(_,f[w],y,k,d,n)}}}return d},getCurveLineIntersections:i,getTimesWithTangent:function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=t.normalize(),h=l.x,f=l.y,d=3*u-9*o+9*i-3*n,p=3*c-9*s+9*a-3*r,g=6*o-12*i+6*n,m=6*s-12*a+6*r,y=3*i-3*n,_=3*a-3*r,b=2*d*f-2*p*h,x=[];if(Math.abs(b)<v.CURVETIME_EPSILON){if(0!=(b=d*m-p*g)){var w=-(d*_-p*y)/b;w>=0&&w<=1&&x.push(w)}}else{var k=(g*g-4*d*y)*f*f+(-2*g*m+4*p*y+4*d*_)*h*f+(m*m-4*p*_)*h*h,S=g*f-m*h;if(k>=0&&0!=b){var C=Math.sqrt(k),M=-(S+C)/b,A=(-S+C)/b;M>=0&&M<=1&&x.push(M),A>=0&&A<=1&&x.push(A)}}return x}}}}),j=l.extend({_class:"CurveLocation",initialize:function(e,t,n,r,i){if(t>=.99999999){var a=e.getNext();a&&(t=0,e=a)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;function n(e){var n=e&&e.getCurve();if(n&&null!=(t._time=n.getTimeOf(t._point)))return t._setCurve(n),n}return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var r=t.getCurves(),i=0;i<n;i++)e+=r[i].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof j){var r=this.getCurve(),i=e.getCurve(),a=r._path;if(a===i._path){var o=Math.abs,s=o(this.getOffset()-e.getOffset()),u=!t&&this._intersection,c=!t&&e._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!u&&!c||u&&c&&u.equals(c,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=g.instance;t&&e.push("point: "+t);var r=this.getIndex();null!=r&&e.push("index: "+r);var i=this.getTime();return null!=i&&e.push("time: "+n.number(i)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,i=1-r,a=t>=r&&t<=i,o=n>=r&&n<=i;if(a&&o)return!this.isTouching();var s=this.getCurve(),u=s&&t<r?s.getPrevious():s,c=e.getCurve(),l=c&&n<r?c.getPrevious():c;if(t>i&&(s=s.getNext()),n>i&&(c=c.getNext()),!u||!s||!l||!c)return!1;var h=[];function f(e,t){var n=e.getValues(),r=R.classify(n).roots||R.getPeaks(n),i=r.length,a=R.getLength(n,t&&i?r[i-1]:0,!t&&i?r[0]:1);h.push(i?a:a/32)}function d(e,t,n){return t<n?e>t&&e<n:e>t||e<n}a||(f(u,!0),f(s,!1)),o||(f(l,!0),f(c,!1));var p=this.getPoint(),g=Math.min.apply(Math,h),v=a?s.getTangentAtTime(t):s.getPointAt(g).subtract(p),m=a?v.negate():u.getPointAt(-g).subtract(p),y=o?c.getTangentAtTime(n):c.getPointAt(g).subtract(p),_=o?y.negate():l.getPointAt(-g).subtract(p),b=m.getAngle(),x=v.getAngle(),w=_.getAngle(),k=y.getAngle();return!!(a?d(b,w,k)^d(x,w,k)&&d(b,k,w)^d(x,k,w):d(w,b,x)^d(k,b,x)&&d(w,x,b)^d(k,x,b))},hasOverlap:function(){return!!this._overlap}},l.each(R._evaluateMethods,(function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}}),{preserve:!0}),new function(){function e(e,t,n){var r=e.length,i=0,a=r-1;function o(n,i){for(var a=n+i;a>=-1&&a<=r;a+=i){var o=e[(a%r+r)%r];if(!t.getPoint().isClose(o.getPoint(),1e-7))break;if(t.equals(o))return o}return null}for(;i<=a;){var s,u=i+a>>>1,c=e[u];if(n&&(s=t.equals(c)?c:o(u,-1)||o(u,1)))return t._overlap&&(s._overlap=s._intersection._overlap=!0),s;var l=t.getPath(),h=c.getPath();(l!==h?l._id-h._id:t.getIndex()+t.getTime()-(c.getIndex()+c.getTime()))<0?a=u-1:i=u+1}return e.splice(i,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),z=A.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(l.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:"string"===typeof e&&(t=e),n){var i=n[0];r=i&&Array.isArray(i[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));return new(r?U:F)(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t,n,r,i=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new y,s=new y;function u(e,n){var r=+t[e];return a&&(r+=o[n]),r}function c(e){return new y(u(e,"x"),u(e+1,"y"))}this.clear();for(var l=0,h=i&&i.length;l<h;l++){var f=i[l],d=f[0],p=d.toLowerCase(),g=(t=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&t.length;switch(a=d===p,"z"!==n||/[mz]/.test(p)||this.moveTo(o),p){case"m":case"l":for(var v="m"===p,m=0;m<g;m+=2)this[v?"moveTo":"lineTo"](o=c(m)),v&&(s=o,v=!1);r=o;break;case"h":case"v":var _="h"===p?"x":"y";for(o=o.clone(),m=0;m<g;m++)o[_]=u(m,_),this.lineTo(o);r=o;break;case"c":for(m=0;m<g;m+=6)this.cubicCurveTo(c(m),r=c(m+2),o=c(m+4));break;case"s":for(m=0;m<g;m+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(r):o,r=c(m),o=c(m+2)),n=p;break;case"q":for(m=0;m<g;m+=4)this.quadraticCurveTo(r=c(m),o=c(m+2));break;case"t":for(m=0;m<g;m+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?o.multiply(2).subtract(r):o,o=c(m)),n=p;break;case"a":for(m=0;m<g;m+=7)this.arcTo(o=c(m+5),new b(+t[m],+t[m+1]),+t[m+2],+t[m+4],+t[m+3]);break;case"z":this.closePath(1e-12),o=s}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,n,r){var i=this===e||!e,a=this._matrix._orNullIfIdentity(),o=i?a:(n||e._matrix)._orNullIfIdentity();return i||this.getBounds(a).intersects(e.getBounds(o),1e-12)?R.getIntersections(this.getCurves(),!i&&e.getCurves(),t,a,o,r):[]},getCrossings:function(e){return this.getIntersections(e,(function(e){return e.isCrossing()}))},getNearestLocation:function(){for(var e=y.read(arguments),t=this.getCurves(),n=1/0,r=null,i=0,a=t.length;i<a;i++){var o=t[i].getNearestLocation(e);o._distance<n&&(n=o._distance,r=o)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e},interpolate:function(e,t,n){var r=!this._children,i=r?"_segments":"_children",a=e[i],o=t[i],s=this[i];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var u=s.length,c=o.length;if(u<c)for(var l=r?B:F,h=u;h<c;h++)this.add(new l);else u>c&&this[r?"removeSegments":"removeChildren"](c,u);for(h=0;h<c;h++)s[h].interpolate(a[h],o[h],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],i=n.length,a=r.length,o=[],s=0;t=!0;for(var u=p.findItemBoundsCollisions(n,r,v.GEOMETRIC_EPSILON),c=i-1;c>=0&&t;c--){var l=n[c];t=!1;var h=u[c];if(h)for(var f=h.length-1;f>=0&&!t;f--)l.compare(r[h[f]])&&(o[h[f]]||(o[h[f]]=!0,s++),t=!0)}t=t&&s===a}return t}}),F=z.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=arguments,n=Array.isArray(e)?"object"===typeof e[0]?e:t:!e||e.size!==s||e.x===s&&e.point===s?null:t;n&&n.length>0?this.setSegments(n):(this._curves=s,this._segmentSelection=0,n||"string"!==typeof e||(this.setPathData(e),e=null)),this._initialize(!n&&e)},_equals:function(e){return this._closed===e._closed&&l.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),8&t){if(this._length=this._area=s,32&t)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 64&t&&(this._bounds=s)},getStyle:function(){var e=this._parent;return(e instanceof U?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,n){var r=e[n-1];"boolean"===typeof r&&(this.setClosed(r),n--),this._add(B.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new R(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new R(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n,r,i,a,o,s,u,c,l=this._segments,h=l.length,f=new g(t),d=new Array(6),p=!0,v=[];function m(t,l){if(t._transformCoordinates(e,d),n=d[0],r=d[1],p)v.push("M"+f.pair(n,r)),p=!1;else if(o=d[2],s=d[3],o===n&&s===r&&u===i&&c===a){if(!l){var h=n-i,g=r-a;v.push(0===h?"v"+f.number(g):0===g?"h"+f.number(h):"l"+f.pair(h,g))}}else v.push("c"+f.pair(u-i,c-a)+" "+f.pair(o-i,s-a)+" "+f.pair(n-i,r-a));i=n,a=r,u=d[4],c=d[5]}if(!h)return"";for(var y=0;y<h;y++)m(l[y]);return this._closed&&h>0&&(m(l[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,i=t.length;r<i;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,r=this._curves,i=e.length,a=null==t,o=(t=a?n.length:t,0);o<i;o++){var s=e[o];s._path&&(s=e[o]=s.clone()),s._path=this,s._index=t+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)l.push(n,e);else{n.splice.apply(n,[t,0].concat(e)),o=t+i;for(var u=n.length;o<u;o++)n[o]._index=o}if(r){var c=this._countCurves(),h=t>0&&t+i-1===c?t-1:t,f=h,d=Math.min(h+i,c);for(e._curves&&(r.splice.apply(r,[h,0].concat(e._curves)),f+=e._curves.length),o=f;o<d;o++)r.splice(o,0,new R(this,null,null));this._adjustCurves(h,d)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n,r=this._segments,i=this._curves,a=e;a<t;a++)(n=i[a])._path=this,n._segment1=r[a],n._segment2=r[a+1]||r[0],n._changed();(n=i[this._closed&&!e?r.length-1:e-1])&&(n._segment2=r[e]||r[0],n._changed()),(n=i[t])&&(n._segment1=r[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&"number"!==typeof e?this._add(B.readList(t)):this._add([B.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&"number"!==typeof t?this._add(B.readList(n,1),e):this._add([B.read(n,1)],e)[0]},addSegment:function(){return this._add([B.read(arguments)])[0]},insertSegment:function(e){return this._add([B.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(B.readList(e))},insertSegments:function(e,t){return this._add(B.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=l.pick(t,this._segments.length);var r=this._segments,i=this._curves,a=r.length,o=r.splice(e,t-e),s=o.length;if(!s)return o;for(var u=0;u<s;u++){var c=o[u];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}u=e;for(var h=r.length;u<h;u++)r[u]._index=u;if(i){var f=e>0&&t===a+(this._closed?1:0)?e-1:e;for(u=(i=i.splice(f,s)).length-1;u>=0;u--)i[u]._path=null;n&&(o._curves=i.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var r=0,i=t.length;r<i;r++){var a=r+1===i;e+=R.getArea(R.getValues(t[r],t[a?0:r+1],null,a&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)t[i]._selection=r},_updateSelection:function(e,t,n){e._selection=n,(this._segmentSelection+=n-t)>0&&this.setSelected(!0)},divideAt:function(e){var t,n=this.getLocationAt(e);return n&&(t=n.getCurve().divideAt(n.getCurveOffset()))?t._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time;r>.99999999&&(n++,r=0);var i=this.getCurves();if(n>=0&&n<i.length){r>=1e-8&&i[n++].divideAtTime(r);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new F(A.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(e,t){var n,r=t===s?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return null!=r?this.splitAt(r):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,i=this.getLastSegment(),a=e.getLastSegment();if(!a)return this;i&&i._point.isClose(a._point,n)&&e.reverse();var o=e.getFirstSegment();if(i&&i._point.isClose(o._point,n))i.setHandleOut(o._handleOut),this._add(r.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&e.reverse(),a=e.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var u=this.getFirstSegment(),c=this.getLastSegment();return u!==c&&u._point.isClose(c._point,n)&&(u.setHandleIn(c._handleIn),c.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,i=t.length-1;i>=0;i--){var a=t[i];!a.hasHandles()&&(!a.hasLength(r)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new V(this,e||.25,256,!0).parts,n=t.length,r=[],i=0;i<n;i++)r.push(new B(t[i].curve.slice(0,2)));!this._closed&&n>0&&r.push(new B(t[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(e){var t=new H(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},r=n.type||"asymmetric",i=this._segments,a=i.length,o=this._closed;function u(e,n){var r=e&&e.index;if(null!=r){var i=e.path;if(i&&i!==t)throw new Error(e._class+" "+r+" of "+i+" is not part of "+t);n&&e instanceof R&&r++}else r="number"===typeof e?e:n;return Math.min(r<0&&o?r%a:r<0?r+a:r,a-1)}var c=o&&n.from===s&&n.to===s,l=u(n.from,0),h=u(n.to,a-1);if(l>h)if(o)l-=a;else{var f=l;l=h,h=f}if(/^(?:asymmetric|continuous)$/.test(r)){var d="asymmetric"===r,p=Math.min,g=h-l+1,v=g-1,m=c?p(g,4):1,y=m,_=m,b=[];if(o||(y=p(1,l),_=p(1,a-h-1)),(v+=y+_)<=1)return;for(var x=0,w=l-y;x<=v;x++,w++)b[x]=i[(w<0?w+a:w)%a]._point;var k=b[0]._x+2*b[1]._x,S=b[0]._y+2*b[1]._y,C=2,M=v-1,A=[k],E=[S],T=[C],I=[],L=[];for(x=1;x<v;x++){var O=x<M,P=O?4:d?2:7,D=O?4:d?3:8,B=O?2:d?0:1,N=(O||d?1:2)/C;C=T[x]=P-N,k=A[x]=D*b[x]._x+B*b[x+1]._x-N*k,S=E[x]=D*b[x]._y+B*b[x+1]._y-N*S}for(I[M]=A[M]/T[M],L[M]=E[M]/T[M],x=v-2;x>=0;x--)I[x]=(A[x]-I[x+1])/T[x],L[x]=(E[x]-L[x+1])/T[x];I[v]=(3*b[v]._x-I[M])/2,L[v]=(3*b[v]._y-L[M])/2,x=y;var j=v-_;for(w=l;x<=j;x++,w++){var z=i[w<0?w+a:w],F=z._point,U=I[x]-F._x,V=L[x]-F._y;(c||x<j)&&z.setHandleOut(U,V),(c||x>y)&&z.setHandleIn(-U,-V)}}else for(x=l;x<=h;x++)i[x<0?x+a:x].smooth(n,!c&&x===l,!c&&x===h)},toShape:function(e){if(!this._closed)return null;var t,n,r,i,a=this._segments;function o(e,t){var n=a[e],r=n.getNext(),i=a[t],o=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&o._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(o._point.subtract(i._point))}function u(e){var t=a[e],n=t.getNext(),r=t._handleOut,i=n._handleIn,o=.5522847498307936;if(r.isOrthogonal(i)){var s=t._point,u=n._point,c=new C(s,r,!0).intersect(new C(u,i,!0),!0);return c&&v.isZero(r.getLength()/c.subtract(s).getLength()-o)&&v.isZero(i.getLength()/c.subtract(u).getLength()-o)}return!1}function c(e,t){return a[e]._point.getDistance(a[t]._point)}if(!this.hasHandles()&&4===a.length&&o(0,2)&&o(1,3)&&function(e){var t=a[e],n=t.getPrevious(),r=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&r._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(r._point.subtract(t._point))}(1)?(t=I.Rectangle,n=new b(c(0,3),c(0,1)),i=a[1]._point.add(a[2]._point).divide(2)):8===a.length&&u(0)&&u(2)&&u(4)&&u(6)&&o(1,5)&&o(3,7)?(t=I.Rectangle,r=(n=new b(c(1,6),c(0,3))).subtract(new b(c(0,7),c(1,2))).divide(2),i=a[3]._point.add(a[4]._point).divide(2)):4===a.length&&u(0)&&u(1)&&u(2)&&u(3)&&(v.isZero(c(0,2)-c(1,3))?(t=I.Circle,r=c(0,2)/2):(t=I.Ellipse,r=new b(c(2,0)/2,c(3,1)/2)),i=a[1]._point),t){var l=this.getPosition(!0),h=new t({center:l,size:n,radius:r,insert:!1});return h.copyAttributes(this,!0),h._matrix.prepend(this._matrix),h.rotate(i.subtract(l).getAngle()+90),(e===s||e)&&h.insertAbove(this),h}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof U)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),i=n.length,a=r.length;if(!i||!a)return i==a;for(var o,s,u=n[0].getValues(),c=[],l=0,h=0,f=0;f<a;f++){var d=r[f].getValues();if(c.push(d),v=R.getOverlaps(u,d)){o=!f&&v[0][0]>0?a-1:f,s=v[0][1];break}}var p,g=Math.abs;for(d=c[o];u&&d;){var v;if((v=R.getOverlaps(u,d))&&g(v[0][0]-h)<1e-8){1===(h=v[1][0])&&(u=++l<i?n[l].getValues():null,h=0);var m=v[0][1];if(g(m-s)<1e-8){if(p||(p=[o,m]),1===(s=v[1][1])&&(++o>=a&&(o=0),d=c[o]||r[o].getValues(),s=0),!u)return p[0]===o&&p[1]===s;continue}}break}return!1},_hitTestSelf:function(e,t,n,r){var i,a,o,s,u,c,l=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,g=t._tolerancePadding,v=g,m=t.stroke&&h.hasStroke(),y=t.fill&&h.hasFill(),_=t.curves,b=m?h.getStrokeWidth()/2:y&&t.tolerance>0||_?0:null;function x(t,n){return e.subtract(t).divide(n).length<=1}function w(e,n,r){if(!t.selected||n.isSelected()){var i=e._point;if(n!==i&&(n=n.add(i)),x(n,v))return new D(r,l,{segment:e,point:n})}}function k(e,n){return(n||t.segments)&&w(e,e._point,"segment")||!n&&t.handles&&(w(e,e._handleIn,"handle-in")||w(e,e._handleOut,"handle-out"))}function S(e){s.add(e)}function C(t){var n,u=p||t._index>0&&t._index<d-1;return"round"===(u?i:a)?x(t._point,v):(s=new F({internal:!0,closed:!0}),u?t.isSmooth()||F._addBevelJoin(t,i,b,o,null,r,S,!0):"square"===a&&F._addSquareCap(t,a,b,null,r,S,!0),s.isEmpty()?void 0:s.contains(e)||(n=s.getNearestLocation(e))&&x(n.getPoint(),g))}if(null!==b&&(b>0?(i=h.getStrokeJoin(),a=h.getStrokeCap(),o=h.getMiterLimit(),v=v.add(F._getStrokePadding(b,r))):i=a="round"),!t.ends||t.segments||p){if(t.segments||t.handles)for(var M=0;M<d;M++)if(c=k(f[M]))return c}else if(c=k(f[0],!0)||k(f[d-1],!0))return c;if(null!==b){if(u=this.getNearestLocation(e)){var A=u.getTime();0===A||1===A&&d>1?C(u.getSegment())||(u=null):x(u.getPoint(),v)||(u=null)}if(!u&&"miter"===i&&d>1)for(M=0;M<d;M++){var E=f[M];if(e.getDistance(E._point)<=o*b&&C(E)){u=E.getLocation();break}}}return!u&&y&&this._contains(e)||u&&!m&&!_?new D("fill",this):u?new D(m?"stroke":"curve",this,{location:u,point:u.getPoint()}):null}},l.each(R._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}}),{beans:!1,getLocationOf:function(){for(var e=y.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var i=t[n].getLocationOf(e);if(i)return i}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"===typeof e){for(var t=this.getCurves(),n=0,r=0,i=t.length;r<i;r++){var a=n,o=t[r];if((n+=o.getLength())>e)return o.getLocationAt(e-a)}if(t.length>0&&e<=this.getLength())return new j(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=y.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),i=0,a=r.length;i<a;i++){for(var o=r[i],s=o.getTimesWithTangent(e),u=0,c=s.length;u<c;u++){var l=n+o.getOffsetAtTime(s[u]);t.indexOf(l)<0&&t.push(l)}n+=o.length}return t}}),new function(){function e(e,t,n){var r,i,a,o,s,u,c,l,h=t._segments,f=h.length,d=new Array(6),p=!0;function g(t){if(n)t._transformCoordinates(n,d),r=d[0],i=d[1];else{var h=t._point;r=h._x,i=h._y}if(p)e.moveTo(r,i),p=!1;else{if(n)s=d[2],u=d[3];else{var f=t._handleIn;s=r+f._x,u=i+f._y}s===r&&u===i&&c===a&&l===o?e.lineTo(r,i):e.bezierCurveTo(c,l,s,u,r,i)}a=r,o=i,n?(c=d[4],l=d[5]):(f=t._handleOut,c=a+f._x,l=o+f._y)}for(var v=0;v<f;v++)g(h[v]);t._closed&&f>0&&g(h[0])}return{_draw:function(t,n,r,i){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),u=s.hasFill(),c=s.hasStroke(),l=s.getDashArray(),h=!fe.support.nativeDash&&c&&l&&l.length;function f(e){return l[(e%h+h)%h]}if(a||t.beginPath(),(u||c&&!h||o)&&(e(t,this,i),this._closed&&t.closePath()),!o&&(u||c)&&(this._setStyles(t,n,r),u&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),c)){if(h){a||t.beginPath();for(var d,p=new V(this,.25,32,!1,i),g=p.length,v=-s.getDashOffset(),m=0;v>0;)v-=f(m--)+f(m--);for(;v<g;)d=v+f(m++),(v>0||d>0)&&p.drawPart(t,Math.max(v,0),Math.max(d,0)),v=d+f(m++)}t.stroke()}},_drawSelected:function(t,n){t.beginPath(),e(t,this,n),t.stroke(),function(e,t,n,r){if(!(r<=0))for(var i,a,o=r/2,s=r-2,u=o-1,c=new Array(6),l=0,h=t.length;l<h;l++){var f=t[l],d=f._selection;if(f._transformCoordinates(n,c),i=c[0],a=c[1],2&d&&g(2),4&d&&g(4),e.fillRect(i-o,a-o,r,r),s>0&&!(1&d)){var p=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(i-u,a-u,s,s),e.fillStyle=p}}function g(t){var n=c[t],r=c[t+1];i==n&&a==r||(e.beginPath(),e.moveTo(i,a),e.lineTo(n,r),e.stroke(),e.beginPath(),e.arc(n,r,o,0,2*Math.PI,!0),e.fill())}}(t,this._segments,n,fe.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new B(y.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new B(y.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=y.read(t),r=y.read(t),i=y.read(t),a=e(this);a.setHandleOut(n.subtract(a._point)),this._add([new B(i,r.subtract(i))])},quadraticCurveTo:function(){var t=arguments,n=y.read(t),r=y.read(t),i=e(this)._point;this.cubicCurveTo(n.add(i.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=y.read(t),r=y.read(t),i=l.pick(l.read(t),.5),a=1-i,o=e(this)._point,s=n.subtract(o.multiply(a*a)).subtract(r.multiply(i*i)).divide(2*i*a);if(s.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(s,r)},arcTo:function(){var t,n,r,i,a=arguments,o=Math.abs,s=Math.sqrt,u=e(this),c=u._point,h=y.read(a),f=l.peek(a);if("boolean"===typeof(_=l.pick(f,!0)))var d=(w=c.add(h).divide(2)).add(w.subtract(c).rotate(_?-90:90));else if(l.remain(a)<=2)d=h,h=y.read(a);else if(!c.equals(h)){var p=b.read(a),g=v.isZero;if(g(p.width)||g(p.height))return this.lineTo(h);var m=l.read(a),_=!!l.read(a),x=!!l.read(a),w=c.add(h).divide(2),k=(q=c.subtract(w).rotate(-m)).x,M=q.y,A=o(p.width),E=o(p.height),T=A*A,I=E*E,L=k*k,O=M*M,P=s(L/T+O/I);if(P>1&&(T=(A*=P)*A,I=(E*=P)*E),o(P=(T*I-T*O-I*L)/(T*O+I*L))<1e-12&&(P=0),P<0)throw new Error("Cannot create an arc with the given arguments");t=new y(A*M/E,-E*k/A).multiply((x===_?-1:1)*s(P)).rotate(m).add(w),n=(r=(i=(new S).translate(t).rotate(m).scale(A,E))._inverseTransform(c)).getDirectedAngle(i._inverseTransform(h)),!_&&n>0?n-=360:_&&n<0&&(n+=360)}if(d){var D=new C(c.add(d).divide(2),d.subtract(c).rotate(90),!0),N=new C(d.add(h).divide(2),h.subtract(d).rotate(90),!0),R=new C(c,h),j=R.getSide(d);if(!(t=D.intersect(N,!0))){if(!j)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}n=(r=c.subtract(t)).getDirectedAngle(h.subtract(t));var z=R.getSide(t,!0);0===z?n=j*o(n):j===z&&(n+=n<0?360:-360)}if(n){for(var F=o(n),U=F>=360?4:Math.ceil((F-1e-5)/90),V=n/U,H=V*Math.PI/360,G=4/3*Math.sin(H)/(1+Math.cos(H)),Y=[],W=0;W<=U;W++){var q=h,Z=null;if(W<U&&(Z=r.rotate(90).multiply(G),i?(q=i._transformPoint(r),Z=i._transformPoint(r.add(Z)).subtract(q)):q=t.add(r)),W){var K=r.rotate(-90).multiply(G);i&&(K=i._transformPoint(r.add(K)).subtract(q)),Y.push(new B(q,K,Z))}else u.setHandleOut(Z);r=r.rotate(V)}this._add(Y)}},lineBy:function(){var t=y.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=y.read(t),r=y.read(t),i=l.read(t),a=e(this)._point;this.curveTo(a.add(n),a.add(r),i)},cubicCurveBy:function(){var t=arguments,n=y.read(t),r=y.read(t),i=y.read(t),a=e(this)._point;this.cubicCurveTo(a.add(n),a.add(r),a.add(i))},quadraticCurveBy:function(){var t=arguments,n=y.read(t),r=y.read(t),i=e(this)._point;this.quadraticCurveTo(i.add(n),i.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(y.read(t)),i=l.pick(l.peek(t),!0);"boolean"===typeof i?this.arcTo(r,i):this.arcTo(r,n.add(y.read(t)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return F[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,i,a){var o=e[0];if(!o)return new w;var s=new Array(6),u=o._transformCoordinates(r,new Array(6)),c=u.slice(0,2),l=c.slice(),h=new Array(2);function f(e){e._transformCoordinates(r,s);for(var t=0;t<2;t++)R._addBounds(u[t],u[t+4],s[t+2],s[t],t,a?a[t]:0,c,l,h);var n=u;u=s,s=n}for(var d=1,p=e.length;d<p;d++)f(e[d]);return t&&f(o),new w(c[0],c[1],l[0]-c[0],l[1]-c[1])},getStrokeBounds:function(e,t,n,r,i){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),u=o&&n._getStrokeMatrix(r,i),c=o&&F._getStrokePadding(s,u),l=F.getBounds(e,t,n,r,i,c);if(!o)return l;var h=s/2,f=a.getStrokeJoin(),d=a.getStrokeCap(),p=a.getMiterLimit(),g=new w(new b(c));function v(e){l=l.include(e)}function m(e){l=l.unite(g.setCenter(e._point.transform(r)))}function y(e,t){"round"===t||e.isSmooth()?m(e):F._addBevelJoin(e,t,h,p,r,u,v)}function _(e,t){"round"===t?m(e):F._addSquareCap(e,t,h,r,u,v)}var x=e.length-(t?0:1);if(x>0){for(var k=1;k<x;k++)y(e[k],f);t?y(e[0],f):(_(e[0],d),_(e[e.length-1],d))}return l},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new y(e,0).transform(t),r=new y(0,e).transform(t),i=n.getAngleInRadians(),a=n.getLength(),o=r.getLength(),s=Math.sin(i),u=Math.cos(i),c=Math.tan(i),l=Math.atan2(o*c,a),h=Math.atan2(o,c*a);return[Math.abs(a*Math.cos(l)*u+o*Math.sin(l)*s),Math.abs(o*Math.sin(h)*u+a*Math.cos(h)*s)]},_addBevelJoin:function(e,t,n,r,i,a,o,s){var u=e.getCurve(),c=u.getPrevious(),l=u.getPoint1().transform(i),h=c.getNormalAtTime(1).multiply(n).transform(a),f=u.getNormalAtTime(0).multiply(n).transform(a),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),s&&o(l),o(l.add(h)),"miter"===t){var p=new C(l.add(h),new y(-h.y,h.x),!0).intersect(new C(l.add(f),new y(-f.y,f.x),!0),!0);p&&l.getDistance(p)<=r*n&&o(p)}o(l.add(f))},_addSquareCap:function(e,t,n,r,i,a,o){var s=e._point.transform(r),u=e.getLocation(),c=u.getNormal().multiply(0===u.getTime()?n:-n).transform(i);"square"===t&&(o&&(a(s.subtract(c)),a(s.add(c))),s=s.add(c.rotate(-90))),a(s.add(c)),a(s.subtract(c))},getHandleBounds:function(e,t,n,r,i){var a,o,s=n.getStyle();if(i.stroke&&s.hasStroke()){var u=n._getStrokeMatrix(r,i),c=s.getStrokeWidth()/2,l=c;"miter"===s.getStrokeJoin()&&(l=c*s.getMiterLimit()),"square"===s.getStrokeCap()&&(l=Math.max(l,c*Math.SQRT2)),a=F._getStrokePadding(c,u),o=F._getStrokePadding(l,u)}for(var h=new Array(6),f=1/0,d=-f,p=f,g=d,v=0,m=e.length;v<m;v++){e[v]._transformCoordinates(r,h);for(var y=0;y<6;y+=2){var _=y?a:o,b=_?_[0]:0,x=_?_[1]:0,k=h[y],S=h[y+1],C=k-b,M=k+b,A=S-x,E=S+x;C<f&&(f=C),M>d&&(d=M),A<p&&(p=A),E>g&&(g=E)}}return new w(f,p,d-f,g-p)}}});F.inject({statics:new function(){var e=.5522847498307936,t=[new B([-1,0],[0,e],[0,-e]),new B([0,-1],[-e,0],[e,0]),new B([1,0],[0,-e],[0,e]),new B([0,1],[e,0],[-e,0])];function n(e,t,n){var r=l.getNamed(n),i=new F(r&&(1==r.insert?A.INSERT:0==r.insert?A.NO_INSERT:null));return i._add(e),i._closed=t,i.set(r,A.INSERT)}function r(e,r,i){for(var a=new Array(4),o=0;o<4;o++){var s=t[o];a[o]=new B(s._point.multiply(r).add(e),s._handleIn.multiply(r),s._handleOut.multiply(r))}return n(a,!0,i)}return{Line:function(){var e=arguments;return n([new B(y.readNamed(e,"from")),new B(y.readNamed(e,"to"))],!1,e)},Circle:function(){var e=arguments,t=y.readNamed(e,"center"),n=l.readNamed(e,"radius");return r(t,new b(n),e)},Rectangle:function(){var t,r=arguments,i=w.readNamed(r,"rectangle"),a=b.readNamed(r,"radius",0,{readNull:!0}),o=i.getBottomLeft(!0),s=i.getTopLeft(!0),u=i.getTopRight(!0),c=i.getBottomRight(!0);if(!a||a.isZero())t=[new B(o),new B(s),new B(u),new B(c)];else{var l=(a=b.min(a,i.getSize(!0).divide(2))).width,h=a.height,f=l*e,d=h*e;t=[new B(o.add(l,0),null,[-f,0]),new B(o.subtract(0,h),[0,d]),new B(s.add(0,h),null,[0,-d]),new B(s.add(l,0),[-f,0],null),new B(u.subtract(l,0),null,[f,0]),new B(u.add(0,h),[0,-d],null),new B(c.subtract(0,h),null,[0,d]),new B(c.subtract(l,0),[f,0])]}return n(t,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=arguments,t=I._readEllipse(e);return r(t.center,t.radius,e)},Oval:"#Ellipse",Arc:function(){var e=arguments,t=y.readNamed(e,"from"),n=y.readNamed(e,"through"),r=y.readNamed(e,"to"),i=l.getNamed(e),a=new F(i&&0==i.insert&&A.NO_INSERT);return a.moveTo(t),a.arcTo(n,r),a.set(i)},RegularPolygon:function(){for(var e=arguments,t=y.readNamed(e,"center"),r=l.readNamed(e,"sides"),i=l.readNamed(e,"radius"),a=360/r,o=r%3===0,s=new y(0,o?-i:i),u=o?-1:.5,c=new Array(r),h=0;h<r;h++)c[h]=new B(t.add(s.rotate((h+u)*a)));return n(c,!0,e)},Star:function(){for(var e=arguments,t=y.readNamed(e,"center"),r=2*l.readNamed(e,"points"),i=l.readNamed(e,"radius1"),a=l.readNamed(e,"radius2"),o=360/r,s=new y(0,-1),u=new Array(r),c=0;c<r;c++)u[c]=new B(t.add(s.rotate(o*c).multiply(c%2?a:i)));return n(u,!0,e)}}}});var U=z.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"===typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var r=n,i=r[0];i&&"number"===typeof i[0]&&(r=[r]);for(var a=n.length-1;a>=0;a--){var o=r[a];r!==n||o instanceof F||(r=l.slice(r)),Array.isArray(o)?r[a]=new F({segments:o,insert:!1}):o instanceof U&&(r.splice.apply(r,[a,1].concat(o.removeChildren())),o.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--){var i;(i=n[r].reduce(t)).isEmpty()&&i.remove()}return n.length?e.base.call(this):((i=new F(A.NO_INSERT)).copyAttributes(this),i.insertAbove(this),this.remove(),i)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)l.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],i=0,a=n.length;i<a;i++){var o=n[i],s=o._matrix;r.push(o.getPathData(e&&!s.isIdentity()?e.appended(s):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===F||"path"===n.type?n:l.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var i=this._children;if(i.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var a=0,o=i.length;a<o;a++)i[a].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var s=this._style;s.hasFill()&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,i=0,a=r.length;i<a;i++){var o=r[i],s=o._matrix;n[o._id]||o._drawSelected(e,s.isIdentity()?t:t.appended(s))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return l.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}}),{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new F(A.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=y.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},l.each(["reverse","flatten","simplify","smooth"],(function(e){this[e]=function(t){for(var n,r=this._children,i=0,a=r.length;i<a;i++)n=r[i][e](t)||n;return n}}),{}));z.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function i(e){return e._children||[e]}function a(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(t){for(var r=i(n),a=0,o=r.length;a<o;a++)(e=r[a])._closed||e.isEmpty()||(e.closePath(1e-12),e.getFirstSegment().setHandleIn(0,0),e.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function o(e,t,n,r,i){var a=new U(A.NO_INSERT);return a.addChildren(e,!0),a=a.reduce({simplify:t}),i&&0==i.insert||a.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),a.copyAttributes(n,!0),a}function u(e){return e.hasOverlap()||e.isCrossing()}function c(e,t,n,s){if(s&&(0==s.trace||s.stroke)&&/^(subtract|intersect)$/.test(n))return h(e,t,n);var c=a(e,!0),f=t&&e!==t&&a(t,!0),d=r[n];d[n]=!0,f&&(d.subtract||d.exclude)^f.isClockwise()^c.isClockwise()&&f.reverse();var v,y=m(j.expand(c.getIntersections(f,u))),x=i(c),w=f&&i(f),k=[],S=[];function C(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];l.push(k,r._segments),l.push(S,r.getCurves()),r._overlapsOnly=!0}}function M(e){for(var t=[],n=0,r=e&&e.length;n<r;n++)t.push(S[e[n]]);return t}if(y.length){C(x),w&&C(w);for(var A=new Array(S.length),E=0,T=S.length;E<T;E++)A[E]=S[E].getValues();var I=p.findCurveBoundsCollisions(A,A,0,!0),L={};for(E=0;E<S.length;E++){var O=S[E],P=O._path._id;(L[P]=L[P]||{})[O.getIndex()]={hor:M(I[E].hor),ver:M(I[E].ver)}}for(E=0,T=y.length;E<T;E++)_(y[E]._segment,c,f,L,d);for(E=0,T=k.length;E<T;E++){var D=k[E],B=D._intersection;D._winding||_(D,c,f,L,d),B&&B._overlap||(D._path._overlapsOnly=!1)}v=b(k,d)}else v=g(w?x.concat(w):x.slice(),(function(e){return!!d[e]}));return o(v,!0,e,t,s)}function h(e,t,n){var r=a(e),i=a(t),s=r.getIntersections(i,u),c="subtract"===n,l="divide"===n,h={},f=[];function d(e){if(!h[e._id]&&(l||i.contains(e.getPointAt(e.getLength()/2))^c))return f.unshift(e),h[e._id]=!0}for(var p=s.length-1;p>=0;p--){var g=s[p].split();g&&(d(g)&&g.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return d(r),o(f,!1,e,t)}function f(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function d(e){for(var t=e.length-1;t>=0;t--)e[t].clearHandles()}function g(e,t,r){var i=e&&e.length;if(i){var a=l.each(e,(function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}}),{}),o=e.slice().sort((function(e,t){return n(t.getArea())-n(e.getArea())})),s=o[0],u=p.findItemBoundsCollisions(o,null,v.GEOMETRIC_EPSILON);null==r&&(r=s.isClockwise());for(var c=0;c<i;c++){var h=o[c],f=a[h._id],d=0,g=u[c];if(g)for(var m=null,y=g.length-1;y>=0;y--)if(g[y]<c){m=m||h.getInteriorPoint();var _=o[g[y]];if(_.contains(m)){var b=a[_._id];d=b.winding,f.winding+=d,f.container=b.exclude?b.container:_;break}}if(t(f.winding)===t(d))f.exclude=!0,e[f.index]=null;else{var x=f.container;h.setClockwise(x?!x.isClockwise():r)}}}return e}function m(e,t,n){var r,i,a,o=t&&[],s=1e-8,u=!1,c=n||[],l=n&&{};function h(e){return e._path._id+"."+e._segment1._index}for(var p=(n&&n.length)-1;p>=0;p--)(g=n[p])._path&&(l[h(g)]=!0);for(p=e.length-1;p>=0;p--){var g,v,m=e[p],y=m._time,_=y,b=t&&!t(m);if((g=m._curve)&&(g!==i?(u=!g.hasHandles()||l&&l[h(g)],r=[],a=null,i=g):a>=s&&(y/=a)),b)r&&r.push(m);else{if(t&&o.unshift(m),a=_,y<s)v=g._segment1;else if(y>.99999999)v=g._segment2;else{var x=g.divideAtTime(y,!0);u&&c.push(g,x),v=x._segment1;for(var w=r.length-1;w>=0;w--){var k=r[w];k._time=(k._time-y)/(1-y)}}m._setSegment(v);var S=v._intersection,C=m._intersection;if(S){f(S,C);for(var M=S;M;)f(M._intersection,S),M=M._next}else v._intersection=C}}return n||d(c),o||e}function y(r,i,a,o,s){var u,c,l=Array.isArray(i)?i:i[a?"hor":"ver"],h=a?1:0,f=1^h,d=[r.x,r.y],p=d[h],g=d[f],v=1e-6,m=p-1e-9,_=p+1e-9,b=0,x=0,w=0,k=0,S=!1,C=!1,M=1,A=[];function E(n){var c=n[f+0],l=n[f+6];if(!(g<e(c,l)||g>t(c,l))){var d=n[h+0],b=n[h+2],x=n[h+4],C=n[h+6];if(c!==l){var E=g===c?0:g===l||m>t(d,b,x,C)||_<e(d,b,x,C)?1:R.solveCubic(n,f,g,A,0,1)>0?A[0]:1,T=0===E?d:1===E?C:R.getPoint(n,E)[a?"y":"x"],I=c>l?1:-1,L=u[f]>u[f+6]?1:-1,O=u[h+6];return g!==c?(T<m?w+=I:T>_?k+=I:S=!0,T>p-v&&T<p+v&&(M/=2)):(I!==L?d<m?w+=I:d>_&&(k+=I):d!=O&&(O<_&&T>_?(k+=I,S=!0):O>m&&T<m&&(w+=I,S=!0)),M/=4),u=n,!s&&T>m&&T<_&&0===R.getTangent(n,E)[a?"x":"y"]&&y(r,i,!a,o,!0)}(d<_&&C>m||C<_&&d>m)&&(S=!0)}}function T(n){var r=n[f+0],i=n[f+2],o=n[f+4],s=n[f+6];if(g<=t(r,i,o,s)&&g>=e(r,i,o,s))for(var u,c=n[h+0],l=n[h+2],d=n[h+4],p=n[h+6],v=m>t(c,l,d,p)||_<e(c,l,d,p)?[n]:R.getMonoCurves(n,a),y=0,b=v.length;y<b;y++)if(u=E(v[y]))return u}for(var I=0,L=l.length;I<L;I++){var O,P=l[I],D=P._path,B=P.getValues();if((!I||l[I-1]._path!==D)&&(u=null,D._closed||(c=R.getValues(D.getLastCurve().getSegment2(),P.getSegment1(),null,!o))[f]!==c[f+6]&&(u=c),!u)){u=B;for(var N=D.getLastCurve();N&&N!==P;){var j=N.getValues();if(j[f]!==j[f+6]){u=j;break}N=N.getPrevious()}}if(O=T(B))return O;if(I+1===L||l[I+1]._path!==D){if(c&&(O=T(c)))return O;!S||w||k||(w=k=D.isClockwise(o)^a?1:-1),b+=w,x+=k,w=k=0,S&&(C=!0,S=!1),c=null}}return b=n(b),x=n(x),{winding:t(b,x),windingL:b,windingR:x,quality:M,onPath:C}}function _(e,t,r,i,a){var o=[],s=e,u=0;do{if(_=e.getCurve()){var c=_.getLength();o.push({segment:e,curve:_,length:c}),u+=c}e=e.getNext()}while(e&&!e._intersection&&e!==s);for(var l=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<l.length&&h.quality<.5;f++){c=u*l[f];for(var d=0,p=o.length;d<p;d++){var g=o[d],m=g.length;if(c<=m){var _,b=(_=g.curve)._path,x=b._parent,w=x instanceof U?x:b,k=v.clamp(_.getTimeAt(c),.001,.999),S=_.getPointAtTime(k),C=n(_.getTangentAtTime(k).y)<Math.SQRT1_2,M=null;if(a.subtract&&r){var A=(w===t?r:t)._getWinding(S,C,!0);if(w===t&&A.winding||w===r&&!A.winding){if(A.quality<1)continue;M={winding:0,quality:1}}}(M=M||y(S,i[b._id][_.getIndex()],C,!0)).quality>h.quality&&(h=M);break}c-=m}}for(d=o.length-1;d>=0;d--)o[d].segment._winding=h}function b(e,t){var n,r=[];function i(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(e){if(e)for(var t=0,r=n.length;t<r;t++)if(e===n[t])return!0;return!1}function o(e){for(var t=e._segments,n=0,r=t.length;n<r;n++)t[n]._visited=!0}function s(e,t){var r=e._intersection,o=r,s=[];function u(r,o){for(;r&&r!==o;){var u=r._segment,c=u&&u._path;if(c){var l=u.getNext()||c.getFirstSegment(),h=l._intersection;u!==e&&(a(u)||a(l)||l&&i(u)&&(i(l)||h&&i(h._segment)))&&s.push(u),t&&n.push(u)}r=r._next}}if(t&&(n=[e]),r){for(u(r);r&&r._previous;)r=r._previous;u(r,o)}return s}e.sort((function(e,t){var n=e._intersection,r=t._intersection,i=!(!n||!n._overlap),a=!(!r||!r._overlap),o=e._path,s=t._path;return i^a?i?1:-1:!n^!r?n?1:-1:o!==s?o._id-s._id:e._index-t._index}));for(var u=0,c=e.length;u<c;u++){var l,h,f,d=e[u],p=i(d),g=null,v=!1,m=!0,y=[];if(p&&d._path._overlapsOnly){var _=d._path,b=d._intersection._segment._path;_.compare(b)&&(_.getArea()&&r.push(_.clone(!1)),o(_),o(b),p=!1)}for(;p;){var x=!g,w=s(d,x),k=w.shift(),S=!(v=!x&&(a(d)||a(k)))&&k;if(x&&(g=new F(A.NO_INSERT),l=null),v){(d.isFirst()||d.isLast())&&(m=d._path._closed),d._visited=!0;break}if(S&&l&&(y.push(l),l=null),l||(S&&w.push(d),l={start:g._segments.length,crossings:w,visited:h=[],handleIn:f}),S&&(d=k),!i(d)){g.removeSegments(l.start);for(var C=0,M=h.length;C<M;C++)h[C]._visited=!1;h.length=0;do{(d=l&&l.crossings.shift())&&d._path||(d=null,(l=y.pop())&&(h=l.visited,f=l.handleIn))}while(l&&!i(d));if(!d)break}var E=d.getNext();g.add(new B(d._point,f,E&&d._handleOut)),d._visited=!0,h.push(d),d=E||d._path.getFirstSegment(),f=E&&E._handleIn}v&&(m&&(g.getFirstSegment().setHandleIn(f),g.setClosed(m)),0!==g.getArea()&&r.push(g))}return r}return{_getWinding:function(e,t,n){return y(e,this.getCurves(),t,n)},unite:function(e,t){return c(this,e,"unite",t)},intersect:function(e,t){return c(this,e,"intersect",t)},subtract:function(e,t){return c(this,e,"subtract",t)},exclude:function(e,t){return c(this,e,"exclude",t)},divide:function(e,t){return t&&(0==t.trace||t.stroke)?h(this,e,"divide"):o([this.subtract(e,t),this.intersect(e,t)],!0,this,e,t)},resolveCrossings:function(){var e=this._children,t=e||[this];function n(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var r=!1,i=!1,a=this.getIntersections(null,(function(e){return e.hasOverlap()&&(r=!0)||e.isCrossing()&&(i=!0)})),o=r&&i&&[];if(a=j.expand(a),r)for(var s=m(a,(function(e){return e.hasOverlap()}),o),u=s.length-1;u>=0;u--){var c=s[u],h=c._path,f=c._segment,p=f.getPrevious(),g=f.getNext();n(p,h)&&n(g,h)&&(f.remove(),p._handleOut._set(0,0),g._handleIn._set(0,0),p===f||p.getCurve().hasLength()||(g._handleIn.set(p._handleIn),p.remove()))}i&&(m(a,r&&function(e){var t=e.getCurve(),n=e.getSegment(),r=e._intersection,i=r._curve,a=r._segment;if(t&&i&&t._path&&i._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},o),o&&d(o),t=b(l.each(t,(function(e){l.push(this,e._segments)}),[])));var v,y=t.length;return y>1&&e?(t!==e&&this.setChildren(t),v=this):1!==y||e||(t[0]!==this&&this.setSegments(t[0].removeSegments()),v=this),v||((v=new U(A.NO_INSERT)).addChildren(t),(v=v.reduce()).copyAttributes(this),this.replaceWith(v)),v},reorient:function(e,t){var n=this._children;return n&&n.length?this.setChildren(g(this.removeChildren(),(function(t){return!!(e?t:1&t)}),t)):t!==s&&this.setClockwise(t),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var r=this.getCurves(),i=n.y,a=[],o=[],s=0,u=r.length;s<u;s++){var c=r[s].getValues(),l=c[1],h=c[3],f=c[5],d=c[7];if(i>=e(l,h,f,d)&&i<=t(l,h,f,d))for(var p=R.getMonoCurves(c),g=0,v=p.length;g<v;g++){var m=p[g],y=m[1],_=m[7];if(y!==_&&(i>=y&&i<=_||i>=_&&i<=y)){var b=i===y?m[0]:i===_?m[6]:1===R.solveCubic(m,1,i,o,0,1)?R.getPoint(m,o[0]).x:(m[0]+m[6])/2;a.push(b)}}}a.length>1&&(a.sort((function(e,t){return e-t})),n.x=(a[0]+a[1])/2)}return n}}});var V=l.extend({_class:"PathFlattener",initialize:function(e,t,n,r,i){var a,o=[],s=[],u=0,c=1/(n||32),l=e._segments,h=l[0];function f(e,t){var n=R.getValues(e,t,i);o.push(n),d(n,e._index,0,1)}function d(e,n,i,a){if(!(a-i>c)||r&&R.isStraight(e)||R.isFlatEnough(e,t||.25)){var o=e[6]-e[0],l=e[7]-e[1],h=Math.sqrt(o*o+l*l);h>0&&(u+=h,s.push({offset:u,curve:e,index:n,time:a}))}else{var f=R.subdivide(e,.5),p=(i+a)/2;d(f[0],n,i,p),d(f[1],n,p,a)}}for(var p=1,g=l.length;p<g;p++)f(h,a=l[p]),h=a;e._closed&&f(a||h,l[0]),this.curves=o,this.parts=s,this.length=u,this.index=0},_get:function(e){for(var t,n=this.parts,r=n.length,i=this.index;t=i,i&&!(n[--i].offset<e););for(;t<r;t++){var a=n[t];if(a.offset>=e){this.index=t;var o=n[t-1],s=o&&o.index===a.index?o.time:0,u=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(e-u)/(a.offset-u)}}}return{index:n[r-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),i=this._get(n),a=r.index,o=i.index;a<=o;a++){var s=R.getPart(this.curves[a],a===r.index?r.time:0,a===i.index?i.time:1);a===r.index&&e.moveTo(s[0],s[1]),e.bezierCurveTo.apply(e,s.slice(2))}}},l.each(R._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this._get(t);return R[e](this.curves[n.index],n.time)}}),{})),H=l.extend({initialize:function(e){for(var t,n=this.points=[],r=e._segments,i=e._closed,a=0,o=r.length;a<o;a++){var s=r[a].point;t&&t.equals(s)||n.push(t=s.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new B(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,i,a){var o=this.points;if(r-n!==1){for(var s,u=this.chordLengthParameterize(n,r),c=Math.max(t,t*t),l=!0,h=0;h<=4;h++){var f=this.generateBezier(n,r,u,i,a),d=this.findMaxError(n,r,f,u);if(d.error<t&&l)return void this.addCurve(e,f);if(s=d.index,d.error>=c)break;l=this.reparameterize(n,r,u,f),c=d.error}var p=o[s-1].subtract(o[s+1]);this.fitCubic(e,t,n,s,i,p),this.fitCubic(e,t,s,r,p.negate(),a)}else{var g=o[n],v=o[r],m=g.getDistance(v)/3;this.addCurve(e,[g,g.add(i.normalize(m)),v.add(a.normalize(m)),v])}},addCurve:function(e,t){e[e.length-1].setHandleOut(t[1].subtract(t[0])),e.push(new B(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,i){for(var a=1e-12,o=Math.abs,s=this.points,u=s[e],c=s[t],l=[[0,0],[0,0]],h=[0,0],f=0,d=t-e+1;f<d;f++){var p=n[f],g=1-p,v=3*p*g,m=g*g*g,y=v*g,_=v*p,b=p*p*p,x=r.normalize(y),w=i.normalize(_),k=s[e+f].subtract(u.multiply(m+y)).subtract(c.multiply(_+b));l[0][0]+=x.dot(x),l[0][1]+=x.dot(w),l[1][0]=l[0][1],l[1][1]+=w.dot(w),h[0]+=x.dot(k),h[1]+=w.dot(k)}var S,C,M=l[0][0]*l[1][1]-l[1][0]*l[0][1];if(o(M)>a){var A=l[0][0]*h[1]-l[1][0]*h[0];S=(h[0]*l[1][1]-h[1]*l[0][1])/M,C=A/M}else{var E=l[0][0]+l[0][1],T=l[1][0]+l[1][1];S=C=o(E)>a?h[0]/E:o(T)>a?h[1]/T:0}var I,L,O=c.getDistance(u),P=a*O;if(S<P||C<P)S=C=O/3;else{var D=c.subtract(u);I=r.normalize(S),L=i.normalize(C),I.dot(D)-L.dot(D)>O*O&&(S=C=O/3,I=L=null)}return[u,u.add(I||r.normalize(S)),c.add(L||i.normalize(C)),c]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e]);i=1;for(var a=n.length;i<a;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],i=[],a=0;a<=2;a++)r[a]=e[a+1].subtract(e[a]).multiply(3);for(a=0;a<=1;a++)i[a]=r[a+1].subtract(r[a]).multiply(2);var o=this.evaluate(3,e,n),s=this.evaluate(2,r,n),u=this.evaluate(1,i,n),c=o.subtract(t),l=s.dot(s)+c.dot(u);return v.isMachineZero(l)?n:n-c.dot(s)/l},evaluate:function(e,t,n){for(var r=t.slice(),i=1;i<=e;i++)for(var a=0;a<=e-i;a++)r[a]=r[a].multiply(1-n).add(r[a+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){for(var i=Math.floor((t-e+1)/2),a=0,o=e+1;o<t;o++){var s=this.evaluate(3,n,r[o-e]).subtract(this.points[o]),u=s.x*s.x+s.y*s.y;u>=a&&(a=u,i=o)}return{error:a,index:i}}}),G=A.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&l.isPlainObject(e)&&e.x===s&&e.y===s;this._initialize(t&&e,!t&&y.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Y=G.extend({_class:"PointText",initialize:function(){G.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new _(e.x,e.y,this,"setPoint")},setPoint:function(){var e=y.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,i=this._style,a=i.hasFill(),o=i.hasStroke(),s=i.getLeading(),u=e.shadowColor;e.font=i.getFontStyle(),e.textAlign=i.getJustification();for(var c=0,l=r.length;c<l;c++){e.shadowColor=u;var h=r[c];a&&(e.fillText(h,0,0),e.shadowColor="rgba(0,0,0,0)"),o&&e.strokeText(h,0,0),e.translate(0,s)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,i=r.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),r),u=0;"left"!==a&&(u-=s/("center"===a?2:1));var c=new w(u,i?-.75*o:0,s,i*o);return e?e._transformBounds(c,c):c}}),W=l.extend(new function(){var e,t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]},i=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(e,t,n){var r=Math.max(e,t,n),i=r-Math.min(e,t,n);return[0===i?0:60*(r==e?(t-n)/i+(t<n?6:0):r==t?(n-e)/i+2:(e-t)/i+4),0===r?0:i/r,r]},"hsb-rgb":function(e,t,n){var r,a=(e=(e/60%6+6)%6)-(r=Math.floor(e)),o=[n,n*(1-t),n*(1-t*a),n*(1-t*(1-a))];return[o[(r=i[r])[0]],o[r[1]],o[r[2]]]},"rgb-hsl":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),a=r-i,o=0===a,s=(r+i)/2;return[o?0:60*(r==e?(t-n)/a+(t<n?6:0):r==t?(n-e)/a+2:(e-t)/a+4),o?0:s<.5?a/(r+i):a/(2-r-i),s]},"hsl-rgb":function(e,t,n){if(0===t)return[n,n,n];for(var r=[(e=(e/360%1+1)%1)+1/3,e,e-1/3],i=n<.5?n*(1+t):n+t-n*t,a=2*n-i,o=[],s=0;s<3;s++){var u=r[s];u<0&&(u+=1),u>1&&(u-=1),o[s]=6*u<1?a+6*(i-a)*u:2*u<1?i:3*u<2?a+(i-a)*(2/3-u)*6:a}return o},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return l.each(t,(function(e,r){n[r]=[],l.each(e,(function(e,i){var a=l.capitalize(e),o=/^(hue|saturation)$/.test(e),s=n[r][i]="gradient"===r?"gradient"===e?function(e){var t=this._components[0];return t!==(e=q.read(Array.isArray(e)?e:arguments,0,{readNull:!0}))&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:function(){return y.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:+e};this["get"+a]=function(){return this._type===r||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(r)[i]},this["set"+a]=function(e){this._type===r||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(r),this._properties=t[r],this._type=r),this._components[i]=s.call(this,e),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function i(a){var o,s,c,h,f=arguments,d=this.__read,p=0;Array.isArray(a)&&(a=(f=a)[0]);var g=null!=a&&typeof a;if("string"===g&&a in t&&(o=a,a=f[1],Array.isArray(a)?(s=a,c=f[2]):(d&&(p=1),f=l.slice(f,1),g=typeof a)),!s){if(h="number"===g?f:"object"===g&&null!=a.length?a:null){o||(o=h.length>=3?"rgb":"gray");var v=t[o].length;c=h[v],d&&(p+=h===arguments?v+(null!=c?1:0):1),h.length>v&&(h=l.slice(h,0,v))}else if("string"===g){var m=function(t){var n,i=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(i){var o=i[4]?4:3;n=new Array(o);for(var s=0;s<o;s++){var c=i[s+1];n[s]=parseInt(1==c.length?c+c:c,16)/255}}else if(i=t.match(/^(rgb|hsl)a?\((.*)\)$/)){a=i[1],n=i[2].trim().split(/[,\s]+/g);for(var l="hsl"===a,h=(s=0,Math.min(n.length,4));s<h;s++){var f=n[s];if(c=parseFloat(f),l)if(0===s){var d=f.match(/([a-z]*)$/)[1];c*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else s<3&&(c/=100);else s<3&&(c/=/%$/.test(f)?100:255);n[s]=c}}else{var p=r[t];if(!p)if(u){e||((e=ue.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var g=e.getImageData(0,0,1,1).data;p=r[t]=[g[0]/255,g[1]/255,g[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}(a);o=m[0],4===(s=m[1]).length&&(c=s[3],s.length--)}else if("object"===g)if(a.constructor===i){if(o=a._type,s=a._components.slice(),c=a._alpha,"gradient"===o)for(var y=1,_=s.length;y<_;y++){var b=s[y];b&&(s[y]=b.clone())}}else if(a.constructor===q)o="gradient",h=f;else{var x=t[o="hue"in a?"lightness"in a?"hsl":"hsb":"gradient"in a||"stops"in a||"radial"in a?"gradient":"gray"in a?"gray":"rgb"],w=n[o];for(this._components=s=[],y=0,_=x.length;y<_;y++)null==(k=a[x[y]])&&!y&&"gradient"===o&&"stops"in a&&(k={stops:a.stops,radial:a.radial}),null!=(k=w[y].call(this,k))&&(s[y]=k);c=a.alpha}d&&o&&(p=1)}if(this._type=o||"rgb",!s)for(this._components=s=[],y=0,_=(w=n[this._type]).length;y<_;y++){var k;null!=(k=w[y].call(this,h&&h[y]))&&(s[y]=k)}return this._components=s,this._properties=t[this._type],this._alpha=c,d&&(this.__read=p),this},set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return l.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(e){var t;return this._type===e?this._components.slice():(t=a[this._type+"-"+e])?t.apply(this,this._components):a["rgb-"+e].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new W(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=l.isPlainValue(e,!0)?W.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&l.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,r=g.instance,i=0,a=e.length;i<a;i++){var o=this._components[i];null!=o&&t.push(e[i]+": "+(n?o:r.number(o)))}return null!=this._alpha&&t.push("alpha: "+r.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){var t=this._convert("rgb"),n=e||null==this._alpha?1:this._alpha;function r(e){return Math.round(255*(e<0?0:e>1?1:e))}return t=[r(t[0]),r(t[1]),r(t[2])],n<1&&t.push(n<0?0:n),e?"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1):(4==t.length?"rgba(":"rgb(")+t.join(",")+")"},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,i=r[0],a=i._stops,o=r[1],s=r[2],u=r[3],c=t&&t.inverted();if(c&&(o=c._transformPoint(o),s=c._transformPoint(s),u&&(u=c._transformPoint(u))),i._radial){var l=s.getDistance(o);if(u){var h=u.subtract(o);h.getLength()>l&&(u=o.add(h.normalize(l-.1)))}var f=u||o;n=e.createRadialGradient(f.x,f.y,0,o.x,o.y,l)}else n=e.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var g=a[d],v=g._offset;n.addColorStop(null==v?d/(p-1):v,g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,r=t.length;n<r;n++){var i=t[n];e._transformPoint(i,i,!0)}this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new W(e(),e(),e())},_setOwner:function(e,t,n){return e&&(e._owner&&t&&e._owner!==t&&(e=e.clone()),!e._owner^!t&&(e._owner=t||null,e._setter=n||null)),e}}})},new function(){return l.each({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}},(function(e,t){this[t]=function(t){t=W.read(arguments);for(var n=this._type,r=this._components,i=t._convert(n),a=0,o=r.length;a<o;a++)i[a]=e(r[a],i[a]);return new W(n,i,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}}),{})}),q=l.extend({_class:"Gradient",initialize:function(e,t){this._id=m.get(),e&&l.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"===typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,(function(){return l.serialize([this._stops,this._radial],e,!0,t)}))},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;-1!=t&&(this._owners.splice(t,1),this._owners.length||(this._owners=s))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new q(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,r=t.length;n<r;n++)t[n]._owner=s;for(n=0,r=(t=this._stops=Z.readList(e,0,{clone:!0})).length;n<r;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var i=0;i<r;i++)if(!t[i].equals(n[i]))return!1;return!0}}return!1}}),Z=l.extend({_class:"GradientStop",initialize:function(e,t){var n=e,r=t;"object"===typeof e&&t===s&&(Array.isArray(e)&&"number"!==typeof e[0]?(n=e[0],r=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(n=e.color,r=e.offset||e.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new Z(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return l.serialize(null==r?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){W._setOwner(this._color,null),this._color=W._setOwner(W.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),K=l.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new y,selectedColor:null},t=l.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=l.set({},t,{fillColor:new W}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},i={beans:!0},a={_class:"Style",beans:!0,initialize:function(r,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||fe.project,this._defaults=!i||i instanceof E?t:i instanceof G?n:e,r&&this.set(r)}};return l.each(t,(function(e,t){var n=/Color$/.test(t),o="shadowOffset"===t,u=l.capitalize(t),c=r[t],h="set"+u,f="get"+u;a[h]=function(e){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof U);if(a)for(var o=0,s=i.length;o<s;o++)i[o]._style[h](e);if(("selectedColor"===t||!a)&&t in this._defaults){var u=this._values[t];u!==e&&(n&&(u&&(W._setOwner(u,null),u._canvasStyle=null),e&&e.constructor===W&&(e=W._setOwner(e,r,a&&h))),this._values[t]=e,r&&r._changed(c||129))}},a[f]=function(e){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof U);if(a&&!e)for(var u=0,c=i.length;u<c;u++){var d=i[u]._style[f]();if(u){if(!l.equals(p,d))return s}else p=d}else if(t in this._defaults){var p;if((p=this._values[t])===s)(p=this._defaults[t])&&p.clone&&(p=p.clone());else{var g=n?W:o?y:null;!g||p&&p.constructor===g||(this._values[t]=p=g.read([p],0,{readNull:!0,clone:!0}))}}return p&&n&&(p=W._setOwner(p,r,a&&h)),p},i[f]=function(e){return this._style[f](e)},i[h]=function(e){this._style[h](e)}})),l.each({Font:"FontFamily",WindingRule:"FillRule"},(function(e,t){var n="get"+t,r="set"+t;a[n]=i[n]="#get"+e,a[r]=i[r]="#set"+e})),A.inject(i),a},{set:function(e){var t=e instanceof K,n=t?e._values:e;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&t&&i.clone?i.clone():i}},equals:function(e){function t(e,t,n){var r=e._values,i=t._values,a=t._defaults;for(var o in r){var u=r[o],c=i[o];if((!n||!(o in i))&&!l.equals(u,c===s?a[o]:c))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;(e=this.getFillColor())&&(e._canvasStyle=null),(e=this.getStrokeColor())&&(e._canvasStyle=null),(e=this.getShadowColor())&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=t?t:1.2*n}}),X=new function(){function e(e,t,n,r){for(var i=["","webkit","moz","Moz","ms","o"],a=t[0].toUpperCase()+t.substring(1),o=0;o<6;o++){var s=i[o],u=s?s+a:t;if(u in e){if(!n)return e[u];e[u]=r;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,r=e.ownerDocument,i=r.body,a=r.documentElement;try{n=e.getBoundingClientRect()}catch(c){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||i.clientLeft||0),s=n.top-(a.clientTop||i.clientTop||0);if(!t){var u=r.defaultView;o+=u.pageXOffset||a.scrollLeft||i.scrollLeft,s+=u.pageYOffset||a.scrollTop||i.scrollTop}return new w(o,s,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,r=t.documentElement;return new w(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(e,t){return X.getBounds(e,t).getPoint()},getSize:function(e){return X.getBounds(e,!0).getSize()},isInvisible:function(e){return X.getSize(e).equals(new b(0,0))},isInView:function(e){return!X.isInvisible(e)&&X.getViewportBounds(e).intersects(X.getBounds(e,!0))},isInserted:function(e){return c.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if("object"===typeof n)for(var i in n)e(t,i,!0,n[i]);else e(t,n,!0,r)}}},Q={add:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++){var s=i[a],u=e===c&&("touchstart"===s||"touchmove"===s)&&{passive:!1};e.addEventListener(s,r,u)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++)e.removeEventListener(i[a],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new y(t.pageX||t.clientX+c.documentElement.scrollLeft,t.pageY||t.clientY+c.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return Q.getPoint(e).subtract(X.getOffset(t||Q.getTarget(e)))}};Q.requestAnimationFrame=new function(){var e,t=X.getPrefixed(u,"requestAnimationFrame"),n=!1,r=[];function i(){var e=r;r=[];for(var a=0,o=e.length;a<o;a++)e[a]();(n=t&&r.length)&&t(i)}return function(a){r.push(a),t?n||(t(i),n=!0):e||(e=setInterval(i,1e3/60))}};var J=l.extend(h,{_class:"View",initialize:function e(t,n){function r(e){return n[e]||parseInt(n.getAttribute(e),10)}function i(){var e=X.getSize(n);return e.isNaN()||e.isZero()?new b(r("width"),r("height")):e}var a;if(u&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+e._id++),Q.add(n,this._viewEvents);var o="none";if(X.setPrefixed(n.style,{userDrag:o,userSelect:o,touchCallout:o,contentZooming:o,tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var s=this;Q.add(u,this._windowEvents={resize:function(){s.setViewSize(i())}})}if(a=i(),f.hasAttribute(n,"stats")&&"undefined"!==typeof Stats){this._stats=new Stats;var l=this._stats.domElement,h=l.style,d=X.getOffset(n);h.position="absolute",h.left=d.x+"px",h.top=d.y+"px",c.body.appendChild(l)}}else a=new b(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new S)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!fe.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),Q.remove(this._element,this._viewEvents),Q.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:l.each(A._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(e){this[e]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;Q.requestAnimationFrame((function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;X.getPrefixed(c,"hidden")&&"true"!==f.getAttribute(t,"keepalive")||!X.isInView(t)||e._handleFrame()}e._autoUpdate&&e.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){fe=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new l({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new l(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new x(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=b.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new y,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return X.isInView(this._element)},isInserted:function(){return X.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var r=n.parentNode,i=c.createElement("div");i.style.fontSize=e,r.appendChild(i),t=parseFloat(X.getStyles(i).fontSize),r.removeChild(i)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},l.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?l:y).read(n),i=y.read(n,0,{readNull:!0});return this.transform((new S)[e](r,i||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new S;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=y.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform((new S).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new _(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=y.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(y.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(y.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(y.read(arguments))},getEventPoint:function(e){return this.viewToProject(Q.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return c&&"string"===typeof t&&(t=c.getElementById(t)),new(u?$:J)(e,t)}}},new function(){if(u){var e,t,n,r,i,a=!1,o=!1,s=u.navigator;s.pointerEnabled||s.msPointerEnabled?(n="pointerdown MSPointerDown",r="pointermove MSPointerMove",i="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",r="touchmove",i="touchend touchcancel","ontouchstart"in u&&s.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",r+=" mousemove",i+=" mouseup"));var l={},h={mouseout:function(e){var t=J._focused,n=Q.getRelatedTarget(e);if(t&&(!n||"HTML"===n.nodeName)){var r=Q.getOffset(e,t._element),i=r.x,a=Math.abs,o=a(i),s=o-(1<<25);r.x=a(s)<o?s*(i<0?-1:1):i,A(t,e,t.viewToProject(r))}},scroll:M};l[n]=function(e){var t=J._focused=C(e);a||(a=!0,t._handleMouseEvent("mousedown",e))},h[r]=function(n){var r=J._focused;if(!o){var i=C(n);i?r!==i&&(r&&A(r,n),e||(e=r),r=J._focused=t=i):t&&t===r&&(e&&!e.isInserted()&&(e=null),r=J._focused=e,e=null,M())}r&&A(r,n)},h[n]=function(){o=!0},h[i]=function(e){var t=J._focused;t&&a&&t._handleMouseEvent("mouseup",e),o=a=!1},Q.add(c,h),Q.add(u,{load:M});var f,d,p,g,v,m,y,_,b=!1,x=!1,w={doubleclick:"click",mousedrag:"mousemove"},k=!1,S={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:l,_handleMouseEvent:function(e,t,n){var r=this._itemEvents,i=r.native[e],o="mousemove"===e,s=this._scope.tool,u=this;function c(e){return r.virtual[e]||u.responds(e)||s&&s.responds(e)}o&&a&&c("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var l=this.getBounds().contains(n),h=i&&l&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,S=!1,C={};if(C[e.substr(5)]=!0,i&&w!==g&&(g&&E(g,null,"mouseleave",t,n),w&&E(w,null,"mouseenter",t,n),g=w),k^l&&(E(this,null,l?"mouseenter":"mouseleave",t,n),S=!0),!l&&!C.drag||n.equals(d)||(T(this,w,o?e:"mousemove",t,n,d),S=!0),k=l,C.down&&l||C.up&&f){if(T(this,w,e,t,n,f),C.down){if(_=w===m&&Date.now()-y<300,p=m=w,!x&&w){for(var M=w;M&&!M.responds("mousedrag");)M=M._parent;M&&(v=w)}f=n}else C.up&&(x||w!==p||(y=Date.now(),T(this,w,_?"doubleclick":"click",t,n,f),_=!1),p=v=null);k=!1,S=!0}d=n,S&&s&&(b=s._handleMouseEvent(e,t,n,C)||b),!1!==t.cancelable&&(b&&!C.move||C.down&&c("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,r){var i,a=this._scope,o=a.tool;function s(o){o.responds(e)&&(fe=a,o.emit(e,i=i||new te(e,t,n,r)))}this.isVisible()&&(s(this),o&&o.responds(e)&&s(o))},_countItemEvent:function(e,t){var n=this._itemEvents,r=n.native,i=n.virtual;for(var a in S)r[a]=(r[a]||0)+(S[a][e]||0)*t;i[e]=(i[e]||0)+t},statics:{updateFocus:M,_resetState:function(){a=o=b=k=!1,e=t=f=d=p=g=v=m=y=_=null}}}}function C(e){var t=Q.getTarget(e);return t.getAttribute&&J._viewsById[t.getAttribute("id")]}function M(){var e=J._focused;if(!e||!e.isVisible())for(var n=0,r=J._views.length;n<r;n++)if((e=J._views[n]).isVisible()){J._focused=t=e;break}}function A(e,t,n){e._handleMouseEvent("mousemove",t,n)}function E(e,t,n,r,i,a,o){var s,u=!1;function c(e,n){if(e.responds(n)){if(s||(s=new re(n,r,i,t||e,a?i.subtract(a):null)),e.emit(n,s)&&(b=!0,s.prevented&&(x=!0),s.stopped))return u=!0}else{var o=w[n];if(o)return c(e,o)}}for(;e&&e!==o&&!c(e,n);)e=e._parent;return u}function T(e,t,n,r,i,a){return e._project.removeOn(n),x=b=!1,v&&E(v,null,n,r,i,a)||t&&t!==v&&!t.isDescendant(v)&&E(t,null,"mousedrag"===n?"mousemove":n,r,i,a,v)||E(e,v||t||e,n,r,i,a)}}),$=J.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof u.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+l.slice(arguments,1));t=ue.getCanvas(n)}var r=this._context=t.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(t,"hidpi"))){var i=u.devicePixelRatio||1,a=X.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=i/a}J.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),1!==r){var i=this._element,a=this._context;if(!f.hasAttribute(i,"resize")){var o=i.style;o.width=t+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n,r=fe.agent;if(r&&r.firefox)n=e.base.call(this,t);else{var i=this._context,a=i.font;i.font=t+" serif",n=parseFloat(i.font),i.font=a}return n},getTextWidth:function(e,t){var n=this._context,r=n.font,i=0;n.font=e;for(var a=0,o=t.length;a<o;a++)i=Math.max(i,n.measureText(t[a]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),ee=l.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ne.modifiers}}),te=ee.extend({_class:"KeyEvent",initialize:function(e,t,n,r){this.type=e,this.event=t,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),ne=new function(){var e,t,n={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},r={tab:"\t",space:" ",enter:"\r"},i={},a={},o=new l({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=fe&&fe.agent;return e&&e.mac?this.meta:this.control}}});function h(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?String.fromCharCode(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):"Unidentified"===t||t===s?String.fromCharCode(e.keyCode):t,n[t]||(t.length>1?l.hyphenate(t):t.toLowerCase())}function f(t,n,r,s){var u,c=J._focused;if(i[n]=t,t?a[n]=r:delete a[n],n.length>1&&(u=l.camelize(n))in o){o[u]=t;var h=fe&&fe.agent;if("meta"===u&&h&&h.mac)if(t)e={};else{for(var d in e)d in a&&f(!1,d,e[d],s);e=null}}else t&&e&&(e[n]=r);c&&c._handleKeyEvent(t?"keydown":"keyup",s,n,r)}return Q.add(c,{keydown:function(e){var n=h(e),i=fe&&fe.agent;n.length>1||i&&i.chrome&&(e.altKey||i.mac&&e.metaKey||!i.mac&&e.ctrlKey)?f(!0,n,r[n]||(n.length>1?"":n),e):t=n},keypress:function(e){if(t){var n=h(e),r=e.charCode,i=r>=32?String.fromCharCode(r):n.length>1?"":n;n!==t&&(n=i.toLowerCase()),f(!0,n,i,e),t=null}},keyup:function(e){var t=h(e);t in a&&f(!1,t,a[t],e)}}),Q.add(u,{blur:function(e){for(var t in a)f(!1,t,a[t],e)}}),{modifiers:o,isDown:function(e){return!!i[e]}}},re=ee.extend({_class:"MouseEvent",initialize:function(e,t,n,r,i){this.type=e,this.event=t,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ie=ee.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ae=d.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){fe=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var i=r.move||r.drag,a=this.responds(e),o=this.minDistance,s=this.maxDistance,u=!1,c=this;function l(e,t){var a=n,o=i?c._point:c._downPoint||a;if(i){if(c._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=e||null!=t)){var s=a.subtract(o),u=s.getLength();if(u<(e||0))return!1;t&&(a=o.add(s.normalize(Math.min(u,t))))}c._moveCount++}return c._point=a,c._lastPoint=o||a,r.down&&(c._moveCount=-1,c._downPoint=a,c._downCount++),!0}function h(){a&&(u=c.emit(e,new ie(c,e,t))||u)}if(r.down)l(),h();else if(r.up)l(null,s),h();else if(a)for(;l(o,s);)h();return u}}),oe=l.extend(h,{_class:"Tween",statics:{easings:new l({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:2*(2-e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,i,a,o){this.object=t;var s=typeof a,u="function"===s;this.type=u?s:"string"===s?a:"linear",this.easing=u?a:e.easings[this.type],this.duration=i,this.running=!1,this._then=null,this._startTime=null;var c=n||r;this._keys=c?Object.keys(c):[],this._parsedKeys=this._parseKeys(this._keys),this._from=c&&this._getState(n),this._to=c&&this._getState(r),!1!==o&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(n){return"function"===typeof n?n(t,e):n},i=0,a=n&&n.length;i<a;i++){var o=n[i],s=r(this._from[o]),u=r(this._to[o]),c=s&&u&&s.__add&&u.__add?u.__subtract(s).__multiply(t).__add(s):(u-s)*t+s;this._setProperty(this._parsedKeys[o],c)}this.responds("update")&&this.emit("update",new l({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,i=t.length;r<i;r++){var a,o=t[r],s=this._parsedKeys[o],u=this._getProperty(s);if(e){var c=this._resolveValue(u,e[o]);this._setProperty(s,c),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,u)}else a=u&&u.clone?u.clone():u;n[o]=a}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&2===t.length){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}if("string"===typeof t){var r=t.match(/^[+\-*/]=(.*)/);if(r){var i=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],i)}}}return t},_calculate:function(e,t,n){return fe.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n],a=i.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[i]=a.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,i=e.length-(t||0);r<i&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),se=function(e){var t=new o.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,l.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;0===n||200===n?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,r='Could not load "'+e.url+'" (Status: '+n+")";if(!e.onError)throw new Error(r);e.onError(r,n)},t.send(null)},ue=l.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!u)return null;var r,i=!0;"object"===typeof e&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=c.createElement("canvas"),i=!1);var a=r.getContext("2d",n||{});if(!a)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?i&&a.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),a.save(),r},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ce=new function(){var e,t,n,r,i,a,o,s,u,c,h,f=Math.min,d=Math.max,p=Math.abs;function g(e,t,n){return.2989*e+.587*t+.114*n}function v(e,t,n,r){var i=r-g(e,t,n),a=(r=g(u=e+i,c=t+i,h=n+i),f(u,c,h)),o=d(u,c,h);if(a<0){var s=r-a;u=r+(u-r)*r/s,c=r+(c-r)*r/s,h=r+(h-r)*r/s}if(o>255){var l=255-r,p=o-r;u=r+(u-r)*l/p,c=r+(c-r)*l/p,h=r+(h-r)*l/p}}function m(e,t,n){return d(e,t,n)-f(e,t,n)}function y(e,t,n,r){var i,a=[e,t,n],o=d(e,t,n),s=f(e,t,n);i=0===f(s=s===e?0:s===t?1:2,o=o===e?0:o===t?1:2)?1===d(s,o)?2:1:0,a[o]>a[s]?(a[i]=(a[i]-a[s])*r/(a[o]-a[s]),a[o]=r):a[i]=a[o]=0,a[s]=0,u=a[0],c=a[1],h=a[2]}var _={multiply:function(){u=i*e/255,c=a*t/255,h=o*n/255},screen:function(){u=i+e-i*e/255,c=a+t-a*t/255,h=o+n-o*n/255},overlay:function(){u=i<128?2*i*e/255:255-2*(255-i)*(255-e)/255,c=a<128?2*a*t/255:255-2*(255-a)*(255-t)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var r=e*i/255;u=r+i*(255-(255-i)*(255-e)/255-r)/255,c=(r=t*a/255)+a*(255-(255-a)*(255-t)/255-r)/255,h=(r=n*o/255)+o*(255-(255-o)*(255-n)/255-r)/255},"hard-light":function(){u=e<128?2*e*i/255:255-2*(255-e)*(255-i)/255,c=t<128?2*t*a/255:255-2*(255-t)*(255-a)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){u=0===i?0:255===e?255:f(255,255*i/(255-e)),c=0===a?0:255===t?255:f(255,255*a/(255-t)),h=0===o?0:255===n?255:f(255,255*o/(255-n))},"color-burn":function(){u=255===i?255:0===e?0:d(0,255-255*(255-i)/e),c=255===a?255:0===t?0:d(0,255-255*(255-a)/t),h=255===o?255:0===n?0:d(0,255-255*(255-o)/n)},darken:function(){u=i<e?i:e,c=a<t?a:t,h=o<n?o:n},lighten:function(){u=i>e?i:e,c=a>t?a:t,h=o>n?o:n},difference:function(){(u=i-e)<0&&(u=-u),(c=a-t)<0&&(c=-c),(h=o-n)<0&&(h=-h)},exclusion:function(){u=i+e*(255-i-i)/255,c=a+t*(255-a-a)/255,h=o+n*(255-o-o)/255},hue:function(){y(e,t,n,m(i,a,o)),v(u,c,h,g(i,a,o))},saturation:function(){y(i,a,o,m(e,t,n)),v(u,c,h,g(i,a,o))},luminosity:function(){v(i,a,o,g(e,t,n))},color:function(){v(e,t,n,g(i,a,o))},add:function(){u=f(i+e,255),c=f(a+t,255),h=f(o+n,255)},subtract:function(){u=d(i-e,0),c=d(a-t,0),h=d(o-n,0)},average:function(){u=(i+e)/2,c=(a+t)/2,h=(o+n)/2},negation:function(){u=255-p(255-e-i),c=255-p(255-t-a),h=255-p(255-n-o)}},b=this.nativeModes=l.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(e){this[e]=!0}),{}),x=ue.getContext(1,1,{willReadFrequently:!0});x&&(l.each(_,(function(e,t){var n="darken"===t,r=!1;x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=t,x.globalCompositeOperation===t&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),r=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}x.restore(),b[t]=r})),ue.release(x)),this.process=function(l,f,d,p,g){var v=f.canvas,m="normal"===l;if(m||b[l])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,m||(d.globalCompositeOperation=l),d.drawImage(v,g.x,g.y),d.restore();else{var y=_[l];if(!y)return;for(var x=d.getImageData(g.x,g.y,v.width,v.height),w=x.data,k=f.getImageData(0,0,v.width,v.height).data,S=0,C=w.length;S<C;S+=4){e=k[S],i=w[S],t=k[S+1],a=w[S+1],n=k[S+2],o=w[S+2],r=k[S+3],s=w[S+3],y();var M=r*p/255,A=1-M;w[S]=M*u+A*i,w[S+1]=M*c+A*a,w[S+2]=M*h+A*o,w[S+3]=r*p+A*s}d.putImageData(x,g.x,g.y)}}},le=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function i(e,t,n){for(var i in t){var a=t[i],o=r[i];"number"===typeof a&&n&&(a=n.number(a)),o?e.setAttributeNS(o,i,a):e.setAttribute(i,a)}return e}return{svg:e,xmlns:t,xlink:n,create:function(t,n,r){return i(c.createElementNS(e,t),n,r)},get:function(e,t){var n=r[t],i=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===i?null:i},set:i}},he=l.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof z||e instanceof I||e instanceof G)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(e,t){var n=l.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&l.each(r,(function(e,t){this[e]=t}),{}),exportFilter:e[3],get:"get"+n,set:"set"+n}}),{});new function(){var e;function t(t,n,r){var i,a=new l,o=t.getTranslation();if(n&&(t.isInvertible()?(i=(t=t._shiftless())._inverseTransform(o),o=null):i=new y,a[r?"cx":"x"]=i.x,a[r?"cy":"y"]=i.y),!t.isIdentity()){var s=t.decompose();if(s){var u=[],c=s.rotation,h=s.scaling,f=s.skewing;o&&!o.isZero()&&u.push("translate("+e.point(o)+")"),c&&u.push("rotate("+e.number(c)+")"),v.isZero(h.x-1)&&v.isZero(h.y-1)||u.push("scale("+e.point(h)+")"),f.x&&u.push("skewX("+e.number(f.x)+")"),f.y&&u.push("skewY("+e.number(f.y)+")"),a.transform=u.join(" ")}else a.transform="matrix("+t.getValues().join(",")+")"}return a}function n(n,r){for(var i=t(n._matrix),a=n._children,o=le.create("g",i,e),s=0,u=a.length;s<u;s++){var l=a[s],h=f(l,r);if(h)if(l.isClipMask()){var d=le.create("clipPath");d.appendChild(h),c(l,d,"clip"),le.set(o,{"clip-path":"url(#"+d.id+")"})}else o.appendChild(h)}return o}function r(n){var r=n._type,i=n._radius,a=t(n._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var o=n._size,s=o.width,u=o.height;a.x-=s/2,a.y-=u/2,a.width=s,a.height=u,i.isZero()&&(i=null)}return i&&("circle"===r?a.r=i:(a.rx=i.width,a.ry=i.height)),le.create(r,a,e)}var i,a={Group:n,Layer:n,Raster:function(n,r){var i=t(n._matrix,!0),a=n.getSize(),o=n.getImage();return i.x-=a.width/2,i.y-=a.height/2,i.width=a.width,i.height=a.height,i.href=0==r.embedImages&&o&&o.src||n.toDataURL(),le.create("image",i,e)},Path:function(n,i){var a=i.matchShapes;if(a){var o=n.toShape(!1);if(o)return r(o)}var s,u=n._segments,c=u.length,l=t(n._matrix);if(a&&c>=2&&!n.hasHandles())if(c>2){s=n._closed?"polygon":"polyline";for(var h=[],f=0;f<c;f++)h.push(e.point(u[f]._point));l.points=h.join(" ")}else{s="line";var d=u[0]._point,p=u[1]._point;l.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else s="path",l.d=n.getPathData(null,i.precision);return le.create(s,l,e)},Shape:r,CompoundPath:function(n,r){var i=t(n._matrix),a=n.getPathData(null,r.precision);return a&&(i.d=a),le.create("path",i,e)},SymbolItem:function(n,r){var i=t(n._matrix,!0),a=n._definition,o=u(a,"symbol"),s=a._item,l=s.getStrokeBounds();return o||((o=le.create("symbol",{viewBox:e.rectangle(l)})).appendChild(f(s,r)),c(a,o,"symbol")),i.href="#"+o.id,i.x+=l.x,i.y+=l.y,i.width=l.width,i.height=l.height,i.overflow="visible",le.create("use",i,e)},PointText:function(n){var r=le.create("text",t(n._matrix,!0),e);return r.textContent=n._content,r}};function s(t,n,r){var i={},a=!r&&t.getParent(),o=[];return null!=t._name&&(i.id=t._name),l.each(he,(function(n){var r=n.get,s=n.type,h=t[r]();if(n.exportFilter?n.exportFilter(t,h):!a||!l.equals(a[r](),h)){if("color"===s&&null!=h){var f=h.getAlpha();f<1&&(i[n.attribute+"-opacity"]=f)}"style"===s?o.push(n.attribute+": "+h):i[n.attribute]=null==h?"none":"color"===s?h.gradient?function(t){var n=u(t,"color");if(!n){var r,i=t.getGradient(),a=i._radial,o=t.getOrigin(),s=t.getDestination();if(a){r={cx:o.x,cy:o.y,r:o.getDistance(s)};var l=t.getHighlight();l&&(r.fx=l.x,r.fy=l.y)}else r={x1:o.x,y1:o.y,x2:s.x,y2:s.y};r.gradientUnits="userSpaceOnUse",n=le.create((a?"radial":"linear")+"Gradient",r,e);for(var h=i._stops,f=0,d=h.length;f<d;f++){var p=h[f],g=p._color,v=g.getAlpha(),m=p._offset;r={offset:null==m?f/(d-1):m},g&&(r["stop-color"]=g.toCSS(!0)),v<1&&(r["stop-opacity"]=v),n.appendChild(le.create("stop",r,e))}c(t,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===s?h.join(","):"lookup"===s?n.toSVG[h]:h}})),o.length&&(i.style=o.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),le.set(n,i,e)}function u(e,t){return i||(i={ids:{},svgs:{}}),e&&i.svgs[t+"-"+(e._id||e.__id||(e.__id=m.get("svg")))]}function c(e,t,n){i||u();var r=i.ids[n]=(i.ids[n]||0)+1;t.id=n+"-"+r,i.svgs[n+"-"+(e._id||e.__id)]=t}function h(e,t){var n=e,r=null;if(i){for(var a in n="svg"===e.nodeName.toLowerCase()&&e,i.svgs)r||(n||(n=le.create("svg")).appendChild(e),r=n.insertBefore(le.create("defs"),n.firstChild)),r.appendChild(i.svgs[a]);i=null}return t.asString?(new o.XMLSerializer).serializeToString(n):n}function f(e,t,n){var r=a[e._class],i=r&&r(e,t);if(i){var o=t.onExport;o&&(i=o(e,i,t)||i);var u=JSON.stringify(e._data);u&&"{}"!==u&&"null"!==u&&i.setAttribute("data-paper-data",u)}return i&&s(e,i,n)}function d(t){return t||(t={}),e=new g(t.precision),t}A.inject({exportSVG:function(e){return h(f(this,e=d(e),!0),e)}}),M.inject({exportSVG:function(n){n=d(n);var r=this._children,i=this.getView(),a=l.pick(n.bounds,"view"),o=n.matrix||"view"===a&&i._matrix,s=o&&S.read([o]),u="view"===a?new w([0,0],i.getViewSize()):"content"===a?A._getBounds(r,s,{stroke:!0}).rect:w.read([a],0,{readNull:!0}),c={version:"1.1",xmlns:le.svg,"xmlns:xlink":le.xlink};u&&(c.width=u.width,c.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(c.viewBox=e.rectangle(u)));var p=le.create("svg",c,e),g=p;s&&!s.isIdentity()&&(g=p.appendChild(le.create("g",t(s),e)));for(var v=0,m=r.length;v<m;v++)g.appendChild(f(r[v],n,!0));return h(p,n)}})},new function(){var e,t={};function n(t,n,r,i,a,o){var s=le.get(t,n)||o,u=null==s?i?null:r?"":0:r?s:parseFloat(s);return/%\s*$/.test(s)?u/100*(a?1:e[/x|^width/.test(n)?"width":"height"]):u}function r(e,t,r,i,a,o,s){return t=n(e,t||"x",!1,i,a,o),r=n(e,r||"y",!1,i,a,s),!i||null!=t&&null!=r?new y(t,r):null}function i(e,t,r,i,a){return t=n(e,t||"width",!1,i,a),r=n(e,r||"height",!1,i,a),!i||null!=t&&null!=r?new b(t,r):null}function a(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?k(e)||e:"lookup"===t?n[e]:e}function h(e,t,n,r){var i=e.childNodes,a="clippath"===t,o="defs"===t,s=new E,u=s._project,c=u._currentStyle,l=[];if(a||o||(s=x(s,e,r),u._currentStyle=s._style.clone()),r)for(var h=e.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)C(h[f],n,!1);for(f=0,d=i.length;f<d;f++){var p,g=i[f];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(p=C(g,n,!1))||p instanceof P||l.push(p)}return s.addChildren(l),a&&(s=x(s.reduce(),e,r)),u._currentStyle=c,(a||o)&&(s.remove(),s=null),s}function f(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,a=n.length;i<a;i+=2)r.push(new y(parseFloat(n[i]),parseFloat(n[i+1])));var o=new F(r);return"polygon"===t&&o.closePath(),o}function d(e,i){var a,o=(n(e,"href",!0)||"").substring(1),s="radialgradient"===i;if(o)(a=t[o].getGradient())._radial^s&&((a=a.clone())._radial=s);else{for(var u=e.childNodes,c=[],l=0,h=u.length;l<h;l++){var f=u[l];1===f.nodeType&&c.push(x(new Z,f))}a=new q(c,s)}var d,p,g,v="userSpaceOnUse"!==n(e,"gradientUnits",!0);return s?(p=(d=r(e,"cx","cy",!1,v,"50%","50%")).add(n(e,"r",!1,!1,v,"50%"),0),g=r(e,"fx","fy",!0,v)):(d=r(e,"x1","y1",!1,v,"0%","0%"),p=r(e,"x2","y2",!1,v,"100%","0%")),x(new W(a,d,p,g),e)._scaleToBounds=v,null}var p={"#document":function(e,t,n,r){for(var i=e.childNodes,a=0,o=i.length;a<o;a++){var s=i[a];if(1===s.nodeType)return C(s,n,r)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(e){return z.create(e.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(e){var t=new L(n(e,"href",!0));return t.on("load",(function(){var t=i(e);this.setSize(t);var n=r(e).add(t.divide(2));this._matrix.append((new S).translate(n))})),t},symbol:function(e,t,n,r){return new P(h(e,t,n,r),!0)},defs:h,use:function(e){var i=(n(e,"href",!0)||"").substring(1),a=t[i],o=r(e);return a?a instanceof P?a.place(o):a.clone().translate(o):null},circle:function(e){return new I.Circle(r(e,"cx","cy"),n(e,"r"))},ellipse:function(e){return new I.Ellipse({center:r(e,"cx","cy"),radius:i(e,"rx","ry")})},rect:function(e){return new I.Rectangle(new w(r(e),i(e)),i(e,"rx","ry"))},line:function(e){return new F.Line(r(e,"x1","y1"),r(e,"x2","y2"))},text:function(e){var t=new Y(r(e).add(r(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),t},switch:h};function g(e,t,n,r){if(e.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),a=new S,o=0,s=i.length;o<s;o++){var u=i[o];if(!u)break;for(var c=u.split(/\(\s*/),l=c[0],h=c[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(l){case"matrix":a.append(new S(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":a.translate(h[0],h[1]||0);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}e.transform(a)}}function v(e,t,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=e[r]&&e[r]();i&&i.setAlpha(parseFloat(t))}var m=l.set(l.each(he,(function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](a(n,e.type,e.fromSVG)),"color"===e.type)){var r=t[e.get]();if(r&&r._scaleToBounds){var i=t.getBounds();r.transform((new S).translate(i.getPoint()).scale(i.getSize()))}}}}),{}),{id:function(e,n){t[n]=e,e.setName&&e.setName(n)},"clip-path":function(e,t){var n=k(t);if(n){if((n=n.clone()).setClipMask(!0),!(e instanceof E))return new E(n,e);e.insertChild(0,n)}},gradientTransform:g,transform:g,"fill-opacity":v,"stroke-opacity":v,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,n,r,o){var s,u=new w(a(t,"array")),c=i(r,null,null,!0);if(e instanceof E){var l=c?c.divide(u.getSize()):1,h=(new S).scale(l).translate(u.getPoint().negate());s=e}else e instanceof P&&(c&&u.setSize(c),s=e._item);if(s){if("visible"!==_(r,"overflow",o)){var f=new I.Rectangle(u);f.setClipMask(!0),s.addChild(f)}h&&s.transform(h)}}});function _(e,t,n){var r=e.attributes[t],i=r&&r.value;if(!i&&e.style){var a=l.camelize(t);(i=e.style[a])||n.node[a]===n.parent[a]||(i=n.node[a])}return i?"none"===i?null:i:s}function x(e,t,n){var r=t.parentNode,i={node:X.getStyles(t)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&X.getStyles(r)||{}};return l.each(m,(function(n,r){var a=_(t,r,i);e=a!==s&&n(e,a,r,t,i)||e})),e}function k(e){var n=e&&e.match(/\((?:["'#]*)([^"')]+)/),r=n&&n[1],i=r&&t[u?r.replace(u.location.href.split("#")[0]+"#",""):r];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function C(n,r,a){var o,s,u,h=n.nodeName.toLowerCase(),f="#document"!==h,d=c.body;a&&f&&(e=fe.getView().getSize(),e=i(n,null,null,!0)||e,o=le.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=n.parentNode,u=n.nextSibling,o.appendChild(n),d.appendChild(o));var g=fe.settings,v=g.applyMatrix,m=g.insertItems;g.applyMatrix=!1,g.insertItems=!1;var y=p[h],_=y&&y(n,h,r,a)||null;if(g.insertItems=m,g.applyMatrix=v,_){!f||_ instanceof E||(_=x(_,n,a));var b=r.onImport,w=f&&n.getAttribute("data-paper-data");b&&(_=b(n,_,r)||_),r.expandShapes&&_ instanceof I&&(_.remove(),_=_.toPath()),w&&(_._data=JSON.parse(w))}return o&&(d.removeChild(o),s&&(u?s.insertBefore(n,u):s.appendChild(n))),a&&(t={},_&&l.pick(r.applyMatrix,v)&&_.matrix.apply(!0,!0)),_}function T(e,t,n){if(!e)return null;t="function"===typeof t?{onLoad:t}:t||{};var r=fe,i=null;function a(a){try{var c="object"===typeof a?a:(new o.DOMParser).parseFromString(a.trim(),"image/svg+xml");if(!c.nodeName)throw c=null,new Error("Unsupported SVG source: "+e);fe=r,i=C(c,t,!0),t&&!1===t.insert||n._insertItem(s,i);var l=t.onLoad;l&&l(i,a)}catch(h){u(h)}}function u(e,n){var r=t.onError;if(!r)throw new Error(e);r(e,n)}if("string"!==typeof e||/^[\s\S]*</.test(e)){if("undefined"!==typeof File&&e instanceof File){var l=new FileReader;return l.onload=function(){a(l.result)},l.onerror=function(){u(l.error)},l.readAsText(e)}a(e)}else{var h=c.getElementById(e);h?a(h):se({url:e,async:!0,onLoad:a,onError:u})}return i}A.inject({importSVG:function(e,t){return T(e,t,this)}}),M.inject({importSVG:function(e,t){return this.activate(),T(e,t,this)}})},l.exports.PaperScript=function(){var e,t,h,d=this,p=d.acorn;if(!p)try{p=n("../../../node_modules/acorn/dist/acorn.es.js")}catch(A){}function g(e,t){return(d.acorn||p).parse(e,t)}p||(p=e=t={},h=function(e){"use strict";var t,n,r,i;e.version="0.5.0",e.parse=function(e,i){return n=String(e),r=n.length,o(i),qe(),function(e){m=y=s,t.locations&&(_=new We),b=w=null,x=[],$e();var n=e||ht(),r=!0;for(e||(n.body=[]);f!==L;){var i=kt();n.body.push(i),r&&pt(i)&&ut(!0),r=!1}return dt(n,"Program")}(t.program)};var a=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function o(e){for(var n in t=e||{},a)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=a[n]);i=t.sourceFile||null}var s,u,c,l,h,f,d,p,g,v,m,y,_,b,x,w,k=e.getLineInfo=function(e,t){for(var n=1,r=0;;){He.lastIndex=r;var i=He.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}};function S(e,t){var r=k(n,e);t+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=r,i.raisedAt=s,i}e.tokenize=function(e,i){n=String(e),r=n.length,o(i),qe();var a={};function m(e){return y=c,$e(e),a.start=u,a.end=c,a.startLoc=l,a.endLoc=h,a.type=f,a.value=d,a}return m.jumpTo=function(e,r){var i;if(s=e,t.locations)for(g=1,v=He.lastIndex=0;(i=He.exec(n))&&i.index<e;)++g,v=i.index+i[0].length;p=r,Qe()},m};var C=[],M={type:"num"},E={type:"regexp"},T={type:"string"},I={type:"name"},L={type:"eof"},O={keyword:"break"},P={keyword:"case",beforeExpr:!0},D={keyword:"catch"},B={keyword:"continue"},N={keyword:"debugger"},R={keyword:"default"},j={keyword:"do",isLoop:!0},z={keyword:"else",beforeExpr:!0},F={keyword:"finally"},U={keyword:"for",isLoop:!0},V={keyword:"function"},H={keyword:"if"},G={keyword:"return",beforeExpr:!0},Y={keyword:"switch"},W={keyword:"throw",beforeExpr:!0},q={keyword:"try"},Z={keyword:"var"},K={keyword:"while",isLoop:!0},X={keyword:"with"},Q={keyword:"new",beforeExpr:!0},J={keyword:"this"},$={keyword:"null",atomValue:null},ee={keyword:"true",atomValue:!0},te={keyword:"false",atomValue:!1},ne={keyword:"in",binop:7,beforeExpr:!0},re={break:O,case:P,catch:D,continue:B,debugger:N,default:R,do:j,else:z,finally:F,for:U,function:V,if:H,return:G,switch:Y,throw:W,try:q,var:Z,while:K,with:X,null:$,true:ee,false:te,new:Q,in:ne,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:J,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ie={type:"[",beforeExpr:!0},ae={type:"]"},oe={type:"{",beforeExpr:!0},se={type:"}"},ue={type:"(",beforeExpr:!0},ce={type:")"},le={type:",",beforeExpr:!0},he={type:";",beforeExpr:!0},fe={type:":",beforeExpr:!0},de={type:"."},pe={type:"?",beforeExpr:!0},ge={binop:10,beforeExpr:!0},ve={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},ye={postfix:!0,prefix:!0,isUpdate:!0},_e={prefix:!0,beforeExpr:!0},be={binop:1,beforeExpr:!0},xe={binop:2,beforeExpr:!0},we={binop:3,beforeExpr:!0},ke={binop:4,beforeExpr:!0},Se={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},Me={binop:7,beforeExpr:!0},Ae={binop:8,beforeExpr:!0},Ee={binop:9,prefix:!0,beforeExpr:!0},Te={binop:10,beforeExpr:!0};for(var Ie in e.tokTypes={bracketL:ie,bracketR:ae,braceL:oe,braceR:se,parenL:ue,parenR:ce,comma:le,semi:he,colon:fe,dot:de,question:pe,slash:ge,eq:ve,name:I,eof:L,num:M,regexp:E,string:T},re)e.tokTypes["_"+Ie]=re[Ie];function Le(e){e=e.split(" ");var t="",n=[];e:for(var r=0;r<e.length;++r){for(var i=0;i<n.length;++i)if(n[i][0].length==e[r].length){n[i].push(e[r]);continue e}n.push([e[r]])}function a(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort((function(e,t){return t.length-e.length})),t+="switch(str.length){",r=0;r<n.length;++r){var o=n[r];t+="case "+o[0].length+":",a(o)}t+="}"}else a(e);return new Function("str",t)}var Oe,Pe=Le("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),De=Le("class enum extends super const export import"),Be=Le("implements interface let package private protected public static yield"),Ne=Le("eval arguments"),Re=Le("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),je=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ze="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Fe=new RegExp("["+ze+"]"),Ue=new RegExp("["+ze+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Ve=/[\n\r\u2028\u2029]/,He=/\r\n|[\n\r\u2028\u2029]/g,Ge=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&Fe.test(String.fromCharCode(e)))},Ye=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&Ue.test(String.fromCharCode(e))))};function We(){this.line=g,this.column=s-v}function qe(){g=1,s=v=0,p=!0,Qe()}function Ze(e,n){c=s,t.locations&&(h=new We),f=e,Qe(),d=n,p=e.beforeExpr}function Ke(){var e,r=t.onComment&&t.locations&&new We,i=s,a=n.indexOf("*/",s+=2);if(-1===a&&S(s-2,"Unterminated comment"),s=a+2,t.locations)for(He.lastIndex=i;(e=He.exec(n))&&e.index<s;)++g,v=e.index+e[0].length;t.onComment&&t.onComment(!0,n.slice(i+2,a),i,s,r,t.locations&&new We)}function Xe(){for(var e=s,i=t.onComment&&t.locations&&new We,a=n.charCodeAt(s+=2);s<r&&10!==a&&13!==a&&8232!==a&&8233!==a;)++s,a=n.charCodeAt(s);t.onComment&&t.onComment(!1,n.slice(e+2,s),e,s,i,t.locations&&new We)}function Qe(){for(;s<r;){var e=n.charCodeAt(s);if(32===e)++s;else if(13===e)++s,10===(i=n.charCodeAt(s))&&++s,t.locations&&(++g,v=s);else if(10===e||8232===e||8233===e)++s,t.locations&&(++g,v=s);else if(e>8&&e<14)++s;else if(47===e){var i;if(42===(i=n.charCodeAt(s+1)))Ke();else{if(47!==i)break;Xe()}}else if(160===e)++s;else{if(!(e>=5760&&je.test(String.fromCharCode(e))))break;++s}}}function Je(e){switch(e){case 46:return function(){var e=n.charCodeAt(s+1);return e>=48&&e<=57?rt(!0):(++s,Ze(de))}();case 40:return++s,Ze(ue);case 41:return++s,Ze(ce);case 59:return++s,Ze(he);case 44:return++s,Ze(le);case 91:return++s,Ze(ie);case 93:return++s,Ze(ae);case 123:return++s,Ze(oe);case 125:return++s,Ze(se);case 58:return++s,Ze(fe);case 63:return++s,Ze(pe);case 48:var i=n.charCodeAt(s+1);if(120===i||88===i)return function(){s+=2;var e=nt(16);return null==e&&S(u+2,"Expected hexadecimal number"),Ge(n.charCodeAt(s))&&S(s,"Identifier directly after number"),Ze(M,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return rt(!1);case 34:case 39:return function(e){s++;for(var i="";;){s>=r&&S(u,"Unterminated string constant");var a=n.charCodeAt(s);if(a===e)return++s,Ze(T,i);if(92===a){a=n.charCodeAt(++s);var o=/^[0-7]+/.exec(n.slice(s,s+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++s,o)w&&S(s-2,"Octal literal in strict mode"),i+=String.fromCharCode(parseInt(o,8)),s+=o.length-1;else switch(a){case 110:i+="\n";break;case 114:i+="\r";break;case 120:i+=String.fromCharCode(it(2));break;case 117:i+=String.fromCharCode(it(4));break;case 85:i+=String.fromCharCode(it(8));break;case 116:i+="\t";break;case 98:i+="\b";break;case 118:i+="\v";break;case 102:i+="\f";break;case 48:i+="\0";break;case 13:10===n.charCodeAt(s)&&++s;case 10:t.locations&&(v=s,++g);break;default:i+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||S(u,"Unterminated string constant"),i+=String.fromCharCode(a),++s}}(e);case 47:return function(){var e=n.charCodeAt(s+1);return p?(++s,tt()):61===e?et(me,2):et(ge,1)}();case 37:case 42:return 61===n.charCodeAt(s+1)?et(me,2):et(Te,1);case 124:case 38:return function(e){var t=n.charCodeAt(s+1);return t===e?et(124===e?be:xe,2):61===t?et(me,2):et(124===e?we:Se,1)}(e);case 94:return 61===n.charCodeAt(s+1)?et(me,2):et(ke,1);case 43:case 45:return function(e){var t=n.charCodeAt(s+1);return t===e?45==t&&62==n.charCodeAt(s+2)&&Ve.test(n.slice(y,s))?(s+=3,Xe(),Qe(),$e()):et(ye,2):61===t?et(me,2):et(Ee,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(s+1),r=1;return t===e?(r=62===e&&62===n.charCodeAt(s+2)?3:2,61===n.charCodeAt(s+r)?et(me,r+1):et(Ae,r)):33==t&&60==e&&45==n.charCodeAt(s+2)&&45==n.charCodeAt(s+3)?(s+=4,Xe(),Qe(),$e()):(61===t&&(r=61===n.charCodeAt(s+2)?3:2),et(Me,r))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(s+1)?et(Ce,61===n.charCodeAt(s+2)?3:2):et(61===e?ve:_e,1)}(e);case 126:return et(_e,1)}return!1}function $e(e){if(e?s=u+1:u=s,t.locations&&(l=new We),e)return tt();if(s>=r)return Ze(L);var i=n.charCodeAt(s);if(Ge(i)||92===i)return ot();var a=Je(i);if(!1===a){var o=String.fromCharCode(i);if("\\"===o||Fe.test(o))return ot();S(s,"Unexpected character '"+o+"'")}return a}function et(e,t){var r=n.slice(s,s+t);s+=t,Ze(e,r)}function tt(){for(var e,t,i=s;;){s>=r&&S(i,"Unterminated regular expression");var a=n.charAt(s);if(Ve.test(a)&&S(i,"Unterminated regular expression"),e)e=!1;else{if("["===a)t=!0;else if("]"===a&&t)t=!1;else if("/"===a&&!t)break;e="\\"===a}++s}var o=n.slice(i,s);++s;var u=at();u&&!/^[gmsiy]*$/.test(u)&&S(i,"Invalid regexp flag");try{var c=new RegExp(o,u)}catch(A){A instanceof SyntaxError&&S(i,A.message),S(A)}return Ze(E,c)}function nt(e,t){for(var r=s,i=0,a=0,o=null==t?1/0:t;a<o;++a){var u,c=n.charCodeAt(s);if((u=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=e)break;++s,i=i*e+u}return s===r||null!=t&&s-r!==t?null:i}function rt(e){var t=s,r=!1,i=48===n.charCodeAt(s);e||null!==nt(10)||S(t,"Invalid number"),46===n.charCodeAt(s)&&(++s,nt(10),r=!0);var a=n.charCodeAt(s);69!==a&&101!==a||(43!==(a=n.charCodeAt(++s))&&45!==a||++s,null===nt(10)&&S(t,"Invalid number"),r=!0),Ge(n.charCodeAt(s))&&S(s,"Identifier directly after number");var o,u=n.slice(t,s);return r?o=parseFloat(u):i&&1!==u.length?/[89]/.test(u)||w?S(t,"Invalid number"):o=parseInt(u,8):o=parseInt(u,10),Ze(M,o)}function it(e){var t=nt(16,e);return null===t&&S(u,"Bad character escape sequence"),t}function at(){Oe=!1;for(var e,t=!0,r=s;;){var i=n.charCodeAt(s);if(Ye(i))Oe&&(e+=n.charAt(s)),++s;else{if(92!==i)break;Oe||(e=n.slice(r,s)),Oe=!0,117!=n.charCodeAt(++s)&&S(s,"Expecting Unicode escape sequence \\uXXXX"),++s;var a=it(4),o=String.fromCharCode(a);o||S(s-1,"Invalid Unicode escape"),(t?Ge(a):Ye(a))||S(s-4,"Invalid Unicode escape"),e+=o}t=!1}return Oe?e:n.slice(r,s)}function ot(){var e=at(),t=I;return!Oe&&Re(e)&&(t=re[e]),Ze(t,e)}function st(){m=u,y=c,_=h,$e()}function ut(e){if(w=e,s=u,t.locations)for(;s<v;)v=n.lastIndexOf("\n",v-2)+1,--g;Qe(),$e()}function ct(){this.type=null,this.start=u,this.end=null}function lt(){this.start=l,this.end=null,null!==i&&(this.source=i)}function ht(){var e=new ct;return t.locations&&(e.loc=new lt),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[u,0]),e}function ft(e){var n=new ct;return n.start=e.start,t.locations&&(n.loc=new lt,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function dt(e,n){return e.type=n,e.end=y,t.locations&&(e.loc.end=_),t.ranges&&(e.range[1]=y),e}function pt(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function gt(e){if(f===e)return st(),!0}function vt(){return!t.strictSemicolons&&(f===L||f===se||Ve.test(n.slice(y,u)))}function mt(){gt(he)||vt()||_t()}function yt(e){f===e?st():_t()}function _t(){S(u,"Unexpected token")}function bt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&S(e.start,"Assigning to rvalue"),w&&"Identifier"===e.type&&Ne(e.name)&&S(e.start,"Assigning to "+e.name+" in strict mode")}var xt={kind:"loop"},wt={kind:"switch"};function kt(){(f===ge||f===me&&"/="==d)&&$e(!0);var e=f,r=ht();switch(e){case O:case B:st();var i=e===O;gt(he)||vt()?r.label=null:f!==I?_t():(r.label=jt(),mt());for(var a=0;a<x.length;++a){var o=x[a];if(null==r.label||o.name===r.label.name){if(null!=o.kind&&(i||"loop"===o.kind))break;if(r.label&&i)break}}return a===x.length&&S(r.start,"Unsyntactic "+e.keyword),dt(r,i?"BreakStatement":"ContinueStatement");case N:return st(),mt(),dt(r,"DebuggerStatement");case j:return st(),x.push(xt),r.body=kt(),x.pop(),yt(K),r.test=St(),mt(),dt(r,"DoWhileStatement");case U:if(st(),x.push(xt),yt(ue),f===he)return Mt(r,null);if(f===Z){var s=ht();return st(),Et(s,!0),dt(s,"VariableDeclaration"),1===s.declarations.length&&gt(ne)?At(r,s):Mt(r,s)}return s=Tt(!1,!0),gt(ne)?(bt(s),At(r,s)):Mt(r,s);case V:return st(),Nt(r,!0);case H:return st(),r.test=St(),r.consequent=kt(),r.alternate=gt(z)?kt():null,dt(r,"IfStatement");case G:return b||t.allowReturnOutsideFunction||S(u,"'return' outside of function"),st(),gt(he)||vt()?r.argument=null:(r.argument=Tt(),mt()),dt(r,"ReturnStatement");case Y:st(),r.discriminant=St(),r.cases=[],yt(oe),x.push(wt);for(var c,l;f!=se;)if(f===P||f===R){var h=f===P;c&&dt(c,"SwitchCase"),r.cases.push(c=ht()),c.consequent=[],st(),h?c.test=Tt():(l&&S(m,"Multiple default clauses"),l=!0,c.test=null),yt(fe)}else c||_t(),c.consequent.push(kt());return c&&dt(c,"SwitchCase"),st(),x.pop(),dt(r,"SwitchStatement");case W:return st(),Ve.test(n.slice(y,u))&&S(y,"Illegal newline after throw"),r.argument=Tt(),mt(),dt(r,"ThrowStatement");case q:if(st(),r.block=Ct(),r.handler=null,f===D){var p=ht();st(),yt(ue),p.param=jt(),w&&Ne(p.param.name)&&S(p.param.start,"Binding "+p.param.name+" in strict mode"),yt(ce),p.guard=null,p.body=Ct(),r.handler=dt(p,"CatchClause")}return r.guardedHandlers=C,r.finalizer=gt(F)?Ct():null,r.handler||r.finalizer||S(r.start,"Missing catch or finally clause"),dt(r,"TryStatement");case Z:return st(),Et(r),mt(),dt(r,"VariableDeclaration");case K:return st(),r.test=St(),x.push(xt),r.body=kt(),x.pop(),dt(r,"WhileStatement");case X:return w&&S(u,"'with' in strict mode"),st(),r.object=St(),r.body=kt(),dt(r,"WithStatement");case oe:return Ct();case he:return st(),dt(r,"EmptyStatement");default:var g=d,v=Tt();if(e===I&&"Identifier"===v.type&&gt(fe)){for(a=0;a<x.length;++a)x[a].name===g&&S(v.start,"Label '"+g+"' is already declared");var _=f.isLoop?"loop":f===Y?"switch":null;return x.push({name:g,kind:_}),r.body=kt(),x.pop(),r.label=v,dt(r,"LabeledStatement")}return r.expression=v,mt(),dt(r,"ExpressionStatement")}}function St(){yt(ue);var e=Tt();return yt(ce),e}function Ct(e){var t,n=ht(),r=!0,i=!1;for(n.body=[],yt(oe);!gt(se);){var a=kt();n.body.push(a),r&&e&&pt(a)&&(t=i,ut(i=!0)),r=!1}return i&&!t&&ut(!1),dt(n,"BlockStatement")}function Mt(e,t){return e.init=t,yt(he),e.test=f===he?null:Tt(),yt(he),e.update=f===ce?null:Tt(),yt(ce),e.body=kt(),x.pop(),dt(e,"ForStatement")}function At(e,t){return e.left=t,e.right=Tt(),yt(ce),e.body=kt(),x.pop(),dt(e,"ForInStatement")}function Et(e,t){for(e.declarations=[],e.kind="var";;){var n=ht();if(n.id=jt(),w&&Ne(n.id.name)&&S(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=gt(ve)?Tt(!0,t):null,e.declarations.push(dt(n,"VariableDeclarator")),!gt(le))break}return e}function Tt(e,t){var n=It(t);if(!e&&f===le){var r=ft(n);for(r.expressions=[n];gt(le);)r.expressions.push(It(t));return dt(r,"SequenceExpression")}return n}function It(e){var t=function(e){var t=function(e){return Lt(Ot(),-1,e)}(e);if(gt(pe)){var n=ft(t);return n.test=t,n.consequent=Tt(!0),yt(fe),n.alternate=Tt(!0,e),dt(n,"ConditionalExpression")}return t}(e);if(f.isAssign){var n=ft(t);return n.operator=d,n.left=t,st(),n.right=It(e),bt(t),dt(n,"AssignmentExpression")}return t}function Lt(e,t,n){var r=f.binop;if(null!=r&&(!n||f!==ne)&&r>t){var i=ft(e);i.left=e,i.operator=d;var a=f;return st(),i.right=Lt(Ot(),r,n),Lt(dt(i,a===be||a===xe?"LogicalExpression":"BinaryExpression"),t,n)}return e}function Ot(){if(f.prefix){var e=ht(),t=f.isUpdate;return e.operator=d,e.prefix=!0,p=!0,st(),e.argument=Ot(),t?bt(e.argument):w&&"delete"===e.operator&&"Identifier"===e.argument.type&&S(e.start,"Deleting local variable in strict mode"),dt(e,t?"UpdateExpression":"UnaryExpression")}for(var n=Pt(Dt());f.postfix&&!vt();)(e=ft(n)).operator=d,e.prefix=!1,e.argument=n,bt(n),st(),n=dt(e,"UpdateExpression");return n}function Pt(e,t){var n;return gt(de)?((n=ft(e)).object=e,n.property=jt(!0),n.computed=!1,Pt(dt(n,"MemberExpression"),t)):gt(ie)?((n=ft(e)).object=e,n.property=Tt(),n.computed=!0,yt(ae),Pt(dt(n,"MemberExpression"),t)):!t&&gt(ue)?((n=ft(e)).callee=e,n.arguments=Rt(ce,!1),Pt(dt(n,"CallExpression"),t)):e}function Dt(){switch(f){case J:var e=ht();return st(),dt(e,"ThisExpression");case I:return jt();case M:case T:case E:return(e=ht()).value=d,e.raw=n.slice(u,c),st(),dt(e,"Literal");case $:case ee:case te:return(e=ht()).value=f.atomValue,e.raw=f.keyword,st(),dt(e,"Literal");case ue:var r=l,i=u;st();var a=Tt();return a.start=i,a.end=c,t.locations&&(a.loc.start=r,a.loc.end=h),t.ranges&&(a.range=[i,c]),yt(ce),a;case ie:return e=ht(),st(),e.elements=Rt(ae,!0,!0),dt(e,"ArrayExpression");case oe:return function(){var e=ht(),n=!0,r=!1;for(e.properties=[],st();!gt(se);){if(n)n=!1;else if(yt(le),t.allowTrailingCommas&&gt(se))break;var i,a={key:Bt()},o=!1;if(gt(fe)?(a.value=Tt(!0),i=a.kind="init"):t.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(o=r=!0,i=a.kind=a.key.name,a.key=Bt(),f!==ue&&_t(),a.value=Nt(ht(),!1)):_t(),"Identifier"===a.key.type&&(w||r))for(var s=0;s<e.properties.length;++s){var u=e.properties[s];if(u.key.name===a.key.name){var c=i==u.kind||o&&"init"===u.kind||"init"===i&&("get"===u.kind||"set"===u.kind);c&&!w&&"init"===i&&"init"===u.kind&&(c=!1),c&&S(a.key.start,"Redefinition of property")}}e.properties.push(a)}return dt(e,"ObjectExpression")}();case V:return e=ht(),st(),Nt(e,!1);case Q:return function(){var e=ht();return st(),e.callee=Pt(Dt(),!0),gt(ue)?e.arguments=Rt(ce,!1):e.arguments=C,dt(e,"NewExpression")}();default:_t()}}function Bt(){return f===M||f===T?Dt():jt(!0)}function Nt(e,t){f===I?e.id=jt():t?_t():e.id=null,e.params=[];var n=!0;for(yt(ue);!gt(ce);)n?n=!1:yt(le),e.params.push(jt());var r=b,i=x;if(b=!0,x=[],e.body=Ct(!0),b=r,x=i,w||e.body.body.length&&pt(e.body.body[0]))for(var a=e.id?-1:0;a<e.params.length;++a){var o=a<0?e.id:e.params[a];if((Be(o.name)||Ne(o.name))&&S(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var s=0;s<a;++s)o.name===e.params[s].name&&S(o.start,"Argument name clash in strict mode")}return dt(e,t?"FunctionDeclaration":"FunctionExpression")}function Rt(e,n,r){for(var i=[],a=!0;!gt(e);){if(a)a=!1;else if(yt(le),n&&t.allowTrailingCommas&&gt(e))break;r&&f===le?i.push(null):i.push(Tt(!0))}return i}function jt(e){var r=ht();return e&&"everywhere"==t.forbidReserved&&(e=!1),f===I?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Pe:De)(d)||w&&Be(d))&&-1==n.slice(u,c).indexOf("\\")&&S(u,"The keyword '"+d+"' is reserved"),r.name=d):e&&f.keyword?r.name=f.keyword:_t(),p=!1,st(),dt(r,"Identifier")}},"object"==typeof e&&"object"==typeof t?h(e):(r=[e],(a="function"===typeof(i=h)?i.apply(e,r):i)===s||(t.exports=a)),p.version||(p=null));var v={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},m={"-":"__negate","+":"__self"},_=l.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(e){this["__"+e]="#"+e}),{__self:function(){return this}});function x(e,t,n){var r=v[t];if(e&&e[r]){var i=e[r](n);return"!="===t?!i:i}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function w(e,t){var n=m[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function k(e,t){if(!e)return"";var n=[];function r(e){for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i[0]>=e)break;e+=i[1]}return e}function i(t){return e.substring(r(t.range[0]),r(t.range[1]))}function a(t,i){for(var a=r(t.range[0]),o=r(t.range[1]),s=0,u=n.length-1;u>=0;u--)if(a>n[u][0]){s=u+1;break}n.splice(s,0,[a,i.length-o+a]),e=e.substring(0,a)+i+e.substring(o)}function s(t,n){switch(t.type){case"UnaryExpression":if(t.operator in m&&"Literal"!==t.argument.type){var o=i(t.argument);a(t,'$__("'+t.operator+'", '+o+")")}break;case"BinaryExpression":if(t.operator in v&&"Literal"!==t.left.type){var s=i(t.left),u=i(t.right),c=function(t,n){return e.substring(r(t.range[1]),r(n.range[0]))}(t.left,t.right),l=t.operator;a(t,"__$__("+s+","+c.replace(new RegExp("\\"+l),'"'+l+'"')+", "+u+")")}break;case"UpdateExpression":case"AssignmentExpression":var h=n&&n.type;if(!("ForStatement"===h||"BinaryExpression"===h&&/^[=!<>]/.test(n.operator)||"MemberExpression"===h&&n.computed))if("UpdateExpression"===t.type){var f=(o=i(t.argument))+" = "+(d="__$__("+o+', "'+t.operator[0]+'", 1)');t.prefix?f="("+f+")":"AssignmentExpression"!==h&&"VariableDeclarator"!==h&&"BinaryExpression"!==h||(i(n.left||n.id)===o&&(f=d),f=o+"; "+f),a(t,f)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){s=i(t.left),u=i(t.right);var d=s+" = __$__("+s+', "'+t.operator[0]+'", '+u+")";a(t,/^\(.*\)$/.test(i(t))?"("+d+")":d)}}}var l,h=(t=t||{}).url||"",f=t.sourceMaps,d=t.paperFeatures||{},p=t.source||e,y=t.offset||0,_=fe.agent,b=_.versionNumber,x=!1,w=/\r\n|\n|\r/gm;if(f&&(_.chrome&&b>=30||_.webkit&&b>=537.76||_.firefox&&b>=23||_.node)){if(_.node)y-=2;else if(u&&h&&!u.location.href.indexOf(h)){var k=c.getElementsByTagName("html")[0].innerHTML;y=k.substr(0,k.indexOf(e)+1).match(w).length+1}var S=["AA"+function(e){var t="";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var n=31&e;(e>>=5)&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return t}((x=y>0&&!(_.chrome&&b>=36||_.safari&&b>=600||_.firefox&&b>=40||_.node))?0:y)+"A"];S.length=(e.match(w)||[]).length+1+(x?y:0),l={version:3,file:h,names:[],mappings:S.join(";AACA"),sourceRoot:"",sources:[h],sourcesContent:[p]}}return!1===d.operatorOverloading&&!1===d.moduleExports||function e(t,n,r){if(t){for(var o in t)if("range"!==o&&"loc"!==o){var u=t[o];if(Array.isArray(u))for(var c=0,l=u.length;c<l;c++)e(u[c],t,r);else u&&"object"===typeof u&&e(u,t,r)}!1!==r.operatorOverloading&&s(t,n),!1!==r.moduleExports&&function(e){switch(e.type){case"ExportDefaultDeclaration":a({range:[e.start,e.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var t=e.declaration,n=e.specifiers;if(t){var r=t.declarations;r&&(r.forEach((function(e){a(e,"module.exports."+i(e))})),a({range:[e.start,t.start+t.kind.length]},""))}else if(n){var o=n.map((function(e){var t=i(e);return"module.exports."+t+" = "+t+"; "})).join("");o&&a(e,o)}}}(t)}}(g(e,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,d),l&&(x&&(e=new Array(y+1).join("\n")+e),/^(inline|both)$/.test(f)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+o.btoa(unescape(encodeURIComponent(JSON.stringify(l))))),e+="\n//# sourceURL="+(h||"paperscript")),{url:h,source:p,code:e,map:l}}function S(e,t,n){fe=t;var r,i=t.getView(),a=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new ae:null,o=a?a._events:[],s=["onFrame","onResize"].concat(o),u=[],h=[],f="object"===typeof e?e:k(e,n);function d(t,n){for(var r in t)!n&&/^_/.test(r)||!new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(e)||(u.push(r),h.push(t[r]))}e=f.code,d({__$__:x,$__:w,paper:t,tool:a},!0),d(t),e="var module = { exports: {} }; "+e,(m=l.each(s,(function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(u.push(t),this.push("module.exports."+t+" = "+t+";"))}),[]).join("\n"))&&(e+="\n"+m),e+="\nreturn module.exports;";var p=fe.agent;if(c&&(p.chrome||p.firefox&&p.versionNumber<40)){var g=c.createElement("script"),v=c.head||c.getElementsByTagName("head")[0];p.firefox&&(e="\n"+e),g.appendChild(c.createTextNode("document.__paperscript__ = function("+u+") {"+e+"\n}")),v.appendChild(g),r=c.__paperscript__,delete c.__paperscript__,v.removeChild(g)}else r=Function(u,e);var m,_=(m=r&&r.apply(t,h))||{};return l.each(o,(function(e){var t=_[e];t&&(a[e]=t)})),i&&(_.onResize&&i.setOnResize(_.onResize),i.emit("resize",{size:i.size,delta:new y}),_.onFrame&&i.setOnFrame(_.onFrame),i.requestUpdate()),m}function C(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==f.getAttribute(e,"ignore")){var t=f.getAttribute(e,"canvas"),n=c.getElementById(t),r=e.src||e.getAttribute("data-src"),i=f.hasAttribute(e,"async"),a="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var o=f.get(n.getAttribute(a))||(new f).setup(n);return n.setAttribute(a,o._id),r?se({url:r,async:i,mimeType:"text/plain",onLoad:function(e){S(e,o,r)}}):S(e.innerHTML,o,e.baseURI),e.setAttribute("data-paper-ignore","true"),o}}function M(){l.each(c&&c.getElementsByTagName("script"),C)}return y.inject(_),b.inject(_),W.inject(_),u&&("complete"===c.readyState?setTimeout(M):Q.add(u,{load:M})),{compile:k,execute:S,load:function(e){return e?C(e):M()},parse:g,calculateBinary:x,calculateUnary:w}}.call(this);var fe=new(f.inject(l.exports,{Base:l,Numerical:v,Key:ne,DomEvent:Q,DomElement:X,document:c,window:u,Symbol:P,PlacedSymbol:O}));return fe.agent.node&&n("?2e46")(fe),(a="function"===typeof(i=fe)?i.call(t,n,t,e):i)===s||(e.exports=a),fe}).call(this,"object"===typeof self?self:null)},react:function(t){"use strict";t.exports=e},"styled-components":function(e){"use strict";e.exports=t},"?4f7e":function(){},"?ec06":function(){},"?f46d":function(){},"?2e46":function(){},"?a736":function(){},"./node_modules/axios/lib/adapters/adapters.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/null.js"),a=n("./node_modules/axios/lib/adapters/xhr.js"),o=n("./node_modules/axios/lib/core/AxiosError.js"),s={http:i.default,xhr:a.default};r.default.forEach(s,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var u={getAdapter:function(e){for(var t,n,i=(e=r.default.isArray(e)?e:[e]).length,a=0;a<i&&(t=e[a],!(n=r.default.isString(t)?s[t.toLowerCase()]:t));a++);if(!n){if(!1===n)throw new o.default("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(r.default.hasOwnProp(s,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!r.default.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:s}},"./node_modules/axios/lib/adapters/xhr.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/settle.js"),a=n("./node_modules/axios/lib/helpers/cookies.js"),o=n("./node_modules/axios/lib/helpers/buildURL.js"),s=n("./node_modules/axios/lib/core/buildFullPath.js"),u=n("./node_modules/axios/lib/helpers/isURLSameOrigin.js"),c=n("./node_modules/axios/lib/defaults/transitional.js"),l=n("./node_modules/axios/lib/core/AxiosError.js"),h=n("./node_modules/axios/lib/cancel/CanceledError.js"),f=n("./node_modules/axios/lib/helpers/parseProtocol.js"),d=n("./node_modules/axios/lib/platform/browser/index.js"),p=n("./node_modules/axios/lib/core/AxiosHeaders.js"),g=n("./node_modules/axios/lib/helpers/speedometer.js");function v(e,t){var n=0,r=(0,g.default)(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,u=r(s);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&a<=o?(o-a)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var m="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var g,m=e.data,y=p.default.from(e.headers).normalize(),_=e.responseType;function b(){e.cancelToken&&e.cancelToken.unsubscribe(g),e.signal&&e.signal.removeEventListener("abort",g)}r.default.isFormData(m)&&(d.default.isStandardBrowserEnv||d.default.isStandardBrowserWebWorkerEnv)&&y.setContentType(!1);var x=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",k=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.set("Authorization","Basic "+btoa(w+":"+k))}var S=(0,s.default)(e.baseURL,e.url);function C(){if(x){var r=p.default.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),a={data:_&&"text"!==_&&"json"!==_?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x};(0,i.default)((function(e){t(e),b()}),(function(e){n(e),b()}),a),x=null}}if(x.open(e.method.toUpperCase(),(0,o.default)(S,e.params,e.paramsSerializer),!0),x.timeout=e.timeout,"onloadend"in x?x.onloadend=C:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(C)},x.onabort=function(){x&&(n(new l.default("Request aborted",l.default.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new l.default("Network Error",l.default.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||c.default;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new l.default(t,r.clarifyTimeoutError?l.default.ETIMEDOUT:l.default.ECONNABORTED,e,x)),x=null},d.default.isStandardBrowserEnv){var M=(e.withCredentials||(0,u.default)(S))&&e.xsrfCookieName&&a.default.read(e.xsrfCookieName);M&&y.set(e.xsrfHeaderName,M)}void 0===m&&y.setContentType(null),"setRequestHeader"in x&&r.default.forEach(y.toJSON(),(function(e,t){x.setRequestHeader(t,e)})),r.default.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),_&&"json"!==_&&(x.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&x.addEventListener("progress",v(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",v(e.onUploadProgress)),(e.cancelToken||e.signal)&&(g=function(t){x&&(n(!t||t.type?new h.default(null,e,x):t),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(g),e.signal&&(e.signal.aborted?g():e.signal.addEventListener("abort",g)));var A=(0,f.default)(S);A&&-1===d.default.protocols.indexOf(A)?n(new l.default("Unsupported protocol "+A+":",l.default.ERR_BAD_REQUEST,e)):x.send(m||null)}))}},"./node_modules/axios/lib/axios.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/bind.js"),a=n("./node_modules/axios/lib/core/Axios.js"),o=n("./node_modules/axios/lib/core/mergeConfig.js"),s=n("./node_modules/axios/lib/defaults/index.js"),u=n("./node_modules/axios/lib/helpers/formDataToJSON.js"),c=n("./node_modules/axios/lib/cancel/CanceledError.js"),l=n("./node_modules/axios/lib/cancel/CancelToken.js"),h=n("./node_modules/axios/lib/cancel/isCancel.js"),f=n("./node_modules/axios/lib/env/data.js"),d=n("./node_modules/axios/lib/helpers/toFormData.js"),p=n("./node_modules/axios/lib/core/AxiosError.js"),g=n("./node_modules/axios/lib/helpers/spread.js"),v=n("./node_modules/axios/lib/helpers/isAxiosError.js"),m=n("./node_modules/axios/lib/core/AxiosHeaders.js"),y=n("./node_modules/axios/lib/helpers/HttpStatusCode.js"),_=function e(t){var n=new a.default(t),s=(0,i.default)(a.default.prototype.request,n);return r.default.extend(s,a.default.prototype,n,{allOwnKeys:!0}),r.default.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e((0,o.default)(t,n))},s}(s.default);_.Axios=a.default,_.CanceledError=c.default,_.CancelToken=l.default,_.isCancel=h.default,_.VERSION=f.VERSION,_.toFormData=d.default,_.AxiosError=p.default,_.Cancel=_.CanceledError,_.all=function(e){return Promise.all(e)},_.spread=g.default,_.isAxiosError=v.default,_.mergeConfig=o.default,_.AxiosHeaders=m.default,_.formToJSON=function(e){return(0,u.default)(r.default.isHTMLForm(e)?new FormData(e):e)},_.HttpStatusCode=y.default,_.default=_;var b=_},"./node_modules/axios/lib/cancel/CancelToken.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/cancel/CanceledError.js"),i=function(){function e(t){if(v(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var i=this;this.promise.then((function(e){if(i._listeners){for(var t=i._listeners.length;t-- >0;)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},t((function(e,t,a){i.reason||(i.reason=new r.default(e,t,a),n(i.reason))}))}return m(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}()},"./node_modules/axios/lib/cancel/CanceledError.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n("./node_modules/axios/lib/core/AxiosError.js");function i(e,t,n){r.default.call(this,null==e?"canceled":e,r.default.ERR_CANCELED,t,n),this.name="CanceledError"}n("./node_modules/axios/lib/utils.js").default.inherits(i,r.default,{__CANCEL__:!0});var a=i},"./node_modules/axios/lib/cancel/isCancel.js":function(e,t,n){"use strict";function r(e){return!(!e||!e.__CANCEL__)}n.r(t),n.d(t,{default:function(){return r}})},"./node_modules/axios/lib/core/Axios.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/buildURL.js"),a=n("./node_modules/axios/lib/core/InterceptorManager.js"),o=n("./node_modules/axios/lib/core/dispatchRequest.js"),s=n("./node_modules/axios/lib/core/mergeConfig.js"),u=n("./node_modules/axios/lib/core/buildFullPath.js"),c=n("./node_modules/axios/lib/helpers/validator.js"),l=n("./node_modules/axios/lib/core/AxiosHeaders.js"),h=c.default.validators,f=function(){function e(t){v(this,e),this.defaults=t,this.interceptors={request:new a.default,response:new a.default}}return m(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,i=t=(0,s.default)(this.defaults,t),a=i.transitional,u=i.paramsSerializer,f=i.headers;void 0!==a&&c.default.assertOptions(a,{silentJSONParsing:h.transitional(h.boolean),forcedJSONParsing:h.transitional(h.boolean),clarifyTimeoutError:h.transitional(h.boolean)},!1),null!=u&&(r.default.isFunction(u)?t.paramsSerializer={serialize:u}:c.default.assertOptions(u,{encode:h.function,serialize:h.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=f&&r.default.merge(f.common,f[t.method]))&&r.default.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete f[e]})),t.headers=l.default.concat(n,f);var d=[],p=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(p=p&&e.synchronous,d.unshift(e.fulfilled,e.rejected))}));var g,v=[];this.interceptors.response.forEach((function(e){v.push(e.fulfilled,e.rejected)}));var m,y=0;if(!p){var _=[o.default.bind(this),void 0];for(_.unshift.apply(_,d),_.push.apply(_,v),m=_.length,g=Promise.resolve(t);y<m;)g=g.then(_[y++],_[y++]);return g}m=d.length;var b=t;for(y=0;y<m;){var x=d[y++],w=d[y++];try{b=x(b)}catch(k){w.call(this,k);break}}try{g=o.default.call(this,b)}catch(k){return Promise.reject(k)}for(y=0,m=v.length;y<m;)g=g.then(v[y++],v[y++]);return g}},{key:"getUri",value:function(e){e=(0,s.default)(this.defaults,e);var t=(0,u.default)(e.baseURL,e.url);return(0,i.default)(t,e.params,e.paramsSerializer)}}]),e}();r.default.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request((0,s.default)(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.default.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request((0,s.default)(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)}));var d=f},"./node_modules/axios/lib/core/AxiosError.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n("./node_modules/axios/lib/utils.js");function i(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.default.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:r.default.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=i.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(i,o),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=function(e,t,n,o,s,u){var c=Object.create(a);return r.default.toFlatObject(e,c,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),i.call(c,e.message,t,n,o,s),c.cause=e,c.name=e.name,u&&Object.assign(c,u),c};var s=i},"./node_modules/axios/lib/core/AxiosHeaders.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/parseHeaders.js"),a=Symbol("internals");function o(e){return e&&String(e).trim().toLowerCase()}function s(e){return!1===e||null==e?e:r.default.isArray(e)?e.map(s):String(e)}function u(e,t,n,i,a){return r.default.isFunction(i)?i.call(this,t,n):(a&&(t=n),r.default.isString(t)?r.default.isString(i)?-1!==t.indexOf(i):r.default.isRegExp(i)?i.test(t):void 0:void 0)}var c=function(e,t){function n(e){v(this,n),e&&this.set(e)}return m(n,[{key:"set",value:function(e,t,n){var a=this;function u(e,t,n){var i=o(t);if(!i)throw new Error("header name must be a non-empty string");var u=r.default.findKey(a,i);(!u||void 0===a[u]||!0===n||void 0===n&&!1!==a[u])&&(a[u||t]=s(e))}var c=function(e,t){return r.default.forEach(e,(function(e,n){return u(e,n,t)}))};return r.default.isPlainObject(e)||e instanceof this.constructor?c(e,t):r.default.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?c((0,i.default)(e),t):null!=e&&u(t,e,n),this}},{key:"get",value:function(e,t){if(e=o(e)){var n=r.default.findKey(this,e);if(n){var i=this[n];if(!t)return i;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(i);if(r.default.isFunction(t))return t.call(this,i,n);if(r.default.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=o(e)){var n=r.default.findKey(this,e);return!(!n||void 0===this[n]||t&&!u(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,i=!1;function a(e){if(e=o(e)){var a=r.default.findKey(n,e);!a||t&&!u(0,n[a],a,t)||(delete n[a],i=!0)}}return r.default.isArray(e)?e.forEach(a):a(e),i}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!u(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return r.default.forEach(this,(function(i,a){var o=r.default.findKey(n,a);if(o)return t[o]=s(i),void delete t[a];var u=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(a):String(a).trim();u!==a&&delete t[a],t[u]=s(i),n[u]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return r.default.forEach(this,(function(n,i){null!=n&&!1!==n&&(t[i]=e&&r.default.isArray(n)?n.join(", "):n)})),t}},{key:e,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=p(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:t,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[a]=this[a]={accessors:{}}).accessors,n=this.prototype;function i(e){var i=o(e);t[i]||(function(e,t){var n=r.default.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[i]=!0)}return r.default.isArray(e)?e.forEach(i):i(e),this}}]),n}(Symbol.iterator,Symbol.toStringTag);c.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),r.default.freezeMethods(c.prototype),r.default.freezeMethods(c);var l=c},"./node_modules/axios/lib/core/InterceptorManager.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/utils.js"),i=function(){function e(){v(this,e),this.handlers=[]}return m(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){r.default.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}()},"./node_modules/axios/lib/core/buildFullPath.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n("./node_modules/axios/lib/helpers/isAbsoluteURL.js"),i=n("./node_modules/axios/lib/helpers/combineURLs.js");function a(e,t){return e&&!(0,r.default)(t)?(0,i.default)(e,t):t}},"./node_modules/axios/lib/core/dispatchRequest.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n("./node_modules/axios/lib/core/transformData.js"),i=n("./node_modules/axios/lib/cancel/isCancel.js"),a=n("./node_modules/axios/lib/defaults/index.js"),o=n("./node_modules/axios/lib/cancel/CanceledError.js"),s=n("./node_modules/axios/lib/core/AxiosHeaders.js"),u=n("./node_modules/axios/lib/adapters/adapters.js");function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o.default(null,e)}function l(e){return c(e),e.headers=s.default.from(e.headers),e.data=r.default.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),u.default.getAdapter(e.adapter||a.default.adapter)(e).then((function(t){return c(e),t.data=r.default.call(e,e.transformResponse,t),t.headers=s.default.from(t.headers),t}),(function(t){return(0,i.default)(t)||(c(e),t&&t.response&&(t.response.data=r.default.call(e,e.transformResponse,t.response),t.response.headers=s.default.from(t.response.headers))),Promise.reject(t)}))}},"./node_modules/axios/lib/core/mergeConfig.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/AxiosHeaders.js"),a=function(e){return e instanceof i.default?e.toJSON():e};function o(e,t){t=t||{};var n={};function i(e,t,n){return r.default.isPlainObject(e)&&r.default.isPlainObject(t)?r.default.merge.call({caseless:n},e,t):r.default.isPlainObject(t)?r.default.merge({},t):r.default.isArray(t)?t.slice():t}function o(e,t,n){return r.default.isUndefined(t)?r.default.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function s(e,t){if(!r.default.isUndefined(t))return i(void 0,t)}function u(e,t){return r.default.isUndefined(t)?r.default.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function c(n,r,a){return a in t?i(n,r):a in e?i(void 0,n):void 0}var l={url:s,method:s,data:s,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:c,headers:function(e,t){return o(a(e),a(t),!0)}};return r.default.forEach(Object.keys(e).concat(Object.keys(t)),(function(i){var a=l[i]||o,s=a(e[i],t[i],i);r.default.isUndefined(s)&&a!==c||(n[i]=s)})),n}},"./node_modules/axios/lib/core/settle.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/core/AxiosError.js");function i(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r.default("Request failed with status code "+n.status,[r.default.ERR_BAD_REQUEST,r.default.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},"./node_modules/axios/lib/core/transformData.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/defaults/index.js"),a=n("./node_modules/axios/lib/core/AxiosHeaders.js");function o(e,t){var n=this||i.default,o=t||n,s=a.default.from(o.headers),u=o.data;return r.default.forEach(e,(function(e){u=e.call(n,u,s.normalize(),t?t.status:void 0)})),s.normalize(),u}},"./node_modules/axios/lib/defaults/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/AxiosError.js"),a=n("./node_modules/axios/lib/defaults/transitional.js"),o=n("./node_modules/axios/lib/helpers/toFormData.js"),s=n("./node_modules/axios/lib/helpers/toURLEncodedForm.js"),u=n("./node_modules/axios/lib/platform/browser/index.js"),c=n("./node_modules/axios/lib/helpers/formDataToJSON.js"),l={"Content-Type":void 0},h={transitional:a.default,adapter:["xhr","http"],transformRequest:[function(e,t){var n,i=t.getContentType()||"",a=i.indexOf("application/json")>-1,u=r.default.isObject(e);if(u&&r.default.isHTMLForm(e)&&(e=new FormData(e)),r.default.isFormData(e))return a&&a?JSON.stringify((0,c.default)(e)):e;if(r.default.isArrayBuffer(e)||r.default.isBuffer(e)||r.default.isStream(e)||r.default.isFile(e)||r.default.isBlob(e))return e;if(r.default.isArrayBufferView(e))return e.buffer;if(r.default.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return(0,s.default)(e,this.formSerializer).toString();if((n=r.default.isFileList(e))||i.indexOf("multipart/form-data")>-1){var l=this.env&&this.env.FormData;return(0,o.default)(n?{"files[]":e}:e,l&&new l,this.formSerializer)}}return u||a?(t.setContentType("application/json",!1),function(e,t,n){if(r.default.isString(e))try{return(t||JSON.parse)(e),r.default.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||h.transitional,n=t&&t.forcedJSONParsing,a="json"===this.responseType;if(e&&r.default.isString(e)&&(n&&!this.responseType||a)){var o=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw i.default.from(s,i.default.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:u.default.classes.FormData,Blob:u.default.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.default.forEach(["delete","get","head"],(function(e){h.headers[e]={}})),r.default.forEach(["post","put","patch"],(function(e){h.headers[e]=r.default.merge(l)}));var f=h},"./node_modules/axios/lib/defaults/transitional.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},"./node_modules/axios/lib/env/data.js":function(e,t,n){"use strict";n.r(t),n.d(t,{VERSION:function(){return r}});var r="1.3.6"},"./node_modules/axios/lib/helpers/AxiosURLSearchParams.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n("./node_modules/axios/lib/helpers/toFormData.js");function i(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function a(e,t){this._pairs=[],e&&(0,r.default)(e,this,t)}var o=a.prototype;o.append=function(e,t){this._pairs.push([e,t])},o.toString=function(e){var t=e?function(t){return e.call(this,t,i)}:i;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var s=a},"./node_modules/axios/lib/helpers/HttpStatusCode.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(r).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];r[i]=n}));var i=r},"./node_modules/axios/lib/helpers/bind.js":function(e,t,n){"use strict";function r(e,t){return function(){return e.apply(t,arguments)}}n.r(t),n.d(t,{default:function(){return r}})},"./node_modules/axios/lib/helpers/buildURL.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/AxiosURLSearchParams.js");function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function o(e,t,n){if(!t)return e;var o,s=n&&n.encode||a,u=n&&n.serialize;if(o=u?u(t,n):r.default.isURLSearchParams(t)?t.toString():new i.default(t,n).toString(s)){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},"./node_modules/axios/lib/helpers/combineURLs.js":function(e,t,n){"use strict";function r(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}n.r(t),n.d(t,{default:function(){return r}})},"./node_modules/axios/lib/helpers/cookies.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/platform/browser/index.js").default.isStandardBrowserEnv?{write:function(e,t,n,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.default.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.default.isString(i)&&s.push("path="+i),r.default.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},"./node_modules/axios/lib/helpers/formDataToJSON.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/utils.js"),i=function(e){function t(e,n,i,a){var o=e[a++],s=Number.isFinite(+o),u=a>=e.length;return o=!o&&r.default.isArray(i)?i.length:o,u?(r.default.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):(i[o]&&r.default.isObject(i[o])||(i[o]=[]),t(e,n,i[o],a)&&r.default.isArray(i[o])&&(i[o]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(i[o])),!s)}if(r.default.isFormData(e)&&r.default.isFunction(e.entries)){var n={};return r.default.forEachEntry(e,(function(e,i){t(function(e){return r.default.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),i,n,0)})),n}return null}},"./node_modules/axios/lib/helpers/isAbsoluteURL.js":function(e,t,n){"use strict";function r(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}n.r(t),n.d(t,{default:function(){return r}})},"./node_modules/axios/lib/helpers/isAxiosError.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/utils.js");function i(e){return r.default.isObject(e)&&!0===e.isAxiosError}},"./node_modules/axios/lib/helpers/isURLSameOrigin.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/platform/browser/index.js").default.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.default.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},"./node_modules/axios/lib/helpers/null.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=null},"./node_modules/axios/lib/helpers/parseHeaders.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/utils.js").default.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),i=function(e){var t,n,i,a={};return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),t=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!t||a[t]&&r[t]||("set-cookie"===t?a[t]?a[t].push(n):a[t]=[n]:a[t]=a[t]?a[t]+", "+n:n)})),a}},"./node_modules/axios/lib/helpers/parseProtocol.js":function(e,t,n){"use strict";function r(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}n.r(t),n.d(t,{default:function(){return r}})},"./node_modules/axios/lib/helpers/speedometer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=i[o];n||(n=u),r[a]=s,i[a]=u;for(var l=o,h=0;l!==a;)h+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(u-n<t)){var f=c&&u-c;return f?Math.round(1e3*h/f):void 0}}}},"./node_modules/axios/lib/helpers/spread.js":function(e,t,n){"use strict";function r(e){return function(t){return e.apply(null,t)}}n.r(t),n.d(t,{default:function(){return r}})},"./node_modules/axios/lib/helpers/toFormData.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/AxiosError.js"),a=n("./node_modules/axios/lib/helpers/null.js");function o(e){return r.default.isPlainObject(e)||r.default.isArray(e)}function s(e){return r.default.endsWith(e,"[]")?e.slice(0,-2):e}function u(e,t,n){return e?e.concat(t).map((function(e,t){return e=s(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var c=r.default.toFlatObject(r.default,{},null,(function(e){return/^is[A-Z]/.test(e)})),l=function(e,t,n){if(!r.default.isObject(e))throw new TypeError("target must be an object");t=t||new(a.default||FormData);var l=(n=r.default.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!r.default.isUndefined(t[e])}))).metaTokens,h=n.visitor||v,f=n.dots,d=n.indexes,p=(n.Blob||"undefined"!==typeof Blob&&Blob)&&r.default.isSpecCompliantForm(t);if(!r.default.isFunction(h))throw new TypeError("visitor must be a function");function g(e){if(null===e)return"";if(r.default.isDate(e))return e.toISOString();if(!p&&r.default.isBlob(e))throw new i.default("Blob is not supported. Use a Buffer instead.");return r.default.isArrayBuffer(e)||r.default.isTypedArray(e)?p&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function v(e,n,i){var a=e;if(e&&!i&&"object"===typeof e)if(r.default.endsWith(n,"{}"))n=l?n:n.slice(0,-2),e=JSON.stringify(e);else if(r.default.isArray(e)&&function(e){return r.default.isArray(e)&&!e.some(o)}(e)||(r.default.isFileList(e)||r.default.endsWith(n,"[]"))&&(a=r.default.toArray(e)))return n=s(n),a.forEach((function(e,i){!r.default.isUndefined(e)&&null!==e&&t.append(!0===d?u([n],i,f):null===d?n:n+"[]",g(e))})),!1;return!!o(e)||(t.append(u(i,n,f),g(e)),!1)}var m=[],y=Object.assign(c,{defaultVisitor:v,convertValue:g,isVisitable:o});if(!r.default.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!r.default.isUndefined(n)){if(-1!==m.indexOf(n))throw Error("Circular reference detected in "+i.join("."));m.push(n),r.default.forEach(n,(function(n,a){!0===(!(r.default.isUndefined(n)||null===n)&&h.call(t,n,r.default.isString(a)?a.trim():a,i,y))&&e(n,i?i.concat(a):[a])})),m.pop()}}(e),t}},"./node_modules/axios/lib/helpers/toURLEncodedForm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/toFormData.js"),a=n("./node_modules/axios/lib/platform/browser/index.js");function o(e,t){return(0,i.default)(e,new a.default.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return a.default.isNode&&r.default.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}},"./node_modules/axios/lib/helpers/validator.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n("./node_modules/axios/lib/env/data.js"),i=n("./node_modules/axios/lib/core/AxiosError.js"),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r.VERSION+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new i.default(a(r," has been removed"+(t?" in "+t:"")),i.default.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}};var s={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i.default("options must be an object",i.default.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var o=r[a],s=t[o];if(s){var u=e[o],c=void 0===u||s(u,o,e);if(!0!==c)throw new i.default("option "+o+" must be "+c,i.default.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i.default("Unknown option "+o,i.default.ERR_BAD_OPTION)}},validators:a}},"./node_modules/axios/lib/platform/browser/classes/Blob.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r="undefined"!==typeof Blob?Blob:null},"./node_modules/axios/lib/platform/browser/classes/FormData.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r="undefined"!==typeof FormData?FormData:null},"./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./node_modules/axios/lib/helpers/AxiosURLSearchParams.js"),i="undefined"!==typeof URLSearchParams?URLSearchParams:r.default},"./node_modules/axios/lib/platform/browser/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js"),i=n("./node_modules/axios/lib/platform/browser/classes/FormData.js"),a=n("./node_modules/axios/lib/platform/browser/classes/Blob.js"),o=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!==typeof window&&"undefined"!==typeof document}(),s="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,u={isBrowser:!0,classes:{URLSearchParams:r.default,FormData:i.default,Blob:a.default},isStandardBrowserEnv:o,isStandardBrowserWebWorkerEnv:s,protocols:["http","https","file","blob","url","data"]}},"./node_modules/axios/lib/utils.js":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var i,a=r("./node_modules/axios/lib/helpers/bind.js"),o=Object.prototype.toString,s=Object.getPrototypeOf,u=(i=Object.create(null),function(e){var t=o.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())}),c=function(e){return e=e.toLowerCase(),function(t){return u(t)===e}},l=function(e){return function(t){return typeof t===e}},h=Array.isArray,f=l("undefined"),d=c("ArrayBuffer"),p=l("string"),g=l("function"),v=l("number"),m=function(e){return null!==e&&"object"===typeof e},y=function(e){if("object"!==u(e))return!1;var t=s(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_=c("Date"),b=c("File"),x=c("Blob"),w=c("FileList"),k=c("URLSearchParams");function S(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),h(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,s=a?Object.getOwnPropertyNames(e):Object.keys(e),u=s.length;for(n=0;n<u;n++)o=s[n],t.call(null,e[o],o,e)}}function C(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var M,A="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,E=function(e){return!f(e)&&e!==A},T=(M="undefined"!==typeof Uint8Array&&s(Uint8Array),function(e){return M&&e instanceof M}),I=c("HTMLFormElement"),L=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),O=c("RegExp"),P=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};S(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},D="abcdefghijklmnopqrstuvwxyz",B="0123456789",N={DIGIT:B,ALPHA:D,ALPHA_DIGIT:D+D.toUpperCase()+B},R={isArray:h,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&g(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||g(e.append)&&("formdata"===(t=u(e))||"object"===t&&g(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer)},isString:p,isNumber:v,isBoolean:function(e){return!0===e||!1===e},isObject:m,isPlainObject:y,isUndefined:f,isDate:_,isFile:b,isBlob:x,isRegExp:O,isFunction:g,isStream:function(e){return m(e)&&g(e.pipe)},isURLSearchParams:k,isTypedArray:T,isFileList:w,forEach:S,merge:function e(){for(var t=(E(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&C(n,i)||i;y(n[a])&&y(r)?n[a]=e(n[a],r):y(r)?n[a]=e({},r):h(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&S(arguments[i],r);return n},extend:function(e,t,n){return S(t,(function(t,r){n&&g(t)?e[r]=(0,a.default)(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:u,kindOfTest:c,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(h(e))return e;var t=e.length;if(!v(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:I,hasOwnProperty:L,hasOwnProp:L,reduceDescriptors:P,freezeMethods:function(e){P(e,(function(t,n){if(g(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];g(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return h(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:C,global:A,isContextDefined:E,ALPHABET:N,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&g(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(m(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=h(n)?[]:{};return S(n,(function(t,n){var a=e(t,r+1);!f(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)}}},"../../../node_modules/@zakeke/zakeke-resizable-canvas/dist/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,{Preview3DGenerator:function(){return y},ProductAreaGenerator:function(){return g},ProductImageGenerator:function(){return d}});var a=Object.defineProperty,o=function(e,t,n){return function(e,t,n){t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{};function u(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var c,l={},h={get exports(){return l},set exports(e){l=e}},f=u(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));c=h,function(e,t){var r=(e=e||f).window,i=e.document,a=new function(){var e=/^(statics|enumerable|beans|preserve)$/,n=[],r=n.slice,i=Object.create,a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,s=n.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},u=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},c=Object.assign||function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},l=function(e,t,n){if(e){var r=a(e,"length");(r&&"number"==typeof r.value?s:u).call(e,t,n=n||e)}return n};function h(t,n,r,i,s){var u={};function c(e,c){"string"==typeof(c=c||(c=a(n,e))&&(c.get?c:c.value))&&"#"===c[0]&&(c=t[c.substring(1)]||c);var l,h="function"==typeof c,d=c,p=s||h&&!c.base?c&&c.get?e in t:t[e]:null;(!s||!p)&&(h&&p&&(c.base=p),h&&!1!==i&&(l=e.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[l[3].toLowerCase()+l[4]]=l[2]),(!d||h||!d.get||"function"!=typeof d.get||!f.isPlainObject(d))&&(d={value:d,writable:!0}),(a(t,e)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!==r&&void 0!==r?r:!l),o(t,e,d))}if(n){for(var l in n)n.hasOwnProperty(l)&&!e.test(l)&&c(l);for(var l in u){var h=u[l],d=t["set"+h],p=t["get"+h]||d&&t["is"+h];p&&(!0===i||0===p.length)&&c(l,{get:p,set:d})}}return t}function f(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&c(this,n)}return this}return h(f,{inject:function(e){if(e){var t=!0===e.statics?e:e.statics,n=e.beans,r=e.preserve;t!==e&&h(this.prototype,e,e.enumerable,n,r),h(this,t,null,n,r)}for(var i=1,a=arguments.length;i<a;i++)this.inject(arguments[i]);return this},extend:function(){for(var e,t,n,r=this,a=0,s=arguments.length;a<s&&(!e||!t);a++)n=arguments[a],e=e||n.initialize,t=t||n.prototype;return e=e||function(){r.apply(this,arguments)},t=e.prototype=t||i(this.prototype),o(t,"constructor",{value:e,writable:!0,configurable:!0}),h(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var e=i(this);return e.inject.apply(e,arguments)},each:function(e,t){return l(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:c,each:l,create:i,define:o,describe:a,clone:function(e){return c(new e.constructor,e)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===f||"Object"===t.name)},pick:function(e,n){return e!==t?e:n},slice:function(e,t,n){return r.call(e,t,n)}}})};c.exports=a,a.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+a.each(this,(function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?h.instance.number(e):"string"===n?"'"+e+"'":e))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return a.importJSON(e,this)},exportJSON:function(e){return a.exportJSON(this,e)},toJSON:function(){return a.serialize(this)},set:function(e,t){return e&&a.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!a.exports[n]&&(a.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){if((n=e.length)!==t.length)return!1;for(;n--;)if(!a.equals(e[n],t[n]))return!1}else{var n,r=Object.keys(e);if((n=r.length)!==Object.keys(t).length)return!1;for(;n--;){var i=r[n];if(!t.hasOwnProperty(i)||!a.equals(e[i],t[i]))return!1}}return!0}return!1},read:function(e,n,r,i){if(this===a){var o=this.peek(e,n);return e.__index++,o}var s=this.prototype,u=s._readIndex,c=n||u&&e.__index||0,l=e.length,h=e[c];if(i=i||l-c,h instanceof this||r&&r.readNull&&null==h&&i<=1)return u&&(e.__index=c+1),h&&r&&r.clone?h.clone():h;if(h=a.create(s),u&&(h.__read=!0),h=h.initialize.apply(h,c>0||c+i<l?a.slice(e,c,c+i):e)||h,u){e.__index=c+h.__read;var f=h.__filtered;f&&(e.__filtered=f,h.__filtered=t),h.__read=t}return h},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var i,a=[],o=t||0,s=r?o+r:e.length,u=o;u<s;u++)a.push(Array.isArray(i=e[u])?this.read(i,0,n):this.read(e,u,n,1));return a},readNamed:function(e,n,r,i,o){var s=this.getNamed(e,n),u=s!==t;if(u){var c=e.__filtered;if(!c){var l=this.getSource(e);(c=e.__filtered=a.create(l)).__unfiltered=l}c[n]=t}return this.read(u?[s]:e,r,i,o)},readSupported:function(e,n){var r=this.getSource(e),i=this,a=!1;return r&&Object.keys(r).forEach((function(r){if(r in n){var o=i.readNamed(e,r);o!==t&&(n[r]=o),a=!0}})),a},getSource:function(e){var n=e.__source;if(n===t){var r=1===e.length&&e[0];n=e.__source=r&&a.isPlainObject(r)?r:null}return n},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,n,r,i){var a;function o(i){if((!r||!(i in r))&&(!a||!(i in a))){var o=n[i];o!==t&&(e[i]=o)}}if(i){for(var s,u={},c=0,l=i.length;c<l;c++)(s=i[c])in n&&(o(s),u[s]=!0);a=u}return Object.keys(n.__unfiltered||n).forEach(o),e},isPlainValue:function(e,t){return a.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,n,r){t=t||{};var i,o=!r;if(o&&(t.formatter=new h(t.precision),r={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,r=this.references[n];if(!r){this.length++;var i=t.call(e),a=e._class;a&&i[0]!==a&&i.unshift(a),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),e&&e._serialize){i=e._serialize(t,r);var s=e._class;s&&!e._compactSerialize&&(o||!n)&&i[0]!==s&&i.unshift(s)}else if(Array.isArray(e)){i=[];for(var u=0,c=e.length;u<c;u++)i[u]=a.serialize(e[u],t,n,r)}else if(a.isPlainObject(e)){i={};var l=Object.keys(e);for(u=0,c=l.length;u<c;u++){var f=l[u];i[f]=a.serialize(e[f],t,n,r)}}else i="number"==typeof e?t.formatter.number(e,t.precision):e;return o&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(e,t,n,r,i){var o=e,s=!n,u=s&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var c=e[0],l="dictionary"===c;if(1==e.length&&/^#/.test(c))return n.dictionary[c];o=[];for(var h=(c=a.exports[c])?1:0,f=e.length;h<f;h++)o.push(a.deserialize(e[h],t,n,l,u));if(c){var d=o;o=t?t(c,d,s||i):new c(d)}}else if(a.isPlainObject(e))for(var p in o={},r&&(n.dictionary=o),e)o[p]=a.deserialize(e[p],t,n);return u?o[1]:o},exportJSON:function(e,t){var n=a.serialize(e,t);return t&&0==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return a.deserialize("string"==typeof e?JSON.parse(e):e,(function(e,n,r){var i=r&&t&&t.constructor===e,o=i?t:a.create(e.prototype);if(1===n.length&&o instanceof S&&(i||!(o instanceof M))){var s=n[0];a.isPlainObject(s)&&(s.insert=!1,i&&(n=n.concat([S.INSERT])))}return(i?o.set:e).apply(o,n),i&&(t=null),o}))},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var i=0;i<n;i++)e[r+i]=t[i]}return e},splice:function(e,n,r,i){var o=n&&n.length,s=r===t;(r=s?e.length:r)>e.length&&(r=e.length);for(var u=0;u<o;u++)n[u]._index=r+u;if(s)return a.push(e,n),[];var c=[r,i];n&&a.push(c,n);for(var l=e.splice.apply(e,c),h=(u=0,l.length);u<h;u++)l[u]._index=t;for(u=r+o,h=e.length;u<h;u++)e[u]._index=u;return l},capitalize:function(e){return e.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))},camelize:function(e){return e.replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var o={on:function(e,t){if("string"!=typeof e)a.each(e,(function(e,t){this.on(t,e)}),this);else{var n=this._eventTypes,r=n&&n[e],i=this._callbacks=this._callbacks||{};-1===(i=i[e]=i[e]||[]).indexOf(t)&&(i.push(t),r&&r.install&&1===i.length&&r.install.call(this,e))}return this},off:function(e,t){if("string"==typeof e){var n,r=this._eventTypes,i=r&&r[e],o=this._callbacks&&this._callbacks[e];return o&&(!t||-1!==(n=o.indexOf(t))&&1===o.length?(i&&i.uninstall&&i.uninstall.call(this,e),delete this._callbacks[e]):-1!==n&&o.splice(n,1)),this}a.each(e,(function(e,t){this.off(t,e)}),this)},once:function(e,t){return this.on(e,(function n(){t.apply(this,arguments),this.off(e,n)}))},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=a.slice(arguments,1),i=t&&t.target&&!t.currentTarget;n=n.slice(),i&&(t.currentTarget=this);for(var o=0,s=n.length;o<s;o++)if(0==n[o].apply(this,r)){t&&t.stop&&t.stop();break}return i&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t)for(var i in n)if(n[i].length>0){var a=t[i],o=a&&a[r];o&&o.call(this,i)}},statics:{inject:function e(t){var n=t._events;if(n){var r={};a.each(n,(function(e,n){var i="string"==typeof e,o=i?e:n,s=a.capitalize(o),u=o.substring(2).toLowerCase();r[u]=i?{}:e,o="_"+o,t["get"+s]=function(){return this[o]},t["set"+s]=function(e){var t=this[o];t&&this.off(u,t),e&&this.on(u,e),this[o]=e}})),t._eventTypes=r}return e.base.apply(this,arguments)}}},s=a.extend({_class:"PaperScope",initialize:function t(){ce=this,this.settings=new a({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var n=t.prototype;if(!this.support){var r=ae.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:oe.nativeModes},ae.release(r)}if(!this.agent){var i=e.navigator.userAgent.toLowerCase(),o=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],s="darwin"===o?"mac":o,u=n.agent=n.browser={platform:s};s&&(u[s]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(e,t,n,r,i){if(!u.chrome){var a="opera"===t?r:/^(node|trident)$/.test(t)?i:n;u.version=a,u.versionNumber=parseFloat(a),t={trident:"msie",jsdom:"node"}[t]||t,u.name=t,u[t]=!0}})),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=ce.PaperScript.execute(e,this,t);return K.updateFocus(),n},install:function(e){var t=this;for(var n in a.each(["project","view","tool"],(function(n){a.define(e,n,{configurable:!0,get:function(){return t[n]}})})),this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return ce=this,this.project=new k(e),this},createCanvas:function(e,t){return ae.getCanvas(e,t)},activate:function(){ce=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete s._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),u=a.extend(o,{initialize:function(e){this._scope=ce,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(a.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l={findItemBoundsCollisions:function(e,t,n){function r(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var r=e[n].getBounds();t[n]=[r.left,r.top,r.right,r.bottom]}return t}var i=r(e),a=t&&t!==e?r(t):i;return this.findBoundsCollisions(i,a,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function i(e){for(var t=Math.min,n=Math.max,r=new Array(e.length),i=0;i<e.length;i++){var a=e[i];r[i]=[t(a[0],a[2],a[4],a[6]),t(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return r}var a=i(e),o=t&&t!==e?i(t):a;if(r){for(var s=this.findBoundsCollisions(a,o,n||0,!1,!0),u=this.findBoundsCollisions(a,o,n||0,!0,!0),c=[],l=0,h=s.length;l<h;l++)c[l]={hor:s[l],ver:u[l]};return c}return this.findBoundsCollisions(a,o,n||0)},findBoundsCollisions:function(e,t,n,r,i){var a=!t||e===t,o=a?e:e.concat(t),s=e.length,u=o.length;function c(e,t,n){for(var r=0,i=e.length;r<i;){var a=i+r>>>1;o[e[a]][t]<n?r=a+1:i=a}return r-1}for(var l=r?1:0,h=l+2,f=r?0:1,d=f+2,p=new Array(u),g=0;g<u;g++)p[g]=g;p.sort((function(e,t){return o[e][l]-o[t][l]}));var v=[],m=new Array(s);for(g=0;g<u;g++){var y=p[g],_=o[y],b=a?y:y-s,x=y<s,w=a||!x,k=x?[]:null;if(v.length){var S=c(v,h,_[l]-n)+1;if(v.splice(0,S),a&&i){k=k.concat(v);for(var C=0;C<v.length;C++)m[E=v[C]].push(b)}else{var M=_[d],A=_[f];for(C=0;C<v.length;C++){var E=v[C],T=o[E],I=E<s,L=a||E>=s;(i||(x&&L||w&&I)&&M>=T[f]-n&&A<=T[d]+n)&&(x&&L&&k.push(a?E:E-s),w&&I&&m[E].push(b))}}}if(x&&(e===t&&k.push(y),m[y]=k),v.length){var O=c(v,h,_[h]);v.splice(O+1,0,y)}else v.push(y)}for(g=0;g<m.length;g++){var P=m[g];P&&P.sort((function(e,t){return e-t}))}return m}},h=a.extend({initialize:function(e){this.precision=a.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});h.instance=new h;var d=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,a=Math.log2||function(e){return Math.log(e)*Math.LOG2E},o=1e-12,s=112e-18;function u(e,t,n){return e<t?t:e>n?n:e}function c(e,t,r){function i(e){var t=134217729*e,n=e-t+t;return[n,e-n]}var a=t*t-e*r,o=t*t+e*r;if(3*n(a)<o){var s=i(e),u=i(t),c=i(r),l=t*t,h=e*r;a=l-h+(u[0]*u[0]-l+2*u[0]*u[1]+u[1]*u[1]-(s[0]*c[0]-h+s[0]*c[1]+s[1]*c[0]+s[1]*c[1]))}return a}function l(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?i(2,-Math.round(a(e))):0}return{EPSILON:o,MACHINE_EPSILON:s,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(e){return e>=-o&&e<=o},isMachineZero:function(e){return e>=-s&&e<=s},clamp:u,integrate:function(n,r,i,a){for(var o=e[a-2],s=t[a-2],u=.5*(i-r),c=u+r,l=0,h=a+1>>1,f=1&a?s[l++]*n(c):0;l<h;){var d=u*o[l];f+=s[l++]*(n(c+d)+n(c-d))}return u*f},findRoot:function(e,t,r,i,a,o,s){for(var c=0;c<o;c++){var l=e(r),h=l/t(r),f=r-h;if(n(h)<s){r=f;break}l>0?(a=r,r=f<=i?.5*(i+a):f):(i=r,r=f>=a?.5*(i+a):f)}return u(r,i,a)},solveQuadratic:function(e,t,i,a,h,f){var d,p=1/0;if(n(e)<o){if(n(t)<o)return n(i)<o?-1:0;d=-i/t}else{var g=c(e,t*=-.5,i);if(g&&n(g)<s){var v=l(n(e),n(t),n(i));v&&(g=c(e*=v,t*=v,i*=v))}if(g>=-s){var m=g<0?0:r(g),y=t+(t<0?-m:m);0===y?p=-(d=i/e):(d=y/e,p=i/y)}}var _=0,b=null==h,x=h-o,w=f+o;return isFinite(d)&&(b||d>x&&d<w)&&(a[_++]=b?d:u(d,h,f)),p!==d&&isFinite(p)&&(b||p>x&&p<w)&&(a[_++]=b?p:u(p,h,f)),_},solveCubic:function(e,t,a,c,h,f,p){var g,v,m,y,_,b=l(n(e),n(t),n(a),n(c));function x(n){var r=e*(g=n);y=(r+(v=r+t))*g+(m=v*g+a),_=m*g+c}if(b&&(e*=b,t*=b,a*=b,c*=b),n(e)<o)e=t,v=a,m=c,g=1/0;else if(n(c)<o)v=t,m=a,g=0;else{x(-t/e/3);var w=_/e,k=i(n(w),1/3),S=w<0?-1:1,C=-y/e,M=C>0?1.324717957244746*Math.max(k,r(C)):k,A=g-S*M;if(A!==g){do{x(A),A=0===y?g:g-_/y/(1+s)}while(S*A>S*g);n(e)*g*g>n(c/g)&&(v=((m=-c/g)-a)/g)}}var E=d.solveQuadratic(e,v,m,h,f,p),T=null==f;return isFinite(g)&&(0===E||E>0&&g!==h[0]&&g!==h[1])&&(T||g>f-o&&g<p+o)&&(h[E++]=T?g:u(g,f,p)),E}}},p={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},g=a.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var a="number"==typeof t;this._set(e,a?t:e),r&&(i=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var o="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new g(this.x,this.y)},toString:function(){var e=h.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();d.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=g.read(arguments),t=this.getLength()*e.getLength();if(d.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=g.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=arguments,t=g.read(e),n=t.x-this.x,r=t.y-this.y,i=n*n+r*r;return a.read(e)?i:Math.sqrt(i)},normalize:function(e){e===t&&(e=1);var n=this.getLength(),r=0!==n?e/n:0,i=new g(this.x*r,this.y*r);return r>=0&&(i._angle=this._angle),i},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),i=Math.cos(e);return n=new g(n.x*i-n.y*r,n.x*r+n.y*i),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=g.read(arguments);return new g(this.x+e.x,this.y+e.y)},subtract:function(){var e=g.read(arguments);return new g(this.x-e.x,this.y-e.y)},multiply:function(){var e=g.read(arguments);return new g(this.x*e.x,this.y*e.y)},divide:function(){var e=g.read(arguments);return new g(this.x/e.x,this.y/e.y)},modulo:function(){var e=g.read(arguments);return new g(this.x%e.x,this.y%e.y)},negate:function(){return new g(-this.x,-this.y)},isInside:function(){return _.read(arguments).contains(this)},isClose:function(){var e=arguments,t=g.read(e),n=a.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=g.read(arguments);return g.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=g.read(arguments);return g.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=d.isZero;return e(this.x)&&e(this.y)},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.x)||isNaN(this.y)})),isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=g.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=g.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=g.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new g(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=g.read(e),n=g.read(e);return new g(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=g.read(e),n=g.read(e);return new g(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new g(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))}}},a.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new g(t(this.x),t(this.y))}}),{})),v=g.extend({initialize:function(e,t,n,r){this._x=e,this._y=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),m=a.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var a="number"==typeof t;this._set(e,a?t:e),r&&(i=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var o="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new m(this.width,this.height)},toString:function(){var e=h.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=m.read(arguments);return new m(this.width+e.width,this.height+e.height)},subtract:function(){var e=m.read(arguments);return new m(this.width-e.width,this.height-e.height)},multiply:function(){var e=m.read(arguments);return new m(this.width*e.width,this.height*e.height)},divide:function(){var e=m.read(arguments);return new m(this.width/e.width,this.height/e.height)},modulo:function(){var e=m.read(arguments);return new m(this.width%e.width,this.height%e.height)},negate:function(){return new m(-this.width,-this.height)},isZero:function(){var e=d.isZero;return e(this.width)&&e(this.height)},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.width)||isNaN(this.height)})),statics:{min:function(e,t){return new m(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new m(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new m(Math.random(),Math.random())}}},a.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new m(t(this.width),t(this.height))}}),{})),y=m.extend({initialize:function(e,t,n,r){this._width=e,this._height=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),_=a.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,n,r,i){var o,s=arguments,u=typeof e;if("number"===u?(this._set(e,n,r,i),o=4):"undefined"===u||null===e?(this._set(0,0,0,0),o=null===e?1:0):1===s.length&&(Array.isArray(e)?(this._set.apply(this,e),o=1):e.x!==t||e.width!==t?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),o=1):e.from===t&&e.to===t&&(this._set(0,0,0,0),a.readSupported(s,this)&&(o=1))),o===t){var c,l,h=g.readNamed(s,"from"),f=a.peek(s),d=h.x,p=h.y;if(f&&f.x!==t||a.hasNamed(s,"to")){var v=g.readNamed(s,"to");c=v.x-d,l=v.y-p,c<0&&(d=v.x,c=-c),l<0&&(p=v.y,l=-l)}else{var y=m.read(s);c=y.width,l=y.height}this._set(d,p,c,l),o=s.__index}var _=s.__filtered;return _&&(this.__filtered=_),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new _(this.x,this.y,this.width,this.height)},equals:function(e){var t=a.isPlainValue(e)?_.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=h.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){return new(e?g:v)(this.x,this.y,this,"setPoint")},setPoint:function(){var e=g.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){return new(e?m:y)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=m.read(arguments),t=this._sx,n=this._sy,r=e.width,i=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-i)*n),this.width=r,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){return new(e?g:v)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=g.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==t||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(_.read(arguments)):this._containsPoint(g.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=_.read(arguments),t=a.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=_.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),i=Math.min(this.y+this.height,e.y+e.height);return new _(t,n,r-t,i-n)},unite:function(){var e=_.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),i=Math.max(this.y+this.height,e.y+e.height);return new _(t,n,r-t,i-n)},include:function(){var e=g.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),i=Math.max(this.y+this.height,e.y);return new _(t,n,r-t,i-n)},expand:function(){var e=m.read(arguments),t=e.width,n=e.height;return new _(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,n){return this.expand(this.width*e-this.width,this.height*(n===t?e:n)-this.height)}},a.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var i=e[r?0:1],a=e[r?1:0],o="get"+i,s="get"+a,u="set"+i,c="set"+a,l="set"+n;this["get"+n]=function(e){return new(e?g:v)(this[o](),this[s](),this,l)},this[l]=function(){var e=g.read(arguments);this[u](e.x),this[c](e.y)}}),{beans:!0})),b=_.extend({initialize:function(e,t,n,r,i,a){this._set(e,t,n,r,!0),this._owner=i,this._setter=a},_set:function(e,t,n,r,i){return this._x=e,this._y=t,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var e=_.prototype;return a.each(["x","y","width","height"],(function(e){var t=a.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}}),a.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),x=a.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,i=r.length,a=!0;if(i>=6?this._set.apply(this,r):1===i||2===i?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):a=!1:i?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,i,a,o){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=i,this._ty=a,o||this._changed(),this},_serialize:function(e,t){return a.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new x(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=h.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,a.pick(e,!0),t),this.isIdentity())},translate:function(){var e=g.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=g.read(e),n=g.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=g.read(arguments,1),n=t.x,r=t.y,i=Math.cos(e),a=Math.sin(e),o=n-n*i+r*a,s=r-n*a-r*i,u=this._a,c=this._b,l=this._c,h=this._d;return this._a=i*u+a*l,this._b=i*c+a*h,this._c=-a*u+i*l,this._d=-a*c+i*h,this._tx+=o*u+s*l,this._ty+=o*c+s*h,this._changed(),this},shear:function(){var e=arguments,t=g.read(e),n=g.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*i,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=g.read(e),n=g.read(e,0,{readNull:!0}),r=Math.PI/180,i=new g(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(i,n)},append:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,a=this._d,o=e._a,s=e._c,u=e._b,c=e._d,l=e._tx,h=e._ty;this._a=o*n+u*i,this._c=s*n+c*i,this._b=o*r+u*a,this._d=s*r+c*a,this._tx+=l*n+h*i,this._ty+=l*r+h*a,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,a=this._d,o=this._tx,s=this._ty,u=e._a,c=e._c,l=e._b,h=e._d,f=e._tx,d=e._ty;this._a=u*n+c*r,this._c=u*i+c*a,this._b=l*n+h*r,this._d=l*i+h*a,this._tx=u*o+c*s+f,this._ty=l*o+h*s+d,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,i=this._tx,a=this._ty,o=e*r-t*n,s=null;return o&&!isNaN(o)&&isFinite(i)&&isFinite(a)&&(this._a=r/o,this._b=-t/o,this._c=-n/o,this._d=e/o,this._tx=(n*a-r*i)/o,this._ty=(t*i-e*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new x(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(g.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,i=e.y;return t||(t=new g),t._set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,i=2*n;r<i;r+=2){var a=e[r],o=e[r+1];t[r]=a*this._a+o*this._c+this._tx,t[r+1]=a*this._b+o*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,i=n+e.height,a=[t,n,r,n,r,i,t,i];return this._transformCoordinates(a,a,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),i=r.slice(0,2),a=i.slice(),o=2;o<8;o++){var s=r[o],u=1&o;s<i[u]?i[u]=s:s>a[u]&&(a[u]=s)}return t||(t=new _),t._set(i[0],i[1],a[0]-i[0],a[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(g.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,i=this._b,a=this._c,o=this._d,s=this._tx,u=this._ty,c=r*o-i*a,l=null;if(c&&!isNaN(c)&&isFinite(s)&&isFinite(u)){var h=e.x-this._tx,f=e.y-this._ty;t||(t=new g),l=t._set((h*o-f*a)/c,(f*r-h*i)/c,n)}return l},decompose:function(){var e,t,n,r=this._a,i=this._b,a=this._c,o=this._d,s=r*o-i*a,u=Math.sqrt,c=Math.atan2,l=180/Math.PI;if(0!==r||0!==i){var h=u(r*r+i*i);e=Math.acos(r/h)*(i>0?1:-1),t=[h,s/h],n=[c(r*a+i*o,h*h),0]}else if(0!==a||0!==o){var f=u(a*a+o*o);e=Math.asin(a/f)*(o>0?1:-1),t=[s/f,f],n=[0,c(r*a+i*o,f*f)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*l,scaling:new g(t),skewing:new g(n[0]*l,n[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new g(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},a.each(["a","b","c","d","tx","ty"],(function(e){var t=a.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}}),{})),w=a.extend({_class:"Line",initialize:function(e,t,n,r,i){var a=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=r,a=i):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new g(this._px,this._py)},getVector:function(){return new g(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return w.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return w.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return w.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return g.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return g.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,i,a,o,s,u,c){u||(n-=e,r-=t,o-=i,s-=a);var l=n*s-r*o;if(!d.isMachineZero(l)){var h=e-i,f=t-a,p=(o*f-s*h)/l,v=(n*f-r*h)/l,m=-1e-12,y=1+1e-12;if(c||m<p&&p<y&&m<v&&v<y)return c||(p=p<=0?0:p>=1?1:p),new g(e+p*n,t+p*r)}},getSide:function(e,t,n,r,i,a,o,s){o||(n-=e,r-=t);var u=i-e,c=u*r-(a-t)*n;return!s&&d.isMachineZero(c)&&(c=(u*n+u*n)/(n*n+r*r))>=0&&c<=1&&(c=0),c<0?-1:c>0?1:0},getSignedDistance:function(e,t,n,r,i,a,o){return o||(n-=e,r-=t),0===n?r>0?i-e:e-i:0===r?n<0?a-t:t-a:((i-e)*r-(a-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,i,a,o){return Math.abs(w.getSignedDistance(e,t,n,r,i,a,o))}}}),k=u.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){u.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new W(null,null,this),this._view=K.create(this,e||ae.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return a.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var i=this._changesById,a=t._id,o=i[a];o?o.flags|=e:r.push(i[a]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new M({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:T,match:function(n){var r=n._definition,i=r._id;return t[i]||(t[i]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],i=r._selection;1&i&&r.isInserted()?t.push(r):i||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(t,e)},insertLayer:function(e,t){if(t instanceof M){t._remove(!1,!0),a.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,n,r){return n=this.insertLayer(e,n)||(this._activeLayer||this._insertItem(t,new M(S.NO_INSERT),!0)).insertChild(e,n),r&&n.activate&&n.activate(),n},getItems:function(e){return S._getItems(this,e)},getItem:function(e){return S._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return a.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var i=n[r];for(var a in t){var o=t[a];o&&o!=n&&delete o[i._id]}i.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,i=new a({offset:new g(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new x],updateMatrix:!0}),o=0,s=r.length;o<s;o++)r[o].draw(e,i);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var u=this._selectionItems,c=this._scope.settings.handleSize,l=this._updateVersion;for(var h in u)u[h]._drawSelection(e,t,c,u,l);e.restore()}}}),S=a.extend(o,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=a.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new x,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return a.each(e,(function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,n){var r=e&&a.isPlainObject(e),i=r&&!0===e.internal,o=this._matrix=new x,s=r&&e.project||ce.project,u=ce.settings;return this._id=i?null:p.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&u.applyMatrix,n&&o.translate(n),o._owner=this,this._style=new W(s._currentStyle,this,s),i||r&&0==e.insert||!u.insertItems&&(!r||1!=e.insert)?this._setProject(s):(r&&e.parent||s)._insertItem(t,this,!0),r&&e!==S.NO_INSERT&&e!==S.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(e,t){var n={},r=this;function i(i){for(var o in i){var s=r[o];a.equals(s,"leading"===o?1.2*i.fontSize:i[o])||(n[o]=a.serialize(s,e,"data"!==o,t))}}return i(this._serializeFields),this instanceof C||i(this._style._defaults),[this._class,n]},_changed:function(e){var n=this._symbol,r=this._parent||n,i=this._project;8&e&&(this._bounds=this._position=this._decomposed=t),16&e&&(this._globalMatrix=t),r&&72&e&&S._clearBoundsCache(r),2&e&&S._clearBoundsCache(this),i&&i._changed(e,this),n&&n._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var n=this._getOwner();if(e&&n){var r=n._children,i=n._namedChildren;(i[e]=i[e]||[]).push(this),e in r||(r[e]=this)}this._name=e||t,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},a.each(["locked","visible","blendMode","opacity","guide"],(function(e){var t=a.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(r[e]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?g:v,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(g.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new v(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=g.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},a.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(e,t){this[t]=function(t){return this.getBounds(t,e)}}),{beans:!0,getBounds:function(e,t){var n=t||e instanceof x,r=a.set({},n?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var i=this._getCachedBounds(n&&e,r).rect;return arguments.length?i:new b(i.x,i.y,i.width,i.height,this,"setBounds")},setBounds:function(){var e=_.read(arguments),t=this.getBounds(),n=this._matrix,r=new x,i=e.getCenter();r.translate(i),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||(new x).translate(n.getTranslation())),t=this.getBounds()),r.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),i=t.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(S._updateBoundsCache(this,t.cacheItem),S._getBounds(n,e,t)):new _},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,i=t.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),o=i&&(!e||e.equals(a))&&this._getBoundsCacheKey(t,r),s=this._bounds;if(S._updateBoundsCache(this._parent||this._symbol,i),o&&s&&o in s)return{rect:(f=s[o]).rect.clone(),nonscaling:f.nonscaling};var u=this._getBounds(e||a,t),c=u.rect||u,l=this._style,h=u.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(o){s||(this._bounds=s={});var f=s[o]={rect:c.clone(),nonscaling:h,internal:r}}return{rect:c,nonscaling:h}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var n=e._boundsCache;if(n){e._bounds=e._position=e._boundsCache=t;for(var r=0,i=n.list,a=i.length;r<a;r++){var o=i[r];o!==e&&(o._bounds=o._position=t,o._boundsCache&&S._clearBoundsCache(o))}}},_getBounds:function(e,t,n){var r=1/0,i=-r,a=r,o=i,s=!1;n=n||{};for(var u=0,c=e.length;u<c;u++){var l=e[u];if(l._visible&&!l.isEmpty(!0)){var h=l._getCachedBounds(t&&t.appended(l._matrix),n,!0),f=h.rect;r=Math.min(f.x,r),a=Math.min(f.y,a),i=Math.max(f.x+f.width,i),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(r)?new _(r,a,i-r,o-a):new _,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new v(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=g.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,i=new x,a=d.isZero;if(a(e.x)||a(e.y))i.translate(r.translation),n&&i.rotate(n),i.scale(t.x,t.y),this._matrix.set(i);else{var o=this.getPosition(!0);i.translate(o),n&&i.rotate(n),i.scale(t.x/e.x,t.y/e.y),n&&i.rotate(-n),i.translate(o.negate()),this.transform(i)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var i=0,a=r.length;i<a;i++)r[i]._globalMatrix=null;break}r.push(n),n=n._parent}return t||(t=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&t.prepend(n.getGlobalMatrix(!0))),e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof M)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return a.equals(this._children,e._children)},clone:function(e){var n=new this.constructor(S.NO_INSERT),r=this._children,i=a.pick(e?e.insert:t,e===t||!0===e),o=a.pick(e?e.deep:t,!0);r&&n.copyAttributes(this),(!r||o)&&n.copyContent(this),r||n.copyAttributes(this),i&&n.insertAbove(this);var s=this._name,u=this._parent;if(s&&u){r=u._children;for(var c=s,l=1;r[s];)s=c+" "+l++;s!==c&&n.setName(s)}return n},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var o=n[r];e.hasOwnProperty(o)&&(this[o]=e[o])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var s=e._data,u=e._name;this._data=s?a.clone(s):null,u&&this.setName(u)},rasterize:function(e,n){var r,i,o;a.isPlainObject(e)?(r=e.resolution,i=e.insert,o=e.raster):(r=e,i=n),o||(o=new E(S.NO_INSERT));var s=this.getStrokeBounds(),u=(r||this.getView().getResolution())/72,c=s.getTopLeft().floor(),l=s.getBottomRight().ceil(),h=new m(l.subtract(c)),f=h.multiply(u);if(o.setSize(f,!0),!f.isZero()){var d=o.getContext(!0),p=(new x).scale(u).translate(c.negate());d.save(),p.applyToContext(d),this.draw(d,new a({matrices:[p]})),d.restore()}return o._matrix.set((new x).translate(c.add(h.divide(2))).scale(1/u)),(i===t||i)&&o.insertAbove(this),o},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(g.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return _.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new R.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof S&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){var e=arguments;return this._hitTest(g.read(e),L.getOptions(e))}function t(){var e=arguments,t=g.read(e),n=L.getOptions(e),r=[];return this._hitTest(t,new a({all:r},n)),r}function n(e,t,n,r){var i=this._children;if(i)for(var a=i.length-1;a>=0;a--){var o=i[a],s=o!==r&&o._hitTest(e,t,n);if(s&&!t.all)return s}return null}return k.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,i=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(t.tolerance,1e-12),s=t._tolerancePadding=new m(R._getStrokePadding(o,r._shiftless().invert()));if(!(e=r._inverseTransform(e))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(s.multiply(2))._containsPoint(e))return null;var u,c,l=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==a.hyphenate(this._class)||t.class&&!(this instanceof t.class)),h=t.match,f=this;function d(e){return e&&h&&!h(e)&&(e=null),e&&t.all&&t.all.push(e),e}function p(t,n){var r=n?u["get"+n]():f.getPosition();if(e.subtract(r).divide(s).length<=1)return new L(t,f,{name:n?a.hyphenate(n):t,point:r})}var g=t.position,v=t.center,y=t.bounds;if(l&&this._parent&&(g||v||y)){if((v||y)&&(u=this.getInternalBounds()),!(c=g&&p("position")||v&&p("center","Center"))&&y)for(var _=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!c;b++)c=p("bounds",_[b]);c=d(c)}return c||(c=this._hitTestChildren(e,t,i)||l&&d(this._hitTestSelf(e,t,i,this.getStrokeScaling()?null:i._shiftless().invert()))||null),c&&c.point&&(c.point=r.transform(c.point)),c},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new L("fill",this)},matches:function(e,t){var n=typeof e;if("object"===n){for(var r in e)if(e.hasOwnProperty(r)&&!this.matches(r,e[r]))return!1;return!0}if("function"===n)return e(this);if("match"===e)return t(this);var i=/^(empty|editable)$/.test(e)?this["is"+a.capitalize(e)]():"type"===e?a.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;i=this._class}if("function"==typeof t)return!!t(i);if(t){if(t.test)return t.test(i);if(a.isPlainObject(t))return function e(t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=n[r];if(a.isPlainObject(i)&&a.isPlainObject(o)){if(!e(i,o))return!1}else if(!a.equals(i,o))return!1}return!0}(t,i)}return a.equals(i,t)},getItems:function(e){return S._getItems(this,e,this._matrix)},getItem:function(e){return S._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,i,o){if(!i){var s="object"==typeof n&&n,u=s&&s.overlapping,c=s&&s.inside,l=(y=u||c)&&_.read([y]);i={items:[],recursive:s&&!1!==s.recursive,inside:!!c,overlapping:!!u,rect:l,path:u&&new R.Rectangle({rectangle:l,insert:!1})},s&&(n=a.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=t._children,f=i.items;r=(l=i.rect)&&(r||new x);for(var d=0,p=h&&h.length;d<p;d++){var g=h[d],v=r&&r.appended(g._matrix),m=!0;if(l){var y=g.getBounds(v);if(!l.intersects(y))continue;l.contains(y)||i.overlapping&&(y.contains(l)||i.path.intersects(g,v))||(m=!1)}if(m&&g.matches(n)&&(f.push(g),o)||(!1!==i.recursive&&e(g,n,v,i,o),o&&f.length>0))break}return f}}},{importJSON:function(e){var t=a.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(t,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){for(var r={},i=(t=a.slice(t)).length-1;i>=0;i--){var o=(l=t[i])&&l._id;!l||r[o]?t.splice(i,1):(l._remove(!1,!0),r[o]=!0)}a.splice(n,t,e,0);for(var s=this._project,u=s._changes,c=(i=0,t.length);i<c;i++){var l,h=(l=t[i])._name;l._parent=this,l._setProject(s,!0),h&&l.setName(h),u&&l._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(t,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,i=n[r],a=i?i.indexOf(this):-1;-1!==a&&(t[r]==this&&delete t[r],i.splice(a,1),i.length?t[r]=i[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,i=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),a.splice(n._children,null,i,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=a.pick(t,this._children.length);for(var n=a.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do{t.unshift(e)}while(e=e._parent);return t}for(var n=t(this),r=t(e),i=0,a=Math.min(n.length,r.length);i<a;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},a.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?a:g).read(n),i=g.read(n,0,{readNull:!0});return this.transform((new x)[e](r,i||this.getPosition(!0)))}}),{translate:function(){var e=new x;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,i=e&&!e.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(i||!r.isIdentity()||t&&this._children);if(!i&&!a)return this;if(i){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var o=this._style,s=o.getFillColor(!0),u=o.getStrokeColor(!0);s&&s.transform(e),u&&u.transform(e)}if(a&&(a=this._transformContent(r,t,n))){var c=this._pivot;c&&r._transformPoint(c,c,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var l=this._bounds,h=this._position;(i||a)&&this._changed(25);var f=i&&l&&e.decompose();if(f&&f.skewing.isZero()&&f.rotation%90===0){for(var d in l){var p=l[d];if(p.nonscaling)delete l[d];else if(a||!p.internal){var g=p.rect;e._transformBounds(g,g)}}this._bounds=l;var v=l[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else i&&h&&this._pivot&&(this._position=e._transformPoint(h,h));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var i=0,a=r.length;i<a;i++)r[i].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(g.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(g.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(g.read(arguments))},localToParent:function(){return this._matrix._transformPoint(g.read(arguments))},fitBounds:function(e,t){e=_.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=e.height/e.width,a=(t?r>i:r<i)?e.width/n.width:e.height/n.height,o=new _(new g,new m(n.width*a,n.height*a));o.setCenter(e.getCenter()),this.setBounds(o)}}),{_setStyles:function(e,t,n){var r=this._style,i=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,i)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,i),e.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),o=r.getStrokeCap(),s=r.getMiterLimit();if(a&&(e.lineJoin=a),o&&(e.lineCap=o),s&&(e.miterLimit=s),ce.support.nativeDash){var u=r.getDashArray(),c=r.getDashOffset();u&&u.length&&("setLineDash"in e?(e.setLineDash(u),e.lineDashOffset=c):(e.mozDash=u,e.mozDashOffset=c))}}if(r.hasShadow()){var l=t.pixelRatio||1,h=n._shiftless().prepend((new x).scale(l,l)),f=h.transform(new g(r.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=f.getLength(),e.shadowOffsetX=d.x,e.shadowOffsetY=d.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var r=t.matrices,i=t.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){i=i?i.appended(o):o,r.push(o),t.updateMatrix&&(this._globalMatrix=o);var s,u,c,l=this._blendMode,h=d.clamp(this._opacity,0,1),f="normal"===l,p=oe.nativeModes[l],g=f&&1===h||t.dontStart||t.clip||(p||f&&h<1)&&this._canComposite(),v=t.pixelRatio||1;if(!g){var m=this.getStrokeBounds(i);if(!m.width||!m.height)return void r.pop();c=t.offset,u=t.offset=m.getTopLeft().floor(),s=e,e=ae.getContext(m.getSize().ceil().add(1).multiply(v)),1!==v&&e.scale(v,v)}e.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i,_=!g&&t.clipItem,b=!y||_;if(g?(e.globalAlpha=h,p&&(e.globalCompositeOperation=l)):b&&e.translate(-u.x,-u.y),b&&(g?a:i).applyToContext(e),_&&t.clipItem.draw(e,t.extend({clip:!0})),y){e.setTransform(v,0,0,v,0,0);var x=t.offset;x&&e.translate(-x.x,-x.y)}this._draw(e,t,i,y),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),g||(oe.process(l,e,s,h,u.subtract(c).multiply(v)),ae.release(e),t.offset=c)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof j)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,i){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,u=4&a;if(this._drawSelected||(o=!1),(o||s||u)&&this._isUpdated(i)){var c,l=this.getSelectedColor(!0)||(c=this.getLayer())&&c.getSelectedColor(!0),h=t.appended(this.getGlobalMatrix(!0)),f=n/2;if(e.strokeStyle=e.fillStyle=l?l.toCanvasStyle(e):"#009dec",o&&this._drawSelected(e,h,r),u){var d=this.getPosition(!0),p=this._parent,g=p?p.localToGlobal(d):d,v=g.x,m=g.y;e.beginPath(),e.arc(v,m,f,0,2*Math.PI,!0),e.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],_=f,b=n+1,x=0;x<4;x++){var w=y[x],k=w[0],S=w[1];e.moveTo(v+k*_,m+S*_),e.lineTo(v+k*b,m+S*b),e.stroke()}}if(s){var C=h._transformCorners(this.getInternalBounds());for(e.beginPath(),x=0;x<8;x++)e[x?"lineTo":"moveTo"](C[x],C[++x]);for(e.closePath(),e.stroke(),x=0;x<8;x++)e.fillRect(C[x]-f,C[++x]-f,n,n)}}},_canComposite:function(){return!1}},a.each(["down","drag","up","move"],(function(e){this["removeOn"+a.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}}),{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,i=n&&n.start,a=null!=n&&("number"==typeof n?n:n.duration),o=new re(this,e,t,a,r,i);return a&&this.on("frame",(function e(t){o._handleFrame(1e3*t.time),o.running||this.off("frame",e)})),o},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),C=S.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(n){e.base.call(this,n),2050&n&&(this._clipItem=t)},_getClipItem:function(){var e=this._clipItem;if(e===t){e=null;for(var n=this._children,r=0,i=n.length;r<i;r++)if(n[r]._clipMask){e=n[r];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),a.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var i=this._getClipItem();return(!i||i.contains(t))&&e.base.call(this,t,n,r,i)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var i=this._children,a=0,o=i.length;a<o;a++){var s=i[a];s!==r&&s.draw(e,t)}}}),M=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=S.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&a.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new y(e.width,e.height,this,"setSize")},setSize:function(){var e=m.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;"rectangle"===t?this._radius.set(m.min(this._radius,e.divide(2).abs())):"circle"===t?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===t&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new y(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=m.read(arguments),this._radius){if(this._radius.equals(e))return;this._radius.set(e),"rectangle"===t?(n=m.max(this._size,e.multiply(2)),this._size.set(n)):"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var n=new(R[a.capitalize(this._type)])({center:new g,size:this._size,radius:this._radius,insert:!1});return n.copyAttributes(this),ce.settings.applyMatrix&&n.setApplyMatrix(!0),(e===t||e)&&n.insertAbove(this),n},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var i=this._style,a=i.hasFill(),o=i.hasStroke(),s=t.dontFinish||t.clip,u=!r;if(a||o||s){var c=this._type,l=this._radius,h="circle"===c;if(t.dontStart||e.beginPath(),u&&h)e.arc(0,0,l,0,2*Math.PI,!0);else{var f=h?l:l.width,d=h?l:l.height,p=this._size,g=p.width,v=p.height;if(u&&"rectangle"===c&&0===f&&0===d)e.rect(-g/2,-v/2,g,v);else{var m=g/2,y=v/2,_=.44771525016920644,b=f*_,x=d*_,w=[-m,-y+d,-m,-y+x,-m+b,-y,-m+f,-y,m-f,-y,m-b,-y,m,-y+x,m,-y+d,m,y-d,m,y-x,m-b,y,m-f,y,-m+f,y,-m+b,y,-m,y-x,-m,y-d];r&&r.transform(w,w,32),e.moveTo(w[0],w[1]),e.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),m!==f&&e.lineTo(w[8],w[9]),e.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&e.lineTo(w[16],w[17]),e.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),m!==f&&e.lineTo(w[24],w[25]),e.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}e.closePath()}!s&&(a||o)&&(this._setStyles(e,t,n),a&&(e.fill(i.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new _(this._size).setCenter(0,0),r=this._style,i=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),i?n.expand(R._getStrokePadding(i,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var r=e._radius;if(!r.isZero())for(var i=e._size.divide(2),a=1;a<=4;a++){var o=new g(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(i),u=s.subtract(o.multiply(r));if(new _(n?s.add(o.multiply(n)):s,u).contains(t))return{point:u,quadrant:a}}}function t(e,t,n,r){var i=e.divide(t);return(!r||i.isInQuadrant(r))&&i.subtract(i.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var r=e(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,a,o){var s=!1,u=this._style,c=i.stroke&&u.hasStroke(),l=i.fill&&u.hasFill();if(c||l){var h=this._type,f=this._radius,d=c?u.getStrokeWidth()/2:0,p=i._tolerancePadding.add(R._getStrokePadding(d,!u.getStrokeScaling()&&o));if("rectangle"===h){var g=p.multiply(2),v=e(this,r,g);if(v)s=t(r.subtract(v.point),f,p,v.quadrant);else{var m=new _(this._size).setCenter(0,0),y=m.expand(g),b=m.expand(g.negate());s=y._containsPoint(r)&&!b._containsPoint(r)}}else s=t(r,f,p)}return s?new L(c?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,r,i){var o=a.create(A.prototype);return o._type=e,o._size=n,o._radius=r,o._initialize(a.getNamed(i),t),o}return{Circle:function(){var t=arguments,n=g.readNamed(t,"center"),r=a.readNamed(t,"radius");return e("circle",n,new m(2*r),r,t)},Rectangle:function(){var t=arguments,n=_.readNamed(t,"rectangle"),r=m.min(m.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=A._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(e){var t,n;if(a.hasNamed(e,"radius"))t=g.readNamed(e,"center"),n=m.readNamed(e,"radius");else{var r=_.readNamed(e,"rectangle");t=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),E=S.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,n){if(!this._initialize(e,n!==t&&g.read(arguments))){var r,a=typeof e,o="string"===a?i.getElementById(e):"object"===a?e:null;if(o&&o!==S.NO_INSERT)if(o.getContext||null!=o.naturalHeight)r=o;else if(o){var s=m.read(arguments);s.isZero()||(r=ae.getCanvas(s))}r?this.setImage(r):this.setSource(e)}this._size||(this._size=new m,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=ae.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new y(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=m.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(ae.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&ae.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new g(0,0).transform(e),n=new g(1,0).transform(e).subtract(t),r=new g(0,1).transform(e).subtract(t);return new m(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(e){var n=t.getView(),r=e&&e.type||"load";n&&t.responds(r)&&(ce=n._scope,t.emit(r,new Q(e)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&Z.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&ae.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new m(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=ae.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){ae.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(t){var n=new e.Image,r=this._crossOrigin;r&&(n.crossOrigin=r),t&&(n.src=t),this.setImage(n)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing="string"==typeof e?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=_.read(arguments),t=ae.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=_.read(arguments),t=new E(S.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=g.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof N?(n=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new _(e):"x"in e&&(t=new _(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=Math.min(t.width,32),i=Math.min(t.height,32),o=E._sampleContext;o?o.clearRect(0,0,33,33):o=E._sampleContext=ae.getContext(new m(32)),o.save();var s=(new x).scale(r/t.width,i/t.height).translate(-t.x,-t.y);s.applyToContext(o),n&&n.draw(o,new a({clip:!0,matrices:[s]})),this._matrix.applyToContext(o);var u=this.getElement(),c=this._size;u&&o.drawImage(u,-c.width/2,-c.height/2),o.restore();for(var l=o.getImageData(.5,.5,Math.ceil(r),Math.ceil(i)).data,h=[0,0,0],f=0,d=0,p=l.length;d<p;d+=4){var g=l[d+3];f+=g,g/=255,h[0]+=l[d]*g,h[1]+=l[d+1]*g,h[2]+=l[d+2]*g}for(d=0;d<3;d++)h[d]/=f;return f?H.read(h):null},getPixel:function(){var e=g.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new H("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=g.read(e),n=H.read(e),r=n._convert("rgb"),i=n._alpha,a=this.getContext(!0),o=a.createImageData(1,1),s=o.data;s[0]=255*r[0],s[1]=255*r[1],s[2]=255*r[2],s[3]=null!=i?255*i:255,a.putImageData(o,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=m.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=_.read(arguments);return e.isEmpty()&&(e=new _(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=g.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new _(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new L("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=d.clamp(this._opacity,0,1),this._setStyles(e,t,n);var i=this._smoothing,a="off"===i;q.setPrefixed(e,a?"imageSmoothingEnabled":"imageSmoothingQuality",!a&&i),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),T=S.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,n){this._initialize(e,n!==t&&g.read(arguments,1))||this.setDefinition(e instanceof I?e:new I(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),i=this._definition._item._hitTest(e,r,n);return i&&(i.item=this),i},_draw:function(e,t){this._definition._item.draw(e,t)}}),I=a.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=p.get(),this.project=ce.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,(function(){return a.serialize([this._class,this._item],e,!1,t)}))},_changed:function(e){8&e&&S._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new g),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new T(this,e)},clone:function(){return new I(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),L=a.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){var t=e&&a.read(e);return new a({type:null,tolerance:ce.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),O=a.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,n,r,i,a,o){var s,u,c,l,h=arguments.length;h>0&&(null==e||"object"==typeof e?1===h&&e&&"point"in e?(s=e.point,u=e.handleIn,c=e.handleOut,l=e.selection):(s=e,u=n,c=r,l=i):(s=[e,n],u=r!==t?[r,i]:null,c=a!==t?[a,o]:null)),new P(s,this,"_point"),new P(u,this,"_handleIn"),new P(c,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(e,t){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),a.serialize(i,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,r=t._curves,i=this._index;r&&((!e||e===this._point||e===this._handleIn)&&(n=i>0?r[i-1]:t._closed?r[r.length-1]:null)&&n._changed(),(!e||e===this._point||e===this._handleOut)&&(n=r[i])&&n._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(g.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(g.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(g.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new B(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,n,r){var i=e||{},a=i.type,o=i.factor,s=this.getPrevious(),u=this.getNext(),c=(s||this)._point,l=this._point,h=(u||this)._point,f=c.getDistance(l),d=l.getDistance(h);if(a&&"catmull-rom"!==a){if("geometric"!==a)throw new Error("Smoothing method '"+a+"' not supported.");if(s&&u){var p=c.subtract(h),v=o===t?.4:o,m=v*f/(f+d);n||this.setHandleIn(p.multiply(m)),r||this.setHandleOut(p.multiply(m-v))}}else{var y=o===t?.5:o,_=Math.pow(f,y),b=_*_,x=Math.pow(d,y),w=x*x;if(!n&&s){var k=2*w+3*x*_+b,S=3*x*(x+_);this.setHandleIn(0!==S?new g((w*c._x+k*l._x-b*h._x)/S-l._x,(w*c._y+k*l._y-b*h._y)/S-l._y):new g)}!r&&u&&(k=2*b+3*_*x+w,S=3*_*(_+x),this.setHandleOut(0!==S?new g((b*h._x+k*l._x-w*c._x)/S-l._x,(b*h._y+k*l._y-w*c._y)/S-l._y):new g))}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new O(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new O(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,i=n,a=e._point,o=t._point,s=e._handleIn,u=t._handleIn,c=t._handleOut,l=e._handleOut;this._point._set(r*a._x+i*o._x,r*a._y+i*o._y,!0),this._handleIn._set(r*s._x+i*u._x,r*s._y+i*u._y,!0),this._handleOut._set(r*l._x+i*c._x,r*l._y+i*c._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=r._x,s=r._y,u=2;return t[0]=o,t[1]=s,i&&(t[u++]=i._x+o,t[u++]=i._y+s),a&&(t[u++]=a._x+o,t[u++]=a._y+s),e&&(e._transformCoordinates(t,t,u/2),o=t[0],s=t[1],n?(r._x=o,r._y=s,u=2,i&&(i._x=t[u++]-o,i._y=t[u++]-s),a&&(a._x=t[u++]-o,a._y=t[u++]-s)):(i||(t[u++]=o,t[u++]=s),a||(t[u++]=o,t[u++]=s))),t}}),P=g.extend({initialize:function(e,n,r){var i,a,o;if(e)if((i=e[0])!==t)a=e[1];else{var s=e;(i=s.x)===t&&(i=(s=g.read(arguments)).x),a=s.y,o=s.selected}else i=a=0;this._x=i,this._y=a,this._owner=n,n[r]=this,o&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=d.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),D=a.extend({_class:"Curve",beans:!0,initialize:function(e,t,n,r,i,a,o,s){var u,c,l,h,f,d,p=arguments.length;3===p?(this._path=e,u=t,c=n):p?1===p?"segment1"in e?(u=new O(e.segment1),c=new O(e.segment2)):"point1"in e?(l=e.point1,f=e.handle1,d=e.handle2,h=e.point2):Array.isArray(e)&&(l=[e[0],e[1]],h=[e[6],e[7]],f=[e[2]-e[0],e[3]-e[1]],d=[e[4]-e[6],e[5]-e[7]]):2===p?(u=new O(e),c=new O(t)):4===p?(l=e,f=t,d=n,h=r):8===p&&(l=[e,t],h=[o,s],f=[n-e,r-t],d=[i-o,a-s]):(u=new O,c=new O),this._segment1=u||new O(l,null,f),this._segment2=c||new O(h,d,null)},_serialize:function(e,t){return a.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=t},clone:function(){return new D(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return D.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;(e=t.remove())&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(g.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(g.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(g.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(g.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return D.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new g(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=D.getLength(this.getValues(),0,1)),this._length},getArea:function(){return D.getArea(this.getValues())},getLine:function(){return new w(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new D(D.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return D.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=null;if(e>=1e-8&&e<=.99999999){var r=D.subdivide(this.getValues(),e),i=r[0],a=r[1],o=t||this.hasHandles(),s=this._segment1,u=this._segment2,c=this._path;o&&(s._handleOut._set(i[2]-i[0],i[3]-i[1]),u._handleIn._set(a[4]-a[6],a[5]-a[7]));var l=i[6],h=i[7],f=new O(new g(l,h),o&&new g(i[4]-l,i[5]-h),o&&new g(a[2]-l,a[3]-h));c?(c.insert(s._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new D(f,u))}return n},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,n){return this.divideAtTime(e===t?.5:n?e:this.getTimeAt(e))},split:function(e,n){return this.splitAtTime(e===t?.5:n?e:this.getTimeAt(e))},reversed:function(){return new D(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var i=e._point,a=e._handleOut,o=t._handleIn,s=t._point,u=i.x,c=i.y,l=s.x,h=s.y,f=r?[u,c,u,c,l,h,l,h]:[u,c,u+a._x,c+a._y,l+o._x,h+o._y,l,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7];n===t&&(n=.5);var h=1-n,f=h*r+n*a,d=h*i+n*o,p=h*a+n*s,g=h*o+n*u,v=h*s+n*c,m=h*u+n*l,y=h*f+n*p,_=h*d+n*g,b=h*p+n*v,x=h*g+n*m,w=h*y+n*b,k=h*_+n*x;return[[r,i,f,d,y,_,w,k],[w,k,b,x,v,m,c,l]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,i=e[r+0],a=e[r+2],o=e[r+4],s=e[r+6];if(i>=a==a>=o&&a>=o==o>=s||D.isStraight(e))n.push(e);else{var u=3*(a-o)-i+s,c=2*(i+o)-4*a,l=a-i,h=[],f=d.solveQuadratic(u,c,l,h,1e-8,.99999999);if(f){h.sort();var p=h[0],g=D.subdivide(e,p);n.push(g[0]),f>1&&(p=(h[1]-p)/(1-p),g=D.subdivide(g[1],p),n.push(g[0])),n.push(g[1])}else n.push(e)}return n},solveCubic:function(e,t,n,r,i,a){var o=e[t],s=e[t+2],u=e[t+4],c=e[t+6],l=0;if(!(o<n&&c<n&&s<n&&u<n||o>n&&c>n&&s>n&&u>n)){var h=3*(s-o),f=3*(u-s)-h,p=c-o-h-f;l=d.solveCubic(p,f,h,o-n,r,i,a)}return l},getTimeOf:function(e,t){var n=new g(e[0],e[1]),r=new g(e[6],e[7]),i=1e-7;if(null===(t.isClose(n,1e-12)?0:t.isClose(r,1e-12)?1:null))for(var a=[t.x,t.y],o=[],s=0;s<2;s++)for(var u=D.solveCubic(e,s,a[s],o,0,1),c=0;c<u;c++){var l=o[c];if(t.isClose(D.getPoint(e,l),i))return l}return t.isClose(n,i)?0:t.isClose(r,i)?1:null},getNearestTime:function(e,t){if(D.isStraight(e)){var n=e[0],r=e[1],i=e[6]-n,a=e[7]-r,o=i*i+a*a;if(0===o)return 0;var s=((t.x-n)*i+(t.y-r)*a)/o;return s<1e-12?0:s>.999999999999?1:D.getTimeOf(e,new g(n+s*i,r+s*a))}var u=1/0,c=0;function l(n){if(n>=0&&n<=1){var r=t.getDistance(D.getPoint(e,n),!0);if(r<u)return u=r,c=n,!0}}for(var h=0;h<=100;h++)l(h/100);for(var f=.005;f>1e-8;)!l(c-f)&&!l(c+f)&&(f/=2);return c},getPart:function(e,t,n){var r=t>n;if(r){var i=t;t=n,n=i}return t>0&&(e=D.subdivide(e,t)[1]),n<1&&(e=D.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=3*i-2*n-u,h=3*a-2*r-c,f=3*o-2*u-n,d=3*s-2*c-r;return Math.max(l*l,f*f)+Math.max(h*h,d*d)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7];return 3*((u-n)*(r+a)-(s-t)*(i+o)+i*(t-a)-r*(n-o)+u*(a+t/3)-s*(o+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],i=0;i<2;i++)D._addBounds(e[i],e[i+2],e[i+4],e[i+6],i,0,t,n,r);return new _(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,i,a,o,s,u){function c(e,t){var n=e-t,r=e+t;n<o[i]&&(o[i]=n),r>s[i]&&(s[i]=r)}a/=2;var l=o[i]+a,h=s[i]-a;if(e<l||t<l||n<l||r<l||e>h||t>h||n>h||r>h)if(t<e!=t<r&&n<e!=n<r)c(e,0),c(r,0);else{var f=3*(t-n)-e+r,p=2*(e+n)-4*t,g=t-e,v=d.solveQuadratic(f,p,g,u);c(r,0);for(var m=0;m<v;m++){var y=u[m],_=1-y;1e-8<=y&&y<=.99999999&&c(_*_*_*e+3*_*_*y*t+3*_*y*y*n+y*y*y*r,a)}}}}},a.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=R[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}}),{}),a.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var i=r.subtract(e);if(i.isZero())return!1;if(i.isCollinear(t)&&i.isCollinear(n)){var a=new w(e,r);if(a.getDistance(e.add(t))<1e-7&&a.getDistance(r.add(n))<1e-7){var o=i.dot(i),s=i.dot(t)/o,u=i.dot(n)/o;return s>=0&&s<=1&&u<=0&&u>=-1}}return!1},isLinear:function(e,t,n,r){var i=r.subtract(e).divide(3);return t.equals(i)&&n.negate().equals(i)}},(function(e,t){this[t]=function(t){var n=this._segment1,r=this._segment2;return e(n._point,n._handleOut,r._handleIn,r._point,t)},this.statics[t]=function(t,n){var r=t[0],i=t[1],a=t[6],o=t[7];return e(new g(r,i),new g(t[2]-r,t[3]-i),new g(t[4]-a,t[5]-o),new g(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new B(this,e):null},getTimeAt:function(e,t){return D.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=g.read(arguments);return e.isZero()?[]:D.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(g.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return D.getTimeOf(this.getValues(),g.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=g.read(arguments),t=this.getValues(),n=D.getNearestTime(t,e),r=D.getPoint(t,n);return new B(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return a.each(e,(function(e){this[e+"At"]=function(t,n){var r=this.getValues();return D[e](r,n?t:D.getTimeAt(r,t))},this[e+"AtTime"]=function(t){return D[e](this.getValues(),t)}}),{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=9*(r-a)+3*(s-t),l=6*(t+a)-12*r,h=3*(r-t),f=9*(i-o)+3*(u-n),d=6*(n+o)-12*i,p=3*(i-n);return function(e){var t=(c*e+l)*e+h,n=(f*e+d)*e+p;return Math.sqrt(t*t+n*n)}}function n(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function r(e,t,n,r){if(null==t||t<0||t>1)return null;var i=e[0],a=e[1],o=e[2],s=e[3],u=e[4],c=e[5],l=e[6],h=e[7],f=d.isZero;f(o-i)&&f(s-a)&&(o=i,s=a),f(u-l)&&f(c-h)&&(u=l,c=h);var p,v,m=3*(o-i),y=3*(u-o)-m,_=l-i-m-y,b=3*(s-a),x=3*(c-s)-b,w=h-a-b-x;if(0===n)p=0===t?i:1===t?l:((_*t+y)*t+m)*t+i,v=0===t?a:1===t?h:((w*t+x)*t+b)*t+a;else{var k=1e-8,S=1-k;if(t<k?(p=m,v=b):t>S?(p=3*(l-u),v=3*(h-c)):(p=(3*_*t+2*y)*t+m,v=(3*w*t+2*x)*t+b),r){0===p&&0===v&&(t<k||t>S)&&(p=u-o,v=c-s);var C=Math.sqrt(p*p+v*v);C&&(p/=C,v/=C)}if(3===n){u=6*_*t+2*y,c=6*w*t+2*x;var M=Math.pow(p*p+v*v,1.5);p=0!==M?(p*c-v*u)/M:0,v=0}}return 2===n?new g(v,-p):new g(p,v)}return{statics:{classify:function(e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=i*(r-c)+a*(u-n)+n*c-r*u,h=3*(o*(a-r)+s*(n-i)+i*r-a*n),f=h-l,p=f-l+(n*(c-s)+r*(o-u)+u*s-c*o),g=Math.sqrt(p*p+f*f+h*h),v=0!==g?1/g:0,m=d.isZero,y="serpentine";function _(e,n,r){var i=n!==t,a=i&&n>0&&n<1,o=i&&r>0&&r<1;return i&&(!(a||o)||"loop"===e&&!(a&&o))&&(e="arch",a=o=!1),{type:e,roots:a||o?a&&o?n<r?[n,r]:[r,n]:[a?n:r]:null}}if(f*=v,h*=v,m(p*=v))return m(f)?_(m(h)?"line":"quadratic"):_(y,h/(3*f));var b=3*f*f-4*p*h;if(m(b))return _("cusp",f/(2*p));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),w=2*p;return _(b>0?y:"loop",(f+x)/w,(f-x)/w)},getLength:function(r,i,a,o){if(i===t&&(i=0),a===t&&(a=1),D.isStraight(r)){var s=r;a<1&&(s=D.subdivide(s,a)[0],i/=a),i>0&&(s=D.subdivide(s,i)[1]);var u=s[6]-s[0],c=s[7]-s[1];return Math.sqrt(u*u+c*c)}return d.integrate(o||e(r),i,a,n(i,a))},getTimeAt:function(r,i,a){if(a===t&&(a=i<0?1:0),0===i)return a;var o=Math.abs,s=i>0,u=s?a:0,c=s?1:a,l=e(r),h=D.getLength(r,u,c,l),f=o(i)-h;if(o(f)<1e-12)return s?c:u;if(f>1e-12)return null;var p=i/h,g=0;return d.findRoot((function(e){return g+=d.integrate(l,a,e,n(a,e)),a=e,g-i}),l,a+p,u,c,32,1e-12)},getPoint:function(e,t){return r(e,t,0,!1)},getTangent:function(e,t){return r(e,t,1,!0)},getWeightedTangent:function(e,t){return r(e,t,1,!1)},getNormal:function(e,t){return r(e,t,2,!0)},getWeightedNormal:function(e,t){return r(e,t,2,!1)},getCurvature:function(e,t){return r(e,t,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=3*r-t-3*a+e[6],u=3*t-6*r+3*a,c=-3*t+3*r,l=3*i-n-3*o+e[7],h=3*n-6*i+3*o,f=-3*n+3*i,p=[];return d.solveCubic(9*(s*s+l*l),9*(s*u+h*l),2*(u*u+h*h)+3*(c*s+f*l),c*u+h*f,p,1e-8,.99999999),p.sort()}}}},new function(){function e(e,t,n,r,i,a,o){var s=!o&&n.getPrevious()===i,u=!o&&n!==i&&n.getNext()===i,c=1e-8,l=1-c;if(null!==r&&r>=(s?c:0)&&r<=(u?l:1)&&null!==a&&a>=(u?c:0)&&a<=(s?l:1)){var h=new B(n,r,null,o),f=new B(i,a,null,o);h._intersection=f,f._intersection=h,(!t||t(h))&&B.insert(e,h,!0)}}function t(r,i,a,o,s,u,c,l,h,f,d,p,g){if(++h>=4096||++l>=40)return h;var v,m,y=i[0],_=i[1],b=i[6],x=i[7],k=w.getSignedDistance,S=k(y,_,b,x,i[2],i[3]),C=k(y,_,b,x,i[4],i[5]),M=S*C>0?3/4:4/9,A=M*Math.min(0,S,C),E=M*Math.max(0,S,C),T=k(y,_,b,x,r[0],r[1]),I=k(y,_,b,x,r[2],r[3]),L=k(y,_,b,x,r[4],r[5]),O=k(y,_,b,x,r[6],r[7]),P=function(e,t,n,r){var i,a=[0,e],o=[1/3,t],s=[2/3,n],u=[1,r],c=t-(2*e+r)/3,l=n-(e+2*r)/3;if(c*l<0)i=[[a,o,u],[a,s,u]];else{var h=c/l;i=[h>=2?[a,o,u]:h<=.5?[a,s,u]:[a,o,s,u],[a,u]]}return(c||l)<0?i.reverse():i}(T,I,L,O),B=P[0],N=P[1];if(0===S&&0===C&&0===T&&0===I&&0===L&&0===O||null==(v=n(B,N,A,E))||null==(m=n(B.reverse(),N.reverse(),A,E)))return h;var R=f+(d-f)*v,j=f+(d-f)*m;if(Math.max(g-p,j-R)<1e-9){var z=(R+j)/2,F=(p+g)/2;e(s,u,c?o:a,c?F:z,c?a:o,c?z:F)}else{r=D.getPart(r,v,m);var U=g-p;if(m-v>.8)if(j-R>U)z=(R+j)/2,h=t(i,(V=D.subdivide(r,.5))[0],o,a,s,u,!c,l,h,p,g,R,z),h=t(i,V[1],o,a,s,u,!c,l,h,p,g,z,j);else{var V;F=(p+g)/2,h=t((V=D.subdivide(i,.5))[0],r,o,a,s,u,!c,l,h,p,F,R,j),h=t(V[1],r,o,a,s,u,!c,l,h,F,g,R,j)}else h=0===U||U>=1e-9?t(i,r,o,a,s,u,!c,l,h,p,g,R,j):t(r,i,a,o,s,u,c,l,h,R,j,p,g)}return h}function n(e,t,n,i){return e[0][1]<n?r(e,!0,n):t[0][1]>i?r(t,!1,i):e[0][0]}function r(e,t,n){for(var r=e[0][0],i=e[0][1],a=1,o=e.length;a<o;a++){var s=e[a][0],u=e[a][1];if(t?u>=n:u<=n)return u===n?s:r+(n-i)*(s-r)/(u-i);r=s,i=u}return null}function i(e,t,n,r,i){var a=d.isZero;if(a(r)&&a(i)){var o=D.getTimeOf(e,new g(t,n));return null===o?[]:[o]}for(var s=Math.atan2(-i,r),u=Math.sin(s),c=Math.cos(s),l=[],h=[],f=0;f<8;f+=2){var p=e[f]-t,v=e[f+1]-n;l.push(p*c-v*u,p*u+v*c)}return D.solveCubic(l,1,0,h,0,1),h}function a(t,n,r,a,o,s,u){for(var c=n[0],l=n[1],h=i(t,c,l,n[6]-c,n[7]-l),f=0,d=h.length;f<d;f++){var p=h[f],g=D.getPoint(t,p),v=D.getTimeOf(n,g);null!==v&&e(o,s,u?a:r,u?v:p,u?r:a,u?p:v)}}function o(t,n,r,i,a,o){var s=w.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);s&&e(a,o,r,D.getTimeOf(t,s),i,D.getTimeOf(n,s))}function s(n,r,i,s,u,l){var h=1e-12,f=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+h>f(r[0],r[2],r[4],r[6])&&f(n[0],n[2],n[4],n[6])-h<d(r[0],r[2],r[4],r[6])&&d(n[1],n[3],n[5],n[7])+h>f(r[1],r[3],r[5],r[7])&&f(n[1],n[3],n[5],n[7])-h<d(r[1],r[3],r[5],r[7])){var p=c(n,r);if(p)for(var v=0;v<2;v++){var m=p[v];e(u,l,i,m[0],s,m[1],!0)}else{var y=D.isStraight(n),_=D.isStraight(r),b=y&&_,x=y&&!_,w=u.length;if((b?o:y||_?a:t)(x?r:n,x?n:r,x?s:i,x?i:s,u,l,x,0,0,0,1,0,1),!b||u.length===w)for(v=0;v<4;v++){var k=v>>1,S=1&v,C=6*k,M=6*S,A=new g(n[C],n[C+1]),E=new g(r[M],r[M+1]);A.isClose(E,h)&&e(u,l,i,k,s,S)}}}return u}function u(t,n,r,i){var a=D.classify(t);if("loop"===a.type){var o=a.roots;e(r,i,n,o[0],n,o[1])}return r}function c(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var r=Math.abs,i=w.getDistance,a=1e-7,o=D.isStraight(e),s=D.isStraight(t),u=o&&s,c=n(e)<n(t),l=c?t:e,h=c?e:t,f=l[0],d=l[1],p=l[6]-f,v=l[7]-d;if(i(f,d,p,v,h[0],h[1],!0)<a&&i(f,d,p,v,h[6],h[7],!0)<a)!u&&i(f,d,p,v,l[2],l[3],!0)<a&&i(f,d,p,v,l[4],l[5],!0)<a&&i(f,d,p,v,h[2],h[3],!0)<a&&i(f,d,p,v,h[4],h[5],!0)<a&&(o=s=u=!0);else if(u)return null;if(o^s)return null;for(var m=[e,t],y=[],_=0;_<4&&y.length<2;_++){var b=1&_,x=1^b,k=_>>1,S=D.getTimeOf(m[b],new g(m[x][k?6:0],m[x][k?7:1]));if(null!=S){var C=b?[k,S]:[S,k];(!y.length||r(C[0]-y[0][0])>1e-8&&r(C[1]-y[0][1])>1e-8)&&y.push(C)}if(_>2&&!y.length)break}if(2!==y.length)y=null;else if(!u){var M=D.getPart(e,y[0][0],y[1][0]),A=D.getPart(t,y[0][1],y[1][1]);(r(A[2]-M[2])>a||r(A[3]-M[3])>a||r(A[4]-M[4])>a||r(A[5]-M[5])>a)&&(y=null)}return y}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?s(t,n,this,e,[]):u(t,this,[])},statics:{getOverlaps:c,getIntersections:function(e,t,n,r,i,a){var o=!t;o&&(t=e);for(var c=e.length,h=t.length,f=new Array(c),d=o?f:new Array(h),p=[],g=0;g<c;g++)f[g]=e[g].getValues(r);if(!o)for(g=0;g<h;g++)d[g]=t[g].getValues(i);for(var v=l.findCurveBoundsCollisions(f,d,1e-7),m=0;m<c;m++){var y=e[m],_=f[m];o&&u(_,y,p,n);var b=v[m];if(b)for(var x=0;x<b.length;x++){if(a&&p.length)return p;var w=b[x];if(!o||w>m){var k=t[w];s(_,d[w],y,k,p,n)}}}return p},getCurveLineIntersections:i,getTimesWithTangent:function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=t.normalize(),h=l.x,f=l.y,p=3*u-9*o+9*i-3*n,g=3*c-9*s+9*a-3*r,v=6*o-12*i+6*n,m=6*s-12*a+6*r,y=3*i-3*n,_=3*a-3*r,b=2*p*f-2*g*h,x=[];if(Math.abs(b)<d.CURVETIME_EPSILON){if(0!=(b=p*m-g*v)){var w=-(p*_-g*y)/b;w>=0&&w<=1&&x.push(w)}}else{var k=(v*v-4*p*y)*f*f+(-2*v*m+4*g*y+4*p*_)*h*f+(m*m-4*g*_)*h*h,S=v*f-m*h;if(k>=0&&0!=b){var C=Math.sqrt(k),M=-(S+C)/b,A=(-S+C)/b;M>=0&&M<=1&&x.push(M),A>=0&&A<=1&&x.push(A)}}return x}}}}),B=a.extend({_class:"CurveLocation",initialize:function(e,t,n,r,i){if(t>=.99999999){var a=e.getNext();a&&(t=0,e=a)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;function n(e){var n=e&&e.getCurve();if(n&&null!=(t._time=n.getTimeOf(t._point)))return t._setCurve(n),n}return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var r=t.getCurves(),i=0;i<n;i++)e+=r[i].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof B){var r=this.getCurve(),i=e.getCurve(),a=r._path;if(a===i._path){var o=Math.abs,s=o(this.getOffset()-e.getOffset()),u=!t&&this._intersection,c=!t&&e._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!u&&!c||u&&c&&u.equals(c,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=h.instance;t&&e.push("point: "+t);var r=this.getIndex();null!=r&&e.push("index: "+r);var i=this.getTime();return null!=i&&e.push("time: "+n.number(i)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,i=1-r,a=t>=r&&t<=i,o=n>=r&&n<=i;if(a&&o)return!this.isTouching();var s=this.getCurve(),u=s&&t<r?s.getPrevious():s,c=e.getCurve(),l=c&&n<r?c.getPrevious():c;if(t>i&&(s=s.getNext()),n>i&&(c=c.getNext()),!u||!s||!l||!c)return!1;var h=[];function f(e,t){var n=e.getValues(),r=D.classify(n).roots||D.getPeaks(n),i=r.length,a=D.getLength(n,t&&i?r[i-1]:0,!t&&i?r[0]:1);h.push(i?a:a/32)}function d(e,t,n){return t<n?e>t&&e<n:e>t||e<n}a||(f(u,!0),f(s,!1)),o||(f(l,!0),f(c,!1));var p=this.getPoint(),g=Math.min.apply(Math,h),v=a?s.getTangentAtTime(t):s.getPointAt(g).subtract(p),m=a?v.negate():u.getPointAt(-g).subtract(p),y=o?c.getTangentAtTime(n):c.getPointAt(g).subtract(p),_=o?y.negate():l.getPointAt(-g).subtract(p),b=m.getAngle(),x=v.getAngle(),w=_.getAngle(),k=y.getAngle();return!!(a?d(b,w,k)^d(x,w,k)&&d(b,k,w)^d(x,k,w):d(w,b,x)^d(k,b,x)&&d(w,x,b)^d(k,x,b))},hasOverlap:function(){return!!this._overlap}},a.each(D._evaluateMethods,(function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}}),{preserve:!0}),new function(){function e(e,t,n){var r=e.length,i=0,a=r-1;function o(n,i){for(var a=n+i;a>=-1&&a<=r;a+=i){var o=e[(a%r+r)%r];if(!t.getPoint().isClose(o.getPoint(),1e-7))break;if(t.equals(o))return o}return null}for(;i<=a;){var s,u=i+a>>>1,c=e[u];if(n&&(s=t.equals(c)?c:o(u,-1)||o(u,1)))return t._overlap&&(s._overlap=s._intersection._overlap=!0),s;var l=t.getPath(),h=c.getPath();(l!==h?l._id-h._id:t.getIndex()+t.getTime()-(c.getIndex()+c.getTime()))<0?a=u-1:i=u+1}return e.splice(i,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),N=S.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(a.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:"string"==typeof e&&(t=e),n){var i=n[0];r=i&&Array.isArray(i[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));return new(r?j:R)(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t,n,r,i=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new g,s=new g;function u(e,n){var r=+t[e];return a&&(r+=o[n]),r}function c(e){return new g(u(e,"x"),u(e+1,"y"))}this.clear();for(var l=0,h=i&&i.length;l<h;l++){var f=i[l],d=f[0],p=d.toLowerCase(),v=(t=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&t.length;switch(a=d===p,"z"===n&&!/[mz]/.test(p)&&this.moveTo(o),p){case"m":case"l":for(var y="m"===p,_=0;_<v;_+=2)this[y?"moveTo":"lineTo"](o=c(_)),y&&(s=o,y=!1);r=o;break;case"h":case"v":var b="h"===p?"x":"y";for(o=o.clone(),_=0;_<v;_++)o[b]=u(_,b),this.lineTo(o);r=o;break;case"c":for(_=0;_<v;_+=6)this.cubicCurveTo(c(_),r=c(_+2),o=c(_+4));break;case"s":for(_=0;_<v;_+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(r):o,r=c(_),o=c(_+2)),n=p;break;case"q":for(_=0;_<v;_+=4)this.quadraticCurveTo(r=c(_),o=c(_+2));break;case"t":for(_=0;_<v;_+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?o.multiply(2).subtract(r):o,o=c(_)),n=p;break;case"a":for(_=0;_<v;_+=7)this.arcTo(o=c(_+5),new m(+t[_],+t[_+1]),+t[_+2],+t[_+4],+t[_+3]);break;case"z":this.closePath(1e-12),o=s}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,n,r){var i=this===e||!e,a=this._matrix._orNullIfIdentity(),o=i?a:(n||e._matrix)._orNullIfIdentity();return i||this.getBounds(a).intersects(e.getBounds(o),1e-12)?D.getIntersections(this.getCurves(),!i&&e.getCurves(),t,a,o,r):[]},getCrossings:function(e){return this.getIntersections(e,(function(e){return e.isCrossing()}))},getNearestLocation:function(){for(var e=g.read(arguments),t=this.getCurves(),n=1/0,r=null,i=0,a=t.length;i<a;i++){var o=t[i].getNearestLocation(e);o._distance<n&&(n=o._distance,r=o)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var r=!this._children,i=r?"_segments":"_children",a=e[i],o=t[i],s=this[i];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var u=s.length,c=o.length;if(u<c)for(var l=r?O:R,h=u;h<c;h++)this.add(new l);else u>c&&this[r?"removeSegments":"removeChildren"](c,u);for(h=0;h<c;h++)s[h].interpolate(a[h],o[h],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],i=n.length,a=r.length,o=[],s=0;t=!0;for(var u=l.findItemBoundsCollisions(n,r,d.GEOMETRIC_EPSILON),c=i-1;c>=0&&t;c--){var h=n[c];t=!1;var f=u[c];if(f)for(var p=f.length-1;p>=0&&!t;p--)h.compare(r[f[p]])&&(o[f[p]]||(o[f[p]]=!0,s++),t=!0)}t=t&&s===a}return t}}),R=N.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var n=arguments,r=Array.isArray(e)?"object"==typeof e[0]?e:n:!e||e.size!==t||e.x===t&&e.point===t?null:n;r&&r.length>0?this.setSegments(r):(this._curves=t,this._segmentSelection=0,!r&&"string"==typeof e&&(this.setPathData(e),e=null)),this._initialize(!r&&e)},_equals:function(e){return this._closed===e._closed&&a.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(n){if(e.base.call(this,n),8&n){if(this._length=this._area=t,32&n)this._version++;else if(this._curves)for(var r=0,i=this._curves.length;r<i;r++)this._curves[r]._changed()}else 64&n&&(this._bounds=t)},getStyle:function(){var e=this._parent;return(e instanceof j?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var n=this.isFullySelected(),r=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,r){var i=e[r-1];"boolean"==typeof i&&(this.setClosed(i),r--),this._add(O.readList(e,0,{},r))}n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new D(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new D(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n,r,i,a,o,s,u,c,l=this._segments,f=l.length,d=new h(t),p=new Array(6),g=!0,v=[];function m(t,l){if(t._transformCoordinates(e,p),n=p[0],r=p[1],g)v.push("M"+d.pair(n,r)),g=!1;else if(o=p[2],s=p[3],o===n&&s===r&&u===i&&c===a){if(!l){var h=n-i,f=r-a;v.push(0===h?"v"+d.number(f):0===f?"h"+d.number(h):"l"+d.pair(h,f))}}else v.push("c"+d.pair(u-i,c-a)+" "+d.pair(o-i,s-a)+" "+d.pair(n-i,r-a));i=n,a=r,u=p[4],c=p[5]}if(!f)return"";for(var y=0;y<f;y++)m(l[y]);return this._closed&&f>0&&(m(l[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,i=t.length;r<i;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,r=this._curves,i=e.length,o=null==t,s=(t=o?n.length:t,0);s<i;s++){var u=e[s];u._path&&(u=e[s]=u.clone()),u._path=this,u._index=t+s,u._selection&&this._updateSelection(u,0,u._selection)}if(o)a.push(n,e);else{n.splice.apply(n,[t,0].concat(e)),s=t+i;for(var c=n.length;s<c;s++)n[s]._index=s}if(r){var l=this._countCurves(),h=t>0&&t+i-1===l?t-1:t,f=h,d=Math.min(h+i,l);for(e._curves&&(r.splice.apply(r,[h,0].concat(e._curves)),f+=e._curves.length),s=f;s<d;s++)r.splice(s,0,new D(this,null,null));this._adjustCurves(h,d)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n,r=this._segments,i=this._curves,a=e;a<t;a++)(n=i[a])._path=this,n._segment1=r[a],n._segment2=r[a+1]||r[0],n._changed();(n=i[this._closed&&!e?r.length-1:e-1])&&(n._segment2=r[e]||r[0],n._changed()),(n=i[t])&&(n._segment1=r[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&"number"!=typeof e?this._add(O.readList(t)):this._add([O.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&"number"!=typeof t?this._add(O.readList(n,1),e):this._add([O.read(n,1)],e)[0]},addSegment:function(){return this._add([O.read(arguments)])[0]},insertSegment:function(e){return this._add([O.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(O.readList(e))},insertSegments:function(e,t){return this._add(O.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=a.pick(t,this._segments.length);var r=this._segments,i=this._curves,o=r.length,s=r.splice(e,t-e),u=s.length;if(!u)return s;for(var c=0;c<u;c++){var l=s[c];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}c=e;for(var h=r.length;c<h;c++)r[c]._index=c;if(i){var f=e>0&&t===o+(this._closed?1:0)?e-1:e;for(c=(i=i.splice(f,u)).length-1;c>=0;c--)i[c]._path=null;n&&(s._curves=i.slice(1)),this._adjustCurves(f,f)}return this._changed(41),s},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var r=0,i=t.length;r<i;r++){var a=r+1===i;e+=D.getArea(D.getValues(t[r],t[a?0:r+1],null,a&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)t[i]._selection=r},_updateSelection:function(e,t,n){e._selection=n,(this._segmentSelection+=n-t)>0&&this.setSelected(!0)},divideAt:function(e){var t,n=this.getLocationAt(e);return n&&(t=n.getCurve().divideAt(n.getCurveOffset()))?t._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time;r>.99999999&&(n++,r=0);var i=this.getCurves();if(n>=0&&n<i.length){r>=1e-8&&i[n++].divideAtTime(r);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new R(S.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(e,n){var r,i=n===t?e:(r=this.getCurves()[e])&&r.getLocationAtTime(n);return null!=i?this.splitAt(i):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,i=this.getLastSegment(),a=e.getLastSegment();if(!a)return this;i&&i._point.isClose(a._point,n)&&e.reverse();var o=e.getFirstSegment();if(i&&i._point.isClose(o._point,n))i.setHandleOut(o._handleOut),this._add(r.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&e.reverse(),a=e.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var u=this.getFirstSegment(),c=this.getLastSegment();return u!==c&&u._point.isClose(c._point,n)&&(u.setHandleIn(c._handleIn),c.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,i=t.length-1;i>=0;i--){var a=t[i];!a.hasHandles()&&(!a.hasLength(r)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new z(this,e||.25,256,!0).parts,n=t.length,r=[],i=0;i<n;i++)r.push(new O(t[i].curve.slice(0,2)));!this._closed&&n>0&&r.push(new O(t[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(e){var t=new F(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var n=this,r=e||{},i=r.type||"asymmetric",a=this._segments,o=a.length,s=this._closed;function u(e,t){var r=e&&e.index;if(null!=r){var i=e.path;if(i&&i!==n)throw new Error(e._class+" "+r+" of "+i+" is not part of "+n);t&&e instanceof D&&r++}else r="number"==typeof e?e:t;return Math.min(r<0&&s?r%o:r<0?r+o:r,o-1)}var c=s&&r.from===t&&r.to===t,l=u(r.from,0),h=u(r.to,o-1);if(l>h)if(s)l-=o;else{var f=l;l=h,h=f}if(/^(?:asymmetric|continuous)$/.test(i)){var d="asymmetric"===i,p=Math.min,g=h-l+1,v=g-1,m=c?p(g,4):1,y=m,_=m,b=[];if(s||(y=p(1,l),_=p(1,o-h-1)),(v+=y+_)<=1)return;for(var x=0,w=l-y;x<=v;x++,w++)b[x]=a[(w<0?w+o:w)%o]._point;var k=b[0]._x+2*b[1]._x,S=b[0]._y+2*b[1]._y,C=2,M=v-1,A=[k],E=[S],T=[C],I=[],L=[];for(x=1;x<v;x++){var O=x<M,P=O?4:d?2:7,B=O?4:d?3:8,N=O?2:d?0:1,R=(O||d?1:2)/C;C=T[x]=P-R,k=A[x]=B*b[x]._x+N*b[x+1]._x-R*k,S=E[x]=B*b[x]._y+N*b[x+1]._y-R*S}for(I[M]=A[M]/T[M],L[M]=E[M]/T[M],x=v-2;x>=0;x--)I[x]=(A[x]-I[x+1])/T[x],L[x]=(E[x]-L[x+1])/T[x];I[v]=(3*b[v]._x-I[M])/2,L[v]=(3*b[v]._y-L[M])/2,x=y;var j=v-_;for(w=l;x<=j;x++,w++){var z=a[w<0?w+o:w],F=z._point,U=I[x]-F._x,V=L[x]-F._y;(c||x<j)&&z.setHandleOut(U,V),(c||x>y)&&z.setHandleIn(-U,-V)}}else for(x=l;x<=h;x++)a[x<0?x+o:x].smooth(r,!c&&x===l,!c&&x===h)},toShape:function(e){if(!this._closed)return null;var n,r,i,a,o=this._segments;function s(e,t){var n=o[e],r=n.getNext(),i=o[t],a=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&a._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(a._point.subtract(i._point))}function u(e){var t=o[e],n=t.getNext(),r=t._handleOut,i=n._handleIn,a=.5522847498307936;if(r.isOrthogonal(i)){var s=t._point,u=n._point,c=new w(s,r,!0).intersect(new w(u,i,!0),!0);return c&&d.isZero(r.getLength()/c.subtract(s).getLength()-a)&&d.isZero(i.getLength()/c.subtract(u).getLength()-a)}return!1}function c(e,t){return o[e]._point.getDistance(o[t]._point)}if(!this.hasHandles()&&4===o.length&&s(0,2)&&s(1,3)&&function(e){var t=o[e],n=t.getPrevious(),r=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&r._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(r._point.subtract(t._point))}(1)?(n=A.Rectangle,r=new m(c(0,3),c(0,1)),a=o[1]._point.add(o[2]._point).divide(2)):8===o.length&&u(0)&&u(2)&&u(4)&&u(6)&&s(1,5)&&s(3,7)?(n=A.Rectangle,i=(r=new m(c(1,6),c(0,3))).subtract(new m(c(0,7),c(1,2))).divide(2),a=o[3]._point.add(o[4]._point).divide(2)):4===o.length&&u(0)&&u(1)&&u(2)&&u(3)&&(d.isZero(c(0,2)-c(1,3))?(n=A.Circle,i=c(0,2)/2):(n=A.Ellipse,i=new m(c(2,0)/2,c(3,1)/2)),a=o[1]._point),n){var l=this.getPosition(!0),h=new n({center:l,size:r,radius:i,insert:!1});return h.copyAttributes(this,!0),h._matrix.prepend(this._matrix),h.rotate(a.subtract(l).getAngle()+90),(e===t||e)&&h.insertAbove(this),h}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof j)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),i=n.length,a=r.length;if(!i||!a)return i==a;for(var o,s,u=n[0].getValues(),c=[],l=0,h=0,f=0;f<a;f++){var d=r[f].getValues();if(c.push(d),v=D.getOverlaps(u,d)){o=!f&&v[0][0]>0?a-1:f,s=v[0][1];break}}var p,g=Math.abs;for(d=c[o];u&&d;){var v;if((v=D.getOverlaps(u,d))&&g(v[0][0]-h)<1e-8){1===(h=v[1][0])&&(u=++l<i?n[l].getValues():null,h=0);var m=v[0][1];if(g(m-s)<1e-8){if(p||(p=[o,m]),1===(s=v[1][1])&&(++o>=a&&(o=0),d=c[o]||r[o].getValues(),s=0),!u)return p[0]===o&&p[1]===s;continue}}break}return!1},_hitTestSelf:function(e,t,n,r){var i,a,o,s,u,c,l=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,g=t._tolerancePadding,v=g,m=t.stroke&&h.hasStroke(),y=t.fill&&h.hasFill(),_=t.curves,b=m?h.getStrokeWidth()/2:y&&t.tolerance>0||_?0:null;function x(t,n){return e.subtract(t).divide(n).length<=1}function w(e,n,r){if(!t.selected||n.isSelected()){var i=e._point;if(n!==i&&(n=n.add(i)),x(n,v))return new L(r,l,{segment:e,point:n})}}function k(e,n){return(n||t.segments)&&w(e,e._point,"segment")||!n&&t.handles&&(w(e,e._handleIn,"handle-in")||w(e,e._handleOut,"handle-out"))}function S(e){s.add(e)}function C(t){var n,u=p||t._index>0&&t._index<d-1;return"round"===(u?i:a)?x(t._point,v):(s=new R({internal:!0,closed:!0}),u?t.isSmooth()||R._addBevelJoin(t,i,b,o,null,r,S,!0):"square"===a&&R._addSquareCap(t,a,b,null,r,S,!0),s.isEmpty()?void 0:s.contains(e)||(n=s.getNearestLocation(e))&&x(n.getPoint(),g))}if(null!==b&&(b>0?(i=h.getStrokeJoin(),a=h.getStrokeCap(),o=h.getMiterLimit(),v=v.add(R._getStrokePadding(b,r))):i=a="round"),!t.ends||t.segments||p){if(t.segments||t.handles)for(var M=0;M<d;M++)if(c=k(f[M]))return c}else if(c=k(f[0],!0)||k(f[d-1],!0))return c;if(null!==b){if(u=this.getNearestLocation(e)){var A=u.getTime();0===A||1===A&&d>1?C(u.getSegment())||(u=null):x(u.getPoint(),v)||(u=null)}if(!u&&"miter"===i&&d>1)for(M=0;M<d;M++){var E=f[M];if(e.getDistance(E._point)<=o*b&&C(E)){u=E.getLocation();break}}}return!u&&y&&this._contains(e)||u&&!m&&!_?new L("fill",this):u?new L(m?"stroke":"curve",this,{location:u,point:u.getPoint()}):null}},a.each(D._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}}),{beans:!1,getLocationOf:function(){for(var e=g.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var i=t[n].getLocationOf(e);if(i)return i}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"==typeof e){for(var t=this.getCurves(),n=0,r=0,i=t.length;r<i;r++){var a=n,o=t[r];if((n+=o.getLength())>e)return o.getLocationAt(e-a)}if(t.length>0&&e<=this.getLength())return new B(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=g.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),i=0,a=r.length;i<a;i++){for(var o=r[i],s=o.getTimesWithTangent(e),u=0,c=s.length;u<c;u++){var l=n+o.getOffsetAtTime(s[u]);t.indexOf(l)<0&&t.push(l)}n+=o.length}return t}}),new function(){function e(e,t,n){var r,i,a,o,s,u,c,l,h=t._segments,f=h.length,d=new Array(6),p=!0;function g(t){if(n)t._transformCoordinates(n,d),r=d[0],i=d[1];else{var h=t._point;r=h._x,i=h._y}if(p)e.moveTo(r,i),p=!1;else{if(n)s=d[2],u=d[3];else{var f=t._handleIn;s=r+f._x,u=i+f._y}s===r&&u===i&&c===a&&l===o?e.lineTo(r,i):e.bezierCurveTo(c,l,s,u,r,i)}a=r,o=i,n?(c=d[4],l=d[5]):(f=t._handleOut,c=a+f._x,l=o+f._y)}for(var v=0;v<f;v++)g(h[v]);t._closed&&f>0&&g(h[0])}return{_draw:function(t,n,r,i){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),u=s.hasFill(),c=s.hasStroke(),l=s.getDashArray(),h=!ce.support.nativeDash&&c&&l&&l.length;function f(e){return l[(e%h+h)%h]}if(a||t.beginPath(),(u||c&&!h||o)&&(e(t,this,i),this._closed&&t.closePath()),!o&&(u||c)&&(this._setStyles(t,n,r),u&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),c)){if(h){a||t.beginPath();for(var d,p=new z(this,.25,32,!1,i),g=p.length,v=-s.getDashOffset(),m=0;v>0;)v-=f(m--)+f(m--);for(;v<g;)d=v+f(m++),(v>0||d>0)&&p.drawPart(t,Math.max(v,0),Math.max(d,0)),v=d+f(m++)}t.stroke()}},_drawSelected:function(t,n){t.beginPath(),e(t,this,n),t.stroke(),function(e,t,n,r){if(!(r<=0))for(var i,a,o=r/2,s=r-2,u=o-1,c=new Array(6),l=0,h=t.length;l<h;l++){var f=t[l],d=f._selection;if(f._transformCoordinates(n,c),i=c[0],a=c[1],2&d&&g(2),4&d&&g(4),e.fillRect(i-o,a-o,r,r),s>0&&!(1&d)){var p=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(i-u,a-u,s,s),e.fillStyle=p}}function g(t){var n=c[t],r=c[t+1];(i!=n||a!=r)&&(e.beginPath(),e.moveTo(i,a),e.lineTo(n,r),e.stroke(),e.beginPath(),e.arc(n,r,o,0,2*Math.PI,!0),e.fill())}}(t,this._segments,n,ce.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new O(g.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new O(g.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=g.read(t),r=g.read(t),i=g.read(t),a=e(this);a.setHandleOut(n.subtract(a._point)),this._add([new O(i,r.subtract(i))])},quadraticCurveTo:function(){var t=arguments,n=g.read(t),r=g.read(t),i=e(this)._point;this.cubicCurveTo(n.add(i.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=g.read(t),r=g.read(t),i=a.pick(a.read(t),.5),o=1-i,s=e(this)._point,u=n.subtract(s.multiply(o*o)).subtract(r.multiply(i*i)).divide(2*i*o);if(u.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(u,r)},arcTo:function(){var t,n,r,i,o=arguments,s=Math.abs,u=Math.sqrt,c=e(this),l=c._point,h=g.read(o),f=a.peek(o);if("boolean"==typeof(b=a.pick(f,!0)))var p=(S=l.add(h).divide(2)).add(S.subtract(l).rotate(b?-90:90));else if(a.remain(o)<=2)p=h,h=g.read(o);else if(!l.equals(h)){var v=m.read(o),y=d.isZero;if(y(v.width)||y(v.height))return this.lineTo(h);var _=a.read(o),b=!!a.read(o),k=!!a.read(o),S=l.add(h).divide(2),C=(q=l.subtract(S).rotate(-_)).x,M=q.y,A=s(v.width),E=s(v.height),T=A*A,I=E*E,L=C*C,P=M*M,D=u(L/T+P/I);if(D>1&&(T=(A*=D)*A,I=(E*=D)*E),s(D=(T*I-T*P-I*L)/(T*P+I*L))<1e-12&&(D=0),D<0)throw new Error("Cannot create an arc with the given arguments");t=new g(A*M/E,-E*C/A).multiply((k===b?-1:1)*u(D)).rotate(_).add(S),n=(r=(i=(new x).translate(t).rotate(_).scale(A,E))._inverseTransform(l)).getDirectedAngle(i._inverseTransform(h)),!b&&n>0?n-=360:b&&n<0&&(n+=360)}if(p){var B=new w(l.add(p).divide(2),p.subtract(l).rotate(90),!0),N=new w(p.add(h).divide(2),h.subtract(p).rotate(90),!0),R=new w(l,h),j=R.getSide(p);if(!(t=B.intersect(N,!0))){if(!j)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}n=(r=l.subtract(t)).getDirectedAngle(h.subtract(t));var z=R.getSide(t,!0);0===z?n=j*s(n):j===z&&(n+=n<0?360:-360)}if(n){for(var F=s(n),U=F>=360?4:Math.ceil((F-1e-5)/90),V=n/U,H=V*Math.PI/360,G=4/3*Math.sin(H)/(1+Math.cos(H)),Y=[],W=0;W<=U;W++){var q=h,Z=null;if(W<U&&(Z=r.rotate(90).multiply(G),i?(q=i._transformPoint(r),Z=i._transformPoint(r.add(Z)).subtract(q)):q=t.add(r)),W){var K=r.rotate(-90).multiply(G);i&&(K=i._transformPoint(r.add(K)).subtract(q)),Y.push(new O(q,K,Z))}else c.setHandleOut(Z);r=r.rotate(V)}this._add(Y)}},lineBy:function(){var t=g.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=g.read(t),r=g.read(t),i=a.read(t),o=e(this)._point;this.curveTo(o.add(n),o.add(r),i)},cubicCurveBy:function(){var t=arguments,n=g.read(t),r=g.read(t),i=g.read(t),a=e(this)._point;this.cubicCurveTo(a.add(n),a.add(r),a.add(i))},quadraticCurveBy:function(){var t=arguments,n=g.read(t),r=g.read(t),i=e(this)._point;this.quadraticCurveTo(i.add(n),i.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(g.read(t)),i=a.pick(a.peek(t),!0);"boolean"==typeof i?this.arcTo(r,i):this.arcTo(r,n.add(g.read(t)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return R[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,i,a){var o=e[0];if(!o)return new _;var s=new Array(6),u=o._transformCoordinates(r,new Array(6)),c=u.slice(0,2),l=c.slice(),h=new Array(2);function f(e){e._transformCoordinates(r,s);for(var t=0;t<2;t++)D._addBounds(u[t],u[t+4],s[t+2],s[t],t,a?a[t]:0,c,l,h);var n=u;u=s,s=n}for(var d=1,p=e.length;d<p;d++)f(e[d]);return t&&f(o),new _(c[0],c[1],l[0]-c[0],l[1]-c[1])},getStrokeBounds:function(e,t,n,r,i){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),u=o&&n._getStrokeMatrix(r,i),c=o&&R._getStrokePadding(s,u),l=R.getBounds(e,t,n,r,i,c);if(!o)return l;var h=s/2,f=a.getStrokeJoin(),d=a.getStrokeCap(),p=a.getMiterLimit(),g=new _(new m(c));function v(e){l=l.include(e)}function y(e){l=l.unite(g.setCenter(e._point.transform(r)))}function b(e,t){"round"===t||e.isSmooth()?y(e):R._addBevelJoin(e,t,h,p,r,u,v)}function x(e,t){"round"===t?y(e):R._addSquareCap(e,t,h,r,u,v)}var w=e.length-(t?0:1);if(w>0){for(var k=1;k<w;k++)b(e[k],f);t?b(e[0],f):(x(e[0],d),x(e[e.length-1],d))}return l},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new g(e,0).transform(t),r=new g(0,e).transform(t),i=n.getAngleInRadians(),a=n.getLength(),o=r.getLength(),s=Math.sin(i),u=Math.cos(i),c=Math.tan(i),l=Math.atan2(o*c,a),h=Math.atan2(o,c*a);return[Math.abs(a*Math.cos(l)*u+o*Math.sin(l)*s),Math.abs(o*Math.sin(h)*u+a*Math.cos(h)*s)]},_addBevelJoin:function(e,t,n,r,i,a,o,s){var u=e.getCurve(),c=u.getPrevious(),l=u.getPoint1().transform(i),h=c.getNormalAtTime(1).multiply(n).transform(a),f=u.getNormalAtTime(0).multiply(n).transform(a),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),s&&o(l),o(l.add(h)),"miter"===t){var p=new w(l.add(h),new g(-h.y,h.x),!0).intersect(new w(l.add(f),new g(-f.y,f.x),!0),!0);p&&l.getDistance(p)<=r*n&&o(p)}o(l.add(f))},_addSquareCap:function(e,t,n,r,i,a,o){var s=e._point.transform(r),u=e.getLocation(),c=u.getNormal().multiply(0===u.getTime()?n:-n).transform(i);"square"===t&&(o&&(a(s.subtract(c)),a(s.add(c))),s=s.add(c.rotate(-90))),a(s.add(c)),a(s.subtract(c))},getHandleBounds:function(e,t,n,r,i){var a,o,s=n.getStyle();if(i.stroke&&s.hasStroke()){var u=n._getStrokeMatrix(r,i),c=s.getStrokeWidth()/2,l=c;"miter"===s.getStrokeJoin()&&(l=c*s.getMiterLimit()),"square"===s.getStrokeCap()&&(l=Math.max(l,c*Math.SQRT2)),a=R._getStrokePadding(c,u),o=R._getStrokePadding(l,u)}for(var h=new Array(6),f=1/0,d=-f,p=f,g=d,v=0,m=e.length;v<m;v++){e[v]._transformCoordinates(r,h);for(var y=0;y<6;y+=2){var b=y?a:o,x=b?b[0]:0,w=b?b[1]:0,k=h[y],S=h[y+1],C=k-x,M=k+x,A=S-w,E=S+w;C<f&&(f=C),M>d&&(d=M),A<p&&(p=A),E>g&&(g=E)}}return new _(f,p,d-f,g-p)}}});R.inject({statics:new function(){var e=.5522847498307936,t=[new O([-1,0],[0,e],[0,-e]),new O([0,-1],[-e,0],[e,0]),new O([1,0],[0,-e],[0,e]),new O([0,1],[e,0],[-e,0])];function n(e,t,n){var r=a.getNamed(n),i=new R(r&&(1==r.insert?S.INSERT:0==r.insert?S.NO_INSERT:null));return i._add(e),i._closed=t,i.set(r,S.INSERT)}function r(e,r,i){for(var a=new Array(4),o=0;o<4;o++){var s=t[o];a[o]=new O(s._point.multiply(r).add(e),s._handleIn.multiply(r),s._handleOut.multiply(r))}return n(a,!0,i)}return{Line:function(){var e=arguments;return n([new O(g.readNamed(e,"from")),new O(g.readNamed(e,"to"))],!1,e)},Circle:function(){var e=arguments,t=g.readNamed(e,"center"),n=a.readNamed(e,"radius");return r(t,new m(n),e)},Rectangle:function(){var t,r=arguments,i=_.readNamed(r,"rectangle"),a=m.readNamed(r,"radius",0,{readNull:!0}),o=i.getBottomLeft(!0),s=i.getTopLeft(!0),u=i.getTopRight(!0),c=i.getBottomRight(!0);if(!a||a.isZero())t=[new O(o),new O(s),new O(u),new O(c)];else{var l=(a=m.min(a,i.getSize(!0).divide(2))).width,h=a.height,f=l*e,d=h*e;t=[new O(o.add(l,0),null,[-f,0]),new O(o.subtract(0,h),[0,d]),new O(s.add(0,h),null,[0,-d]),new O(s.add(l,0),[-f,0],null),new O(u.subtract(l,0),null,[f,0]),new O(u.add(0,h),[0,-d],null),new O(c.subtract(0,h),null,[0,d]),new O(c.subtract(l,0),[f,0])]}return n(t,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=arguments,t=A._readEllipse(e);return r(t.center,t.radius,e)},Oval:"#Ellipse",Arc:function(){var e=arguments,t=g.readNamed(e,"from"),n=g.readNamed(e,"through"),r=g.readNamed(e,"to"),i=a.getNamed(e),o=new R(i&&0==i.insert&&S.NO_INSERT);return o.moveTo(t),o.arcTo(n,r),o.set(i)},RegularPolygon:function(){for(var e=arguments,t=g.readNamed(e,"center"),r=a.readNamed(e,"sides"),i=a.readNamed(e,"radius"),o=360/r,s=r%3===0,u=new g(0,s?-i:i),c=s?-1:.5,l=new Array(r),h=0;h<r;h++)l[h]=new O(t.add(u.rotate((h+c)*o)));return n(l,!0,e)},Star:function(){for(var e=arguments,t=g.readNamed(e,"center"),r=2*a.readNamed(e,"points"),i=a.readNamed(e,"radius1"),o=a.readNamed(e,"radius2"),s=360/r,u=new g(0,-1),c=new Array(r),l=0;l<r;l++)c[l]=new O(t.add(u.rotate(s*l).multiply(l%2?o:i)));return n(c,!0,e)}}}});var j=N.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var r=n,i=r[0];i&&"number"==typeof i[0]&&(r=[r]);for(var o=n.length-1;o>=0;o--){var s=r[o];r===n&&!(s instanceof R)&&(r=a.slice(r)),Array.isArray(s)?r[o]=new R({segments:s,insert:!1}):s instanceof j&&(r.splice.apply(r,[o,1].concat(s.removeChildren())),s.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--)(i=n[r].reduce(t)).isEmpty()&&i.remove();var i;return n.length?e.base.call(this):((i=new R(S.NO_INSERT)).copyAttributes(this),i.insertAbove(this),this.remove(),i)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)a.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],i=0,a=n.length;i<a;i++){var o=n[i],s=o._matrix;r.push(o.getPathData(e&&!s.isIdentity()?e.appended(s):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===R||"path"===n.type?n:a.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var i=this._children;if(i.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var a=0,o=i.length;a<o;a++)i[a].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var s=this._style;s.hasFill()&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,i=0,a=r.length;i<a;i++){var o=r[i],s=o._matrix;n[o._id]||o._drawSelected(e,s.isIdentity()?t:t.appended(s))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return a.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}}),{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new R(S.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=g.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},a.each(["reverse","flatten","simplify","smooth"],(function(e){this[e]=function(t){for(var n,r=this._children,i=0,a=r.length;i<a;i++)n=r[i][e](t)||n;return n}}),{}));N.inject(new function(){var e=Math.min,n=Math.max,r=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function o(e){return e._children||[e]}function s(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(t){for(var r=o(n),i=0,a=r.length;i<a;i++)!(e=r[i])._closed&&!e.isEmpty()&&(e.closePath(1e-12),e.getFirstSegment().setHandleIn(0,0),e.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function u(e,t,n,r,i){var a=new j(S.NO_INSERT);return a.addChildren(e,!0),a=a.reduce({simplify:t}),i&&0==i.insert||a.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),a.copyAttributes(n,!0),a}function c(e){return e.hasOverlap()||e.isCrossing()}function h(e,t,n,r){if(r&&(0==r.trace||r.stroke)&&/^(subtract|intersect)$/.test(n))return f(e,t,n);var h=s(e,!0),d=t&&e!==t&&s(t,!0),p=i[n];p[n]=!0,d&&(p.subtract||p.exclude)^d.isClockwise()^h.isClockwise()&&d.reverse();var g,y=m(B.expand(h.getIntersections(d,c))),x=o(h),w=d&&o(d),k=[],S=[];function C(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];a.push(k,r._segments),a.push(S,r.getCurves()),r._overlapsOnly=!0}}function M(e){for(var t=[],n=0,r=e&&e.length;n<r;n++)t.push(S[e[n]]);return t}if(y.length){C(x),w&&C(w);for(var A=new Array(S.length),E=0,T=S.length;E<T;E++)A[E]=S[E].getValues();var I=l.findCurveBoundsCollisions(A,A,0,!0),L={};for(E=0;E<S.length;E++){var O=S[E],P=O._path._id;(L[P]=L[P]||{})[O.getIndex()]={hor:M(I[E].hor),ver:M(I[E].ver)}}for(E=0,T=y.length;E<T;E++)_(y[E]._segment,h,d,L,p);for(E=0,T=k.length;E<T;E++){var D=k[E],N=D._intersection;D._winding||_(D,h,d,L,p),N&&N._overlap||(D._path._overlapsOnly=!1)}g=b(k,p)}else g=v(w?x.concat(w):x.slice(),(function(e){return!!p[e]}));return u(g,!0,e,t,r)}function f(e,t,n){var r=s(e),i=s(t),a=r.getIntersections(i,c),o="subtract"===n,l="divide"===n,h={},f=[];function d(e){if(!h[e._id]&&(l||i.contains(e.getPointAt(e.getLength()/2))^o))return f.unshift(e),h[e._id]=!0}for(var p=a.length-1;p>=0;p--){var g=a[p].split();g&&(d(g)&&g.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return d(r),u(f,!1,e,t)}function p(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function g(e){for(var t=e.length-1;t>=0;t--)e[t].clearHandles()}function v(e,t,n){var i=e&&e.length;if(i){var o=a.each(e,(function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}}),{}),s=e.slice().sort((function(e,t){return r(t.getArea())-r(e.getArea())})),u=s[0],c=l.findItemBoundsCollisions(s,null,d.GEOMETRIC_EPSILON);null==n&&(n=u.isClockwise());for(var h=0;h<i;h++){var f=s[h],p=o[f._id],g=0,v=c[h];if(v)for(var m=null,y=v.length-1;y>=0;y--)if(v[y]<h){m=m||f.getInteriorPoint();var _=s[v[y]];if(_.contains(m)){var b=o[_._id];g=b.winding,p.winding+=g,p.container=b.exclude?b.container:_;break}}if(t(p.winding)===t(g))p.exclude=!0,e[p.index]=null;else{var x=p.container;f.setClockwise(x?!x.isClockwise():n)}}}return e}function m(e,t,n){var r,i,a,o=t&&[],s=1e-8,u=!1,c=n||[],l=n&&{};function h(e){return e._path._id+"."+e._segment1._index}for(var f=(n&&n.length)-1;f>=0;f--)(d=n[f])._path&&(l[h(d)]=!0);for(f=e.length-1;f>=0;f--){var d,v,m=e[f],y=m._time,_=y,b=t&&!t(m);if((d=m._curve)&&(d!==i?(u=!d.hasHandles()||l&&l[h(d)],r=[],a=null,i=d):a>=s&&(y/=a)),b)r&&r.push(m);else{if(t&&o.unshift(m),a=_,y<s)v=d._segment1;else if(y>.99999999)v=d._segment2;else{var x=d.divideAtTime(y,!0);u&&c.push(d,x),v=x._segment1;for(var w=r.length-1;w>=0;w--){var k=r[w];k._time=(k._time-y)/(1-y)}}m._setSegment(v);var S=v._intersection,C=m._intersection;if(S){p(S,C);for(var M=S;M;)p(M._intersection,S),M=M._next}else v._intersection=C}}return n||g(c),o||e}function y(t,i,a,o,s){var u,c,l=Array.isArray(i)?i:i[a?"hor":"ver"],h=a?1:0,f=1^h,d=[t.x,t.y],p=d[h],g=d[f],v=1e-6,m=p-1e-9,_=p+1e-9,b=0,x=0,w=0,k=0,S=!1,C=!1,M=1,A=[];function E(r){var c=r[f+0],l=r[f+6];if(!(g<e(c,l)||g>n(c,l))){var d=r[h+0],b=r[h+2],x=r[h+4],C=r[h+6];if(c===l)return void((d<_&&C>m||C<_&&d>m)&&(S=!0));var E=g===c?0:g===l||m>n(d,b,x,C)||_<e(d,b,x,C)?1:D.solveCubic(r,f,g,A,0,1)>0?A[0]:1,T=0===E?d:1===E?C:D.getPoint(r,E)[a?"y":"x"],I=c>l?1:-1,L=u[f]>u[f+6]?1:-1,O=u[h+6];return g!==c?(T<m?w+=I:T>_?k+=I:S=!0,T>p-v&&T<p+v&&(M/=2)):(I!==L?d<m?w+=I:d>_&&(k+=I):d!=O&&(O<_&&T>_?(k+=I,S=!0):O>m&&T<m&&(w+=I,S=!0)),M/=4),u=r,!s&&T>m&&T<_&&0===D.getTangent(r,E)[a?"x":"y"]&&y(t,i,!a,o,!0)}}function T(t){var r=t[f+0],i=t[f+2],o=t[f+4],s=t[f+6];if(g<=n(r,i,o,s)&&g>=e(r,i,o,s))for(var u,c=t[h+0],l=t[h+2],d=t[h+4],p=t[h+6],v=m>n(c,l,d,p)||_<e(c,l,d,p)?[t]:D.getMonoCurves(t,a),y=0,b=v.length;y<b;y++)if(u=E(v[y]))return u}for(var I=0,L=l.length;I<L;I++){var O,P=l[I],B=P._path,N=P.getValues();if((!I||l[I-1]._path!==B)&&(u=null,B._closed||(c=D.getValues(B.getLastCurve().getSegment2(),P.getSegment1(),null,!o))[f]!==c[f+6]&&(u=c),!u)){u=N;for(var R=B.getLastCurve();R&&R!==P;){var j=R.getValues();if(j[f]!==j[f+6]){u=j;break}R=R.getPrevious()}}if(O=T(N))return O;if(I+1===L||l[I+1]._path!==B){if(c&&(O=T(c)))return O;S&&!w&&!k&&(w=k=B.isClockwise(o)^a?1:-1),b+=w,x+=k,w=k=0,S&&(C=!0,S=!1),c=null}}return b=r(b),x=r(x),{winding:n(b,x),windingL:b,windingR:x,quality:M,onPath:C}}function _(e,t,n,i,a){var o=[],s=e,u=0;do{if(_=e.getCurve()){var c=_.getLength();o.push({segment:e,curve:_,length:c}),u+=c}e=e.getNext()}while(e&&!e._intersection&&e!==s);for(var l=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<l.length&&h.quality<.5;f++){c=u*l[f];for(var p=0,g=o.length;p<g;p++){var v=o[p],m=v.length;if(c<=m){var _,b=(_=v.curve)._path,x=b._parent,w=x instanceof j?x:b,k=d.clamp(_.getTimeAt(c),.001,.999),S=_.getPointAtTime(k),C=r(_.getTangentAtTime(k).y)<Math.SQRT1_2,M=null;if(a.subtract&&n){var A=(w===t?n:t)._getWinding(S,C,!0);if(w===t&&A.winding||w===n&&!A.winding){if(A.quality<1)continue;M={winding:0,quality:1}}}(M=M||y(S,i[b._id][_.getIndex()],C,!0)).quality>h.quality&&(h=M);break}c-=m}}for(p=o.length-1;p>=0;p--)o[p].segment._winding=h}function b(e,t){var n,r=[];function i(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(e){if(e)for(var t=0,r=n.length;t<r;t++)if(e===n[t])return!0;return!1}function o(e){for(var t=e._segments,n=0,r=t.length;n<r;n++)t[n]._visited=!0}function s(e,t){var r=e._intersection,o=r,s=[];function u(r,o){for(;r&&r!==o;){var u=r._segment,c=u&&u._path;if(c){var l=u.getNext()||c.getFirstSegment(),h=l._intersection;u!==e&&(a(u)||a(l)||l&&i(u)&&(i(l)||h&&i(h._segment)))&&s.push(u),t&&n.push(u)}r=r._next}}if(t&&(n=[e]),r){for(u(r);r&&r._previous;)r=r._previous;u(r,o)}return s}e.sort((function(e,t){var n=e._intersection,r=t._intersection,i=!(!n||!n._overlap),a=!(!r||!r._overlap),o=e._path,s=t._path;return i^a?i?1:-1:!n^!r?n?1:-1:o!==s?o._id-s._id:e._index-t._index}));for(var u=0,c=e.length;u<c;u++){var l,h,f,d=e[u],p=i(d),g=null,v=!1,m=!0,y=[];if(p&&d._path._overlapsOnly){var _=d._path,b=d._intersection._segment._path;_.compare(b)&&(_.getArea()&&r.push(_.clone(!1)),o(_),o(b),p=!1)}for(;p;){var x=!g,w=s(d,x),k=w.shift(),C=!(v=!x&&(a(d)||a(k)))&&k;if(x&&(g=new R(S.NO_INSERT),l=null),v){(d.isFirst()||d.isLast())&&(m=d._path._closed),d._visited=!0;break}if(C&&l&&(y.push(l),l=null),l||(C&&w.push(d),l={start:g._segments.length,crossings:w,visited:h=[],handleIn:f}),C&&(d=k),!i(d)){g.removeSegments(l.start);for(var M=0,A=h.length;M<A;M++)h[M]._visited=!1;h.length=0;do{(!(d=l&&l.crossings.shift())||!d._path)&&(d=null,(l=y.pop())&&(h=l.visited,f=l.handleIn))}while(l&&!i(d));if(!d)break}var E=d.getNext();g.add(new O(d._point,f,E&&d._handleOut)),d._visited=!0,h.push(d),d=E||d._path.getFirstSegment(),f=E&&E._handleIn}v&&(m&&(g.getFirstSegment().setHandleIn(f),g.setClosed(m)),0!==g.getArea()&&r.push(g))}return r}return{_getWinding:function(e,t,n){return y(e,this.getCurves(),t,n)},unite:function(e,t){return h(this,e,"unite",t)},intersect:function(e,t){return h(this,e,"intersect",t)},subtract:function(e,t){return h(this,e,"subtract",t)},exclude:function(e,t){return h(this,e,"exclude",t)},divide:function(e,t){return t&&(0==t.trace||t.stroke)?f(this,e,"divide"):u([this.subtract(e,t),this.intersect(e,t)],!0,this,e,t)},resolveCrossings:function(){var e=this._children,t=e||[this];function n(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var r=!1,i=!1,o=this.getIntersections(null,(function(e){return e.hasOverlap()&&(r=!0)||e.isCrossing()&&(i=!0)})),s=r&&i&&[];if(o=B.expand(o),r)for(var u=m(o,(function(e){return e.hasOverlap()}),s),c=u.length-1;c>=0;c--){var l=u[c],h=l._path,f=l._segment,d=f.getPrevious(),p=f.getNext();n(d,h)&&n(p,h)&&(f.remove(),d._handleOut._set(0,0),p._handleIn._set(0,0),d!==f&&!d.getCurve().hasLength()&&(p._handleIn.set(d._handleIn),d.remove()))}i&&(m(o,r&&function(e){var t=e.getCurve(),n=e.getSegment(),r=e._intersection,i=r._curve,a=r._segment;if(t&&i&&t._path&&i._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},s),s&&g(s),t=b(a.each(t,(function(e){a.push(this,e._segments)}),[])));var v,y=t.length;return y>1&&e?(t!==e&&this.setChildren(t),v=this):1===y&&!e&&(t[0]!==this&&this.setSegments(t[0].removeSegments()),v=this),v||((v=new j(S.NO_INSERT)).addChildren(t),(v=v.reduce()).copyAttributes(this),this.replaceWith(v)),v},reorient:function(e,n){var r=this._children;return r&&r.length?this.setChildren(v(this.removeChildren(),(function(t){return!!(e?t:1&t)}),n)):n!==t&&this.setClockwise(n),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var r=this.getCurves(),i=t.y,a=[],o=[],s=0,u=r.length;s<u;s++){var c=r[s].getValues(),l=c[1],h=c[3],f=c[5],d=c[7];if(i>=e(l,h,f,d)&&i<=n(l,h,f,d))for(var p=D.getMonoCurves(c),g=0,v=p.length;g<v;g++){var m=p[g],y=m[1],_=m[7];if(y!==_&&(i>=y&&i<=_||i>=_&&i<=y)){var b=i===y?m[0]:i===_?m[6]:1===D.solveCubic(m,1,i,o,0,1)?D.getPoint(m,o[0]).x:(m[0]+m[6])/2;a.push(b)}}}a.length>1&&(a.sort((function(e,t){return e-t})),t.x=(a[0]+a[1])/2)}return t}}});var z=a.extend({_class:"PathFlattener",initialize:function(e,t,n,r,i){var a,o=[],s=[],u=0,c=1/(n||32),l=e._segments,h=l[0];function f(e,t){var n=D.getValues(e,t,i);o.push(n),d(n,e._index,0,1)}function d(e,n,i,a){if(!(a-i>c)||r&&D.isStraight(e)||D.isFlatEnough(e,t||.25)){var o=e[6]-e[0],l=e[7]-e[1],h=Math.sqrt(o*o+l*l);h>0&&(u+=h,s.push({offset:u,curve:e,index:n,time:a}))}else{var f=D.subdivide(e,.5),p=(i+a)/2;d(f[0],n,i,p),d(f[1],n,p,a)}}for(var p=1,g=l.length;p<g;p++)f(h,a=l[p]),h=a;e._closed&&f(a||h,l[0]),this.curves=o,this.parts=s,this.length=u,this.index=0},_get:function(e){for(var t,n=this.parts,r=n.length,i=this.index;t=i,i&&!(n[--i].offset<e););for(;t<r;t++){var a=n[t];if(a.offset>=e){this.index=t;var o=n[t-1],s=o&&o.index===a.index?o.time:0,u=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(e-u)/(a.offset-u)}}}return{index:n[r-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),i=this._get(n),a=r.index,o=i.index;a<=o;a++){var s=D.getPart(this.curves[a],a===r.index?r.time:0,a===i.index?i.time:1);a===r.index&&e.moveTo(s[0],s[1]),e.bezierCurveTo.apply(e,s.slice(2))}}},a.each(D._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this._get(t);return D[e](this.curves[n.index],n.time)}}),{})),F=a.extend({initialize:function(e){for(var t,n=this.points=[],r=e._segments,i=e._closed,a=0,o=r.length;a<o;a++){var s=r[a].point;(!t||!t.equals(s))&&n.push(t=s.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new O(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,i,a){var o=this.points;if(r-n!==1){for(var s,u=this.chordLengthParameterize(n,r),c=Math.max(t,t*t),l=!0,h=0;h<=4;h++){var f=this.generateBezier(n,r,u,i,a),d=this.findMaxError(n,r,f,u);if(d.error<t&&l)return void this.addCurve(e,f);if(s=d.index,d.error>=c)break;l=this.reparameterize(n,r,u,f),c=d.error}var p=o[s-1].subtract(o[s+1]);this.fitCubic(e,t,n,s,i,p),this.fitCubic(e,t,s,r,p.negate(),a)}else{var g=o[n],v=o[r],m=g.getDistance(v)/3;this.addCurve(e,[g,g.add(i.normalize(m)),v.add(a.normalize(m)),v])}},addCurve:function(e,t){e[e.length-1].setHandleOut(t[1].subtract(t[0])),e.push(new O(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,i){for(var a=1e-12,o=Math.abs,s=this.points,u=s[e],c=s[t],l=[[0,0],[0,0]],h=[0,0],f=0,d=t-e+1;f<d;f++){var p=n[f],g=1-p,v=3*p*g,m=g*g*g,y=v*g,_=v*p,b=p*p*p,x=r.normalize(y),w=i.normalize(_),k=s[e+f].subtract(u.multiply(m+y)).subtract(c.multiply(_+b));l[0][0]+=x.dot(x),l[0][1]+=x.dot(w),l[1][0]=l[0][1],l[1][1]+=w.dot(w),h[0]+=x.dot(k),h[1]+=w.dot(k)}var S,C,M=l[0][0]*l[1][1]-l[1][0]*l[0][1];if(o(M)>a){var A=l[0][0]*h[1]-l[1][0]*h[0];S=(h[0]*l[1][1]-h[1]*l[0][1])/M,C=A/M}else{var E=l[0][0]+l[0][1],T=l[1][0]+l[1][1];S=C=o(E)>a?h[0]/E:o(T)>a?h[1]/T:0}var I,L,O=c.getDistance(u),P=a*O;if(S<P||C<P)S=C=O/3;else{var D=c.subtract(u);I=r.normalize(S),L=i.normalize(C),I.dot(D)-L.dot(D)>O*O&&(S=C=O/3,I=L=null)}return[u,u.add(I||r.normalize(S)),c.add(L||i.normalize(C)),c]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e]);i=1;for(var a=n.length;i<a;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],i=[],a=0;a<=2;a++)r[a]=e[a+1].subtract(e[a]).multiply(3);for(a=0;a<=1;a++)i[a]=r[a+1].subtract(r[a]).multiply(2);var o=this.evaluate(3,e,n),s=this.evaluate(2,r,n),u=this.evaluate(1,i,n),c=o.subtract(t),l=s.dot(s)+c.dot(u);return d.isMachineZero(l)?n:n-c.dot(s)/l},evaluate:function(e,t,n){for(var r=t.slice(),i=1;i<=e;i++)for(var a=0;a<=e-i;a++)r[a]=r[a].multiply(1-n).add(r[a+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){for(var i=Math.floor((t-e+1)/2),a=0,o=e+1;o<t;o++){var s=this.evaluate(3,n,r[o-e]).subtract(this.points[o]),u=s.x*s.x+s.y*s.y;u>=a&&(a=u,i=o)}return{error:a,index:i}}}),U=S.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var n=e&&a.isPlainObject(e)&&e.x===t&&e.y===t;this._initialize(n&&e,!n&&g.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),V=U.extend({_class:"PointText",initialize:function(){U.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new v(e.x,e.y,this,"setPoint")},setPoint:function(){var e=g.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,i=this._style,a=i.hasFill(),o=i.hasStroke(),s=i.getLeading(),u=e.shadowColor;e.font=i.getFontStyle(),e.textAlign=i.getJustification();for(var c=0,l=r.length;c<l;c++){e.shadowColor=u;var h=r[c];a&&(e.fillText(h,0,0),e.shadowColor="rgba(0,0,0,0)"),o&&e.strokeText(h,0,0),e.translate(0,s)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,i=r.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),r),u=0;"left"!==a&&(u-=s/("center"===a?2:1));var c=new _(u,i?-.75*o:0,s,i*o);return e?e._transformBounds(c,c):c}}),H=a.extend(new function(){var e,t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],s={"rgb-hsb":function(e,t,n){var r=Math.max(e,t,n),i=r-Math.min(e,t,n);return[0===i?0:60*(r==e?(t-n)/i+(t<n?6:0):r==t?(n-e)/i+2:(e-t)/i+4),0===r?0:i/r,r]},"hsb-rgb":function(e,t,n){var r,i=(e=(e/60%6+6)%6)-(r=Math.floor(e)),a=[n,n*(1-t),n*(1-t*i),n*(1-t*(1-i))];return[a[(r=o[r])[0]],a[r[1]],a[r[2]]]},"rgb-hsl":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),a=r-i,o=0===a,s=(r+i)/2;return[o?0:60*(r==e?(t-n)/a+(t<n?6:0):r==t?(n-e)/a+2:(e-t)/a+4),o?0:s<.5?a/(r+i):a/(2-r-i),s]},"hsl-rgb":function(e,t,n){if(0===t)return[n,n,n];for(var r=[(e=(e/360%1+1)%1)+1/3,e,e-1/3],i=n<.5?n*(1+t):n+t-n*t,a=2*n-i,o=[],s=0;s<3;s++){var u=r[s];u<0&&(u+=1),u>1&&(u-=1),o[s]=6*u<1?a+6*(i-a)*u:2*u<1?i:3*u<2?a+(i-a)*(2/3-u)*6:a}return o},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return a.each(t,(function(e,r){n[r]=[],a.each(e,(function(e,i){var o=a.capitalize(e),s=/^(hue|saturation)$/.test(e),u=n[r][i]="gradient"===r?"gradient"===e?function(e){var t=this._components[0];return t!==(e=G.read(Array.isArray(e)?e:arguments,0,{readNull:!0}))&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:function(){return g.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:+e};this["get"+o]=function(){return this._type===r||s&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(r)[i]},this["set"+o]=function(e){this._type!==r&&!(s&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(r),this._properties=t[r],this._type=r),this._components[i]=u.call(this,e),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function o(s){var u,c,l,h,f=arguments,d=this.__read,p=0;Array.isArray(s)&&(s=(f=s)[0]);var g=null!=s&&typeof s;if("string"===g&&s in t&&(u=s,s=f[1],Array.isArray(s)?(c=s,l=f[2]):(d&&(p=1),f=a.slice(f,1),g=typeof s)),!c){if(h="number"===g?f:"object"===g&&null!=s.length?s:null){u||(u=h.length>=3?"rgb":"gray");var v=t[u].length;l=h[v],d&&(p+=h===arguments?v+(null!=l?1:0):1),h.length>v&&(h=a.slice(h,0,v))}else if("string"===g){var m=function(t){var n,a=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),o="rgb";if(a){var s=a[4]?4:3;n=new Array(s);for(var u=0;u<s;u++){var c=a[u+1];n[u]=parseInt(1==c.length?c+c:c,16)/255}}else if(a=t.match(/^(rgb|hsl)a?\((.*)\)$/)){o=a[1],n=a[2].trim().split(/[,\s]+/g);for(var l="hsl"===o,h=(u=0,Math.min(n.length,4));u<h;u++){var f=n[u];if(c=parseFloat(f),l)if(0===u){var d=f.match(/([a-z]*)$/)[1];c*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else u<3&&(c/=100);else u<3&&(c/=/%$/.test(f)?100:255);n[u]=c}}else{var p=i[t];if(!p)if(r){e||((e=ae.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var g=e.getImageData(0,0,1,1).data;p=i[t]=[g[0]/255,g[1]/255,g[2]/255]}else p=[0,0,0];n=p.slice()}return[o,n]}(s);u=m[0],4===(c=m[1]).length&&(l=c[3],c.length--)}else if("object"===g)if(s.constructor===o){if(u=s._type,c=s._components.slice(),l=s._alpha,"gradient"===u)for(var y=1,_=c.length;y<_;y++){var b=c[y];b&&(c[y]=b.clone())}}else if(s.constructor===G)u="gradient",h=f;else{var x=t[u="hue"in s?"lightness"in s?"hsl":"hsb":"gradient"in s||"stops"in s||"radial"in s?"gradient":"gray"in s?"gray":"rgb"],w=n[u];for(this._components=c=[],y=0,_=x.length;y<_;y++)null==(k=s[x[y]])&&!y&&"gradient"===u&&"stops"in s&&(k={stops:s.stops,radial:s.radial}),null!=(k=w[y].call(this,k))&&(c[y]=k);l=s.alpha}d&&u&&(p=1)}if(this._type=u||"rgb",!c)for(this._components=c=[],y=0,_=(w=n[this._type]).length;y<_;y++){var k;null!=(k=w[y].call(this,h&&h[y]))&&(c[y]=k)}return this._components=c,this._properties=t[this._type],this._alpha=l,d&&(this.__read=p),this},set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return a.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(e){var t;return this._type===e?this._components.slice():(t=s[this._type+"-"+e])?t.apply(this,this._components):s["rgb-"+e].apply(this,s[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new H(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=a.isPlainValue(e,!0)?H.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&a.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,r=h.instance,i=0,a=e.length;i<a;i++){var o=this._components[i];null!=o&&t.push(e[i]+": "+(n?o:r.number(o)))}return null!=this._alpha&&t.push("alpha: "+r.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){var t=this._convert("rgb"),n=e||null==this._alpha?1:this._alpha;function r(e){return Math.round(255*(e<0?0:e>1?1:e))}return t=[r(t[0]),r(t[1]),r(t[2])],n<1&&t.push(n<0?0:n),e?"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1):(4==t.length?"rgba(":"rgb(")+t.join(",")+")"},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,i=r[0],a=i._stops,o=r[1],s=r[2],u=r[3],c=t&&t.inverted();if(c&&(o=c._transformPoint(o),s=c._transformPoint(s),u&&(u=c._transformPoint(u))),i._radial){var l=s.getDistance(o);if(u){var h=u.subtract(o);h.getLength()>l&&(u=o.add(h.normalize(l-.1)))}var f=u||o;n=e.createRadialGradient(f.x,f.y,0,o.x,o.y,l)}else n=e.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var g,v=a[d],m=v._offset;n.addColorStop(null!==(g=m)&&void 0!==g?g:d/(p-1),v._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,r=t.length;n<r;n++){var i=t[n];e._transformPoint(i,i,!0)}this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new H(e(),e(),e())},_setOwner:function(e,t,n){return e&&(e._owner&&t&&e._owner!==t&&(e=e.clone()),!e._owner^!t&&(e._owner=t||null,e._setter=n||null)),e}}})},new function(){return a.each({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}},(function(e,t){this[t]=function(t){t=H.read(arguments);for(var n=this._type,r=this._components,i=t._convert(n),a=0,o=r.length;a<o;a++)i[a]=e(r[a],i[a]);return new H(n,i,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}}),{})}),G=a.extend({_class:"Gradient",initialize:function(e,t){this._id=p.get(),e&&a.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,(function(){return a.serialize([this._stops,this._radial],e,!0,t)}))},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var n=this._owners?this._owners.indexOf(e):-1;-1!=n&&(this._owners.splice(n,1),this._owners.length||(this._owners=t))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new G(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var n=this._stops;if(n)for(var r=0,i=n.length;r<i;r++)n[r]._owner=t;for(r=0,i=(n=this._stops=Y.readList(e,0,{clone:!0})).length;r<i;r++)n[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var i=0;i<r;i++)if(!t[i].equals(n[i]))return!1;return!0}}return!1}}),Y=a.extend({_class:"GradientStop",initialize:function(e,n){var r=e,i=n;"object"==typeof e&&n===t&&(Array.isArray(e)&&"number"!=typeof e[0]?(r=e[0],i=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(r=e.color,i=e.offset||e.rampPoint||0)),this.setColor(r),this.setOffset(i)},clone:function(){return new Y(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return a.serialize(null==r?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){H._setOwner(this._color,null),this._color=H._setOwner(H.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),W=a.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new g,selectedColor:null},n=a.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),r=a.set({},n,{fillColor:new H}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},o={beans:!0},s={_class:"Style",beans:!0,initialize:function(t,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||ce.project,this._defaults=!i||i instanceof C?n:i instanceof U?r:e,t&&this.set(t)}};return a.each(n,(function(e,n){var r=/Color$/.test(n),u="shadowOffset"===n,c=a.capitalize(n),l=i[n],h="set"+c,f="get"+c;s[h]=function(e){var t=this._owner,i=t&&t._children,a=i&&i.length>0&&!(t instanceof j);if(a)for(var o=0,s=i.length;o<s;o++)i[o]._style[h](e);if(("selectedColor"===n||!a)&&n in this._defaults){var u=this._values[n];u!==e&&(r&&(u&&(H._setOwner(u,null),u._canvasStyle=null),e&&e.constructor===H&&(e=H._setOwner(e,t,a&&h))),this._values[n]=e,t&&t._changed(l||129))}},s[f]=function(e){var i=this._owner,o=i&&i._children,s=o&&o.length>0&&!(i instanceof j);if(s&&!e)for(var c=0,l=o.length;c<l;c++){var d=o[c]._style[f]();if(c){if(!a.equals(p,d))return t}else p=d}else if(n in this._defaults){var p;if((p=this._values[n])===t)(p=this._defaults[n])&&p.clone&&(p=p.clone());else{var v=r?H:u?g:null;v&&(!p||p.constructor!==v)&&(this._values[n]=p=v.read([p],0,{readNull:!0,clone:!0}))}}return p&&r&&(p=H._setOwner(p,i,s&&h)),p},o[f]=function(e){return this._style[f](e)},o[h]=function(e){this._style[h](e)}})),a.each({Font:"FontFamily",WindingRule:"FillRule"},(function(e,t){var n="get"+t,r="set"+t;s[n]=o[n]="#get"+e,s[r]=o[r]="#set"+e})),S.inject(o),s},{set:function(e){var t=e instanceof W,n=t?e._values:e;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&t&&i.clone?i.clone():i}},equals:function(e){function n(e,n,r){var i=e._values,o=n._values,s=n._defaults;for(var u in i){var c=i[u],l=o[u];if((!r||!(u in o))&&!a.equals(c,l===t?s[u]:l))return!1}return!0}return e===this||e&&this._class===e._class&&n(this,e)&&n(e,this,!0)||!1},_dispose:function(){var e;(e=this.getFillColor())&&(e._canvasStyle=null),(e=this.getStrokeColor())&&(e._canvasStyle=null),(e=this.getShadowColor())&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!==t&&void 0!==t?t:1.2*n}}),q=new function(){function e(e,t,n,r){for(var i=["","webkit","moz","Moz","ms","o"],a=t[0].toUpperCase()+t.substring(1),o=0;o<6;o++){var s=i[o],u=s?s+a:t;if(u in e){if(!n)return e[u];e[u]=r;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,r=e.ownerDocument,i=r.body,a=r.documentElement;try{n=e.getBoundingClientRect()}catch(c){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||i.clientLeft||0),s=n.top-(a.clientTop||i.clientTop||0);if(!t){var u=r.defaultView;o+=u.pageXOffset||a.scrollLeft||i.scrollLeft,s+=u.pageYOffset||a.scrollTop||i.scrollTop}return new _(o,s,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,r=t.documentElement;return new _(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(e,t){return q.getBounds(e,t).getPoint()},getSize:function(e){return q.getBounds(e,!0).getSize()},isInvisible:function(e){return q.getSize(e).equals(new m(0,0))},isInView:function(e){return!q.isInvisible(e)&&q.getViewportBounds(e).intersects(q.getBounds(e,!0))},isInserted:function(e){return i.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if("object"==typeof n)for(var i in n)e(t,i,!0,n[i]);else e(t,n,!0,r)}}},Z={add:function(e,t){if(e)for(var n in t)for(var r=t[n],a=n.split(/[\s,]+/g),o=0,s=a.length;o<s;o++){var u=a[o],c=e===i&&("touchstart"===u||"touchmove"===u)&&{passive:!1};e.addEventListener(u,r,c)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++)e.removeEventListener(i[a],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new g(t.pageX||t.clientX+i.documentElement.scrollLeft,t.pageY||t.clientY+i.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return Z.getPoint(e).subtract(q.getOffset(t||Z.getTarget(e)))}};Z.requestAnimationFrame=new function(){var e,t=q.getPrefixed(r,"requestAnimationFrame"),n=!1,i=[];function a(){var e=i;i=[];for(var r=0,o=e.length;r<o;r++)e[r]();(n=t&&i.length)&&t(a)}return function(r){i.push(r),t?n||(t(a),n=!0):e||(e=setInterval(a,1e3/60))}};var K=a.extend(o,{_class:"View",initialize:function e(t,n){function a(e){return n[e]||parseInt(n.getAttribute(e),10)}function o(){var e=q.getSize(n);return e.isNaN()||e.isZero()?new m(a("width"),a("height")):e}var u;if(r&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+e._id++),Z.add(n,this._viewEvents);var c="none";if(q.setPrefixed(n.style,{userDrag:c,userSelect:c,touchCallout:c,contentZooming:c,tapHighlightColor:"rgba(0,0,0,0)"}),s.hasAttribute(n,"resize")){var l=this;Z.add(r,this._windowEvents={resize:function(){l.setViewSize(o())}})}if(u=o(),s.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var h=this._stats.domElement,f=h.style,d=q.getOffset(n);f.position="absolute",f.left=d.x+"px",f.top=d.y+"px",i.body.appendChild(h)}}else u=new m(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(u.width,u.height),this._viewSize=u,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new x)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ce.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;K._focused===this&&(K._focused=null),K._views.splice(K._views.indexOf(this),1),delete K._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),Z.remove(this._element,this._viewEvents),Z.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:a.each(S._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(e){this[e]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;Z.requestAnimationFrame((function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!q.getPrefixed(i,"hidden")||"true"===s.getAttribute(t,"keepalive"))&&q.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ce=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new a({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new a(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new y(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=m.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new _(new g,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return q.isInView(this._element)},isInserted:function(){return q.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var r=n.parentNode,a=i.createElement("div");a.style.fontSize=e,r.appendChild(a),t=parseFloat(q.getStyles(a).fontSize),r.removeChild(a)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},a.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?a:g).read(n),i=g.read(n,0,{readNull:!0});return this.transform((new x)[e](r,i||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new x;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=g.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform((new x).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new v(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=g.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(g.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(g.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(g.read(arguments))},getEventPoint:function(e){return this.viewToProject(Z.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return i&&"string"==typeof t&&(t=i.getElementById(t)),new(r?X:K)(e,t)}}},new function(){if(r){var e,t,n,a,o,s=!1,u=!1,c=r.navigator;c.pointerEnabled||c.msPointerEnabled?(n="pointerdown MSPointerDown",a="pointermove MSPointerMove",o="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",a="touchmove",o="touchend touchcancel","ontouchstart"in r&&c.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",a+=" mousemove",o+=" mouseup"));var l={},h={mouseout:function(e){var t=K._focused,n=Z.getRelatedTarget(e);if(t&&(!n||"HTML"===n.nodeName)){var r=Z.getOffset(e,t._element),i=r.x,a=Math.abs,o=a(i),s=o-(1<<25);r.x=a(s)<o?s*(i<0?-1:1):i,A(t,e,t.viewToProject(r))}},scroll:M};l[n]=function(e){var t=K._focused=C(e);s||(s=!0,t._handleMouseEvent("mousedown",e))},h[a]=function(n){var r=K._focused;if(!u){var i=C(n);i?r!==i&&(r&&A(r,n),e||(e=r),r=K._focused=t=i):t&&t===r&&(e&&!e.isInserted()&&(e=null),r=K._focused=e,e=null,M())}r&&A(r,n)},h[n]=function(){u=!0},h[o]=function(e){var t=K._focused;t&&s&&t._handleMouseEvent("mouseup",e),u=s=!1},Z.add(i,h),Z.add(r,{load:M});var f,d,p,g,v,m,y,_,b=!1,x=!1,w={doubleclick:"click",mousedrag:"mousemove"},k=!1,S={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:l,_handleMouseEvent:function(e,t,n){var r=this._itemEvents,i=r.native[e],a="mousemove"===e,o=this._scope.tool,u=this;function c(e){return r.virtual[e]||u.responds(e)||o&&o.responds(e)}a&&s&&c("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var l=this.getBounds().contains(n),h=i&&l&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,S=!1,C={};if(C[e.substr(5)]=!0,i&&w!==g&&(g&&E(g,null,"mouseleave",t,n),w&&E(w,null,"mouseenter",t,n),g=w),k^l&&(E(this,null,l?"mouseenter":"mouseleave",t,n),S=!0),(l||C.drag)&&!n.equals(d)&&(T(this,w,a?e:"mousemove",t,n,d),S=!0),k=l,C.down&&l||C.up&&f){if(T(this,w,e,t,n,f),C.down){if(_=w===m&&Date.now()-y<300,p=m=w,!x&&w){for(var M=w;M&&!M.responds("mousedrag");)M=M._parent;M&&(v=w)}f=n}else C.up&&(!x&&w===p&&(y=Date.now(),T(this,w,_?"doubleclick":"click",t,n,f),_=!1),p=v=null);k=!1,S=!0}d=n,S&&o&&(b=o._handleMouseEvent(e,t,n,C)||b),!1!==t.cancelable&&(b&&!C.move||C.down&&c("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,r){var i,a=this._scope,o=a.tool;function s(o){o.responds(e)&&(ce=a,o.emit(e,i=i||new J(e,t,n,r)))}this.isVisible()&&(s(this),o&&o.responds(e)&&s(o))},_countItemEvent:function(e,t){var n=this._itemEvents,r=n.native,i=n.virtual;for(var a in S)r[a]=(r[a]||0)+(S[a][e]||0)*t;i[e]=(i[e]||0)+t},statics:{updateFocus:M,_resetState:function(){s=u=b=k=!1,e=t=f=d=p=g=v=m=y=_=null}}}}function C(e){var t=Z.getTarget(e);return t.getAttribute&&K._viewsById[t.getAttribute("id")]}function M(){var e=K._focused;if(!e||!e.isVisible())for(var n=0,r=K._views.length;n<r;n++)if((e=K._views[n]).isVisible()){K._focused=t=e;break}}function A(e,t,n){e._handleMouseEvent("mousemove",t,n)}function E(e,t,n,r,i,a,o){var s,u=!1;function c(e,n){if(e.responds(n)){if(s||(s=new ee(n,r,i,t||e,a?i.subtract(a):null)),e.emit(n,s)&&(b=!0,s.prevented&&(x=!0),s.stopped))return u=!0}else{var o=w[n];if(o)return c(e,o)}}for(;e&&e!==o&&!c(e,n);)e=e._parent;return u}function T(e,t,n,r,i,a){return e._project.removeOn(n),x=b=!1,v&&E(v,null,n,r,i,a)||t&&t!==v&&!t.isDescendant(v)&&E(t,null,"mousedrag"===n?"mousemove":n,r,i,a,v)||E(e,v||t||e,n,r,i,a)}}),X=K.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof r.HTMLCanvasElement)){var n=m.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+a.slice(arguments,1));t=ae.getCanvas(n)}var i=this._context=t.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(s.getAttribute(t,"hidpi"))){var o=r.devicePixelRatio||1,u=q.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=o/u}K.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),1!==r){var i=this._element,a=this._context;if(!s.hasAttribute(i,"resize")){var o=i.style;o.width=t+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n,r=ce.agent;if(r&&r.firefox)n=e.base.call(this,t);else{var i=this._context,a=i.font;i.font=t+" serif",n=parseFloat(i.font),i.font=a}return n},getTextWidth:function(e,t){var n=this._context,r=n.font,i=0;n.font=e;for(var a=0,o=t.length;a<o;a++)i=Math.max(i,n.measureText(t[a]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Q=a.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return $.modifiers}}),J=Q.extend({_class:"KeyEvent",initialize:function(e,t,n,r){this.type=e,this.event=t,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),$=new function(){var e,n,o={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},s={tab:"\t",space:" ",enter:"\r"},u={},c={},l=new a({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=ce&&ce.agent;return e&&e.mac?this.meta:this.control}}});function h(e){var n=e.key||e.keyIdentifier;return n=/^U\+/.test(n)?String.fromCharCode(parseInt(n.substr(2),16)):/^Arrow[A-Z]/.test(n)?n.substr(5):"Unidentified"===n||n===t?String.fromCharCode(e.keyCode):n,o[n]||(n.length>1?a.hyphenate(n):n.toLowerCase())}function f(t,n,r,i){var o,s=K._focused;if(u[n]=t,t?c[n]=r:delete c[n],n.length>1&&(o=a.camelize(n))in l){l[o]=t;var h=ce&&ce.agent;if("meta"===o&&h&&h.mac)if(t)e={};else{for(var d in e)d in c&&f(!1,d,e[d],i);e=null}}else t&&e&&(e[n]=r);s&&s._handleKeyEvent(t?"keydown":"keyup",i,n,r)}return Z.add(i,{keydown:function(e){var t=h(e),r=ce&&ce.agent;t.length>1||r&&r.chrome&&(e.altKey||r.mac&&e.metaKey||!r.mac&&e.ctrlKey)?f(!0,t,s[t]||(t.length>1?"":t),e):n=t},keypress:function(e){if(n){var t=h(e),r=e.charCode,i=r>=32?String.fromCharCode(r):t.length>1?"":t;t!==n&&(t=i.toLowerCase()),f(!0,t,i,e),n=null}},keyup:function(e){var t=h(e);t in c&&f(!1,t,c[t],e)}}),Z.add(r,{blur:function(e){for(var t in c)f(!1,t,c[t],e)}}),{modifiers:l,isDown:function(e){return!!u[e]}}},ee=Q.extend({_class:"MouseEvent",initialize:function(e,t,n,r,i){this.type=e,this.event=t,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),te=Q.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ne=u.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){u.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){ce=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var i=r.move||r.drag,a=this.responds(e),o=this.minDistance,s=this.maxDistance,u=!1,c=this;function l(e,t){var a=n,o=i?c._point:c._downPoint||a;if(i){if(c._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=e||null!=t)){var s=a.subtract(o),u=s.getLength();if(u<(e||0))return!1;t&&(a=o.add(s.normalize(Math.min(u,t))))}c._moveCount++}return c._point=a,c._lastPoint=o||a,r.down&&(c._moveCount=-1,c._downPoint=a,c._downCount++),!0}function h(){a&&(u=c.emit(e,new te(c,e,t))||u)}if(r.down)l(),h();else if(r.up)l(null,s),h();else if(a)for(;l(o,s);)h();return u}}),re=a.extend(o,{_class:"Tween",statics:{easings:new a({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:2*(2-e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,i,a,o){this.object=t;var s=typeof a,u="function"===s;this.type=u?s:"string"===s?a:"linear",this.easing=u?a:e.easings[this.type],this.duration=i,this.running=!1,this._then=null,this._startTime=null;var c=n||r;this._keys=c?Object.keys(c):[],this._parsedKeys=this._parseKeys(this._keys),this._from=c&&this._getState(n),this._to=c&&this._getState(r),!1!==o&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(n){return"function"==typeof n?n(t,e):n},i=0,o=n&&n.length;i<o;i++){var s=n[i],u=r(this._from[s]),c=r(this._to[s]),l=u&&c&&u.__add&&c.__add?c.__subtract(u).__multiply(t).__add(u):(c-u)*t+u;this._setProperty(this._parsedKeys[s],l)}this.responds("update")&&this.emit("update",new a({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,i=t.length;r<i;r++){var a,o=t[r],s=this._parsedKeys[o],u=this._getProperty(s);if(e){var c=this._resolveValue(u,e[o]);this._setProperty(s,c),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,u)}else a=u&&u.clone?u.clone():u;n[o]=a}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&2===t.length){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}if("string"==typeof t){var r=t.match(/^[+\-*/]=(.*)/);if(r){var i=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],i)}}}return t},_calculate:function(e,t,n){return ce.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n],a=i.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[i]=a.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,i=e.length-(t||0);r<i&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),ie=function(t){var n=new e.XMLHttpRequest;return n.open((t.method||"get").toUpperCase(),t.url,a.pick(t.async,!0)),t.mimeType&&n.overrideMimeType(t.mimeType),n.onload=function(){var e=n.status;0===e||200===e?t.onLoad&&t.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var e=n.status,r='Could not load "'+t.url+'" (Status: '+e+")";if(!t.onError)throw new Error(r);t.onError(r,e)},n.send(null)},ae=a.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!r)return null;var a,o=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?a=this.canvases.pop():(a=i.createElement("canvas"),o=!1);var s=a.getContext("2d",n||{});if(!s)throw new Error("Canvas "+a+" is unable to provide a 2D context.");return a.width===e&&a.height===t?o&&s.clearRect(0,0,e+1,t+1):(a.width=e,a.height=t),s.save(),a},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},oe=new function(){var e,t,n,r,i,o,s,u,c,l,h,f=Math.min,d=Math.max,p=Math.abs;function g(e,t,n){return.2989*e+.587*t+.114*n}function v(e,t,n,r){var i=r-g(e,t,n),a=(r=g(c=e+i,l=t+i,h=n+i),f(c,l,h)),o=d(c,l,h);if(a<0){var s=r-a;c=r+(c-r)*r/s,l=r+(l-r)*r/s,h=r+(h-r)*r/s}if(o>255){var u=255-r,p=o-r;c=r+(c-r)*u/p,l=r+(l-r)*u/p,h=r+(h-r)*u/p}}function m(e,t,n){return d(e,t,n)-f(e,t,n)}function y(e,t,n,r){var i,a=[e,t,n],o=d(e,t,n),s=f(e,t,n);i=0===f(s=s===e?0:s===t?1:2,o=o===e?0:o===t?1:2)?1===d(s,o)?2:1:0,a[o]>a[s]?(a[i]=(a[i]-a[s])*r/(a[o]-a[s]),a[o]=r):a[i]=a[o]=0,a[s]=0,c=a[0],l=a[1],h=a[2]}var _={multiply:function(){c=i*e/255,l=o*t/255,h=s*n/255},screen:function(){c=i+e-i*e/255,l=o+t-o*t/255,h=s+n-s*n/255},overlay:function(){c=i<128?2*i*e/255:255-2*(255-i)*(255-e)/255,l=o<128?2*o*t/255:255-2*(255-o)*(255-t)/255,h=s<128?2*s*n/255:255-2*(255-s)*(255-n)/255},"soft-light":function(){var r=e*i/255;c=r+i*(255-(255-i)*(255-e)/255-r)/255,l=(r=t*o/255)+o*(255-(255-o)*(255-t)/255-r)/255,h=(r=n*s/255)+s*(255-(255-s)*(255-n)/255-r)/255},"hard-light":function(){c=e<128?2*e*i/255:255-2*(255-e)*(255-i)/255,l=t<128?2*t*o/255:255-2*(255-t)*(255-o)/255,h=n<128?2*n*s/255:255-2*(255-n)*(255-s)/255},"color-dodge":function(){c=0===i?0:255===e?255:f(255,255*i/(255-e)),l=0===o?0:255===t?255:f(255,255*o/(255-t)),h=0===s?0:255===n?255:f(255,255*s/(255-n))},"color-burn":function(){c=255===i?255:0===e?0:d(0,255-255*(255-i)/e),l=255===o?255:0===t?0:d(0,255-255*(255-o)/t),h=255===s?255:0===n?0:d(0,255-255*(255-s)/n)},darken:function(){c=i<e?i:e,l=o<t?o:t,h=s<n?s:n},lighten:function(){c=i>e?i:e,l=o>t?o:t,h=s>n?s:n},difference:function(){(c=i-e)<0&&(c=-c),(l=o-t)<0&&(l=-l),(h=s-n)<0&&(h=-h)},exclusion:function(){c=i+e*(255-i-i)/255,l=o+t*(255-o-o)/255,h=s+n*(255-s-s)/255},hue:function(){y(e,t,n,m(i,o,s)),v(c,l,h,g(i,o,s))},saturation:function(){y(i,o,s,m(e,t,n)),v(c,l,h,g(i,o,s))},luminosity:function(){v(i,o,s,g(e,t,n))},color:function(){v(e,t,n,g(i,o,s))},add:function(){c=f(i+e,255),l=f(o+t,255),h=f(s+n,255)},subtract:function(){c=d(i-e,0),l=d(o-t,0),h=d(s-n,0)},average:function(){c=(i+e)/2,l=(o+t)/2,h=(s+n)/2},negation:function(){c=255-p(255-e-i),l=255-p(255-t-o),h=255-p(255-n-s)}},b=this.nativeModes=a.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(e){this[e]=!0}),{}),x=ae.getContext(1,1,{willReadFrequently:!0});x&&(a.each(_,(function(e,t){var n="darken"===t,r=!1;x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=t,x.globalCompositeOperation===t&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),r=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}x.restore(),b[t]=r})),ae.release(x)),this.process=function(a,f,d,p,g){var v=f.canvas,m="normal"===a;if(m||b[a])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,m||(d.globalCompositeOperation=a),d.drawImage(v,g.x,g.y),d.restore();else{var y=_[a];if(!y)return;for(var x=d.getImageData(g.x,g.y,v.width,v.height),w=x.data,k=f.getImageData(0,0,v.width,v.height).data,S=0,C=w.length;S<C;S+=4){e=k[S],i=w[S],t=k[S+1],o=w[S+1],n=k[S+2],s=w[S+2],r=k[S+3],u=w[S+3],y();var M=r*p/255,A=1-M;w[S]=M*c+A*i,w[S+1]=M*l+A*o,w[S+2]=M*h+A*s,w[S+3]=r*p+A*u}d.putImageData(x,g.x,g.y)}}},se=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function a(e,t,n){for(var i in t){var a=t[i],o=r[i];"number"==typeof a&&n&&(a=n.number(a)),o?e.setAttributeNS(o,i,a):e.setAttribute(i,a)}return e}return{svg:e,xmlns:t,xlink:n,create:function(t,n,r){return a(i.createElementNS(e,t),n,r)},get:function(e,t){var n=r[t],i=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===i?null:i},set:a}},ue=a.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof N||e instanceof A||e instanceof U)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(e,t){var n=a.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&a.each(r,(function(e,t){this[e]=t}),{}),exportFilter:e[3],get:"get"+n,set:"set"+n}}),{});new function(){var t;function n(e,n,r){var i,o=new a,s=e.getTranslation();if(n&&(e.isInvertible()?(i=(e=e._shiftless())._inverseTransform(s),s=null):i=new g,o[r?"cx":"x"]=i.x,o[r?"cy":"y"]=i.y),!e.isIdentity()){var u=e.decompose();if(u){var c=[],l=u.rotation,h=u.scaling,f=u.skewing;s&&!s.isZero()&&c.push("translate("+t.point(s)+")"),l&&c.push("rotate("+t.number(l)+")"),(!d.isZero(h.x-1)||!d.isZero(h.y-1))&&c.push("scale("+t.point(h)+")"),f.x&&c.push("skewX("+t.number(f.x)+")"),f.y&&c.push("skewY("+t.number(f.y)+")"),o.transform=c.join(" ")}else o.transform="matrix("+e.getValues().join(",")+")"}return o}function r(e,r){for(var i=n(e._matrix),a=e._children,o=se.create("g",i,t),s=0,u=a.length;s<u;s++){var c=a[s],h=v(c,r);if(h)if(c.isClipMask()){var f=se.create("clipPath");f.appendChild(h),l(c,f,"clip"),se.set(o,{"clip-path":"url(#"+f.id+")"})}else o.appendChild(h)}return o}function i(e){var r=e._type,i=e._radius,a=n(e._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var o=e._size,s=o.width,u=o.height;a.x-=s/2,a.y-=u/2,a.width=s,a.height=u,i.isZero()&&(i=null)}return i&&("circle"===r?a.r=i:(a.rx=i.width,a.ry=i.height)),se.create(r,a,t)}var o,s={Group:r,Layer:r,Raster:function(e,r){var i=n(e._matrix,!0),a=e.getSize(),o=e.getImage();return i.x-=a.width/2,i.y-=a.height/2,i.width=a.width,i.height=a.height,i.href=0==r.embedImages&&o&&o.src||e.toDataURL(),se.create("image",i,t)},Path:function(e,r){var a=r.matchShapes;if(a){var o=e.toShape(!1);if(o)return i(o)}var s,u=e._segments,c=u.length,l=n(e._matrix);if(a&&c>=2&&!e.hasHandles())if(c>2){s=e._closed?"polygon":"polyline";for(var h=[],f=0;f<c;f++)h.push(t.point(u[f]._point));l.points=h.join(" ")}else{s="line";var d=u[0]._point,p=u[1]._point;l.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else s="path",l.d=e.getPathData(null,r.precision);return se.create(s,l,t)},Shape:i,CompoundPath:function(e,r){var i=n(e._matrix),a=e.getPathData(null,r.precision);return a&&(i.d=a),se.create("path",i,t)},SymbolItem:function(e,r){var i=n(e._matrix,!0),a=e._definition,o=c(a,"symbol"),s=a._item,u=s.getStrokeBounds();return o||((o=se.create("symbol",{viewBox:t.rectangle(u)})).appendChild(v(s,r)),l(a,o,"symbol")),i.href="#"+o.id,i.x+=u.x,i.y+=u.y,i.width=u.width,i.height=u.height,i.overflow="visible",se.create("use",i,t)},PointText:function(e){var r=se.create("text",n(e._matrix,!0),t);return r.textContent=e._content,r}};function u(e,n,r){var i={},o=!r&&e.getParent(),s=[];return null!=e._name&&(i.id=e._name),a.each(ue,(function(n){var r=n.get,u=n.type,h=e[r]();if(n.exportFilter?n.exportFilter(e,h):!o||!a.equals(o[r](),h)){if("color"===u&&null!=h){var f=h.getAlpha();f<1&&(i[n.attribute+"-opacity"]=f)}"style"===u?s.push(n.attribute+": "+h):i[n.attribute]=null==h?"none":"color"===u?h.gradient?function(e){var n=c(e,"color");if(!n){var r,i=e.getGradient(),a=i._radial,o=e.getOrigin(),s=e.getDestination();if(a){r={cx:o.x,cy:o.y,r:o.getDistance(s)};var u=e.getHighlight();u&&(r.fx=u.x,r.fy=u.y)}else r={x1:o.x,y1:o.y,x2:s.x,y2:s.y};r.gradientUnits="userSpaceOnUse",n=se.create((a?"radial":"linear")+"Gradient",r,t);for(var h=i._stops,f=0,d=h.length;f<d;f++){var p,g=h[f],v=g._color,m=v.getAlpha();r={offset:null!==(p=g._offset)&&void 0!==p?p:f/(d-1)},v&&(r["stop-color"]=v.toCSS(!0)),m<1&&(r["stop-opacity"]=m),n.appendChild(se.create("stop",r,t))}l(e,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===u?h.join(","):"lookup"===u?n.toSVG[h]:h}})),s.length&&(i.style=s.join(";")),1===i.opacity&&delete i.opacity,e._visible||(i.visibility="hidden"),se.set(n,i,t)}function c(e,t){return o||(o={ids:{},svgs:{}}),e&&o.svgs[t+"-"+(e._id||e.__id||(e.__id=p.get("svg")))]}function l(e,t,n){o||c();var r=o.ids[n]=(o.ids[n]||0)+1;t.id=n+"-"+r,o.svgs[n+"-"+(e._id||e.__id)]=t}function f(t,n){var r=t,i=null;if(o){for(var a in r="svg"===t.nodeName.toLowerCase()&&t,o.svgs)i||(r||(r=se.create("svg")).appendChild(t),i=r.insertBefore(se.create("defs"),r.firstChild)),i.appendChild(o.svgs[a]);o=null}return n.asString?(new e.XMLSerializer).serializeToString(r):r}function v(e,t,n){var r=s[e._class],i=r&&r(e,t);if(i){var a=t.onExport;a&&(i=a(e,i,t)||i);var o=JSON.stringify(e._data);o&&"{}"!==o&&"null"!==o&&i.setAttribute("data-paper-data",o)}return i&&u(e,i,n)}function m(e){return e||(e={}),t=new h(e.precision),e}S.inject({exportSVG:function(e){return f(v(this,e=m(e),!0),e)}}),k.inject({exportSVG:function(e){e=m(e);var r=this._children,i=this.getView(),o=a.pick(e.bounds,"view"),s=e.matrix||"view"===o&&i._matrix,u=s&&x.read([s]),c="view"===o?new _([0,0],i.getViewSize()):"content"===o?S._getBounds(r,u,{stroke:!0}).rect:_.read([o],0,{readNull:!0}),l={version:"1.1",xmlns:se.svg,"xmlns:xlink":se.xlink};c&&(l.width=c.width,l.height=c.height,(c.x||0===c.x||c.y||0===c.y)&&(l.viewBox=t.rectangle(c)));var h=se.create("svg",l,t),d=h;u&&!u.isIdentity()&&(d=h.appendChild(se.create("g",n(u),t)));for(var p=0,g=r.length;p<g;p++)d.appendChild(v(r[p],e,!0));return f(h,e)}})},new function(){var n,o={};function s(e,t,r,i,a,o){var s=se.get(e,t)||o,u=null==s?i?null:r?"":0:r?s:parseFloat(s);return/%\s*$/.test(s)?u/100*(a?1:n[/x|^width/.test(t)?"width":"height"]):u}function u(e,t,n,r,i,a,o){return t=s(e,t||"x",!1,r,i,a),n=s(e,n||"y",!1,r,i,o),!r||null!=t&&null!=n?new g(t,n):null}function c(e,t,n,r,i){return t=s(e,t||"width",!1,r,i),n=s(e,n||"height",!1,r,i),!r||null!=t&&null!=n?new m(t,n):null}function l(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?T(e)||e:"lookup"===t?n[e]:e}function h(e,t,n,r){var i=e.childNodes,a="clippath"===t,o="defs"===t,s=new C,u=s._project,c=u._currentStyle,l=[];if(!a&&!o&&(s=M(s,e,r),u._currentStyle=s._style.clone()),r)for(var h=e.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)L(h[f],n,!1);for(f=0,d=i.length;f<d;f++){var p,g=i[f];1===g.nodeType&&!/^defs$/i.test(g.nodeName)&&(p=L(g,n,!1))&&!(p instanceof I)&&l.push(p)}return s.addChildren(l),a&&(s=M(s.reduce(),e,r)),u._currentStyle=c,(a||o)&&(s.remove(),s=null),s}function f(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,a=n.length;i<a;i+=2)r.push(new g(parseFloat(n[i]),parseFloat(n[i+1])));var o=new R(r);return"polygon"===t&&o.closePath(),o}function d(e,t){var n,r=(s(e,"href",!0)||"").substring(1),i="radialgradient"===t;if(r)(n=o[r].getGradient())._radial^i&&((n=n.clone())._radial=i);else{for(var a=e.childNodes,c=[],l=0,h=a.length;l<h;l++){var f=a[l];1===f.nodeType&&c.push(M(new Y,f))}n=new G(c,i)}var d,p,g,v="userSpaceOnUse"!==s(e,"gradientUnits",!0);return i?(p=(d=u(e,"cx","cy",!1,v,"50%","50%")).add(s(e,"r",!1,!1,v,"50%"),0),g=u(e,"fx","fy",!0,v)):(d=u(e,"x1","y1",!1,v,"0%","0%"),p=u(e,"x2","y2",!1,v,"100%","0%")),M(new H(n,d,p,g),e)._scaleToBounds=v,null}var p={"#document":function(e,t,n,r){for(var i=e.childNodes,a=0,o=i.length;a<o;a++){var s=i[a];if(1===s.nodeType)return L(s,n,r)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(e){return N.create(e.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(e){var t=new E(s(e,"href",!0));return t.on("load",(function(){var t=c(e);this.setSize(t);var n=u(e).add(t.divide(2));this._matrix.append((new x).translate(n))})),t},symbol:function(e,t,n,r){return new I(h(e,t,n,r),!0)},defs:h,use:function(e){var t=(s(e,"href",!0)||"").substring(1),n=o[t],r=u(e);return n?n instanceof I?n.place(r):n.clone().translate(r):null},circle:function(e){return new A.Circle(u(e,"cx","cy"),s(e,"r"))},ellipse:function(e){return new A.Ellipse({center:u(e,"cx","cy"),radius:c(e,"rx","ry")})},rect:function(e){return new A.Rectangle(new _(u(e),c(e)),c(e,"rx","ry"))},line:function(e){return new R.Line(u(e,"x1","y1"),u(e,"x2","y2"))},text:function(e){var t=new V(u(e).add(u(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),t},switch:h};function v(e,t,n,r){if(e.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),a=new x,o=0,s=i.length;o<s;o++){var u=i[o];if(!u)break;for(var c=u.split(/\(\s*/),l=c[0],h=c[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(l){case"matrix":a.append(new x(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":a.translate(h[0],h[1]||0);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}e.transform(a)}}function y(e,t,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=e[r]&&e[r]();i&&i.setAlpha(parseFloat(t))}var b=a.set(a.each(ue,(function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](l(n,e.type,e.fromSVG)),"color"===e.type)){var r=t[e.get]();if(r&&r._scaleToBounds){var i=t.getBounds();r.transform((new x).translate(i.getPoint()).scale(i.getSize()))}}}}),{}),{id:function(e,t){o[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){var n=T(t);if(n){if((n=n.clone()).setClipMask(!0),!(e instanceof C))return new C(n,e);e.insertChild(0,n)}},gradientTransform:v,transform:v,"fill-opacity":y,"stroke-opacity":y,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,n,r,i){var a,o=new _(l(t,"array")),s=c(r,null,null,!0);if(e instanceof C){var u=s?s.divide(o.getSize()):1,h=(new x).scale(u).translate(o.getPoint().negate());a=e}else e instanceof I&&(s&&o.setSize(s),a=e._item);if(a){if("visible"!==w(r,"overflow",i)){var f=new A.Rectangle(o);f.setClipMask(!0),a.addChild(f)}h&&a.transform(h)}}});function w(e,n,r){var i=e.attributes[n],o=i&&i.value;if(!o&&e.style){var s=a.camelize(n);!(o=e.style[s])&&r.node[s]!==r.parent[s]&&(o=r.node[s])}return o?"none"===o?null:o:t}function M(e,n,r){var i=n.parentNode,o={node:q.getStyles(n)||{},parent:!r&&!/^defs$/i.test(i.tagName)&&q.getStyles(i)||{}};return a.each(b,(function(r,i){var a=w(n,i,o);e=a!==t&&r(e,a,i,n,o)||e})),e}function T(e){var t=e&&e.match(/\((?:["'#]*)([^"')]+)/),n=t&&t[1],i=n&&o[r?n.replace(r.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function L(e,t,r){var s,u,l,h=e.nodeName.toLowerCase(),f="#document"!==h,d=i.body;r&&f&&(n=ce.getView().getSize(),n=c(e,null,null,!0)||n,s=se.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),u=e.parentNode,l=e.nextSibling,s.appendChild(e),d.appendChild(s));var g=ce.settings,v=g.applyMatrix,m=g.insertItems;g.applyMatrix=!1,g.insertItems=!1;var y=p[h],_=y&&y(e,h,t,r)||null;if(g.insertItems=m,g.applyMatrix=v,_){f&&!(_ instanceof C)&&(_=M(_,e,r));var b=t.onImport,x=f&&e.getAttribute("data-paper-data");b&&(_=b(e,_,t)||_),t.expandShapes&&_ instanceof A&&(_.remove(),_=_.toPath()),x&&(_._data=JSON.parse(x))}return s&&(d.removeChild(s),u&&(l?u.insertBefore(e,l):u.appendChild(e))),r&&(o={},_&&a.pick(t.applyMatrix,v)&&_.matrix.apply(!0,!0)),_}function O(n,r,a){if(!n)return null;r="function"==typeof r?{onLoad:r}:r||{};var o=ce,s=null;function u(i){try{var u="object"==typeof i?i:(new e.DOMParser).parseFromString(i.trim(),"image/svg+xml");if(!u.nodeName)throw u=null,new Error("Unsupported SVG source: "+n);ce=o,s=L(u,r,!0),(!r||!1!==r.insert)&&a._insertItem(t,s);var l=r.onLoad;l&&l(s,i)}catch(h){c(h)}}function c(e,t){var n=r.onError;if(!n)throw new Error(e);n(e,t)}if("string"!=typeof n||/^[\s\S]*</.test(n)){if(typeof File<"u"&&n instanceof File){var l=new FileReader;return l.onload=function(){u(l.result)},l.onerror=function(){c(l.error)},l.readAsText(n)}u(n)}else{var h=i.getElementById(n);h?u(h):ie({url:n,async:!0,onLoad:u,onError:c})}return s}S.inject({importSVG:function(e,t){return O(e,t,this)}}),k.inject({importSVG:function(e,t){return this.activate(),O(e,t,this)}})},a.exports.PaperScript=function(){var o,u,c,l,h=this,f=h.acorn;if(!f)try{f=n(3840)}catch(C){}function d(e,t){return(h.acorn||f).parse(e,t)}f||(f=o=u={},c=this,l=function(e){var t,n,r,i;e.version="0.5.0",e.parse=function(e,i){return n=String(e),r=n.length,o(i),We(),function(e){m=y=s,t.locations&&(_=new Ye),b=w=null,x=[],Je();var n=e||lt(),r=!0;for(e||(n.body=[]);f!==I;){var i=wt();n.body.push(i),r&&dt(i)&&st(!0),r=!1}return ft(n,"Program")}(t.program)};var a=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function o(e){for(var n in t=e||{},a)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=a[n]);i=t.sourceFile||null}var s,u,c,l,h,f,d,p,g,v,m,y,_,b,x,w,k=e.getLineInfo=function(e,t){for(var n=1,r=0;;){Ve.lastIndex=r;var i=Ve.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}};function S(e,t){var r=k(n,e);t+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=r,i.raisedAt=s,i}e.tokenize=function(e,i){n=String(e),r=n.length,o(i),We();var a={};function m(e){return y=c,Je(e),a.start=u,a.end=c,a.startLoc=l,a.endLoc=h,a.type=f,a.value=d,a}return m.jumpTo=function(e,r){if(s=e,t.locations){g=1,v=Ve.lastIndex=0;for(var i;(i=Ve.exec(n))&&i.index<e;)++g,v=i.index+i[0].length}p=r,Xe()},m};var C=[],M={type:"num"},A={type:"regexp"},E={type:"string"},T={type:"name"},I={type:"eof"},L={keyword:"break"},O={keyword:"case",beforeExpr:!0},P={keyword:"catch"},D={keyword:"continue"},B={keyword:"debugger"},N={keyword:"default"},R={keyword:"do",isLoop:!0},j={keyword:"else",beforeExpr:!0},z={keyword:"finally"},F={keyword:"for",isLoop:!0},U={keyword:"function"},V={keyword:"if"},H={keyword:"return",beforeExpr:!0},G={keyword:"switch"},Y={keyword:"throw",beforeExpr:!0},W={keyword:"try"},q={keyword:"var"},Z={keyword:"while",isLoop:!0},K={keyword:"with"},X={keyword:"new",beforeExpr:!0},Q={keyword:"this"},J={keyword:"null",atomValue:null},$={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},ne={break:L,case:O,catch:P,continue:D,debugger:B,default:N,do:R,else:j,finally:z,for:F,function:U,if:V,return:H,switch:G,throw:Y,try:W,var:q,while:Z,with:K,null:J,true:$,false:ee,new:X,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Q,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},re={type:"[",beforeExpr:!0},ie={type:"]"},ae={type:"{",beforeExpr:!0},oe={type:"}"},se={type:"(",beforeExpr:!0},ue={type:")"},ce={type:",",beforeExpr:!0},le={type:";",beforeExpr:!0},he={type:":",beforeExpr:!0},fe={type:"."},de={type:"?",beforeExpr:!0},pe={binop:10,beforeExpr:!0},ge={isAssign:!0,beforeExpr:!0},ve={isAssign:!0,beforeExpr:!0},me={postfix:!0,prefix:!0,isUpdate:!0},ye={prefix:!0,beforeExpr:!0},_e={binop:1,beforeExpr:!0},be={binop:2,beforeExpr:!0},xe={binop:3,beforeExpr:!0},we={binop:4,beforeExpr:!0},ke={binop:5,beforeExpr:!0},Se={binop:6,beforeExpr:!0},Ce={binop:7,beforeExpr:!0},Me={binop:8,beforeExpr:!0},Ae={binop:9,prefix:!0,beforeExpr:!0},Ee={binop:10,beforeExpr:!0};for(var Te in e.tokTypes={bracketL:re,bracketR:ie,braceL:ae,braceR:oe,parenL:se,parenR:ue,comma:ce,semi:le,colon:he,dot:fe,question:de,slash:pe,eq:ge,name:T,eof:I,num:M,regexp:A,string:E},ne)e.tokTypes["_"+Te]=ne[Te];function Ie(e){e=e.split(" ");var t="",n=[];e:for(var r=0;r<e.length;++r){for(var i=0;i<n.length;++i)if(n[i][0].length==e[r].length){n[i].push(e[r]);continue e}n.push([e[r]])}function a(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort((function(e,t){return t.length-e.length})),t+="switch(str.length){",r=0;r<n.length;++r){var o=n[r];t+="case "+o[0].length+":",a(o)}t+="}"}else a(e);return new Function("str",t)}var Le,Oe=Ie("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Pe=Ie("class enum extends super const export import"),De=Ie("implements interface let package private protected public static yield"),Be=Ie("eval arguments"),Ne=Ie("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Re=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,je="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",ze=new RegExp("["+je+"]"),Fe=new RegExp("["+je+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Ue=/[\n\r\u2028\u2029]/,Ve=/\r\n|[\n\r\u2028\u2029]/g,He=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&ze.test(String.fromCharCode(e)))},Ge=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&Fe.test(String.fromCharCode(e))))};function Ye(){this.line=g,this.column=s-v}function We(){g=1,s=v=0,p=!0,Xe()}function qe(e,n){c=s,t.locations&&(h=new Ye),f=e,Xe(),d=n,p=e.beforeExpr}function Ze(){var e=t.onComment&&t.locations&&new Ye,r=s,i=n.indexOf("*/",s+=2);if(-1===i&&S(s-2,"Unterminated comment"),s=i+2,t.locations){Ve.lastIndex=r;for(var a;(a=Ve.exec(n))&&a.index<s;)++g,v=a.index+a[0].length}t.onComment&&t.onComment(!0,n.slice(r+2,i),r,s,e,t.locations&&new Ye)}function Ke(){for(var e=s,i=t.onComment&&t.locations&&new Ye,a=n.charCodeAt(s+=2);s<r&&10!==a&&13!==a&&8232!==a&&8233!==a;)++s,a=n.charCodeAt(s);t.onComment&&t.onComment(!1,n.slice(e+2,s),e,s,i,t.locations&&new Ye)}function Xe(){for(;s<r;){var e=n.charCodeAt(s);if(32===e)++s;else if(13===e)++s,10===(i=n.charCodeAt(s))&&++s,t.locations&&(++g,v=s);else if(10===e||8232===e||8233===e)++s,t.locations&&(++g,v=s);else if(e>8&&e<14)++s;else if(47===e){var i;if(42===(i=n.charCodeAt(s+1)))Ze();else{if(47!==i)break;Ke()}}else if(160===e)++s;else{if(!(e>=5760&&Re.test(String.fromCharCode(e))))break;++s}}}function Qe(e){switch(e){case 46:return function(){var e=n.charCodeAt(s+1);return e>=48&&e<=57?nt(!0):(++s,qe(fe))}();case 40:return++s,qe(se);case 41:return++s,qe(ue);case 59:return++s,qe(le);case 44:return++s,qe(ce);case 91:return++s,qe(re);case 93:return++s,qe(ie);case 123:return++s,qe(ae);case 125:return++s,qe(oe);case 58:return++s,qe(he);case 63:return++s,qe(de);case 48:var i=n.charCodeAt(s+1);if(120===i||88===i)return function(){s+=2;var e=tt(16);return null==e&&S(u+2,"Expected hexadecimal number"),He(n.charCodeAt(s))&&S(s,"Identifier directly after number"),qe(M,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return nt(!1);case 34:case 39:return function(e){s++;for(var i="";;){s>=r&&S(u,"Unterminated string constant");var a=n.charCodeAt(s);if(a===e)return++s,qe(E,i);if(92===a){a=n.charCodeAt(++s);var o=/^[0-7]+/.exec(n.slice(s,s+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++s,o)w&&S(s-2,"Octal literal in strict mode"),i+=String.fromCharCode(parseInt(o,8)),s+=o.length-1;else switch(a){case 110:i+="\n";break;case 114:i+="\r";break;case 120:i+=String.fromCharCode(rt(2));break;case 117:i+=String.fromCharCode(rt(4));break;case 85:i+=String.fromCharCode(rt(8));break;case 116:i+="\t";break;case 98:i+="\b";break;case 118:i+="\v";break;case 102:i+="\f";break;case 48:i+="\0";break;case 13:10===n.charCodeAt(s)&&++s;case 10:t.locations&&(v=s,++g);break;default:i+=String.fromCharCode(a)}}else(13===a||10===a||8232===a||8233===a)&&S(u,"Unterminated string constant"),i+=String.fromCharCode(a),++s}}(e);case 47:return function(){var e=n.charCodeAt(s+1);return p?(++s,et()):61===e?$e(ve,2):$e(pe,1)}();case 37:case 42:return 61===n.charCodeAt(s+1)?$e(ve,2):$e(Ee,1);case 124:case 38:return function(e){var t=n.charCodeAt(s+1);return t===e?$e(124===e?_e:be,2):61===t?$e(ve,2):$e(124===e?xe:ke,1)}(e);case 94:return 61===n.charCodeAt(s+1)?$e(ve,2):$e(we,1);case 43:case 45:return function(e){var t=n.charCodeAt(s+1);return t===e?45==t&&62==n.charCodeAt(s+2)&&Ue.test(n.slice(y,s))?(s+=3,Ke(),Xe(),Je()):$e(me,2):61===t?$e(ve,2):$e(Ae,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(s+1),r=1;return t===e?(r=62===e&&62===n.charCodeAt(s+2)?3:2,61===n.charCodeAt(s+r)?$e(ve,r+1):$e(Me,r)):33==t&&60==e&&45==n.charCodeAt(s+2)&&45==n.charCodeAt(s+3)?(s+=4,Ke(),Xe(),Je()):(61===t&&(r=61===n.charCodeAt(s+2)?3:2),$e(Ce,r))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(s+1)?$e(Se,61===n.charCodeAt(s+2)?3:2):$e(61===e?ge:ye,1)}(e);case 126:return $e(ye,1)}return!1}function Je(e){if(e?s=u+1:u=s,t.locations&&(l=new Ye),e)return et();if(s>=r)return qe(I);var i=n.charCodeAt(s);if(He(i)||92===i)return at();var a=Qe(i);if(!1===a){var o=String.fromCharCode(i);if("\\"===o||ze.test(o))return at();S(s,"Unexpected character '"+o+"'")}return a}function $e(e,t){var r=n.slice(s,s+t);s+=t,qe(e,r)}function et(){for(var e,t,i=s;;){s>=r&&S(i,"Unterminated regular expression");var a=n.charAt(s);if(Ue.test(a)&&S(i,"Unterminated regular expression"),e)e=!1;else{if("["===a)t=!0;else if("]"===a&&t)t=!1;else if("/"===a&&!t)break;e="\\"===a}++s}var o=n.slice(i,s);++s;var u=it();u&&!/^[gmsiy]*$/.test(u)&&S(i,"Invalid regexp flag");try{var c=new RegExp(o,u)}catch(l){l instanceof SyntaxError&&S(i,l.message),S(l)}return qe(A,c)}function tt(e,t){for(var r=s,i=0,a=0,o=null!==t&&void 0!==t?t:1/0;a<o;++a){var u,c=n.charCodeAt(s);if((u=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=e)break;++s,i=i*e+u}return s===r||null!=t&&s-r!==t?null:i}function nt(e){var t=s,r=!1,i=48===n.charCodeAt(s);!e&&null===tt(10)&&S(t,"Invalid number"),46===n.charCodeAt(s)&&(++s,tt(10),r=!0);var a=n.charCodeAt(s);(69===a||101===a)&&((43===(a=n.charCodeAt(++s))||45===a)&&++s,null===tt(10)&&S(t,"Invalid number"),r=!0),He(n.charCodeAt(s))&&S(s,"Identifier directly after number");var o,u=n.slice(t,s);return r?o=parseFloat(u):i&&1!==u.length?/[89]/.test(u)||w?S(t,"Invalid number"):o=parseInt(u,8):o=parseInt(u,10),qe(M,o)}function rt(e){var t=tt(16,e);return null===t&&S(u,"Bad character escape sequence"),t}function it(){Le=!1;for(var e,t=!0,r=s;;){var i=n.charCodeAt(s);if(Ge(i))Le&&(e+=n.charAt(s)),++s;else{if(92!==i)break;Le||(e=n.slice(r,s)),Le=!0,117!=n.charCodeAt(++s)&&S(s,"Expecting Unicode escape sequence \\uXXXX"),++s;var a=rt(4),o=String.fromCharCode(a);o||S(s-1,"Invalid Unicode escape"),(t?He(a):Ge(a))||S(s-4,"Invalid Unicode escape"),e+=o}t=!1}return Le?e:n.slice(r,s)}function at(){var e=it(),t=T;return!Le&&Ne(e)&&(t=ne[e]),qe(t,e)}function ot(){m=u,y=c,_=h,Je()}function st(e){if(w=e,s=u,t.locations)for(;s<v;)v=n.lastIndexOf("\n",v-2)+1,--g;Xe(),Je()}function ut(){this.type=null,this.start=u,this.end=null}function ct(){this.start=l,this.end=null,null!==i&&(this.source=i)}function lt(){var e=new ut;return t.locations&&(e.loc=new ct),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[u,0]),e}function ht(e){var n=new ut;return n.start=e.start,t.locations&&(n.loc=new ct,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function ft(e,n){return e.type=n,e.end=y,t.locations&&(e.loc.end=_),t.ranges&&(e.range[1]=y),e}function dt(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function pt(e){if(f===e)return ot(),!0}function gt(){return!t.strictSemicolons&&(f===I||f===oe||Ue.test(n.slice(y,u)))}function vt(){!pt(le)&&!gt()&&yt()}function mt(e){f===e?ot():yt()}function yt(){S(u,"Unexpected token")}function _t(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&S(e.start,"Assigning to rvalue"),w&&"Identifier"===e.type&&Be(e.name)&&S(e.start,"Assigning to "+e.name+" in strict mode")}var bt={kind:"loop"},xt={kind:"switch"};function wt(){(f===pe||f===ve&&"/="==d)&&Je(!0);var e=f,r=lt();switch(e){case L:case D:ot();var i=e===L;pt(le)||gt()?r.label=null:f!==T?yt():(r.label=Rt(),vt());for(var a=0;a<x.length;++a){var o=x[a];if((null==r.label||o.name===r.label.name)&&(null!=o.kind&&(i||"loop"===o.kind)||r.label&&i))break}return a===x.length&&S(r.start,"Unsyntactic "+e.keyword),ft(r,i?"BreakStatement":"ContinueStatement");case B:return ot(),vt(),ft(r,"DebuggerStatement");case R:return ot(),x.push(bt),r.body=wt(),x.pop(),mt(Z),r.test=kt(),vt(),ft(r,"DoWhileStatement");case F:if(ot(),x.push(bt),mt(se),f===le)return Ct(r,null);if(f===q){var s=lt();return ot(),At(s,!0),ft(s,"VariableDeclaration"),1===s.declarations.length&&pt(te)?Mt(r,s):Ct(r,s)}return s=Et(!1,!0),pt(te)?(_t(s),Mt(r,s)):Ct(r,s);case U:return ot(),Bt(r,!0);case V:return ot(),r.test=kt(),r.consequent=wt(),r.alternate=pt(j)?wt():null,ft(r,"IfStatement");case H:return!b&&!t.allowReturnOutsideFunction&&S(u,"'return' outside of function"),ot(),pt(le)||gt()?r.argument=null:(r.argument=Et(),vt()),ft(r,"ReturnStatement");case G:ot(),r.discriminant=kt(),r.cases=[],mt(ae),x.push(xt);for(var c,l;f!=oe;)if(f===O||f===N){var h=f===O;c&&ft(c,"SwitchCase"),r.cases.push(c=lt()),c.consequent=[],ot(),h?c.test=Et():(l&&S(m,"Multiple default clauses"),l=!0,c.test=null),mt(he)}else c||yt(),c.consequent.push(wt());return c&&ft(c,"SwitchCase"),ot(),x.pop(),ft(r,"SwitchStatement");case Y:return ot(),Ue.test(n.slice(y,u))&&S(y,"Illegal newline after throw"),r.argument=Et(),vt(),ft(r,"ThrowStatement");case W:if(ot(),r.block=St(),r.handler=null,f===P){var p=lt();ot(),mt(se),p.param=Rt(),w&&Be(p.param.name)&&S(p.param.start,"Binding "+p.param.name+" in strict mode"),mt(ue),p.guard=null,p.body=St(),r.handler=ft(p,"CatchClause")}return r.guardedHandlers=C,r.finalizer=pt(z)?St():null,!r.handler&&!r.finalizer&&S(r.start,"Missing catch or finally clause"),ft(r,"TryStatement");case q:return ot(),At(r),vt(),ft(r,"VariableDeclaration");case Z:return ot(),r.test=kt(),x.push(bt),r.body=wt(),x.pop(),ft(r,"WhileStatement");case K:return w&&S(u,"'with' in strict mode"),ot(),r.object=kt(),r.body=wt(),ft(r,"WithStatement");case ae:return St();case le:return ot(),ft(r,"EmptyStatement");default:var g=d,v=Et();if(e===T&&"Identifier"===v.type&&pt(he)){for(a=0;a<x.length;++a)x[a].name===g&&S(v.start,"Label '"+g+"' is already declared");var _=f.isLoop?"loop":f===G?"switch":null;return x.push({name:g,kind:_}),r.body=wt(),x.pop(),r.label=v,ft(r,"LabeledStatement")}return r.expression=v,vt(),ft(r,"ExpressionStatement")}}function kt(){mt(se);var e=Et();return mt(ue),e}function St(e){var t,n=lt(),r=!0,i=!1;for(n.body=[],mt(ae);!pt(oe);){var a=wt();n.body.push(a),r&&e&&dt(a)&&(t=i,st(i=!0)),r=!1}return i&&!t&&st(!1),ft(n,"BlockStatement")}function Ct(e,t){return e.init=t,mt(le),e.test=f===le?null:Et(),mt(le),e.update=f===ue?null:Et(),mt(ue),e.body=wt(),x.pop(),ft(e,"ForStatement")}function Mt(e,t){return e.left=t,e.right=Et(),mt(ue),e.body=wt(),x.pop(),ft(e,"ForInStatement")}function At(e,t){for(e.declarations=[],e.kind="var";;){var n=lt();if(n.id=Rt(),w&&Be(n.id.name)&&S(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=pt(ge)?Et(!0,t):null,e.declarations.push(ft(n,"VariableDeclarator")),!pt(ce))break}return e}function Et(e,t){var n=Tt(t);if(!e&&f===ce){var r=ht(n);for(r.expressions=[n];pt(ce);)r.expressions.push(Tt(t));return ft(r,"SequenceExpression")}return n}function Tt(e){var t=function(e){var t=function(e){return It(Lt(),-1,e)}(e);if(pt(de)){var n=ht(t);return n.test=t,n.consequent=Et(!0),mt(he),n.alternate=Et(!0,e),ft(n,"ConditionalExpression")}return t}(e);if(f.isAssign){var n=ht(t);return n.operator=d,n.left=t,ot(),n.right=Tt(e),_t(t),ft(n,"AssignmentExpression")}return t}function It(e,t,n){var r=f.binop;if(null!=r&&(!n||f!==te)&&r>t){var i=ht(e);i.left=e,i.operator=d;var a=f;return ot(),i.right=It(Lt(),r,n),It(ft(i,a===_e||a===be?"LogicalExpression":"BinaryExpression"),t,n)}return e}function Lt(){if(f.prefix){var e=lt(),t=f.isUpdate;return e.operator=d,e.prefix=!0,p=!0,ot(),e.argument=Lt(),t?_t(e.argument):w&&"delete"===e.operator&&"Identifier"===e.argument.type&&S(e.start,"Deleting local variable in strict mode"),ft(e,t?"UpdateExpression":"UnaryExpression")}for(var n=Ot(Pt());f.postfix&&!gt();)(e=ht(n)).operator=d,e.prefix=!1,e.argument=n,_t(n),ot(),n=ft(e,"UpdateExpression");return n}function Ot(e,t){var n;return pt(fe)?((n=ht(e)).object=e,n.property=Rt(!0),n.computed=!1,Ot(ft(n,"MemberExpression"),t)):pt(re)?((n=ht(e)).object=e,n.property=Et(),n.computed=!0,mt(ie),Ot(ft(n,"MemberExpression"),t)):!t&&pt(se)?((n=ht(e)).callee=e,n.arguments=Nt(ue,!1),Ot(ft(n,"CallExpression"),t)):e}function Pt(){switch(f){case Q:var e=lt();return ot(),ft(e,"ThisExpression");case T:return Rt();case M:case E:case A:return(e=lt()).value=d,e.raw=n.slice(u,c),ot(),ft(e,"Literal");case J:case $:case ee:return(e=lt()).value=f.atomValue,e.raw=f.keyword,ot(),ft(e,"Literal");case se:var r=l,i=u;ot();var a=Et();return a.start=i,a.end=c,t.locations&&(a.loc.start=r,a.loc.end=h),t.ranges&&(a.range=[i,c]),mt(ue),a;case re:return e=lt(),ot(),e.elements=Nt(ie,!0,!0),ft(e,"ArrayExpression");case ae:return function(){var e=lt(),n=!0,r=!1;for(e.properties=[],ot();!pt(oe);){if(n)n=!1;else if(mt(ce),t.allowTrailingCommas&&pt(oe))break;var i,a={key:Dt()},o=!1;if(pt(he)?(a.value=Et(!0),i=a.kind="init"):t.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(o=r=!0,i=a.kind=a.key.name,a.key=Dt(),f!==se&&yt(),a.value=Bt(lt(),!1)):yt(),"Identifier"===a.key.type&&(w||r))for(var s=0;s<e.properties.length;++s){var u=e.properties[s];if(u.key.name===a.key.name){var c=i==u.kind||o&&"init"===u.kind||"init"===i&&("get"===u.kind||"set"===u.kind);c&&!w&&"init"===i&&"init"===u.kind&&(c=!1),c&&S(a.key.start,"Redefinition of property")}}e.properties.push(a)}return ft(e,"ObjectExpression")}();case U:return e=lt(),ot(),Bt(e,!1);case X:return function(){var e=lt();return ot(),e.callee=Ot(Pt(),!0),pt(se)?e.arguments=Nt(ue,!1):e.arguments=C,ft(e,"NewExpression")}();default:yt()}}function Dt(){return f===M||f===E?Pt():Rt(!0)}function Bt(e,t){f===T?e.id=Rt():t?yt():e.id=null,e.params=[];var n=!0;for(mt(se);!pt(ue);)n?n=!1:mt(ce),e.params.push(Rt());var r=b,i=x;if(b=!0,x=[],e.body=St(!0),b=r,x=i,w||e.body.body.length&&dt(e.body.body[0]))for(var a=e.id?-1:0;a<e.params.length;++a){var o=a<0?e.id:e.params[a];if((De(o.name)||Be(o.name))&&S(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var s=0;s<a;++s)o.name===e.params[s].name&&S(o.start,"Argument name clash in strict mode")}return ft(e,t?"FunctionDeclaration":"FunctionExpression")}function Nt(e,n,r){for(var i=[],a=!0;!pt(e);){if(a)a=!1;else if(mt(ce),n&&t.allowTrailingCommas&&pt(e))break;r&&f===ce?i.push(null):i.push(Et(!0))}return i}function Rt(e){var r=lt();return e&&"everywhere"==t.forbidReserved&&(e=!1),f===T?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Oe:Pe)(d)||w&&De(d))&&-1==n.slice(u,c).indexOf("\\")&&S(u,"The keyword '"+d+"' is reserved"),r.name=d):e&&f.keyword?r.name=f.keyword:yt(),p=!1,ot(),ft(r,"Identifier")}},"object"==typeof o&&"object"==typeof u?l(o):"function"==typeof t&&t.amd?t(["exports"],l):l(c.acorn||(c.acorn={})),f.version||(f=null));var p={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},v={"-":"__negate","+":"__self"},y=a.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(e){this["__"+e]="#"+e}),{__self:function(){return this}});function _(e,t,n){var r=p[t];if(e&&e[r]){var i=e[r](n);return"!="===t?!i:i}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function b(e,t){var n=v[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function x(t,n){if(!t)return"";var a=[];function o(e){for(var t=0,n=a.length;t<n;t++){var r=a[t];if(r[0]>=e)break;e+=r[1]}return e}function s(e){return t.substring(o(e.range[0]),o(e.range[1]))}function u(e,n){for(var r=o(e.range[0]),i=o(e.range[1]),s=0,u=a.length-1;u>=0;u--)if(r>a[u][0]){s=u+1;break}a.splice(s,0,[r,n.length-i+r]),t=t.substring(0,r)+n+t.substring(i)}function c(e,n){switch(e.type){case"UnaryExpression":if(e.operator in v&&"Literal"!==e.argument.type){var r=s(e.argument);u(e,'$__("'+e.operator+'", '+r+")")}break;case"BinaryExpression":if(e.operator in p&&"Literal"!==e.left.type){var i=s(e.left),a=s(e.right),c=function(e,n){return t.substring(o(e.range[1]),o(n.range[0]))}(e.left,e.right),l=e.operator;u(e,"__$__("+i+","+c.replace(new RegExp("\\"+l),'"'+l+'"')+", "+a+")")}break;case"UpdateExpression":case"AssignmentExpression":var h=n&&n.type;if(!("ForStatement"===h||"BinaryExpression"===h&&/^[=!<>]/.test(n.operator)||"MemberExpression"===h&&n.computed))if("UpdateExpression"===e.type){var f=(r=s(e.argument))+" = "+(d="__$__("+r+', "'+e.operator[0]+'", 1)');e.prefix?f="("+f+")":("AssignmentExpression"===h||"VariableDeclarator"===h||"BinaryExpression"===h)&&(s(n.left||n.id)===r&&(f=d),f=r+"; "+f),u(e,f)}else if(/^.=$/.test(e.operator)&&"Literal"!==e.left.type){i=s(e.left),a=s(e.right);var d=i+" = __$__("+i+', "'+e.operator[0]+'", '+a+")";u(e,/^\(.*\)$/.test(s(e))?"("+d+")":d)}}}var l,h=(n=n||{}).url||"",f=n.sourceMaps,g=n.paperFeatures||{},m=n.source||t,y=n.offset||0,_=ce.agent,b=_.versionNumber,x=!1,w=/\r\n|\n|\r/gm;if(f&&(_.chrome&&b>=30||_.webkit&&b>=537.76||_.firefox&&b>=23||_.node)){if(_.node)y-=2;else if(r&&h&&!r.location.href.indexOf(h)){var k=i.getElementsByTagName("html")[0].innerHTML;y=k.substr(0,k.indexOf(t)+1).match(w).length+1}var S=["AA"+function(e){var t="";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var n=31&e;(e>>=5)&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return t}((x=y>0&&!(_.chrome&&b>=36||_.safari&&b>=600||_.firefox&&b>=40||_.node))?0:y)+"A"];S.length=(t.match(w)||[]).length+1+(x?y:0),l={version:3,file:h,names:[],mappings:S.join(";AACA"),sourceRoot:"",sources:[h],sourcesContent:[m]}}return(!1!==g.operatorOverloading||!1!==g.moduleExports)&&function e(t,n,r){if(t){for(var i in t)if("range"!==i&&"loc"!==i){var a=t[i];if(Array.isArray(a))for(var o=0,l=a.length;o<l;o++)e(a[o],t,r);else a&&"object"==typeof a&&e(a,t,r)}!1!==r.operatorOverloading&&c(t,n),!1!==r.moduleExports&&function(e){switch(e.type){case"ExportDefaultDeclaration":u({range:[e.start,e.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var t=e.declaration,n=e.specifiers;if(t){var r=t.declarations;r&&(r.forEach((function(e){u(e,"module.exports."+s(e))})),u({range:[e.start,t.start+t.kind.length]},""))}else if(n){var i=n.map((function(e){var t=s(e);return"module.exports."+t+" = "+t+"; "})).join("");i&&u(e,i)}}}(t)}}(d(t,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,g),l&&(x&&(t=new Array(y+1).join("\n")+t),/^(inline|both)$/.test(f)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+e.btoa(unescape(encodeURIComponent(JSON.stringify(l))))),t+="\n//# sourceURL="+(h||"paperscript")),{url:h,source:m,code:t,map:l}}function w(e,t,n){ce=t;var r,o=t.getView(),s=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new ne:null,u=s?s._events:[],c=["onFrame","onResize"].concat(u),l=[],h=[],f="object"==typeof e?e:x(e,n);function d(t,n){for(var r in t)(n||!/^_/.test(r))&&new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(e)&&(l.push(r),h.push(t[r]))}e=f.code,d({__$__:_,$__:b,paper:t,tool:s},!0),d(t),e="var module = { exports: {} }; "+e,(y=a.each(c,(function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(l.push(t),this.push("module.exports."+t+" = "+t+";"))}),[]).join("\n"))&&(e+="\n"+y),e+="\nreturn module.exports;";var p=ce.agent;if(i&&(p.chrome||p.firefox&&p.versionNumber<40)){var v=i.createElement("script"),m=i.head||i.getElementsByTagName("head")[0];p.firefox&&(e="\n"+e),v.appendChild(i.createTextNode("document.__paperscript__ = function("+l+") {"+e+"\n}")),m.appendChild(v),r=i.__paperscript__,delete i.__paperscript__,m.removeChild(v)}else r=Function(l,e);var y,w=(y=r&&r.apply(t,h))||{};return a.each(u,(function(e){var t=w[e];t&&(s[e]=t)})),o&&(w.onResize&&o.setOnResize(w.onResize),o.emit("resize",{size:o.size,delta:new g}),w.onFrame&&o.setOnFrame(w.onFrame),o.requestUpdate()),y}function k(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==s.getAttribute(e,"ignore")){var t=s.getAttribute(e,"canvas"),n=i.getElementById(t),r=e.src||e.getAttribute("data-src"),a=s.hasAttribute(e,"async"),o="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var u=s.get(n.getAttribute(o))||(new s).setup(n);return n.setAttribute(o,u._id),r?ie({url:r,async:a,mimeType:"text/plain",onLoad:function(e){w(e,u,r)}}):w(e.innerHTML,u,e.baseURI),e.setAttribute("data-paper-ignore","true"),u}}function S(){a.each(i&&i.getElementsByTagName("script"),k)}return g.inject(y),m.inject(y),H.inject(y),r&&("complete"===i.readyState?setTimeout(S):Z.add(r,{load:S})),{compile:x,execute:w,load:function(e){return e?k(e):S()},parse:d,calculateBinary:_,calculateUnary:b}}.call(this);var ce=new(s.inject(a.exports,{Base:a,Numerical:d,Key:$,DomEvent:Z,DomElement:q,document:i,window:r,Symbol:I,PlacedSymbol:T}));return ce.agent.node&&f(ce),"function"==typeof t&&t.amd?t("paper",ce):c&&(c.exports=ce),ce}.call(s,"object"==typeof self?self:null);var d=function(){function e(){v(this,e),o(this,"_paperScope",new l.PaperScope),this._paperScope.setup(new l.Size(1,1))}return m(e,[{key:"generateImage",value:function(e){if(e.width<=0||e.height<=0)throw new Error("Width and height must be greater than 0");return{shape:this.createShape(e),splitColumns:this.createSplitColumns(e),measures:this.createMeasures(e)}}},{key:"createShape",value:function(e){var t=new this._paperScope.Path.Rectangle({point:[0,0],size:[e.width,e.height],radius:e.shape.borderRadius,fillColor:e.shape.fillColor,strokeColor:e.shape.borderColor,strokeWidth:e.shape.borderWidth,shadowColor:e.shape.shadowColor,shadowBlur:e.shape.shadowBlur,shadowOffset:new this._paperScope.Point(e.shape.shadowOffset.x,e.shape.shadowOffset.y)});return t.position=new this._paperScope.Point(0,0),t.remove(),{json:t.exportJSON(),svg:t.exportSVG({asString:!0})}}},{key:"createSplitColumns",value:function(e){for(var t=new this._paperScope.Group,n=e.width/e.splitColumns.columns,r=e.height/e.splitColumns.rows,i=1;i<e.splitColumns.columns;i++){var a=i*n,o=new this._paperScope.Path.Line({from:[a,0+e.splitColumns.marginVertical],to:[a,e.height-e.splitColumns.marginVertical],strokeColor:e.splitColumns.lineColor,strokeWidth:e.splitColumns.lineWidth,dashArray:e.splitColumns.lineDashArray,strokeScaling:!1});t.addChild(o)}for(var s=1;s<e.splitColumns.rows;s++){var u=s*r,c=new this._paperScope.Path.Line({from:[0+e.splitColumns.marginVertical,u],to:[e.width-e.splitColumns.marginVertical,u],strokeColor:e.splitColumns.lineColor,strokeWidth:e.splitColumns.lineWidth,dashArray:e.splitColumns.lineDashArray,strokeScaling:!1});t.addChild(c)}return t.position=new this._paperScope.Point(0,0),{json:t.exportJSON(),svg:t.exportSVG({asString:!0})}}},{key:"createMeasures",value:function(e){var t=new this._paperScope.Group,n=this.createArrow(e,new this._paperScope.Point(-e.width/2,-e.height/2-10),new this._paperScope.Point(+e.width/2,-e.height/2-10)),r=this.createArrow(e,new this._paperScope.Point(-e.width/2-10,-e.height/2),new this._paperScope.Point(-e.width/2-10,+e.height/2)),i=new this._paperScope.PointText({fillColor:e.measures.labelColor,fontFamily:"Courier New",fontWeight:"bold",fontSize:e.measures.labelFontSize,justification:"center",position:[0,-e.height/2-20],content:e.measures.widthLabel}),a=new this._paperScope.PointText({fillColor:e.measures.labelColor,fontFamily:"Courier New",fontWeight:"bold",fontSize:e.measures.labelFontSize,justification:"center",position:[-e.width/2-20,0],content:e.measures.heightLabel,rotation:-90});return t.addChild(i),t.addChild(a),t.addChild(n),t.addChild(r),{json:t.exportJSON(),svg:t.exportSVG({asString:!0})}}},{key:"createArrow",value:function(e,t,n){var r=new this._paperScope.Group,a=n.subtract(t).angle,o={strokeColor:e.measures.lineColor,strokeWidth:e.measures.lineWidth,dashArray:e.measures.lineDashArray,strokeScaling:!1},s=new this._paperScope.Path.Line(i({from:t,to:n},o)),u=new this._paperScope.Path.Line(i({from:t,to:t.add(new this._paperScope.Point(-5,-5))},o)),c=new this._paperScope.Path.Line(i({from:t,to:t.add(new this._paperScope.Point(-5,5))},o)),l=new this._paperScope.Path.Line(i({from:n,to:n.add(new this._paperScope.Point(-5,-5))},o)),h=new this._paperScope.Path.Line(i({from:n,to:n.add(new this._paperScope.Point(-5,5))},o));return u.rotate(a+180,t),c.rotate(a+180,t),l.rotate(a,n),h.rotate(a,n),r.addChild(s),r.addChild(u),r.addChild(c),r.addChild(l),r.addChild(h),r}}]),e}(),g=function(){function e(){v(this,e),o(this,"_paperScope",new l.PaperScope),this._paperScope.setup(new l.Size(1,1))}return m(e,[{key:"generateArea",value:function(e){if(e.width<=0||e.height<=0)throw new Error("Width and height must be greater than 0");var t=new this._paperScope.Path.Rectangle({point:[0,0],size:[e.width,e.height],radius:e.borderRadius});return t.position=new this._paperScope.Point(0,0),t.remove(),{json:t.exportJSON(),svg:t.exportSVG({asString:!0})}}}]),e}(),y=function(){function e(){v(this,e),o(this,"_paperScope",new l.PaperScope),o(this,"_baseMaterial",null),o(this,"_borderMaterial",null);var t=document.createElement("canvas");t.width=1,t.height=1,this._paperScope.setup(new l.Size(1,1))}return m(e,[{key:"generatePreview3D",value:function(e,t){if(!e.columns||isNaN(e.columns)||e.columns<1||e.rows<1||!e.rows||isNaN(e.rows))throw new Error("Invalid columns or rows value. Columns and rows must be greater than 0 and must be a number.");console.log("Generating 3D preview for resizable canvas...",e),this._baseMaterial||(this._baseMaterial=new BABYLON.PBRMaterial("baseMaterial",t)),this._borderMaterial||(this._borderMaterial=new BABYLON.PBRMaterial("borderMaterial",t)),this._baseMaterial.albedoColor=new BABYLON.Color3(1,1,1),this._baseMaterial.metallic=0,this._baseMaterial.roughness=.5,this._borderMaterial.albedoColor=new BABYLON.Color3.FromHexString(e.borderColor),this._borderMaterial.metallic=0,this._borderMaterial.roughness=.5,e.useCheckerTexture&&(this._baseMaterial.albedoTexture=new BABYLON.Texture("https://zakekecdn.blob.core.windows.net/cdn/Test/checker_texture.png",t),this._baseMaterial.albedoTexture.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,this._baseMaterial.albedoTexture.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE,this._borderMaterial.albedoTexture=new BABYLON.Texture("https://zakekecdn.blob.core.windows.net/cdn/Test/checker_texture.png",t),this._borderMaterial.albedoTexture.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,this._borderMaterial.albedoTexture.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE);for(var n=new BABYLON.Mesh("groupMesh",t),r=[],i=[],a=[],o=0;o<e.columns;o++)for(var s=0;s<e.rows;s++){var u=this.generateCanvasMesh(e,t,o,s),c=p(u,3),l=c[0],h=c[1],f=c[2];r.push(l),i.push(h),a.push(f)}var d=BABYLON.Mesh.MergeMeshes(r,!0,!0,void 0,!1,!1),g=BABYLON.Mesh.MergeMeshes(i,!0,!0,void 0,!1,!1),v=BABYLON.Mesh.MergeMeshes(a,!0,!0,void 0,!1,!1);d.material=this._borderMaterial,g.material=this._baseMaterial,v.material=this._baseMaterial,d.parent=n,g.parent=n,v.parent=n,d.name="borders",g.name="back",v.name="front";var m=BABYLON.SceneSerializer.SerializeMesh(n,!1,!0);return null==n||n.dispose(),m}},{key:"generateCanvasMesh",value:function(e,t,n,r){var i=e.width/e.columns,a=e.height/e.rows,o=.1*i,s=BABYLON.MeshBuilder.CreateBox("borders",{width:i,height:a,depth:e.depth},t),u=BABYLON.MeshBuilder.CreatePlane("front",{width:i,height:a},t),c=BABYLON.MeshBuilder.CreatePlane("back",{width:i,height:a},t);s.position=new BABYLON.Vector3(i/2+n*(i+o),a/2+r*(a+o)),u.position=new BABYLON.Vector3(i/2+n*(i+o),a/2+r*(a+o),-e.depth/2),c.position=new BABYLON.Vector3(i/2+n*(i+o),a/2+r*(a+o),e.depth/2),c.rotate(BABYLON.Axis.X,Math.PI,BABYLON.Space.WORLD),c.rotate(BABYLON.Axis.Z,Math.PI,BABYLON.Space.WORLD),s.material=this._borderMaterial,c.material=this._borderMaterial,u.material=this._baseMaterial;var l=s.getVerticesData(BABYLON.VertexBuffer.NormalKind),h=s.getVerticesData(BABYLON.VertexBuffer.UVKind),f=u.getVerticesData(BABYLON.VertexBuffer.UVKind),d=c.getVerticesData(BABYLON.VertexBuffer.UVKind);if(e.borderRadius>0&&console.warn("Mirror canvas effect will not work for border radius > 0"),0===e.borderRadius){for(var p=e.depth/e.width,g=e.depth/e.height,v=Math.min(p,g),m=i/e.width,y=a/e.height,_=0;_<h.length;_+=2){var b=Math.round(l[_/2*3]),x=Math.round(l[_/2*3+1]),w=Math.round(l[_/2*3+2]),k=1==b&&0==x&&0==w,S=0==b&&1==x&&0==w,C=0==b&&-1==x&&0==w;if(-1==b&&0==x&&0==w){var M=h[_],A=h[_+1];h[_]=A*v+m*n,h[_+1]=M*y+y*r}k&&(M=h[_],A=h[_+1],h[_]=A*v+(1-v)-m*(e.columns-1-n),h[_+1]=M*y+y*r),C&&(M=h[_],A=h[_+1],h[_]=A*m+m*n,h[_+1]=M*v+y*r),S&&(M=h[_],A=h[_+1],h[_]=(1-A)*m+m*n,h[_+1]=(1-M)*v+(1-v))}for(s.setVerticesData(BABYLON.VertexBuffer.UVKind,h),_=0;_<f.length;_+=2)M=f[_],A=f[_+1],f[_]=M*m+m*n,f[_+1]=A*y+y*r;for(u.setVerticesData(BABYLON.VertexBuffer.UVKind,f),_=0;_<d.length;_+=2)M=d[_],A=d[_+1],d[_]=M*m+m*(e.columns-1-n),d[_+1]=A*y+y*r;c.setVerticesData(BABYLON.VertexBuffer.UVKind,d)}u.isVisible=!1,c.isVisible=!1;var E=s.getVerticesData(BABYLON.VertexBuffer.PositionKind),T=s.getVerticesData(BABYLON.VertexBuffer.NormalKind),I=s.getVerticesData(BABYLON.VertexBuffer.UVKind);return E.splice(0,24),T.splice(0,24),I.splice(0,16),s.setVerticesData(BABYLON.VertexBuffer.PositionKind,E),s.setVerticesData(BABYLON.VertexBuffer.NormalKind,T),s.setVerticesData(BABYLON.VertexBuffer.UVKind,I),[s,c,u]}}]),e}()}},y={};function _(e){var t=y[e];if(void 0!==t)return t.exports;var n=y[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,_),n.loaded=!0,n.exports}return _.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return _.d(t,{a:t}),t},_.d=function(e,t){for(var n in t)_.o(t,n)&&!_.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},_.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),_.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},_.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},_.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},_("./src/index.tsx")}()},e.exports=r(n(2791),n(4313))},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,u,"next",e)}function u(e){t(o,i,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),a=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,n){var r=n(8416);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(L){h=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new E(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}t.wrap=f;var p={};function g(){}function v(){}function m(){}var y={};h(y,u,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(T([])));b&&b!==n&&a.call(b,u)&&(y=b);var x=m.prototype=g.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,s,u){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==r(h)&&a.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function S(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=m,o(x,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:v,configurable:!0}),v.displayName=h(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,h(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},w(k.prototype),h(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new k(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(x),h(x,l,"Generator"),h(x,u,(function(){return this})),h(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",n.nc=void 0,function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(4164);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u,c=n(4313),l=n(8299),h=["title","titleId"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p(t,n){var r=t.title,i=t.titleId,a=d(t,h);return e.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,u||(u=e.createElement("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z M 18 9 L 18 12 L 15 12 L 15 14 L 18 14 L 18 17 L 20 17 L 20 14 L 23 14 L 23 12 L 20 12 L 20 9 Z"})))}var g,v=e.forwardRef(p),m=(n.p,["title","titleId"]);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b(t,n){var r=t.title,i=t.titleId,a=_(t,m);return e.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,g||(g=e.createElement("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z M 15 12 L 15 14 L 23 14 L 23 12 Z"})))}var x,w,k,S,C,M,A,E,T=e.forwardRef(b),I=(n.p,c.default.ul(x||(x=s(["\n    margin: 0;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    margin-bottom: 17px; \n    border-radius: 50px;\n    white-space: nowrap;\n    justify-content: center;\n\n    @media screen and (max-width: 568px) {\n        width: 100vw;\n        margin-bottom: 12px; \n        transform-origin: 50% 50% 0px;\n        // transform: translate3d(-186.507px, 0px, 0px) scale(1, 1);\n        position: relative;\n        // left: 50vw;\n        }\n"])))),L=c.default.li(w||(w=s(["\n    display: flex;\n    flex-direction: column;    \n    font: 500 1.1rem/1.5 'Inter';\n    align-items: center;\n    text-align: center;\n    justify-content: center;\n    padding: 0px 10px;    \n    cursor: pointer;\n    margin: 0 10px;\n    width: 152px;\n    height: 36px;\n    border-color: ",";\n    white-space: nowrap;\n\n    border: 1px solid #297CA3;\n    border-radius: 4px;\n    background-color: ",";\n    color: ",";\n\n    &:hover {\n        background-color: #ffd966;\n    }\n    @media screen and (max-width: 568px) {\n      font: 500 .8rem/1.8 'Inter';\n      margin: 0 7px;\n      padding: 0px 7px;\n      width: 132px;\n      height: 33px;\n    }\n"])),(function(e){return e.selected?"black":"#DDD"}),(function(e){return e.selected?"#297ca3":"white"}),(function(e){return e.selected?"white":"#297ca3"})),O=(c.default.li(k||(k=s(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    justify-content: center;\n    padding: 0px 5px;\n    cursor: pointer;\n    margin: 0 3px;\n    border-radius: 100%;\n    width: 5.5em;\n    height: 5.1em;\n    white-space: nowrap;  \n    font-size: 12px;  \n    border-color: ",";\n    \n    &:before {\n        content: '';\n        position: absolute;\n        bottom: 20%;\n        /* Additional styling for the :before pseudo-element can be added here */\n    };\n\n    &:after {\n    content: \"","\";\n    position: absolute;\n    top: 110%;\n    border-bottom: 1px solid #000;\n    font-family: 'Roboto', sans-serif;\n    font-size: 13px;    \n    }\n    \n    @media screen and (max-width: 568px) {\n    &:after {\n      top: 73% !important;\n      width: 6.5em;\n      height: 6.1em;    \n      }\n    }"])),(function(e){return e.selected?"black":"#DDD"}),(function(e){return e.selected?e.selectedColor:""})),c.default.li(S||(S=s(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    justify-content: center;\n    padding: 0px 10px;\n    cursor: pointer;\n    margin: 0 11px;\n    border-radius: 100%;\n    width: 36px;\n    height: 36px;\n    white-space: nowrap;  \n    font-size: 12px;  \n    border-color: ",";\n\n    &:hover {\n        background-color: #D8D8D8;\n    };\n    \n    &:before {\n        content: '';\n        position: absolute;\n        bottom: 20%;\n        /* Additional styling for the :before pseudo-element can be added here */\n    };\n\n    &:after {\n    content: \"",'";\n    position: absolute;\n    bottom: 7%;\n    }\n        \n    @media screen and (max-width: 568px) {\n    &:after {\n     bottom: -65%;  \n     }\n    }'])),(function(e){return e.selected?"black":"#DDD"}),(function(e){return e.selected?e.selectedColor:""}))),P=(c.default.img(C||(C=s(["\n    width: 4.7em;\n    height: 80px;\n    object-fit: contain;\n    margin: 0px 11px;\n    border-radius: 100%;\n    border: 1px solid rgb(229, 229, 229);\n    \n    @media screen and (max-width: 568px) {\n      width: 36px;\n      height: 36px;\n      margin: 0px 8px;\n    }\n"]))),c.default.img(M||(M=s(["\n    width: 40px;\n    height: 40px;\n    object-fit: contain;\n    margin: 0px 11px;\n    border-radius: 100%;\n    border: 1px solid rgb(229, 229, 229);\n\n    @media screen and (max-width: 568px) {\n    width: 30px;\n    height: 30px;\n    margin: 0px 8px;\n    }\n"])))),D=c.default.div(A||(A=s(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n"]))),B=c.default.div(E||(E=s(["position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  backdrop-filter: blur(10px); /* Adjust the blur amount as needed */\n  background-color: rgba(255, 255, 255, 0.8); /* Adjust the background color and opacity as needed */\n  opacity: 1;\n  transition: opacity 0.5s;\n  "]))),N=n(184),R=function(e){var t=e.groupNameList,n=e.toggleFunc,r=e.UpdateGroupId,i=function(e){r(e.target.id),n()};return(0,N.jsx)("div",{children:t&&(0,N.jsx)("div",{children:(0,N.jsxs)("div",{className:"full-tray",children:[(0,N.jsx)("div",{className:"tray-mc-header",children:(0,N.jsx)("button",{className:"tray-trigger-close-button",onClick:n,children:(0,N.jsx)("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",role:"img",width:"24px",height:"24px",fill:"none",children:(0,N.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M18.973 5.027L5.028 18.972M5.027 5.027l13.945 13.945"})})})}),(0,N.jsx)("div",{className:"tray-mc-content",children:(0,N.jsxs)("div",{className:"tray-mc-list-wrapper",children:[(0,N.jsxs)("h1",{className:"mc-list-title",children:["COMPONENTS",(0,N.jsx)("span",{className:"mc-list-count","data-bm-component-id":"mc-list-count",children:t.length})]}),(0,N.jsx)("div",{className:"tray-mc-grid",children:t.map((function(e,t){return(0,N.jsx)("div",{className:"heading",id:e,children:(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",flexGrow:1,justifyContent:"flex-start"},onClick:i,id:e,children:[(0,N.jsx)("div",{className:"tray-mc-list-item-selection",id:e}),(0,N.jsx)("span",{id:e,children:e})]})})}))})]})})]})})})},j=function(e){var t=e.width,n=e.trayPreviewOpenButton,r=e.selectedTrayPreviewOpenButton;e.selectTrayPreviewOpenButton;return t>568?(0,N.jsx)(N.Fragment,{children:r?(0,N.jsx)("button",{className:"tray-preview-open-button",onClick:n,children:(0,N.jsx)("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",role:"img",width:"24px",height:"24px",fill:"none",children:(0,N.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M5.034 15.527L12 8.561l6.967 6.966"})})}):(0,N.jsx)("button",{className:"tray-preview-open-button",onClick:n,children:(0,N.jsx)("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",role:"img",width:"24px",height:"24px",fill:"none",children:(0,N.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M18.966 8.476L12 15.443 5.033 8.476"})})})}):null};function z(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function V(e){var t=function(e,t){if("object"!==U(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===U(t)?t:String(t)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function G(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function W(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=n(763),X=n.n(K),Q=function(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(!Object.is(i,t)){var a=t;t=(null!=r?r:"object"!==typeof i)?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,i,a),a},J=function(e){return e?Q(e):Q},$=n(327).useSyncExternalStoreWithSelector;var ee=function(t){"function"!==typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");var n="function"===typeof t?J(t):t,r=function(t,r){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getState,r=arguments.length>2?arguments[2]:void 0,i=$(t.subscribe,t.getState,t.getServerState||t.getState,n,r);return(0,e.useDebugValue)(i),i}(n,t,r)};return Object.assign(r,n),r},te=function(e){return e?ee(e):ee},ne=te((function(e){return{isViewerMode:!!new URLSearchParams(window.location.href).get("viewerMode"),isDraftEditor:!!new URLSearchParams(window.location.href).get("isDraftEditor"),isEditorMode:!!new URLSearchParams(window.location.href).get("editorMode"),isMobile:window.innerWidth<=1024,setIsMobile:function(t){e({isMobile:t})},dialogs:[],addDialog:function(t,n){e((function(e){return{dialogs:[].concat(z(e.dialogs),[{id:t,dialog:n}])}}))},removeDialog:function(t){e((function(e){return{dialogs:e.dialogs.filter((function(e){return e.id!==t}))}}))},isLoading:!1,setIsLoading:function(t){e({isLoading:t})},isQuoteLoading:!1,setIsQuoteLoading:function(t){e({isQuoteLoading:t})},selectedGroupId:null,setSelectedGroupId:function(t){return e({selectedGroupId:t})},selectedAttributeId:null,setSelectedAttributeId:function(t){return e({selectedAttributeId:t})},selectedStepId:null,setSelectedStepId:function(t){return e({selectedStepId:t})},selectedTemplateGroupId:null,setSelectedTemplateGroupId:function(t){return e({selectedTemplateGroupId:t})},priceFormatter:new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}),setPriceFormatter:function(t){e({priceFormatter:t})},undoStack:[],setUndoStack:function(t){e((function(e){return{undoStack:t(e.undoStack)}}))},redoStack:[],setRedoStack:function(t){e((function(e){return{redoStack:t(e.redoStack)}}))},isUndo:!1,setIsUndo:function(t){e({isUndo:t})},isRedo:!1,setIsRedo:function(t){e({isRedo:t})},lastSelectedItem:{type:"attribute",id:null},setLastSelectedItem:function(t){e({lastSelectedItem:t})}}})),re=ne,ie=!1,ae=function(){function e(){F(this,e)}return G(e,null,[{key:"_",value:function(e,t){var n;if(null!==(n=this.translations)&&void 0!==n&&n.statics)for(var r,i=0,a=Array.from(null===(r=this.translations)||void 0===r?void 0:r.statics.keys());i<a.length;i++){var o=a[i];if(o.toLowerCase()===e.toLowerCase())return this.translations.statics.get(o)}var s=window.gt;return s?s.dgettext(t,e):e}},{key:"_d",value:function(e){var t,n=e;if(null!==(t=this.translations)&&void 0!==t&&t.dynamics){var r,i=Array.from(null===(r=this.translations)||void 0===r?void 0:r.dynamics.keys());console.log(this.translations,"this translations");for(var a=0,o=i;a<o.length;a++){var s=o[a];s.toLowerCase()===e.toLowerCase()&&this.translations.dynamics.get(s)&&(n=this.translations.dynamics.get(s))}}return n}}]),e}();ae.translations=null;function oe(){var e=re(),t=e.isUndo,n=e.setUndoStack,r=e.isRedo,i=e.setRedoStack;return{fillUndoStack:function(e){t||n((function(t){var n=z(t),r=Array.isArray(e)?e:[e],i=["group","step","attribute","option"];if(ie){var a,o,s=null!==(a=n.pop())&&void 0!==a?a:[],u=Y(r);try{var c=function(){var e=o.value;-1===s.findIndex((function(t){return t.type===e.type&&t.direction===e.direction}))&&(s=[].concat(z(s),[e]))};for(u.s();!(o=u.n()).done;)c()}catch(l){u.e(l)}finally{u.f()}s=s.sort((function(e,t){return i.indexOf(e.type)<i.indexOf(t.type)?-1:1})),n.push(s)}else r=r.sort((function(e,t){return i.indexOf(e.type)<i.indexOf(t.type)?-1:1})),n=[].concat(z(n),[r]);return n}))},fillRedoStack:function(e){r||i((function(t){var n=z(t);return e&&e.length>0&&n.push(e),n}))},eraseRedoStack:function(){t||r||i((function(){return[]}))}}}function se(){var e,t,n=(0,l.useZakeke)(),r=n.groups,i=n.isSceneLoading,a=n.product,o=n.isAreaVisible,s=n.draftCompositions,u=n.sellerSettings,c=null!==(t=function(e,t,n,r){var i,a,o=re(),s=o.isEditorMode,u=o.isViewerMode,c=o.isDraftEditor,l=[],h={id:-2,guid:"0000-0000-0000-0000",name:null!==(i=null===r||void 0===r?void 0:r.customizeButtonLabel)&&void 0!==i?i:ae._("Customize","Composer"),enabled:t,attributes:[],steps:[],cameraLocationId:"",displayOrder:e.length-1,direction:0,attributesAlwaysOpened:!1,imageUrl:null!==(a=null===r||void 0===r?void 0:r.customizeButtonIconUrl)&&void 0!==a?a:"",templateGroups:[]},f={id:-3,name:ae._("Saved designs","Composer"),imageUrl:"../src/assets/icons/saved_designs.svg",attributes:[],steps:[],guid:"",enabled:!0,displayOrder:0,cameraLocationId:null,direction:0,attributesAlwaysOpened:!1,templateGroups:[]},d=e.map((function(e){return Z(Z({},e),{},{templateGroups:e.templateGroups,attributes:e.attributes.filter((function(e){return e.enabled&&e.options.some((function(e){return e.enabled}))})).map((function(e){return Z(Z({},e),{},{options:e.options.filter((function(e){return e.enabled}))})}))})}));function p(e){var t,n=X().cloneDeep(e),r=Y(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.options=i.options.filter((function(e){return e.enabled}))}}catch(a){r.e(a)}finally{r.f()}return n.filter((function(e){return e.enabled&&e.options.length>0}))}var g,v=Y(d);try{for(v.s();!(g=v.n()).done;){var m=g.value;if(m.enabled){var y,_=X().cloneDeep(m),b=Y(_.steps);try{for(b.s();!(y=b.n()).done;){var x=y.value;x.attributes=p(x.attributes)}}catch(k){b.e(k)}finally{b.f()}_.steps=_.steps.filter((function(e){return e.attributes.length>0||e.templateGroups.length>0})),_.attributes=p(_.attributes);var w=_.steps.reduce((function(e,t){return e+(t.attributes.length+t.templateGroups.length)}),0);(w+=_.attributes.length+_.templateGroups.length)>0&&l.push(_)}}}catch(k){v.e(k)}finally{v.f()}return t&&l.push(h),!n||s||u||c||l.push(f),l}(r,!(i||!a)&&a.areas.some((function(e){return o(e.id)})),null!==(e=r&&s&&s.length>0)&&void 0!==e&&e,u))&&void 0!==t?t:[];return c}var ue=c.default.div.withConfig({displayName:"ProgressBar__LoadingLabel",componentId:"sc-r5187z-0"})(["color:#000;font-size:12px;font-family:'Inter';font-style:normal;font-weight:700;line-height:16px;"]),ce=c.default.div.withConfig({displayName:"ProgressBar__LoaderContainer",componentId:"sc-r5187z-1"})(["height:8px;width:600px;border-radius:4px;background-color:#dbe2e6;@media screen and (max-width:766px){width:310px;}"]),le=c.default.span.withConfig({displayName:"ProgressBar__LoadingPercentageLabel",componentId:"sc-r5187z-2"})(["color:#8fa4ae;font-weight:400;font-size:12px;line-height:16px;font-style:normal;font-family:'Inter';"]),he=c.default.div.withConfig({displayName:"ProgressBar__LoadingPercentageandIconContainer",componentId:"sc-r5187z-3"})(["display:flex;justify-content:space-between;"]),fe=c.default.div.withConfig({displayName:"ProgressBar__LoaderFill",componentId:"sc-r5187z-4"})(["height:100%;border-radius:4px;margin:7px 0px;width:",";background-color:#008556;border-radius:'inherit';"],(function(e){var t=e.completed;return t&&"".concat(t,"%")})),de=function(e){var t=e.bgColor,n=e.completed,r=(0,l.useZakeke)(),i=r.isSceneLoading,a=r.publicTranslations,o=null===a||void 0===a?void 0:a.dynamics;return(0,N.jsxs)("div",{children:[(0,N.jsx)(ue,{children:null===o||void 0===o?void 0:o.get("Loading...")}),(0,N.jsxs)(ce,{children:[(0,N.jsx)(fe,{completed:i?n:100,bgColor:t,isCompleted:!i}),(0,N.jsx)(he,{children:(0,N.jsx)(le,{children:i?"".concat(n,"%"):"100%"})})]})]})},pe=c.default.div.withConfig({displayName:"ProgressBarLoadingOverlay__ProgressBarLoadingBackground",componentId:"sc-10czhi1-0"})(["left:0;top:0;width:100%;height:100%;position:fixed;display:flex;align-items:center;justify-content:center;z-index:12;"]),ge=c.default.div.withConfig({displayName:"ProgressBarLoadingOverlay__ProgressBarLoadingContainer",componentId:"sc-10czhi1-1"})(["width:650px;height:150px;padding:10px;display:inline-flex;padding:48px 24px;flex-direction:column;align-items:flex-start;gap:8px;border-radius:4px;background:var(--surface-default,#fff);box-shadow:0px 4px 20px 0px rgba(0,0,0,0.15),0px 0px 3px 0px rgba(0,0,0,0.1);@media screen and (max-width:766px){width:350px;height:140px;}"]),ve=function(){var t=(0,l.useZakeke)().isSceneLoading,n=o((0,e.useState)(0),2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=0;if(t){if(t){var n=setInterval((function(){e+=.3,i(Math.round(Math.atan(e/2)/(Math.PI/2)*100*100)/100)}),50);return function(){return clearInterval(n)}}}else i(100)}),[t]),(0,N.jsx)(pe,{children:(0,N.jsx)(ge,{children:(0,N.jsx)(de,{bgColor:"#F46200",completed:r})})})};function me(){me=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new C(i||[]);return r(o,"_invoke",{value:x(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var g={};u(g,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(M([])));m&&m!==t&&n.call(m,a)&&(g=m);var y=p.prototype=f.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==U(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function w(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},_(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(y),u(y,s,"Generator"),u(y,a,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function ye(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ye(a,r,i,o,s,"next",e)}function s(e){ye(a,r,i,o,s,"throw",e)}o(void 0)}))}}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}var xe=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),we=Math.abs,ke=String.fromCharCode,Se=Object.assign;function Ce(e){return e.trim()}function Me(e,t,n){return e.replace(t,n)}function Ae(e,t){return e.indexOf(t)}function Ee(e,t){return 0|e.charCodeAt(t)}function Te(e,t,n){return e.slice(t,n)}function Ie(e){return e.length}function Le(e){return e.length}function Oe(e,t){return t.push(e),e}var Pe=1,De=1,Be=0,Ne=0,Re=0,je="";function ze(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:Pe,column:De,length:o,return:""}}function Fe(e,t){return Se(ze("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ue(){return Re=Ne>0?Ee(je,--Ne):0,De--,10===Re&&(De=1,Pe--),Re}function Ve(){return Re=Ne<Be?Ee(je,Ne++):0,De++,10===Re&&(De=1,Pe++),Re}function He(){return Ee(je,Ne)}function Ge(){return Ne}function Ye(e,t){return Te(je,e,t)}function We(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qe(e){return Pe=De=1,Be=Ie(je=e),Ne=0,[]}function Ze(e){return je="",e}function Ke(e){return Ce(Ye(Ne-1,Je(91===e?e+2:40===e?e+1:e)))}function Xe(e){for(;(Re=He())&&Re<33;)Ve();return We(e)>2||We(Re)>3?"":" "}function Qe(e,t){for(;--t&&Ve()&&!(Re<48||Re>102||Re>57&&Re<65||Re>70&&Re<97););return Ye(e,Ge()+(t<6&&32==He()&&32==Ve()))}function Je(e){for(;Ve();)switch(Re){case e:return Ne;case 34:case 39:34!==e&&39!==e&&Je(Re);break;case 40:41===e&&Je(e);break;case 92:Ve()}return Ne}function $e(e,t){for(;Ve()&&e+Re!==57&&(e+Re!==84||47!==He()););return"/*"+Ye(t,Ne-1)+"*"+ke(47===e?e:Ve())}function et(e){for(;!We(He());)Ve();return Ye(e,Ne)}var tt="-ms-",nt="-moz-",rt="-webkit-",it="comm",at="rule",ot="decl",st="@keyframes";function ut(e,t){for(var n="",r=Le(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ct(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ot:return e.return=e.return||e.value;case it:return"";case st:return e.return=e.value+"{"+ut(e.children,r)+"}";case at:e.value=e.props.join(",")}return Ie(n=ut(e.children,r))?e.return=e.value+"{"+n+"}":""}function lt(e){return Ze(ht("",null,null,null,[""],e=qe(e),0,[0],e))}function ht(e,t,n,r,i,a,o,s,u){for(var c=0,l=0,h=o,f=0,d=0,p=0,g=1,v=1,m=1,y=0,_="",b=i,x=a,w=r,k=_;v;)switch(p=y,y=Ve()){case 40:if(108!=p&&58==Ee(k,h-1)){-1!=Ae(k+=Me(Ke(y),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:k+=Ke(y);break;case 9:case 10:case 13:case 32:k+=Xe(p);break;case 92:k+=Qe(Ge()-1,7);continue;case 47:switch(He()){case 42:case 47:Oe(dt($e(Ve(),Ge()),t,n),u);break;default:k+="/"}break;case 123*g:s[c++]=Ie(k)*m;case 125*g:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+l:-1==m&&(k=Me(k,/\f/g,"")),d>0&&Ie(k)-h&&Oe(d>32?pt(k+";",r,n,h-1):pt(Me(k," ","")+";",r,n,h-2),u);break;case 59:k+=";";default:if(Oe(w=ft(k,t,n,c,l,i,s,_,b=[],x=[],h),a),123===y)if(0===l)ht(k,t,w,w,b,a,h,s,x);else switch(99===f&&110===Ee(k,3)?100:f){case 100:case 108:case 109:case 115:ht(e,w,w,r&&Oe(ft(e,w,w,0,0,i,s,_,i,b=[],h),x),i,x,h,s,r?b:x);break;default:ht(k,w,w,w,[""],x,0,s,x)}}c=l=d=0,g=m=1,_=k="",h=o;break;case 58:h=1+Ie(k),d=p;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==Ue())continue;switch(k+=ke(y),y*g){case 38:m=l>0?1:(k+="\f",-1);break;case 44:s[c++]=(Ie(k)-1)*m,m=1;break;case 64:45===He()&&(k+=Ke(Ve())),f=He(),l=h=Ie(_=k+=et(Ge())),y++;break;case 45:45===p&&2==Ie(k)&&(g=0)}}return a}function ft(e,t,n,r,i,a,o,s,u,c,l){for(var h=i-1,f=0===i?a:[""],d=Le(f),p=0,g=0,v=0;p<r;++p)for(var m=0,y=Te(e,h+1,h=we(g=o[p])),_=e;m<d;++m)(_=Ce(g>0?f[m]+" "+y:Me(y,/&\f/g,f[m])))&&(u[v++]=_);return ze(e,t,n,0===i?at:s,u,c,l)}function dt(e,t,n){return ze(e,t,n,it,ke(Re),Te(e,2,-2),0)}function pt(e,t,n,r){return ze(e,t,n,ot,Te(e,0,r),Te(e,r+1,-1),r)}var gt=function(e,t,n){for(var r=0,i=0;r=i,i=He(),38===r&&12===i&&(t[n]=1),!We(i);)Ve();return Ye(e,Ne)},vt=function(e,t){return Ze(function(e,t){var n=-1,r=44;do{switch(We(r)){case 0:38===r&&12===He()&&(t[n]=1),e[n]+=gt(Ne-1,t,n);break;case 2:e[n]+=Ke(r);break;case 4:if(44===r){e[++n]=58===He()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=ke(r)}}while(r=Ve());return e}(qe(e),t))},mt=new WeakMap,yt=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||mt.get(n))&&!r){mt.set(e,!0);for(var i=[],a=vt(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},_t=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function bt(e,t){switch(function(e,t){return 45^Ee(e,0)?(((t<<2^Ee(e,0))<<2^Ee(e,1))<<2^Ee(e,2))<<2^Ee(e,3):0}(e,t)){case 5103:return rt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return rt+e+nt+e+tt+e+e;case 6828:case 4268:return rt+e+tt+e+e;case 6165:return rt+e+tt+"flex-"+e+e;case 5187:return rt+e+Me(e,/(\w+).+(:[^]+)/,rt+"box-$1$2"+tt+"flex-$1$2")+e;case 5443:return rt+e+tt+"flex-item-"+Me(e,/flex-|-self/,"")+e;case 4675:return rt+e+tt+"flex-line-pack"+Me(e,/align-content|flex-|-self/,"")+e;case 5548:return rt+e+tt+Me(e,"shrink","negative")+e;case 5292:return rt+e+tt+Me(e,"basis","preferred-size")+e;case 6060:return rt+"box-"+Me(e,"-grow","")+rt+e+tt+Me(e,"grow","positive")+e;case 4554:return rt+Me(e,/([^-])(transform)/g,"$1"+rt+"$2")+e;case 6187:return Me(Me(Me(e,/(zoom-|grab)/,rt+"$1"),/(image-set)/,rt+"$1"),e,"")+e;case 5495:case 3959:return Me(e,/(image-set\([^]*)/,rt+"$1$`$1");case 4968:return Me(Me(e,/(.+:)(flex-)?(.*)/,rt+"box-pack:$3"+tt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rt+e+e;case 4095:case 3583:case 4068:case 2532:return Me(e,/(.+)-inline(.+)/,rt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ie(e)-1-t>6)switch(Ee(e,t+1)){case 109:if(45!==Ee(e,t+4))break;case 102:return Me(e,/(.+:)(.+)-([^]+)/,"$1"+rt+"$2-$3$1"+nt+(108==Ee(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ae(e,"stretch")?bt(Me(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Ee(e,t+1))break;case 6444:switch(Ee(e,Ie(e)-3-(~Ae(e,"!important")&&10))){case 107:return Me(e,":",":"+rt)+e;case 101:return Me(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rt+(45===Ee(e,14)?"inline-":"")+"box$3$1"+rt+"$2$3$1"+tt+"$2box$3")+e}break;case 5936:switch(Ee(e,t+11)){case 114:return rt+e+tt+Me(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return rt+e+tt+Me(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return rt+e+tt+Me(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return rt+e+tt+e+e}return e}var xt=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ot:e.return=bt(e.value,e.length);break;case st:return ut([Fe(e,{value:Me(e.value,"@","@"+rt)})],r);case at:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ut([Fe(e,{props:[Me(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ut([Fe(e,{props:[Me(t,/:(plac\w+)/,":"+rt+"input-$1")]}),Fe(e,{props:[Me(t,/:(plac\w+)/,":-moz-$1")]}),Fe(e,{props:[Me(t,/:(plac\w+)/,tt+"input-$1")]})],r)}return""}))}}],wt=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||xt;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,c,l=[ct,(c=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=Le(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([yt,_t].concat(r,l));a=function(e,t,n,r){u=n,function(e){ut(lt(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new xe({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return f.sheet.hydrate(s),f};var kt=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};var St={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ct=n(9797),Mt=/[A-Z]|^ms/g,At=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Et=function(e){return 45===e.charCodeAt(1)},Tt=function(e){return null!=e&&"boolean"!==typeof e},It=(0,Ct.Z)((function(e){return Et(e)?e:e.replace(Mt,"-$&").toLowerCase()})),Lt=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(At,(function(e,t,n){return Pt={name:t,styles:n,next:Pt},t}))}return 1===St[e]||Et(e)||"number"!==typeof t||0===t?t:t+"px"};function Ot(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Pt={name:n.name,styles:n.styles,next:Pt},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Pt={name:r.name,styles:r.styles,next:Pt},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ot(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Tt(o)&&(r+=It(a)+":"+Lt(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=Ot(e,t,o);switch(a){case"animation":case"animationName":r+=It(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)Tt(o[u])&&(r+=It(a)+":"+Lt(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Pt,a=n(e);return Pt=i,Ot(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Pt,Dt=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Bt=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Pt=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=Ot(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=Ot(n,t,e[o]),r&&(i+=a[o]);Dt.lastIndex=0;for(var s,u="";null!==(s=Dt.exec(i));)u+="-"+s[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+u;return{name:c,styles:i,next:Pt}},Nt=!!t.useInsertionEffect&&t.useInsertionEffect,Rt=Nt||function(e){return e()},jt=(Nt||e.useLayoutEffect,{}.hasOwnProperty),zt=e.createContext("undefined"!==typeof HTMLElement?wt({key:"css"}):null);zt.Provider;var Ft=function(t){return(0,e.forwardRef)((function(n,r){var i=(0,e.useContext)(zt);return t(n,i,r)}))};var Ut=e.createContext({});var Vt="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ht=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return kt(t,n,r),Rt((function(){return function(e,t,n){kt(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},Gt=Ft((function(t,n,r){var i=t.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var a=t[Vt],o=[i],s="";"string"===typeof t.className?s=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,o,t.className):null!=t.className&&(s=t.className+" ");var u=Bt(o,void 0,e.useContext(Ut));s+=n.key+"-"+u.name;var c={};for(var l in t)jt.call(t,l)&&"css"!==l&&l!==Vt&&(c[l]=t[l]);return c.ref=r,c.className=s,e.createElement(e.Fragment,null,e.createElement(Ht,{cache:n,serialized:u,isStringTag:"string"===typeof a}),e.createElement(a,c))}));var Yt=Gt,Wt=(n(2110),function(t,n){var r=arguments;if(null==n||!jt.call(n,"css"))return e.createElement.apply(void 0,r);var i=r.length,a=new Array(i);a[0]=Yt,a[1]=function(e,t){var n={};for(var r in t)jt.call(t,r)&&(n[r]=t[r]);return n[Vt]=e,n}(t,n);for(var o=2;o<i;o++)a[o]=r[o];return e.createElement.apply(null,a)});function qt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Bt(t)}function Zt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kt(e){return Z(Z({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}Math.min,Math.max;var Xt=["top","right","bottom","left"];Xt.reduce((function(e,t){return e.concat(t,t+"-start",t+"-end")}),[]);function Qt(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Jt(e){return Qt(e).getComputedStyle(e)}function $t(e){return e instanceof Qt(e).Node}function en(e){return $t(e)?(e.nodeName||"").toLowerCase():"#document"}function tn(e){return e instanceof HTMLElement||e instanceof Qt(e).HTMLElement}function nn(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Qt(e).ShadowRoot||e instanceof ShadowRoot)}function rn(e){var t=Jt(e),n=t.overflow,r=t.overflowX,i=t.overflowY,a=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(a)}function an(e){return["table","td","th"].includes(en(e))}function on(e){var t=sn(),n=Jt(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((function(e){return(n.willChange||"").includes(e)}))||["paint","layout","strict","content"].some((function(e){return(n.contain||"").includes(e)}))}function sn(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function un(e){return["html","body","#document"].includes(en(e))}var cn=Math.min,ln=Math.max,hn=Math.round,fn=Math.floor,dn=function(e){return{x:e,y:e}};function pn(e){var t=Jt(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=tn(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=hn(n)!==a||hn(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function gn(e){return e instanceof Element||e instanceof Qt(e).Element}function vn(e){return gn(e)?e:e.contextElement}function mn(e){var t=vn(e);if(!tn(t))return dn(1);var n=t.getBoundingClientRect(),r=pn(t),i=r.width,a=r.height,o=r.$,s=(o?hn(n.width):n.width)/i,u=(o?hn(n.height):n.height)/a;return s&&Number.isFinite(s)||(s=1),u&&Number.isFinite(u)||(u=1),{x:s,y:u}}var yn=dn(0);function _n(e){var t=Qt(e);return sn()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:yn}function bn(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),a=vn(e),o=dn(1);t&&(r?gn(r)&&(o=mn(r)):o=mn(e));var s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Qt(e))&&t}(a,n,r)?_n(a):dn(0),u=(i.left+s.x)/o.x,c=(i.top+s.y)/o.y,l=i.width/o.x,h=i.height/o.y;if(a)for(var f=Qt(a),d=r&&gn(r)?Qt(r):r,p=f.frameElement;p&&r&&d!==f;){var g=mn(p),v=p.getBoundingClientRect(),m=getComputedStyle(p),y=v.left+(p.clientLeft+parseFloat(m.paddingLeft))*g.x,_=v.top+(p.clientTop+parseFloat(m.paddingTop))*g.y;u*=g.x,c*=g.y,l*=g.x,h*=g.y,u+=y,c+=_,p=Qt(p).frameElement}return Kt({width:l,height:h,x:u,y:c})}function xn(e){return gn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function wn(e){var t;return null==(t=($t(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function kn(e){return bn(wn(e)).left+xn(e).scrollLeft}function Sn(e){if("html"===en(e))return e;var t=e.assignedSlot||e.parentNode||nn(e)&&e.host||wn(e);return nn(t)?t.host:t}function Cn(e){var t=Sn(e);return un(t)?e.ownerDocument?e.ownerDocument.body:e.body:tn(t)&&rn(t)?t:Cn(t)}function Mn(e,t){var n;void 0===t&&(t=[]);var r=Cn(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=Qt(r);return i?t.concat(a,a.visualViewport||[],rn(r)?r:[]):t.concat(r,Mn(r))}function An(e,t,n){var r;if("viewport"===t)(function(e,t){var n=Qt(e),r=wn(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,u=0;if(i){i.width,i.height;var c=sn();(!c||c&&"fixed"===t)&&(i.offsetLeft,i.offsetTop)}return{width:a,height:o,x:s,y:u}})(e,n);else if("document"===t)(function(e){var t=wn(e),n=xn(e),r=e.ownerDocument.body,i=ln(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=ln(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),o=-n.scrollLeft+kn(e),s=-n.scrollTop;return"rtl"===Jt(r).direction&&ln(t.clientWidth,r.clientWidth)-i,{width:i,height:a,x:o,y:s}})(wn(e));else if(gn(t))(function(e,t){var n=bn(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=tn(e)?mn(e):dn(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}})(t,n);else{var i=_n(e);Z(Z({},t),{},{x:t.x-i.x,y:t.y-i.y})}return Kt(r)}function En(e,t){var n=Sn(e);return!(n===t||!gn(n)||un(n))&&("fixed"===Jt(n).position||En(n,t))}function Tn(e,t,n){var r=tn(t),i=wn(t),a="fixed"===n,o=bn(e,!0,a,t),s={scrollLeft:0,scrollTop:0},u=dn(0);if(r||!r&&!a)if(("body"!==en(t)||rn(i))&&(s=xn(t)),tn(t)){var c=bn(t,!0,a,t);u.x=c.x+t.clientLeft,u.y=c.y+t.clientTop}else i&&(u.x=kn(i));return{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function In(e,t){return tn(e)&&"fixed"!==Jt(e).position?t?t(e):e.offsetParent:null}function Ln(e,t){var n=Qt(e);if(!tn(e))return n;for(var r=In(e,t);r&&an(r)&&"static"===Jt(r).position;)r=In(r,t);return r&&("html"===en(r)||"body"===en(r)&&"static"===Jt(r).position&&!on(r))?n:r||function(e){for(var t=Sn(e);tn(t)&&!un(t);){if(on(t))return t;t=Sn(t)}return null}(e)||n}!function(){var e=_e(me().mark((function e(t){var n,r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reference,r=t.floating,i=t.strategy,a=this.getOffsetParent||Ln,o=this.getDimensions,e.t0=Tn,e.t1=n,e.next=6,a(r);case 6:return e.t2=e.sent,e.t3=i,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5=Z,e.t6={x:0,y:0},e.next=13,o(r);case 13:return e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.abrupt("return",{reference:e.t4,floating:e.t8});case 16:case"end":return e.stop()}}),e,this)})))}();var On=e.useLayoutEffect,Pn=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Dn=function(){};function Bn(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function Nn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=[].concat(r);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&a.push("".concat(Bn(e,o)));return a.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var Rn=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===U(e)&&null!==e?[e]:[];var t},jn=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Z({},Zt(e,Pn))},zn=function(e,t,n){var r=e.cx,i=e.getStyles,a=e.getClassNames,o=e.className;return{css:i(t,e),className:r(null!==n&&void 0!==n?n:{},a(t,e),o)}};function Fn(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Un(e){return Fn(e)?window.pageYOffset:e.scrollTop}function Vn(e,t){Fn(e)?window.scrollTo(0,t):e.scrollTop=t}function Hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dn,i=Un(e),a=t-i,o=0;!function t(){var s=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(o+=10,i,a,n);Vn(e,s),o<n?window.requestAnimationFrame(t):r(e)}()}function Gn(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?Vn(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&Vn(e,Math.max(t.offsetTop-i,0))}function Yn(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var Wn=!1,qn={get passive(){return Wn=!0}},Zn="undefined"!==typeof window?window:{};Zn.addEventListener&&Zn.removeEventListener&&(Zn.addEventListener("p",Dn,qn),Zn.removeEventListener("p",Dn,!1));var Kn=Wn;function Xn(e){return null!=e}function Qn(e,t,n){return e?t:n}var Jn=["children","innerProps"],$n=["children","innerProps"];function er(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,a=e.shouldScroll,o=e.isFixedPosition,s=e.controlHeight,u=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var l,h=u.getBoundingClientRect().height,f=n.getBoundingClientRect(),d=f.bottom,p=f.height,g=f.top,v=n.offsetParent.getBoundingClientRect().top,m=o?window.innerHeight:Fn(l=u)?window.innerHeight:l.clientHeight,y=Un(u),_=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),x=v-b,w=m-g,k=x+y,S=h-y-g,C=d-m+y+_,M=y+g-b,A=160;switch(i){case"auto":case"bottom":if(w>=p)return{placement:"bottom",maxHeight:t};if(S>=p&&!o)return a&&Hn(u,C,A),{placement:"bottom",maxHeight:t};if(!o&&S>=r||o&&w>=r)return a&&Hn(u,C,A),{placement:"bottom",maxHeight:o?w-_:S-_};if("auto"===i||o){var E=t,T=o?x:k;return T>=r&&(E=Math.min(T-_-s,t)),{placement:"top",maxHeight:E}}if("bottom"===i)return a&&Vn(u,C),{placement:"bottom",maxHeight:t};break;case"top":if(x>=p)return{placement:"top",maxHeight:t};if(k>=p&&!o)return a&&Hn(u,M,A),{placement:"top",maxHeight:t};if(!o&&k>=r||o&&x>=r){var I=t;return(!o&&k>=r||o&&x>=r)&&(I=o?x-b:k-b),a&&Hn(u,M,A),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var tr,nr=function(e){return"auto"===e?"bottom":e},rr=(0,e.createContext)(null),ir=function(t){var n=t.children,r=t.minMenuHeight,i=t.maxMenuHeight,a=t.menuPlacement,s=t.menuPosition,u=t.menuShouldScrollIntoView,c=t.theme,l=((0,e.useContext)(rr)||{}).setPortalPlacement,h=(0,e.useRef)(null),f=o((0,e.useState)(i),2),d=f[0],p=f[1],g=o((0,e.useState)(null),2),v=g[0],m=g[1],y=c.spacing.controlHeight;return On((function(){var e=h.current;if(e){var t="fixed"===s,n=er({maxHeight:i,menuEl:e,minHeight:r,placement:a,shouldScroll:u&&!t,isFixedPosition:t,controlHeight:y});p(n.maxHeight),m(n.placement),null===l||void 0===l||l(n.placement)}}),[i,a,s,u,r,l,y]),n({ref:h,placerProps:Z(Z({},t),{},{placement:v||nr(a),maxHeight:d})})},ar=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return Wt("div",be({},zn(e,"menu",{menu:!0}),{ref:n},r),t)},or=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return Z({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},sr=or,ur=or,cr=["size"],lr=["innerProps","isRtl","size"];var hr={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},fr=function(e){var t=e.size,n=Zt(e,cr);return Wt("svg",be({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:hr},n))},dr=function(e){return Wt(fr,be({size:20},e),Wt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},pr=function(e){return Wt(fr,be({size:20},e),Wt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},gr=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,a=r.colors;return Z({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*i,":hover":{color:n?a.neutral80:a.neutral40}})},vr=gr,mr=gr,yr=function(){var e=qt.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(tr||(tr=s(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),_r=function(e){var t=e.delay,n=e.offset;return Wt("span",{css:qt({animation:"".concat(yr," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},br=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,a=e.innerProps,o=e.menuIsOpen;return Wt("div",be({ref:i},zn(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":o}),a),t)},xr=["data"],wr=function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,a=e.Heading,o=e.headingProps,s=e.innerProps,u=e.label,c=e.theme,l=e.selectProps;return Wt("div",be({},zn(e,"group",{group:!0}),s),Wt(a,be({},o,{selectProps:l,theme:c,getStyles:r,getClassNames:i,cx:n}),u),Wt("div",null,t))},kr=["innerRef","isDisabled","isHidden","inputClassName"],Sr={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Cr={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Z({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Sr)},Mr=function(e){return Z({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Sr)},Ar=function(e){var t=e.children,n=e.innerProps;return Wt("div",n,t)};var Er=function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,a=e.isDisabled,o=e.removeProps,s=e.selectProps,u=n.Container,c=n.Label,l=n.Remove;return Wt(u,{data:r,innerProps:Z(Z({},zn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),i),selectProps:s},Wt(c,{data:r,innerProps:Z({},zn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},t),Wt(l,{data:r,innerProps:Z(Z({},zn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:s}))},Tr={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return Wt("div",be({},zn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||Wt(dr,null))},Control:br,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return Wt("div",be({},zn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||Wt(pr,null))},DownChevron:pr,CrossIcon:dr,Group:wr,GroupHeading:function(e){var t=jn(e);t.data;var n=Zt(t,xr);return Wt("div",be({},zn(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return Wt("div",be({},zn(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Wt("span",be({},t,zn(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=jn(e),i=r.innerRef,a=r.isDisabled,o=r.isHidden,s=r.inputClassName,u=Zt(r,kr);return Wt("div",be({},zn(e,"input",{"input-container":!0}),{"data-value":n||""}),Wt("input",be({className:t({input:!0},s),ref:i,style:Mr(o),disabled:a},u)))},LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,i=void 0===r?4:r,a=Zt(e,lr);return Wt("div",be({},zn(Z(Z({},a),{},{innerProps:t,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Wt(_r,{delay:0,offset:n}),Wt(_r,{delay:160,offset:!0}),Wt(_r,{delay:320,offset:!n}))},Menu:ar,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return Wt("div",be({},zn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(t){var n=t.appendTo,i=t.children,a=t.controlElement,s=t.innerProps,u=t.menuPlacement,c=t.menuPosition,l=(0,e.useRef)(null),h=(0,e.useRef)(null),f=o((0,e.useState)(nr(u)),2),d=f[0],p=f[1],g=(0,e.useMemo)((function(){return{setPortalPlacement:p}}),[]),v=o((0,e.useState)(null),2),m=v[0],y=v[1],_=(0,e.useCallback)((function(){if(a){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(a),t="fixed"===c?0:window.pageYOffset,n=e[d]+t;n===(null===m||void 0===m?void 0:m.offset)&&e.left===(null===m||void 0===m?void 0:m.rect.left)&&e.width===(null===m||void 0===m?void 0:m.rect.width)||y({offset:n,rect:e})}}),[a,c,d,null===m||void 0===m?void 0:m.offset,null===m||void 0===m?void 0:m.rect.left,null===m||void 0===m?void 0:m.rect.width]);On((function(){_()}),[_]);var b=(0,e.useCallback)((function(){"function"===typeof h.current&&(h.current(),h.current=null),a&&l.current&&(h.current=function(e,t,n,r){void 0===r&&(r={});var i=r,a=i.ancestorScroll,s=void 0===a||a,u=i.ancestorResize,c=void 0===u||u,l=i.elementResize,h=void 0===l?"function"==typeof ResizeObserver:l,f=i.layoutShift,d=void 0===f?"function"==typeof IntersectionObserver:f,p=i.animationFrame,g=void 0!==p&&p,v=vn(e),m=s||c?[].concat(z(v?Mn(v):[]),z(Mn(t))):[];m.forEach((function(e){s&&e.addEventListener("scroll",n,{passive:!0}),c&&e.addEventListener("resize",n)}));var y,_=v&&d?function(e,t){var n,r=null,i=wn(e);function a(){clearTimeout(n),r&&r.disconnect(),r=null}return function o(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),a();var c=e.getBoundingClientRect(),l=c.left,h=c.top,f=c.width,d=c.height;if(s||t(),f&&d){var p={rootMargin:-fn(h)+"px "+-fn(i.clientWidth-(l+f))+"px "+-fn(i.clientHeight-(h+d))+"px "+-fn(l)+"px",threshold:ln(0,cn(1,u))||1},g=!0;try{r=new IntersectionObserver(v,Z(Z({},p),{},{root:i.ownerDocument}))}catch(e){r=new IntersectionObserver(v,p)}r.observe(e)}function v(e){var t=e[0].intersectionRatio;if(t!==u){if(!g)return o();t?o(!1,t):n=setTimeout((function(){o(!1,1e-7)}),100)}g=!1}}(!0),a}(v,n):null,b=-1,x=null;h&&(x=new ResizeObserver((function(e){var r=o(e,1)[0];r&&r.target===v&&x&&(x.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame((function(){x&&x.observe(t)}))),n()})),v&&!g&&x.observe(v),x.observe(t));var w=g?bn(e):null;return g&&function t(){var r=bn(e);!w||r.x===w.x&&r.y===w.y&&r.width===w.width&&r.height===w.height||n(),w=r,y=requestAnimationFrame(t)}(),n(),function(){m.forEach((function(e){s&&e.removeEventListener("scroll",n),c&&e.removeEventListener("resize",n)})),_&&_(),x&&x.disconnect(),x=null,g&&cancelAnimationFrame(y)}}(a,l.current,_,{elementResize:"ResizeObserver"in window}))}),[a,_]);On((function(){b()}),[b]);var x=(0,e.useCallback)((function(e){l.current=e,b()}),[b]);if(!n&&"fixed"!==c||!m)return null;var w=Wt("div",be({ref:x},zn(Z(Z({},t),{},{offset:m.offset,position:c,rect:m.rect}),"menuPortal",{"menu-portal":!0}),s),i);return Wt(rr.Provider,{value:g},n?(0,r.createPortal)(w,n):w)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,i=Zt(e,$n);return Wt("div",be({},zn(Z(Z({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,i=Zt(e,Jn);return Wt("div",be({},zn(Z(Z({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:Er,MultiValueContainer:Ar,MultiValueLabel:Ar,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return Wt("div",be({role:"button"},n),t||Wt(dr,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,a=e.innerRef,o=e.innerProps;return Wt("div",be({},zn(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:a,"aria-disabled":n},o),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return Wt("div",be({},zn(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return Wt("div",be({},zn(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return Wt("div",be({},zn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return Wt("div",be({},zn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}},Ir=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Lr(t){var n=t.defaultInputValue,r=void 0===n?"":n,i=t.defaultMenuIsOpen,a=void 0!==i&&i,s=t.defaultValue,u=void 0===s?null:s,c=t.inputValue,l=t.menuIsOpen,h=t.onChange,f=t.onInputChange,d=t.onMenuClose,p=t.onMenuOpen,g=t.value,v=Zt(t,Ir),m=o((0,e.useState)(void 0!==c?c:r),2),y=m[0],_=m[1],b=o((0,e.useState)(void 0!==l?l:a),2),x=b[0],w=b[1],k=o((0,e.useState)(void 0!==g?g:u),2),S=k[0],C=k[1],M=(0,e.useCallback)((function(e,t){"function"===typeof h&&h(e,t),C(e)}),[h]),A=(0,e.useCallback)((function(e,t){var n;"function"===typeof f&&(n=f(e,t)),_(void 0!==n?n:e)}),[f]),E=(0,e.useCallback)((function(){"function"===typeof p&&p(),w(!0)}),[p]),T=(0,e.useCallback)((function(){"function"===typeof d&&d(),w(!1)}),[d]),I=void 0!==c?c:y,L=void 0!==l?l:x,O=void 0!==g?g:S;return Z(Z({},v),{},{inputValue:I,menuIsOpen:L,onChange:M,onInputChange:A,onMenuClose:T,onMenuOpen:E,value:O})}function Or(e,t){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Or(e,t)}function Pr(e){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pr(e)}function Dr(e,t){if(t&&("object"===U(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Br(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pr(e);if(t){var i=Pr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dr(this,n)}}var Nr=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Rr(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||Nr(r)&&Nr(i)))return!1;var r,i;return!0}for(var jr={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},zr=function(e){return Wt("span",be({css:jr},e))},Fr={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.isDisabled,i=e.tabSelectsValue;switch(e.context){case"menu":return"Use Up and Down to choose options".concat(r?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,a=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,a?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,a=void 0===i?"":i,o=e.selectValue,s=e.isDisabled,u=e.isSelected,c=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&o)return"value ".concat(a," focused, ").concat(c(o,n),".");if("menu"===t){var l=s?" disabled":"",h="".concat(u?"selected":"focused").concat(l);return"option ".concat(a," ").concat(h,", ").concat(c(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},Ur=function(t){var n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,a=t.focusableOptions,o=t.isFocused,s=t.selectValue,u=t.selectProps,c=t.id,l=u.ariaLiveMessages,h=u.getOptionLabel,f=u.inputValue,d=u.isMulti,p=u.isOptionDisabled,g=u.isSearchable,v=u.menuIsOpen,m=u.options,y=u.screenReaderStatus,_=u.tabSelectsValue,b=u["aria-label"],x=u["aria-live"],w=(0,e.useMemo)((function(){return Z(Z({},Fr),l||{})}),[l]),k=(0,e.useMemo)((function(){var e,t="";if(n&&w.onChange){var r=n.option,i=n.options,a=n.removedValue,o=n.removedValues,u=n.value,c=a||r||(e=u,Array.isArray(e)?null:e),l=c?h(c):"",f=i||o||void 0,d=f?f.map(h):[],g=Z({isDisabled:c&&p(c,s),label:l,labels:d},n);t=w.onChange(g)}return t}),[n,w,p,s,h]),S=(0,e.useMemo)((function(){var e="",t=r||i,n=!!(r&&s&&s.includes(r));if(t&&w.onFocus){var o={focused:t,label:h(t),isDisabled:p(t,s),isSelected:n,options:a,context:t===r?"menu":"value",selectValue:s};e=w.onFocus(o)}return e}),[r,i,h,p,w,a,s]),C=(0,e.useMemo)((function(){var e="";if(v&&m.length&&w.onFilter){var t=y({count:a.length});e=w.onFilter({inputValue:f,resultsMessage:t})}return e}),[a,f,v,w,m,y]),M=(0,e.useMemo)((function(){var e="";if(w.guidance){var t=i?"value":v?"menu":"input";e=w.guidance({"aria-label":b,context:t,isDisabled:r&&p(r,s),isMulti:d,isSearchable:g,tabSelectsValue:_})}return e}),[b,r,i,d,p,g,v,w,s,_]),A="".concat(S," ").concat(C," ").concat(M),E=Wt(e.Fragment,null,Wt("span",{id:"aria-selection"},k),Wt("span",{id:"aria-context"},A)),T="initial-input-focus"===(null===n||void 0===n?void 0:n.action);return Wt(e.Fragment,null,Wt(zr,{id:c},T&&E),Wt(zr,{"aria-live":x,"aria-atomic":"false","aria-relevant":"additions text"},o&&!T&&E))},Vr=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],Hr=new RegExp("["+Vr.map((function(e){return e.letters})).join("")+"]","g"),Gr={},Yr=0;Yr<Vr.length;Yr++)for(var Wr=Vr[Yr],qr=0;qr<Wr.letters.length;qr++)Gr[Wr.letters[qr]]=Wr.base;var Zr=function(e){return e.replace(Hr,(function(e){return Gr[e]}))},Kr=function(e,t){void 0===t&&(t=Rr);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var a=e.apply(this,r);return n={lastResult:a,lastArgs:r,lastThis:this},a}return r.clear=function(){n=null},r}(Zr),Xr=function(e){return e.replace(/^\s+|\s+$/g,"")},Qr=function(e){return"".concat(e.label," ").concat(e.value)},Jr=["innerRef"];function $r(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter((function(e){var t=o(e,1)[0];return!n.includes(t)}));return i.reduce((function(e,t){var n=o(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}(Zt(e,Jr),"onExited","in","enter","exit","appear");return Wt("input",be({ref:t},n,{css:qt({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ei=function(e){e.preventDefault(),e.stopPropagation()};var ti=["boxSizing","height","overflow","paddingRight","position"],ni={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ri(e){e.preventDefault()}function ii(e){e.stopPropagation()}function ai(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function oi(){return"ontouchstart"in window||navigator.maxTouchPoints}var si=!("undefined"===typeof window||!window.document||!window.document.createElement),ui=0,ci={capture:!1,passive:!1};var li=function(){return document.activeElement&&document.activeElement.blur()},hi={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function fi(t){var n=t.children,r=t.lockEnabled,i=t.captureEnabled,a=function(t){var n=t.isEnabled,r=t.onBottomArrive,i=t.onBottomLeave,a=t.onTopArrive,o=t.onTopLeave,s=(0,e.useRef)(!1),u=(0,e.useRef)(!1),c=(0,e.useRef)(0),l=(0,e.useRef)(null),h=(0,e.useCallback)((function(e,t){if(null!==l.current){var n=l.current,c=n.scrollTop,h=n.scrollHeight,f=n.clientHeight,d=l.current,p=t>0,g=h-f-c,v=!1;g>t&&s.current&&(i&&i(e),s.current=!1),p&&u.current&&(o&&o(e),u.current=!1),p&&t>g?(r&&!s.current&&r(e),d.scrollTop=h,v=!0,s.current=!0):!p&&-t>c&&(a&&!u.current&&a(e),d.scrollTop=0,v=!0,u.current=!0),v&&ei(e)}}),[r,i,a,o]),f=(0,e.useCallback)((function(e){h(e,e.deltaY)}),[h]),d=(0,e.useCallback)((function(e){c.current=e.changedTouches[0].clientY}),[]),p=(0,e.useCallback)((function(e){var t=c.current-e.changedTouches[0].clientY;h(e,t)}),[h]),g=(0,e.useCallback)((function(e){if(e){var t=!!Kn&&{passive:!1};e.addEventListener("wheel",f,t),e.addEventListener("touchstart",d,t),e.addEventListener("touchmove",p,t)}}),[p,d,f]),v=(0,e.useCallback)((function(e){e&&(e.removeEventListener("wheel",f,!1),e.removeEventListener("touchstart",d,!1),e.removeEventListener("touchmove",p,!1))}),[p,d,f]);return(0,e.useEffect)((function(){if(n){var e=l.current;return g(e),function(){v(e)}}}),[n,g,v]),function(e){l.current=e}}({isEnabled:void 0===i||i,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),o=function(t){var n=t.isEnabled,r=t.accountForScrollbars,i=void 0===r||r,a=(0,e.useRef)({}),o=(0,e.useRef)(null),s=(0,e.useCallback)((function(e){if(si){var t=document.body,n=t&&t.style;if(i&&ti.forEach((function(e){var t=n&&n[e];a.current[e]=t})),i&&ui<1){var r=parseInt(a.current.paddingRight,10)||0,o=document.body?document.body.clientWidth:0,s=window.innerWidth-o+r||0;Object.keys(ni).forEach((function(e){var t=ni[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(s,"px"))}t&&oi()&&(t.addEventListener("touchmove",ri,ci),e&&(e.addEventListener("touchstart",ai,ci),e.addEventListener("touchmove",ii,ci))),ui+=1}}),[i]),u=(0,e.useCallback)((function(e){if(si){var t=document.body,n=t&&t.style;ui=Math.max(ui-1,0),i&&ui<1&&ti.forEach((function(e){var t=a.current[e];n&&(n[e]=t)})),t&&oi()&&(t.removeEventListener("touchmove",ri,ci),e&&(e.removeEventListener("touchstart",ai,ci),e.removeEventListener("touchmove",ii,ci)))}}),[i]);return(0,e.useEffect)((function(){if(n){var e=o.current;return s(e),function(){u(e)}}}),[n,s,u]),function(e){o.current=e}}({isEnabled:r});return Wt(e.Fragment,null,r&&Wt("div",{onClick:li,css:hi}),n((function(e){a(e),o(e)})))}var di={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},pi=function(e){var t=e.name,n=e.onFocus;return Wt("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:di,value:"",onChange:function(){}})},gi=function(e){return e.label},vi=function(e){return e.value},mi={clearIndicator:mr,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,a=i.colors,o=i.borderRadius;return Z({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?a.neutral5:a.neutral0,borderColor:n?a.neutral10:r?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:r?a.primary:a.neutral30}})},dropdownIndicator:vr,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return Z({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,a=r.colors;return Z({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?a.neutral10:a.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,a=i.spacing,o=i.colors;return Z(Z({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},Cr),t?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,a=i.colors,o=i.spacing.baseUnit;return Z({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*o})},loadingMessage:ur,menu:function(e,t){var n,r=e.placement,i=e.theme,a=i.borderRadius,o=i.spacing,s=i.colors;return Z((W(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),W(n,"position","absolute"),W(n,"width","100%"),W(n,"zIndex",1),n),t?{}:{backgroundColor:s.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return Z({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,a=n.colors;return Z({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:a.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,a=e.cropWithEllipsis;return Z({overflow:"hidden",textOverflow:a||void 0===a?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,a=n.colors,o=e.isFocused;return Z({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},noOptionsMessage:sr,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,a=e.theme,o=a.spacing,s=a.colors;return Z({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?s.primary:r?s.primary25:"transparent",color:n?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?s.primary:s.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return Z({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,a=r.colors;return Z({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?a.neutral40:a.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,a=e.selectProps.controlShouldRenderValue;return Z({alignItems:"center",display:r&&i&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var yi,_i={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},bi={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Yn(),captureMenuScroll:!Yn(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var n=Z({ignoreCase:!0,ignoreAccents:!0,stringify:Qr,trim:!0,matchFrom:"any"},yi),r=n.ignoreCase,i=n.ignoreAccents,a=n.stringify,o=n.trim,s=n.matchFrom,u=o?Xr(t):t,c=o?Xr(a(e)):a(e);return r&&(u=u.toLowerCase(),c=c.toLowerCase()),i&&(u=Kr(u),c=Zr(c)),"start"===s?c.substr(0,u.length)===u:c.indexOf(u)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:gi,getOptionValue:vi,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function xi(e,t,n,r){return{type:"option",data:t,isDisabled:Ai(e,t,n),isSelected:Ei(e,t,n),label:Ci(e,t),value:Mi(e,t),index:r}}function wi(e,t){return e.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return xi(e,n,t,r)})).filter((function(t){return Si(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var a=xi(e,n,t,r);return Si(e,a)?a:void 0})).filter(Xn)}function ki(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,z(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function Si(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,a=t.isSelected,o=t.label,s=t.value;return(!Ii(e)||!a)&&Ti(e,{label:o,value:s,data:i},r)}var Ci=function(e,t){return e.getOptionLabel(t)},Mi=function(e,t){return e.getOptionValue(t)};function Ai(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function Ei(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=Mi(e,t);return n.some((function(t){return Mi(e,t)===r}))}function Ti(e,t,n){return!e.filterOption||e.filterOption(t,n)}var Ii=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},Li=1,Oi=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Or(e,t)}(r,t);var n=Br(r);function r(e){var t;if(F(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.instancePrefix="",t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,a=r.name;n.name=a,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,a=i.closeMenuOnSelect,o=i.isMulti,s=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:s}),a&&(t.setState({inputIsHiddenAfterUpdate:!o}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,a=n.name,o=t.state.selectValue,s=i&&t.isOptionSelected(e,o),u=t.isOptionDisabled(e,o);if(s){var c=t.getOptionValue(e);t.setValue(o.filter((function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(u)return void t.ariaOnChange(e,{action:"select-option",option:e,name:a});i?t.setValue([].concat(z(o),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),a=r.filter((function(e){return t.getOptionValue(e)!==i})),o=Qn(n,a,a[0]||null);t.onChange(o,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(Qn(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),a=Qn(e,i,i[0]||null);t.onChange(a,{action:"pop-value",removedValue:r})},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Nn.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return Ci(t.props,e)},t.getOptionValue=function(e){return Mi(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=mi[e](n,r);i.boxSizing="border-box";var a=t.props.styles[e];return a?a(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,Z(Z({},Tr),e.components);var e},t.buildCategorizedOptions=function(){return wi(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return ki(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:Z({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&Fn(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),a=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||a>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){t.blockOptionHover||t.state.focusedOption===e||t.setState({focusedOption:e})},t.shouldHideSelectedOptions=function(){return Ii(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,a=n.escapeClearsValue,o=n.inputValue,s=n.isClearable,u=n.isDisabled,c=n.menuIsOpen,l=n.onKeyDown,h=n.tabSelectsValue,f=n.openMenuOnFocus,d=t.state,p=d.focusedOption,g=d.focusedValue,v=d.selectValue;if(!u&&("function"!==typeof l||(l(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||o)return;t.focusValue("previous");break;case"ArrowRight":if(!r||o)return;t.focusValue("next");break;case"Delete":case"Backspace":if(o)return;if(g)t.removeValue(g);else{if(!i)return;r?t.popValue():s&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!h||!p||f&&t.isOptionSelected(p,v))return;t.selectOption(p);break;case"Enter":if(229===e.keyCode)break;if(c){if(!p)return;if(t.isComposing)return;t.selectOption(p);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:o}),t.onMenuClose()):s&&a&&t.clearValue();break;case" ":if(o)return;if(!c){t.openMenu("first");break}if(!p)return;t.selectOption(p);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.instancePrefix="react-select-"+(t.props.instanceId||++Li),t.state.selectValue=Rn(e.value),e.menuIsOpen&&t.state.selectValue.length){var i=t.buildFocusableOptions(),a=i.indexOf(t.state.selectValue[0]);t.state.focusedOption=i[a]}return t}return G(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Gn(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Gn(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,a=this.buildFocusableOptions(),o="first"===e?0:a.length-1;if(!this.props.isMulti){var s=a.indexOf(r[0]);s>-1&&(o=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:a[o]},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var a=n.length-1,o=-1;if(n.length){switch(e){case"previous":o=0===i?0:-1===i?a:i-1;break;case"next":i>-1&&i<a&&(o=i+1)}this.setState({inputIsHidden:-1!==o,focusedValue:n[o]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,a=r.indexOf(n);n||(a=-1),"up"===e?i=a>0?a-1:r.length-1:"down"===e?i=(a+1)%r.length:"pageup"===e?(i=a-t)<0&&(i=0):"pagedown"===e?(i=a+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(_i):Z(Z({},_i),this.props.theme):_i}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,a=this.selectOption,o=this.setValue,s=this.props,u=s.isMulti,c=s.isRtl,l=s.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:u,isRtl:c,options:l,selectOption:a,selectProps:s,setValue:o,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return Ai(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return Ei(this.props,e,t)}},{key:"filterOption",value:function(e,t){return Ti(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,n=t.isDisabled,r=t.isSearchable,i=t.inputId,a=t.inputValue,o=t.tabIndex,s=t.form,u=t.menuIsOpen,c=t.required,l=this.getComponents().Input,h=this.state,f=h.inputIsHidden,d=h.ariaSelection,p=this.commonProps,g=i||this.getElementId("input"),v=Z(Z(Z({"aria-autocomplete":"list","aria-expanded":u,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox"},u&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===d||void 0===d?void 0:d.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?e.createElement(l,be({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:g,innerRef:this.getInputRef,isDisabled:n,isHidden:f,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:o,form:s,type:"text",value:a},v)):e.createElement($r,be({id:g,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Dn,onFocus:this.onInputFocus,disabled:n,tabIndex:o,inputMode:"none",form:s,value:""},v))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,a=n.MultiValueLabel,o=n.MultiValueRemove,s=n.SingleValue,u=n.Placeholder,c=this.commonProps,l=this.props,h=l.controlShouldRenderValue,f=l.isDisabled,d=l.isMulti,p=l.inputValue,g=l.placeholder,v=this.state,m=v.selectValue,y=v.focusedValue,_=v.isFocused;if(!this.hasValue()||!h)return p?null:e.createElement(u,be({},c,{key:"placeholder",isDisabled:f,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),g);if(d)return m.map((function(n,s){var u=n===y,l="".concat(t.getOptionLabel(n),"-").concat(t.getOptionValue(n));return e.createElement(r,be({},c,{components:{Container:i,Label:a,Remove:o},isFocused:u,isDisabled:f,key:l,index:s,removeProps:{onClick:function(){return t.removeValue(n)},onTouchEnd:function(){return t.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),t.formatOptionLabel(n,"value"))}));if(p)return null;var b=m[0];return e.createElement(s,be({},c,{data:b,isDisabled:f}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,a=r.isLoading,o=this.state.isFocused;if(!this.isClearable()||!t||i||!this.hasValue()||a)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return e.createElement(t,be({},n,{innerProps:s,isFocused:o}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,a=r.isLoading,o=this.state.isFocused;if(!t||!a)return null;return e.createElement(t,be({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:o}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),n=t.DropdownIndicator,r=t.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,a=this.props.isDisabled,o=this.state.isFocused;return e.createElement(r,be({},i,{isDisabled:a,isFocused:o}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents().DropdownIndicator;if(!t)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,a={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return e.createElement(t,be({},n,{innerProps:a,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var t=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,a=n.Menu,o=n.MenuList,s=n.MenuPortal,u=n.LoadingMessage,c=n.NoOptionsMessage,l=n.Option,h=this.commonProps,f=this.state.focusedOption,d=this.props,p=d.captureMenuScroll,g=d.inputValue,v=d.isLoading,m=d.loadingMessage,y=d.minMenuHeight,_=d.maxMenuHeight,b=d.menuIsOpen,x=d.menuPlacement,w=d.menuPosition,k=d.menuPortalTarget,S=d.menuShouldBlockScroll,C=d.menuShouldScrollIntoView,M=d.noOptionsMessage,A=d.onMenuScrollToTop,E=d.onMenuScrollToBottom;if(!b)return null;var T,I=function(n,r){var i=n.type,a=n.data,o=n.isDisabled,s=n.isSelected,u=n.label,c=n.value,d=f===a,p=o?void 0:function(){return t.onOptionHover(a)},g=o?void 0:function(){return t.selectOption(a)},v="".concat(t.getElementId("option"),"-").concat(r),m={id:v,onClick:g,onMouseMove:p,onMouseOver:p,tabIndex:-1};return e.createElement(l,be({},h,{innerProps:m,data:a,isDisabled:o,isSelected:s,key:v,label:u,type:i,value:c,isFocused:d,innerRef:d?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())T=this.getCategorizedOptions().map((function(n){if("group"===n.type){var a=n.data,o=n.options,s=n.index,u="".concat(t.getElementId("group"),"-").concat(s),c="".concat(u,"-heading");return e.createElement(r,be({},h,{key:u,data:a,options:o,Heading:i,headingProps:{id:c,data:n.data},label:t.formatGroupLabel(n.data)}),n.options.map((function(e){return I(e,"".concat(s,"-").concat(e.index))})))}if("option"===n.type)return I(n,"".concat(n.index))}));else if(v){var L=m({inputValue:g});if(null===L)return null;T=e.createElement(u,h,L)}else{var O=M({inputValue:g});if(null===O)return null;T=e.createElement(c,h,O)}var P={minMenuHeight:y,maxMenuHeight:_,menuPlacement:x,menuPosition:w,menuShouldScrollIntoView:C},D=e.createElement(ir,be({},h,P),(function(n){var r=n.ref,i=n.placerProps,s=i.placement,u=i.maxHeight;return e.createElement(a,be({},h,P,{innerRef:r,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove,id:t.getElementId("listbox")},isLoading:v,placement:s}),e.createElement(fi,{captureEnabled:p,onTopArrive:A,onBottomArrive:E,lockEnabled:S},(function(n){return e.createElement(o,be({},h,{innerRef:function(e){t.getMenuListRef(e),n(e)},isLoading:v,maxHeight:u,focusedOption:f}),T)})))}));return k||"fixed"===w?e.createElement(s,be({},h,{appendTo:k,controlElement:this.controlRef,menuPlacement:x,menuPosition:w}),D):D}},{key:"renderFormField",value:function(){var t=this,n=this.props,r=n.delimiter,i=n.isDisabled,a=n.isMulti,o=n.name,s=n.required,u=this.state.selectValue;if(s&&!this.hasValue()&&!i)return e.createElement(pi,{name:o,onFocus:this.onValueInputFocus});if(o&&!i){if(a){if(r){var c=u.map((function(e){return t.getOptionValue(e)})).join(r);return e.createElement("input",{name:o,type:"hidden",value:c})}var l=u.length>0?u.map((function(n,r){return e.createElement("input",{key:"i-".concat(r),name:o,type:"hidden",value:t.getOptionValue(n)})})):e.createElement("input",{name:o,type:"hidden",value:""});return e.createElement("div",null,l)}var h=u[0]?this.getOptionValue(u[0]):"";return e.createElement("input",{name:o,type:"hidden",value:h})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,a=n.focusedValue,o=n.isFocused,s=n.selectValue,u=this.getFocusableOptions();return e.createElement(Ur,be({},t,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:a,isFocused:o,selectValue:s,focusableOptions:u}))}},{key:"render",value:function(){var t=this.getComponents(),n=t.Control,r=t.IndicatorsContainer,i=t.SelectContainer,a=t.ValueContainer,o=this.props,s=o.className,u=o.id,c=o.isDisabled,l=o.menuIsOpen,h=this.state.isFocused,f=this.commonProps=this.getCommonProps();return e.createElement(i,be({},f,{className:s,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:h}),this.renderLiveRegion(),e.createElement(n,be({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:h,menuIsOpen:l}),e.createElement(a,be({},f,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),e.createElement(r,be({},f,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,a=t.ariaSelection,o=t.isFocused,s=t.prevWasFocused,u=e.options,c=e.value,l=e.menuIsOpen,h=e.inputValue,f=e.isMulti,d=Rn(c),p={};if(n&&(c!==n.value||u!==n.options||l!==n.menuIsOpen||h!==n.inputValue)){var g=l?function(e,t){return ki(wi(e,t))}(e,d):[],v=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,d):null,m=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,g);p={selectValue:d,focusedOption:m,focusedValue:v,clearFocusValueOnUpdate:!1}}var y=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},_=a,b=o&&s;return o&&!b&&(_={value:Qn(f,d,d[0]||null),options:d,action:"initial-input-focus"},b=!s),"initial-input-focus"===(null===a||void 0===a?void 0:a.action)&&(_=null),Z(Z(Z({},p),y),{},{prevProps:e,ariaSelection:_,prevWasFocused:b})}}]),r}(e.Component);Oi.defaultProps=bi;var Pi,Di,Bi,Ni=(0,e.forwardRef)((function(t,n){var r=Lr(t);return e.createElement(Oi,be({ref:n},r))})),Ri=["title","titleId"];function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)}function zi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Fi(t,n){var r=t.title,i=t.titleId,a=zi(t,Ri);return e.createElement("svg",ji({width:"800px",height:"800px",viewBox:"-3 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,Pi||(Pi=e.createElement("g",{id:"icomoon-ignore"})),Di||(Di=e.createElement("path",{d:"M13.114 2.887c-7.243 0-13.114 5.871-13.114 13.113s5.871 13.113 13.114 13.113c7.242 0 13.112-5.871 13.112-13.113s-5.87-13.113-13.112-13.113zM13.114 28.064c-6.653 0-12.065-5.412-12.065-12.064s5.412-12.063 12.065-12.063c6.652 0 12.063 5.412 12.063 12.063s-5.411 12.064-12.063 12.064z",fill:"#000000"})),Bi||(Bi=e.createElement("path",{d:"M12.318 10.363l-0.742-0.742-6.379 6.379 6.379 6.379 0.742-0.742-5.113-5.113h12.726v-1.049h-12.726z",fill:"#000000"})))}var Ui,Vi,Hi,Gi=e.forwardRef(Fi),Yi=n.p+"static/media/arrow-left-solid.1a28b5c22bb710c9e9580c89a15750b6.svg",Wi=["title","titleId"];function qi(){return qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qi.apply(this,arguments)}function Zi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ki(t,n){var r=t.title,i=t.titleId,a=Zi(t,Wi);return e.createElement("svg",qi({width:"800px",height:"800px",viewBox:"-3 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,Ui||(Ui=e.createElement("g",{id:"icomoon-ignore"})),Vi||(Vi=e.createElement("path",{d:"M13.11 29.113c7.243 0 13.113-5.871 13.113-13.113s-5.87-13.113-13.113-13.113c-7.242 0-13.113 5.871-13.113 13.113s5.871 13.113 13.113 13.113zM13.11 3.936c6.652 0 12.064 5.412 12.064 12.064s-5.412 12.064-12.064 12.064c-6.653 0-12.064-5.412-12.064-12.064s5.411-12.064 12.064-12.064z",fill:"#000000"})),Hi||(Hi=e.createElement("path",{d:"M13.906 21.637l0.742 0.742 6.378-6.379-6.378-6.379-0.742 0.742 5.112 5.112h-12.727v1.049h12.727z",fill:"#000000"})))}var Xi,Qi=e.forwardRef(Ki),Ji=(n.p,["title","titleId"]);function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$i.apply(this,arguments)}function ea(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ta(t,n){var r=t.title,i=t.titleId,a=ea(t,Ji);return e.createElement("svg",$i({fill:"#000000",width:"800px",height:"800px",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,Xi||(Xi=e.createElement("path",{d:"M 16 1.5859375 L 10.292969 7.2929688 L 11.707031 8.7070312 L 15 5.4140625 L 15 15 L 5.4140625 15 L 8.7070312 11.707031 L 7.2929688 10.292969 L 1.5859375 16 L 7.2929688 21.707031 L 8.7070312 20.292969 L 5.4140625 17 L 15 17 L 15 26.585938 L 11.707031 23.292969 L 10.292969 24.707031 L 16 30.414062 L 21.707031 24.707031 L 20.292969 23.292969 L 17 26.585938 L 17 17 L 26.585938 17 L 23.292969 20.292969 L 24.707031 21.707031 L 30.414062 16 L 24.707031 10.292969 L 23.292969 11.707031 L 26.585938 15 L 17 15 L 17 5.4140625 L 20.292969 8.7070312 L 21.707031 7.2929688 L 16 1.5859375 z"})))}var na,ra,ia=e.forwardRef(ta),aa=(n.p,["title","titleId"]);function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oa.apply(this,arguments)}function sa(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ua(t,n){var r=t.title,i=t.titleId,a=sa(t,aa);return e.createElement("svg",oa({width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,na||(na=e.createElement("circle",{opacity:.5,cx:12,cy:12,r:10,stroke:"#1C274C",strokeWidth:1.5})),ra||(ra=e.createElement("path",{d:"M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15",stroke:"#1C274C",strokeWidth:1.5,strokeLinecap:"round"})))}var ca=e.forwardRef(ua),la=(n.p,Object.defineProperty),ha=Object.defineProperties,fa=Object.getOwnPropertyDescriptors,da=Object.getOwnPropertySymbols,pa=Object.prototype.hasOwnProperty,ga=Object.prototype.propertyIsEnumerable,va=Math.pow,ma=function(e,t,n){return t in e?la(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ya=function(e,t){for(var n in t||(t={}))pa.call(t,n)&&ma(e,n,t[n]);if(da){var r,i=Y(da(t));try{for(i.s();!(r=i.n()).done;){n=r.value;ga.call(t,n)&&ma(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},_a=function(e,t){return ha(e,fa(t))},ba=function(e,t,n,r,i,a,o,s,u,c,l){var h=null!=l?l:function(e,t){return"".concat(t?100/(3*e):100/e,"%")}(e,r),f=n?1:0,d="fade"===a?200:500,p="auto";return u&&(p=c?"100%":n?"auto":"0"),{width:h,height:p,padding:"0 ".concat(i?i/2:0,"px"),transition:a?"".concat(o||d,"ms ease 0s"):void 0,transform:"zoom"===a?"scale(".concat(t&&n?1:s||.85,")"):void 0,opacity:"fade"===a?f:1}},xa=function(t){var n,r=t.count,i=t.children,a=t.index,s=t.isCurrentSlide,u=t.typeOfSlide,c=t.wrapAround,l=t.cellSpacing,h=t.slideWidth,f=t.animation,d=t.speed,p=t.zoomScale,g=t.onVisibleSlideHeightChange,v=t.adaptiveHeight,m=t.initializedAdaptiveHeight,y=t.updateIOEntry,_=t.id,b=t.carouselRef,x=c?function(e,t,n){return"prev-cloned"===n?e-t:"next-cloned"===n?e+t:e}(a,r,u):a,w=(0,e.useRef)(null),k=function(t,n,r){var i=o((0,e.useState)(),2),a=i[0],s=i[1],u=(0,e.useRef)(r);return(0,e.useEffect)((function(){u.current=r}),[r]),(0,e.useEffect)((function(){var e=null==t?void 0:t.current,r=null==n?void 0:n.current;if(window.IntersectionObserver&&e&&r){var i=new IntersectionObserver((function(e){e.forEach((function(e){s(e),u.current(e)}))}),{threshold:[.05,.95],root:r});return i.observe(e),function(){return i.disconnect()}}}),[t,n]),a}(w,b,(function(e){y(_,(null==e?void 0:e.intersectionRatio)>=.95)})),S=!!(null==k?void 0:k.isIntersecting),C=(null!=(n=null==k?void 0:k.intersectionRatio)?n:1)>=.95,M=(0,e.useRef)(!1);(0,e.useEffect)((function(){var e,t=w.current;if(t){var n=null==(e=t.getBoundingClientRect())?void 0:e.height,r=M.current;S&&!r?g(x,n):!S&&r&&g(x,null),M.current=S}}),[x,S,g]);var A=s&&C?" slide-current":"";return(0,N.jsx)("div",_a(ya({ref:w},{inert:C?void 0:"true"}),{className:"slide".concat(A).concat(u?" ".concat(u):"").concat(C?" slide-visible":""),style:ba(r,s,C,c,l,f,d,p,v,m,h),children:i}))},wa={position:"absolute",width:"1px",height:"1px",overflow:"hidden",padding:0,margin:"-1px",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0},ka=function(e){var t=e.message,n=e.ariaLive,r=void 0===n?"polite":n;return(0,N.jsx)("div",{"aria-live":r,"aria-atomic":"true",style:wa,tabIndex:-1,children:t})},Sa=function(e,t,n,r,i,a,o){return t?n+i:n>=r-1||"left"===o&&n>=r-a?n:"remainder"===e&&"left"===o?Math.min(n+i,r-a):Math.min(n+i,r-1)},Ca=function(e,t,n,r,i,a){return t?n-r:n<=0||"right"===a&&n<=i-1?n:"remainder"===e&&"right"===a?Math.max(n-r,i-1):Math.max(n-r,0)},Ma=function(e,t){return(e%t+t)%t},Aa=function(e){return{border:0,background:"rgba(0,0,0,0.4)",color:"white",padding:10,textTransform:"uppercase",opacity:e?.3:1,cursor:e?"not-allowed":"pointer"}},Ea=function(e){var t=e.previousSlide,n=e.defaultControlsConfig,r=n.prevButtonClassName,i=n.prevButtonStyle,a=void 0===i?{}:i,o=n.prevButtonText,s=n.prevButtonOnClick,u=e.onUserNavigation,c=e.previousDisabled;return(0,N.jsx)("button",{className:r,style:ya(ya({},Aa(c)),a),disabled:c,onClick:function(e){null==s||s(e),e.defaultPrevented||(u(e),e.preventDefault(),t())},"aria-label":"previous",type:"button",children:o||"Prev"})},Ta=function(e){var t=e.nextSlide,n=e.defaultControlsConfig,r=n.nextButtonClassName,i=n.nextButtonStyle,a=void 0===i?{}:i,o=n.nextButtonText,s=n.nextButtonOnClick,u=e.nextDisabled,c=e.onUserNavigation;return(0,N.jsx)("button",{className:r,style:ya(ya({},Aa(u)),a),disabled:u,onClick:function(e){null==s||s(e),e.defaultPrevented||(c(e),e.preventDefault(),t())},"aria-label":"next",type:"button",children:o||"Next"})},Ia=function(e,t,n,r,i,a){var o=[],s=t<=0?1:t;if(i){for(var u=0;u<e;u+=s)o.push(u);return o}if("center"===a){for(var c=0;c<e-1;c+=s)o.push(c);return e>0&&o.push(e-1),o}if("left"===a){if(r>=e)return[0];for(var l=e-r,h=0;h<l;h+=s)o.push(h);return"remainder"===n?o.push(l):o.push(o[o.length-1]+s),o}if("right"===a){if(r>=e)return[e-1];var f=r-1;if("remainder"===n){for(var d=f;d<e-1;d+=s)o.push(d);o.push(e-1)}else{for(var p=e-1;p>f;p-=s)o.push(p);o.push(o[o.length-1]-s),o.reverse()}return o}return o},La=function(t){var n=t.pagingDotsIndices,r=t.defaultControlsConfig,i=r.pagingDotsContainerClassName,a=r.pagingDotsClassName,o=r.pagingDotsStyle,s=void 0===o?{}:o,u=r.pagingDotsOnClick,c=t.currentSlide,l=t.onUserNavigation,h=t.slideCount,f=t.goToSlide,d=(0,e.useCallback)((function(e){return{cursor:"pointer",opacity:e?1:.5,background:"transparent",border:"none",fill:"black"}}),[]),p=Ma(c,h);return(0,N.jsx)("ul",{className:i,style:{position:"relative",top:-10,display:"flex",margin:0,padding:0,listStyleType:"none"},children:n.map((function(e,t){var r=p===e||p<e&&(0===t||p>n[t-1]);return(0,N.jsx)("li",{className:r?"paging-item active":"paging-item",children:(0,N.jsx)("button",{className:a,type:"button",style:ya(ya({},d(r)),s),onClick:function(t){null==u||u(t),t.defaultPrevented||(l(t),f(e))},"aria-label":"slide ".concat(e+1," bullet"),"aria-selected":r,children:(0,N.jsx)("svg",{className:"paging-dot",width:"6",height:"6","aria-hidden":"true",focusable:"false",viewBox:"0 0 6 6",children:(0,N.jsx)("circle",{cx:"3",cy:"3",r:"3"})})})},e)}))})},Oa=function(e,t,n,r,i){var a=i?3*t:t,o=100/a,s=i?-100/3:0;"right"===r&&n>1&&(s+=o*(n-1));"center"===r&&n>1&&(s+=o*((n-1)/2));return s-100/a*e},Pa=e.forwardRef((function(t,n){var r=t.animation,i=t.animationDistance,a=t.cellAlign,s=t.children,u=t.currentSlide,c=t.disableAnimation,l=t.disableEdgeSwiping,h=t.draggedOffset,f=t.easing,d=t.edgeEasing,p=t.isDragging,g=t.scrollMode,v=t.slideCount,m=t.slidesToScroll,y=t.slidesToShow,_=t.speed,b=t.wrapAround,x=t.slideWidth,w=t.setIsAnimating,k=b?3*v:v,S=x?"calc(".concat(x," * ").concat(k,")"):"".concat(100*k/y,"%"),C=[v,y,a,b],M=Ia(v,m,g,y,b,a),A="".concat(h,"px");if(p&&l&&!b){var E=[M[0],M[M.length-1]].map((function(e){return Oa.apply(void 0,[e].concat(C))}));A="clamp(".concat(E[1],"%, ").concat(h,"px, ").concat(E[0],"%)")}var T,I=Oa.apply(void 0,[u].concat(C)),L=function(t,n,r,i){var a=o((0,e.useState)(1),2),s=a[0],u=a[1],c=(0,e.useRef)(Date.now()),l=(0,e.useRef)(),h=(0,e.useRef)(!0),f=(0,e.useRef)(null),d=null===f.current||f.current===r||i?s:0;return(0,e.useEffect)((function(){if(f.current=r,h.current)h.current=!1;else if(!i)return c.current=Date.now(),u(0),function e(){l.current=requestAnimationFrame((function(){var n=Date.now(),r=Math.min(1,(n-c.current)/t);u(r),r<1?e():l.current=void 0}))}(),function(){void 0!==l.current&&(cancelAnimationFrame(l.current),u(1))}}),[r,t,i]),{isAnimating:1!==d,value:n(d)}}(_,!l&&!b&&(u===M[0]&&i<0||u===M[M.length-1]&&i>0)?d:f,u+i,p||c||"fade"===r),O=L.value,P=L.isAnimating;if(p||0!==I||P)if(p)T="translateX(".concat(A,")");else{var D=P?(1-O)*i:0;T="translateX(calc(".concat(I,"% - ").concat(D,"px))")}return(0,e.useEffect)((function(){w(P)}),[P,w]),(0,N.jsx)("div",{ref:n,className:"slider-list",style:{width:S,textAlign:"left",userSelect:"auto",transform:T,display:"flex"},children:s})}));Pa.displayName="SliderList";var Da,Ba={position:"absolute",display:"flex",zIndex:1,top:0,left:0,bottom:0,right:0},Na=[{funcName:"renderTopLeftControls",key:"TopLeft"},{funcName:"renderTopCenterControls",key:"TopCenter"},{funcName:"renderTopRightControls",key:"TopRight"},{funcName:"renderCenterLeftControls",key:"CenterLeft"},{funcName:"renderCenterCenterControls",key:"CenterCenter"},{funcName:"renderCenterRightControls",key:"CenterRight"},{funcName:"renderBottomLeftControls",key:"BottomLeft"},{funcName:"renderBottomCenterControls",key:"BottomCenter"},{funcName:"renderBottomRightControls",key:"BottomRight"}],Ra=function(t,n,r,i,a,o,s){if(t.withoutControls)return null;var u=_a(ya({},t),{currentSlide:r,slideCount:n}),c=function(e){var t=e.cellAlign,n=e.currentSlide,r=e.slideCount,i=e.slidesToShow;return!e.wrapAround&&(n>=r-1||"left"===t&&n>=r-i)}(u),l=function(e){var t=e.cellAlign,n=e.currentSlide,r=e.slidesToShow;return!e.wrapAround&&(0===n||"right"===t&&n<=r-1)}(u),h=Ia(n,s,t.scrollMode,t.slidesToShow,t.wrapAround,t.cellAlign);return Na.map((function(u){var f,d;return t[u.funcName]&&"function"===typeof t[u.funcName]?(0,N.jsx)("div",{style:_a(ya({},(d=u.key,ya(ya({},function(e){var t,n;switch(e){case"TopLeft":case"TopCenter":case"TopRight":t="flex-start";break;case"CenterLeft":case"CenterCenter":case"CenterRight":t="center";break;case"BottomLeft":case"BottomCenter":case"BottomRight":t="flex-end"}switch(e){case"TopLeft":case"CenterLeft":case"BottomLeft":n="flex-start";break;case"TopCenter":case"CenterCenter":case"BottomCenter":n="center";break;case"TopRight":case"CenterRight":case"BottomRight":n="flex-end"}return{alignItems:t,justifyContent:n}}(d)),Ba))),{pointerEvents:"none"}),children:(0,N.jsx)("div",{className:["slider-control-".concat(u.key.toLowerCase()),t.defaultControlsConfig.containerClassName||""].join(" ").trim(),style:{pointerEvents:"auto"},children:null==(f=t[u.funcName])?void 0:f.call(t,{cellAlign:t.cellAlign,cellSpacing:t.cellSpacing,currentSlide:r,defaultControlsConfig:t.defaultControlsConfig||{},pagingDotsIndices:h,goToSlide:i,nextDisabled:c,nextSlide:a,onUserNavigation:t.onUserNavigation,previousDisabled:l,previousSlide:o,scrollMode:t.scrollMode,slideCount:n,slidesToScroll:s,slidesToShow:t.slidesToShow||1,vertical:t.vertical,wrapAround:t.wrapAround})})},u.funcName):(0,N.jsx)(e.Fragment,{},u.funcName)}))},ja=function(e){return va(e-1,3)+1},za={adaptiveHeight:!1,adaptiveHeightAnimation:!0,afterSlide:function(){},autoplay:!1,autoplayInterval:3e3,autoplayReverse:!1,beforeSlide:function(){},cellAlign:"left",cellSpacing:0,defaultControlsConfig:{},disableAnimation:!1,disableEdgeSwiping:!1,dragging:!0,dragThreshold:.5,easing:ja,edgeEasing:ja,enableKeyboardControls:!1,frameAriaLabel:"carousel-slider",keyCodeConfig:{nextSlide:[39,68,38,87],previousSlide:[37,65,40,83],firstSlide:[81],lastSlide:[69],pause:[32]},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onUserNavigation:function(){},pauseOnHover:!0,renderAnnounceSlideMessage:function(e){var t=e.currentSlide,n=e.count;return"Slide ".concat(t+1," of ").concat(n)},renderBottomCenterControls:function(e){return(0,N.jsx)(La,ya({},e))},renderCenterLeftControls:function(e){return(0,N.jsx)(Ea,ya({},e))},renderCenterRightControls:function(e){return(0,N.jsx)(Ta,ya({},e))},scrollMode:"page",slidesToScroll:1,slidesToShow:1,speed:500,style:{},swiping:!0,vertical:!1,withoutControls:!1,wrapAround:!1,children:(0,N.jsx)(N.Fragment,{})},Fa=function(t,n,r){var i=function(t){var n=o((0,e.useState)(t),2),r=n[0],i=n[1],a=(0,e.useRef)(t);return[r,(0,e.useCallback)((function(e){a.current=e,i(e)}),[]),a]}([]),a=o(i,3),s=a[0],u=a[1],c=a[2],l=o((0,e.useState)(!1),2),h=l[0],f=l[1];return{handleVisibleSlideHeightChange:(0,e.useCallback)((function(e,t){var i,a=c.current;i=null===t?a.filter((function(t){return t.slideIndex!==e})):[].concat(z(a),[{slideIndex:e,height:t}]),u(i),i.length>=Math.min(r,Math.ceil(n))&&f(!0)}),[r,u,n,c]),frameHeight:(0,e.useMemo)((function(){if(t){if(!h)return"auto";var e=Math.max.apply(Math,[0].concat(z(s.map((function(e){return e.height})))));return"".concat(e,"px")}return"auto"}),[t,h,s]),initializedAdaptiveHeight:h}},Ua=e.forwardRef((function(t,n){var r=t,i=r.adaptiveHeight,a=r.adaptiveHeightAnimation,s=r.afterSlide,u=r.animation,c=r.autoplay,l=r.autoplayInterval,h=r.autoplayReverse,f=r.beforeSlide,d=r.cellAlign,p=r.cellSpacing,g=r.children,v=r.className,m=r.disableAnimation,y=r.dragging,_=r.dragThreshold,b=r.enableKeyboardControls,x=r.frameAriaLabel,w=r.keyCodeConfig,k=r.onDrag,S=r.onDragEnd,C=r.onDragStart,M=r.onUserNavigation,A=r.pauseOnHover,E=r.renderAnnounceSlideMessage,T=r.scrollMode,I=r.slideIndex,L=r.slidesToScroll,O=r.slidesToShow,P=r.slideWidth,D=r.speed,B=r.style,R=r.swiping,j=r.wrapAround,z=r.zoomScale,F=e.Children.toArray(g).filter(Boolean),U=F.length,V=P||"auto"===L?"left":d,H="auto"===L?"remainder":T,G=o((0,e.useState)(new Map),2),Y=G[0],W=G[1],q=Array.from(Y).filter((function(e){return o(e,2)[1]})).length,Z=o((0,e.useState)(q),2),K=Z[0],X=Z[1],Q=P?K:O,J="fade"===u?Q:"auto"===L?Math.max(K,1):L,$=(0,e.useState)((function(){return function(e,t,n,r,i,a,o){if(void 0!==e)return e;var s=Ia(t,r,o,n,!1,i);return a?s[s.length-1]:s[0]}(I,U,Q,J,V,h,H)})),ee=o($,2),te=ee[0],ne=ee[1],re=o((0,e.useState)(!1),2),ie=re[0],ae=re[1],oe=o((0,e.useState)(!1),2),se=oe[0],ue=oe[1],ce=o((0,e.useState)(0),2),le=ce[0],he=ce[1],fe=o((0,e.useState)(0),2),de=fe[0],pe=fe[1],ge=o((0,e.useState)(!1),2),ve=ge[0],me=ge[1],ye=(0,e.useCallback)((function(e,t){!!Y.get(e)!==t&&W((function(n){var r=new Map(n);return r.set(e,t),r}))}),[Y]),_e=(0,e.useRef)(!1);(0,e.useEffect)((function(){se&&(_e.current=!0),se||ve||(_e.current||X(q),_e.current=!1)}),[ve,se,q]);var be=(0,e.useRef)(null),xe=(0,e.useRef)(0),we=(0,e.useRef)(null),ke=(0,e.useRef)(null),Se=(0,e.useRef)(),Ce=(0,e.useRef)(null),Me=(0,e.useRef)(!0),Ae=(0,e.useCallback)((function(e){e&&e.querySelectorAll(".slider-list img").forEach((function(e){return e.setAttribute("draggable","false")})),we.current=e}),[]);(0,e.useEffect)((function(){return Me.current=!0,function(){Me.current=!1}}),[]);var Ee=function(t){var n=(0,e.useRef)(null);return(0,e.useEffect)((function(){t&&("function"===typeof t?t(n.current):t.current=n.current)}),[t]),n}(n),Te=Ee||ke,Ie=(0,e.useCallback)((function(e){if(we.current&&Te.current){var t=Ma(e,U),n=e!==te;n&&f(te,t);var r=we.current.getBoundingClientRect().left-Te.current.getBoundingClientRect().left,i=we.current.offsetWidth,a=Oa(t,U,Q,V,j)/100*i;if(j){var o=i/3;e<0&&(a+=o),e>=U&&(a-=o)}if(pe(a-r),n)ne(t),setTimeout((function(){Me.current&&s(t)}),m?40:D||500)}}),[s,f,Te,V,te,m,D,U,Q,j]),Le=(0,e.useCallback)((function(){var e=Sa(H,j,te,U,J,Q,V);te!==e&&Ie(e)}),[V,te,Ie,J,H,U,Q,j]),Oe=(0,e.useCallback)((function(){var e=Ca(H,j,te,J,Q,V);te!==e&&Ie(e)}),[V,te,Ie,J,H,Q,j]),Pe=(0,e.useRef)(I);(0,e.useEffect)((function(){void 0===I||I===Pe.current||h||(Ie(I),Pe.current=I)}),[I,h,Ie]),(0,e.useEffect)((function(){var e=null;return ie&&(e=Date.now()),function(){null!==e&&null!==Ce.current&&(Ce.current+=Date.now()-e)}}),[ie]),(0,e.useEffect)((function(){if(c&&!ie){var e=null!==Ce.current?l-(Date.now()-Ce.current):l;Se.current=setTimeout((function(){Ce.current=Date.now(),h?Oe():Le()}),e)}return c&&ie&&clearTimeout(Se.current),function(){clearTimeout(Se.current)}}),[ie,c,l,h,Oe,Le]);var De=(0,e.useRef)([]),Be=function(e){if(se&&Te.current){ue(!1);var t=0;if(De.current.length>1)for(var n=De.current[0],r=De.current[De.current.length-1],i=r.time-n.time,a=9*Math.abs((r.pos-n.pos)/i);Math.abs(a)>1;)t+=a,a*=.92;De.current=[];var o=Math.abs(le)+Math.abs(t);S(e),be.current=null,he(0);var s=Te.current.offsetWidth*Math.min(1,J/Q),u=s*_;if(o<u)Ie(te);else{for(var c=Q>=2*J?1+Math.floor((o-u)/s):1,l=te,h=0;h<c;h+=1)l=le>0?Sa(H,j,l,U,J,Q,V):Ca(H,j,l,J,Q,V);l!==te&&M(e),Ie(l)}}},Ne=(0,e.useCallback)((function(e){R&&we.current&&Te.current&&(ue(!0),xe.current=we.current.getBoundingClientRect().left-Te.current.getBoundingClientRect().left,C(e))}),[Te,C,R]),Re=(0,e.useCallback)((function(e){if(se){for(var t=null===be.current,n=null!==be.current?e-be.current:0,r=le+n,i=Date.now();De.current.length>0&&!(i-De.current[0].time<=100);)De.current.shift();De.current.push({pos:r,time:i}),t||he(r),be.current=e}}),[se,le]),je=(0,e.useCallback)((function(e){if(se&&Te.current){C(e);var t=Te.current.offsetWidth-e.touches[0].pageX;Re(t)}}),[se,Te,Re,C]),ze=(0,e.useCallback)((function(e){y&&we.current&&Te.current&&(ue(!0),xe.current=we.current.getBoundingClientRect().left-Te.current.getBoundingClientRect().left,C(e))}),[Te,y,C]),Fe=(0,e.useCallback)((function(e){if(se&&Te.current){k(e);var t=e.clientX-Te.current.getBoundingClientRect().left,n=Te.current.offsetWidth-t;Re(n)}}),[Te,se,Re,k]),Ue=function(e){e.preventDefault(),Be(e)},Ve=(0,e.useCallback)((function(){A&&ae(!0)}),[A]),He=(0,e.useCallback)((function(){A&&ae(!1)}),[A]),Ge=Fa(i,Q,U),Ye=Ge.frameHeight,We=Ge.handleVisibleSlideHeightChange,qe=Ge.initializedAdaptiveHeight,Ze=function(e){var t=F.map((function(t,n){return(0,N.jsx)(xa,{id:"".concat(e,"-").concat(n),count:U,index:n,isCurrentSlide:te===n,typeOfSlide:e,wrapAround:j,cellSpacing:p,animation:u,speed:D,zoomScale:z,onVisibleSlideHeightChange:We,slideWidth:P,updateIOEntry:ye,adaptiveHeight:i,initializedAdaptiveHeight:qe,carouselRef:Te,children:t},"".concat(e,"-").concat(n))}));return t};return(0,N.jsxs)("div",{className:"slider-container",style:{position:"relative"},onMouseEnter:Ve,onMouseLeave:He,children:[(0,N.jsx)(ka,{ariaLive:c&&!ie?"off":"polite",message:E({currentSlide:te,count:U})}),Ra(r,U,te,Ie,Le,Oe,J),(0,N.jsx)("div",{className:["slider-frame",v||""].join(" ").trim(),style:ya({overflow:"hidden",width:"100%",position:"relative",outline:"none",touchAction:"pan-y",height:Ye,transition:a?"height 300ms ease-in-out":void 0,willChange:"height",userSelect:"none"},B),"aria-label":x,role:"region",tabIndex:b?0:-1,onKeyDown:b?function(e){var t=null;if(Object.keys(w).forEach((function(n){var r;(null==(r=w[n])?void 0:r.includes(e.keyCode))&&(t=n)})),null!==t)switch(e.preventDefault(),e.stopPropagation(),t){case"nextSlide":M(e),Le();break;case"previousSlide":M(e),Oe();break;case"firstSlide":case"lastSlide":M(e);var n=Ia(U,J,H,Q,j,V);Ie("firstSlide"===t?n[0]:n[n.length-1]);break;case"pause":ae((function(e){return!e}))}}:void 0,ref:Te,onMouseUp:Ue,onMouseDown:ze,onMouseMove:Fe,onMouseLeave:Ue,onTouchStart:Ne,onTouchEnd:Be,onTouchMove:je,children:(0,N.jsxs)(Pa,{animationDistance:de,cellAlign:V,currentSlide:te,disableEdgeSwiping:r.disableEdgeSwiping,draggedOffset:xe.current-le,disableAnimation:m,easing:r.easing,edgeEasing:r.edgeEasing,isDragging:se,ref:Ae,scrollMode:H,animation:u,slideCount:U,slidesToScroll:J,slidesToShow:Q,speed:D,slideWidth:P,wrapAround:j,setIsAnimating:me,children:[j?Ze("prev-cloned"):null,Ze(),j?Ze("next-cloned"):null]})})]})}));Ua.defaultProps=za,Ua.displayName="Carousel";var Va,Ha,Ga=(0,c.default)(Ua).withConfig({displayName:"Atomic__CarouselContainer",componentId:"sc-1w70hpw-0"})(["border-bottom:2px solid #c4c4c4;position:relative;"]),Ya=c.default.div.withConfig({displayName:"Atomic__Icon",componentId:"sc-1w70hpw-1"})(["display:inline-block;width:24px;height:24px;cursor:pointer;"," svg{fill:currentColor;width:100%;height:100%;we}"],(function(e){return e.hoverable&&"\n    @media(hover) {\n      &:hover {\n        opacity: 0.5\n      }\n    }\n  "})),Wa=c.default.textarea.withConfig({displayName:"Atomic__TextArea",componentId:"sc-1w70hpw-2"})(["background-color:transparent;padding:10px 20px;color:#414042;font-size:15px;border:1px black solid;width:100%;min-height:100px;font-family:Inter,sans-serif;outline:none;resize:none;placeholder:'Input your text here';&::placeholder{color:#999999;font-style:italic;placeholder:'Input your text here';}&:hover{border:1px black solid;}&:focus{border:1px black solid;outline:none;}"]),qa=(c.default.div.withConfig({displayName:"Atomic__Row",componentId:"sc-1w70hpw-3"})(["margin-bottom:10px;&:last-child{margin-bottom:0;}"]),c.default.label.withConfig({displayName:"Atomic__ItemLabel",componentId:"sc-1w70hpw-4"})(["font-size:14px;display:block;margin-bottom:5px;span{float:right;color:black;cursor:pointer;&:hover{opacity:0.6;}}"]),c.default.button.withConfig({displayName:"Atomic__Button",componentId:"sc-1w70hpw-5"})(["display:flex;justify-content:center;align-items:center;width:",";background-color:",";color:",";min-height:38px;padding:",";text-align:center;text-transform:",";border:",";cursor:",";border-radius:4px;"," "," "," "," + span{margin-left:10px;}span{display:flex;text-align:center;justify-content:center;align-items:center;}"],(function(e){return e.isFullWidth?"100%":e.outline?"60px":e.primary?"200px":"60px"}),(function(e){return e.primary?"#297ca3":"white"}),(function(e){return e.outline?"black":e.primary?"white":"#297CA3"}),(function(e){return e.outline?"":"5px 10px 5px 10px"}),(function(e){return e.uppercase?"uppercase":"none"}),(function(e){return e.outline,"1px solid #297CA3"}),(function(e){return e.disabled?"auto":"pointer"}),(function(e){return e.selected&&"\n    border: 1px solid black;\n  "}),(function(e){return!e.disabled&&"\n      &:hover {\n        background-color: ".concat(e.outline?"white":(e.primary,"#297ca3"),";\n        border: ").concat(e.outline?"1px solid black":"1px solid #4b6074",";\n        color: ").concat(e.outline?"black":"white",";\n      }\n  ")}),(function(e){return e.disabled&&"\n      background-color: lightgray;\n      border: 1px solid gray;\n      color: #313c46;\n  "}),Ya)),Za=(c.default.div.withConfig({displayName:"Atomic__Columns",componentId:"sc-1w70hpw-6"})(["width:100%;display:grid;grid-template-columns:repeat(",",1fr);"],(function(e){return e.columns})),c.default.div.withConfig({displayName:"Atomic__Rows",componentId:"sc-1w70hpw-7"})(["width:100%;display:grid;grid-template-rows:repeat(",",1fr);"],(function(e){return e.rows})),c.default.button.withConfig({displayName:"Atomic__CloseEditorButton",componentId:"sc-1w70hpw-8"})(["position:fixed;bottom:0px;left:0;width:100%;padding:20px;color:white;height:60px;background-color:#297ca3;height:auto;font-weight:bold;z-index:11;justify-content:center;"])),Ka=(0,c.css)(Da||(Da=s(["\n\tposition: absolute;\n\tleft: 10px;\n\ttop: 5px;\n\tbackground-color: #f1f1f1;\n\tborder-radius: 30px;\n\twidth: 32px;\n\theight: 32px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 3;\n"]))),Xa=c.default.div.withConfig({displayName:"Atomic__ArrowLeft",componentId:"sc-1w70hpw-9"})(["",";"],Ka),Qa=c.default.div.withConfig({displayName:"Atomic__ArrowRight",componentId:"sc-1w70hpw-10"})(["",";left:auto;right:10px;"],Ka),Ja=(0,c.default)(Ya).withConfig({displayName:"Atomic__ArrowLeftIconStyled",componentId:"sc-1w70hpw-11"})(["font-size:22px;"]),$a=(0,c.default)(Ya).withConfig({displayName:"Atomic__ArrowRightIconStyled",componentId:"sc-1w70hpw-12"})(["font-size:22px;"]),eo=((0,c.default)(Ya).withConfig({displayName:"Atomic__ZoomInIcon",componentId:"sc-1w70hpw-13"})(["position:absolute;left:20px;top:calc(30%);width:32px;height:32px;z-index:3;"]),(0,c.default)(Ya).withConfig({displayName:"Atomic__ZoomOutIcon",componentId:"sc-1w70hpw-14"})(["position:absolute;left:20px;top:calc(30% + 50px);width:32px;height:32px;z-index:3;"]),(0,c.default)(qa).withConfig({displayName:"Atomic__AddToCartButton",componentId:"sc-1w70hpw-15"})(["min-width:200px;background-color:#297ca3;font-family:'Inter';font-size:18px;"])),to=c.default.div.withConfig({displayName:"Atomic__TooltipContent",componentId:"sc-1w70hpw-16"})(["padding:10px;"]),no=["title","titleId"];function ro(){return ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ro.apply(this,arguments)}function io(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ao(t,n){var r=t.title,i=t.titleId,a=io(t,no);return e.createElement("svg",ro({width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,Va||(Va=e.createElement("circle",{opacity:.5,cx:12,cy:12,r:10,stroke:"#1C274C",strokeWidth:1.5})),Ha||(Ha=e.createElement("path",{d:"M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5",stroke:"#1C274C",strokeWidth:1.5,strokeLinecap:"round"})))}var oo,so,uo,co,lo,ho,fo,po,go=e.forwardRef(ao),vo=(n.p,["message","eventMessage","buttonYesLabel","buttonNoLabel","onYesClick","onNoClick"]),mo=document.getElementById("dialogs-portal"),yo=e.createContext({dialogId:""});function _o(){var t=re(),n=t.addDialog,r=t.removeDialog;return{currentDialogId:(0,e.useContext)(yo).dialogId,showDialog:function(e,t){return n(e,t)},closeDialog:function(e){return r(e)}}}var bo,xo,wo=c.default.div(oo||(oo=s(["\n\tposition: fixed;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 40px;\n\toverflow: auto;\n\tz-index: 12;\n\t@media (max-width: 1024px) {\n\t\tpadding: 20px;\n\t}\n"]))),ko=c.default.div(so||(so=s(["\n\tpadding: 20px;\n\tbackground-color: rgb(235, 237, 242);;\n\tborder-radius: 5px;\n\tflex-basis: 600px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\tmin-width: 0;\n"]))),So=(0,c.default)(go)(uo||(uo=s(["\n\tposition: absolute;\n\tright: 10px;\n\ttop: 10px;\n\tcursor: pointer;\n\tfont-size: 20px;\n\tz-index: 999;\n\twidth: 24px;\n\theight: 24px;\n\n\t&:hover {\n\t\topacity: 0.5;\n\t}\n"]))),Co=function(e){var t=e.children,n=e.className,r=e.showCloseButton,i=void 0===r||r,a=e.onClose;return(0,N.jsxs)(ko,{className:n,children:[i&&(0,N.jsx)(So,{onClick:a}),t]})},Mo=c.default.div(co||(co=s(["\n\toverflow-y: auto;\n\tpadding: 4px;\n\tflex: 1;\n\tmin-height: 0;\n\t","\n"])),(function(e){return e.hasTitle&&"margin-top: 20px;"})),Ao=(0,c.default)(qa)(lo||(lo=s(["\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(e){return!e.isSaveButton&&"min-width:200px"}),(function(e){return e.isFullWidth&&"width: 100%"}),(function(e){return e.upperCase&&"text-transform: uppercase"}),(function(e){return e.isMobile&&"\n    flex:1;\n    width:unset;\n    font-size:12px;\n    min-width: 100px;\n    "})),Eo=c.default.div(ho||(ho=s(["\n\tdisplay: flex;\n\talign-items: center;\n\t",";\n\t",";\n\t",";\n\tpadding: 20px 4px 0px 4px;\n\n\t"," + "," {\n\t\tmargin-left: ",";\t\n\t}\n"])),(function(e){return"left"===e.alignButtons&&"justify-content:flex-start"}),(function(e){return"center"===e.alignButtons&&"justify-content:center"}),(function(e){return("right"===e.alignButtons||!e.alignButtons)&&"justify-content:flex-end"}),Ao,Ao,(function(e){return e.noMarginFooterButton?"0":e.marginButtons?e.marginButtons+"px":"20px"})),To=c.default.h1(fo||(fo=s(["\n\tfont-size: 15px;\n\ttext-align: left;\n\tmargin: 0;\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tpadding: 20px;\n\twidth: 100%;\n"]))),Io=e.forwardRef((function(t,n){var r=t.windowDecorator||Co,i=re(),a=i.removeDialog,o=i.isMobile,s=(0,e.useContext)(yo).dialogId,u=t.onClose||function(){return a(s)};return(0,N.jsx)(wo,{children:e.createElement(r,{onClose:u,showCloseButton:t.showCloseButton},(0,N.jsxs)(e.Fragment,{children:[t.title&&(0,N.jsx)(To,{children:t.title}),(0,N.jsx)(Mo,{ref:n,hasTitle:void 0!==t.title,children:(0,N.jsx)(e.Suspense,{fallback:"Loading...",children:t.children})}),t.buttons&&t.buttons.length>0&&(0,N.jsx)(Eo,{isMobile:o,noMarginFooterButton:t.noMarginFooterButton,alignButtons:t.alignButtons,marginButtons:t.marginButtons,children:t.buttons.map((function(e){return(0,N.jsx)(Ao,{isMobile:o,isFullWidth:e.isFullWidth,upperCase:e.upperCase,isSaveButton:e.isSaveButton,disabled:e.disabled,primary:!e.secondary,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:e.label},e.label)}))})]}))})})),Lo=function(e){var t=re().dialogs;return(0,N.jsx)(N.Fragment,{children:(0,r.createPortal)(t.map((function(e){return(0,N.jsx)(yo.Provider,{value:{dialogId:e.id},children:e.dialog},e.id)})),mo)})},Oo=(0,c.default)(Co)(po||(po=s(["\n\tmax-width: 600px;\n"]))),Po=function(t){var n=t.message,r=t.eventMessage,i=t.buttonYesLabel,a=t.buttonNoLabel,o=t.onYesClick,s=t.onNoClick,u=Zt(t,vo),c=_o().closeDialog,l=(0,e.useContext)(yo).dialogId;return(0,N.jsxs)(Io,Z(Z({windowDecorator:Oo,buttons:[{label:i||"Yes",onClick:o||function(){return c(l)}},{label:a||"No",secondary:!0,onClick:s||function(){return c(l)}}]},u),{},{children:[n&&(0,N.jsx)("p",{children:n}),r&&(0,N.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})]}))},Do=c.default.div(bo||(bo=s(["\n  padding: 10px 0px;\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n"]))),Bo=c.default.div(xo||(xo=s(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  grid-gap: 5px;\n  margin-bottom: 10px;\n"]))),No=function(e){var t=e.label,n=e.rightComponent,r=e.children;return(0,N.jsxs)(Bo,{children:[(0,N.jsxs)(Do,{children:[(0,N.jsx)("span",{children:t}),n]}),r]})};function Ro(){return(Ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jo(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function zo(t){var n=(0,e.useRef)(t),r=(0,e.useRef)((function(e){n.current&&n.current(e)}));return n.current=t,r.current}var Fo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},Uo=function(e){return"touches"in e},Vo=function(e){return e&&e.ownerDocument.defaultView||self},Ho=function(e,t,n){var r=e.getBoundingClientRect(),i=Uo(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:Fo((i.pageX-(r.left+Vo(e).pageXOffset))/r.width),top:Fo((i.pageY-(r.top+Vo(e).pageYOffset))/r.height)}},Go=function(e){!Uo(e)&&e.preventDefault()},Yo=e.memo((function(t){var n=t.onMove,r=t.onKey,i=jo(t,["onMove","onKey"]),a=(0,e.useRef)(null),o=zo(n),s=zo(r),u=(0,e.useRef)(null),c=(0,e.useRef)(!1),l=(0,e.useMemo)((function(){var e=function(e){Go(e),(Uo(e)?e.touches.length>0:e.buttons>0)&&a.current?o(Ho(a.current,e,u.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=c.current,i=Vo(a.current),o=n?i.addEventListener:i.removeEventListener;o(r?"touchmove":"mousemove",e),o(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=a.current;if(r&&(Go(t),!function(e,t){return t&&!Uo(e)}(t,c.current)&&r)){if(Uo(t)){c.current=!0;var i=t.changedTouches||[];i.length&&(u.current=i[0].identifier)}r.focus(),o(Ho(r,t,u.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),s({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[s,o]),h=l[0],f=l[1],d=l[2];return(0,e.useEffect)((function(){return d}),[d]),e.createElement("div",Ro({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:a,onKeyDown:f,tabIndex:0,role:"slider"}))})),Wo=function(e){return e.filter(Boolean).join(" ")},qo=function(t){var n=t.color,r=t.left,i=t.top,a=void 0===i?.5:i,o=Wo(["react-colorful__pointer",t.className]);return e.createElement("div",{className:o,style:{top:100*a+"%",left:100*r+"%"}},e.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},Zo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},Ko=(Math.PI,function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:Zo(e.h),s:Zo(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:Zo(i/2),a:Zo(r,2)}}),Xo=function(e){var t=Ko(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"};e.memo((function(t){var n=t.hue,r=t.onChange,i=Wo(["react-colorful__hue",t.className]);return e.createElement("div",{className:i},e.createElement(Yo,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:Fo(n+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":Zo(n),"aria-valuemax":"360","aria-valuemin":"0"},e.createElement(qo,{className:"react-colorful__hue-pointer",left:n/360,color:Xo({h:n,s:100,v:100,a:1})})))})),e.memo((function(t){var n=t.hsva,r=t.onChange,i={backgroundColor:Xo({h:n.h,s:100,v:100,a:1})};return e.createElement("div",{className:"react-colorful__saturation",style:i},e.createElement(Yo,{onMove:function(e){r({s:100*e.left,v:100-100*e.top})},onKey:function(e){r({s:Fo(n.s+100*e.left,0,100),v:Fo(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Zo(n.s)+"%, Brightness "+Zo(n.v)+"%"},e.createElement(qo,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:Xo(n)})))}));"undefined"!=typeof window?e.useLayoutEffect:e.useEffect,new Map;var Qo,Jo,$o,es,ts,ns,rs,is,as,os,ss,us=/^#?([0-9A-F]{3,8})$/i,cs=function(t){var n=t.color,r=void 0===n?"":n,i=t.onChange,a=t.onBlur,o=t.escape,s=t.validate,u=t.format,c=t.process,l=jo(t,["color","onChange","onBlur","escape","validate","format","process"]),h=(0,e.useState)((function(){return o(r)})),f=h[0],d=h[1],p=zo(i),g=zo(a),v=(0,e.useCallback)((function(e){var t=o(e.target.value);d(t),s(t)&&p(c?c(t):t)}),[o,c,s,p]),m=(0,e.useCallback)((function(e){s(e.target.value)||d(o(r)),g(e)}),[r,o,s,g]);return(0,e.useEffect)((function(){d(o(r))}),[r,o]),e.createElement("input",Ro({},l,{value:u?u(f):f,spellCheck:"false",onChange:v,onBlur:m}))},ls=function(e){return"#"+e},hs=(c.default.div(Qo||(Qo=s(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 10px;\n    background-color: white;\n    z-index: 2;\n    border-radius: 5px;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n    padding: 10px;\n"]))),c.default.div(Jo||(Jo=s(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),c.default.div($o||($o=s(["\n  display: flex;\n  align-items: center;\n  grid-gap: 5px;\n"]))),c.default.span(es||(es=s(["\n  font-size: 14px;\n"]))),c.default.div(ts||(ts=s(["\n  width: 200px;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-gap: 5px;\n"]))),(0,c.default)((function(t){var n=t.prefixed,r=t.alpha,i=jo(t,["prefixed","alpha"]),a=(0,e.useCallback)((function(e){return e.replace(/([^0-9A-F]+)/gi,"").substring(0,r?8:6)}),[r]),o=(0,e.useCallback)((function(e){return function(e,t){var n=us.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r}(e,r)}),[r]);return e.createElement(cs,Ro({},i,{escape:a,format:n?ls:void 0,process:ls,validate:o}))}))(ns||(ns=s(['\n    font-size: 12px;\n    padding: 2px;\n    width: 100%;\n    display: block;   \n    \n    background-color: transparent;\n    color: #414042;\n    border: 1px #f4f4f4 solid;\n    font-family: "Montserrat",sans-serif;\n    outline:none;\n    resize: none;\n\n    &:hover{\n        border: 1px black solid;\n    }\n\n    &:focus{\n        border: 1px black solid;\n        outline:none;\n    }\n']))),c.default.input(rs||(rs=s(['\n    font-size: 12px;\n    padding: 2px;\n    width: 100%;\n    display: block;\n    text-align: center;\n    \n    background-color: transparent;\n    color: #414042;\n    border: 1px #f4f4f4 solid;\n    font-family: "Montserrat",sans-serif;\n    outline:none;\n    resize: none;\n\n    &:hover{\n        border: 1px black solid;\n    }\n\n    &:focus{\n        border: 1px black solid;\n        outline:none;\n    }\n']))),c.default.div(is||(is=s(["\n    width: 100%;\n    height: 40px;\n    border: 1px solid #DDD;\n    background-color: ",";\n    cursor: pointer;\n\n    @media(hover) {\n        &:hover {\n            opacity: 0.7;\n        }\n    }\n"])),(function(e){return e.color}))),fs=function(t){var n=t.color,r=(t.onChange,(0,e.useRef)(null));return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(hs,{ref:r,color:n})})},ds=["#000000","#FFFFFF"],ps=c.default.div.withConfig({displayName:"ItemText__ItemTextContainer",componentId:"sc-17nsj9a-0"})([""]),gs=c.default.div.withConfig({displayName:"ItemText__TextToolsContainer",componentId:"sc-17nsj9a-1"})(["display:flex;flex-direction:row;grid-gap:10px;flex-wrap:wrap;"]),vs=c.default.div.withConfig({displayName:"ItemText__TextButtonsContainer",componentId:"sc-17nsj9a-2"})(["width:50%;display:grid;grid-template-columns:1fr 1fr;grid-gap:5px;"]),ms=c.default.div.withConfig({displayName:"ItemText__ColorPickerContainer",componentId:"sc-17nsj9a-3"})(["margin-right:5px;width:calc(50% - 30px);"]),ys=c.default.div.withConfig({displayName:"ItemText__ColorsContainer",componentId:"sc-17nsj9a-4"})(["display:flex;flex-direction:row;padding-bottom:20px;border-bottom:1px #ccc dotted;"]),_s=c.default.div.withConfig({displayName:"ItemText__SinglePaletteItem",componentId:"sc-17nsj9a-5"})(["width:20px;height:20px;background-color:",";border:1px lightgray solid;cursor:pointer;"," &:hover{opacity:0.6;}"],(function(e){return e.color}),(function(e){return e.selected&&"border: 1px black solid;"})),bs=c.default.div.withConfig({displayName:"ItemText__TextColorsContainer",componentId:"sc-17nsj9a-6"})(["display:grid;",";width:100%;"],(function(e){return!e.isDefaultPalette&&"\n    grid-template-columns: repeat(auto-fill,minmax(20px,1fr));\n    grid-gap: 5px;"})),xs=(0,c.default)(Tr.Option).withConfig({displayName:"ItemText__OptionContainer",componentId:"sc-17nsj9a-7"})(["background-color:white !important;&:hover{background-color:#DDD !important;}img{max-width:100%;height:24px;object-fit:contain;}"]),ws=(0,c.default)(Tr.SingleValue).withConfig({displayName:"ItemText__SingleValueContainer",componentId:"sc-17nsj9a-8"})(["img{max-width:100%;height:24px;object-fit:contain;}"]),ks=function(e){return(0,N.jsx)(xs,Z(Z({},e),{},{children:(0,N.jsx)("img",{src:e.data.imageUrl,alt:e.data.name})}))},Ss=function(e){return(0,N.jsx)(ws,Z(Z({},e),{},{children:(0,N.jsx)("img",{src:e.data.imageUrl,alt:e.data.name})}))},Cs=function(t){var n,r,i=t.item,a=t.handleItemPropChange,s=t.hideRemoveButton,u=(0,l.useZakeke)(),c=u.removeItem,h=u.fonts,f=u.disableTextColors,d=u.textColors,p=i.constraints,g=null===(n=null===p||void 0===p?void 0:p.canEdit)||void 0===n||n,v=(i.isTextOnPath,null!==(r=null===p||void 0===p?void 0:p.toUppercase)&&void 0!==r&&r),m=o((0,e.useState)(i.fillColor),2),y=m[0],_=m[1],b="number"===typeof i.fontWeight?["normal","normal"]:i.fontWeight.split(" "),x=(b.length>1?b[1]:b[0],b.length>1&&b[0],(0,e.useCallback)((0,K.debounce)((function(e){a(i,"font-color",e)}),500),[]));return i?(0,N.jsxs)(ps,{children:[(0,N.jsx)(No,{label:i.name,rightComponent:!s&&i.constraints.canDelete&&(0,N.jsx)(Ya,{onClick:function(){return c(i.guid)},children:(0,N.jsx)(go,{})}),children:(0,N.jsx)(Wa,{placeholder:"Input your text here",value:v?i.text.toUpperCase():i.text,onChange:function(e){a&&a(i,"text",v?e.currentTarget.value.toUpperCase():e.currentTarget.value)},maxLength:i.constraints&&i.constraints.maxNrChars||null,disabled:!g})}),(0,N.jsxs)(gs,{children:[(!p||p.canChangeFontFamily)&&(0,N.jsx)(No,{label:"Font",children:(0,N.jsx)(Ni,{styles:{container:function(e){return Z(Z({},e),{},{minWidth:200})}},isSearchable:!1,options:h,menuPosition:"fixed",components:{Option:ks,SingleValue:Ss},value:[h.find((function(e){return e.name===i.fontFamily}))],onChange:function(e){return a(i,"font-family",e.name)}})}),(0,N.jsx)(vs,{})]}),(!f||!(f&&1===d.length))&&(0,N.jsx)(No,{label:"Color",children:(0,N.jsxs)(ys,{children:[!f&&(0,N.jsx)(ms,{children:(0,N.jsx)(fs,{color:y,onChange:function(e){x(e),_(e)}})}),!f&&(0,N.jsx)(bs,{isDefaultPalette:!0,children:ds.map((function(e){return(0,N.jsx)(_s,{onClick:function(){a(i,"font-color",e),_(e)},selected:e===y,color:e},e)}))}),f&&(0,N.jsx)(bs,{children:d.map((function(e){return(0,N.jsx)(_s,{onClick:function(){a(i,"font-color",e.colorCode),_(e.colorCode)},selected:e.colorCode===y,color:e.colorCode},e.colorCode)}))})]})})]}):null},Ms=function(t){t.onClose;var n=t.onConfirm,r=(0,l.useZakeke)(),i=r.fonts,a=r.defaultColor,s=o((0,e.useState)({guid:"",name:"",text:"",fillColor:a,fontFamily:i[0].name,fontSize:48,fontWeight:"normal normal",isTextOnPath:!1,constraints:null,placeholder:"Input your text here",backgroundColor:"rgb(235, 237, 242)"}),2),u=s[0],c=s[1];return(0,N.jsx)(Io,{title:ae._("Add text","Composer"),buttons:[{label:ae._("Confirm","Composer"),onClick:function(){return n(u)}}],children:(0,N.jsx)(Cs,{item:u,handleItemPropChange:function(e,t,n){var r=[],i=Z({},e);switch(t){case"text":i.text=n;break;case"font-italic":var a=(r=i.fontWeight.split(" ")).length>1?"bold"===r[1]:"bold"===r[0];i.fontWeight=(n?"italic":"normal")+" "+(a?"bold":"normal");break;case"font-bold":var o=(r=i.fontWeight.split(" ")).length>1&&"italic"===r[0];i.fontWeight=(o?"italic":"normal")+" "+(n?"bold":"normal");break;case"font-color":i.fillColor=n;break;case"font-family":i.fontFamily=n;break;case"text-path":i.isTextOnPath=n;break;case"placeholder":i.placeholder=n}c(i)},hideRemoveButton:!0})})},As=c.default.div(as||(as=s(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n"]))),Es=function(e){var t=e.error,n=e.onCloseClick;return(0,N.jsx)(Io,{alignButtons:"center",buttons:[{label:"Close",onClick:n}],children:(0,N.jsx)(As,{children:(0,N.jsx)("span",{children:t})})})},Ts={"aria-busy":!0,role:"status"},Is=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ls=242.776657104492,Os=(0,c.keyframes)(os||(os=Is(["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"],["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"])),.14*Ls,Ls,.11*Ls,.35*Ls,Ls,.35*Ls,.01*Ls,Ls,.99*Ls),Ps=(c.default.path(ss||(ss=Is(["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"],["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"])),.01*Ls,Ls,Os,1.6),function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof n[e])return n[e];if(e&&e.indexOf(".")>0){for(var r=e.split("."),i=r.length,a=n[r[0]],o=1;null!=a&&o<i;)a=a[r[o]],o+=1;if("undefined"!==typeof a)return a}return t}});var Ds,Bs,Ns,Rs=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},js=(0,c.keyframes)(Ds||(Ds=Rs(["\n to {\n    transform: rotate(360deg);\n  }\n"],["\n to {\n    transform: rotate(360deg);\n  }\n"])));c.default.svg(Bs||(Bs=Rs(["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"],["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"])),js,Ps("speed","0.75")),c.default.polyline(Ns||(Ns=Rs(["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"],["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])),(function(e){return e.width}));var zs,Fs,Us,Vs=function(e){return{display:e?"flex":"none"}},Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hs.apply(this,arguments)},Gs=function(t){var n=t.height,r=void 0===n?80:n,i=t.width,a=void 0===i?80:i,o=t.radius,s=void 0===o?1:o,u=t.color,c=void 0===u?"#4fa94d":u,l=t.ariaLabel,h=void 0===l?"tail-spin-loading":l,f=t.wrapperStyle,d=t.wrapperClass,p=t.visible,g=void 0===p||p;return e.createElement("div",Hs({style:Hs(Hs({},Vs(g)),f),className:d,"data-testid":"tail-spin-loading","aria-label":h},Ts),e.createElement("svg",{width:a,height:r,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg","data-testid":"tail-spin-svg"},e.createElement("defs",null,e.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},e.createElement("stop",{stopColor:c,stopOpacity:"0",offset:"0%"}),e.createElement("stop",{stopColor:c,stopOpacity:".631",offset:"63.146%"}),e.createElement("stop",{stopColor:c,offset:"100%"}))),e.createElement("g",{fill:"none",fillRule:"evenodd"},e.createElement("g",{transform:"translate(1 1)"},e.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:c,strokeWidth:"2"},e.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),e.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:s},e.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}))))))},Ys=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ws=(0,c.keyframes)(zs||(zs=Ys(["\n to {\n    stroke-dashoffset: 136;\n  }\n"],["\n to {\n    stroke-dashoffset: 136;\n  }\n"])));c.default.polygon(Fs||(Fs=Ys(["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"],["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])),Ws),c.default.svg(Us||(Us=Ys(["\n  transform-origin: 50% 65%;\n"],["\n  transform-origin: 50% 65%;\n"])));var qs,Zs,Ks,Xs,Qs,Js,$s,eu;var tu,nu,ru,iu=(0,c.default)(Co)(qs||(qs=s(["\n    flex-basis: 350px;\n"]))),au=c.default.ul(Zs||(Zs=s(["\n    max-height:300px;\n    padding: 0;\n    margin: 0;\n    overflow:auto;\n    margin-top: 20px;\n"]))),ou=c.default.li(Ks||(Ks=s(["\n    height: 70px;\n    min-width:200px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #eee;\n    cursor: pointer;\n    margin-bottom: 10px;\n    color: #313c46;\n    &:hover{\n        background-color: #313c46;\n        color: white;\n    }\n"]))),su=c.default.ul(Xs||(Xs=s(["\n    max-height:300px;\n    padding-left:0px;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    display: grid;\n    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);\n    grid-gap: 10px;\n    overflow:auto;\n"]))),uu=c.default.li(Qs||(Qs=s(["\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    border: 1px black solid;\n    padding: 10px;\n    cursor: pointer;\n\n    &:hover {\n        border: 1px black solid;\n    }\n\n    img {\n        width: 100%;\n        height: 80px;\n        display: block;\n        object-fit: contain;\n        margin-bottom: 5px;\n        background-color: #fff;\n    }\n\n    span {\n        font-size: 12px;\n    }\n"]))),cu=c.default.div(Js||(Js=s(["\n    display: flex;\n    justify-content: center;\n"]))),lu=(0,c.default)(Gs)($s||($s=s(["\n    margin: auto;\n    display: block;\n    width: 48px;\n    height: 48px;\n"]))),hu=c.default.div(eu||(eu=s(["\n    text-align: center;\n    padding: 10px;\n    font-size: 14px;\n    cursor: pointer;\n\n    @media(hover) {\n        &:hover {\n            opacity: 0.8;\n        }\n    }\n"]))),fu=function(t){t.onClose;var n=t.onImageSelected,r=(0,l.useZakeke)(),i=r.getMacroCategories,a=r.getImages,s=o((0,e.useState)(!1),2),u=s[0],c=s[1],h=o((0,e.useState)([]),2),f=h[0],d=h[1],p=o((0,e.useState)(null),2),g=p[0],v=p[1],m=o((0,e.useState)(),2),y=m[0],_=m[1],b=o((0,e.useState)(),2),x=b[0],w=b[1];(0,e.useEffect)((function(){k()}),[]);var k=function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,i();case 4:t=e.sent,c(!1),d(t),1===t.length&&S(t[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t),1===t.categories.length&&C(t.categories[0]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),_(t),e.next=5,a(t.categoryID);case 5:n=e.sent,c(!1),w(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,N.jsxs)(Io,{windowDecorator:iu,title:ae._("Image gallery","Composer"),children:[u&&(0,N.jsx)(cu,{children:(0,N.jsx)(lu,{color:"#000000",height:48,width:48})}),!u&&(0,N.jsxs)(N.Fragment,{children:[!g&&(0,N.jsx)(au,{children:f.map((function(e){return(0,N.jsx)(ou,{onClick:function(){return S(e)},children:e.name},e.macroCategoryID.toString())}))}),g&&!y&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(hu,{onClick:function(){return v(null)},children:ae._("Return to macro categories","Composer")}),(0,N.jsx)(au,{children:g.categories.map((function(e){return(0,N.jsx)(ou,{onClick:function(){return C(e)},children:e.name},e.categoryID.toString())}))})]}),g&&y&&x&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(hu,{onClick:function(){return _(null)},children:ae._("Return to categories","Composer")}),(0,N.jsx)(su,{children:x.map((function(e){return(0,N.jsxs)(uu,{onClick:function(){return n(e)},children:[(0,N.jsx)("img",{src:e.choiceUrl,alt:e.name}),(0,N.jsx)("span",{children:e.name})]},e.imageID.toString())}))})]})]})]})},du=c.default.div(tu||(tu=s(["\n    display: grid;\n    grid-template-columns: 2fr 1fr;\n    grid-column-gap: 20px;\n    input{\n    display:none;\n  }\n"]))),pu=c.default.div(nu||(nu=s(["\n    border: 5px #f4f4f4 solid;\n    padding: 4px;\n    height: 130px;\n    img{\n        display: block;\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n    }\n"]))),gu=c.default.div(ru||(ru=s(["\n    display:flex;\n    flex-direction:column;\n    justify-content:space-between;\n    padding:20px 0px;\n    \n"]))),vu=function(e){var t,n=e.item,r=e.handleItemPropChange,i=e.currentTemplateArea,a=e.uploadImgDisabled,o=(0,l.useZakeke)().removeItem,s=n.constraints,u=!s||s.canEdit,c=(!i||i.uploadRestrictions.isUserImageAllowed)&&u,h=(!i||!i.disableSellerImages)&&u;return(0,N.jsx)(No,{label:n.name||ae._("Image","Composer"),rightComponent:s.canDelete&&(0,N.jsx)(Ya,{onClick:function(){return o(n.guid)},children:(0,N.jsx)(go,{})}),children:(0,N.jsxs)(du,{children:[(0,N.jsx)(pu,{children:(0,N.jsx)("img",{src:n.url,alt:""})}),(0,N.jsxs)(gu,{children:[c&&(0,N.jsx)(qa,{disabled:a,isFullWidth:!0,onClick:function(){return t.click()},children:ae._("Incarc\u0103","Composer")}),h&&(0,N.jsx)(qa,{isFullWidth:!0,onClick:function(){return r(n,"image-gallery")},children:ae._("Galerie","Composer")})]}),(0,N.jsx)("input",{type:"file",ref:function(e){return t=e},onChange:function(e){e.currentTarget.files&&e.currentTarget.files.length>0&&r(n,"image-upload",e.currentTarget.files[0]),t.value=""}})]})})},mu=(c.default.div.withConfig({displayName:"LayoutStyled__GroupItem",componentId:"sc-jotodi-0"})(["display:flex;flex-flow:column;justify-content:center;align-items:center;height:100px;width:100px;margin-bottom:20px;text-align:center;cursor:pointer;padding:0px 10px 0px 10px;&:hover{background-color:white;}&.selected{background-color:white;}span{font-size:12px;}@media (max-width:1025px){min-width:90px;padding-right:5px;}@media (max-width:1024px){min-width:110px;margin-bottom:0;margin-right:10px;}@media (max-width:42px){min-width:100px;}"]),c.default.img.withConfig({displayName:"LayoutStyled__GroupIcon",componentId:"sc-jotodi-1"})(["width:100%;height:40px;object-fit:contain;margin-bottom:10px;"]),c.default.div.withConfig({displayName:"LayoutStyled__TemplatesContainer",componentId:"sc-jotodi-2"})(["display:flex;flex-direction:row;grid-gap:5px;align-items:flex-start;margin-bottom:40px;overflow:hidden;min-height:0;"])),yu=c.default.div.withConfig({displayName:"LayoutStyled__Template",componentId:"sc-jotodi-3"})(["padding:10px;cursor:pointer;&:hover{background-color:#f4f4f4;}",""],(function(e){return e.selected&&"\n       background-color: #f4f4f4;\n    "})),_u=c.default.div.withConfig({displayName:"LayoutStyled__SelectContainer",componentId:"sc-jotodi-4"})(["margin-bottom:30px;padding-bottom:30px;border-bottom:1px #ccc dotted;position:relative;span{margin-bottom:10px;font-size:16px;display:block;}"]),bu=c.default.div.withConfig({displayName:"LayoutStyled__Center",componentId:"sc-jotodi-5"})(["text-align:center;font-size:18px;padding:30px;"]),xu=((0,c.default)(Co).withConfig({displayName:"LayoutStyled__CustomQuotationConfirmMessage",componentId:"sc-jotodi-6"})(["display:flex;align-items:center;justify-content:center;"]),(0,c.default)(Ya).withConfig({displayName:"LayoutStyled__ZoomInIcon",componentId:"sc-jotodi-7"})(["position:absolute;left:20px;width:32px;height:32px;z-index:3;"," @media (max-height:550px){top:calc(5%);}"],(function(e){return e.isMobile?"\n\t\ttop: calc(10%);\n\t\t":"top: calc(30%);"}))),wu=(0,c.default)(Ya).withConfig({displayName:"LayoutStyled__ZoomOutIcon",componentId:"sc-jotodi-8"})(["position:absolute;left:20px;width:32px;height:32px;z-index:3;",";@media (max-height:550px){top:calc(5% + 40px);}"],(function(e){return e.isMobile?"\n\t\ttop: calc(10% + 50px);\n\t\t":"top: calc(30% + 50px);"})),ku=c.default.span.withConfig({displayName:"LayoutStyled__SupportedFormatsList",componentId:"sc-jotodi-9"})(["font-size:16px;font-style:italic;text-align:center;color:#313c46;padding-top:5px;"]),Su=c.default.div.withConfig({displayName:"LayoutStyled__ZakekeDesignerContainer",componentId:"sc-jotodi-10"})(["height:50vh;width:97%;position:relative;display:flex;flex-direction:column;background:#ffffff;",""],(function(e){return e.isMobile&&"\n\t\tposition:fixed;\n        inset:0;\n        z-index:13;\n\t\theight: 94%;\n\t\twidth: 99%;\n    "})),Cu=(c.default.div.withConfig({displayName:"LayoutStyled__IconsAndDesignerContainer",componentId:"sc-jotodi-11"})(["position:absolute;left:0;top:calc(50% - 30px);z-index:2;display:flex;flex-direction:column;"]),c.default.span.withConfig({displayName:"LayoutStyled__ItemName",componentId:"sc-jotodi-12"})(["font-size:12px;font-weight:600;"])),Mu=c.default.div.withConfig({displayName:"LayoutStyled__SelectorMobileContainer",componentId:"sc-jotodi-13"})(["display:flex;flex-direction:column;justify-content:flex-end;width:100%;position:relative;overflow:auto;"]),Au=c.default.div.withConfig({displayName:"LayoutStyled__StepsMobileContainer",componentId:"sc-jotodi-14"})(["border-top:1px #fff solid;height:45px;"]),Eu=c.default.div.withConfig({displayName:"LayoutStyled__MobileItemContainer",componentId:"sc-jotodi-15"})(["color:#297ca3;align-items:center;justify-content:center;min-width:140px;max-width:140px;width:140px;height:140px;min-height:140px;max-height:140px;flex:1;display:flex;flex-direction:column;border-right:2px #fff solid;position:relative;",""],(function(e){return e.selected&&"background-color: #f7f7f7;"})),Tu=c.default.div.withConfig({displayName:"LayoutStyled__StepsContainer",componentId:"sc-jotodi-16"})(["position:relative;padding:0px 20px 20px 20px;@media (max-width:1024px){width:100%;height:50%;flex-direction:column;position:relative;}"]),Iu=c.default.img.withConfig({displayName:"LayoutStyled__MenuItemImage",componentId:"sc-jotodi-17"})(["width:47px;height:47px;object-fit:",";margin-bottom:20px;border-radius:",";border:1px solid rgb(239 233 233);"],(function(e){return e.isRound?"cover":"contain"}),(function(e){return e.isRound?"64px!important":"0"})),Lu=c.default.div.withConfig({displayName:"LayoutStyled__MenuItemImagesWrapper",componentId:"sc-jotodi-18"})(["display:grid;grid-template-columns:1fr 1fr;position:relative;top:-10px;"]),Ou=c.default.div.withConfig({displayName:"LayoutStyled__MenuItemImagesImageWrapper",componentId:"sc-jotodi-19"})(["width:35px;height:35px;&:nth-child(1){border-right:1px #ddd dotted;border-bottom:1px #ddd dotted;}&:nth-child(2){border-bottom:1px #ddd dotted;}&:nth-child(3){border-right:1px #ddd dotted;}"]),Pu=c.default.span.withConfig({displayName:"LayoutStyled__MenuItemLabel",componentId:"sc-jotodi-20"})(["font-size:14px;font-weight:500;position:absolute;bottom:2px;left:0;right:0;text-align:center;overflow:hidden;text-overflow:ellipsis;"]),Du=c.default.img.withConfig({displayName:"LayoutStyled__MenuItemImagesImage",componentId:"sc-jotodi-21"})(["width:100%;height:100%;object-fit:cover;padding:3px;border-radius:",";"],(function(e){return e.isRound?"64px!important":"0"})),Bu=c.default.div.withConfig({displayName:"LayoutStyled__MenuItemIcon",componentId:"sc-jotodi-22"})(["display:flex;align-items:center;justify-content:center;font-size:40px;margin-bottom:20px;width:64px;height:64px;"]),Nu=(c.default.div.withConfig({displayName:"LayoutStyled__ExtensionFieldsContainer",componentId:"sc-jotodi-23"})(["margin:0px auto;display:flex;flex-direction:row;"]),c.default.div.withConfig({displayName:"LayoutStyled__ExtensionFieldItem",componentId:"sc-jotodi-24"})(["border-right:1px solid black;padding:0px 5px;text-align:right;"]),c.default.div.withConfig({displayName:"LayoutStyled__QuantityContainer",componentId:"sc-jotodi-25"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;height:70px;background-color:white;padding-left:10px;color:#313c46;grid-gap:10px;"])),Ru=c.default.div.withConfig({displayName:"LayoutStyled__FooterContainer",componentId:"sc-jotodi-26"})(["background-color:transparent;display:flex;flex-direction:row;height:70px;padding-top:0px;margin-right:15em;width:26px;padding-right:5em;@media screen and (max-width:568){height:70px;}"]),ju=c.default.div.withConfig({displayName:"LayoutStyled__FooterRightElementsContainer",componentId:"sc-jotodi-27"})(["background:transparent;display:flex;justify-content:start;width:100%;height:70px;min-height:70px;background-color:transparent;flex-direction:row;grid-gap:10px;align-items:flex-start;padding:0px 0px 0px 0em;font-size:14px;width:26px;@media (max-width:1024px){min-height:70px;}"]),zu=c.default.div.withConfig({displayName:"LayoutStyled__PriceContainer",componentId:"sc-jotodi-28"})(["font-size:20px;font-weight:600;color:#313c46;margin-right:20px;",";"],(function(e){return e.isMobile&&"\n    margin-right: 0px;\n    color:rgb(41, 124, 163);"})),Fu=c.default.div.withConfig({displayName:"LayoutStyled__FooterMobileContainer",componentId:"sc-jotodi-29"})(["z-index:0;height:55px;display:grid;grid-template-columns:repeat(5,1fr);background-color:#fff;font-size:12px;margin-top:4px;border-top:1px #fff solid;grid-template-areas:'back pdf save share cart';",";"],(function(e){return e.isQuoteEnable&&"\n\tgrid-template-columns: repeat(6, 1fr);\n\tgrid-template-areas: 'back pdf save share cart quote' \n\t"})),Uu=c.default.div.withConfig({displayName:"LayoutStyled__BottomRightIcons",componentId:"sc-jotodi-30"})(["position:absolute;right:10px;bottom:40px;display:flex;flex-direction:row;align-items:center;justify-content:center;z-index:3;gap:20px;@media (max-height:550px){bottom:20px;}"]),Vu=(0,c.default)(Ya).withConfig({displayName:"LayoutStyled__CollapseIcon",componentId:"sc-jotodi-31"})(["width:32px;height:32px;"]),Hu=(0,c.default)(Ya).withConfig({displayName:"LayoutStyled__ExplodeIcon",componentId:"sc-jotodi-32"})(["width:32px;height:32px;"]),Gu=((0,c.default)(Ya).withConfig({displayName:"LayoutStyled__FullscreenIcon",componentId:"sc-jotodi-33"})(["width:32px;height:32px;"]),(0,c.default)(Ya).withConfig({displayName:"LayoutStyled__SecondScreenIcon",componentId:"sc-jotodi-34"})(["width:32px;height:32px;"])),Yu=(0,c.default)(Ya).withConfig({displayName:"LayoutStyled__RecapPanelIcon",componentId:"sc-jotodi-35"})(["position:absolute;left:20px;bottom:40px;width:32px;height:32px;z-index:3;@media (max-height:550px){bottom:20px;}"]),Wu=(c.default.div.withConfig({displayName:"LayoutStyled__TopRightIcons",componentId:"sc-jotodi-36"})(["position:absolute;right:10px;top:10px;display:flex;flex-direction:row;align-items:center;justify-content:center;z-index:3;gap:20px;"]),c.default.div.withConfig({displayName:"LayoutStyled__ViewerContainer",componentId:"sc-jotodi-37"})(["position:relative;min-height:0;font-family:'Inter',sans-serif;@media (max-width:1024px){height:100%;}"])),qu=((0,c.default)(xu).withConfig({displayName:"Designer__ZoomIconIn",componentId:"sc-1yy2g8i-0"})(["left:0px;"]),(0,c.default)(wu).withConfig({displayName:"Designer__ZoomIconOut",componentId:"sc-1yy2g8i-1"})(["left:0px;"]),(0,c.default)(qa).withConfig({displayName:"Designer__MoveElementButton",componentId:"sc-1yy2g8i-2"})([""])),Zu=c.default.div.withConfig({displayName:"Designer__DesignerContainer",componentId:"sc-1yy2g8i-3"})(["display:flex;flex-flow:column;user-select:none;width:100%;padding:30px 30px 70px 30px;background-color:rgb(235,237,242);height:23em;overflow-y:auto;font-family:Inter,sans-serif;border-radius:23px;",""],(function(e){return e.isMobile&&"\n        position:fixed;\n        top:0;\n        left:0;\n        width:100%;\n        height:100%;\n        z-index:11;\n        background-color:#ffffff;\n        overflow-y:scroll;\n    "})),Ku=c.default.div.withConfig({displayName:"Designer__UploadButtons",componentId:"sc-1yy2g8i-4"})(["display:flex;flex-direction:column;grid-gap:5px;margin:20px 0px;"]),Xu=c.default.div.withConfig({displayName:"Designer__Area",componentId:"sc-1yy2g8i-5"})(["display:flex;flex-direction:center;justify-content:space-around;align-items:left;min-height:47px;min-width:70px;width:100%;cursor:pointer;padding:1px 40px;text-align:center;margin:0;margin-bottom:18px;color:black;font-weight:300;text-transform:uppercase;letter-spacing:0px;word-spacing:1px;border:1px solid #297CA3;font-size:15px;border-radius:4px;background-color:white;color:#297CA3;&:hover{border:3px solid #297CA3;}",""],(function(e){return e.selected&&"\n\tborder: 4px solid #297CA3;\n    "})),Qu=(0,c.default)(Tr.Option).withConfig({displayName:"Designer__OptionContainer",componentId:"sc-1yy2g8i-6"})(["border:1px solid #297ca3;background-color:white !important;display:flex !important;align-items:center !important;justify-content:center !important;span{color:#297ca3;}&:hover{background-color:#ddd !important;}"]),Ju=(0,c.default)(Tr.SingleValue).withConfig({displayName:"Designer__SingleValueContainer",componentId:"sc-1yy2g8i-7"})(["border:1px solid none;display:flex;align-items:center;justify-content:center;span{color:#297ca3;}"]),$u=c.default.div.withConfig({displayName:"Designer__CopyrightMessage",componentId:"sc-1yy2g8i-8"})(["display:flex;flex-direction:column;"]),ec=c.default.div.withConfig({displayName:"Designer__CopyrightMandatoryMessageContainer",componentId:"sc-1yy2g8i-9"})(["display:grid;grid-template-columns:20px auto;grid-gap:5px;"]),tc=c.default.input.withConfig({displayName:"Designer__CopyrightCheckbox",componentId:"sc-1yy2g8i-10"})(["width:13px;"]),nc=c.default.div.withConfig({displayName:"Designer__CopyrightMandatoryMessage",componentId:"sc-1yy2g8i-11"})([""]),rc=function(t){var n,r,i=t.onCloseClick,a=(t.togglePersonalize,_o()),s=a.showDialog,u=a.closeDialog,c=o((0,e.useState)(!1),2),h=c[0],f=c[1],d=re(),p=d.setIsLoading,g=d.isMobile,v=(0,l.useZakeke)(),m=v.currentTemplate,y=v.items,_=v.isAreaVisible,b=v.product,x=v.templates,w=v.setTemplate,k=v.setCamera,S=v.removeItem,C=v.setItemImageFromFile,M=v.setItemImage,A=v.setItemText,E=v.setItemItalic,T=v.setItemBold,I=v.setItemColor,L=v.setItemFontFamily,O=v.setItemTextOnPath,P=v.addItemText,D=v.addItemImage,B=v.createImage,R=v.getTemplateUploadRestrictictions,j=v.eventMessages,z=v.setCopyrightMessageAccepted,F=v.getCopyrightMessageAccepted,U=v.publicTranslations,V=null===U||void 0===U?void 0:U.dynamics,H=(0,e.useRef)(null),G=o((0,e.useState)(0),2),Y=G[0],W=G[1],q=null!==(n=null===b||void 0===b?void 0:b.areas.filter((function(e){return _(e.id)})))&&void 0!==n?n:[],K=[],X=o((0,e.useState)(!1),2),Q=X[0],J=X[1],$=x.map((function(e){return{id:e.id,name:e.name,areas:e.areas}})),ee=null===m||void 0===m?void 0:m.id,te=(r=null===m||void 0===m?void 0:m.name,null===m||void 0===m||m.areas,q.map((function(e){return{id:e.id,name:e.name}})));q.length>0&&q.forEach((function(e){var t=m.areas.find((function(t){return t.id===e.id}));(!!y.filter((function(t){return t.areaId===e.id})).some((function(e){return!e.constraints||e.constraints.canMove||e.constraints.canRotate||e.constraints.canResize||e.constraints.canEdit}))||!t||null!==t&&void 0!==t&&t.canAddImage||null!==t&&void 0!==t&&t.canAddText)&&K.push(e)}));var ne=o((0,e.useState)(K&&K.length>0?K[0].id:0),2),ie=ne[0],oe=ne[1],se=m.areas.find((function(e){return e.id===ie})),ue=y.filter((function(e){return e.areaId===ie})),ce=!ue.some((function(e){return!e.constraints||e.constraints.canMove||e.constraints.canRotate||e.constraints.canResize})),le=!se||se.canAddText,he=!se||se.canAddImage&&se.uploadRestrictions.isUserImageAllowed,fe=!se||se.canAddImage&&!se.disableSellerImages,de=xe(m.id,ie).join(", "),pe=o((0,e.useState)(F()),2),ge=pe[0],ve=pe[1],ye=j&&j.find((function(e){return 8===e.eventID})),be=window.innerWidth<=1600?3:4;function xe(e,t){var n=R(e,t),r=[];return n.isJpgAllowed&&r.push(".jpg",".jpeg"),n.isPngAllowed&&r.push(".png"),n.isSvgAllowed&&r.push(".svg"),n.isEpsAllowed&&r.push(".eps"),n.isPdfAllowed&&r.push(".pdf"),r}(0,e.useEffect)((function(){x.length>0&&!m&&w(x[0].id)}),[x]),(0,e.useEffect)((function(){var e=q.filter((function(e){return e.id===ie}));e&&e.length>0&&k(e[0].cameraLocationID)}),[ie]),(0,e.useEffect)((function(){K.length>0&&0===ie&&oe(K[0].id)}),[K]);var we=function(e,t){if(!e.constraints)return!1;var n=e.constraints,r=n.canEdit,i=n.canMove,a=n.canRotate,o=n.canResize,s=n.canDelete,u=n.canChangeFontColor,c=n.canChangeFontFamily,l=n.canChangeFontWeight;if(!n.isPrintable)return!1;var h=r||i||a||o||s,f=u||c||l,d=r||t&&(t.uploadRestrictions.isUserImageAllowed||!t.disableSellerImages);return 0===e.type?h||f:h||d},ke=function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s("add-image",(0,N.jsx)(fu,{onClose:function(){return u("add-image")},onImageSelected:function(e){D(e.imageID,ie),u("add-image")}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m&&ie&&(r=xe(m.id,ie),(i=document.createElement("input")).setAttribute("accept",r.join(",")),i.setAttribute("type","file"),i.addEventListener("change",function(){var e=_e(me().mark((function e(r){var a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=r.currentTarget.files)&&a.length>0&&ie)){e.next=18;break}return p(!0),e.prev=3,e.next=6,n(a[0],(function(e){return console.log(e)}));case 6:o=e.sent,t(o.imageID,ie),i.remove(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),s("error",(0,N.jsx)(Es,{error:"Failed uploading image.",onCloseClick:function(){return u("error")}}));case 15:return e.prev=15,p(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})));return function(t){return e.apply(this,arguments)}}()),document.body.appendChild(i),i.click());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,C(t.guid,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:return e.prev=9,p(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s("add-image",(0,N.jsx)(fu,{onClose:function(){return u("add-image")},onImageSelected:function(){var e=_e(me().mark((function e(n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("add-image"),e.prev=1,p(!0),e.next=5,M(t.guid,n.imageID);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.prev=10,p(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e,t,n){switch(t){case"remove":r=e.guid,S(r);break;case"image-upload":Ce(e,n);break;case"image-gallery":Me(e);break;case"text":A(e.guid,n);break;case"font-italic":E(e.guid,n);break;case"font-bold":T(e.guid,n);break;case"font-color":I(e.guid,n);break;case"font-family":L(e.guid,n);break;case"text-path":O(e.guid,ie,n),setTimeout((function(){return f(!h)}),100)}var r},Ee=function(e){return(0,N.jsx)(Qu,Z(Z({},e),{},{children:(0,N.jsx)("span",{children:e.data.name})}))},Te=function(e){return(0,N.jsx)(Ju,Z(Z({},e),{},{children:(0,N.jsx)("span",{children:e.data.name})}))};return(0,N.jsxs)(N.Fragment,{children:[!Q&&(0,N.jsxs)(Zu,{isMobile:g,children:[!g&&x.length>1&&(0,N.jsx)(mu,{children:x.map((function(e){return(0,N.jsx)(yu,{selected:m===e,onClick:function(){w(e.id)},children:e.name},e.id)}))}),!g&&K.length>1&&(0,N.jsx)(Ga,{slidesToScroll:1,speed:50,slidesToShow:be,slideIndex:Y,afterSlide:W,renderBottomCenterControls:function(){return(0,N.jsx)("span",{})},renderCenterRightControls:function(){if(Y!==(K.length-be>0?K.length-be:Y))return(0,N.jsx)(Qa,{onClick:function(){return W(Y+1)},children:(0,N.jsx)($a,{children:(0,N.jsx)(Qi,{})})})},renderCenterLeftControls:function(){if(0!==Y)return(0,N.jsx)(Xa,{onClick:function(){return W(Y-1)},children:(0,N.jsx)(Ja,{children:(0,N.jsx)(Gi,{})})})},children:K.map((function(e){return(0,N.jsx)(Xu,{selected:ie===e.id,onClick:function(){return oe(e.id)},children:e.name},e.id)}))}),g&&$.length>1&&(0,N.jsxs)(_u,{children:[(0,N.jsx)("span",{children:"Templates"}),(0,N.jsx)(Ni,{styles:{container:function(e){return Z(Z({},e),{},{minWidth:300})}},isSearchable:!1,options:$,menuPosition:"fixed",components:{Option:Ee,SingleValue:Te},value:$.find((function(e){return e.id===ee})),onChange:function(e){return w(e.id)}})]}),g&&te.length>1&&(0,N.jsxs)(_u,{children:[(0,N.jsx)("span",{children:null===V||void 0===V?void 0:V.get("Customizable Areas")}),(0,N.jsx)(Ni,{styles:{control:function(e){return Z(Z({},e),{},{width:"100% !important",display:"flex !important",alignItems:"center !important",justifyContent:"center !important"})}},isSearchable:!1,options:te,menuPosition:"fixed",components:{Option:Ee,SingleValue:Te},value:[te.find((function(e){return e.id===ie}))],onChange:function(e){return oe(e.id)}})]}),0===ue.length&&!(le||he||fe)&&(0,N.jsx)(bu,{children:"No customizable items"}),ue.map((function(e){return 0===e.type&&we(e,se)?(0,N.jsx)(Cs,{handleItemPropChange:Ae,item:e},e.guid):1===e.type&&we(e,se)?(0,N.jsx)(vu,{uploadImgDisabled:!(!ye||!ye.additionalData.enabled)&&!ge,handleItemPropChange:Ae,item:e,currentTemplateArea:se},e.guid):null})),(le||he||fe)&&(0,N.jsxs)(Ku,{children:[le&&(0,N.jsxs)(qa,{isFullWidth:!0,onClick:function(){s("add-text",(0,N.jsx)(Ms,{onClose:function(){return u("add-text")},onConfirm:function(e){P(e,ie),u("add-text")}}))},children:[(0,N.jsx)(Ya,{children:(0,N.jsx)(ca,{})}),(0,N.jsx)("span",{children:ae._("Adaug\u0103 Text","Composer")})]}),fe&&(0,N.jsxs)(qa,{isFullWidth:!0,onClick:ke,children:[(0,N.jsx)(Ya,{children:(0,N.jsx)(ca,{})}),(0,N.jsx)("span",{children:ae._("Adaug\u0103 Logo","Composer")})]}),he&&(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(qa,{disabled:!(!ye||!ye.additionalData.enabled)&&!ge,isFullWidth:!0,onClick:function(){return Se(D,B)},children:[(0,N.jsx)(Ya,{children:(0,N.jsx)(ca,{})}),(0,N.jsx)("span",{children:(0,N.jsxs)("span",{children:[ue.some((function(e){return 1===e.type&&we(e,se)}))?ae._("Upload another image","Composer"):null===V||void 0===V?void 0:V.get("Upload image")," "]})})]})}),(0,N.jsx)(ku,{children:ae._("Supported file formats:","Composer")+" "+de}),ye&&ye.visible&&(0,N.jsxs)($u,{children:[(0,N.jsx)("div",{dangerouslySetInnerHTML:{__html:ye.description}}),ye&&ye.additionalData.enabled&&(0,N.jsxs)(ec,{children:[(0,N.jsx)(tc,{type:"checkbox",defaultChecked:ge,onClick:function(){z(!ge),ve(!ge)}}),(0,N.jsx)(nc,{dangerouslySetInnerHTML:{__html:ye.additionalData.message}})]})]})]}),ue.length>0&&!ce&&(0,N.jsxs)(qu,{isFullWidth:!0,outline:!0,onClick:function(){return J(!0)},children:[(0,N.jsx)(Ya,{children:(0,N.jsx)(ia,{})}),(0,N.jsxs)("span",{children:[ae._("Move elements","Composer")," "]})]}),g&&(0,N.jsx)(Za,{onClick:i,children:"OK"})]}),Q&&(0,N.jsxs)(Su,{isMobile:g,className:"zakeke-container",children:[(0,N.jsx)(l.ZakekeDesigner,{ref:H,areaId:ie}),(0,N.jsx)("div",{style:{position:"relative",top:"26px"},children:(0,N.jsx)(qa,{isFullWidth:!0,primary:!0,onClick:function(){return J(!1)},children:(0,N.jsxs)("span",{children:["OK"," "]})})})]})]})},ic=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],ac=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),r=String(t.getOptionValue(e)).toLowerCase(),i=String(t.getOptionLabel(e)).toLowerCase();return r===n||i===n},oc={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,r){return!(!e||t.some((function(t){return ac(e,t,r)}))||n.some((function(t){return ac(e,t,r)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};var sc,uc,cc,lc,hc,fc,dc=(0,e.forwardRef)((function(t,n){var r=function(t){var n=t.allowCreateWhileLoading,r=void 0!==n&&n,i=t.createOptionPosition,a=void 0===i?"last":i,o=t.formatCreateLabel,s=void 0===o?oc.formatCreateLabel:o,u=t.isValidNewOption,c=void 0===u?oc.isValidNewOption:u,l=t.getNewOptionData,h=void 0===l?oc.getNewOptionData:l,f=t.onCreateOption,d=t.options,p=void 0===d?[]:d,g=t.onChange,v=Zt(t,ic),m=v.getOptionValue,y=void 0===m?vi:m,_=v.getOptionLabel,b=void 0===_?gi:_,x=v.inputValue,w=v.isLoading,k=v.isMulti,S=v.value,C=v.name,M=(0,e.useMemo)((function(){return c(x,Rn(S),p,{getOptionValue:y,getOptionLabel:b})?h(x,s(x)):void 0}),[s,h,b,y,x,c,p,S]),A=(0,e.useMemo)((function(){return!r&&w||!M?p:"first"===a?[M].concat(z(p)):[].concat(z(p),[M])}),[r,a,w,M,p]),E=(0,e.useCallback)((function(e,t){if("select-option"!==t.action)return g(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==M)g(e,t);else if(f)f(x);else{var r=h(x,x),i={action:"create-option",name:C,option:r};g(Qn(k,[].concat(z(Rn(S)),[r]),r),i)}}),[h,x,k,C,M,f,g,S]);return Z(Z({},v),{},{options:A,onChange:E})}(Lr(t));return e.createElement(Oi,be({ref:n},r))})),pc=dc,gc=(0,c.default)(Co)(sc||(sc=s(["\n    flex-basis: 450px;\n"]))),vc=(0,c.default)(Gs)(uc||(uc=s(["\n    margin: auto;\n    display: block;\n    width: 48px;\n    height: 48px;\n"]))),mc=c.default.img(cc||(cc=s(["\n    max-height: 165px;\n    max-width: 100%;\n    margin: 18px auto 10px auto !important;\n    background-color: #f2f2f2;\n"]))),yc=c.default.div(lc||(lc=s(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    text-align: left;\n    grid-gap: 8px;\n"]))),_c=c.default.span(hc||(hc=s(["\n    width: 100%;  \n"]))),bc=c.default.input(fc||(fc=s(["\n    width:100%;   \n    height: 40px;\n    margin-bottom: 15px;\n    border: 1px solid lightgray; \n"]))),xc=function(t){var n=t.onCloseClick,r=(0,l.useZakeke)(),i=r.getOnlineScreenshot,a=r.saveDraftsComposition,s=r.currentCompositionInfo,u=re(),c=u.setIsLoading,h=u.isLoading,f=o((0,e.useState)(""),2),d=f[0],p=f[1],g=o((0,e.useState)(""),2),v=g[0],m=g[1],y=o((0,e.useState)(),2),_=y[0],b=y[1];(0,e.useEffect)((function(){i(1024,1024,!1,"#FFFFFF").then(function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.rewrittenUrl,p(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,e.useEffect)((function(){var e;if(s&&(m(null!==(e=s.compositionName)&&void 0!==e?e:""),s.compositionTags&&s.compositionTags.length>0)){var t=[];s.compositionTags.forEach((function(e){if(e)return t.push({value:e,label:e})})),t&&t.length>0&&b(t)}}),[s]);var x=function(){var e=_e(me().mark((function e(t){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),c(!0),r=[],_&&_.forEach((function(e){return r.push(e.value)})),e.next=6,a(v,r,t);case 6:c(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,N.jsxs)(Io,{marginButtons:5,windowDecorator:gc,buttons:[{label:ae._("Save","Composer"),onClick:function(){return x()},isSaveButton:!0},{label:ae._("Save as Copy","Composer"),onClick:function(){return x(!0)},isSaveButton:!0}],children:[h&&(0,N.jsx)(vc,{color:"#000000",height:48,width:48}),(0,N.jsx)(yc,{children:!h&&(0,N.jsxs)(N.Fragment,{children:[""===d&&(0,N.jsx)(vc,{color:"#000000",height:48,width:48}),""!==d&&(0,N.jsx)(mc,{src:d}),(0,N.jsx)(_c,{children:ae._("Name","Composer")+" *"}),(0,N.jsx)(bc,{defaultValue:v,onChange:function(e){return m(e.currentTarget.value)}}),(0,N.jsx)(_c,{children:ae._("Tags","Composer")}),(0,N.jsx)(pc,{id:"tags-input",isMulti:!0,value:_,styles:{container:function(e){return Z(Z({},e),{},{height:"fit-content",width:"100%"})},control:function(e){return Z(Z({},e),{},{height:"fit-content",width:"100%",borderRadius:"0px"})}},menuPosition:"fixed",placeholder:ae._("Insert tags","Composer"),noOptionsMessage:function(){return ae._("No tags found","Composer")},options:_&&_.map((function(e){return{label:e.label,value:e.value}})),onChange:function(e){b(e)},formatCreateLabel:function(e){return"Create new... ".concat(e)},components:{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}}})]})})]})},wc=["title","titleId"];function kc(){return kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kc.apply(this,arguments)}function Sc(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Cc(t,n){var r=t.title,i=t.titleId,a=Sc(t,wc);return e.createElement("svg",kc({height:"800px",width:"800px",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 303.188 303.188",xmlSpace:"preserve",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,e.createElement("g",null,e.createElement("polygon",{style:{fill:"#E8E8E8"},points:"219.821,0 32.842,0 32.842,303.188 270.346,303.188 270.346,50.525  "}),e.createElement("path",{style:{fill:"#FB3449"},d:"M230.013,149.935c-3.643-6.493-16.231-8.533-22.006-9.451c-4.552-0.724-9.199-0.94-13.803-0.936 c-3.615-0.024-7.177,0.154-10.693,0.354c-1.296,0.087-2.579,0.199-3.861,0.31c-1.314-1.36-2.584-2.765-3.813-4.202 c-7.82-9.257-14.134-19.755-19.279-30.664c1.366-5.271,2.459-10.772,3.119-16.485c1.205-10.427,1.619-22.31-2.288-32.251 c-1.349-3.431-4.946-7.608-9.096-5.528c-4.771,2.392-6.113,9.169-6.502,13.973c-0.313,3.883-0.094,7.776,0.558,11.594 c0.664,3.844,1.733,7.494,2.897,11.139c1.086,3.342,2.283,6.658,3.588,9.943c-0.828,2.586-1.707,5.127-2.63,7.603 c-2.152,5.643-4.479,11.004-6.717,16.161c-1.18,2.557-2.335,5.06-3.465,7.507c-3.576,7.855-7.458,15.566-11.815,23.02 c-10.163,3.585-19.283,7.741-26.857,12.625c-4.063,2.625-7.652,5.476-10.641,8.603c-2.822,2.952-5.69,6.783-5.941,11.024 c-0.141,2.394,0.807,4.717,2.768,6.137c2.697,2.015,6.271,1.881,9.4,1.225c10.25-2.15,18.121-10.961,24.824-18.387 c4.617-5.115,9.872-11.61,15.369-19.465c0.012-0.018,0.024-0.036,0.037-0.054c9.428-2.923,19.689-5.391,30.579-7.205 c4.975-0.825,10.082-1.5,15.291-1.974c3.663,3.431,7.621,6.555,11.939,9.164c3.363,2.069,6.94,3.816,10.684,5.119 c3.786,1.237,7.595,2.247,11.528,2.886c1.986,0.284,4.017,0.413,6.092,0.335c4.631-0.175,11.278-1.951,11.714-7.57 C231.127,152.765,230.756,151.257,230.013,149.935z M119.144,160.245c-2.169,3.36-4.261,6.382-6.232,9.041 c-4.827,6.568-10.34,14.369-18.322,17.286c-1.516,0.554-3.512,1.126-5.616,1.002c-1.874-0.11-3.722-0.937-3.637-3.065 c0.042-1.114,0.587-2.535,1.423-3.931c0.915-1.531,2.048-2.935,3.275-4.226c2.629-2.762,5.953-5.439,9.777-7.918 c5.865-3.805,12.867-7.23,20.672-10.286C120.035,158.858,119.587,159.564,119.144,160.245z M146.366,75.985 c-0.602-3.514-0.693-7.077-0.323-10.503c0.184-1.713,0.533-3.385,1.038-4.952c0.428-1.33,1.352-4.576,2.826-4.993 c2.43-0.688,3.177,4.529,3.452,6.005c1.566,8.396,0.186,17.733-1.693,25.969c-0.299,1.31-0.632,2.599-0.973,3.883 c-0.582-1.601-1.137-3.207-1.648-4.821C147.945,83.048,146.939,79.482,146.366,75.985z M163.049,142.265 c-9.13,1.48-17.815,3.419-25.979,5.708c0.983-0.275,5.475-8.788,6.477-10.555c4.721-8.315,8.583-17.042,11.358-26.197 c4.9,9.691,10.847,18.962,18.153,27.214c0.673,0.749,1.357,1.489,2.053,2.22C171.017,141.096,166.988,141.633,163.049,142.265z  M224.793,153.959c-0.334,1.805-4.189,2.837-5.988,3.121c-5.316,0.836-10.94,0.167-16.028-1.542 c-3.491-1.172-6.858-2.768-10.057-4.688c-3.18-1.921-6.155-4.181-8.936-6.673c3.429-0.206,6.9-0.341,10.388-0.275 c3.488,0.035,7.003,0.211,10.475,0.664c6.511,0.726,13.807,2.961,18.932,7.186C224.588,152.585,224.91,153.321,224.793,153.959z"}),e.createElement("polygon",{style:{fill:"#FB3449"},points:"227.64,25.263 32.842,25.263 32.842,0 219.821,0  "}),e.createElement("g",null,e.createElement("path",{style:{fill:"#A4A9AD"},d:"M126.841,241.152c0,5.361-1.58,9.501-4.742,12.421c-3.162,2.921-7.652,4.381-13.472,4.381h-3.643 v15.917H92.022v-47.979h16.606c6.06,0,10.611,1.324,13.652,3.971C125.321,232.51,126.841,236.273,126.841,241.152z  M104.985,247.387h2.363c1.947,0,3.495-0.546,4.644-1.641c1.149-1.094,1.723-2.604,1.723-4.529c0-3.238-1.794-4.857-5.382-4.857 h-3.348C104.985,236.36,104.985,247.387,104.985,247.387z"}),e.createElement("path",{style:{fill:"#A4A9AD"},d:"M175.215,248.864c0,8.007-2.205,14.177-6.613,18.509s-10.606,6.498-18.591,6.498h-15.523v-47.979 h16.606c7.701,0,13.646,1.969,17.836,5.907C173.119,235.737,175.215,241.426,175.215,248.864z M161.76,249.324 c0-4.398-0.87-7.657-2.609-9.78c-1.739-2.122-4.381-3.183-7.926-3.183h-3.773v26.877h2.888c3.939,0,6.826-1.143,8.664-3.43 C160.841,257.523,161.76,254.028,161.76,249.324z"}),e.createElement("path",{style:{fill:"#A4A9AD"},d:"M196.579,273.871h-12.766v-47.979h28.355v10.403h-15.589v9.156h14.374v10.403h-14.374 L196.579,273.871L196.579,273.871z"})),e.createElement("polygon",{style:{fill:"#D1D3D3"},points:"219.821,50.525 270.346,50.525 219.821,0  "})))}var Mc,Ac,Ec,Tc=e.forwardRef(Cc),Ic=(n.p,["title","titleId"]);function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lc.apply(this,arguments)}function Oc(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pc(t,n){var r=t.title,i=t.titleId,a=Oc(t,Ic);return e.createElement("svg",Lc({width:"800px",height:"800px",viewBox:"-3 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,Mc||(Mc=e.createElement("g",{id:"icomoon-ignore"})),Ac||(Ac=e.createElement("path",{d:"M13.114 2.887c-7.243 0-13.114 5.871-13.114 13.113s5.871 13.113 13.114 13.113c7.242 0 13.112-5.871 13.112-13.113s-5.87-13.113-13.112-13.113zM13.114 28.064c-6.653 0-12.065-5.412-12.065-12.064s5.412-12.063 12.065-12.063c6.652 0 12.063 5.412 12.063 12.063s-5.411 12.064-12.063 12.064z",fill:"#000000"})),Ec||(Ec=e.createElement("path",{d:"M12.318 10.363l-0.742-0.742-6.379 6.379 6.379 6.379 0.742-0.742-5.113-5.113h12.726v-1.049h-12.726z",fill:"#000000"})))}var Dc,Bc,Nc,Rc=e.forwardRef(Pc),jc=(n.p,c.default.div(Dc||(Dc=s(["\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n  justify-content:center;    \n  text-align:center;\n  background-color: white;\n  color:#465664;\n  font-size:18px;\n  padding:30px;\n  line-height:1.6;\n"])))),zc=c.default.div(Bc||(Bc=s(["\n  display:flex;\n  flex-direction:column;\n  padding-bottom:30px;  \n  font-weight:500px;\n  "]))),Fc=function(e){e.onCloseClick;var t=e.url;return(0,N.jsx)(Io,{title:ae._("PDF Preview","Composer"),buttons:[{label:ae._("Download","Composer"),onClick:function(){return window.open(t,"_blank")}}],alignButtons:"center",noMarginFooterButton:!0,children:(0,N.jsxs)(jc,{children:[(0,N.jsx)(zc,{children:(0,N.jsx)("span",{children:ae._("The PDF preview is ready.","Composer")})}),(0,N.jsx)(zc,{children:(0,N.jsx)("span",{children:ae._("In case the PDF is of low resolution, please go back to the editor, zoom in and try again.","Composer")})})]})})},Uc=c.default.div.withConfig({displayName:"LoadingOverlay__LoadingBackground",componentId:"sc-1b9dtgi-0"})(["left:0;top:0;width:100%;height:100%;position:fixed;display:flex;align-items:center;justify-content:center;z-index:12;"]),Vc=c.default.div.withConfig({displayName:"LoadingOverlay__LoadingContainer",componentId:"sc-1b9dtgi-1"})(["width:68px;height:68px;background-color:white;border-radius:5px;padding:10px;"]),Hc=function(){return(0,N.jsx)(Uc,{children:(0,N.jsx)(Vc,{children:(0,N.jsx)(Gs,{color:"#000000",height:48,width:48})})})},Gc=(c.default.div.withConfig({displayName:"Footer__PriceInfoTextContainer",componentId:"sc-6r4vv5-0"})(["font-size:14px;"]),(0,c.default)(to).withConfig({displayName:"Footer__OutOfStockTooltipContent",componentId:"sc-6r4vv5-1"})(["max-width:400px;"]),function(){var t=(0,e.useRef)(null),n=o((0,e.useState)(!1),2),r=n[0],i=n[1],a=(0,l.useZakeke)(),s=a.useLegacyScreenshot,u=(a.setCameraByName,a.getPDF),c=a.addToCart,h=a.isAddToCartLoading,f=a.sellerSettings,d=a.product,p=(a.price,a.quantity,a.setQuantity,a.eventMessages),g=(a.saveComposition,a.createQuote,a.nftSettings,a.publicTranslations),v=re(),m=v.setIsLoading,y=(v.priceFormatter,v.isQuoteLoading,v.setIsQuoteLoading,v.isViewerMode),_=v.isDraftEditor,b=v.isEditorMode,x=_o(),w=x.showDialog,k=x.closeDialog,S=function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w("save",(0,N.jsx)(xc,{onCloseClick:function(){return k("save")}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),i(!0),e.next=5,u();case 5:t=e.sent,w("pdf",(0,N.jsx)(Fc,{url:t,onCloseClick:function(){return k("pdf")}})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),n=ae._("Failed PDF generation","Composer"),w("error",(0,N.jsx)(Es,{error:n,onCloseClick:function(){return k("error")}}));case 13:return e.prev=13,i(!1),m(!1),e.finish(13);case 17:case"end":return e.stop()}var n}),e,null,[[0,9,13,17]])})));return function(){return e.apply(this,arguments)}}(),M=!1,A=(null===d||void 0===d||!d.quoteRule||d.quoteRule.allowAddToCart,h);return(0,N.jsx)(Ru,{children:(0,N.jsxs)(N.Fragment,{children:[r&&(0,N.jsx)(Hc,{}),d&&d.quantityRule&&(0,N.jsx)(Nu,{children:(0,N.jsx)("label",{children:ae._d("Quantity")})}),(0,N.jsxs)(ju,{className:"right-footer",children:[(0,N.jsx)(qa,{onClick:function(){return C()},children:(0,N.jsx)(Ya,{children:(0,N.jsx)(Tc,{})})},"pdf"),!_&&!b&&!y&&f&&f.canSaveDraftComposition&&(0,N.jsx)(qa,{onClick:function(){return S()},children:(0,N.jsx)(Ya,{children:(0,N.jsx)(Rc,{})})},"save"),(0,N.jsxs)(eo,{ref:t,disabled:A,primary:!0,onClick:function(){return function(){var e=null===p||void 0===p?void 0:p.find((function(e){return 4===e.eventID})),t=null===g||void 0===g?void 0:g.statics;e&&e.visible&&!_&&!b?w("question",(0,N.jsx)(Po,{alignButtons:"center",eventMessage:null===e||void 0===e?void 0:e.description,buttonNoLabel:ae._("Cancel","Composer"),buttonYesLabel:null===t||void 0===t?void 0:t.get("Add to cart"),onYesClick:function(){c([],void 0,s),k("question")}})):c([],void 0,s)}()},children:[h&&(0,N.jsx)(Gs,{color:"#FFFFFF",height:"25px"}),!h&&(0,N.jsx)("span",{children:_||b?ae._("Save","Composer"):ae._("Add to cart","Composer")}),!h&&M]})]})]})})}),Yc=(document.getElementById("dialogs-portal"),function(t){var n=t.trayPreviewOpenButton3DFunc,r=(0,l.useZakeke)(),i=r.isSceneLoading,a=(r.loadComposition,r.isAddToCartLoading,r.price),s=r.groups,u=r.selectOption,c=(r.addToCart,r.templates),h=r.setTemplate,f=r.setCamera,d=r.productName,p=r.zoomIn,g=r.zoomOut,m=(r.getPDF,r.items,r.product,r.setItemText,r.defaultColor,r.fonts,r.addItemText,r.publicTranslations,re()),y=(m.setIsLoading,m.isMobile),_=o((0,e.useState)(null),2),b=_[0],x=_[1],w=o((0,e.useState)(null),2),k=w[0],S=w[1],C=o((0,e.useState)(null),2),M=C[0],A=C[1],E=o((0,e.useState)(null),2),z=E[0],F=E[1],U=o((0,e.useState)(null),2),V=U[0],H=U[1],G=o((0,e.useState)(!1),2),Y=G[0],W=G[1],q=o((0,e.useState)(null),2),Z=(q[0],q[1]),K=o((0,e.useState)(!1),2),X=K[0],Q=K[1],J=o((0,e.useState)(0),2),$=J[0],ee=J[1],te=o((0,e.useState)(window.innerWidth),2),ne=te[0],ie=te[1],oe=s.find((function(e){return e.id===b})),se=oe?oe.steps.find((function(e){return e.id===k})):null,ue=o((0,e.useState)(!1),2),ce=ue[0],le=ue[1],he=(0,e.useMemo)((function(){var e,t;return null!==(e=null===(t=se||oe)||void 0===t?void 0:t.attributes)&&void 0!==e?e:[]}),[oe,se]),fe=he.find((function(e){return e.id===M})),de=s.findIndex((function(e){return-1===e.id}));-1!==de&&s.splice(de,1);document.getElementById("dialogs-portal");if((0,e.useEffect)((function(){var e=function(){ie(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,e.useEffect)((function(){if(!oe&&s.length>0&&(x(s[0].id),s[0].steps.length>0&&S(s[0].steps[0].id),c.length>0&&h(c[0].id)),s.length>0){var e=[];s.map((function(t){e.push(t.name)})),H(e)}}),[oe,s]),(0,e.useEffect)((function(){!fe&&he.length>0&&A(he[0].id)}),[fe,he]),(0,e.useEffect)((function(){if(oe){var e=oe.cameraLocationId;e&&f(e)}}),[b]),i||!s||0===s.length)return(0,N.jsx)(D,{children:(0,N.jsx)(B,{children:(0,N.jsx)(ve,{})})});var pe={overflow:"auto",width:"100%",height:X?"70px":"13rem"};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"top-nav",children:(0,N.jsxs)("div",{className:"body-3",id:"product-info",children:[(0,N.jsx)("span",{children:d}),(0,N.jsxs)("span",{children:["LEI ",a]})]})}),y||Y?"":(0,N.jsxs)("div",{style:{position:"absolute",top:"36%",bottom:"45%"},children:[(0,N.jsx)("div",{className:"dgqSKi",onClick:p,children:(0,N.jsx)(v,{})}),(0,N.jsx)("div",{className:"gwevdV",onClick:g,children:(0,N.jsx)(T,{})})]}),y&&!Y?(0,N.jsxs)("div",{style:{position:"absolute",top:"30%"},children:[(0,N.jsx)("div",{className:"Atomic__Icon-sc-v58oaw-1 LayoutStyled__ZoomInIcon-sc-1nws045-19 gIdUDj dgqSKi",onClick:p,children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,N.jsx)("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z M 18 9 L 18 12 L 15 12 L 15 14 L 18 14 L 18 17 L 20 17 L 20 14 L 23 14 L 23 12 L 20 12 L 20 9 Z"})})}),(0,N.jsx)("div",{className:"Atomic__Icon-sc-v58oaw-1 LayoutStyled__ZoomOutIcon-sc-1nws045-20 gIdUDj gwevdV",onClick:g,children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,N.jsx)("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z M 15 12 L 15 14 L 23 14 L 23 12 Z"})})})]}):"",!y&&(0,N.jsxs)("div",{className:"iHdtWA group-item selected",style:{position:"absolute",top:"5%",right:"1%",cursor:"pointer",marginLeft:"20px",width:"30vw"},children:[(0,N.jsx)("div",{className:"button-53",onClick:function(){return le(!ce)},children:(0,N.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"7px"},children:ae._("Personalizeaz\u0103","Composer")})}),ce?(0,N.jsx)(rc,{togglePersonalize:function(){le(!ce)}}):""]}),(0,N.jsx)("div",{className:"animate-wrapper-0",children:(0,N.jsxs)("div",{style:pe,children:[(0,N.jsxs)("div",{className:"tray-header",children:[(0,N.jsx)(j,{width:ne,trayPreviewOpenButton:function(){Q(!X),n(X)},selectedTrayPreviewOpenButton:X,selectTrayPreviewOpenButton:Q}),(0,N.jsxs)("div",{style:{display:"flex",width:"420px",top:"50%",left:"50%",height:"auto",margin:"0px auto",position:"absolute",transform:"translate(-50%, -50%)",alignItems:"center",justifyContent:"center"},children:[(0,N.jsx)("button",{className:"previous-customization",onClick:function(){F(""),ee(($-1+s.length)%s.length),x(s[($-1+s.length)%s.length].id)},children:(0,N.jsx)("div",{className:"mc-prev",children:(0,N.jsx)("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",role:"img",width:"24px",height:"24px",fill:"none",children:(0,N.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M11.021 18.967L4.055 12l6.966-6.967M4 12h17"})})})}),(0,N.jsx)("div",{className:"tray-header-1",children:(0,N.jsx)("div",{style:{position:"absolute",padding:"0px",width:"100%"},children:(0,N.jsxs)("div",{className:"active-marketing-component-name",children:[(0,N.jsx)("span",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"28px"},children:s[$].name}),(0,N.jsxs)("span",{className:"active-marketing-component-index",children:[" ",$+1," / ",s.length]})]})})}),(0,N.jsx)("button",{className:"next-customization",onClick:function(){F(""),ee(($+1)%s.length),x(s[($+1)%s.length].id)},children:(0,N.jsx)("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",role:"img",width:"24px",height:"24px",fill:"none",children:(0,N.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M12.979 18.967L19.945 12 12.98 5.033M20 12H3"})})})]}),!y&&(0,N.jsx)(Gc,{})]}),(0,N.jsx)("br",{}),(0,N.jsxs)("div",{className:"animate-wrapper".concat(Y?"-2 show":""),children:[Y&&!X&&(0,N.jsx)(R,{groupNameList:V,toggleFunc:function(){X&&Q(!X),W(!Y)},UpdateGroupId:function(e){var t=s.filter((function(t){return t.name===e})),n=s.filter((function(t,n){return t.name===e}));if(n.length>0){var r=n[0],i=s.indexOf(r);ee(i)}x(t[0].id),Z(t[0].id)}}),oe&&!X&&oe.steps.length>0&&!Y&&(0,N.jsx)(I,{children:oe.steps.map((function(e){return(0,N.jsx)(L,{onClick:function(){return S(e.id)},selected:se===e,children:e.name},e.id)}))}),!X&&(0,N.jsxs)("div",{style:{width:"100%"},children:[(0,N.jsx)(I,{}),ne>400&&(0,N.jsx)(I,{children:!X&&fe&&!Y&&fe.options.map((function(e){return(0,N.jsx)(O,{onClick:function(){return u(e.id)},selected:e.selected,selectedColor:z,children:e.imageUrl&&(0,N.jsx)(P,{src:e.imageUrl,onClick:function(){return F(e.name)},selected:e.selected})},e.id)}))})]})]})]})})]})}),Wc=["title","titleId"];function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qc.apply(this,arguments)}function Zc(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kc(t,n){var r=t.title,i=t.titleId,a=Zc(t,Wc);return e.createElement("svg",qc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,Nc||(Nc=e.createElement("path",{d:"M 19.03125 4.28125 L 8.03125 15.28125 L 7.34375 16 L 8.03125 16.71875 L 19.03125 27.71875 L 20.46875 26.28125 L 10.1875 16 L 20.46875 5.71875 Z"})))}var Xc,Qc=e.forwardRef(Kc),Jc=(n.p,["title","titleId"]);function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$c.apply(this,arguments)}function el(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tl(t,n){var r=t.title,i=t.titleId,a=el(t,Jc);return e.createElement("svg",$c({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:256,height:256,viewBox:"0 0 256 256",xmlSpace:"preserve",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,Xc||(Xc=e.createElement("defs",null)),e.createElement("g",{transform:"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)",style:{stroke:"none",strokeWidth:0,strokeDasharray:"none",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:10,fill:"none",fillRule:"nonzero",opacity:1}},e.createElement("path",{d:"M 72.975 58.994 H 31.855 c -1.539 0 -2.897 -1.005 -3.347 -2.477 L 15.199 13.006 H 3.5 c -1.933 0 -3.5 -1.567 -3.5 -3.5 s 1.567 -3.5 3.5 -3.5 h 14.289 c 1.539 0 2.897 1.005 3.347 2.476 l 13.309 43.512 h 36.204 l 10.585 -25.191 h -6.021 c -1.933 0 -3.5 -1.567 -3.5 -3.5 s 1.567 -3.5 3.5 -3.5 H 86.5 c 1.172 0 2.267 0.587 2.915 1.563 s 0.766 2.212 0.312 3.293 L 76.201 56.85 C 75.655 58.149 74.384 58.994 72.975 58.994 z",transform:" matrix(1 0 0 1 0 0) ",strokeLinecap:"round",style:{stroke:"none",strokeWidth:1,strokeDasharray:"none",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:10,fill:"#297ca3",fillRule:"nonzero",opacity:1}}),e.createElement("circle",{cx:28.88,cy:74.33,r:6.16,transform:"  matrix(1 0 0 1 0 0) ",style:{stroke:"none",strokeWidth:1,strokeDasharray:"none",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:10,fill:"#297ca3",fillRule:"nonzero",opacity:1}}),e.createElement("circle",{cx:74.59,cy:74.33,r:6.16,transform:"  matrix(1 0 0 1 0 0) ",style:{stroke:"none",strokeWidth:1,strokeDasharray:"none",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:10,fill:"#297ca3",fillRule:"nonzero",opacity:1}}),e.createElement("path",{d:"M 62.278 19.546 H 52.237 V 9.506 c 0 -1.933 -1.567 -3.5 -3.5 -3.5 s -3.5 1.567 -3.5 3.5 v 10.04 h -10.04 c -1.933 0 -3.5 1.567 -3.5 3.5 s 1.567 3.5 3.5 3.5 h 10.04 v 10.04 c 0 1.933 1.567 3.5 3.5 3.5 s 3.5 -1.567 3.5 -3.5 v -10.04 h 10.041 c 1.933 0 3.5 -1.567 3.5 -3.5 S 64.211 19.546 62.278 19.546 z",transform:" matrix(1 0 0 1 0 0) ",strokeLinecap:"round",style:{stroke:"none",strokeWidth:1,strokeDasharray:"none",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:10,fill:"#297ca3",fillRule:"nonzero",opacity:1}})))}var nl,rl,il,al,ol,sl,ul=e.forwardRef(tl),cl=(n.p,c.default.div(nl||(nl=s(["\n    display:flex;\n    flex-direction:row;\n    justify-content:center;\n    align-items:center;\n    margin-left:5px;\n    border:1px solid #f4f4f4;\n    input{\n        width:50px;\n        border:1px solid transparent;\n    }\n    padding:5px 10px 5px 10px;\n"])))),ll=c.default.div(rl||(rl=s(["\n    display:flex;\n    flex-direction:column;\n    div{\n        width: 15px;\n        height: 15px;\n        color:gray;\n    }\n"]))),hl=c.default.input(il||(il=s(["\n"]))),fl=function(e){var t,n=e.value,r=e.readOnly,i=e.onInput,a=e.min,o=e.max,s=e.step;return(0,N.jsxs)(cl,{children:[(0,N.jsx)(hl,{value:n,readOnly:r,onInput:function(){return i},min:a,max:o,step:s,ref:function(e){return t=e||null}}),(0,N.jsxs)(ll,{children:[(0,N.jsx)(Ya,{hoverable:!0,onClick:function(){if(t){var e=parseFloat(t.value||t.min||"0"),n=parseFloat(t.step||"1");t.value=(e+n).toString(),t.max&&parseFloat(t.value)>parseFloat(t.max)&&(t.value=t.max);var r=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value").set,i=new Event("input",{bubbles:!0});r.call(t,t.value),t.dispatchEvent(i)}},children:(0,N.jsx)(Gi,{})}),(0,N.jsx)(Ya,{hoverable:!0,onClick:function(){if(t){var e=parseFloat(t.value||t.min||"0"),n=parseFloat(t.step||"1");t.value=(e-n).toString(),t.min&&parseFloat(t.value)<parseFloat(t.min)&&(t.value=t.min),Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value").set.call(t,t.value);var r=new Event("input",{bubbles:!0});t.dispatchEvent(r)}},children:(0,N.jsx)(Gi,{})})]})]})},dl=(0,c.default)(Co)(al||(al=s(["\n\tmax-width: unset;\n\tdisplay: flex;\n\tflex-direction: column;\n"]))),pl=function(e){var t=e.quantityRule,n=e.onClick,r=(0,l.useZakeke)(),i=r.quantity,a=r.setQuantity,o=r.publicTranslations,s=null===o||void 0===o?void 0:o.statics;return(0,N.jsxs)(Io,{windowDecorator:dl,alignButtons:"center",children:[(0,N.jsxs)(Nu,{children:[(0,N.jsx)("label",{children:ae._d("Quantity")}),(0,N.jsx)(fl,{value:i,readOnly:!0,onInput:function(e){return a(parseFloat(e.currentTarget.value))},min:null!=t.minQuantity?Math.max(t.step||1,t.minQuantity):t.step||1,max:null!=t.maxQuantity?t.maxQuantity:void 0,step:null!=t.step?t.step:void 0})]}),(0,N.jsx)(Ao,{isFullWidth:!0,onClick:n,children:null===s||void 0===s?void 0:s.get("Add to cart")})]})},gl=((0,c.default)(to)(ol||(ol=s(["\n\tmax-width: 400px;\n"]))),c.default.div(sl||(sl=s(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 1px transparent solid;\n\tcolor: ",";\n\t// background-color: ",";\n\tbackground-color: transparent;\n\tfont-size: 14px;\n\ttext-transform: uppercase;\n\ttext-align: center;\n\tdisplay: inline-flex;\n\tmin-height: 38px;\n\tborder: none;\n\t// border-right: 3px #f4f4f4 solid;\n\tcursor: pointer;\n\n\tsvg {\n\t\tfill: ",";\n\t\twidth: 27px;\n\t\theight: 27px;\n\t}\n\n\t",";\n\n\t",";\n\n\t","\n\t",";\n"])),(function(e){return e.color?e.color:"#313c46"}),(function(e){return e.backgroundColor?e.backgroundColor:"transparent"}),(function(e){return e.iconColor&&"".concat(e.iconColor)}),(function(e){return e.isHidden&&"visibility:hidden"}),(function(e){return e.isCart&&"\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;"}),(function(e){return e.disabled&&"\n      background-color: lightgray;\n      border: 1px solid gray;\n      color: #313c46;\n  "}),(function(e){return e.gridArea&&"grid-area:".concat(e.gridArea)}))),vl=function(){var t=(0,e.useRef)(null),n=o((0,e.useState)(!1),2),r=n[0],i=n[1],a=(0,l.useZakeke)(),s=a.useLegacyScreenshot,u=(a.setCameraByName,a.getPDF),c=a.addToCart,h=a.product,f=a.price,d=a.groups,p=a.isSceneLoading,g=a.eventMessages,v=a.isAddToCartLoading,m=a.sellerSettings,y=(a.saveComposition,a.createQuote,a.nftSettings,re()),_=y.setIsLoading,b=y.selectedGroupId,x=y.setSelectedGroupId,w=y.selectedAttributeId,k=y.setSelectedTemplateGroupId,S=y.selectedTemplateGroupId,C=y.selectedStepId,M=y.setSelectedAttributeId,A=y.priceFormatter,E=(y.setIsQuoteLoading,y.isQuoteLoading,y.isViewerMode,y.isDraftEditor),T=y.isEditorMode,I=y.isMobile,L=_o(),O=L.showDialog,P=L.closeDialog,D=(null===h||void 0===h||!h.quoteRule||h.quoteRule.allowAddToCart,v),B=function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),i(!0),e.next=5,u();case 5:t=e.sent,O("pdf",(0,N.jsx)(Fc,{url:t,onCloseClick:function(){return P("pdf")}})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),n=ae._("Failed PDF generation","Composer"),O("error",(0,N.jsx)(Es,{error:n,onCloseClick:function(){return P("error")}}));case 13:return e.prev=13,i(!1),_(!1),e.finish(13);case 17:case"end":return e.stop()}var n}),e,null,[[0,9,13,17]])})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[r&&(0,N.jsx)(Hc,{}),!p&&(0,N.jsxs)(Fu,{isQuoteEnable:null!==(null===h||void 0===h?void 0:h.quoteRule),children:[(0,N.jsx)(gl,{gridArea:"back",isHidden:null===b,onClick:function(){if(w){M(null);var e=d.find((function(e){return e.id===b})),t=null===e||void 0===e?void 0:e.steps.find((function(e){return e.id===C}));e&&(1===e.attributes.length&&0===e.templateGroups.length||1===(null===t||void 0===t?void 0:t.attributes.length)&&0===t.templateGroups.length)&&x(null)}else if(S){k(null);var n=d.find((function(e){return e.id===b})),r=null===n||void 0===n?void 0:n.steps.find((function(e){return e.id===C}));n&&(1===n.templateGroups.length&&0===n.attributes.length||1===(null===r||void 0===r?void 0:r.templateGroups.length)&&0===r.attributes.length)&&x(null)}else b&&x(null)},children:(0,N.jsx)(Qc,{})}),(0,N.jsx)(gl,{gridArea:"pdf",onClick:B,children:(0,N.jsx)(Tc,{})}),(0,N.jsx)(gl,{children:(0,N.jsx)("span",{style:{position:"relative",width:"66vw",fontWeight:"600",fontSize:"80%"},children:null===h||void 0===h?void 0:h.name})}),(0,N.jsxs)(gl,{gridArea:"cart",isCart:!0,iconColor:"white",color:"white",ref:t,disabled:D,backgroundColor:"#313c46",onClick:D?function(){return null}:function(){return function(){var e=null===g||void 0===g?void 0:g.find((function(e){return 4===e.eventID}));e&&e.visible&&!E&&!T?O("question",(0,N.jsx)(Po,{alignButtons:"center",eventMessage:null===e||void 0===e?void 0:e.description,buttonNoLabel:ae._("Cancel","Composer"),buttonYesLabel:ae._("Add to cart","Composer"),onYesClick:function(){c([],void 0,s),P("question")}})):h&&h.quantityRule?O("quantity",(0,N.jsx)(pl,{quantityRule:h.quantityRule,onClick:function(){P("quantity"),c([],void 0,s)}})):c([],void 0,s)}()},children:[null!==f&&f>0&&(!m||!m.hidePrice)&&(0,N.jsx)(zu,{isMobile:I,children:A.format(f)}),!v&&(E||T?(0,N.jsx)(Rc,{}):(0,N.jsx)(ul,{})),v&&(0,N.jsx)(Gs,{color:"#FFFFFF",height:"25px"})]})]})]})},ml="delete",yl=5,_l=1<<yl,bl=_l-1,xl={};function wl(e){e&&(e.value=!0)}function kl(){}function Sl(e){return void 0===e.size&&(e.size=e.__iterate(Ml)),e.size}function Cl(e,t){if("number"!==typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?Sl(e)+t:t}function Ml(){return!0}function Al(e,t,n){return(0===e&&!Ll(e)||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function El(e,t){return Il(e,t,0)}function Tl(e,t){return Il(e,t,t)}function Il(e,t,n){return void 0===e?n:Ll(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function Ll(e){return e<0||0===e&&1/e===-1/0}var Ol="@@__IMMUTABLE_ITERABLE__@@";function Pl(e){return Boolean(e&&e[Ol])}var Dl="@@__IMMUTABLE_KEYED__@@";function Bl(e){return Boolean(e&&e[Dl])}var Nl="@@__IMMUTABLE_INDEXED__@@";function Rl(e){return Boolean(e&&e[Nl])}function jl(e){return Bl(e)||Rl(e)}var zl=function(e){return Pl(e)?e:hh(e)},Fl=function(e){function t(e){return Bl(e)?e:fh(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zl),Ul=function(e){function t(e){return Rl(e)?e:dh(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zl),Vl=function(e){function t(e){return Pl(e)&&!jl(e)?e:ph(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zl);zl.Keyed=Fl,zl.Indexed=Ul,zl.Set=Vl;var Hl="@@__IMMUTABLE_SEQ__@@";function Gl(e){return Boolean(e&&e[Hl])}var Yl="@@__IMMUTABLE_RECORD__@@";function Wl(e){return Boolean(e&&e[Yl])}function ql(e){return Pl(e)||Wl(e)}var Zl="@@__IMMUTABLE_ORDERED__@@";function Kl(e){return Boolean(e&&e[Zl])}var Xl=0,Ql=1,Jl=2,$l="function"===typeof Symbol&&Symbol.iterator,eh="@@iterator",th=$l||eh,nh=function(e){this.next=e};function rh(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function ih(){return{value:void 0,done:!0}}function ah(e){return!!Array.isArray(e)||!!uh(e)}function oh(e){return e&&"function"===typeof e.next}function sh(e){var t=uh(e);return t&&t.call(e)}function uh(e){var t=e&&($l&&e[$l]||e[eh]);if("function"===typeof t)return t}nh.prototype.toString=function(){return"[Iterator]"},nh.KEYS=Xl,nh.VALUES=Ql,nh.ENTRIES=Jl,nh.prototype.inspect=nh.prototype.toSource=function(){return this.toString()},nh.prototype[th]=function(){return this};var ch=Object.prototype.hasOwnProperty;function lh(e){return!(!Array.isArray(e)&&"string"!==typeof e)||e&&"object"===typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var hh=function(e){function t(e){return void 0===e||null===e?_h():ql(e)?e.toSeq():function(e){var t=wh(e);if(t)return function(e){var t=uh(e);return t&&t===e.entries}(e)?t.fromEntrySeq():function(e){var t=uh(e);return t&&t===e.keys}(e)?t.toSetSeq():t;if("object"===typeof e)return new vh(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var a=n[t?r-++i:i++];if(!1===e(a[1],a[0],this))break}return i}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var n=this._cache;if(n){var r=n.length,i=0;return new nh((function(){if(i===r)return{value:void 0,done:!0};var a=n[t?r-++i:i++];return rh(e,a[0],a[1])}))}return this.__iteratorUncached(e,t)},t}(zl),fh=function(e){function t(e){return void 0===e||null===e?_h().toKeyedSeq():Pl(e)?Bl(e)?e.toSeq():e.fromEntrySeq():Wl(e)?e.toSeq():bh(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(hh),dh=function(e){function t(e){return void 0===e||null===e?_h():Pl(e)?Bl(e)?e.entrySeq():e.toIndexedSeq():Wl(e)?e.toSeq().entrySeq():xh(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(hh),ph=function(e){function t(e){return(Pl(e)&&!jl(e)?e:dh(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(hh);hh.isSeq=Gl,hh.Keyed=fh,hh.Set=ph,hh.Indexed=dh,hh.prototype[Hl]=!0;var gh=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[Cl(this,e)]:t},t.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length,i=0;i!==r;){var a=t?r-++i:i++;if(!1===e(n[a],a,this))break}return i},t.prototype.__iterator=function(e,t){var n=this._array,r=n.length,i=0;return new nh((function(){if(i===r)return{value:void 0,done:!0};var a=t?r-++i:i++;return rh(e,a,n[a])}))},t}(dh),vh=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return ch.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length,a=0;a!==i;){var o=r[t?i-++a:a++];if(!1===e(n[o],o,this))break}return a},t.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length,a=0;return new nh((function(){if(a===i)return{value:void 0,done:!0};var o=r[t?i-++a:a++];return rh(e,o,n[o])}))},t}(fh);vh.prototype[Zl]=!0;var mh,yh=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=sh(this._collection),r=0;if(oh(n))for(var i;!(i=n.next()).done&&!1!==e(i.value,r++,this););return r},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=sh(this._collection);if(!oh(n))return new nh(ih);var r=0;return new nh((function(){var t=n.next();return t.done?t:rh(e,r++,t.value)}))},t}(dh);function _h(){return mh||(mh=new gh([]))}function bh(e){var t=wh(e);if(t)return t.fromEntrySeq();if("object"===typeof e)return new vh(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function xh(e){var t=wh(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function wh(e){return lh(e)?new gh(e):ah(e)?new yh(e):void 0}var kh="@@__IMMUTABLE_MAP__@@";function Sh(e){return Boolean(e&&e[kh])}function Ch(e){return Sh(e)&&Kl(e)}function Mh(e){return Boolean(e&&"function"===typeof e.equals&&"function"===typeof e.hashCode)}function Ah(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"===typeof e.valueOf&&"function"===typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(Mh(e)&&Mh(t)&&e.equals(t))}var Eh="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function Th(e){return e>>>1&1073741824|3221225471&e}var Ih=Object.prototype.valueOf;function Lh(e){if(null==e)return Oh(e);if("function"===typeof e.hashCode)return Th(e.hashCode(e));var t,n=(t=e).valueOf!==Ih&&"function"===typeof t.valueOf?t.valueOf(t):t;if(null==n)return Oh(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(e){if(e!==e||e===1/0)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return Th(t)}(n);case"string":return n.length>Vh?function(e){var t=Yh[e];void 0===t&&(t=Ph(e),Gh===Hh&&(Gh=0,Yh={}),Gh++,Yh[e]=t);return t}(n):Ph(n);case"object":case"function":return function(e){var t;if(jh&&void 0!==(t=Rh.get(e)))return t;if(t=e[Uh],void 0!==t)return t;if(!Bh){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Uh]))return t;if(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e),void 0!==t)return t}if(t=Nh(),jh)Rh.set(e,t);else{if(void 0!==Dh&&!1===Dh(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Bh)Object.defineProperty(e,Uh,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Uh]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Uh]=t}}return t}(n);case"symbol":return function(e){var t=zh[e];if(void 0!==t)return t;return t=Nh(),zh[e]=t,t}(n);default:if("function"===typeof n.toString)return Ph(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function Oh(e){return null===e?1108378658:1108378659}function Ph(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return Th(t)}var Dh=Object.isExtensible,Bh=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function Nh(){var e=++Fh;return 1073741824&Fh&&(Fh=0),e}var Rh,jh="function"===typeof WeakMap;jh&&(Rh=new WeakMap);var zh=Object.create(null),Fh=0,Uh="__immutablehash__";"function"===typeof Symbol&&(Uh=Symbol(Uh));var Vh=16,Hh=255,Gh=0,Yh={},Wh=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=Jh(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var n=this,r=Qh(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t,r){return e(t,r,n)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(fh);Wh.prototype[Zl]=!0;var qh=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this,r=0;return t&&Sl(this),this._iter.__iterate((function(i){return e(i,t?n.size-++r:r++,n)}),t)},t.prototype.__iterator=function(e,t){var n=this,r=this._iter.__iterator(Ql,t),i=0;return t&&Sl(this),new nh((function(){var a=r.next();return a.done?a:rh(e,t?n.size-++i:i++,a.value,a)}))},t}(dh),Zh=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(Ql,t);return new nh((function(){var t=n.next();return t.done?t:rh(e,t.value,t.value,t)}))},t}(ph),Kh=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){cf(t);var r=Pl(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(Ql,t);return new nh((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){cf(r);var i=Pl(r);return rh(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}}))},t}(fh);function Xh(e){var t=hf(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=ff,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(t===Jl){var r=e.__iterator(t,n);return new nh((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===Ql?Xl:Ql,n)},t}function Qh(e,t,n){var r=hf(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var a=e.get(r,xl);return a===xl?i:t.call(n,a,r,e)},r.__iterateUncached=function(r,i){var a=this;return e.__iterate((function(e,i,o){return!1!==r(t.call(n,e,i,o),i,a)}),i)},r.__iteratorUncached=function(r,i){var a=e.__iterator(Jl,i);return new nh((function(){var i=a.next();if(i.done)return i;var o=i.value,s=o[0];return rh(r,s,t.call(n,o[1],s,e),i)}))},r}function Jh(e,t){var n=this,r=hf(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=Xh(e);return t.reverse=function(){return e.flip()},t}),r.get=function(n,r){return e.get(t?n:-1-n,r)},r.has=function(n){return e.has(t?n:-1-n)},r.includes=function(t){return e.includes(t)},r.cacheResult=ff,r.__iterate=function(n,r){var i=this,a=0;return r&&Sl(e),e.__iterate((function(e,o){return n(e,t?o:r?i.size-++a:a++,i)}),!r)},r.__iterator=function(r,i){var a=0;i&&Sl(e);var o=e.__iterator(Jl,!i);return new nh((function(){var e=o.next();if(e.done)return e;var s=e.value;return rh(r,t?s[0]:i?n.size-++a:a++,s[1],e)}))},r}function $h(e,t,n,r){var i=hf(e);return r&&(i.has=function(r){var i=e.get(r,xl);return i!==xl&&!!t.call(n,i,r,e)},i.get=function(r,i){var a=e.get(r,xl);return a!==xl&&t.call(n,a,r,e)?a:i}),i.__iterateUncached=function(i,a){var o=this,s=0;return e.__iterate((function(e,a,u){if(t.call(n,e,a,u))return s++,i(e,r?a:s-1,o)}),a),s},i.__iteratorUncached=function(i,a){var o=e.__iterator(Jl,a),s=0;return new nh((function(){for(;;){var a=o.next();if(a.done)return a;var u=a.value,c=u[0],l=u[1];if(t.call(n,l,c,e))return rh(i,r?c:s++,l,a)}}))},i}function ef(e,t,n,r){var i=e.size;if(Al(t,n,i))return e;var a=El(t,i),o=Tl(n,i);if(a!==a||o!==o)return ef(e.toSeq().cacheResult(),t,n,r);var s,u=o-a;u===u&&(s=u<0?0:u);var c=hf(e);return c.size=0===s?s:e.size&&s||void 0,!r&&Gl(e)&&s>=0&&(c.get=function(t,n){return(t=Cl(this,t))>=0&&t<s?e.get(t+a,n):n}),c.__iterateUncached=function(t,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var o=0,u=!0,c=0;return e.__iterate((function(e,n){if(!u||!(u=o++<a))return c++,!1!==t(e,r?n:c-1,i)&&c!==s})),c},c.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);if(0===s)return new nh(ih);var i=e.__iterator(t,n),o=0,u=0;return new nh((function(){for(;o++<a;)i.next();if(++u>s)return{value:void 0,done:!0};var e=i.next();return r||t===Ql||e.done?e:rh(t,u-1,t===Xl?void 0:e.value[1],e)}))},c}function tf(e,t,n,r){var i=hf(e);return i.__iterateUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterate(i,a);var s=!0,u=0;return e.__iterate((function(e,a,c){if(!s||!(s=t.call(n,e,a,c)))return u++,i(e,r?a:u-1,o)})),u},i.__iteratorUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterator(i,a);var s=e.__iterator(Jl,a),u=!0,c=0;return new nh((function(){var e,a,l;do{if((e=s.next()).done)return r||i===Ql?e:rh(i,c++,i===Xl?void 0:e.value[1],e);var h=e.value;a=h[0],l=h[1],u&&(u=t.call(n,l,a,o))}while(u);return i===Jl?e:rh(i,a,l,e)}))},i}function nf(e,t,n){var r=hf(e);return r.__iterateUncached=function(i,a){if(a)return this.cacheResult().__iterate(i,a);var o=0,s=!1;return function e(u,c){u.__iterate((function(a,u){return(!t||c<t)&&Pl(a)?e(a,c+1):(o++,!1===i(a,n?u:o-1,r)&&(s=!0)),!s}),a)}(e,0),o},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(r,i),o=[],s=0;return new nh((function(){for(;a;){var e=a.next();if(!1===e.done){var u=e.value;if(r===Jl&&(u=u[1]),t&&!(o.length<t)||!Pl(u))return n?e:rh(r,s++,u,e);o.push(a),a=u.__iterator(r,i)}else a=o.pop()}return{value:void 0,done:!0}}))},r}function rf(e,t,n){t||(t=df);var r=Bl(e),i=0,a=e.toSeq().map((function(t,r){return[r,t,i++,n?n(t,r,e):t]})).valueSeq().toArray();return a.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),r?fh(a):Rl(e)?dh(a):ph(a)}function af(e,t,n){if(t||(t=df),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return of(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return of(t,e,n)?n:e}))}function of(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function sf(e,t,n,r){var i=hf(e),a=new gh(n).map((function(e){return e.size}));return i.size=r?a.max():a.min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(Ql,t),i=0;!(n=r.next()).done&&!1!==e(n.value,i++,this););return i},i.__iteratorUncached=function(e,i){var a=n.map((function(e){return e=zl(e),sh(i?e.reverse():e)})),o=0,s=!1;return new nh((function(){var n;return s||(n=a.map((function(e){return e.next()})),s=r?n.every((function(e){return e.done})):n.some((function(e){return e.done}))),s?{value:void 0,done:!0}:rh(e,o++,t.apply(null,n.map((function(e){return e.value}))))}))},i}function uf(e,t){return e===t?e:Gl(e)?t:e.constructor(t)}function cf(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function lf(e){return Bl(e)?Fl:Rl(e)?Ul:Vl}function hf(e){return Object.create((Bl(e)?fh:Rl(e)?dh:ph).prototype)}function ff(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):hh.prototype.cacheResult.call(this)}function df(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function pf(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function gf(e,t){if(!e)throw new Error(t)}function vf(e){gf(e!==1/0,"Cannot perform this action with an infinite size.")}function mf(e){if(lh(e)&&"string"!==typeof e)return e;if(Kl(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}qh.prototype.cacheResult=Wh.prototype.cacheResult=Zh.prototype.cacheResult=Kh.prototype.cacheResult=ff;var yf=Object.prototype.toString;function _f(e){if(!e||"object"!==typeof e||"[object Object]"!==yf.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t,r=Object.getPrototypeOf(t);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===t}function bf(e){return"object"===typeof e&&(ql(e)||Array.isArray(e)||_f(e))}function xf(e){try{return"string"===typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function wf(e,t){return ql(e)?e.has(t):bf(e)&&ch.call(e,t)}function kf(e,t,n){return ql(e)?e.get(t,n):wf(e,t)?"function"===typeof e.get?e.get(t):e[t]:n}function Sf(e){if(Array.isArray(e))return pf(e);var t={};for(var n in e)ch.call(e,n)&&(t[n]=e[n]);return t}function Cf(e,t){if(!bf(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(ql(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!ch.call(e,t))return e;var n=Sf(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}function Mf(e,t,n){if(!bf(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(ql(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(ch.call(e,t)&&n===e[t])return e;var r=Sf(e);return r[t]=n,r}function Af(e,t,n,r){r||(r=n,n=void 0);var i=Ef(ql(e),e,mf(t),0,n,r);return i===xl?n:i}function Ef(e,t,n,r,i,a){var o=t===xl;if(r===n.length){var s=o?i:t,u=a(s);return u===s?t:u}if(!o&&!bf(t))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(xf)+"]: "+t);var c=n[r],l=o?xl:kf(t,c,xl),h=Ef(l===xl?e:ql(l),l,n,r+1,i,a);return h===l?t:h===xl?Cf(t,c):Mf(o?e?sd():{}:t,c,h)}function Tf(e,t,n){return Af(e,t,xl,(function(){return n}))}function If(e,t){return Tf(this,e,t)}function Lf(e,t){return Af(e,t,(function(){return xl}))}function Of(e){return Lf(this,e)}function Pf(e,t,n,r){return Af(e,[t],n,r)}function Df(e,t,n){return 1===arguments.length?e(this):Pf(this,e,t,n)}function Bf(e,t,n){return Af(this,e,t,n)}function Nf(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return jf(this,e)}function Rf(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if("function"!==typeof e)throw new TypeError("Invalid merger function: "+e);return jf(this,t,e)}function jf(e,t,n){for(var r=[],i=0;i<t.length;i++){var a=Fl(t[i]);0!==a.size&&r.push(a)}return 0===r.length?e:0!==e.toSeq().size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var t=n?function(t,r){Pf(e,r,xl,(function(e){return e===xl?t:n(e,t,r)}))}:function(t,n){e.set(n,t)},i=0;i<r.length;i++)r[i].forEach(t)})):e.constructor(r[0])}function zf(e,t,n){return Ff(e,t,function(e){function t(n,r,i){return bf(n)&&bf(r)&&function(e,t){var n=hh(e),r=hh(t);return Rl(n)===Rl(r)&&Bl(n)===Bl(r)}(n,r)?Ff(n,[r],t):e?e(n,r,i):r}return t}(n))}function Ff(e,t,n){if(!bf(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(ql(e))return"function"===typeof n&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),i=e,a=r?Ul:Fl,o=r?function(t){i===e&&(i=Sf(i)),i.push(t)}:function(t,r){var a=ch.call(i,r),o=a&&n?n(i[r],t,r):t;a&&o===i[r]||(i===e&&(i=Sf(i)),i[r]=o)},s=0;s<t.length;s++)a(t[s]).forEach(o);return i}function Uf(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return zf(this,e)}function Vf(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return zf(this,t,e)}function Hf(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Af(this,e,sd(),(function(e){return Ff(e,t)}))}function Gf(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Af(this,e,sd(),(function(e){return zf(e,t)}))}function Yf(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function Wf(){return this.__ownerID?this:this.__ensureOwner(new kl)}function qf(){return this.__ensureOwner()}function Zf(){return this.__altered}var Kf=function(e){function t(t){return void 0===t||null===t?sd():Sh(t)&&!Kl(t)?t:sd().withMutations((function(n){var r=e(t);vf(r.size),r.forEach((function(e,t){return n.set(t,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return sd().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return ud(this,e,t)},t.prototype.remove=function(e){return ud(this,e,xl)},t.prototype.deleteAll=function(e){var t=zl(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):sd()},t.prototype.sort=function(e){return Pd(rf(this,e))},t.prototype.sortBy=function(e,t){return Pd(rf(this,t,e))},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){r.forEach((function(i,a){r.set(a,e.call(t,i,a,n))}))}))},t.prototype.__iterator=function(e,t){return new rd(this,e,t)},t.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?od(this.size,this._root,e,this.__hash):0===this.size?sd():(this.__ownerID=e,this.__altered=!1,this)},t}(Fl);Kf.isMap=Sh;var Xf=Kf.prototype;Xf[kh]=!0,Xf[ml]=Xf.remove,Xf.removeAll=Xf.deleteAll,Xf.setIn=If,Xf.removeIn=Xf.deleteIn=Of,Xf.update=Df,Xf.updateIn=Bf,Xf.merge=Xf.concat=Nf,Xf.mergeWith=Rf,Xf.mergeDeep=Uf,Xf.mergeDeepWith=Vf,Xf.mergeIn=Hf,Xf.mergeDeepIn=Gf,Xf.withMutations=Yf,Xf.wasAltered=Zf,Xf.asImmutable=qf,Xf["@@transducer/init"]=Xf.asMutable=Wf,Xf["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},Xf["@@transducer/result"]=function(e){return e.asImmutable()};var Qf=function(e,t){this.ownerID=e,this.entries=t};Qf.prototype.get=function(e,t,n,r){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(Ah(n,i[a][0]))return i[a][1];return r},Qf.prototype.update=function(e,t,n,r,i,a,o){for(var s=i===xl,u=this.entries,c=0,l=u.length;c<l&&!Ah(r,u[c][0]);c++);var h=c<l;if(h?u[c][1]===i:s)return this;if(wl(o),(s||!h)&&wl(a),!s||1!==u.length){if(!h&&!s&&u.length>=pd)return function(e,t,n,r){e||(e=new kl);for(var i=new td(e,Lh(n),[n,r]),a=0;a<t.length;a++){var o=t[a];i=i.update(e,0,void 0,o[0],o[1])}return i}(e,u,r,i);var f=e&&e===this.ownerID,d=f?u:pf(u);return h?s?c===l-1?d.pop():d[c]=d.pop():d[c]=[r,i]:d.push([r,i]),f?(this.entries=d,this):new Qf(e,d)}};var Jf=function(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n};Jf.prototype.get=function(e,t,n,r){void 0===t&&(t=Lh(n));var i=1<<((0===e?t:t>>>e)&bl),a=this.bitmap;return 0===(a&i)?r:this.nodes[fd(a&i-1)].get(e+yl,t,n,r)},Jf.prototype.update=function(e,t,n,r,i,a,o){void 0===n&&(n=Lh(r));var s=(0===t?n:n>>>t)&bl,u=1<<s,c=this.bitmap,l=0!==(c&u);if(!l&&i===xl)return this;var h=fd(c&u-1),f=this.nodes,d=l?f[h]:void 0,p=cd(d,e,t+yl,n,r,i,a,o);if(p===d)return this;if(!l&&p&&f.length>=gd)return function(e,t,n,r,i){for(var a=0,o=new Array(_l),s=0;0!==n;s++,n>>>=1)o[s]=1&n?t[a++]:void 0;return o[r]=i,new $f(e,a+1,o)}(e,f,c,s,p);if(l&&!p&&2===f.length&&ld(f[1^h]))return f[1^h];if(l&&p&&1===f.length&&ld(p))return p;var g=e&&e===this.ownerID,v=l?p?c:c^u:c|u,m=l?p?dd(f,h,p,g):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),a=0,o=0;o<r;o++)o===t&&(a=1),i[o]=e[o+a];return i}(f,h,g):function(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var a=new Array(i),o=0,s=0;s<i;s++)s===t?(a[s]=n,o=-1):a[s]=e[s+o];return a}(f,h,p,g);return g?(this.bitmap=v,this.nodes=m,this):new Jf(e,v,m)};var $f=function(e,t,n){this.ownerID=e,this.count=t,this.nodes=n};$f.prototype.get=function(e,t,n,r){void 0===t&&(t=Lh(n));var i=(0===e?t:t>>>e)&bl,a=this.nodes[i];return a?a.get(e+yl,t,n,r):r},$f.prototype.update=function(e,t,n,r,i,a,o){void 0===n&&(n=Lh(r));var s=(0===t?n:n>>>t)&bl,u=i===xl,c=this.nodes,l=c[s];if(u&&!l)return this;var h=cd(l,e,t+yl,n,r,i,a,o);if(h===l)return this;var f=this.count;if(l){if(!h&&--f<vd)return function(e,t,n,r){for(var i=0,a=0,o=new Array(n),s=0,u=1,c=t.length;s<c;s++,u<<=1){var l=t[s];void 0!==l&&s!==r&&(i|=u,o[a++]=l)}return new Jf(e,i,o)}(e,c,f,s)}else f++;var d=e&&e===this.ownerID,p=dd(c,s,h,d);return d?(this.count=f,this.nodes=p,this):new $f(e,f,p)};var ed=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n};ed.prototype.get=function(e,t,n,r){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(Ah(n,i[a][0]))return i[a][1];return r},ed.prototype.update=function(e,t,n,r,i,a,o){void 0===n&&(n=Lh(r));var s=i===xl;if(n!==this.keyHash)return s?this:(wl(o),wl(a),hd(this,e,t,n,[r,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!Ah(r,u[c][0]);c++);var h=c<l;if(h?u[c][1]===i:s)return this;if(wl(o),(s||!h)&&wl(a),s&&2===l)return new td(e,this.keyHash,u[1^c]);var f=e&&e===this.ownerID,d=f?u:pf(u);return h?s?c===l-1?d.pop():d[c]=d.pop():d[c]=[r,i]:d.push([r,i]),f?(this.entries=d,this):new ed(e,this.keyHash,d)};var td=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n};td.prototype.get=function(e,t,n,r){return Ah(n,this.entry[0])?this.entry[1]:r},td.prototype.update=function(e,t,n,r,i,a,o){var s=i===xl,u=Ah(r,this.entry[0]);return(u?i===this.entry[1]:s)?this:(wl(o),s?void wl(a):u?e&&e===this.ownerID?(this.entry[1]=i,this):new td(e,this.keyHash,[r,i]):(wl(a),hd(this,e,t,Lh(r),[r,i])))},Qf.prototype.iterate=ed.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===e(n[t?i-r:r]))return!1},Jf.prototype.iterate=$f.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var a=n[t?i-r:r];if(a&&!1===a.iterate(e,t))return!1}},td.prototype.iterate=function(e,t){return e(this.entry)};var nd,rd=function(e){function t(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&ad(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n=t.node,r=t.index++,i=void 0;if(n.entry){if(0===r)return id(e,n.entry)}else if(n.entries){if(r<=(i=n.entries.length-1))return id(e,n.entries[this._reverse?i-r:r])}else if(r<=(i=n.nodes.length-1)){var a=n.nodes[this._reverse?i-r:r];if(a){if(a.entry)return id(e,a.entry);t=this._stack=ad(a,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(nh);function id(e,t){return rh(e,t[0],t[1])}function ad(e,t){return{node:e,index:0,__prev:t}}function od(e,t,n,r){var i=Object.create(Xf);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function sd(){return nd||(nd=od(0))}function ud(e,t,n){var r,i;if(e._root){var a={value:!1},o={value:!1};if(r=cd(e._root,e.__ownerID,0,void 0,t,n,a,o),!o.value)return e;i=e.size+(a.value?n===xl?-1:1:0)}else{if(n===xl)return e;i=1,r=new Qf(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?od(i,r):sd()}function cd(e,t,n,r,i,a,o,s){return e?e.update(t,n,r,i,a,o,s):a===xl?e:(wl(s),wl(o),new td(t,r,[i,a]))}function ld(e){return e.constructor===td||e.constructor===ed}function hd(e,t,n,r,i){if(e.keyHash===r)return new ed(t,r,[e.entry,i]);var a,o=(0===n?e.keyHash:e.keyHash>>>n)&bl,s=(0===n?r:r>>>n)&bl,u=o===s?[hd(e,t,n+yl,r,i)]:(a=new td(t,r,i),o<s?[e,a]:[a,e]);return new Jf(t,1<<o|1<<s,u)}function fd(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function dd(e,t,n,r){var i=r?e:pf(e);return i[t]=n,i}var pd=_l/4,gd=_l/2,vd=_l/4,md="@@__IMMUTABLE_LIST__@@";function yd(e){return Boolean(e&&e[md])}var _d=function(e){function t(t){var n=Md();if(void 0===t||null===t)return n;if(yd(t))return t;var r=e(t),i=r.size;return 0===i?n:(vf(i),i>0&&i<_l?Cd(0,i,yl,null,new xd(r.toArray())):n.withMutations((function(e){e.setSize(i),r.forEach((function(t,n){return e.set(n,t)}))})))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=Cl(this,e))>=0&&e<this.size){var n=Td(this,e+=this._origin);return n&&n.array[e&bl]}return t},t.prototype.set=function(e,t){return function(e,t,n){if(t=Cl(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Id(e,t).set(0,n):Id(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,i=e._root,a={value:!1};t>=Ld(e._capacity)?r=Ad(r,e.__ownerID,0,t,n,a):i=Ad(i,e.__ownerID,e._level,t,n,a);if(!a.value)return e;if(e.__ownerID)return e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e;return Cd(e._origin,e._capacity,e._level,i,r)}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=yl,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Md()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){Id(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},t.prototype.pop=function(){return Id(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Id(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},t.prototype.shift=function(){return Id(this,1)},t.prototype.concat=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++){var i=t[r],a=e("string"!==typeof i&&ah(i)?i:[i]);0!==a.size&&n.push(a)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(e){n.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(n[0])},t.prototype.setSize=function(e){return Id(this,0,e)},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){for(var i=0;i<n.size;i++)r.set(i,e.call(t,r.get(i),i,n))}))},t.prototype.slice=function(e,t){var n=this.size;return Al(e,t,n)?this:Id(this,El(e,n),Tl(t,n))},t.prototype.__iterator=function(e,t){var n=t?this.size:0,r=Sd(this,t);return new nh((function(){var i=r();return i===kd?{value:void 0,done:!0}:rh(e,t?--n:n++,i)}))},t.prototype.__iterate=function(e,t){for(var n,r=t?this.size:0,i=Sd(this,t);(n=i())!==kd&&!1!==e(n,t?--r:r++,this););return r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Cd(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?Md():(this.__ownerID=e,this.__altered=!1,this)},t}(Ul);_d.isList=yd;var bd=_d.prototype;bd[md]=!0,bd[ml]=bd.remove,bd.merge=bd.concat,bd.setIn=If,bd.deleteIn=bd.removeIn=Of,bd.update=Df,bd.updateIn=Bf,bd.mergeIn=Hf,bd.mergeDeepIn=Gf,bd.withMutations=Yf,bd.wasAltered=Zf,bd.asImmutable=qf,bd["@@transducer/init"]=bd.asMutable=Wf,bd["@@transducer/step"]=function(e,t){return e.push(t)},bd["@@transducer/result"]=function(e){return e.asImmutable()};var xd=function(e,t){this.array=e,this.ownerID=t};xd.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&bl;if(r>=this.array.length)return new xd([],e);var i,a=0===r;if(t>0){var o=this.array[r];if((i=o&&o.removeBefore(e,t-yl,n))===o&&a)return this}if(a&&!i)return this;var s=Ed(this,e);if(!a)for(var u=0;u<r;u++)s.array[u]=void 0;return i&&(s.array[r]=i),s},xd.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,i=n-1>>>t&bl;if(i>=this.array.length)return this;if(t>0){var a=this.array[i];if((r=a&&a.removeAfter(e,t-yl,n))===a&&i===this.array.length-1)return this}var o=Ed(this,e);return o.array.splice(i+1),r&&(o.array[i]=r),o};var wd,kd={};function Sd(e,t){var n=e._origin,r=e._capacity,i=Ld(r),a=e._tail;return o(e._root,e._level,0);function o(e,s,u){return 0===s?function(e,o){var s=o===i?a&&a.array:e&&e.array,u=o>n?0:n-o,c=r-o;c>_l&&(c=_l);return function(){if(u===c)return kd;var e=t?--c:u++;return s&&s[e]}}(e,u):function(e,i,a){var s,u=e&&e.array,c=a>n?0:n-a>>i,l=1+(r-a>>i);l>_l&&(l=_l);return function(){for(;;){if(s){var e=s();if(e!==kd)return e;s=null}if(c===l)return kd;var n=t?--l:c++;s=o(u&&u[n],i-yl,a+(n<<i))}}}(e,s,u)}}function Cd(e,t,n,r,i,a,o){var s=Object.create(bd);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=i,s.__ownerID=a,s.__hash=o,s.__altered=!1,s}function Md(){return wd||(wd=Cd(0,0,yl))}function Ad(e,t,n,r,i,a){var o,s=r>>>n&bl,u=e&&s<e.array.length;if(!u&&void 0===i)return e;if(n>0){var c=e&&e.array[s],l=Ad(c,t,n-yl,r,i,a);return l===c?e:((o=Ed(e,t)).array[s]=l,o)}return u&&e.array[s]===i?e:(a&&wl(a),o=Ed(e,t),void 0===i&&s===o.array.length-1?o.array.pop():o.array[s]=i,o)}function Ed(e,t){return t&&e&&t===e.ownerID?e:new xd(e?e.array.slice():[],t)}function Td(e,t){if(t>=Ld(e._capacity))return e._tail;if(t<1<<e._level+yl){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&bl],r-=yl;return n}}function Id(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new kl,i=e._origin,a=e._capacity,o=i+t,s=void 0===n?a:n<0?a+n:i+n;if(o===i&&s===a)return e;if(o>=s)return e.clear();for(var u=e._level,c=e._root,l=0;o+l<0;)c=new xd(c&&c.array.length?[void 0,c]:[],r),l+=1<<(u+=yl);l&&(o+=l,i+=l,s+=l,a+=l);for(var h=Ld(a),f=Ld(s);f>=1<<u+yl;)c=new xd(c&&c.array.length?[c]:[],r),u+=yl;var d=e._tail,p=f<h?Td(e,s-1):f>h?new xd([],r):d;if(d&&f>h&&o<a&&d.array.length){for(var g=c=Ed(c,r),v=u;v>yl;v-=yl){var m=h>>>v&bl;g=g.array[m]=Ed(g.array[m],r)}g.array[h>>>yl&bl]=d}if(s<a&&(p=p&&p.removeAfter(r,0,s)),o>=f)o-=f,s-=f,u=yl,c=null,p=p&&p.removeBefore(r,0,o);else if(o>i||f<h){for(l=0;c;){var y=o>>>u&bl;if(y!==f>>>u&bl)break;y&&(l+=(1<<u)*y),u-=yl,c=c.array[y]}c&&o>i&&(c=c.removeBefore(r,u,o-l)),c&&f<h&&(c=c.removeAfter(r,u,f-l)),l&&(o-=l,s-=l)}return e.__ownerID?(e.size=s-o,e._origin=o,e._capacity=s,e._level=u,e._root=c,e._tail=p,e.__hash=void 0,e.__altered=!0,e):Cd(o,s,u,c,p)}function Ld(e){return e<_l?0:e-1>>>yl<<yl}var Od,Pd=function(e){function t(e){return void 0===e||null===e?Bd():Ch(e)?e:Bd().withMutations((function(t){var n=Fl(e);vf(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Bd()},t.prototype.set=function(e,t){return Nd(this,e,t)},t.prototype.remove=function(e){return Nd(this,e,xl)},t.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Dd(t,n,e,this.__hash):0===this.size?Bd():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=n,this)},t}(Kf);function Dd(e,t,n,r){var i=Object.create(Pd.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Bd(){return Od||(Od=Dd(sd(),Md()))}function Nd(e,t,n){var r,i,a=e._map,o=e._list,s=a.get(t),u=void 0!==s;if(n===xl){if(!u)return e;o.size>=_l&&o.size>=2*a.size?(r=(i=o.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=a.remove(t),i=s===o.size-1?o.pop():o.set(s,void 0))}else if(u){if(n===o.get(s)[1])return e;r=a,i=o.set(s,[t,n])}else r=a.set(t,o.size),i=o.set(o.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e.__altered=!0,e):Dd(r,i)}Pd.isOrderedMap=Ch,Pd.prototype[Zl]=!0,Pd.prototype[ml]=Pd.prototype.remove;var Rd="@@__IMMUTABLE_STACK__@@";function jd(e){return Boolean(e&&e[Rd])}var zd=function(e){function t(e){return void 0===e||null===e?Hd():jd(e)?e:Hd().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var n=this._head;for(e=Cl(this,e);n&&e--;)n=n.next;return n?n.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:e[r],next:n};return this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Vd(t,n)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&jd(t))return t;vf(t.size);var n=this.size,r=this._head;return t.__iterate((function(e){n++,r={value:e,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):Vd(n,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Hd()},t.prototype.slice=function(t,n){if(Al(t,n,this.size))return this;var r=El(t,this.size);if(Tl(n,this.size)!==this.size)return e.prototype.slice.call(this,t,n);for(var i=this.size-r,a=this._head;r--;)a=a.next;return this.__ownerID?(this.size=i,this._head=a,this.__hash=void 0,this.__altered=!0,this):Vd(i,a)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Vd(this.size,this._head,e,this.__hash):0===this.size?Hd():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var n=this;if(t)return new gh(this.toArray()).__iterate((function(t,r){return e(t,r,n)}),t);for(var r=0,i=this._head;i&&!1!==e(i.value,r++,this);)i=i.next;return r},t.prototype.__iterator=function(e,t){if(t)return new gh(this.toArray()).__iterator(e,t);var n=0,r=this._head;return new nh((function(){if(r){var t=r.value;return r=r.next,rh(e,n++,t)}return{value:void 0,done:!0}}))},t}(Ul);zd.isStack=jd;var Fd,Ud=zd.prototype;function Vd(e,t,n,r){var i=Object.create(Ud);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Hd(){return Fd||(Fd=Vd(0))}Ud[Rd]=!0,Ud.shift=Ud.pop,Ud.unshift=Ud.push,Ud.unshiftAll=Ud.pushAll,Ud.withMutations=Yf,Ud.wasAltered=Zf,Ud.asImmutable=qf,Ud["@@transducer/init"]=Ud.asMutable=Wf,Ud["@@transducer/step"]=function(e,t){return e.unshift(t)},Ud["@@transducer/result"]=function(e){return e.asImmutable()};var Gd="@@__IMMUTABLE_SET__@@";function Yd(e){return Boolean(e&&e[Gd])}function Wd(e){return Yd(e)&&Kl(e)}function qd(e,t){if(e===t)return!0;if(!Pl(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||Bl(e)!==Bl(t)||Rl(e)!==Rl(t)||Kl(e)!==Kl(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!jl(e);if(Kl(e)){var r=e.entries();return t.every((function(e,t){var i=r.next().value;return i&&Ah(i[1],e)&&(n||Ah(i[0],t))}))&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"===typeof e.cacheResult&&e.cacheResult();else{i=!0;var a=e;e=t,t=a}var o=!0,s=t.__iterate((function(t,r){if(n?!e.has(t):i?!Ah(t,e.get(r,xl)):!Ah(e.get(r,xl),t))return o=!1,!1}));return o&&e.size===s}function Zd(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Kd(e){if(!e||"object"!==typeof e)return e;if(!Pl(e)){if(!bf(e))return e;e=hh(e)}if(Bl(e)){var t={};return e.__iterate((function(e,n){t[n]=Kd(e)})),t}var n=[];return e.__iterate((function(e){n.push(Kd(e))})),n}var Xd=function(e){function t(t){return void 0===t||null===t?tp():Yd(t)&&!Kl(t)?t:tp().withMutations((function(n){var r=e(t);vf(r.size),r.forEach((function(e){return n.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(Fl(e).keySeq())},t.intersect=function(e){return(e=zl(e).toArray()).length?Jd.intersect.apply(t(e.pop()),e):tp()},t.union=function(e){return(e=zl(e).toArray()).length?Jd.union.apply(t(e.pop()),e):tp()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return $d(this,this._map.set(e,e))},t.prototype.remove=function(e){return $d(this,this._map.remove(e))},t.prototype.clear=function(){return $d(this,this._map.clear())},t.prototype.map=function(e,t){var n=this,r=!1,i=$d(this,this._map.mapEntries((function(i){var a=i[1],o=e.call(t,a,a,n);return o!==a&&(r=!0),[o,o]}),t));return r?i:this},t.prototype.union=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return t=t.filter((function(e){return 0!==e.size})),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(n){for(var r=0;r<t.length;r++)"string"===typeof t[r]?n.add(t[r]):e(t[r]).forEach((function(e){return n.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return bp(rf(this,e))},t.prototype.sortBy=function(e,t){return bp(rf(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(Vl);Xd.isSet=Yd;var Qd,Jd=Xd.prototype;function $d(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function ep(e,t){var n=Object.create(Jd);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function tp(){return Qd||(Qd=ep(sd()))}Jd[Gd]=!0,Jd[ml]=Jd.remove,Jd.merge=Jd.concat=Jd.union,Jd.withMutations=Yf,Jd.asImmutable=qf,Jd["@@transducer/init"]=Jd.asMutable=Wf,Jd["@@transducer/step"]=function(e,t){return e.add(t)},Jd["@@transducer/result"]=function(e){return e.asImmutable()},Jd.__empty=tp,Jd.__make=ep;var np,rp=function(e){function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);if(gf(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<e&&(r=-r),this._start=e,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-e)/r-1)+1),0===this.size){if(np)return np;np=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+Cl(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,n){return Al(e,n,this.size)?this:(e=El(e,this.size),(n=Tl(n,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(n,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var n=this.size,r=this._step,i=t?this._start+(n-1)*r:this._start,a=0;a!==n&&!1!==e(i,t?n-++a:a++,this);)i+=t?-r:r;return a},t.prototype.__iterator=function(e,t){var n=this.size,r=this._step,i=t?this._start+(n-1)*r:this._start,a=0;return new nh((function(){if(a===n)return{value:void 0,done:!0};var o=i;return i+=t?-r:r,rh(e,t?n-++a:a++,o)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:qd(this,e)},t}(dh);function ip(e,t,n){for(var r=mf(t),i=0;i!==r.length;)if((e=kf(e,r[i++],xl))===xl)return n;return e}function ap(e,t){return ip(this,e,t)}function op(e,t){return ip(e,t,xl)!==xl}function sp(){vf(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e}zl.isIterable=Pl,zl.isKeyed=Bl,zl.isIndexed=Rl,zl.isAssociative=jl,zl.isOrdered=Kl,zl.Iterator=nh,Zd(zl,{toArray:function(){vf(this.size);var e=new Array(this.size||0),t=Bl(this),n=0;return this.__iterate((function(r,i){e[n++]=t?[i,r]:r})),e},toIndexedSeq:function(){return new qh(this)},toJS:function(){return Kd(this)},toKeyedSeq:function(){return new Wh(this,!0)},toMap:function(){return Kf(this.toKeyedSeq())},toObject:sp,toOrderedMap:function(){return Pd(this.toKeyedSeq())},toOrderedSet:function(){return bp(Bl(this)?this.valueSeq():this)},toSet:function(){return Xd(Bl(this)?this.valueSeq():this)},toSetSeq:function(){return new Zh(this)},toSeq:function(){return Rl(this)?this.toIndexedSeq():Bl(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return zd(Bl(this)?this.valueSeq():this)},toList:function(){return _d(Bl(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return uf(this,function(e,t){var n=Bl(e),r=[e].concat(t).map((function(e){return Pl(e)?n&&(e=Fl(e)):e=n?bh(e):xh(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===r.length)return e;if(1===r.length){var i=r[0];if(i===e||n&&Bl(i)||Rl(e)&&Rl(i))return i}var a=new gh(r);return n?a=a.toKeyedSeq():Rl(e)||(a=a.toSetSeq()),(a=a.flatten(!0)).size=r.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),a}(this,e))},includes:function(e){return this.some((function(t){return Ah(t,e)}))},entries:function(){return this.__iterator(Jl)},every:function(e,t){vf(this.size);var n=!0;return this.__iterate((function(r,i,a){if(!e.call(t,r,i,a))return n=!1,!1})),n},filter:function(e,t){return uf(this,$h(this,e,t,!0))},partition:function(e,t){return function(e,t,n){var r=Bl(e),i=[[],[]];e.__iterate((function(a,o){i[t.call(n,a,o,e)?1:0].push(r?[o,a]:a)}));var a=lf(e);return i.map((function(t){return uf(e,a(t))}))}(this,e,t)},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return vf(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){vf(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""})),t},keys:function(){return this.__iterator(Xl)},map:function(e,t){return uf(this,Qh(this,e,t))},reduce:function(e,t,n){return fp(this,e,t,n,arguments.length<2,!1)},reduceRight:function(e,t,n){return fp(this,e,t,n,arguments.length<2,!0)},reverse:function(){return uf(this,Jh(this,!0))},slice:function(e,t){return uf(this,ef(this,e,t,!0))},some:function(e,t){vf(this.size);var n=!1;return this.__iterate((function(r,i,a){if(e.call(t,r,i,a))return n=!0,!1})),n},sort:function(e){return uf(this,rf(this,e))},values:function(){return this.__iterator(Ql)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return Sl(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=Kf().asMutable();return e.__iterate((function(i,a){r.update(t.call(n,i,a,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return qd(this,e)},entrySeq:function(){var e=this;if(e._cache)return new gh(e._cache);var t=e.toSeq().map(pp).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(gp(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate((function(n,i,a){if(e.call(t,n,i,a))return r=[i,n],!1})),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(Ml,null,e)},flatMap:function(e,t){return uf(this,function(e,t,n){var r=lf(e);return e.toSeq().map((function(i,a){return r(t.call(n,i,a,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return uf(this,nf(this,e,!0))},fromEntrySeq:function(){return new Kh(this)},get:function(e,t){return this.find((function(t,n){return Ah(n,e)}),void 0,t)},getIn:ap,groupBy:function(e,t){return function(e,t,n){var r=Bl(e),i=(Kl(e)?Pd():Kf()).asMutable();e.__iterate((function(a,o){i.update(t.call(n,a,o,e),(function(e){return(e=e||[]).push(r?[o,a]:a),e}))}));var a=lf(e);return i.map((function(t){return uf(e,a(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,xl)!==xl},hasIn:function(e){return op(this,e)},isSubset:function(e){return e="function"===typeof e.includes?e:zl(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"===typeof e.isSubset?e:zl(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return Ah(t,e)}))},keySeq:function(){return this.toSeq().map(dp).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return af(this,e)},maxBy:function(e,t){return af(this,t,e)},min:function(e){return af(this,e?vp(e):yp)},minBy:function(e,t){return af(this,t?vp(t):yp,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return uf(this,tf(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(gp(e),t)},sortBy:function(e,t){return uf(this,rf(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return uf(this,function(e,t,n){var r=hf(e);return r.__iterateUncached=function(r,i){var a=this;if(i)return this.cacheResult().__iterate(r,i);var o=0;return e.__iterate((function(e,i,s){return t.call(n,e,i,s)&&++o&&r(e,i,a)})),o},r.__iteratorUncached=function(r,i){var a=this;if(i)return this.cacheResult().__iterator(r,i);var o=e.__iterator(Jl,i),s=!0;return new nh((function(){if(!s)return{value:void 0,done:!0};var e=o.next();if(e.done)return e;var i=e.value,u=i[0],c=i[1];return t.call(n,c,u,a)?r===Jl?e:rh(r,u,c,e):(s=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(gp(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=Kl(e),n=Bl(e),r=t?1:0,i=e.__iterate(n?t?function(e,t){r=31*r+_p(Lh(e),Lh(t))|0}:function(e,t){r=r+_p(Lh(e),Lh(t))|0}:t?function(e){r=31*r+Lh(e)|0}:function(e){r=r+Lh(e)|0});return function(e,t){return t=Eh(t,3432918353),t=Eh(t<<15|t>>>-15,461845907),t=Eh(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Eh(t^t>>>16,2246822507),t=Eh(t^t>>>13,3266489909),t=Th(t^t>>>16),t}(i,r)}(this))}});var up=zl.prototype;up[Ol]=!0,up[th]=up.values,up.toJSON=up.toArray,up.__toStringMapper=xf,up.inspect=up.toSource=function(){return this.toString()},up.chain=up.flatMap,up.contains=up.includes,Zd(Fl,{flip:function(){return uf(this,Xh(this))},mapEntries:function(e,t){var n=this,r=0;return uf(this,this.toSeq().map((function(i,a){return e.call(t,[a,i],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return uf(this,this.toSeq().flip().map((function(r,i){return e.call(t,r,i,n)})).flip())}});var cp=Fl.prototype;cp[Dl]=!0,cp[th]=up.entries,cp.toJSON=sp,cp.__toStringMapper=function(e,t){return xf(t)+": "+xf(e)},Zd(Ul,{toKeyedSeq:function(){return new Wh(this,!1)},filter:function(e,t){return uf(this,$h(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return uf(this,Jh(this,!1))},slice:function(e,t){return uf(this,ef(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(t||0,0),0===n||2===n&&!t)return this;e=El(e,e<0?this.count():this.size);var r=this.slice(0,e);return uf(this,1===n?r:r.concat(pf(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return uf(this,nf(this,e,!1))},get:function(e,t){return(e=Cl(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=Cl(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return uf(this,function(e,t){var n=hf(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,a=0;return e.__iterate((function(e){return(!a||!1!==n(t,a++,i))&&!1!==n(e,a++,i)}),r),a},n.__iteratorUncached=function(n,r){var i,a=e.__iterator(Ql,r),o=0;return new nh((function(){return(!i||o%2)&&(i=a.next()).done?i:o%2?rh(n,o++,t):rh(n,o++,i.value,i)}))},n}(this,e))},interleave:function(){var e=[this].concat(pf(arguments)),t=sf(this.toSeq(),dh.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),uf(this,n)},keySeq:function(){return rp(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return uf(this,tf(this,e,t,!1))},zip:function(){return uf(this,sf(this,mp,[this].concat(pf(arguments))))},zipAll:function(){return uf(this,sf(this,mp,[this].concat(pf(arguments)),!0))},zipWith:function(e){var t=pf(arguments);return t[0]=this,uf(this,sf(this,e,t))}});var lp=Ul.prototype;lp[Nl]=!0,lp[Zl]=!0,Zd(Vl,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var hp=Vl.prototype;function fp(e,t,n,r,i,a){return vf(e.size),e.__iterate((function(e,a,o){i?(i=!1,n=e):n=t.call(r,n,e,a,o)}),a),n}function dp(e,t){return t}function pp(e,t){return[t,e]}function gp(e){return function(){return!e.apply(this,arguments)}}function vp(e){return function(){return-e.apply(this,arguments)}}function mp(){return pf(arguments)}function yp(e,t){return e<t?1:e>t?-1:0}function _p(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}hp.has=up.includes,hp.contains=hp.includes,hp.keys=hp.values,Zd(fh,cp),Zd(dh,lp),Zd(ph,hp);var bp=function(e){function t(e){return void 0===e||null===e?Sp():Wd(e)?e:Sp().withMutations((function(t){var n=Vl(e);vf(n.size),n.forEach((function(e){return t.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(Fl(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(Xd);bp.isOrderedSet=Wd;var xp,wp=bp.prototype;function kp(e,t){var n=Object.create(wp);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Sp(){return xp||(xp=kp(Bd()))}wp[Zl]=!0,wp.zip=lp.zip,wp.zipWith=lp.zipWith,wp.zipAll=lp.zipAll,wp.__empty=Sp,wp.__make=kp;var Cp=function(e,t){var n;!function(e){if(Wl(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(ql(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!==typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var r=function(a){var o=this;if(a instanceof r)return a;if(!(this instanceof r))return new r(a);if(!n){n=!0;var s=Object.keys(e),u=i._indices={};i._name=t,i._keys=s,i._defaultValues=e;for(var c=0;c<s.length;c++){var l=s[c];u[l]=c,i[l]?"object"===typeof console&&console.warn&&console.warn("Cannot define "+Ep(this)+' with property "'+l+'" since that property name is part of the Record API.'):Ip(i,l)}}return this.__ownerID=void 0,this._values=_d().withMutations((function(e){e.setSize(o._keys.length),Fl(a).forEach((function(t,n){e.set(o._indices[n],t===o._defaultValues[n]?void 0:t)}))})),this},i=r.prototype=Object.create(Mp);return i.constructor=r,t&&(r.displayName=t),r};Cp.prototype.toString=function(){for(var e,t=Ep(this)+" { ",n=this._keys,r=0,i=n.length;r!==i;r++)t+=(r?", ":"")+(e=n[r])+": "+xf(this.get(e));return t+" }"},Cp.prototype.equals=function(e){return this===e||Wl(e)&&Tp(this).equals(Tp(e))},Cp.prototype.hashCode=function(){return Tp(this).hashCode()},Cp.prototype.has=function(e){return this._indices.hasOwnProperty(e)},Cp.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._indices[e],r=this._values.get(n);return void 0===r?this._defaultValues[e]:r},Cp.prototype.set=function(e,t){if(this.has(e)){var n=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(n!==this._values&&!this.__ownerID)return Ap(this,n)}return this},Cp.prototype.remove=function(e){return this.set(e)},Cp.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Ap(this,e)},Cp.prototype.wasAltered=function(){return this._values.wasAltered()},Cp.prototype.toSeq=function(){return Tp(this)},Cp.prototype.toJS=function(){return Kd(this)},Cp.prototype.entries=function(){return this.__iterator(Jl)},Cp.prototype.__iterator=function(e,t){return Tp(this).__iterator(e,t)},Cp.prototype.__iterate=function(e,t){return Tp(this).__iterate(e,t)},Cp.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?Ap(this,t,e):(this.__ownerID=e,this._values=t,this)},Cp.isRecord=Wl,Cp.getDescriptiveName=Ep;var Mp=Cp.prototype;function Ap(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function Ep(e){return e.constructor.displayName||e.constructor.name||"Record"}function Tp(e){return bh(e._keys.map((function(t){return[t,e.get(t)]})))}function Ip(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){gf(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(n){}}Mp[Yl]=!0,Mp[ml]=Mp.remove,Mp.deleteIn=Mp.removeIn=Of,Mp.getIn=ap,Mp.hasIn=up.hasIn,Mp.merge=Nf,Mp.mergeWith=Rf,Mp.mergeIn=Hf,Mp.mergeDeep=Uf,Mp.mergeDeepWith=Vf,Mp.mergeDeepIn=Gf,Mp.setIn=If,Mp.update=Df,Mp.updateIn=Bf,Mp.withMutations=Yf,Mp.asMutable=Wf,Mp.asImmutable=qf,Mp[th]=Mp.entries,Mp.toJSON=Mp.toObject=up.toObject,Mp.inspect=Mp.toSource=function(){return this.toString()};var Lp,Op,Pp,Dp,Bp,Np,Rp,jp,zp=n.p+"static/media/star.b59e1da5abb5673f214c90739221f21e.svg",Fp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKIAAAB4CAMAAABGidlgAAAAM1BMVEXn5+fq6uq4uLjT09OwsLC0tLTj4+PAwMDt7e3FxcW7u7va2trg4OCtra3IyMjX19empqZLDA7IAAACwUlEQVR4nO2YiY7jIAyGMZgzHPP+T7s26ZEeo5FWrJpZ/Z+qNmlI88VgE2oMAAAAAAAAAAAAAADgP6aGTxv8RPrq9GmHn0inNwQAAAD+Fb9gEqRf4PhB6JVPKz3jXhknkyz+hXg2Rduf8PlsiiURpXQbiIn4fIoitG2Hb26Kl8Shy9tNnMx9h44t782WJp4oUub8RpGG5g1VN7d7v2WRq8b0Oveq0+Uhbe5iKuNk0wN73m1rHEWxckxvFFNscn1yXt5yjIXjfjw0kW0zpyj7qh+R50K2Wl8sy4IxsBV8T2YFqtgeysxd0cvVyFmJUpOR4HiPVWCJDtsp5adisN7JOSnrPfVWSe4iKEsMZ0fH/D6KRa6mimkO2BT3YO+KKpUc2zoD3bUBsdMGw4jioj6+Kkq6HL+5K/ZYdkWrXZa6p5uijzYZKrOjU8yVNZrt+juh1bRumpqK1x9LmgUHRbFJ2tFTkY6KPLhS9dvsaB4kL1NZFJMUMGnixhjbN5f8K8UL1Nk+RDFJrO6K7qDYao4pFyPRo+ElYUoyGsrQWEp/8FZmqbJSce8TcbA2PijWto23UWx18xK9oIoimwbPA1puiig2V4WVitaq4RBDy+GoSL28H4sy2GQ40hyD3pZSpKclj/Vu5bT16RK9z1JZ/CxmD4pGuqxobmuoSzwqkmtdFWlwzDnbTMSzEEqur1ZM2WuZrda+UZTQFa2LTlKbx1HRhBhUUfwlRaT+zFpPUhfNjOfCuhjdHj37VnEfBJJH3vPlf8agqm1OgLOjZ9k25ksqdpRmuhv00/Oq2SXmq92TIo3ZW9vQHZ2jr6foHO32CAUnr7lJc0Z2fZ+8187RT4r3dHlY9R0L8euTzm3r2ozImGWrRunoEo+YEz4vPi9dTvfUbZ9XLnw6xe2VVbMCAAAAAAAAAAAAAAAAAAAAAAAAAL7lD0UaGWSlFwLFAAAAAElFTkSuQmCC",Up=c.default.div(Lp||(Lp=s(["\n    overflow: auto;\n    width: 100%;\n    display: block;\n    height: 100%;\n    ","\n"])),(function(e){return e.isMobile&&"\n        position:fixed;\n        top:0;\n        left:0;\n        width:100%;\n        height:100%;\n        z-index:11;\n        background-color:#ffffff;\n    "})),Vp=c.default.h3(Op||(Op=s(["\n    margin-bottom: 30px;\n    color: #313c46;\n"]))),Hp=c.default.ul(Pp||(Pp=s(["\n    margin: 10px 0px;\n    list-style: none;\n    overflow: hidden;\n    padding-left: 0px;\n    ","\n"])),(function(e){return e.isMobile&&"\n        margin: 10px 5px;\n        display:flex;\n        justify-content: center;\n        \n        ::-webkit-scrollbar {\n            display: none;\n        }\n    "})),Gp=c.default.li(Dp||(Dp=s(["\n    float: left;\n    margin: 0px 10px 20px 0px;\n    padding: 5px 10px;\n    border: 2px solid #eee;\n    cursor: pointer;\n    font-size: 14px;\n    ",";\n"])),(function(e){return e.selected&&"\n        border: 2px solid #313c46;\n    "})),Yp=c.default.div(Bp||(Bp=s(["\n    padding: 0px;\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(128px, 150px));\n    grid-gap: 10px;\n    cursor: pointer;\n    ",";\n"])),(function(e){return e.isMobile&&"\n        padding: 5px;\n        justify-content: center;\n    "})),Wp=c.default.div(Np||(Np=s(["\n    display: flex;\n    position: relative;\n    border: 1px solid transparent;\n    background-color: #eceff1;\n    padding: 0 20px;\n    img {\n        width: 100%;\n        }\n        &:hover {\n        border: 1px solid #161b1f;\n        }\n"]))),qp=(0,c.default)(Ya)(Rp||(Rp=s(["\n    position: absolute;\n    cursor: pointer;\n    right: 5px;\n    top: 5px;\n    opacity: 0.8;\n    font-size: 15px;\n    padding: 5px;\n    background-color: white;\n    height: 25px;\n    border-radius: 100%;\n    &:hover {\n             opacity: 1;\n            }\n\n"]))),Zp=function(t){var n=t.onCloseClick,r=(0,l.useZakeke)(),i=r.draftCompositions,a=r.loadSavedComposition,s=r.deleteSavedComposition,u=r.groups,c=re(),h=c.setSelectedGroupId,f=c.isMobile,d=o((0,e.useState)([]),2),p=d[0],g=d[1],v=o((0,e.useState)([]),2),m=v[0],y=v[1],_=o((0,e.useState)(),2),b=_[0],x=_[1];(0,e.useEffect)((function(){var e=[];i&&i.length>0&&i.forEach((function(t){if(t.tags){var n=t.tags;e.push.apply(e,z(n))}}));var t=z(Array.from(new Set(e)));y(t)}),[i]);var w=function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:f&&h(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:i&&1===i.length&&h(u[0].id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,N.jsxs)(Up,{isMobile:f,children:[(0,N.jsx)(Vp,{children:ae._("Saved configurations","Composer")}),i&&0===i.length&&(0,N.jsx)("span",{children:ae._("You currently have no saved configurations.","Composer")}),i&&i.length>0&&(0,N.jsxs)(N.Fragment,{children:[m&&m.length>0&&(0,N.jsx)(Hp,{isMobile:f,children:m.map((function(e){return(0,N.jsx)(Gp,{selected:-1!==p.indexOf(e),children:(0,N.jsx)("span",{onClick:function(){return function(e){var t=p;-1!==t.indexOf(e)?t=p.filter((function(t){return t!==e})):t.push(e),g(t);var n=i.filter((function(e){var n;return null===(n=e.tags)||void 0===n?void 0:n.some((function(e){return-1!==t.indexOf(e)}))}));x(n)}(e)},children:e})},e)}))}),i&&(0,N.jsx)(Yp,{isMobile:f,children:(p&&0===p.length?i:b).map((function(e){return(0,N.jsxs)(Wp,{isMobile:f,onClick:function(){return w(e.docID)},children:[(0,N.jsx)("img",{src:e.previewImageUrl,alt:""}),(0,N.jsx)(qp,{onClick:function(){return k(e.docID)},children:(0,N.jsx)(go,{})})]},e.docID)}))}),f&&(0,N.jsx)(Za,{onClick:n,children:ae._("OK","Composer")})]})]})},Kp=["title","titleId"];function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp.apply(this,arguments)}function Qp(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Jp(t,n){var r=t.title,i=t.titleId,a=Qp(t,Kp);return e.createElement("svg",Xp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",ref:n,"aria-labelledby":i},a),r?e.createElement("title",{id:i},r):null,jp||(jp=e.createElement("path",{d:"M 12.96875 4.28125 L 11.53125 5.71875 L 21.8125 16 L 11.53125 26.28125 L 12.96875 27.71875 L 23.96875 16.71875 L 24.65625 16 L 23.96875 15.28125 Z"})))}var $p,eg,tg,ng,rg,ig,ag,og,sg,ug,cg,lg,hg,fg,dg,pg,gg=e.forwardRef(Jp),vg=(n.p,(0,c.default)(Ya)($p||($p=s(["\n    position:absolute;\n    top:0px;\n    ","\n"])),(function(e){return e.isRight?"right:2px;":"left:2px;"}))),mg=c.default.div(eg||(eg=s(["\n  display: flex;\n  ","\n  justify-content:center;\n  max-width: 100%;\n  ","\n  height: 40px;\n  grid-gap:20px;\n  ","\n"])),(function(e){return e.isMobile?"align-items:center;":"align-items:flex-start;"}),(function(e){return!e.isMobile&&"background-color: #fff;"}),(function(e){return e.isMobile?"justify-content:flex-start;":"justify-content:center;"})),yg=c.default.div(tg||(tg=s(["\n  border-radius: 32px;\n  background-color:#297ca3;\n  color:white;\n  width: 32px;\n  height: 32px;\n  font-weight: 500;\n  z-index: 2;\n  position: relative;\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n  justify-content:center;\n  font-weight: bold;\n  cursor: pointer;\n  padding: 0px 20px;\n  ","\n  ","\n\n  :hover{\n    background-color:#297ca3;\n    color:white;\n  }\n  ","\n  span{\n    z-index:2;\n  }\n"])),(function(e){return e.selected&&"background-color:#297ca3;"}),(function(e){return e.selected&&"color:white;"}),(function(e){return!e.isMobile&&'\n  :not(:last-child){\n  :before{\n    content: "";\n    position: absolute;\n    left: 100%;\n    top: 50%;\n    width: 100%;\n    height: 1px;  \n    background-color: #297ca3;\n    z-index: 1;\n    color:white;\n  }\n}\n'})),_g=c.default.h4(ng||(ng=s(["\n    text-align: center;\n    margin: 0;\n    ",";\n    font-weight: 500;\n    color: #297ca3;\n    ","\n"])),(function(e){return!e.isMobile&&"margin-top: 15px"}),(function(e){return e.isMobile&&"\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width:110px;\n        font-size: 1rem;\n    "})),bg=function(t){var n=t.hasNextGroup,r=t.hasPreviousGroup,i=t.onNextStep,a=t.onPreviousStep,s=t.onStepChange,u=t.currentStep,c=t.steps,h=(t.children,window.innerWidth<=1024?3:window.innerWidth<=1366?4:window.innerWidth<=1600?5:6),f=o((0,e.useState)(0),2),d=f[0],p=f[1],g=re().isMobile,v=(0,l.useZakeke)().setCamera,m=function(e,t,n){var r=[];if(e<=t)for(var i=0;i<t;i++)r.push(n[i]);else for(var a=e-t;a<e;a++)r.push(n[a]);return r}(d+1,h,c),y=function(){c&&(d===c.length-1?i():s(c[d+1]))},_=function(){c&&(0===d?a():s(c[d-1]))};return(0,e.useEffect)((function(){c&&u&&(p(c.indexOf(u)),u.cameraLocationID&&v(u.cameraLocationID))}),[c,u]),(0,N.jsxs)(Tu,{children:[(!(0===d)||r)&&!g&&(0,N.jsx)(vg,{onClick:_,children:(0,N.jsx)(Qc,{})}),(0,N.jsxs)(mg,{isMobile:g,children:[(!(0===d)||r)&&g&&(0,N.jsx)(Ya,{onClick:_,children:(0,N.jsx)(Qc,{})}),c&&(c.length<h?c:m).map((function(t,n){return(0,N.jsxs)(e.Fragment,{children:[(0,N.jsx)(yg,{isMobile:g,onClick:function(){return s(t)},selected:t.id===(null===u||void 0===u?void 0:u.id),children:(0,N.jsx)("span",{children:c.indexOf(t)+1})},t.id),u&&t.id===(null===u||void 0===u?void 0:u.id)&&g&&(0,N.jsx)(_g,{isMobile:g,children:ae._d(u.name)})]},t.id)})),(!(d===c.length-1)||n)&&g&&(0,N.jsx)(Ya,{onClick:y,children:(0,N.jsx)(gg,{})})]}),(!(d===c.length-1)||n)&&!g&&(0,N.jsx)(vg,{isRight:!0,onClick:y,children:(0,N.jsx)(gg,{})}),u&&!g&&(0,N.jsx)(_g,{children:ae._d(u.name)})]})},xg=c.default.div(rg||(rg=s(["\n    display: flex;\n    max-width: 100%;\n    min-height: 141px;\n    width: 100%;\n    overflow-x: auto;\n    background-color: #ffffff ;\n    border-top: 1px #ffffff  solid;\n    -ms-overflow-style: none;  /* IE and Edge */\n    scrollbar-width: none;  /* Firefox */\n\n    ::-webkit-scrollbar {\n        display: none;\n    }\n\n    span{\n        font-size:16px;\n    }\n"]))),wg=(0,c.css)(ig||(ig=s(["\n    position: absolute;\n    left: 10px;\n    bottom: 60px;\n    background-color: #F1F1F1;\n    border-radius: 30px;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 3;\n"]))),kg=c.default.div(ag||(ag=s(["\n",";\n"])),wg),Sg=c.default.div(og||(og=s(["\n",";\nleft: auto;\nright: 10px;\n"])),wg),Cg=(0,c.default)(Ya)(sg||(sg=s(["\n font-size: 22px;\n"]))),Mg=(0,c.default)(Ya)(ug||(ug=s(["\n font-size: 22px;\n"]))),Ag=function(t){var n=t.children,r=t.isLeftArrowVisible,i=t.isRightArrowVisible,a=t.onScrollChange,s=t.scrollLeft,u=o((0,e.useState)(!1),2),c=u[0],l=u[1],h=o((0,e.useState)(!1),2),f=h[0],d=h[1],p=(0,e.useRef)(null);return p.current&&null!=s&&(p.current.scrollLeft=null!==s&&void 0!==s?s:0),(0,e.useEffect)((function(){var e=function(){if(p.current){a(p.current.scrollLeft);var e=function(e){var t=!1,n=!1;return e.scrollLeft>0&&(t=!0),e.scrollWidth-e.clientWidth>e.scrollLeft&&(n=!0),[t,n]}(p.current),t=o(e,2),n=t[0],r=t[1];l(n),d(r)}};e();var t=p.current;return null===t||void 0===t||t.addEventListener("scroll",e),function(){return null===t||void 0===t?void 0:t.removeEventListener("scroll",e)}}),[]),(0,N.jsxs)(xg,{ref:p,children:[c&&r&&(0,N.jsx)(kg,{children:(0,N.jsx)(Cg,{children:(0,N.jsx)(Gi,{})})}),n,f&&i&&(0,N.jsx)(Sg,{children:(0,N.jsx)(Mg,{children:(0,N.jsx)(Qi,{})})})]})},Eg=function(e){return(0,N.jsxs)(Eu,{onClick:e.onClick,selected:e.selected,children:[e.imageUrl&&(0,N.jsx)(Iu,{isRound:e.isRound,src:e.imageUrl,alt:e.label,loading:"lazy"}),!e.imageUrl&&e.icon&&(0,N.jsx)(Bu,{children:e.icon}),e.images&&(0,N.jsx)(Lu,{children:[0,0,0,0].map((function(t,n){return(0,N.jsx)(Ou,{children:e.images.length>n&&(0,N.jsx)(Du,{isRound:e.isRound,src:e.images?e.images[n]:Fp,alt:e.label,loading:"lazy"})},n)}))}),!e.hideLabel&&(0,N.jsx)(Pu,{children:e.label})]})},Tg=c.default.div(cg||(cg=s(["\n\tdisplay: flex;\n\tflex: 1;\n\tflex-direction: column;\n\tmin-height: 0;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tpadding: 20px 0px;\n\t","\n"])),(function(e){return e.isMobile&&"\n        position:fixed;\n        top:0;\n        left:0;\n        width:100%;\n        height:100%;\n        z-index:11;\n        background-color:#ffffff;\n    "})),Ig=c.default.div(lg||(lg=s(["\n\tpadding: 20px 0px;\n\tdisplay: grid;\n\tgrid-template-columns: repeat(auto-fill, minmax(128px, 150px));\n\tgrid-gap: 10px;\n\tcursor: pointer;\n\t",";\n"])),(function(e){return e.isMobile&&"\n        padding: 5px;\n        justify-content: center;\n    "})),Lg=c.default.div(hg||(hg=s(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\ttext-align: center;\n\tborder: 1px solid transparent;\n\tpadding: 0 20px;\n\timg {\n\t\twidth: 100%;\n\t}\n\t&:hover {\n\t\tborder: 1px solid #161b1f;\n\t}\n\t",";\n"])),(function(e){return e.selected&&"\n\t\tbackground-color: #eceff1;\n    "})),Og=function(t){var n=t.templateGroup,r=t.isMobile,i=t.onCloseClick,a=o((0,e.useState)(),2),s=a[0],u=a[1],c=o((0,e.useState)(),2),h=c[0],f=c[1],d=o((0,e.useState)(0),2),p=d[0],g=d[1],v=o((0,e.useState)(),2),m=v[0],y=v[1],_=(0,l.useZakeke)().applyTemplate,b=o((0,e.useState)(),2),x=b[0],w=b[1],k=function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),e.next=3,C(t.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t),_(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===(n=m.find((function(e){return t===e.categoryID})))||void 0===n?void 0:n.composition,w(r||[]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){if(n&&n.macroCategory.length>0&&!h){u({label:n.macroCategory[0].category[0].name,value:n.macroCategory[0].category[0].id});var e=n.macroCategory.filter((function(e){return e.category.length>0})).map((function(e){return{label:e.name,options:e.category.filter((function(e){return e.composition.length>0})).map((function(e){return{label:e.name,value:e.id}}))}}));f(e);var t=[];n.macroCategory.map((function(e){return e.category.map((function(e){return t.push({categoryID:e.id,composition:e.composition})}))})),y(t)}}),[n,h]),(0,e.useEffect)((function(){s&&C(s.value)}),[s]),(0,N.jsxs)(Tg,{isMobile:r,children:[m&&m.length>1&&(0,N.jsx)(Ni,{placeholder:ae._("Choose the category","Composer"),styles:{control:function(e,t){return Z(Z({},e),{},{border:(t.isFocused,0),boxShadow:(t.isFocused,"0"),"&:hover":{border:(t.isFocused,0)},cursor:"pointer"})},container:function(e){return Z(Z({},e),{},{width:"100%",borderBottom:"2px solid #f5f6f7",cursor:"pointer"})}},components:{IndicatorSeparator:function(){return null}},isSearchable:!1,options:h,menuPosition:"fixed",value:s,onChange:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),inputValue:""}),x&&x.length>0&&(0,N.jsx)(Ig,{isMobile:r,children:x.map((function(e){return(0,N.jsxs)(Lg,{onClick:function(){return S(e.compositionID)},selected:e.compositionID===p,children:[(0,N.jsx)("img",{src:e.previewImageUrl,alt:""}),(0,N.jsx)("span",{children:e.name})]},e.compositionID)}))}),r&&(0,N.jsx)(Za,{onClick:i,children:ae._("OK","Composer")})]},"container")},Pg=(c.default.div.withConfig({displayName:"SelectorMobile__PriceInfoTextContainer",componentId:"sc-joaetr-0"})(["font-size:14px;padding:0px 10px;"]),function(){var t,n,r,i=(0,l.useZakeke)(),a=i.isSceneLoading,s=i.templates,u=i.currentTemplate,c=i.setCamera,h=i.setTemplate,f=(i.sellerSettings,i.selectOption),d=i.draftCompositions,p=re(),g=p.selectedGroupId,v=p.setSelectedGroupId,m=p.selectedAttributeId,y=p.setSelectedAttributeId,_=p.selectedStepId,b=p.setSelectedStepId,x=p.isUndo,w=p.isRedo,k=p.setSelectedTemplateGroupId,S=p.selectedTemplateGroupId,C=p.lastSelectedItem,M=p.setLastSelectedItem,A=o((0,e.useState)(null),2),E=A[0],T=A[1],I=o((0,e.useState)(null),2),L=I[0],O=I[1],P=o((0,e.useState)(null),2),R=P[0],j=P[1],F=o((0,e.useState)(!1),2),U=F[0],V=F[1],H=o((0,e.useState)(!1),2),G=H[0],Y=H[1],W=o((0,e.useState)(!1),2),q=W[0],Z=W[1],K=o((0,e.useState)(!1),2),X=K[0],Q=K[1],J=function(){var e=re(),t=e.isUndo,n=e.setUndoStack;function r(e){return t||n((function(t){var n=z(t);return e?ie||n.push([]):n.length>0&&0===n[n.length-1].length&&n.pop(),n})),ie=e}return{startRegistering:function(){var e=ie;return e||r(!0),e},endRegistering:function(e){e||r(!1)}}}(),$=oe(),ee=null!==(t=se())&&void 0!==t?t:[],te=g?ee.find((function(e){return e.id===g})):null,ne=g?null===(n=ee.find((function(e){return e.id===g})))||void 0===n?void 0:n.steps.find((function(e){return e.id===_})):null,ue=ne?ne.attributes:te?te.attributes:[],ce=ne?ne.templateGroups:te?te.templateGroups:[],le=[].concat(z(ue),z(ce)).sort((function(e,t){return e.displayOrder-t.displayOrder})),he=ue?ue.find((function(e){return e.id===m})):null,fe=ce?ce.find((function(e){return e.templateGroupID===S})):null,de=null!==(r=null===he||void 0===he?void 0:he.options)&&void 0!==r?r:[],pe=ee&&te?ee.indexOf(te):0,ge=o((0,e.useState)(Kf()),2),me=ge[0],ye=ge[1],_e=function(e){Q(J.startRegistering()),!e||g===e||x||w||($.eraseRedoStack(),$.fillUndoStack({type:"group",id:g,direction:"undo"}),$.fillUndoStack({type:"group",id:e,direction:"redo"})),v(e)},be=function(e){Q(J.startRegistering()),_===e||x||w||($.eraseRedoStack(),$.fillUndoStack({type:"step",id:_,direction:"undo"}),$.fillUndoStack({type:"step",id:null!==e&&void 0!==e?e:null,direction:"redo"})),b(e);var t=me.set(g,e);ye(t)},xe=function(e){Q(J.startRegistering()),!e||m===e||x||w||($.eraseRedoStack(),$.fillUndoStack({type:"attribute",id:m,direction:"undo"}),$.fillUndoStack({type:"attribute",id:e,direction:"redo"})),y(e),M({type:"attribute",id:e})},we=function(e){k(e),M({type:"template-group",id:e}),Z(!0)};return(0,e.useEffect)((function(){s.length>0&&!u&&h(s[0].id)}),[s]),(0,e.useEffect)((function(){ee&&1===ee.length&&-2===ee[0].id||ee&&1===ee.length&&!g&&v(ee[0].id)}),[ee,g]),(0,e.useEffect)((function(){te&&-2!==te.id&&(te.steps.length>0?me.get(g)?be(me.get(g)):(be(te.steps[0].id),1===te.steps[0].attributes.length&&0===te.steps[0].templateGroups.length?xe(te.steps[0].attributes[0].id):1===te.steps[0].templateGroups.length&&0===te.steps[0].attributes.length&&we(te.steps[0].templateGroups[0].templateGroupID)):(be(null),1===te.attributes.length&&0===te.templateGroups.length?xe(te.attributes[0].id):1===te.templateGroups.length&&0===te.attributes.length&&we(te.templateGroups[0].templateGroupID)))}),[null===te||void 0===te?void 0:te.id]),(0,e.useEffect)((function(){-2===(null===te||void 0===te?void 0:te.id)&&V(!0)}),[null===te||void 0===te?void 0:te.id]),(0,e.useEffect)((function(){-3===(null===te||void 0===te?void 0:te.id)&&Y(!0)}),[null===te||void 0===te?void 0:te.id]),(0,e.useEffect)((function(){!a&&te&&te.cameraLocationId&&c(te.cameraLocationId)}),[null===te||void 0===te?void 0:te.id,a]),(0,e.useEffect)((function(){var e,t;te&&te.steps.length>0&&(te.steps.find((function(e){return e.id===(null===ne||void 0===ne?void 0:ne.id)}))&&1===(null===(e=te.steps.find((function(e){return e.id===(null===ne||void 0===ne?void 0:ne.id)})))||void 0===e?void 0:e.attributes.length)&&0===(null===(t=te.steps.find((function(e){return e.id===(null===ne||void 0===ne?void 0:ne.id)})))||void 0===t?void 0:t.templateGroups.length)?xe(te.steps.find((function(e){return e.id===(null===ne||void 0===ne?void 0:ne.id)})).attributes[0].id):y(null))}),[null===ne||void 0===ne?void 0:ne.id]),(0,e.useEffect)((function(){X&&(J.endRegistering(!1),Q(!1))}),[X]),a?(0,N.jsx)(D,{children:(0,N.jsx)(B,{children:(0,N.jsx)(ve,{})})}):(0,N.jsxs)(Mu,{children:[te&&-2!==te.id&&te.steps&&te.steps.length>0&&(0,N.jsx)(Au,{children:(0,N.jsx)(bg,{hasNextGroup:pe!==ee.length-1,hasPreviousGroup:0!==pe,onNextStep:function(){if(te&&pe<ee.length-1){var e=ee[pe+1];_e(e.id)}},onPreviousStep:function(){if(te&&pe>0){var e=ee[pe-1];_e(e.id),e.steps.length>0&&be(e.steps[e.steps.length-1].id)}},currentStep:ne,steps:te.steps,onStepChange:function(e){e&&be(e.id)}},"steps-"+(null===te||void 0===te?void 0:te.id))}),null==te&&(0,N.jsx)(Ag,{isLeftArrowVisible:!0,isRightArrowVisible:!0,scrollLeft:null!==E&&void 0!==E?E:0,onScrollChange:function(e){return T(e)},children:ee.map((function(e){return e?(0,N.jsx)(Eg,{imageUrl:-3===e.id?Yi:e.imageUrl?e.imageUrl:zp,label:e.name?ae._d(e.name):ae._("Customize","Composer"),onClick:function(){return _e(e.id)}},e.guid):null}))}),te&&-2===te.id&&s.length>1&&(0,N.jsx)(mu,{children:s.map((function(e){return(0,N.jsx)(yu,{selected:u===e,onClick:function(){h(e.id)},children:ae._d(e.name)},e.id)}))}),te&&(0,N.jsxs)(Ag,{isLeftArrowVisible:!0,isRightArrowVisible:!0,scrollLeft:null!==R&&void 0!==R?R:0,onScrollChange:function(e){return j(e)},children:[te&&!m&&!S&&le&&le.map((function(e){return e instanceof l.ThemeTemplateGroup?(0,N.jsx)(Eg,{selected:e.templateGroupID===S,onClick:function(){return we(e.templateGroupID)},imageUrl:Fp,label:ae._d(e.name),isRound:!1,children:(0,N.jsxs)(Cu,{children:[" ",ae._d(e.name).toUpperCase()," "]})},e.templateGroupID):(0,N.jsx)(Eg,{selected:e.id===m,onClick:function(){return xe(e.id)},images:e.options.slice(0,4).map((function(e){return e.imageUrl?e.imageUrl:Fp})),label:ae._d(e.name),isRound:2===e.optionShapeType,children:(0,N.jsxs)(Cu,{children:[" ",ae._d(e.name).toUpperCase()," "]})},e.guid)})),(0,N.jsx)(Ag,{isLeftArrowVisible:0!==de.length,isRightArrowVisible:0!==de.length,scrollLeft:null!==L&&void 0!==L?L:0,onScrollChange:function(e){return O(e)},children:"attribute"===(null===C||void 0===C?void 0:C.type)?(0,N.jsx)(N.Fragment,{children:he&&he.options.map((function(e){var t;return e.enabled&&(0,N.jsx)(Eg,{isRound:2===he.optionShapeType,description:e.description,selected:e.selected,imageUrl:null!==(t=e.imageUrl)&&void 0!==t?t:"",label:ae._d(e.name),hideLabel:he.hideOptionsLabel,onClick:function(){return function(e){var t,n,r=J.startRegistering();$.eraseRedoStack(),$.fillUndoStack({type:"option",id:null!==(t=null===(n=de.find((function(e){return e.selected})))||void 0===n?void 0:n.id)&&void 0!==t?t:null,direction:"undo"}),$.fillUndoStack({type:"option",id:e.id,direction:"redo"}),c(e.attribute.cameraLocationId),f(e.id),J.endRegistering(r);try{window.algho&&window.algho.sendUserStopForm(!0)}catch(i){}}(e)}},e.guid)}))}):fe&&q&&(0,N.jsx)(Og,{templateGroup:fe,isMobile:!0,onCloseClick:function(){Z(!1),we(null),_e(null)}},S)})]}),-2===(null===te||void 0===te?void 0:te.id)&&U&&(0,N.jsx)(rc,{onCloseClick:function(){V(!1),_e(null)}}),d&&-3===(null===te||void 0===te?void 0:te.id)&&G&&(0,N.jsx)(Zp,{onCloseClick:function(){V(!1),_e(null)}})]})}),Dg=function(){var t,n,r=(0,e.useRef)(null),i=(0,l.useZakeke)(),a=i.isSceneLoading,s=(i.IS_IOS,i.IS_ANDROID,i.getMobileArUrl,i.openArMobile,i.isSceneArEnabled,i.zoomIn),u=i.zoomOut,c=i.sellerSettings,h=(i.reset,i.openSecondScreen),f=i.product,d=i.hasExplodedMode,p=i.setExplodedMode,g=o((0,e.useState)(null!==(t=null===c||void 0===c?void 0:c.isCompositionRecapVisibleFromStart)&&void 0!==t&&t),2),m=g[0],y=g[1],_=_o();_.showDialog,_.closeDialog,re().setIsLoading;(0,e.useEffect)((function(){c&&null!==c&&void 0!==c&&c.isCompositionRecapVisibleFromStart&&y(c.isCompositionRecapVisibleFromStart)}),[c]);var b=re(),x=(b.setIsUndo,b.undoStack,b.setIsRedo,b.redoStack,oe(),(0,l.useZakeke)()),w=(x.undo,x.redo,re()),k=(w.setSelectedGroupId,w.setSelectedStepId,w.setSelectedAttributeId,w.isMobile);n=se();return(0,N.jsxs)(Wu,{ref:r,children:[!a&&(0,N.jsx)(l.ZakekeViewer,{backgroundColor:"#ffffff"}),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(xu,{isMobile:k,hoverable:!0,onClick:s,children:(0,N.jsx)(v,{})},"zoomin"),(0,N.jsx)(wu,{isMobile:k,hoverable:!0,onClick:u,children:(0,N.jsx)(T,{})},"zoomout"),(0,N.jsxs)(Uu,{children:[d()&&f&&!a&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Vu,{hoverable:!0,onClick:function(){return p(!1)},children:(0,N.jsx)(Gi,{})}),(0,N.jsx)(Hu,{hoverable:!0,onClick:function(){return p(!0)},children:(0,N.jsx)(Gi,{})})]}),f&&f.isShowSecondScreenEnabled&&(0,N.jsx)(Gu,{hoverable:!0,onClick:h,children:(0,N.jsx)(Gi,{})},"secondScreen")]}),(null===c||void 0===c?void 0:c.isCompositionRecapEnabled)&&(0,N.jsx)(Yu,{onClick:function(){return y(!m)},children:(0,N.jsx)(Gi,{})},"recap")," "]})]})},Bg=(c.default.div(fg||(fg=s(["\n  position: relative;\n  display: flex;\n  flex-flow:column;\n  padding:40px 60px;\n  @media (max-width: 1024px) {\n    flex-direction: column;\n    padding:0px;\n    height: 100%;\n  }\n  @media (min-width: 1024px) {\n    width: 100%;\n    height: 100%;\n  }\n"]))),c.default.div(dg||(dg=s(["\n  position: relative;\n  display:grid;\n  grid-template-rows: 1fr auto auto;\n  height:100%;\n  width:100%;\n  overflow:hidden;\n"]))));c.default.div(pg||(pg=s(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: grid;\n  grid-template-columns: 1fr 40%;\n  min-height:0;\n\n  @media (max-width: 1024px) {\n    display:flex;\n    flex-direction: column;\n  }\n"])));var Ng,Rg,jg=function(){return(0,N.jsxs)(Bg,{children:[(0,N.jsx)(Dg,{}),(0,N.jsx)(Pg,{}),(0,N.jsx)(vl,{})]})},zg=c.default.div(Ng||(Ng=s(["\n  // display: flex; \n  // flex  \n  // height: 50%;\n  // width: 50%\n  // padding: 40px;\n  // flex-direction: column;\n\n  position: relative;\n  display: grid;\n  grid-template-rows: 0fr auto auto;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"]))),Fg=(c.default.div(Rg||(Rg=s(["\n  display: grid;\n  grid-template-rows: 1fr auto auto;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"]))),new l.ZakekeEnvironment),Ug=function(){var t=re(),n=(t.isLoading,t.setPriceFormatter,t.setSelectedAttributeId,t.setSelectedGroupId,t.setSelectedStepId,t.isMobile),r=(t.selectedGroupId,t.setIsMobile,o((0,e.useState)(!1),2)),i=r[0],a=r[1],s=(0,e.useRef)(!1);s.current=i;var u=o((0,e.useState)(!1),2),c=u[0],h=u[1];return(0,e.useEffect)((function(){var e=function(){a(!s.current)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,N.jsx)(l.ZakekeProvider,{environment:Fg,children:(0,N.jsxs)("div",{id:"modal-container",className:"css-1q5ttm8",children:[n&&(0,N.jsx)(jg,{}),!n&&(0,N.jsxs)(zg,{children:[(0,N.jsx)("div",{style:{display:"grid",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(249 246 248)"},children:(0,N.jsx)("div",{className:"ThreeDRenderer",style:c?{width:"63vw",height:"67vh"}:{width:"63vw",height:"65vh",marginTop:"26px"},children:(0,N.jsx)(l.ZakekeViewer,{})})}),(0,N.jsx)(Yc,{trayPreviewOpenButton3DFunc:function(e){h(e)}})]}),(0,N.jsx)(Lo,{})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.render((0,N.jsx)(e.StrictMode,{children:(0,N.jsx)(Ug,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}()}();
//# sourceMappingURL=main.a5677b26.js.map